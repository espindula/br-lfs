# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"POT-Creation-Date: 2019-09-02 09:14+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. type: Plain text
#: origin/qmail_cyrus.txt:2
msgid "AUTHOR: Hints Author <ivo at thecourtofeden dot org>"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:4
msgid "DATE: 2004-05-04"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:6
msgid "LICENSE: GNU Free Documentation License Version 1.2"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:8
msgid "SYNOPSIS: E-mail server based on Qmail and Cyrus IMAP"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:14
msgid ""
"DESCRIPTION: In this hint we install software that route email to a "
"destination user after it is scanned for viruses and spam. Multiple domains "
"are possible We also look at maintains backup and monitoring. This setup is "
"tested on a LFS-6 system kernel 2.6.5 glibc-2.3.3-20040326 nptl gcc-3.3.3."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:17
msgid "ATTACHMENTS: none"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:19
msgid "PREREQUISITES:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:21
msgid "A MX record in DNS"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:24
msgid ""
"Make sure there is an MX record in DNS to point mail for the virtual domains "
"to the host running qmail. (Mostly the DNS runs on the ISP side.)"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:26
#, no-wrap
msgid "   This is what roughly happens:\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:33
#, no-wrap
msgid ""
"   Here is a mail to olaf@linuxfrombinary.org to your SMTP server. \n"
"   The SMTP server wants to find out who is linuxfrombinary.org. The "
"domain\n"
"   part of that email address needs to be resolved in an ip address.\n"
"   DNS ( Domain Name Server) is used to resolve the domain in an ip\n"
"   address and point to a mail server that will accept connections.\n"
"   An MX (Mail eXchange) record is used for that.\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:42
#, no-wrap
msgid ""
"   Now the mail is routed to your ip address for your mail server on port "
"25.\n"
"   Port 25 is your SMTP port that listens for mail from your domains. \n"
"   Your IP address can be your fixed DSL ip address or a connection on\n"
"   your campus, or other fixed ip address connections to the internet. If "
"you\n"
"   behind masquerading you need to set up forwarding rules for both SMTP "
"and\n"
"   IMAP. It should be possible have a dynamic ip address domain name "
"solution\n"
"   on the internet from where you can host your mail server from dailup or "
"isdn\n"
"   connections.\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:44
msgid "HINT:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:46
#, no-wrap
msgid ""
"TABLE OF CONTENTS\n"
"=================\n"
msgstr ""

#. type: Bullet: '1.  '
#: origin/qmail_cyrus.txt:75
msgid "Sources"
msgstr ""

#. type: Bullet: '2.  '
#: origin/qmail_cyrus.txt:75
msgid "Introduction"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:75
#, no-wrap
msgid ""
"3.  Packet dependencies\n"
"  A  Berkeley DB\n"
"  B  Openssl\n"
"  C  Others\n"
"4.  Installation of Avmailgate\n"
"5.  Installation of Qmail\n"
"6.  Installation of Nail\n"
"7.  Installation of Fcron\n"
"8.  Installation of Procmail\n"
"9.  Installation of SpamAssassin dependencies\n"
"10. Installation of Razor-agents-sdk\n"
"11. Installation of Razor-agents\n"
"12. Installation of SpamAssassin\n"
"13. Installation of F-Prot Antivirus \n"
"14. Installation of Distributed Checksum Clearinghouse\n"
"15. Installation of Anomy-sanitizer\n"
"16. Installation of Imap\n"
"17. Make templates directory's\n"
"18. Add domain example.com\n"
"19. Add user John\n"
"20. Starting up all processes\n"
"21. Monitoring the processes\n"
"22. Migrating mail from backups\n"
"23. Interesting readings\n"
"24. Legal Blurb\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:79
#, no-wrap
msgid ""
"1. Sources\n"
"==========\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:83
msgid "Berkeley DB: http://www.sleepycat.com/update/snapshot/db-4.1.25.tar.gz"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:86
msgid "Openssl: ftp://ftp.openssl.org/source/openssl-0.9.7d.tar.gz"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:89
msgid ""
"Avmailgate: antivir-mailgate-2.0.2-5 "
"http://www.hbedv.com/files/antivir/release/avlxmgt.tgz"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:92
msgid ""
"The free license can be ordered here: "
"http://www.antivir.de/order/privreg/order_e.htm"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:97
msgid ""
"Qmail: http://cr.yp.to/software/qmail-1.03.tar.gz "
"http://ds9a.nl/qmail/moni.csi.hu/pub/glibc-2.3.1/qmail-1.03.errno.patch "
"http://ds9a.nl/qmail/moni.csi.hu/pub/glibc-2.3.1/qmail-1.03.qmail_local.patch"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:100
msgid "Nail: http://heanet.dl.sourceforge.net/sourceforge/nail/nail-10.7.tar.bz2"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:103
msgid "Fcron: http://fcron.free.fr/fcron-2.9.4.src.tar.gz"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:106
msgid "Procmail: http://www.procmail.org/procmail-3.22.tar.gz"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:111
msgid ""
"Razor: http://razor.sourceforge.net/download/index.html "
"razor-agents-sdk-2.03.tar.gz razor-agents-2.40.tar.gz"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:114
msgid ""
"SpamAssassin: "
"http://au2.spamassassin.org/released/Mail-SpamAssassin-2.63.tar.bz2"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:117
msgid "F-Prot Antivirus: ftp://ftp.f-prot.com/pub/linux/fp-linux-ws-4.4.2.tar.gz"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:120
msgid ""
"Distributed Checksum Clearinghouse: "
"http://www.rhyolite.com/anti-spam/dcc/source/dcc-dccm-1.2.47.tar.Z"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:123
msgid "Anomy-sanitizer: http://mailtools.anomy.net/dist/anomy-sanitizer-1.67.tar.gz"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:127
msgid ""
"IMAP/SASL: ftp://ftp.andrew.cmu.edu/pub/cyrus-mail/cyrus-sasl-2.1.18.tar.gz "
"ftp://ftp.andrew.cmu.edu/pub/cyrus-mail/cyrus-imapd-2.2.3.tar.gz"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:131
#, no-wrap
msgid ""
"2. Introduction\n"
"===============\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:135
msgid ""
"First of all I wanna thank Gerard and all the others for providing the "
"platform where we do the stuff we do."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:138
msgid ""
"In this hint we setup a mail server that serve two virtual example domains "
"and have different example users per domain:"
msgstr ""

#. type: Bullet: '   - '
#: origin/qmail_cyrus.txt:140
msgid "linuxfromsource.org"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:144
#, no-wrap
msgid ""
"      - John the Ripper          john@linuxfromsource.org\n"
"      - Susie Summer            susie@linuxfromsource.org\n"
"      - Dirk Beekmans            dirk@linuxfromsource.org\n"
msgstr ""

#. type: Bullet: '   - '
#: origin/qmail_cyrus.txt:147
msgid "linuxfrombinary.org"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:151
#, no-wrap
msgid ""
"      - Olaf Olsen               olaf@linuxfrombinary.org\n"
"      - Jennifer Loopneus    jennifer@linuxfrombinary.org\n"
"      - Pamela Andersom        pamela@linuxfrombinary.org\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:157
msgid ""
"John is the local administer so he gets the mail for root, postmaster and "
"himself. All the user names must be unique as each user has its own box so "
"if olaf have a email account on linuxfrombinary AND linuxfromsource he must "
"be the same person because its the same mailbox. And if Olaf opens his "
"mailbox he sees mail from both the domains. Comprende ?"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:160
msgid ""
"There is also a cyrus user to administer the IMAP server daemon and the "
"mailboxes. But he got a password for both for unix and imap/sasl."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:164
msgid ""
"A mail user do not needs a unix password set to get mail. If one of the mail "
"users needs access on the mail server you give him a unix password as well "
"as the imap/sasl password."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:167
msgid ""
"I really like to know if you are using this setup. So drop me a mail and "
"send me some feedback on how thing can be better."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:171
#, no-wrap
msgid ""
"3. Packet dependencies\n"
"======================\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:174
#, no-wrap
msgid ""
"A. Berkeley DB\n"
"--------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:177 origin/qmail_cyrus.txt:687
msgid "This is a default BLFS install"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:184
#, no-wrap
msgid ""
"cd build_unix &&\n"
"../dist/configure --prefix=/usr \\\n"
"  --enable-compat185 \\\n"
"  --enable-cxx &&\n"
"  make &&\n"
"  make docdir=/usr/share/doc/db-4.1.25 instal\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:187
#, no-wrap
msgid ""
"B. Open Secure Socket Layer\n"
"---------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:191
msgid ""
"This is a default BLFS install Please add you own architecture after the "
"-march switch"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:202
#, no-wrap
msgid ""
"sed 's/^passwd/openssl-passwd/' doc/apps/passwd.pod \\\n"
"  > doc/apps/openssl-passwd.pod &&\n"
"rm doc/apps/passwd.pod &&\n"
"mv doc/crypto/{,openssl_}threads.pod &&\n"
"sed -i -e 's/-m486/-march=i686/' Configure &&\n"
"./config --openssldir=/etc/ssl --prefix=/usr shared &&\n"
"make MANDIR=/usr/share/man &&\n"
"make MANDIR=/usr/share/man install &&\n"
"cp -r certs /etc/ssl &&\n"
"rmdir /etc/ssl/lib\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:205
#, no-wrap
msgid ""
"C. Other deps\n"
"-------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:210
msgid ""
"If any one know of other imap/mail deps, mail me, i have 40+ packs already "
"installed beyond lfs when i start building this server.  In "
"/path/to/cyrus-imapd-2.2.3/doc/install-prereq.html you find them all."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:214
#, no-wrap
msgid ""
"4. Installation of Avmailgate\n"
"=============================\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:219
msgid ""
"Avmailgate offers virus protection by having a daemon listening on port 25.  "
"This is the SMTP port. When mail gets thru, it checks for viruses and then "
"it uses qmail's sendmail wrapper to inject the mail into the qmail queue."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:223
msgid ""
"The other option is to have qmail's smtp server started from (x)inetd and "
"listening on port xxx where avmailgate is forwarding virus checked mail to.  "
"But this gives only more rules for the firewall when heres an other port "
"open."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:225
msgid "useradd -c 'Daemon User' -d /dev/null -g daemon -s /bin/false daemon"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:227
msgid "cd /usr/src/avmailgate-2.0.2-5/avmailgate"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:232
msgid ""
"mkdir /usr/lib/AntiVir cp vdf/antivir.vdf /usr/lib/AntiVir chown "
"daemon:daemon /usr/lib/AntiVir chown daemon:daemon "
"/usr/lib/AntiVir/antivir.vdf"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:235
msgid "cp bin/antivir /usr/lib/AntiVir chown daemon:daemon /usr/lib/AntiVir/antivir"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:239
msgid ""
"cp etc/avmailgate.conf /etc cp etc/avmailgate.acl /etc cp etc/antivir.conf "
"/etc"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:240 origin/qmail_cyrus.txt:260 origin/qmail_cyrus.txt:271 origin/qmail_cyrus.txt:515 origin/qmail_cyrus.txt:531 origin/qmail_cyrus.txt:539 origin/qmail_cyrus.txt:548 origin/qmail_cyrus.txt:559 origin/qmail_cyrus.txt:567 origin/qmail_cyrus.txt:575
#, no-wrap
msgid "--------------------------------------------------------------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:245
#, no-wrap
msgid ""
"Edit /etc/avmailgate.conf              # Here we say witch user and group \n"
"                                       # avgate runs under and to use the\n"
"                                       # sendmail wrapper from qmail that \n"
"                                       # we install in the next section.\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:247
msgid "Change:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:250
#, no-wrap
msgid ""
"# User                            uucp \n"
"# Group                           uucp\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:252
msgid "# ForwardTo /usr/lib/sendmail -oem -oi"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:254 origin/qmail_cyrus.txt:268
msgid "In:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:257
#, no-wrap
msgid ""
"  User                            daemon\n"
"  Group                           daemon\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:259
#, no-wrap
msgid "  ForwardTo /usr/sbin/sendmail -oem -oi\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:264
#, no-wrap
msgid ""
"Edit /etc/avmailgate.acl               # We do this to prevent relaying to "
"\n"
"                                       # other domains than ours.\n"
"Change:\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:266
msgid "local: hbedv.com antivir.de"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:270
msgid "local: linuxfromsource.org linuxfrombinary.org"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:275
msgid "cp bin/avgated /usr/sbin cp bin/avgatefwd /usr/sbin"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:285
msgid ""
"mkdir /var/spool/avmailgate chown daemon.daemon /var/spool/avmailgate chmod "
"700 /var/spool/avmailgate cd /var/spool/avmailgate mkdir incoming mkdir "
"outgoing mkdir rejected chown daemon.daemon * chmod -R 700 *"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:288
msgid ""
"Goto: http://www.antivir.de/order/privreg/order_e.htm fill in the form and "
"you get a key mailed to you."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:291
#, no-wrap
msgid ""
"cp hbedv.key /usr/lib/AntiVir/avmgate.key                                                    "
"\n"
"chown daemon.daemon /usr/lib/AntiVir/avmgate.key\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:293
msgid "In the fcron section we set the cron job for virus updates"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:295
msgid "cp init/rc.avgate /etc/rc.d/init.d/avgate"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:297
msgid "chmod 700 /etc/init.d/avgate"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:300
msgid ""
"Adjust the Sxx and Kxx to your situation and it might be handy to start it "
"before you start qmail."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:315
msgid ""
"cd /etc/rc.d/rc0.d && ln -s ../init.d/avgate Kxxavgate && cd ../rc1.d && ln "
"-s ../init.d/avgate Kxxavgate && cd ../rc2.d && ln -s ../init.d/avgate "
"Kxxavgate && cd ../rc3.d && ln -s ../init.d/avgate Sxxavgate && cd ../rc4.d "
"&& ln -s ../init.d/avgate Sxxavgate && cd ../rc5.d && ln -s ../init.d/avgate "
"Sxxavgate && cd ../rc6.d && ln -s ../init.d/avgate Kxxavgate"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:319
#, no-wrap
msgid ""
"5. Installation of Qmail\n"
"========================\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:322
#, no-wrap
msgid ""
"A. Patching the source\n"
"----------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:328
msgid ""
"As time progresses software change, except for qmail that sticks with "
"version number 1.0.3 for ages i guess ;) Well lets say that that if you "
"using glibc-2.3.1 or better, then qmail will not compile because of an "
"incompatible declaration of errno."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:330
msgid "To compensate for that, we use the recommended patches found at:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:332
#, no-wrap
msgid "   http://ds9a.nl/qmail/moni.csi.hu/pub/glibc-2.3.1/\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:335
#, no-wrap
msgid ""
"      qmail-1.03.errno.patch\n"
"      qmail-1.03.qmail_local.patch\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:337
msgid "Example:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:340
#, no-wrap
msgid ""
"      patch -p1 < /path/to/qmail-1.03.errno.patch\n"
"      patch -p1 < /path/to/qmail-1.03.qmail_local.patch\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:343
#, no-wrap
msgid ""
"B. Create a working directory for Qmail and untar sources\n"
"---------------------------------------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:350
msgid ""
"mkdir /opt/qmail && mkdir /opt/qmail/alias && cd /usr/src && tar zxvpf "
"qmail-1.03.tar.gz && cd qmail-1.03 &&"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:354
#, no-wrap
msgid ""
"C. Change the program parameters. Read the documentation for other\n"
"   modifications \n"
"------------------------------------------------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:357
msgid "vi conf-qmail"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:359
msgid "Add :"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:361
msgid "/opt/qmail"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:363
msgid "vi conf-cc"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:365
msgid "Add: (Use your own architecture and compiler flags)"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:367
msgid "gcc -O3 -march=i686"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:370
#, no-wrap
msgid ""
"D. Create user and group ID's\n"
"-----------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:373 origin/qmail_cyrus.txt:1272
msgid "vi /etc/group"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:375 origin/qmail_cyrus.txt:382
msgid "Add: (Use your own ID's if this is conflicting)"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:378
msgid "nofiles:x:100: qmail:x:110:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:380 origin/qmail_cyrus.txt:1266
msgid "vi /etc/passwd"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:390
msgid ""
"alias:x:1000:100::/opt/qmail/alias: qmaild:x:1001:100::/opt/qmail: "
"qmaill:x:1002:100::/opt/qmail: qmailp:x:1003:100::/opt/qmail: "
"qmailq:x:1004:110::/opt/qmail: qmailr:x:1005:110::/opt/qmail: "
"qmails:x:1006:110::/opt/qmail:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:392
msgid "pwck && grpck"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:395
#, no-wrap
msgid ""
"E. DNS Hack\n"
"-----------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:398
msgid ""
"If you use DNS response packets larger than 512 bytes qmail 1.03 chokes on "
"it sometimes."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:400
msgid "vi +24 dns.c"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:403
msgid ""
"And change: static union { HEADER hdr; unsigned char buf[PACKETSZ]; } "
"response;"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:406
msgid "In: static union { HEADER hdr; unsigned char buf[65536]; } response;"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:409
#, no-wrap
msgid ""
"F. Final compilation and installation\n"
"-------------------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:412
msgid "make setup check"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:415
#, no-wrap
msgid ""
"G. Create the init script.\n"
"--------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:420
msgid ""
"cat << EOF > /etc/rc.d/init.d/qmail #!/bin/bash # Begin "
"$rc_base/init.d/qmail"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:423 origin/qmail_cyrus.txt:735 origin/qmail_cyrus.txt:1409
msgid ""
"# Based on sysklogd script from LFS-3.1 and earlier.  # Rewritten by Gerard "
"Beekmans - gerard@linuxfromscratch.org"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:426
msgid "source /etc/sysconfig/rc source $rc_functions"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:428
msgid "test -x /opt/qmail/rc || exit 0"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:435
#, no-wrap
msgid ""
"case \"$1\" in\n"
" start)\n"
"  echo -n \"Starting Qmail...  \"\n"
"  sh -cf '/opt/qmail/rc &'\n"
"  evaluate_retval\n"
" ;;\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:441
#, no-wrap
msgid ""
" stop)\n"
"  echo -n \"Stopping Qmail... \"\n"
"  killall -9 qmail-send\n"
"  evaluate_retval\n"
" ;;\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:448
#, no-wrap
msgid ""
" restart)\n"
"  echo -n \"Restarting Qmail... \"\n"
"  killall -HUP qmail-lspawn\n"
"  killall -ALRM qmail-lspawn\n"
"  evaluate_retval\n"
" ;;\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:452
#, no-wrap
msgid ""
" *)\n"
"  echo \"Usage: $0 {start|stop|restart}\"\n"
"  exit 1\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:454 origin/qmail_cyrus.txt:1446
msgid "esac"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:456
msgid "exit 0"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:459
msgid "# End /etc/rc.d/init.d/qmail EOF"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:462
#, no-wrap
msgid ""
"H. Set up links and permissions\n"
"-------------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:465
msgid "chmod 700 /etc/rc.d/init.d/qmail"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:467
msgid "Adjust the Sxx and Kxx to your situation"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:482
msgid ""
"cd /etc/rc.d/rc0.d && ln -s ../init.d/qmail Kxxqmail && cd ../rc1.d && ln -s "
"../init.d/qmail Kxxqmail && cd ../rc2.d && ln -s ../init.d/qmail Kxxqmail && "
"cd ../rc3.d && ln -s ../init.d/qmail Sxxqmail && cd ../rc4.d && ln -s "
"../init.d/qmail Sxxqmail && cd ../rc5.d && ln -s ../init.d/qmail Sxxqmail && "
"cd ../rc6.d && ln -s ../init.d/qmail Kxxqmail"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:485
msgid "cd /usr/sbin && ln -s /opt/qmail/bin/sendmail"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:488
#, no-wrap
msgid ""
"I. Note\n"
"-------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:494
msgid ""
"Configuration of qmail can happen in many ways, read the documentation on "
"the different kinds of configurations. At the end of this document there are "
"sections which describe all the actions necessary to add a domain or "
"user. For now i explain the steps."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:497
#, no-wrap
msgid ""
"J. Editing the Qmail Control/Config files\n"
"-----------------------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:506
msgid ""
"Editing the control files is tricky and I've spent lot's of time fiddling "
"around with it. Key thing to understand is that the host and domain name "
"have something to do with the canonicalized name that is assigned to your "
"link with the internet.  For the people that use a ppp or an adsl connection "
"this is often something like sdf23-2.dsl.blabla.com Please don't ask me why, "
"it works and if anyone has a good explanation mail me !!"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:512
msgid ""
"One way of finding out is with the commands that come with bind dig or "
"nslookup you can also try to login on an other box, logout, and than run to "
"that other box login again and read: your last login was on "
"xxx.xxxx.xxxxx.org or do an chat session on that box. I know it isn't "
"elegant but it works ;-)"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:514
msgid "For now lets hack some qmail"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:518
msgid "cat << EOF > /opt/qmail/rc #!/bin/sh"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:521
msgid ""
"# Using splogger to send the log through syslog.  # Using qmail-local to "
"deliver messages to Maildir by default."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:525
#, no-wrap
msgid ""
"exec env - PATH=\"/opt/qmail/bin:$PATH\" \\\n"
"   qmail-start ./Maildir/ splogger qmail &\n"
"EOF\n"
"--------------------------------------------------------------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:528
msgid "chmod 700 /opt/qmail/rc"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:530
msgid "cd /opt/qmail/control"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:534
#, no-wrap
msgid ""
"Edit: me                               # This is the hostname of local "
"server\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:536 origin/qmail_cyrus.txt:544 origin/qmail_cyrus.txt:554 origin/qmail_cyrus.txt:564 origin/qmail_cyrus.txt:572 origin/qmail_cyrus.txt:583 origin/qmail_cyrus.txt:1033
msgid "Add:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:538
msgid "<hostname> (example adsl32.net.xs4all.nl)"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:542
#, no-wrap
msgid "Edit: virtualdomains                   # Specify virtual domains \n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:547
msgid "linuxfromsource.org:source linuxfrombinary.org:binary"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:552
#, no-wrap
msgid ""
"Edit: locals                           # Domains that should be treated as "
"\n"
"                                         locals\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:558
#, no-wrap
msgid ""
"localhost                              # The local name\n"
"adsl32.net.xs4all.nl                   # The canonicalized name\n"
"intern.net                             # An example local domain\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:562
#, no-wrap
msgid ""
"Edit: defaultdomain                    # Same as 'me' minus the first part "
"\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:566
msgid "<domainname> (example net.xs4all.nl)"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:570
#, no-wrap
msgid "Edit: smtpgreeting                     # Adjust to taste\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:574
msgid "Hi and welcome to this SMTP server"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:581
#, no-wrap
msgid ""
"Edit: rcpthosts                        # Important file to prevent relaying "
"of\n"
"                                         mail by outsiders, List all "
"machines\n"
"                                         and domains on the network that \n"
"                                         allowed to relay mail on this "
"server.\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:589
msgid ""
"linuxfrombinary.org linuxfromsource.org otherinterndomain.org internhost1 "
"internhost2"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:591
msgid "chmod 644 *"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:597
msgid ""
"Make the aliases, John is a mortal user on the system who gets "
"administrative email eg for root and for bounced or failed messages.  The "
"first three aliases are necessary. For each user an alias is a necessity.  "
"and only needs the username"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:599 origin/qmail_cyrus.txt:1778
msgid "cd /opt/qmail/alias"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:603
msgid ""
"echo john > .qmail-mailer-daemon echo john > .qmail-postmaster echo john > "
".qmail-root"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:605
msgid "and further for all users:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:607
msgid "echo <user> > .qmail-<user>"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:609
msgid "eg"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:611
msgid "echo john > .qmail-john"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:614
#, no-wrap
msgid ""
"K. Per user virtual domain config \n"
"---------------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:620
msgid ""
"Now we split up our users for the virtual domains. If new mail arrives it is "
"forwarded to the user in the first part of the email address. Lets say there "
"is mail for susie@linuxfromsource.org. The alias file .qmail-susie is used "
"to forward the mail to susie, '&user' means forward. The .qmail file in her "
"home directory now determine the faith of the message."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:625
msgid ""
"The file .qmail-default is used if all other usernames fails to have a "
".qmail-<user> alias for it. For example 'zuzie@linuxfromsource.org'.  You "
"can write one line that says: ./Maildir/ to .qmail-default.  Now unresolved "
"mail is sitting in the /home/virt-dom/Maildir/new directory."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:629
msgid ""
"John is the local mail admin who loves to get the unresolved mail and "
"therefore we say &john to '.qmail-default'. Now John determine the faith of "
"the message.  He either trash it of forward it to the appropriate recipient."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:641
#, no-wrap
msgid ""
"cd /home/source\n"
"/opt/qmail/bin/maildirmake Maildir\n"
"echo '&john'       > .qmail-default\n"
"echo '&john'       > .qmail-postmaster\n"
"echo '&john'       > .qmail-webmaster\n"
"echo '&john'       > .qmail-root\n"
"echo '&john'       > .qmail-john\n"
"echo '&susie'      > .qmail-susie\n"
"echo '&dirk'       > .qmail-dirk\n"
"chown -R source.mailuser .\n"
"chmod 640 .qmail-*\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:653
#, no-wrap
msgid ""
"cd /home/binary\n"
"/opt/qmail/bin/maildirmake Maildir\n"
"echo '&john'       > .qmail-default\n"
"echo '&john'       > .qmail-postmaster\n"
"echo '&john'       > .qmail-webmaster\n"
"echo '&john'       > .qmail-root\n"
"echo '&olaf'       > .qmail-olaf\n"
"echo '&jennifer'   > .qmail-jennifer\n"
"echo '&pamela'     > .qmail-pamela\n"
"chown -R binary.mailuser .\n"
"chmod 640 .qmail-*\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:656
msgid ""
"And now for all users substitute <user> for the login name. Here comes the "
"filtering with procmail into play."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:658
msgid "cd /home/<user>"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:660
msgid "echo '| preline /usr/bin/procmail' > .qmail"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:662
msgid "Now make sure the permissions are set right."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:664
msgid "chown -R <user>.mailuser <userdir>/ (for all users)"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:668
#, no-wrap
msgid ""
"6. Installation of nail\n"
"=======================\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:672
msgid ""
"This peace of software is used by internal processes such as fcron. It a "
"small command line utility for sending email."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:680
msgid ""
"./configure --prefix=/usr \\ --with-mailspool=/var/mail \\ "
"--with-sendmail=/usr/sbin/sendmail && make && make install && cd /usr/bin && "
"ln -s /usr/bin/nail mail"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:684
#, no-wrap
msgid ""
"7. Installation of fcron\n"
"========================\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:690
msgid ""
"Fcron is the program we use as scheduler for some virus update scripts.  Its "
"a very handy program anyway so here we go."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:693
#, no-wrap
msgid ""
"A. Adding a new entry to the syslog\n"
"-----------------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:697
msgid ""
"cat >> /etc/syslog.conf << \"EOF\" # Begin fcron addition to "
"/etc/syslog.conf"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:699
msgid "cron.* -/var/log/cron.log"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:702
msgid "# End fcron addition EOF"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:704
msgid "/etc/rc.d/init.d/sysklogd reload"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:707
#, no-wrap
msgid ""
"B. Setting up a fcron user and group.\n"
"-------------------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:710
msgid "Use your own id's when necessary"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:713
msgid "vi /etc/passwd fcron:x:14:14::/dev/null:/bin/false"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:716
msgid "vi /etc/group fcron:x:14:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:719
#, no-wrap
msgid ""
"C. Configure and build fcron\n"
"----------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:724
msgid "./configure --without-sendmail --with-answer-all=no && make && make install"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:727
#, no-wrap
msgid ""
"D. Add init script to /etc/rc.d/init.d\n"
"--------------------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:732
msgid ""
"cat > /etc/rc.d/init.d/fcron << \"EOF\" #!/bin/sh # Begin "
"$rc_base/init.d/fcron"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:738 origin/qmail_cyrus.txt:1412
msgid ". /etc/sysconfig/rc . $rc_functions"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:744
#, no-wrap
msgid ""
"case \"$1\" in\n"
"\tstart)\n"
"\t\techo \"Starting fcron...\"\n"
"\t\tloadproc fcron\n"
"\t\t;;\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:749
#, no-wrap
msgid ""
"\tstop)\n"
"\t\techo \"Stopping fcron...\"\n"
"\t\tkillproc fcron\n"
"\t\t;;\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:755
#, no-wrap
msgid ""
"\trestart)\n"
"\t\t$0 stop\n"
"\t\tsleep 1\n"
"\t\t$0 start\n"
"\t\t;;\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:759
#, no-wrap
msgid ""
"\tstatus)\n"
"\t\tstatusproc fcron\n"
"\t\t;;\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:765
#, no-wrap
msgid ""
"\t*)\n"
"\t\techo \"Usage: $0 {start|stop|restart|status}\"\n"
"\t\texit 1\n"
"\t\t;;\n"
"esac\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:768
msgid "# End $rc_base/init.d/fcron EOF"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:770
#, no-wrap
msgid ""
"E. Set up links and permissions\n"
"-------------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:773
msgid "chmod 700 /etc/rc.d/init.d/fcron"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:775
msgid "Adjust the Sxx and Kxx to your situation."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:790
msgid ""
"cd /etc/rc.d/rc0.d && ln -s ../init.d/fcron Kxxfcron && cd ../rc1.d && ln -s "
"../init.d/fcron Kxxfcron && cd ../rc2.d && ln -s ../init.d/fcron Kxxfcron && "
"cd ../rc3.d && ln -s ../init.d/fcron Sxxfcron && cd ../rc4.d && ln -s "
"../init.d/fcron Sxxfcron && cd ../rc5.d && ln -s ../init.d/fcron Sxxfcron && "
"cd ../rc6.d && ln -s ../init.d/fcron Kxxfcron"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:792
msgid "use this to start fron"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:794
msgid "/etc/init.d/fcron start"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:796
msgid "So if we want to make use of the scheduler do this"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:798
msgid "fcrontab -e -u root"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:800
msgid "We add the entries we need when appropriate programs are installed."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:802
msgid "Avmailgate:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:804
msgid "25 0 * * * root /usr/lib/AntiVir/antivir --update -q"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:806
msgid "F-prot Antivirus:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:808
#, no-wrap
msgid "27 4,16 * * *   /usr/f-prot/tools/check-updates.pl -cron\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:812
#, no-wrap
msgid ""
"8. Installation of Procmail\n"
"===========================\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:815
msgid "This is a default BLFS install."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:818
msgid "We use procmail to filter the email and deliver it to the cyrus imap system."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:821
msgid "make BASENAME=/usr install && make install-suid"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:825
#, no-wrap
msgid ""
"9. Installation of SpamAssassin dependencies\n"
"============================================\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:829
msgid "read: http://spamassassin.taint.org/dist/INSTALL"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:832
msgid ""
"There are some perl-modules that not come with the presumed perl-5.8.3 "
"standard installation in LFS 5.1 or perl-5.8.3 in general."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:835
msgid ""
"SpamAssassin Razor Cyrus and probably more depends on perl, no worries there "
"is an easy way to update your system."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:838
#, no-wrap
msgid ""
"A. The direct internet way\n"
"--------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:840
msgid "When you are connected to the internet commence this as root:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:842 origin/qmail_cyrus.txt:901 origin/qmail_cyrus.txt:1021 origin/qmail_cyrus.txt:1087
msgid "perl -MCPAN -e shell"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:846
msgid ""
"A series of questions is asked and stores this information in: "
"/usr/lib/perl5/5.8.3/CPAN/Config.pm"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:849
msgid ""
"if you get weird looping experiences say /usr/bin/wget --passive in the "
"questions asked."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:851
msgid "Now type this in the CPAN shell:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:853
msgid "o conf prerequisites_policy ask"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:856
msgid "And now for ease of administration, install these optional perl modules."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:859
msgid "i /Term::ReadKey/ install Term::ReadKey"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:862
msgid "i /Term::ReadLine/ install Term::ReadLine"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:865
msgid "i /Term::ReadLine::Gnu/ install Term::ReadLine::Gnu"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:868
msgid "i /Term::ReadLine::Perl/ install Term::ReadLine::Perl"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:872
msgid ""
"What follows are dependences of SpamAssassin although it doesn't need it, it "
"makes life easyer ;)"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:875
msgid "i /HTML::Parser/ install HTML::Parser"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:878
msgid "i /DB_File/ install DB_File"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:882
msgid ""
"If you are using a nptl system (LFS-6) you get an error during the test.  "
"Proceed as follows:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:887
msgid "quit cd /where_ever/cpan/build/DB_File-1.808 make clean vi Makefile.PL"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:890
msgid "Add -lpthread to the $LIBS variable so line 28 reads:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:892
#, no-wrap
msgid "      { $LIBS = '-ldb  -lpthread' }\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:897 origin/qmail_cyrus.txt:964 origin/qmail_cyrus.txt:974 origin/qmail_cyrus.txt:988
msgid "perl Makefile.PL make make test make install"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:899
msgid "And continue:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:904
msgid "i /Mail::Audit/ install Mail::Audit"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:906 origin/qmail_cyrus.txt:919
msgid "You can safely say yes to these dependencies:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:911
#, no-wrap
msgid ""
"    Mail::Mailer\n"
"    MIME::Entity\n"
"    Mail::Internet\n"
"    IO::Stringy\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:914
msgid "i /Net::SMTP/ install Net::SMTP"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:917
msgid "i /Net::DNS/ install Net::DNS"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:922
#, no-wrap
msgid ""
"   Digest::HMAC_MD5\n"
"   Digest::SHA1\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:925
msgid "i /ExtUtils::MakeMaker/ install ExtUtils::MakeMaker"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:927 origin/qmail_cyrus.txt:1026
msgid "quit"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:929
msgid "These are versions are installed."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:945
msgid ""
"DB_File-1.808 Digest-HMAC-1.01 Digest-SHA1-2.10 ExtUtils-MakeMaker-6.21 "
"HTML-Parser-3.36 HTML-Tagset-3.03 IO-stringy-2.109 MIME-tools-5.411 "
"Mail-Audit-2.1 MailTools-1.62 Net-DNS-0.47 Term-ReadLine-Gnu-1.14 "
"Term-ReadLine-Perl-1.0203 TermReadKey-2.21 libnet-1.18"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:947
msgid "Once the modules are installed you can read all about it by doing:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:949
msgid "perldoc <name>::<name>"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:951
msgid "eg:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:953
msgid "perldoc Mail::Audit"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:956
#, no-wrap
msgid ""
"B. The local source tarball method, sometimes less troublesome\n"
"--------------------------------------------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:959
msgid "Untar any of the above modules archives and say:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:968
#, no-wrap
msgid ""
"10. Installation of Razor-agents-sdk\n"
"====================================\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:978
#, no-wrap
msgid ""
"11. Installation of Razor-agents\n"
"================================\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:981
msgid "Read: http://razor.sourceforge.net/docs/"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:983
msgid "Untar the razor-agents archive and say:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:992
msgid ""
"I got an error at the end of make install something like: Digest::SHA1 "
"object version 2.01 does not match bootstrap parameter 2.10 at blablabla"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:994
msgid "I did the amazingly following thing. I went to:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:996
msgid "/where_ever/cpan/build/Digest-SHA1-2.10/"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:998
msgid "and issue a:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1000
msgid "make install"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1003
msgid ""
"Then i removed the source directory of razor-agents and untarred the tarball "
"cleanly again. After that razor compiled clean."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1005
msgid "maybe you have to issue a:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1008
msgid "mv /man/man5/razor-* /usr/share/man/man5/ rm -fr /man"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1010
msgid "Now proceed with executing:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1014
#, no-wrap
msgid ""
"razor-client           # creates symbolic links\n"
"razor-admin -create    # creates the razor home\n"
"razor-admin -register  # registers an account\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1018
#, no-wrap
msgid ""
"12. Installation of SpamAssassin\n"
"================================\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1024
msgid "i /Mail::SpamAssassin/ install Mail::SpamAssassin"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1029
msgid ""
"If you want to prevent spam checking from eg. user@domain.com you only have "
"to this:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1031
msgid "Edit /etc/mail/spamassassin/local.cf"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1035
msgid "whitelist_from user@domain.com"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1040
msgid ""
"Test it spamassassin -t < sample-nonspam.txt > nonspam.out spamassassin -t < "
"sample-spam.txt > spam.out"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1042
msgid "In the header of spam.out you find an spam indication."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1046
#, no-wrap
msgid ""
"13. Installation of F-Prot Antivirus.\n"
"=====================================\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1049
msgid "This software is used by anomy mail sanitizer."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1051
msgid "cd /usr"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1053
msgid "tar xvfz /path/to/fp-linux-ws-4.4.2.tar.gz"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1057
msgid ""
"ln -fs /usr/f-prot/f-prot.sh bin/f-prot ln -fs "
"/usr/f-prot/man_pages/f-prot.1 /usr/share/man/man1/ ln -fs "
"/usr/f-prot/man_pages/check-updates.pl.8 /usr/share/man/man8/"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1060
msgid "chmod +x /usr/f-prot/f-prot chmod +x /usr/f-prot/tools/check-updates.pl"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1063
msgid "vi /usr/f-prot/f-prot.sh"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1066
msgid "Change: exec /usr/local/f-prot/f-prot ${@+\"$@\"}"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1069
msgid "To: exec /usr/f-prot/f-prot ${@+\"$@\"}"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1072
msgid "vi /usr/f-prot/tools/check-updates.pl"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1075
msgid "Change: my $signatureDirectory = '/usr/local/f-prot/';"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1078
msgid "to: my $signatureDirectory = '/usr/f-prot/';"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1081
msgid "And test it."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1083
msgid "f-prot -verno"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1085
msgid "f-prot /etc/passwd"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1091
msgid "install Bundle::libnet install Bundle::LWP install IO"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1094
msgid ""
"In the cron section of this hint you find the appropriate entry.  for now "
"test the virus update script."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1096
msgid "/usr/f-prot/tools/check-updates.pl"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1099
msgid "For more information see this:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1101
msgid "/usr/bin/f-prot -help"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1105
#, no-wrap
msgid ""
"14. Installation of Distributed Checksum Clearinghouse\n"
"======================================================\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1108
msgid "This software is used by SpamAssassin"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1110
msgid "From the man page:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1113
msgid ""
"The Distributed Checksum Clearinghouse or DCC is a cooperative, distributed "
"system intended to detect \"bulk\" mail or mail sent to many people."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1115
msgid "add to /etc/passwd :"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1117
msgid "bin:x:1:1:bin:/bin:/bin/sh"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1121
msgid "./configure --bindir=/usr/bin --mandir=/usr/man && make && make install"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1125
#, no-wrap
msgid ""
"15. Installation of Anomy-sanitizer\n"
"===================================\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1129
msgid ""
"Anomy-sanitizer uses this perl library's, but they are already installed "
"with a standard perl install."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1132
msgid "MIME::Base64 MIME::QuotedPrint"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1135
msgid "Untar the packet in /usr/src"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1141
msgid ""
"cd /usr/src mv anomy /usr chmod 750 /usr/anomy mkdir /var/quarantine chown "
"-R 0.0 anomy"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1145
msgid ""
"This whole section is used from the mail.txt hint.  Its a good config so why "
"not use it ?"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1150
msgid ""
"cat > /usr/anomy/anomy.conf << \"EOF\" # Configuration file for Anomy "
"Sanitizer #"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1153
msgid "# Do not log to STDERR: feat_log_stderr = 0"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1156
msgid "# Don't insert log in the message itself: feat_log_inline = 0"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1161
msgid ""
"# Advertisement to insert in each mail header: header_info = X-Sanitizer: "
"This mail was sanitized header_url = 0 header_rev = 0"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1164
msgid "# Enable filename based policy decisions: feat_files = 1"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1167
msgid "# Protect against buffer overflows and null values: feat_lengths = 1"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1170
msgid "# Replace MIME boundaries with our own: feat_boundaries = 1"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1173
msgid "# Fix invalid and ambiguous MIME boundaries, if possible: feat_fixmime = 1"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1177
msgid ""
"# Trust signed and/or encrypted messages: feat_trust_pgp = 1 msg_pgp_warning "
"= WARNING: Unsanitized content follows.\\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1180
msgid "# Defang shell scripts: feat_scripts = 0"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1183
msgid "# Defang active HTML: feat_html = 1"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1186
msgid "# Defang UUEncoded files: feat_uuencoded = 0"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1189
msgid "# Sanitize forwarded content too: feat_forwards = 1"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1192
msgid "# Testing? Set to 1 for testing, 0 for production: feat_testing = 0"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1195
msgid "## Warn user about unscanned parts, etc.  feat_verbose = 1"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1199
msgid ""
"# Force all parts (except text/html parts) to # have file names.  "
"feat_force_name = 1"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1202
msgid "# Disable web bugs: feat_webbugs = 1"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1206
msgid "# Disable \"score\" based mail discarding: score_panic = 0 score_bad = 0"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1211
msgid ""
"msg_file_drop = \\n*****\\n msg_file_drop += NOTE: An attachment named "
"%FILENAME was deleted from msg_file_drop += this message because was a "
"windows executable.  msg_file_drop += Contact the system administrator for "
"more information."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1215
msgid "## ## File attachment name mangling rules: ##"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1217
#, no-wrap
msgid "file_name_tpl       = /var/quarantine/att-$F-$T.$$\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1221
msgid ""
"# Number of rulesets we are defining: file_list_rules = 2 "
"file_default_policy = defang"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1227
msgid ""
"# Delete probably nasty attachments: file_list_1 = (?i)(winmail.dat)| "
"file_list_1 += "
"(\\.(vb[se]|exe|com|cab|dll|ocx|msi|cmd|bat|pif|lnk|hlp|ms[ip]|reg|asd))$ "
"file_list_1_policy = drop file_list_1_scanner = 0"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1233
msgid ""
"# Allow known \"safe\" file types and those that can be # scanned by the "
"downstream virus scanner: file_list_2 = "
"(?i)\\.(doc|dot|rtf|xls|ppt|xlw|jpg|gif|png|tiff?|txt|zip|tgz|gz)  "
"file_list_2_policy = accept file_list_2_scanner = 0"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1236
msgid "# Any attachment not listed above gets renamed.  EOF"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1240
#, no-wrap
msgid ""
"16. Installation of Imap\n"
"========================\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1243
#, no-wrap
msgid ""
"A. Compile and install SASL\n"
"---------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1246
msgid "If you have a LFS-6 system (linux-2.6.x glibc+nptl):"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1248
msgid "export LDFLAGS=\"-lpthread\""
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1253
#, no-wrap
msgid ""
"./configure --prefix=/usr --disable-krb4 \\\n"
"   --with-gnu-ld &&\n"
"make &&\n"
"make install\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1255
msgid "chmod 4755 /usr/cyrus/deliver"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1258
#, no-wrap
msgid ""
"B. Create uid/gid for the cyrus admin\n"
"-------------------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1261
msgid "mkdir /usr/cyrus"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1264
msgid ""
"We assume a user of \"cyrus\" and a group of \"mail\", though any user and "
"group name can be used."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1268 origin/qmail_cyrus.txt:1274
#, no-wrap
msgid "   Add: (Use your own ID's if this is conflicting)\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1270
msgid "cyrus:x:90:90:Imap-Server:/usr/cyrus:/bin/bash"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1276
msgid "mail:x:90:daemon"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1278
msgid "passwd cyrus &&"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1280
msgid "pwck && pwconv"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1283
#, no-wrap
msgid ""
"C. Compile and install IMAP\n"
"---------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1286
msgid "export CPPFLAGS=\"-I/usr/include/et\""
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1295
#, no-wrap
msgid ""
"./configure --prefix=/usr \\\n"
" --with-auth=unix \\\n"
" --without-krb \\\n"
" --with-cyrus-user=cyrus \\\n"
" --with-cyrus-group=mail &&\n"
"make depend &&\n"
"make all &&\n"
"make install\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1297
msgid "And install some tools"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1301
msgid ""
"cp -av tools/ /usr/cyrus rm -fr /usr/cyrus/tools/CVS chown -R cyrus.mail "
"/usr/cyrus"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1304
#, no-wrap
msgid ""
"D. Configuring IMAP\n"
"-------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1307
msgid "Add these two lines to your /etc/syslog.conf"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1310
msgid "local6.debug -/var/log/imapd.log auth.debug -/var/log/auth.log"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1312
msgid "touch /var/log/imapd.log"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1315
msgid "The last 3 lines are only necessary if you use SSL Create /etc/imapd.conf"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1326
msgid ""
"cat > /etc/imapd.conf << \"EOF\" configdirectory: /var/imap "
"partition-default: /var/spool/imap admins: cyrus sasl_pwcheck_method: "
"saslauthd allowanonymouslogin: no tls_ca_file: /var/imap/server.pem "
"tls_cert_file: /var/imap/server.pem tls_key_file: /var/imap/server.pem EOF"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1329
#, no-wrap
msgid ""
"E. Making the director's\n"
"------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1335
msgid ""
"mkdir /var/imap /var/spool/imap chown cyrus.mail /var/imap /var/spool/imap "
"chmod 750 /var/spool/imap chmod 750 /var/imap"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1338
#, no-wrap
msgid ""
"F. Making the imap structure\n"
"----------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1343
msgid "su - cyrus tools/mkimap exit"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1346
msgid "chattr +S /var/spool/imap chattr +S /opt/qmail/queue"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1348
msgid "When users are added do:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1351
msgid "cd /var/imap chattr -R +S user/*"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1354
#, no-wrap
msgid ""
"G. Change Other files\n"
"---------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1358
msgid ""
"Added to /etc/services although only imap/imaps is needed.  This is what the "
"manual recommends."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1371
#, no-wrap
msgid ""
"   pop3      110/tcp\n"
"   nntp      119/tcp\n"
"   imap      143/tcp\n"
"   imsp      406/tcp\n"
"   nntps     563/tcp\n"
"   acap      674/tcp\n"
"   imaps     993/tcp\n"
"   pop3s     995/tcp\n"
"   kpop      1109/tcp\n"
"   sieve     2000/tcp\n"
"   lmtp      2003/tcp\n"
"   fud       4201/udp\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1374
#, no-wrap
msgid ""
"H. Setting the cyrus user password for imap\n"
"-------------------------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1377
msgid "/usr/sbin/saslpasswd2 cyrus"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1379
msgid "chown cyrus.mail /etc/sasldb2"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1381
msgid "cd /usr/src/cyrus-imapd-2.2.3"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1383
msgid "You can uncomment the things you don't like here"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1385
msgid "cp master/conf/normal.conf /etc/cyrus.conf"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1388
#, no-wrap
msgid ""
"I. Getting SSL to work.\n"
"-----------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1392
msgid ""
"We already adapted the /etc/imapd.conf for SSL Its known that M$ Outlook and "
"Netscape mail clients can handle SSL connections."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1394
msgid "Type this:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1398
#, no-wrap
msgid ""
"openssl req -new -x509 -nodes -out /var/imap/server.pem -keyout \\\n"
"   /var/imap/server.pem -days 365 &&\n"
"chown cyrus.mail /var/imap/server.pem\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1401
#, no-wrap
msgid ""
"J. Making the init.d script.\n"
"----------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1406
msgid ""
"cat > /etc/rc.d/init.d/imapd << \"EOF\" #!/bin/bash # Begin "
"$rc_base/init.d/imapd"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1419
#, no-wrap
msgid ""
"case \"$1\" in\n"
" start)\n"
"  echo \"Starting the IMAP server...\"\n"
"  /usr/cyrus/bin/master &\n"
"  evaluate_retval\n"
"  ;;\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1424
#, no-wrap
msgid ""
" stop)\n"
"  echo \"Stopping the IMAP server...\"\n"
"  killproc /usr/cyrus/bin/master\n"
"  ;;\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1429
#, no-wrap
msgid ""
" reload)\n"
"  echo \"Reloading the IMAP server...\"\n"
"  reloadproc /usr/cyrus/bin/master\n"
"  ;;\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1435
#, no-wrap
msgid ""
" restart)\n"
"  $0 stop\n"
"  sleep 1\n"
"  $0 start\n"
"  ;;\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1439
#, no-wrap
msgid ""
" status)\n"
"  statusproc /usr/cyrus/bin/master\n"
"  ;;\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1444
#, no-wrap
msgid ""
" *)\n"
"  echo \"Usage: $0 {start|stop|reload|restart|status}\"\n"
"  exit 1\n"
"  ;;\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1449
msgid "# End $rc_base/init.d/imapd EOF"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1451
msgid "Adjust the runlevel link numbers Kxx and Sxx to taste."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1453
msgid "chmod 700 /etc/rc.d/init.d/imapd &&"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1468
msgid ""
"cd /etc/rc.d/rc0.d && ln -s ../init.d/imapd Kxximapd && cd ../rc1.d && ln -s "
"../init.d/imapd Kxximapd && cd ../rc2.d && ln -s ../init.d/imapd Kxximapd && "
"cd ../rc3.d && ln -s ../init.d/imapd Sxximapd && cd ../rc4.d && ln -s "
"../init.d/imapd Sxximapd && cd ../rc5.d && ln -s ../init.d/imapd Sxximapd && "
"cd ../rc6.d && ln -s ../init.d/imapd Kxximapd"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1470
msgid "/etc/init.d/imapd start"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1472
msgid "Well, if it works, you supposed to see this:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1481
#, no-wrap
msgid ""
"netstat -vat\n"
"Active Internet connections (servers and established)\n"
"Proto Recv-Q Send-Q Local Address           Foreign Address         State      "
"\n"
"tcp        0      0 *:imaps                 *:*                     LISTEN      "
"\n"
"tcp        0      0 *:pop3s                 *:*                     LISTEN      "
"\n"
"tcp        0      0 *:pop3                  *:*                     LISTEN      "
"\n"
"tcp        0      0 *:imap                  *:*                     LISTEN      "
"\n"
"tcp        0      0 *:sieve                 *:*                     LISTEN      "
"\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1484
msgid ""
"You might only need imap or imaps , adjust this in /etc/cyrus.conf Comment "
"out services that you don't want."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1487
#, no-wrap
msgid ""
"K. Check configuration\n"
"----------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1490
msgid "Now lets see what works and what not."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1492
msgid "If you want to login with telnet to test you need to add:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1494
msgid "allowplaintext yes"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1496
msgid "to /etc/imapd.conf"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1498
msgid "Now try:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1500
msgid "telnet localhost imap"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1504
msgid ""
"Test all the authentications possible and again fiddling with the "
"/etc/imapd.conf wont hurt. Read the imapd.conf man page and just change the "
"the config file, restart the daemon and:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1508
msgid ""
"tail -f /var/log/imapd.log tail -f /var/log/sys.log tail -f "
"/var/log/auth.log"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1510
msgid "Now become the cyrus admin and test the various options."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1512 origin/qmail_cyrus.txt:1534 origin/qmail_cyrus.txt:1902
msgid "su - cyrus"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1517
msgid ""
"imtest -m login -p imap localhost imtest -m OTP -p imap localhost imtest -m "
"DIGEST-MD5 -p imap localhost imtest -m CRAM-MD5 -p imap localhost"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1520
msgid "Use this to bail out !! . logout"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1522
msgid "You can test STARTTLS by using imtest:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1524
msgid "imtest -t \"\" localhost"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1527
#, no-wrap
msgid ""
"L. Per User Imap Configuration\n"
"------------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1530
msgid "This is the bare minimum to perform for each imap user you want to add."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1532
msgid "First become the cyrus administrator"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1536
msgid "Use the cyradm program to administer the IMAP folders for each user."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1538
msgid "cyradm --auth login localhost"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1542 origin/qmail_cyrus.txt:1769
msgid ""
"localhost.localnet> cm user.john localhost.localnet> cm user.john.SPAM "
"localhost.localnet> quit"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1544
msgid "Become root again"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1546 origin/qmail_cyrus.txt:1771
msgid "exit"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1548
msgid "And set the imap password for john"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1550 origin/qmail_cyrus.txt:1773
msgid "saslpasswd2 john"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1554
msgid ""
"There are more things possible, but knowing to delete a mailbox is handy if "
"you new to all this."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1557
msgid ""
"Say to the access control list of the user john mailbox that the cyrus user "
"may delete john's folders, this is not the default case."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1559
msgid "localhost.localnet> setaclmailbox user.john cyrus c"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1561
msgid "localhost.localnet> deletemailbox user.john"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1563
msgid "If you want to get into it do this:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1565
msgid "localhost.localnet> help"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1587
#, no-wrap
msgid ""
"authenticate, login, auth         authenticate to server\n"
"chdir, cd                         change current directory\n"
"createmailbox, create, cm         create mailbox\n"
"deleteaclmailbox, deleteacl, dam  remove ACLs from mailbox\n"
"deletemailbox, delete, dm         delete mailbox\n"
"disconnect, disc                  disconnect from current server\n"
"exit, quit                        exit cyradm\n"
"help, ?                           show commands\n"
"info                              display mailbox/server metadata\n"
"listacl, lam, listaclmailbox      list ACLs on mailbox\n"
"listmailbox, lm                   list mailboxes\n"
"listquota, lq                     list quotas on specified root\n"
"listquotaroot, lqr, lqm           show quota roots and quotas for mailbox\n"
"reconstruct                       reconstruct mailbox (if supported\n"
"renamemailbox, rename, renm       rename (and optionally relocate) mailbox\n"
"server, servername, connect       show current server or connect to server\n"
"setaclmailbox, sam, setacl        set ACLs on mailbox\n"
"setinfo                           set server metadata\n"
"setquota, sq                      set quota on mailbox or resource\n"
"version, ver                      display version info of current server\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1591
#, no-wrap
msgid ""
"17. Make templates directory's \n"
"=============================\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1593
#, no-wrap
msgid ""
"A. Create a domain template directory\n"
"-------------------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1597
msgid ""
"mkdir /etc/skel.domain cd /etc/skel.domain /opt/qmail/bin/maildirmake "
"Maildir"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1600
#, no-wrap
msgid ""
"B. Create a user template directory\n"
"-----------------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1603
msgid "touch /var/log/procmail.log chmod 666 /var/log/procmail.log"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1605
msgid "mkdir /etc/skel.user"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1608
msgid "cd /etc/skel.user echo '| preline /usr/bin/procmail' > .qmail"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1619
#, no-wrap
msgid ""
"cat > .procmailrc << \"EOF\"\n"
"USER=\"<user>\"                          # here you define the username\n"
"PATH=/usr/bin:/bin:/usr/cyrus/bin:/usr/anomy/bin\n"
"SHELL=/bin/bash\n"
"#VERBOSE=1                             # uncomment these if you want to "
"see\n"
"#LOGABSTRACT=all                       # more what's happening in "
"procmail.log\n"
"LOGFILE=\"/var/log/procmail.log\"\n"
"SANE=\"deliver -a $USER -m user.$USER\"\n"
"SPAM=\"$SANE.SPAM\"\n"
"ANOMY=/usr/anomy\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1627
#, no-wrap
msgid ""
"  #######################################################\n"
"  # FIRST: REMOVE THE LEADING \"From \" field             #\n"
"  # Cyrus bombs if it sees a leading \"From \" (not       #\n"
"  # to be confused with \"From:\"). By running sed        #\n"
"  # as a filter we simply remove the first line without #\n"
"  # any real thought.                                   #\n"
"  #######################################################\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1630
msgid ":0f | sed 1d"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1632
msgid "# Anomy mail sanitizer"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1635
msgid ":0fw | sanitizer.pl /usr/anomy/anomy.conf"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1638
msgid "# Spam Assassin"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1642
msgid ":0fw * < 256000 | spamassassin"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1646
msgid ":0 * ^X-Spam-Status: Yes | $SPAM"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1649
msgid "# Empty To: From: Subject:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1653
msgid ":0 * !^To: | $SPAM"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1657
msgid ":0 * !^From: | $SPAM"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1661
msgid ":0 * !^Subject: | $SPAM"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1664
msgid "# Porn Spam although you might wand to see those ;-)"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1668
msgid ":0 * ^Subject.*(\\|<\\pornography\\>)  | $SPAM"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1672
msgid ":0 B * ^.*(\\|<\\pornography\\>)  | $SPAM"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1675
msgid "# Example From spam traps although SpamAssassin should filter it."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1679
msgid ":0 * ^FROM_advertising | $SPAM"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1683
msgid ""
":0 * ^From:.*(advertising|sales|offers|promotion|reply|request|theuseful)  | "
"$SPAM"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1686
msgid "# Example Subject spam traps"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1690
msgid ":0 * ^Subject:.*\\[ADV\\] | $SPAM"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1694
msgid ":0 * ^Subject:\\ ADV | $SPAM"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1697
msgid "# Else"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1700
msgid ":0 | $SANE"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1707
msgid ":0w { EXITCODE=$? HOST } EOF"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1710
msgid "chmod 600 .procmailrc chmod 600 .qmail"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1714
#, no-wrap
msgid ""
"18. Add domain example.com\n"
"==========================\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1717
#, no-wrap
msgid ""
"A. Create a master user ID and home directory for the new domain\n"
"----------------------------------------------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1719
msgid "useradd -c 'example.com' -g mailusers -m -k /etc/skel.domain example"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1722
#, no-wrap
msgid ""
"B. Edit /etc/avmailgate.acl\n"
"---------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1725
msgid ""
"Add domain name to local: local: linuxfromsource.org linuxfrombinary.org "
"example.com"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1728
#, no-wrap
msgid ""
"C. Edit /opt/qmail/control/virtualdomains\n"
"-----------------------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1731
msgid "Add: example.com:example"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1734
#, no-wrap
msgid ""
"D. Edit /opt/qmail/control/rcpthosts\n"
"------------------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1737
msgid "Add: example.com"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1741
#, no-wrap
msgid ""
"19. Add user John\n"
"=================\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1745
msgid ""
"Users will not require a unix password set. So they become valid unix "
"accounts without unix login.  John is an admin because root is not supposed "
"to get mail."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1754
msgid ""
"This is roughly how stuff works.  Mail is coming in for a domain, lets say "
"pamela@linuxfrombinary.org.  It's first put into a drop box "
"/home/binary/Maildir/ and then processed further via .qmail-xxx files. These "
"files contain a user name who is supposed to get the mail. The user has a "
".qmail file in his or her home directory which says what to do with the "
"incoming mail. In this case pipe it to the program /usr/bin/procmail that "
"filters the mail and send that to the /usr/cyrus/bin/deliver program which "
"stores it in the IMAP boxes."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1757
#, no-wrap
msgid ""
"A. The unix account\n"
"-------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1759
msgid "useradd -c 'john' -g mailusers -m -k /etc/skel.user john"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1762
#, no-wrap
msgid ""
"B. Imap Configuration\n"
"---------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1765
msgid "su - cyrus cyradm --auth login localhost"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1776
#, no-wrap
msgid ""
"C. Qmail Configuration\n"
"----------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1783
msgid ""
"If John is one of these: echo john > .qmail-mailer-daemon echo john > "
".qmail-postmaster echo john > .qmail-root"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1786
msgid "Otherwise: echo john > .qmail-john"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1788
msgid "chown alias.qmail .qmail-john"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1792
msgid "If John belongs to example.org: cd /home/example"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1798
#, no-wrap
msgid ""
"If John is one of these:\n"
"echo '&john'       > .qmail-default\n"
"echo '&john'       > .qmail-postmaster\n"
"echo '&john'       > .qmail-webmaster\n"
"echo '&john'       > .qmail-root\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1801
#, no-wrap
msgid ""
"Otherwise:\n"
"echo '&john'       > .qmail-john\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1804
msgid "chown -R example.mailuser .  chmod 640 .qmail-*"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1807
#, no-wrap
msgid ""
"D. Procmail configuration\n"
"-------------------------\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1810
msgid "cd /home/john/ vi .procmailrc"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1812
msgid "Change <user> in john"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1816
#, no-wrap
msgid ""
"20. Starting up all processes\n"
"=============================\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1820
msgid ""
"You should know how to make the links for the different run levels.  "
"Otherwise Gerard Beekmans has a guide where this issue is addressed."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1825
#, no-wrap
msgid ""
"/etc/init.d/sysklogd restart\n"
"/etc/init.d/avgate   start\n"
"/etc/init.d/qmail    start\n"
"/etc/init.d/imap     start\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1829
#, no-wrap
msgid ""
"21. Monitoring the processes.\n"
"=============================\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1833
msgid ""
"Oke just start mailing everyone from localhost and remote and have a "
"terminal running with the following command:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1841
msgid ""
"tail -f /var/log/mail.log or tail -f /var/log/sys.log or tail -f "
"/var/log/imapd.log or tail -f /var/log/procmail.log"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1852
#, no-wrap
msgid ""
"netstat -vat\n"
"Active Internet connections (servers and established)\n"
"Proto Recv-Q Send-Q Local Address           Foreign Address         State      "
"\n"
"tcp        0      0 *:pop3                  *:*                     LISTEN      "
"\n"
"tcp        0      0 *:imap                  *:*                     LISTEN      "
"\n"
"tcp        0      0 *:ssh                   *:*                     LISTEN      "
"\n"
"tcp        0      0 *:smtp                  *:*                     LISTEN      "
"\n"
"Active UNIX domain sockets (servers and established)\n"
"Proto RefCnt Flags       Type       State         I-Node Path\n"
"unix  2      [ ACC ]     STREAM     LISTENING     16068  "
"/var/imap/socket/lmtp\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1854
msgid "If you wanna know WTF Qmail is doing:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1857
msgid "for reading the queue: /opt/qmail/bin/qmail-qread"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1860
msgid "for statistics: /opt/qmail/bin/qmail-qstat"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1863
msgid "for information: /opt/qmail/bin/qmail-showctl"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1867
#, no-wrap
msgid ""
"22. Migrating mail from backups.\n"
"================================\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1873
msgid ""
"Make a back up of the /var/spool/imap/user directory and the "
"/var/imap/mailboxes.db on your existing mail server.  If the Berkeley "
"database version is different on the new system it might be wise to export "
"mailboxes.db to a plain text version."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1876
msgid "cd /var/spool/imap"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1879
msgid "tar cvpf user-backup.tar user/ mv user-backup.tar /tmp"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1881
msgid "Add to the backup /var/imap/mailboxes.db in plaintext format"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1885
msgid "su - cyrus ctl_mboxlist -d > /tmp/mailboxes.txt exit"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1890
msgid "cd /tmp tar uvpf user-backup.tar mailboxes.txt rm mailboxes.txt"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1892
msgid "gzip -9 user-backup.tar"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1895
msgid ""
"Go to the new system and unpack the user folders and mailboxes.db Stop the "
"Imap daemon."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1900
msgid ""
"mv user-backup.tar.gz /tmp cd /var/spool/imap tar zxvpf "
"/tmp/user-backup.tar.gz mv mailboxes.txt /tmp"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1904
msgid "ctl_mboxlist -u -f /var/imap/mailboxes.db < /tmp/mailboxes.txt"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1906
msgid ""
"Now that all the old mailboxes are restored, we can rebuild the "
"mailboxes.db."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1909
#, no-wrap
msgid ""
"ctl_cyrusdb -r                         # rebuild the cyrus mailboxes "
"database\n"
"reconstruct                            # reconstruct mailboxes\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1914
#, no-wrap
msgid ""
"cyradm --auth login localhost          # Use the admin console for "
"cyrus-imap.\n"
"Password:                              # Enter the imap/sasl password.\n"
"localhost.localnet> lm                 # Check to see if mailboxes are "
"restored.\n"
"localhost.localnet> exit               # Leave the cyrusadm console.\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1916
#, no-wrap
msgid "exit                                   # exit the cyrus user.\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1919
msgid ""
"Every user that has imap login access needs a entry in /etc/sasldb2 again So "
"do this for every imap user on the new server."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1921
msgid "saslpasswd2 <user>"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1925
msgid ""
"If you want a hint on reading a remote imap box with fetchmail on a client, "
"compile fetchmail and procmail and put the following in a .fetchmailrc in "
"your home dir and do"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1927
msgid "fetchmail -v"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1937
msgid ""
"<snip> poll \"linuxfromsource.org\" protocol imap no envelope no dns "
"username \"john\" password \"xxxx\" mda \"/usr/bin/procmail -d john\" "
"</snip>"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1939 origin/qmail_cyrus.txt:1949
msgid "Or:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1947
msgid ""
"<snip> poll mail.linuxfromsource.org port 993 protocol IMAP: user john "
"password secret ssl </snip>"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1955
msgid ""
"<snip> poll mail.linuxfrombinary.org with proto imap: plugin \"ssh %h "
"/usr/cyrus/bin/imtest\" auth ssh; user john is john here </snip>"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1958
#, no-wrap
msgid ""
"23. Interesting readings.\n"
"=========================\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1964
msgid ""
"All this information didn't come to me in a dream. It's a combination of "
"sources that I used. A little file that I used to log thing has grown into "
"this hint and hopefully it's useful for others as well. Understanding e-mail "
"by this hint is not gonna help you enough, you have to RTFM A LOT."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1968
msgid ""
"So almost every software packet has a website.  In the tarball there is a "
"lot of information.  Software installs a lot of man and info pages."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1971
msgid "The HOWTO: http://linuxdoc.org/HOWTO/Cyrus-IMAP.html"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1977
msgid ""
"Some article's: http://www.linuxjournal.com/article.php?sid=2313 "
"http://www.abiglime.com/webmaster/articles/cgi/062398.htm "
"http://www.summersault.com/chris/techno/qmail/qmail-antispam.html "
"http://sysadmin.oreilly.com/news/imap2_1000.html"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1980
msgid "Google, Some ppl on #lfs, a friend enz"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1982
msgid "Running Qmail - ISBN 0-672-31945-4 - Richard Blum - Sams Publishing 2000"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1986
#, no-wrap
msgid ""
"24. Legal Blurb\n"
"==============\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1994
msgid ""
"The author does not feel responsible for loss or destruction of data and "
"mail due to typos and bad language. So if you wipe out you system or get "
"your dog killed don't come to me to cry on my shoulder. Be a man/woman and "
"take responsibility for your own actions. On the other hand if your are "
"successful and want to contribute, throw a BIG bag of money to Gerard "
"Beekmans, he deserves it. This is my contribution to LFS and improvements "
"are welcome."
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:1998
#, no-wrap
msgid ""
"ACKNOWLEDGMENTS:\n"
"  * Jim Gifford <lfs-hints at jg555 dot com> for using the anomy.conf\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:2000
msgid "CHANGELOG:"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:2003
#, no-wrap
msgid ""
"[2001-12-15] v 1.0\n"
"  * Initial commit\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:2022
#, no-wrap
msgid ""
"[2002-10-16] v 1.1\n"
"  *  Changed LFS version from 3 to 4 \n"
"  *  Added c-client to the list of prerequisites, there could be more deps "
"!!\n"
"  *  Moved Berkeley DB there as well and version updated from 3.0.1 -> "
"4.0.14\n"
"  *  Moved cyrus-sasl-1.5.27  -> cyrus-sasl-2.1.9\n"
"  *  Moved cyrus-imapd-2.0.16 -> cyrus-imapd-2.1.9\n"
"  *  Added Transport Layer Security (TLS) support\n"
"  *  Added Openssl 0.9.6g\n"
"  *  Added Avmailgate 2.0.1.7\n"
"  *  Added Nail 10.0\n"
"  *  Added Fcron 2.0.0 \n"
"  *  Added Procmail 3.22\n"
"  *  Added SpamAssassin 2.43\n"
"  *  Added Vipul's Razor v2.20 + sdk 2.20\n"
"  *  Added F-prot Antivirus 3.12b\n"
"  *  Added Distributed Checksum Clearinghouse 1.1.15\n"
"  *  Added Anomy-sanitizer 1.55\n"
"  *  Added Various comments and command improvements\n"
msgstr ""

#. type: Plain text
#: origin/qmail_cyrus.txt:2042
#, no-wrap
msgid ""
"[2004-05-04] v 1.2\n"
"  * Moved to new hint format\n"
"  * Changed LFS version from 4 to 5 and LFS 6 (nptl linux-2.6 udev).\n"
"  * Where possible made install commands the same as in BLFS.\n"
"  * Removed c-client because its a php dependency.\n"
"  * Made per user per domain sections.\n"
"  * Updated Berkeley DB 4.0.14 -> 4.1.25\n"
"  * Updated Openssl-0.9.6g -> 0.9.7d\n"
"  * Updated avmailgate-2.0.1.7 -> 2.0.2-5 \n"
"  * Added 2 qmail patches for usage with glibc-2.3.1 or better.\n"
"  * Updated nail-10.0 -> 10.7\n"
"  * Updated fcron-2.0.0 -> 2.9.4\n"
"  * Updated razor-agents-2.20 -> 2.40\n"
"  * Updated Mail-SpamAssassin-2.43 -> 2.63\n"
"  * Updated f-prot_3.12b -> fp-linux-ws-4.4.2\n"
"  * Updated dcc-dccproc-1.1.15 -> dcc-dccm-1.2.47.tar.Z\n"
"  * Updated anomy-sanitizer-1.55 -> 1.67\n"
"  * Updated cyrus-sasl-2.1.9 -> 2.1.18\n"
"  * Updated cyrus-imapd-2.1.9 -> 2.2.3\n"
msgstr ""
