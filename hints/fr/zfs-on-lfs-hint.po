# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"POT-Creation-Date: 2019-09-02 09:14+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:2
msgid "Author: James Powell <james (at) hotmail (dot) com>"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:4
msgid "Date: 2014-08-14"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:6
msgid "License: MIT"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:8
msgid "Synopsis: Using ZFS with Linux From Scratch"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:9 origin/zfs-on-lfs-hint.txt:33 origin/zfs-on-lfs-hint.txt:63 origin/zfs-on-lfs-hint.txt:89 origin/zfs-on-lfs-hint.txt:314 origin/zfs-on-lfs-hint.txt:324 origin/zfs-on-lfs-hint.txt:332
#, no-wrap
msgid "===============================================================================\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:12
msgid "The MIT License"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:14
msgid "Copyright (c) 2014 James Powell"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:21
msgid ""
"Permission is hereby granted, free of charge, to any person obtaining a copy "
"of this software and associated documentation files (the \"Software\"), to "
"deal in the Software without restriction, including without limitation the "
"rights to use, copy, modify, merge, publish, distribute, sublicense, and/or "
"sell copies of the Software, and to permit persons to whom the Software is "
"furnished to do so, subject to the following conditions:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:24
msgid ""
"The above copyright notice and this permission notice shall be included in "
"all copies or substantial portions of the Software."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:32
msgid ""
"THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR "
"IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, "
"FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE "
"AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER "
"LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING "
"FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS "
"IN THE SOFTWARE."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:36
msgid "Description:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:45
msgid ""
"This document is provided to demonstrate how to effectively use the ZFS File "
"system using ZFS-On-Linux as the primary /(root) partition. ZFS is a highly "
"advanced file system with many features not normally found on GNU/Linux, "
"including the BtrFS file system which is still considered experimental and "
"unstable, even though it's been supported in the Linux kernel since 2.6.xx.  "
"ZFS is licensed under the CDDL, which unfortunately in NOT compatible with "
"the GNU's GPL license the Linux kernel is under. This means that you can not "
"get a premade GNU/Linux distribution with built-in ZFS support."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:49
msgid ""
"Linux From Scratch, however, is an odd exemption from this. Because LFS is "
"not a prebuilt distribution, LFS falls outside the legal status of GPL and "
"CDDL problematics into a sort of grey area."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:57
msgid ""
"ZFS-On-Linux was developed by Lawrence Livermoore National Laboratories for "
"their own usage under the umbrella of the OpenZFS Project sponsored by the "
"Illumos Foundation for the Illumos Kernel and the OpenIndiana operating "
"system.  The OpenZFS project is under a full disclosure license agreement "
"and OpenZFS is a fully open source project. The only implementation not "
"sponsored or used by OpenZFS is the Oracle-ZFS implementation which is "
"closed source, and has been developed separately from OpenZFS."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:59
msgid "ZFS-On-Linux currently uses zpool version 5000 and fs version 5."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:62
msgid ""
"This software hint is considered experimental, so please use at your own "
"risk on a rightful system you are willing to sacrifice if needed."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:66
msgid "Prerequisites:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:69
msgid ""
"You must first run and assign partitioning using fdisk, cfdisk, gdisk or any "
"other partitioning tool."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:71
msgid "Make sure you assign the following such as this example:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:74
#, no-wrap
msgid ""
"/dev/sda1: Primary Partition - 83 Partition type (Linux) - At least 512KB "
"in\n"
"                                                           size.\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:77
msgid ""
"This will serve at the primary /boot partition to where you will be "
"installing the Linux kernel and boot loader."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:80
#, no-wrap
msgid ""
"/dev/sda2: Primary Partition - BF Partition Type (Solaris) - Remaining "
"disk\n"
"                                                             space.\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:82
msgid "This will serve as the ZFS partition space as well as the swap space."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:85
msgid ""
"You must now have obtained the Solaris Porting Layer (SPL) and ZFS-On-Linux "
"packages for your distribution, and have installed them."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:88
#, no-wrap
msgid ""
"NOTE: At this point, it does not matter whether ZFS is built-into or "
"installed\n"
"      as a module, you just need to have it installed.\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:92
msgid "Hint:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:95
msgid ""
"For the Remainder of the hint any partitions used will be examples "
"only. Please adjust partition values as needed."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:98
msgid ""
"First you must create a zpool to setup where the zfs-root will go. To "
"perform this action run the following command:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:100
#, no-wrap
msgid "  zpool create -m none zfs-root /dev/sda2\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:104
msgid ""
"This will create a blank zpool in the Solaris assigned disk space for ZFS to "
"work with. At this point, the partition is very useless for LFS, so we'll "
"need to make some adjustments to let LFS self manage things."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:106
msgid "Let's now set the mountpoint."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:108
msgid "First run this command:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:110
#, no-wrap
msgid "  zfs get mountpoint zfs-root\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:114
msgid ""
"The result should be at first it shows ZFS has no mountpoint. Because we "
"want the native mount tools to work with ZFS rather than the proprietary "
"mount tools we'll change the mountpoint:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:116
#, no-wrap
msgid "  zfs set mountpoint=legacy zfs-root\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:119
msgid ""
"Legacy allows ZFS to be mounted and unmounted using the traditional mount "
"and umount commands."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:121
msgid "If you would like to see all the options of your zfs partition run:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:123
#, no-wrap
msgid "  zfs get all zfs-root\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:125
msgid "Now let's mount our brand new ZFS partition."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:127
#, no-wrap
msgid "  mount -v zfs-root -t zfs $LFS\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:130
msgid ""
"Just like in Chapter 2: Mounting the New Partition, this will mount the ZFS "
"partition normally. To unmount it, simply run:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:132
#, no-wrap
msgid "  umount -v $LFS\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:135
msgid ""
"And the partition is unmounted just like a normal EXT*, JFS, or ReiserFS "
"file system."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:137
msgid "Now as normal, create a boot partition:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:139
#, no-wrap
msgid "  mkfs.ext4 /dev/sda1\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:144
msgid ""
"ZFS isn't always boot friendly with various operating systems. Some like "
"FreeBSD can boot to ZFS, but not all can. Because various Linux bootloaders "
"like Grub don't always support every single file system, unless rebuilt for "
"it, which you can do with Grub, you'll need a boot partition."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:147
msgid ""
"ZFS doesn't allow swapfiles, but you can use a ZFS volume as swap. Let's "
"create a swap space now using a zvol"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:152
#, no-wrap
msgid ""
"  zfs create -V 8G -b $(getconf PAGESIZE) \\\n"
"\t    -o primarycache=metadata \\\n"
"\t    -o sync=always \\\n"
"\t    -o com.sun:auto-snapshot=false zfs-root/swap\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:156
msgid ""
"In truth, you should not require more than 8GB swap space on any computer, "
"for any reason of usage. However, unlike a traditional file system, you can "
"always use the zfs tools to add or reduce swap space as needed."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:158
msgid "Now we'll set the swap up like normal but using the zvol as the target:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:160
#, no-wrap
msgid "  mkswap -f /dev/zvol/zfs-root/swap\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:162
msgid "Now let's turn on the swap partition:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:164
#, no-wrap
msgid "  swapon /dev/zvol/zfs-root/swap\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:168
msgid ""
"Now you should be able to build your system normally. When unmounting "
"everything should remount as normal, if not, that means trouble happened and "
"you should check your zpool status such as:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:170
#, no-wrap
msgid "  zpool status zfs-root\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:173
msgid ""
"When you set your fstab, you should now take care about how you setup the "
"ZFS parition and swap. ZFS uses these types of entries:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:177
#, no-wrap
msgid ""
"  zfs-root / zfs defaults,atime,dev,exec,suid,xattr,nomand,zfsutil 0 0\n"
"  /dev/zvol/zfs-root/swap none swap discard 0 0\n"
"  /dev/sda1 /boot ext4 defaults 0 2\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:181
msgid ""
"This will setup the swap with discard feature. This will reduce "
"fragmentation levels in the swap area if it's not full. ZFS supports a vast "
"deal of options for the file system, as you can see, these are the "
"recommended defaults."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:186
msgid ""
"Now when you first boot a system with ZFS, you'll notice that the mount "
"tools may complain about fsck.zfs missing. To be honest, there is no "
"fsck.zfs utility period. ZFS has it's own utility, but it's best used "
"offline. To make sure you don't get complaints on boot, let's make a "
"stubfile:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:191
#, no-wrap
msgid ""
"  cat > /sbin/fsck.zfs << \"EOF\"\n"
"  #!/bin/sh\n"
"  exit 0\n"
"  \"EOF\"\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:193
msgid "That should keep the error read outs to a minimum when booting."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:196
msgid ""
"Now let's talk about the kernel. Becasue I, personally, recommend you use a "
"kernel with built-in modules, this next step will focus on just that."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:198
msgid "Let's first get the SPL (Solaris Porting Layer) sources:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:200
#, no-wrap
msgid "  http://archive.zfsonlinux.org/downloads/zfsonlinux/spl/spl-0.6.3.tar.gz\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:202
msgid "and the ZFS sources:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:204
#, no-wrap
msgid "  http://archive.zfsonlinux.org/downloads/zfsonlinux/zfs/zfs-0.6.3.tar.gz\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:206
msgid "Save these into /sources where you've stored everything else."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:208
msgid "Now unpack the SPL and ZFS sources, and we'll start with getting SPL ready:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:211
msgid ""
"First go to the kernel sources and run the following against an existing "
"kernel source that's been configured:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:213
#, no-wrap
msgid "  make prepare scripts\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:216
msgid ""
"This should prepare the kernel for a source merge. Now change to the spl "
"directory and get it prepped."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:228
#, no-wrap
msgid ""
"  ./configure \\\n"
"      --prefix=/ \\\n"
"      --libdir=/lib \\\n"
"      --includedir=/usr/include \\\n"
"      --datarootdir=/usr/share \\\n"
"      --enable-linux-builtin=yes \\\n"
"      --with-linux=/usr/src/linux-3.15.6 \\\n"
"      --with-linux-obj=/usr/src/linux-3.15.6\n"
"  ./copy-builtin /usr/src/linux-3.15.6\n"
"  make\n"
"  make install\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:231
msgid ""
"This will directly merge SPL into the kernel source, and build a few "
"libraries.  Now let's merge in ZFS:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:245
#, no-wrap
msgid ""
"  ./configure \\\n"
"      --prefix=/ \\\n"
"      --libdir=/lib64 \\\n"
"      --includedir=/usr/include \\\n"
"      --datarootdir=/usr/share \\\n"
"      --enable-linux-builtin=yes \\\n"
"      --with-linux=/usr/src/linux-3.15.6 \\\n"
"      --with-linux-obj=/usr/src/linux-3.15.6 \\\n"
"      --with-spl=/root/src/spl-0.6.3\n"
"      --with-spl-obj=/root/src/spl-0.6.3\n"
"  ./copy-builtin /usr/src/linux-3.15.6\n"
"  make\n"
"  make install\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:248
msgid ""
"This will merge ZFS into the kernel and built what amounts to the zfsprogs "
"package... if it did exist."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:253
msgid ""
"Now run make menuconfig. Under the root directory you'll see SPL support as "
"a new option in the menu. Now enable it as [*] for Built-in. Now open the "
"File-Systems menu and you'll see ZFS in there too. Again, enable it [*] for "
"built-in."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:255
msgid "Now build and install your kernel normally."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:258
msgid ""
"Before you reboot, you'll need to create a hostid. To do this, you'll need "
"to generate it but there is not utility to do so, so use this instead:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:262
#, no-wrap
msgid ""
"  cd /sources\n"
"  mkdir -v hostid\n"
"  cd hostid\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:267
#, no-wrap
msgid ""
"  cat > writehostid.c << \"EOF\"\n"
"  #include <stdio.h>\n"
"  #include <errno.h>\n"
"  #include <unistd.h>\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:291
#, no-wrap
msgid ""
"  int main() {\n"
"      int res;\n"
"      res = sethostid(gethostid());\n"
"      if (res != 0) {\n"
"\t  switch (errno) {\n"
"\t      case EACCES:\n"
"\t      fprintf(stderr, \"Error! No permission to write the\"\n"
"\t\t\t  \" file used to store the host ID.\\n\"\n"
"\t\t\t  \"Are you root?\\n\");\n"
"\t      break;\n"
"\t      case EPERM:\n"
"\t      fprintf(stderr, \"Error! The calling process's effective\"\n"
"\t\t\t      \" user or group ID is not the same as\"\n"
"\t\t\t      \" its corresponding real ID.\\n\");\n"
"\t      break;\n"
"\t      default:\n"
"\t      fprintf(stderr, \"Unknown error.\\n\");\n"
"\t  }\n"
"\t  return 1;\n"
"      }\n"
"      return 0;\n"
"  }\n"
"  \"EOF\"\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:293
msgid "Now compile it with:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:295
#, no-wrap
msgid "  gcc -v writehostid.c -o writehostid\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:297
msgid "And run the utility:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:299
#, no-wrap
msgid "  ./writehostid\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:301
msgid "This will generate a proper hostid file."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:305
msgid ""
"If all goes well, on the first system boot, you'll boot into ZFS just like "
"any other file system, but to get subsequent reboots to work without issue "
"we'll need to create a cache file for the zpool:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:307
#, no-wrap
msgid "  zpool set cachefile=/etc/zfs/zpool.cache zfs-root\n"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:310
msgid ""
"Now everything should work as intended. Congradulations on your new file "
"system, and enjoy."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:313
msgid ""
"If you'd like to learn more information on ZFS and it's capabilities which "
"are beyond the scope of this hint, visit: http://en.wikipedia.org/wiki/ZFS"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:317
msgid "Acknowledgements:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:320
msgid ""
"I'd like to thank my partners in crime Keith Hedger and Arthur Radley for "
"being awesome teammates in our work in GNU/Linux."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:323
msgid ""
"I'd also like to thank SlackWiki and ArchWiki for their awesome coverage of "
"ZFS on Linux."
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:327
msgid "Changelog:"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:329
msgid "2014-08-14"
msgstr ""

#. type: Plain text
#: origin/zfs-on-lfs-hint.txt:331
msgid "Version - 0.1 - Initial Draft and Public Release"
msgstr ""
