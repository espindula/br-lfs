# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"POT-Creation-Date: 2020-09-14 12:09+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. type: Plain text
#: origin/lfs-uefi.txt:2
msgid "USING GRUB ON UEFI"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:4
msgid "AUTHOR: Dan McGhee, Kevin M. Buckley, and Xi Ruoyao"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:6
msgid "DATE: 2019-03-28"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:8
msgid "LICENSE: GNU Free Documentation License Version 1.2"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:10
msgid "SYNOPSIS: Boot LFS by default in a UEFI Environment using GRUB"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:15
msgid ""
"DESCRIPTION: This hint contains the information to direct the OS Boot "
"Manager to default to the GRUB in a UEFI environment employing EFI Mode.  "
"This hint applies to only x86_64 machines."
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:18
msgid ""
"This version updates Dan McGhee and Kevin M. Buckley's original, dated "
"2017-02-07."
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:22
msgid ""
"The 2018-04-09 update saw the UEFI packages built against an LFS 8.2 systemd "
"installation that was already being booted using the existing host system's "
"bootloaders."
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:25
msgid "ATTACHMENTS: * None"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:29
msgid ""
"PREREQUISITES: * Base LFS system before or after Ch. 8 * Basic understanding "
"of obtaining and building packages"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:31
msgid "HINT:"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:39
msgid ""
"DISCLAIMER: The recipes in this hint neither supplant nor supersede the "
"build instructions in a stable version of either the LFS or BLFS books.  "
"They merely augment them for newer firmware.  If conflicts arise between "
"this hint and the instructions in the book, take the issue to the mailing "
"lists.  Additionally, this hint applies to only x86_64 machines packaged "
"with Windows 7 or Windows 8.  The recipes here can be used on Mac OS, but "
"have not been investigated at the initial writing of this hint."
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:45
msgid ""
"The 2018-04-09 hint refers to an LFS 8.2 system, built onto an x86_64 "
"machine from within a LFS 7.9 host, that had had never had a version of "
"windows installed on it, indeed the host contained one EFI directories below "
"`/boot/efi/EFI/`, namely `boot`, that having been installed by the vendor of "
"the computer."
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:48
msgid ""
"USE OF TERMS: The following is a use of terms in this hint.  Further "
"information for and amplification of them can be found in References 1-3."
msgstr ""

#. type: Bullet: '* '
#: origin/lfs-uefi.txt:52
msgid ""
"Firmware Settings: An interface accessed by the keyboard after power is "
"applied but before boot.  In it a user can change the order and way of how "
"the computer boots."
msgstr ""

#. type: Bullet: '* '
#: origin/lfs-uefi.txt:54
msgid "BIOS System: Firmware with EFI Mode turned off."
msgstr ""

#. type: Bullet: '* '
#: origin/lfs-uefi.txt:58
msgid ""
"EFI Mode: A condition of the booted system in which the EFI partition is "
"mounted and the uefi (efi) variable support in the kernel is working "
"properly.  It results from enabling UEFI Mode in the firmware settings."
msgstr ""

#. type: Bullet: '* '
#: origin/lfs-uefi.txt:61
msgid ""
"EFI Mount Point: A user defined mount point for the EFI Partition.  In this "
"hint, and in most distros, it is `/boot/efi`."
msgstr ""

#. type: Bullet: '* '
#: origin/lfs-uefi.txt:66
msgid ""
"EFI Partition: A small partition, usually before any other partitions; i.e., "
"`/dev/sda1` of 200-250 Mb, formatted in FAT32 with the `boot` flag, in "
"parted, or `ef00` (EF00) partition type in gdisk.  (NOTE: The `boot` flag "
"has a different function and meaning in MBR partitioned disks.)"
msgstr ""

#. type: Bullet: '* '
#: origin/lfs-uefi.txt:69
msgid ""
"efi variables (synonymous: uefi variables): variables through which the "
"operating system can interact with the firmware."
msgstr ""

#. type: Bullet: '* '
#: origin/lfs-uefi.txt:72
msgid ""
"Legacy Boot Option (Legacy Boot): A boot process in the firmware settings "
"where EFI Mode is ddisabled.."
msgstr ""

#. type: Bullet: '* '
#: origin/lfs-uefi.txt:75
msgid ""
"GUID Partition Table (GPT): A modern partitioning scheme that supports large "
"disk drives and more flexibilty than older partitioning schemes."
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:78
msgid ""
"PRELIMINARY DISCUSSION: Additional information and more in depth discussion "
"of the following concepts can be found using References 1-3."
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:83
msgid ""
"Booting LFS is no longer as simple as `grub-install /dev/sda`.  There are "
"more options and more considerations.  With the advent and proliferation of "
"UEFI firmware, a user's knowledge and philosophy of the boot process "
"requires expansion:"
msgstr ""

#. type: Bullet: '1. '
#: origin/lfs-uefi.txt:99
msgid ""
"GPT partitioning is different from MBR partitioning.  Programs fdisk, "
"cfdisk, parted, or gdisk (from gptfdisk) can be used.  Each has their pros "
"and cons, supporters and detractors."
msgstr ""

#. type: Bullet: '2. '
#: origin/lfs-uefi.txt:99
msgid "UEFI mode uses Boot Managers to select Boot Loaders like GRUB or LILO."
msgstr ""

#. type: Bullet: '3. '
#: origin/lfs-uefi.txt:99
msgid ""
"The Boot Loaders are placed on the EFI partition rather than the MBR.  This "
"concept is similar and parallel to the LFS procedures of using a separate `/"
"boot` partition."
msgstr ""

#. type: Bullet: '4. '
#: origin/lfs-uefi.txt:99
msgid ""
"There are additional tools that LFS needs in order to accomplish this mode "
"of booting."
msgstr ""

#. type: Bullet: '5. '
#: origin/lfs-uefi.txt:99
msgid ""
"LFS can be built and booted as the instructions are written up to and "
"including LFS-8.4. To do this, the firmware settings must be changed to "
"disable EFI mode. Different hardware vendors may use different terminology "
"or menu options to interface with EFI options."
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:106
#, no-wrap
msgid ""
"   Note that the only operating system that requires EFI mode is Microsoft\n"
"   Windows. If that operating system is not installed, then it is generally\n"
"   easier to disable EFI mode and not use the rest of this hint.  Some\n"
"   systems may also require removing the efi partition on the boot \n"
"   drive in addition to changing firmware settings to completely disable\n"
"   EFI mode.\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:113
msgid ""
"One of the hugely discussed issues surrounding UEFI is Secure Boot.  It is "
"necessary to understand that the terms \"UEFI\" and \"Secure Boot\" are NOT "
"synonymous.  UEFI is firmware.  Secure Boot is a process of using \"keys\" "
"to \"guarantee\" the safety and authenticity of a Boot Loader.  NOTE: To use "
"the procedures in this hint, Secure Boot must be disabled in the BIOS Boot "
"Settings."
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:121
#, no-wrap
msgid ""
"Please note that the recommended order for implementing these instructions is a\n"
"departure from the build order in LFS.  The most convenient, and arguably the\n"
"most practical way, to implement the instructions here is to use them in the\n"
"build of an LFS System at the end of Ch. 6. Building the BLFS and non-BLFS\n"
"packages has been tested both inside and outside of the chroot environment.\n"
"Then, following the book, proceed through Ch. 7, returning to the instructions\n"
"in Ch. 8.   The instructions are presented in that order.\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:128
msgid ""
"The most inconvenient way to implement these procedures is in a completely "
"functional LFS-8.4, or earlier, system.  This involves uninstalling "
"`GRUB-2.02`, removing it from its location as a result of `grub-install` and "
"implementing the instructions below.  Migrating from Legacy Boot to UEFI "
"boot is possible.  At the writing of this hint, however, it is not "
"included.  References 1-3 contain more information on this subject."
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:138
msgid ""
"The last consideration in implementing the instructions here is GRUB's "
"graphical terminal.  In UEFI systems, if the GRUB video mode is not "
"initialized, no kernel boot messages will appear until the kernel video "
"takes over.  The GRUB package does not supply fonts, and GRUB defaults to "
"`unicode.pf2`.  There are two ways to supply this font.  The first is to "
"copy `unicode.pf2` from the host system to `/boot/grub` on the LFS system.  "
"The second method involves configuring grub to build grub-mkfont, and this "
"creates a build dependency of `FreeType` for GRUB.  This hint addresses the "
"second situation."
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:147
msgid ""
"Finally, as of the writing of this hint, there is no standard for the use of "
"UEFI and the implementation of Secure Boot.  These are hugely manufacturer "
"dependent.  This hint uses terms used in the original author's hardware.  "
"They may be different in other manufacturers' implementations.  However, the "
"capabilities to do the boot setup operations contained in this hint will "
"exist on each machine.  The terms may differ, and more than one operation "
"might be needed to achieve a desired goal.  For example, someone may need to "
"disable Secure Boot and remove Secure Keys."
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:152
msgid ""
"PROCEDURES: [NOTE] The instructions are written with the assumption that the "
"packages are being built in the chroot environment before the end of Ch. 8.  "
"They can be modified, with little difficulty, to be used in a functional "
"system."
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:156
#, no-wrap
msgid ""
"CHECKING EFI-MODE\n"
"  Before entering the chroot environment, check that the host booted in\n"
"  EFI Mode.\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:158
#, no-wrap
msgid "    ls /sys/firmware/efi\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:160
#, no-wrap
msgid "  If this directory exists and is populated, the host booted in EFI Mode.\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:167
#, no-wrap
msgid ""
"CREATE AND FORMAT NEW EFI PARTITION, IF NECESSARY\n"
"  Some firmware (for example those in Dell desktops) has a reserved,\n"
"  invisible EFI partition for its OEM Windows.  If it's the first time you\n"
"  install another EFI booted OS on the system, create a new EFI partition\n"
"  using `fdisk` or your prefered partition tool.  Then, mark it with the\n"
"  `EF00` flag.\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:170
#, no-wrap
msgid ""
"  If you created a new EFI partition, install `dosfstools` from BLFS and\n"
"  format the new EFI partition with:\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:172
#, no-wrap
msgid "    mkfs.vfat /dev/sda(x)\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:174 origin/lfs-uefi.txt:182
#, no-wrap
msgid "  where sda(x) is the device containing the EFI partition.\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:178
#, no-wrap
msgid ""
"MOUNT EFI PARTITION\n"
"  Determine which device is the EFI partition using gdisk or parted,\n"
"  enter the chroot environment, create `/boot/efi` if needed, and\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:180
#, no-wrap
msgid "    mount -vt vfat /dev/sda(x) /boot/efi\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:184
msgid "BUILD DEPENDENCIES:"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:188
#, no-wrap
msgid ""
"Install the following BLFS packages, using the instructions in the book:\n"
"`dosfstools`, `popt` and `pciutils`.   Build and install `FreeType`\n"
"if building grub with `grub-mkfont` enabled.\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:194
msgid ""
"The BLFS `FreeType` instructions recommend that it be built after `which` "
"and `libpng` have been installed, so it was, however, as the recommendation "
"for \"HarfBuzz\" notes that one builds `FreeType` without it first, and then "
"do a re-install, it wasn't thought necessary to do the re-install."
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:196
msgid "The `libpng` install did include the \"apng\" patch."
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:198
msgid "EFIVAR-37"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:203
msgid ""
"Download: * https://github.com/rhboot/efivar/releases/download/37/efivar-37."
"tar.bz2 * Required patch: http://www.linuxfromscratch.org/~xry111/efivar-37-"
"gcc_9-1.patch"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:205
msgid "Apply a patch to make some fixes required by gcc-9:"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:207
#, no-wrap
msgid "    patch -Np1 -i ../efivar-37-gcc_9-1.patch\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:209 origin/lfs-uefi.txt:246 origin/lfs-uefi.txt:329
msgid "Compile the package:"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:214
#, no-wrap
msgid ""
"<<<<<<< .mine\n"
"    make libdir=/usr/lib\n"
"||||||| .r1161\n"
"    make LIBDIR=/usr/lib BINDIR=/bin\n"
"=======\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:217
#, no-wrap
msgid ""
"    make LIBDIR=/usr/lib BINDIR=/bin CFLAGS=\"-O2 -Wno-stringop-truncation\"\n"
">>>>>>> .r1162\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:219
#, no-wrap
msgid "  The meaning of the make parameter:\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:222
#, no-wrap
msgid ""
"* `libdir=/usr/lib`: This option overrides the default library directory\n"
"of the package (`/usr/lib64`).\n"
msgstr ""

#. type: Bullet: '* '
#: origin/lfs-uefi.txt:224
msgid ""
"`CFLAGS=\"...\"`: Override the default compiler flags causing build failure."
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:230
#, no-wrap
msgid ""
"  Despite the Makefile having a `test` target, albeit one which isn't run\n"
"  by default, you SHOULD NOT run that `make test`, as it has been found\n"
"  to cause firmware bugs. Here are the thoughts on, and the exhortation\n"
"  not to do, this from the `efivar` community: \n"
"  https://github.com/rhboot/efivar/issues/78 .\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:232 origin/lfs-uefi.txt:260 origin/lfs-uefi.txt:273
#: origin/lfs-uefi.txt:333
msgid "Install the package:"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:234 origin/lfs-uefi.txt:262 origin/lfs-uefi.txt:335
#, no-wrap
msgid "  Now as the `root` user:\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:236
#, no-wrap
msgid "    make libdir=/usr/lib install\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:238
msgid "EFIBOOTMGR-16"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:241
msgid "Dependencies: * Required: `popt` and `efivar`"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:244
msgid ""
"Download: * https://github.com/rhinstaller/efibootmgr/releases/download/16/"
"efibootmgr-16.tar.bz2"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:248
#, no-wrap
msgid "    make EFIDIR=LFS EFI_LOADER=grubx64.efi\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:250
#, no-wrap
msgid "  The meaning of the make parameters:\n"
msgstr ""

#. type: Bullet: '* '
#: origin/lfs-uefi.txt:258
msgid ""
"`EFIDIR=LFS`: This is the distro's subdirectory name under `/boot/efi/EFI`. "
"`Make.default` file of `efibootmgr` need this variable to be set."
msgstr ""

#. type: Bullet: '* '
#: origin/lfs-uefi.txt:258
msgid ""
"`EFI_LOADER=grubx64.efi`: This variable is set to the default EFI boot "
"loader. It affects the default of parameter `--loader`.  You can skip this "
"if you won't invoke `efibootmgr` directly and only `grub-install` runs it."
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:266
#, no-wrap
msgid ""
"    install -v -D -m0755 src/efibootmgr /usr/sbin/efibootmgr &&\n"
"    install -v -D -m0644 src/efibootmgr.8 \\\n"
"            /usr/share/man/man8/efibootmgr.8\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:268
msgid "UNIFONT-12.1.03"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:271
msgid ""
"Download: * http://unifoundry.com/pub/unifont/unifont-12.1.03/font-builds/"
"unifont-12.1.03.pcf.gz"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:277
#, no-wrap
msgid ""
"  [NOTE] This package is not a tarball.  So DON'T (and you can't)\n"
"  `tar -xf` it and change to the unzipped directory like normal LFS/BLFS\n"
"  packages.\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:279
#, no-wrap
msgid "  As the `root` user:\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:283
#, no-wrap
msgid ""
"    mkdir -pv /usr/share/fonts/unifont &&\n"
"    gunzip -c unifont-12.1.03.pcf.gz > \\\n"
"     /usr/share/fonts/unifont/unifont.pcf\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:285
msgid "GRUB-2.04"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:289
msgid ""
"Dependencies: * Optional: `FreeType` (for `grub-mkfont` and `unicode.pf2`)  "
"* Optional: `unifont` (for `unicode.pf2`)"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:294
#, no-wrap
msgid ""
"  [NOTE] The 2017-02-07 hint installs `unicode.pf2` manually.\n"
"  However, if `freetype` and `unifont` are both installed, GRUB\n"
"  will build `unicode.pf2`, and `grub-install` will install the\n"
"  file automatically.  This is recommended in 2018-04-09 hint.\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:297
msgid "Download: * https://ftp.gnu.org/gnu/grub/grub-2.04.tar.xz"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:299
msgid "Prepare for compilation:"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:301
#, no-wrap
msgid "  [NOTE] Some options in 2017-02-07 hint are no longer necessary.\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:309
#, no-wrap
msgid ""
"    ./configure --prefix=/usr  \\\n"
"        --sbindir=/sbin        \\\n"
"        --sysconfdir=/etc      \\\n"
"        --disable-efiemu       \\\n"
"        --enable-grub-mkfont   \\\n"
"        --with-platform=efi    \\\n"
"        --disable-werror\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:311
#, no-wrap
msgid "  The meaning of configure options:\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:316
#, no-wrap
msgid ""
"* `--enable-grub-mkfont`: This ensures `grub-mkfont` to be built.\n"
"If `Freetype` is not installed, remove this option and then you\n"
"have to get `unicode.pf2` from other sources (either the host or\n"
"Internet).\n"
msgstr ""

#. type: Bullet: '* '
#: origin/lfs-uefi.txt:318
msgid "`--with-platform=efi`: This ensures `grub` to be built for EFI."
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:321
#, no-wrap
msgid ""
"  If the optional dependencies are installed, `configure` should\n"
"  output the following information at last:\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:325
#, no-wrap
msgid ""
"    grub-mkfont: Yes\n"
"    Build-time grub-mkfont: Yes\n"
"    With unifont from /usr/share/fonts/unifont/unifont.pcf\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:327
#, no-wrap
msgid "  That means `unicode.pf2` would be built and used.\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:331
#, no-wrap
msgid "    make\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:337
#, no-wrap
msgid "    make install\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:339
msgid "MODIFICATION OF /etc/fstab"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:342
#, no-wrap
msgid ""
"  When constructing `/etc/fstab` in LFS chapter 8, add a line to\n"
"  mount EFI partition:\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:344
#, no-wrap
msgid "    /dev/<name of EFI partition>     /boot/efi    vfat     defaults       0     1\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:347
#, no-wrap
msgid ""
"  Systemd would mount `efivarfs` automatically.  If using sysvinit,\n"
"  add another line to mount `efivarfs`:\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:349
#, no-wrap
msgid "    efivarfs       /sys/firmware/efi/efivars  efivarfs  defaults  0      1\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:351
#, no-wrap
msgid "  Notes:\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:356
#, no-wrap
msgid ""
"  a) If you are going to be booting your UEFI-aware LFS system using a \n"
"  non-LFS GRUB from your host AND if that GRUB is one (eg Fedora) \n"
"  that allows for the kernel to be specified using that GRUB's  \n"
"  `linuxefi` attribute, so\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:358
#, no-wrap
msgid "     linuxefi  /path/to/kernel root=/path/to/root ro\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:363
#, no-wrap
msgid ""
"  then you don't appear to need the `/etc/fstab` line, and indeed, \n"
"  you'll get told during the boot that the mounter knows nothing\n"
"  about the efivars filesystem type. However, LFS's efibootmgr will\n"
"  still be capable of interrogating your UEFI environment.\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:366
#, no-wrap
msgid ""
"  b) If the LFS system is booted from the LFS+Hint's grub, which doesn't\n"
"  appear to know about the \"linuxefi\" attribute so using\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:368
#, no-wrap
msgid "    linux  /path/to/kernel root=/path/to/root ro\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:373
#, no-wrap
msgid ""
"  then, unless you have the efivars filesystem mounted, and you are\n"
"  able to, then LFS's efibootmgr will be **not** capable of interrogating\n"
"  your UEFI environment, and you'll be told that there is no `efivars`\n"
"  filesystem.\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:375
msgid "KERNEL CONFIGURATION OPTIONS FOR EFI"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:382
msgid ""
"The LFS kernel build's `make defconfig` populated a good number of the EFI-"
"related options on my UEFI-enabled hardware, however, so as to make the "
"2014-10-16 hint's list of settings easier to find when coming to alter/set "
"things, here is the list of the options along with the location of the "
"various checkboxes and the settings they should have, as seen when starting "
"from a `make menuconfig`:"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:384
#, no-wrap
msgid "     ## CONFIG_EFI_PARTITION=y\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:391
#, no-wrap
msgid ""
"       Location:\n"
"         -> Enable the block layer\n"
"           -> Partition Types\n"
"             [*] Advanced partition selection\n"
"             ...\n"
"             [*] EFI GUID Partition support\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:394
#, no-wrap
msgid ""
"     ## CONFIG_EFI=y\n"
"     ## CONFIG_EFI_STUB=y\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:399
#, no-wrap
msgid ""
"       Location:\n"
"         -> Processor type and features\n"
"           [*] EFI runtime service support\n"
"           [*]   EFI stub support\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:401
#, no-wrap
msgid "     ## CONFIG_FB_EFI=y\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:407
#, no-wrap
msgid ""
"       Location:\n"
"         -> Device Drivers\n"
"           -> Graphics support\n"
"             -> Frame buffer Devices\n"
"               [*] EFI-based Framebuffer Support\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:409
#, no-wrap
msgid "     ## CONFIG_FRAMEBUFFER_CONSOLE=y\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:415
#, no-wrap
msgid ""
"       Location:\n"
"         -> Device Drivers\n"
"           -> Graphics support\n"
"             -> Console display driver support\n"
"               Framebuffer Console support      (Not available on mine)\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:418
#, no-wrap
msgid ""
"     ## CONFIG_EFI_VARS is not set\n"
"     ## CONFIG_EFI_RUNTIME_MAP=y\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:424
#, no-wrap
msgid ""
"       Location:\n"
"         -> Firmware Drivers\n"
"           -> EFI (Extensible Firmware Interface) Support\n"
"             < > EFI Variable Support via sysfs\n"
"             [*] Export efi runtime maps to sysfs\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:427
#, no-wrap
msgid "     ## CONFIG_EFIVAR_FS=y/m\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:432
#, no-wrap
msgid ""
"        Location:\n"
"          -> File systems\n"
"            -> Pseudo filesystems\n"
"              [*] EFI Variable filesystem\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:434
msgid "Note:"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:437
msgid ""
"The only Kernel Config setting that a `make defconfig` didn't set on the "
"UEFI-enabled host was this one:"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:439
#, no-wrap
msgid "     ## CONFIG_EFI_STUB=y\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:442
msgid ""
"and without that setting in the kernel, attempts to boot the LFS system tell "
"you that:"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:444
#, no-wrap
msgid "    Kernel doesn't support EFI handover\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:447
msgid ""
"however, adding just that one Kernel Config setting sees you able to boot "
"into the LFS system using the host system's Grub."
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:451
msgid ""
"`CONFIG_FB_EFI=y` seems not necessary if you have other FB devices "
"avaliable.  But without it you will lose some boot messages along with the "
"Tux logos on the FB."
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:453
msgid "USING GRUB TO SET UP THE BOOT PROCESS"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:455
msgid "INSTALLING GRUB TO THE EFI PARTITION"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:465
#, no-wrap
msgid ""
"  Installing GRUB to the EFI partition and creating an OS Boot Manager\n"
"  entry is the major difference between the instructions in this hint and the\n"
"  procedures in the LFS book.  In concept, it is not actually a divergence\n"
"  from the concepts of the book.  The instructions there install GRUB to\n"
"  the MBR, the MBR protected layer of a GPT disk or to a dedicated /boot\n"
"  partition.  The instructions here install GRUB to the EFI partition and\n"
"  generate an entry in the system's Boot Manager.  It is for the single\n"
"  command here that this hint was written and for which all the non-LFS\n"
"  packages were installed.\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:467
#, no-wrap
msgid "    grub-install --bootloader-id=LFS --recheck --debug &> grub.log\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:470
#, no-wrap
msgid ""
"  `--bootloader-id=<some name>` is the directory on the EFI partition to\n"
"  which the GRUB image is written.\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:475
#, no-wrap
msgid ""
"  Running this command generates lots of output (redirected to `grub.log`).\n"
"  But at the end it will indicate that it was successful.  This command\n"
"  installs the GRUB image to `/boot/efi/EFI/LFS/grubx64.efi` and creates\n"
"  the entry `LFS` in the system's Boot Manager.\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:481
#, no-wrap
msgid ""
"  To check it, inspect the contents of `/boot/efi/EFI/LFS` and, as root, run\n"
"  `efibootmgr`.  The results of this command will list the Boot Order and\n"
"  all the Boot Entries.  If the entry \"LFS\" does not appear, read the\n"
"  efibootmgr man page, create an entry and change the Boot Order to what is\n"
"  desired.\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:484
#, no-wrap
msgid ""
"  If GRUB was built with `freetype` and `unifont`, `unicode.pf2` should be\n"
"  installed automatically now.  Issue:\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:486
#, no-wrap
msgid "    grep \"unicode.pf2\" grub.log\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:488
#, no-wrap
msgid "  You should see something like\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:490
#, no-wrap
msgid "    copying `/usr/share/grub/unicode.pf2' -> `/boot/grub/fonts/unicode.pf2'\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:493
#, no-wrap
msgid ""
"  If not, you should get `unicode.pf2` from the host system or Internet,\n"
"  and install it into `/boot/grub/fonts`.\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:495
msgid "CONFIGURING GRUB"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:497
#, no-wrap
msgid "  Generate `grub.cfg`:\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:502
#, no-wrap
msgid ""
"    cat > /boot/grub/grub.cfg << \"EOF\"\n"
"    # Begin /boot/grub/grub.cfg\n"
"    set default=0\n"
"    set timeout=5\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:508
#, no-wrap
msgid ""
"    insmod gzio\n"
"    insmod part_gpt\n"
"    insmod ext2\n"
"    set root=(hd[x], gpt[y])\n"
"    # hd[x] is the drive of the LFS partion and gpt[y] is the partition\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:519
#, no-wrap
msgid ""
"    insmod efi_gop\n"
"    insmod efi_uga\n"
"    insmod font\n"
"    if loadfont /boot/grub/fonts/unicode.pf2; then\n"
"      loadfont /boot/grub/fonts/unicode.pf2\n"
"      set gfxmode=auto\n"
"      insmod gfxterm\n"
"      set gfxpayload=keep\n"
"      terminal_output gfxterm\n"
"    fi\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:524
#, no-wrap
msgid ""
"    menuentry \"GNU/Linux, Linux <kernel name>\"  {\n"
"      linux   /boot/vmlinuz-<kernel name> root=/dev/sda[x] ro\n"
"    }  \n"
"    EOF\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:527
#, no-wrap
msgid ""
"  Note that in `menuentry`, `/dev/sda[x]` is the device of the LFS\n"
"  partition.\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:533
#, no-wrap
msgid ""
"  [NOTE] From GRUB's perspective, the kernel files are relative\n"
"  to the partition used. If you used a separate `/boot` partition,\n"
"  remove `/boot` from the above linux line and path of `unicode.pf2`.\n"
"  You will also need to change the `set root` line to point to the\n"
"  boot partition.\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:535
msgid "FINAL DISCUSSION:"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:543
msgid ""
"As stated before, the implementation of UEFI firmware and its manipulation "
"depends on the manufacturer.  As of the writing of this hint, there is no "
"standard approach.  Therefore, while the instructionss here all do what is "
"advertised, regrettably the system may not default to the grub boot loader "
"\"out of the box.\" In that case, reviewing References 1-3, will provide "
"information that will lead users to a solution to the situation.  As always, "
"one of the best resources is the {,B}LFS mailing lists."
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:548
msgid ""
"At this point, it is worth stating that there are other helpful tools: "
"systemd-boot and rEFInd are two of them.  They are described as Boot "
"Managers, but in fact are a user space layer between the OS Boot Manager and "
"the Boot Loader.  Information about both is in the references."
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:550
msgid "REFERENCES:"
msgstr ""

#. type: Bullet: '1.  '
#: origin/lfs-uefi.txt:556
msgid ""
"Rod's Books - A collection of web page articles that goes into great detail "
"about the concepts of UEFI booting, partitioning and tools.  The below URL "
"goes right to the efi information.  www.rodsbooks.com is the main page and "
"has many, many good articles.  URL: http://www.rodsbooks.com/efi-bootloaders/"
"index.html"
msgstr ""

#. type: Bullet: '2.  '
#: origin/lfs-uefi.txt:559
msgid ""
"\"Unified Extensible Firmware Interface - ArchWiki\" URL: https://wiki."
"archlinux.org/index.php/Unified_Extensible_Firmware_Interface"
msgstr ""

#. type: Bullet: '3.  '
#: origin/lfs-uefi.txt:562
msgid "\"GRUB - ArchWiki\" URL: https://wiki.archlinux.org/index.php/GRUB"
msgstr ""

#. type: Bullet: '4.  '
#: origin/lfs-uefi.txt:564
msgid "Google. URL: https://google.com"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:571
msgid ""
"ACKNOWLEDGEMENTS: * Craig Magee for comments and testing.  * Pierre Labastie "
"for testing, font manipulation and comments.  * Lei Niu for comments on "
"efivar and grub.cfg issues.  * Bruce Dubbs for word changes and comments."
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:579
#, no-wrap
msgid ""
"TODO:\n"
"* Add paragraph and section numbers and TOC to make searchable\n"
"* Add appendix for migration from Legacy Boot to UEFI boot\n"
"* Add appendix for more options to default to GRUB\n"
"* Add appendix for LVM\n"
"* Add appendix for \"standalone\" GRUB on EFI partition independent\n"
"  from distro\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:589
#, no-wrap
msgid ""
"CHANGELOG:\n"
"<<<<<<< .mine\n"
"||||||| .r1161\n"
"[2020-08-14]\n"
"    Remove the reference to pciutils\n"
"    Update to efibootmgr-17\n"
"    Update to unifont-13.0.03\n"
"\tInstall executables and shared libraries into /, instead of /usr\n"
"    Warn about deprecated `CONFIG_EFI_VARS`\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:590
#, no-wrap
msgid "=======\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:593
#, no-wrap
msgid ""
"[2020-09-14]\n"
"    Fix efibootmgr-17 FTBFS\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:600
#, no-wrap
msgid ""
"[2020-08-14]\n"
"    Remove the reference to pciutils\n"
"    Update to efibootmgr-17\n"
"    Update to unifont-13.0.03\n"
"\tInstall executables and shared libraries into /, instead of /usr\n"
"    Warn about deprecated `CONFIG_EFI_VARS`\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:606
#, no-wrap
msgid ""
">>>>>>> .r1162\n"
"[2019-11-26]\n"
"    Update to grub-2.04\n"
"    Update to unifont-12.1.03\n"
"    Add efivar-37 patch to fix FTBFS with gcc-9\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:612
#, no-wrap
msgid ""
"[2019-03-29]\n"
"    Always use spaces instead of tabs\n"
"    Fix a typo in unifont instruction\n"
"    \"gummiboot\" is now named \"systemd-boot\"\n"
"    Merge Bruce's changes\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:619
#, no-wrap
msgid ""
"[2019-03-28]\n"
"    Use linuxfromscratch.org URL for grub patch\n"
"    Cleanup dependencies\n"
"    Update to efibootmgr-16\n"
"    Update to efivar-37\n"
"    Add instructions creating new EFI partition\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:622
#, no-wrap
msgid ""
"[2019-01-10]\n"
"    Added grub patch for binutils-2.31\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:638
#, no-wrap
msgid ""
"[2018-04-09]\n"
"    Updated for LFS 8.2\n"
"    Use BLFS-like format for package dependency list\n"
"    Use package name in BLFS (FreeType instead of Freetype2)\n"
"    Deleted dosfstools-3.0.28 (replaced by dosfstools-4.1 in BLFS)\n"
"    Updated efivar-30 to efivar-34\n"
"    Updated unifont-9.0.06 to unifont-10.0.07\n"
"    Updated GRUB-2.02~beta3 to GRUB-2.02\n"
"    Modified the hint to let GRUB install unicode.pf2 automatically\n"
"    Removed some options not necessary now\n"
"    Fixed path to unicode.pf2 in grub.cfg for those without /boot partition\n"
"    Copied note about seperated /boot partition for grub.cfg from LFS book\n"
"    Removed incorrect personal email addresses (they are LFS mail lists)\n"
"    Added URL of Google\n"
"    Adapted for checkHint script (AUTHORS to AUTHOR)\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:645
#, no-wrap
msgid ""
"[2017-01-22]\n"
"    Updated for LFS 7.10 and \"extra package\" updates\n"
"    dosfstools-3.0.26 -> dosfstools-3.0.28\n"
"    efivar-0.12       -> efivar-30\n"
"    efibootmgr-0.9.0  -> efibootmgr-14\n"
"    unifont-7.0.05    -> unifont-9.0.06\n"
msgstr ""

#. type: Plain text
#: origin/lfs-uefi.txt:647
#, no-wrap
msgid ""
"[2014-10-16]\n"
"    Initial hint.\n"
msgstr ""
