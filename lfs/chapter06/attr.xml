<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-system-attr" role="wrap">
  <?dbhtml filename="attr.html"?>

  <sect1info condition="script">
    <productname>attr</productname>
    <productnumber>&attr-version;</productnumber>
    <address>&attr-url;</address>
  </sect1info>

  <title>Attr-&attr-version;</title>

  <indexterm zone="ch-system-attr">
    <primary sortas="a-Attr">Attr</primary>
  </indexterm>

  <sect2 role="package">
    <title/>

    <para>Le paquet attr contient les outils d'administration des
    attributs o des objets du système de fichier étendu.</para>

    <segmentedlist>
      <segtitle>&buildtime;</segtitle>
      <segtitle>&diskspace;</segtitle>

      <seglistitem>
        <seg>&attr-ch6-sbu;</seg>
        <seg>&attr-ch6-du;</seg>
      </seglistitem>
    </segmentedlist>

  </sect2>

  <sect2 role="installation">
    <title>Installation d'Attr</title>

    <para>Modifiez le répertoire de la documentation pour qu'elle aille dans un
    répertoire versionné&nbsp;:</para>

<screen><userinput remap="pre">sed -i -e 's|/@pkg_name@|&amp;-@pkg_version@|' include/builddefs.in</userinput></screen>
<!--
    <para>Prevent installation of manual pages that were already installed by
    Man-Pages package:</para>

<screen><userinput remap="pre">sed -i -e "/SUBDIRS/s|man2||" man/Makefile</userinput></screen>
-->
    <para>Préparez lacompilation d'Attr&nbsp;:</para>

<screen><userinput remap="configure">./configure --prefix=/usr --bindir=/bin</userinput></screen>

    <para>Compilez le paquet&nbsp;:</para>

<screen><userinput remap="make">make</userinput></screen>

    <para>Il faut lancer les tests sur un système de fichiers supportant les 
    attributs étendus, comme les systèmes de fichiers ext2, ext3, ou ext4.
    On sait que les tests échouent aussi si on en exécute plusieurs à la
    fois (avec une option -j supérieur à 1). Pour
    tester les résultats, lancez&nbsp;:</para>

<screen><userinput remap="test">make -j1 tests root-tests</userinput></screen>

    <para>Installez le paquet&nbsp;:</para>

<screen><userinput remap="install">make install install-dev install-lib
chmod -v 755 /usr/lib/libattr.so</userinput></screen>


    <para>Il faut supprimer la bibliothèque partagée de
    <filename class="directory">/lib</filename>, et donc, recréer le fichier
    <filename class="extension">.so</filename> dans
    <filename class="directory">/usr/lib</filename>&nbsp;:</para>

<screen><userinput remap="install">mv -v /usr/lib/libattr.so.* /lib
ln -sfv ../../lib/$(readlink /usr/lib/libattr.so) /usr/lib/libattr.so</userinput></screen>

  </sect2>

  <sect2 id="contents-attr" role="content">
    <title>Contenu d'Attr</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèque installée</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>attr, getfattr et setattr</seg>
        <seg>libattr.{a,so}</seg>
        <seg>/usr/include/attr et /usr/share/doc/attr-&attr-version;</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="attr">
        <term><command>attr</command></term>
        <listitem>
          <para>Etend les attributs étendus des objets d'un système de fichiers</para>
          <indexterm zone="ch-system-attr attr">
            <primary sortas="b-attr">attr</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="getfattr">
        <term><command>getfattr</command></term>
        <listitem>
          <para>Affiche les attributs étendus des objets d'un système de fichiers</para>
          <indexterm zone="ch-system-attr getfattr">
            <primary sortas="b-getfattr">getfattr</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="setattr">
        <term><command>setattr</command></term>
        <listitem>
          <para>Définit les attributs étendus des objets d'un système de fichiers</para>
          <indexterm zone="ch-system-attr setattr">
            <primary sortas="b-setattr">setattr</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libattr">
        <term><filename class="libraryfile">libattr</filename></term>
        <listitem>
          <para>Contient les fonctions de bibliothèque pour la manipulation des attributs étendus.</para>
          <indexterm zone="ch-system-attr libattr">
            <primary sortas="c-libattr">libattr</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
