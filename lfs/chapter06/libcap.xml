<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-system-libcap" role="wrap">
  <?dbhtml filename="libcap.html"?>

  <sect1info condition="script">
    <productname>libcap</productname>
    <productnumber>&libcap-version;</productnumber>
    <address>&libcap-url;</address>
  </sect1info>

  <title>Libcap-&libcap-version;</title>

  <indexterm zone="ch-system-libcap">
    <primary sortas="a-Libcap">Libcap</primary>
  </indexterm>

  <sect2 role="package">
    <title/>

    <para>Le paquet Libcap implémente les interfaces niveau utilisateur avec les
    fonctions POSIX 1003.1e disponibles dans les noyaux Linux. Ces possibilités
    établissent le partage des pouvoirs avec les privilèges root dans un ensemble
    de droits distincts.</para>

    <segmentedlist>
      <segtitle>&buildtime;</segtitle>
      <segtitle>&diskspace;</segtitle>

      <seglistitem>
        <seg>&libcap-ch6-sbu;</seg>
        <seg>&libcap-ch6-du;</seg>
      </seglistitem>
    </segmentedlist>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Libcap</title>

    <para>Empêchez une bibliothèque statique de s'installer&nbsp;:</para>

<screen><userinput remap="pre">sed -i '/install.*STALIBNAME/d' libcap/Makefile</userinput></screen>

    <para>Compilez le paquet&nbsp;:</para>

<screen><userinput remap="make">make</userinput></screen>

    <para>Ce paquet n'est pas fourni avec une suite de tests.</para>

    <para>Installez le paquet&nbsp;:</para>

<screen><userinput remap="install">make RAISE_SETFCAP=no prefix=/usr install
chmod -v 755 /usr/lib/libcap.so</userinput></screen>

    <variablelist>
      <title>Voici la signification de l'option make&nbsp;:</title>

      <varlistentry>
        <term><parameter>RAISE_SETFCAP=no</parameter></term>
        <listitem>
          <para>Ce paramètre passe la tentative d'utiliser <command>setcap</command>
          sur lui-même. Cela évite une erreur d'installation si le noyau ou le
          système de fichiers ne supportent pas les possibilités étendues.</para>
        </listitem>
      </varlistentry>

    </variablelist>

    <para>Il faut déplacer les bibliothèques partagées dans
    <filename class="directory">/lib</filename>, et, par suite, il faudra recréer
    le fichier
    <filename class="extension">.so</filename> de
    <filename class="directory">/usr/lib</filename>&nbsp;:</para>

<screen><userinput remap="install">mv -v /usr/lib/libcap.so.* /lib
ln -sfv ../../lib/$(readlink /usr/lib/libcap.so) /usr/lib/libcap.so</userinput></screen>

  </sect2>

  <sect2 id="contents-libcap" role="content">
    <title>Contenu de Libcap</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèque installée</segtitle>

      <seglistitem>
        <seg>capsh, getcap, getpcaps, et setcap</seg>
        <seg>libcap.so</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="capsh">
        <term><command>capsh</command></term>
        <listitem>
          <para>Une enveloppe shell pour  voir et contraindre le support de ces
          possibilités</para>
          <indexterm zone="ch-system-libcap capsh">
            <primary sortas="b-capsh">capsh</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="getcap">
        <term><command>getcap</command></term>
        <listitem>
          <para>Examine les possibilités autour d'un fichier</para>
          <indexterm zone="ch-system-libcap getcap">
            <primary sortas="b-getcap">getcap</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="getpcaps">
        <term><command>getpcaps</command></term>
        <listitem>
          <para>Affiche à la demande les possibilités d'un ou plusieurs processus</para>
          <indexterm zone="ch-system-libcap getpcaps">
            <primary sortas="b-getpcaps">getpcaps</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libcap">
        <term><filename class="libraryfile">libcap</filename></term>
        <listitem>
          <para>Contient les fonctions de bibliothèque pour la manipualtion des posibilités POSIX 1003.1e</para>
          <indexterm zone="ch-system-libcap libcap">
            <primary sortas="c-libcap">libcap</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
