<sect2>
<title>Installation de la Glibc</title>

<para>Au début de ce chapitre, vous avez installé Glibc et vous lui avez
appliqué un correctif. Une partie de ce correctif défaisait des changements
pour que les binaires statiques compilés avec la Glibc-2.2 puissent fonctionner.
Néanmoins, ceci ne correspond à ce que les développeurs voulaient et nous
n'avons pas besoin de garder cette Glibc modifiée. Donc, nous allons réinstaller
Glibc maintenant pour supprimer ce correctif.</para>

<para>Une deuxième raison pour installer de nouveau Glibc est que cela est
considéré plus propre. La première Glibc a été installé en utilisant des
programmes compilé à partir de votre système hôte ce qui a parfois des effets
sur Glibc. Bien que ce ne soit pas un problème pour les packages compilés
précédemment dans ce chapitre, nous voulons que Glibc soit sûre à 100% (de même,
vous pouvez réinstaller les autres packages dès maintenant pour pouvoir dire que
vous disposez d'un système compilé entièrement avec LFS, ce qui revient à
quelque chose comme la méthode d'installation bootstrap de GCC).</para>

<para>Nous allons aussi installer maintenant les pages man de linuxthreads.
Peut-être vous en rappeller vous, lors de la première installation de Glibc,
ceci n'était pas possible parce que Perl n'était pas encore installé. Tout ce
dont nous avons besoin pour installer les pages man de linuxthreads est
disponible maintenant, donc nous allons nous en charger dès maintenant.</para>

<para>Avant de commencer l'installation de Glibc, vous devez entrer dans le
répertoire glibc-&glibc-version; et y déballer glibc-linuxthreads, et non pas
dans /usr/src comme vous le faites normalement.</para>

<para>Ce package est connu pour mal se comporter si vous changez ces options
d'optimisation par défaut (ceci inclut les options -march et -mcpu). Glibc
fonctionnera mieux sans eux. Du coup, si vous avez défini une ou plusieurs
variables d'environnement qui écrasent les optimisations par défaut, telles que
CFLAGS et CXXFLAGS, nous vous recommendons de les annuler ou de les modifier
le temps de la construction de Glibc. Vous avez été prévenu.</para>

<para>Attention, compiler Glibc de toute autre façon que celle présentée dans
le livre fait courir un très gros risque à votre système.</para>

<para>Installez Glibc en lançant les commandes suivantes:</para>

<para><screen><userinput>mkdir ../glibc-build &amp;&amp;
cd ../glibc-build &amp;&amp;
../glibc-&glibc-version;/configure --prefix=/usr --disable-profile \
&nbsp;&nbsp;&nbsp;&nbsp;--enable-add-ons --libexecdir=/usr/bin &amp;&amp;
make &amp;&amp;
make install &amp;&amp;
make -C ../glibc-&glibc-version;/linuxthreads/man &amp;&amp;
make -C ../glibc-&glibc-version;/linuxthreads/man install &amp;&amp;
exec /bin/bash --login</userinput></screen></para>

</sect2>

