<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-system-tar" role="wrap">
  <?dbhtml filename="tar.html"?>

  <sect1info condition="script">
    <productname>tar</productname>
    <productnumber>&tar-version;</productnumber>
    <address>&tar-url;</address>
  </sect1info>

  <title>Tar-&tar-version;</title>

  <indexterm zone="ch-system-tar">
    <primary sortas="a-Tar">Tar</primary>
  </indexterm>

  <sect2 role="package">
    <title/>

    <para>Le paquet Tar contient un programme d'archivage.</para>

    <segmentedlist>
      <segtitle>&buildtime;</segtitle>
      <segtitle>&diskspace;</segtitle>

      <seglistitem>
        <seg>&tar-ch6-sbu;</seg>
        <seg>&tar-ch6-du;</seg>
      </seglistitem>
    </segmentedlist>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Tar</title>

    <para>Ajoutez un programme qui génère une page de man pour tar à partir du
    code source&nbsp;:</para>

<screen><userinput remap="pre">patch -Np1 -i ../&tar-manpage-patch;</userinput></screen>

    <para>Corrigez une incompatibilité entre ce paquet et Glibc-&glibc-version;</para>

<screen><userinput remap="pre">sed -i -e '/gets is a/d' gnu/stdio.in.h</userinput></screen>

    <para>Préparez la compilation de Tar&nbsp;:</para>

<screen><userinput remap="configure">FORCE_UNSAFE_CONFIGURE=1  \
./configure --prefix=/usr \
            --bindir=/bin \
            --libexecdir=/usr/sbin</userinput></screen>

    <variablelist>
      <title>Voici la signification des options de configure&nbsp;:</title>

      <varlistentry>
        <term><envar>FORCE_UNSAFE_CONFIGURE=1</envar></term>
        <listitem>
          <para>Ceci oblige les tests de <function>mknod</function> à se lancer en 
          tant que  root.  On considère généralement que lancer ce test en tant qu'utilisateur
          root est dangereux, mais comme on ne l'exécute que sur un système qui
          n'a été construit que partiellement, ce dépassement est parfait.</para>
        </listitem>
      </varlistentry>
    </variablelist>

    <para>Compilez le paquet&nbsp;:</para>

<screen><userinput remap="make">make</userinput></screen>

    <para>Pour tester les résultats (environ 1 SBU), lancez&nbsp;:</para>

<screen><userinput remap="test">make check</userinput></screen>

    <para>Installez le paquet&nbsp;:</para>

<screen><userinput remap="install">make install
make -C doc install-html docdir=/usr/share/doc/tar-&tar-version;</userinput></screen>

    <para>Enfin, générez la page de man et mettez-la au bon endroit&nbsp;:</para>

<screen><userinput remap="install">perl tarman &gt; /usr/share/man/man1/tar.1</userinput></screen>

  </sect2>


  <sect2 id="contents-tar" role="content">
    <title>Contenu de Tar</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Répertoire installé</segtitle>

      <seglistitem>
        <seg>rmt et tar</seg>
        <seg>/usr/share/doc/tar-&tar-version;</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="rmt">
        <term><command>rmt</command></term>
        <listitem>
          <para>Manipule à distance un lecteur de bandes magnétiques via une 
          connexion de communication interprocessus</para>
          <indexterm zone="ch-system-tar rmt">
            <primary sortas="b-rmt">rmt</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="tar">
        <term><command>tar</command></term>
        <listitem>
          <para>Crée, extrait des fichiers à partir d'archives et liste le contenu
          d'archives, connues sous le nom d'archives tar</para>
          <indexterm zone="ch-system-tar tar">
            <primary sortas="b-tar">tar</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
