<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>
<sect1 id="ch-system-kbd" xreflabel="Kbd">
<title>Kbd-&kbd-version;</title>
<?dbhtml filename="kbd.html"?>

<indexterm zone="ch-system-kbd"><primary sortas="a-Kbd">Kbd</primary></indexterm>

<para>Le package Kbd contient les fichiers de plan de codage et des outils pour
le clavier.</para>

<screen>&buildtime; 0,1&nbsp;SBU
&diskspace; 12&nbsp;Mo</screen>

<para>L'installation de Kbd dépend de Bash, Binutils, Bison, Coreutils,
Diffutils, Flex, GCC, Gettext, Glibc, Grep, Gzip, M4, Make, Sed.</para>



<sect2>
<title>Installation de Kbd</title>

<para>Par défaut, certains outils de Kbd (<command>setlogcons</command>,
<command>setvesablank</command> et <command>getunimap</command>) ne sont pas
installés. Tout d'abord, activez la compilation de ces outils&nbsp;:</para>

<screen><userinput>patch -Np1 -i ../kbd-&kbd-version;-more-programs-1.patch</userinput></screen>

<para>Maintenant, préparez la compilation de Kbd&nbsp;:</para>

<screen><userinput>./configure</userinput></screen>

<para>Compilez le package&nbsp;:</para>

<screen><userinput>make</userinput></screen>

<para>Maintenant, installez-le&nbsp;:</para>

<screen><userinput>make install</userinput></screen>

</sect2>

<sect2 id="conf-kbd"><title>Configurer votre clavier</title>
<indexterm zone="conf-kbd">
<primary sortas="a-Kbd">Kbd</primary>
<secondary>configuration</secondary></indexterm>

<para>Peu de choses sont plus ennuyantes qu'utiliser Linux avec un mauvais
plan de clavier. Néanmoins, si vous avez un clavier US standard, vous pouvez
passer cette section car le plan du clavier US est le plan par défaut tant que
vous ne le changez pas.</para>

<para>Pour changer le plan de clavier par défaut, créez le lien symbolique
<filename class="symlink">/usr/share/kbd/keymaps/defkeymap.map.gz</filename>
en lançant la commande suivante&nbsp;:</para>

<screen><userinput>ln -s path/to/keymap /usr/share/kbd/keymaps/defkeymap.map.gz</userinput></screen>

<para>Bien sûr, remplacez <filename>path/to/keymap</filename> avec le chemin et
le nom du fichier de votre plan de clavier. Par exemple, si vous avez un
clavier hollandais, vous devez utiliser
<filename>/usr/share/kbd/keymaps/i386/qwerty/nl.map.gz</filename>.</para >

<para>Une autre façon d'initialiser votre plan de clavier est de le compiler
dans le noyau. Ceci vous assure que votre clavier fonctionnera toujours comme
vous vous y attendez, même si vous démarrez en mode maintenance (en passant
`init=/bin/sh' au noyau) car dans ce cas le script de démarrage qui initialise
le plan de clavier n'est pas lancé.</para>

<para>Dans <xref linkend="chapter-bootable"/>, vous compilerez votre noyau.
Lancez la commande suivante pour corriger le plan de clavier par défaut au
niveau des sources (vous devrez recommencer cette commande à chaque fois que
vous déballez un nouveau noyau)&nbsp;:</para>

<screen><userinput>loadkeys -m /usr/share/kbd/keymaps/defkeymap.map.gz &gt; \
    <replaceable>[unpacked sources dir]</replaceable>/linux-&linux-version;/drivers/char/defkeymap.c</userinput></screen>

</sect2>


<sect2 id="contents-kbd"><title>Contenu de Kbd</title>

<para><emphasis>Programmes installés</emphasis>&nbsp;: chvt, deallocvt,
dumpkeys, fgconsole, getkeycodes, getunimap, kbd_mode, kbdrate, loadkeys,
loadunimap, mapscrn, openvt, psfaddtable (lien vers psfxtable), psfgettable
(lien vers psfxtable), psfstriptable (lien vers psfxtable), psfxtable,
resizecons, setfont, setkeycodes, setleds, setlogcons, setmetamode,
setvesablank, showconsolefont, showkey, unicode_start et unicode_stop</para>

</sect2>


<sect2><title>Courtes descriptions</title>

<indexterm zone="ch-system-kbd chvt"><primary sortas="b-chvt">chvt</primary></indexterm>
<para id="chvt"><command>chvt</command> change le terminal virtuel en avant
plan.</para>

<indexterm zone="ch-system-kbd deallocvt"><primary sortas="b-deallocvt">deallocvt</primary></indexterm>
<para id="deallocvt"><command>deallocvt</command> désalloue les terminaux 
virtuels inutilisés.</para>

<indexterm zone="ch-system-kbd dumpkeys"><primary sortas="b-dumpkeys">dumpkeys</primary></indexterm>
<para id="dumpkeys"><command>dumpkeys</command> affiche les tables de traduction
du clavier.</para>

<indexterm zone="ch-system-kbd fgconsole"><primary sortas="b-fgconsole">fgconsole</primary></indexterm>
<para id="fgconsole"><command>fgconsole</command> affiche le numéro du terminal
virtuel actif.</para>

<indexterm zone="ch-system-kbd getkeycodes"><primary sortas="b-getkeycodes">getkeycodes</primary></indexterm>
<para id="getkeycodes"><command>getkeycodes</command> affiche la table de cor
respondance des <quote>scancode</quote> avec les <quote>keycode</quote>.</para>

<indexterm zone="ch-system-kbd getunimap"><primary sortas="b-getunimap">getunimap</primary></indexterm>
<para id="getunimap"><command>getunimap</command> affiche l'unimap en
cours d'utilisation.</para>

<indexterm zone="ch-system-kbd kbd_mode"><primary sortas="b-kbd_mode">kbd_mode</primary></indexterm>
<para id="kbd_mode"><command>kbd_mode</command> affiche ou initialise le mode
du clavier.</para>

<indexterm zone="ch-system-kbd kbdrate"><primary sortas="b-kbdrate">kbdrate</primary></indexterm>
<para id="kbdrate"><command>kbdrate</command> initialise les taux de
répétition et de délai du clavier.</para>

<indexterm zone="ch-system-kbd loadkeys"><primary sortas="b-loadkeys">loadkeys</primary></indexterm>
<para id="loadkeys"><command>loadkeys</command> charge les tables de traduction
du clavier.</para>

<indexterm zone="ch-system-kbd loadunimap"><primary sortas="b-loadunimap">loadunimap</primary></indexterm>
<para id="loadunimap"><command>loadunimap</command> charge la table de corres
pondance entre unicode et police.</para>

<indexterm zone="ch-system-kbd mapscrn"><primary sortas="b-mapscrn">mapscrn</primary></indexterm>
<para id="mapscrn"><command>mapscrn</command> est un programme obsolète
utilisé pour charger une table de correspondance  des caractères de sortie
définie par l'utilisateur dans le pilote de la console. Ceci est maintenant
fait par setfont.</para>

<indexterm zone="ch-system-kbd openvt"><primary sortas="b-openvt">openvt</primary></indexterm>
<para id="openvt"><command>openvt</command> lance un programme sur un nouveau 
terminal virtuel (VT).</para>

<indexterm zone="ch-system-kbd psf"><primary sortas="b-psf*">psf*</primary></indexterm>
<para id="psf"><command>psf*</command> sont un ensemble d'outils pour gérer
les tables de caractères Unicode pour les polices de la console.</para>

<indexterm zone="ch-system-kbd resizecons"><primary sortas="b-resizecons">resizecons</primary></indexterm>
<para id="resizecons"><command>resizecons</command> change l'idée du noyau sur
la taille de la console.</para>

<indexterm zone="ch-system-kbd setfont"><primary sortas="b-setfont">setfont</primary></indexterm>
<para id="setfont"><command>setfont</command> vous laisse modifier les
polices EGA/VGA sur la console.</para>

<indexterm zone="ch-system-kbd setkeycodes"><primary sortas="b-setkeycodes">setkeycodes</primary></indexterm>
<para id="setkeycodes"><command>setkeycodes</command> charge les entrées de
la table de correspondance entre scancode et keycode, utile si vous avez des
touches inhabituelles sur votre clavier.</para>

<indexterm zone="ch-system-kbd setleds"><primary sortas="b-setleds">setleds</primary></indexterm>
<para id="setleds"><command>setleds</command> initialise les drapeaux et LED
du clavier. Beaucoup de personne trouvent utile d'avoir <quote>Num Lock</quote>
allumée par défaut, setleds +num le fait.</para>

<indexterm zone="ch-system-kbd setlogcons"><primary sortas="b-setlogcons">setlogcons</primary></indexterm>
<para id="setlogcons"><command>setlogcons</command> envoie les messages du
noyau sur la console.</para>

<indexterm zone="ch-system-kbd setmetamode"><primary sortas="b-setmetamode">setmetamode</primary></indexterm>
<para id="setmetamode"><command>setmetamode</command> définit la gestion
des touches meta du clavier.</para>

<indexterm zone="ch-system-kbd setvesablank"><primary sortas="b-setvesablank">setvesablank</primary></indexterm>
<para id="setvesablank"><command>setvesablank</command> vous laisse
configurer la sauvegarde d'écran matérielle (pas de grille-pains, juste un
écran vide).</para>

<indexterm zone="ch-system-kbd showconsolefont"><primary sortas="b-showconsolefont">showconsolefont</primary></indexterm>
<para id="showconsolefont"><command>showconsolefont</command> affiche la police
de l'écran pour la console EGA/VGA.</para>

<indexterm zone="ch-system-kbd showkey"><primary sortas="b-showkey">showkey</primary></indexterm>
<para id="showkey"><command>showkey</command> affiche les scancodes, keycodes
et codes ASCII des touches appuyées sur le clavier.</para>

<indexterm zone="ch-system-kbd unicode_start"><primary sortas="b-unicode_start">unicode_start</primary></indexterm>
<para id="unicode_start"><command>unicode_start</command> met le clavier et la
console en mode unicode.</para>

<indexterm zone="ch-system-kbd unicode_stop"><primary sortas="b-unicode_stop">unicode_stop</primary></indexterm>
<para id="unicode_stop"><command>unicode_stop</command> replace le clavier et la
console dans le mode précédent unicode.</para>

</sect2>



</sect1>
