<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-system-db" role="wrap">
  <?dbhtml filename="db.html"?>

  <sect1info condition="script">
    <productname>db</productname>
    <productnumber>&db-version;</productnumber>
    <address>&db-url;</address>
  </sect1info>

  <title>Berkeley DB-&db-version;</title>

  <indexterm zone="ch-system-db">
    <primary sortas="a-Berkeley-DB">Berkeley DB</primary>
  </indexterm>

  <sect2 role="package">
    <title/>

    <para>Le paquet Berkeley DB contient des programmes et des
    utilitaires utilisés par beaucoup d'autres applications pour des
    fonctions concernant les bases de données.</para>

    <segmentedlist>
      <segtitle>&buildtime;</segtitle>
      <segtitle>&diskspace;</segtitle>

      <seglistitem>
        <seg>&db-ch6-sbu;</seg>
        <seg>&db-ch6-du;</seg>
      </seglistitem>
    </segmentedlist>

    <tip>
      <title>Autres possibilités d'installation</title>

      <para>Il y a des instructions pour compiler ce paquet dans le
      livre BLFS est vous avez besoin de compiler le serveur RPC ou des
      liens pour un langage supplémentaire Les liens pour un langage
      supplémentaire exigeront des paquets supplémentaires pour être
      installés. Voir 

      <ulink url="&blfs-root;view/svn/server/databases.html#db"/> pour
      les instructions d'installation suggérées.</para>

      <para>Par ailleurs, GDBM <emphasis>pourrait</emphasis> être utilisé
      à la place de Berkeley DB pour satisfaire Man-DB. Cependant, comme
      Berkeley DB est considéré comme une partie intégrée à la
      compilation de LFS, il ne sera pas listé en tant que dépendance
      pour un paquet dans le livre BLFS. De même, on passe beaucoup
      d'heures lors des tests de LFS avec Berkeley DB installé, pas
      avec GDBM. Si vous comprenez bien les risques et les avantages liés à
      l'utilisation de GDBM et que vous souhaitez l'utiliser malgré tout,
      voyez les instructions de BLFS situées à

      <ulink url="&blfs-root;view/svn/general/gdbm.html"/></para>

    </tip>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Berkeley DB</title>

    <para>Appliquez un correctif d'origine afin que les clients de
    reproduction puissent ouvrir une sequence&nbsp;:</para>

<screen><userinput remap="pre">patch -Np1 -i ../&db-fixes-patch;</userinput></screen>

    <para>Préparez Berkeley DB pour la compilation&nbsp;:</para>

<screen><userinput remap="configure">cd build_unix
../dist/configure --prefix=/usr --enable-compat185 --enable-cxx</userinput></screen>

    <variablelist>
      <title>Voici la signification des options de configuration</title>

      <varlistentry>
        <term><parameter>--enable-compat185</parameter></term>
        <listitem>
          <para>Cette option active la compilation de l'API pour la compatibilité avec Berkeley DB 1.85.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>--enable-cxx</parameter></term>
        <listitem>
          <para>Cette option active la compilation des bibliothèques de l'API pour C++.</para>
        </listitem>
      </varlistentry>

    </variablelist>

    <para>Compilez le paquet&nbsp;:</para>

<screen><userinput remap="make">make</userinput></screen>

    <para>Ce n'est pas possible de tester le paquet de manière
    efficace car cela implique la compilation des liens Tcl. Les liens
    de Tcl ne peuvent être compilés correctement maintenant car Tcl est
    lié à Glibc dans <filename class="directory">/tools</filename>, et
    non à Glibc dans <filename class="directory">/usr</filename>.</para>

    <para>Installez le paquet&nbsp;:</para>

<screen><userinput remap="install">make docdir=/usr/share/doc/db-&db-version; install</userinput></screen>

    <variablelist>
      <title>Voici la signification du paramètre de make&nbsp;:</title>

      <varlistentry>
        <term><parameter>docdir=...</parameter></term>
        <listitem>
          <para>Cette variable spécifie le bon endroit pour mettre la 
          documentation.</para>
        </listitem>
      </varlistentry>

    </variablelist>

    <para>Corrigez les droits de la documentation installée&nbsp;:</para>

<screen><userinput remap="install">chown -Rv root:root /usr/share/doc/db-&db-version;</userinput></screen>

  </sect2>

  <sect2 id="contents-db" role="content">
    <title>Contenu de Berkeley DB</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>

      <seglistitem>
        <seg>db_archive, db_checkpoint, db_codegen, db_deadlock, db_dump,
        db_hotbackup, db_load, db_printlog, db_recover, db_stat, db_upgrade et
        db_verify</seg>
        <seg>libdb.{a,so} et libdb_cxx.{a,so}</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="db_archive">
        <term><command>db_archive</command></term>
        <listitem>
          <para>Affiche les chemins des journaux qui ne sont plus utilisés</para>
          <indexterm zone="ch-system-db db_archive">
            <primary sortas="b-db_archive">db_archive</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="db_checkpoint">
        <term><command>db_checkpoint</command></term>
        <listitem>
          <para>Un démon utilisé pour écouter et scruter les journaux de la base de données.</para>
          <indexterm zone="ch-system-db db_checkpoint">
            <primary sortas="b-db_checkpoint">db_checkpoint</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="db_codegen">
        <term><command>db_codegen</command></term>
        <listitem>
          <para>Génère un code d'application pour créer et configurer les environnements de base de données Berkeley DB
          et les bases de données basées sur un simple langage de description, et l'écrit vers un ou plusieurs fichiers de sortie.</para>
          <indexterm zone="ch-system-db db_codegen">
            <primary sortas="b-db_codegen">db_codegen</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="db_deadlock">
        <term><command>db_deadlock</command></term>
        <listitem>
          <para>Un démon utilisé pour annuler des requêtes de verrouillage
          lorsque des interblocages sont détectés</para>
          <indexterm zone="ch-system-db db_deadlock">
            <primary sortas="b-db_deadlock">db_deadlock</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="db_dump">
        <term><command>db_dump</command></term>
        <listitem>
          <para>Convertit des fichiers de base de données en fichiers texte 
          lisibles par <command>db_load</command></para>
          <indexterm zone="ch-system-db db_dump">
            <primary sortas="b-db_dump">db_dump</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="db_hotbackup">
        <term><command>db_hotbackup</command></term>
        <listitem>
          <para>Crée des dépôts de <quote>sauvegarde à chaud</quote> ou de <quote>failover à chaud</quote>
          des bases de données Berkeley DB</para>
          <indexterm zone="ch-system-db db_hotbackup">
            <primary sortas="b-db_hotbackup">db_hotbackup</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="db_load">
        <term><command>db_load</command></term>
        <listitem>
          <para>Est utilisé pour créer des bases de données à partir de fichiers texte</para>
          <indexterm zone="ch-system-db db_load">
            <primary sortas="b-db_load">db_load</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="db_printlog">
        <term><command>db_printlog</command></term>
        <listitem>
          <para>Convertit des journaux de base de données en texte lisible par un humain</para>
          <indexterm zone="ch-system-db db_printlog">
            <primary sortas="b-db_printlog">db_printlog</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="db_recover">
        <term><command>db_recover</command></term>
        <listitem>
          <para>Est utilisé pour restaurer une base de données dans un état cohérent suite à un
          échec</para>
          <indexterm zone="ch-system-db db_recover">
            <primary sortas="b-db_recover">db_recover</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="db_stat">
        <term><command>db_stat</command></term>
        <listitem>
          <para>Affiche des statistiques sur les bases de données Berkeley</para>
          <indexterm zone="ch-system-db db_stat">
            <primary sortas="b-db_stat">db_stat</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="db_upgrade">
        <term><command>db_upgrade</command></term>
        <listitem>
          <para>Est utilisé pour mettre à jour des fichiers de base de données
          vers une version plus récente de Berkeley DB</para>
          <indexterm zone="ch-system-db db_upgrade">
            <primary sortas="b-db_upgrade">db_upgrade</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="db_verify">
        <term><command>db_verify</command></term>
        <listitem>
          <para>Est exécuté pour des contrôles de cohérence sur
          des fichiers de base de données</para>
          <indexterm zone="ch-system-db db_verify">
            <primary sortas="b-db_verify">db_verify</primary>
          </indexterm>
        </listitem>
      </varlistentry>


      <varlistentry id="libdb">
        <term><filename class="libraryfile">libdb.{a,so}</filename></term>
        <listitem>
          <para>Contient des fonctions pour manipuler des bases de données à partir 
          de programmes C</para>
          <indexterm zone="ch-system-db libdb">
            <primary sortas="c-libdb">libdb</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libdb_cxx">
        <term><filename class="libraryfile">libdb_cxx.{a,so}</filename></term>
        <listitem>
          <para>Contient des fonctions pour manipuler des bases de données à
          partir de programmes C++</para>
          <indexterm zone="ch-system-db libdb_cxx">
            <primary sortas="c-libdb_cxx">libdb_cxx</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
