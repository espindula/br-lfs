<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>
<sect1 id="ch-system-strippingagain">
<title>Supprimer de nouveau les symboles des fichiers objets</title>
<?dbhtml filename="strippingagain.html"?>

<para>Si l'utilisateur n'est pas un programmeur et qu'il ne pense pas faire de
débogage sur les logiciels système, l'espace occupé par le système peut être
diminué d'environ 200&nbsp;Mo en supprimant les symboles de débogage compris
dans les logiciels et dans les bibliothèques. Ceci n'apporte aucun inconvénient
en dehors de l'impossibilité de déboguer complètement un programme.</para>

<para>La plupart des personnes qui ont utilisé la commande ci-dessous n'ont
subi aucun problème. Néanmoins, il est facile de faire une faute de frappe et
de rendre le système inutilisable. Donc, avant de lancer la commande
<command>strip</command>, une bonne idée serait de faire une sauvegarde du
système maintenant.</para>

<para>Avant d'exécuter cette suppression, une attention toute particulière est
nécessaire pour s'assurer qu'aucun des binaires qui vont être touchés ne sont
en cours d'exécution. Pour s'assurer d'être entré dans le <xref
linkend="ch-system-chroot" role=","/>, commencez par quitter chroot&nbsp;:</para>

<screen><userinput>logout</userinput></screen>

<para>Puis, retournez-y avec ceci&nbsp;:</para>

<screen><userinput>chroot $LFS /tools/bin/env -i \
    HOME=/root TERM=$TERM PS1='\u:\w\$ ' \
    PATH=/bin:/usr/bin:/sbin:/usr/sbin \
    /tools/bin/bash --login</userinput></screen>

<para>Maintenant, les symboles des binaires et bibliothèques peuvent être
supprimés en toute sûreté&nbsp;:</para>

<screen><userinput>/tools/bin/find /{,usr/}{bin,lib,sbin} -type f \
   -exec /tools/bin/strip --strip-debug '{}' ';'</userinput></screen>

<para>Un grand nombre de fichiers verront leur format non reconnu. Ces
avertissements peuvent être ignorés sans soucis, ils signifient seulement que
ces fichiers sont des scripts et non pas des binaires.</para>

<para>Si l'espace disque est vraiment très restreint, le commutateur
<emphasis>--strip-all</emphasis> peut être utilisé sur les binaires de
<filename>/{,usr/}{bin,sbin}</filename> pour gagner quelques mégaoctets
supplémentaires. N'utilisez pas cette option sur les bibliothèques&nbsp;:
elles seraient détruites.</para>

</sect1>

