<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-system-gmp" role="wrap">
  <?dbhtml filename="gmp.html"?>

  <sect1info condition="script">
    <productname>gmp</productname>
    <productnumber>&gmp-version;</productnumber>
    <address>&gmp-url;</address>
  </sect1info>

  <title>GMP-&gmp-version;</title>

  <indexterm zone="ch-system-gmp">
    <primary sortas="a-GMP">GMP</primary>
  </indexterm>

  <sect2 role="package">
    <title/>

    <para>Le paquet GMP contient des bibliothèques de maths. Elles contiennent
    des fonctions utiles pour l'arithmétique à précision arbitraire.</para>

    <segmentedlist>
      <segtitle>&buildtime;</segtitle>
      <segtitle>&diskspace;</segtitle>

      <seglistitem>
        <seg>&gmp-ch6-sbu;</seg>
        <seg>&gmp-ch6-du;</seg>
      </seglistitem>
    </segmentedlist>

  </sect2>

  <sect2 role="installation">
    <title>Installation de GMP</title>

    <note>
      <para>Si vous construisez pour un x86 32 bits, mais si vous avez un
      processeur capable d'exécuter du code 64 bits <emphasis>et</emphasis>
      si vous avez spécifié <envar>CFLAGS</envar> dans l'environnement,
      le script configure va essayer de configurer pour du 64 bits et va
      échouer. Évitez cela en invoquant la commande configure ci-dessous avec

<screen role="nodump"><userinput><parameter>ABI=32</parameter> ./configure ...</userinput></screen></para>
    </note>

    <para>Préparez la compilation de GMP&nbsp;:</para>

<screen><userinput remap="configure">./configure --prefix=/usr    \
            --enable-cxx     \
            --disable-static \
            --docdir=/usr/share/doc/gmp-&gmp-version;</userinput></screen>

    <variablelist>
      <title>Voici la signification des nouvelles options de configure&nbsp;:</title>

      <varlistentry> 
        <term><parameter>--enable-cxx</parameter></term>
        <listitem>
          <para>Ce paramètre active le support pour C++</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>--docdir=/usr/share/doc/gmp-&gmp-version;</parameter></term>
        <listitem>
          <para>Cette variable indique le bon emplacement de 
          la documentation.</para>
        </listitem>
      </varlistentry>

    </variablelist>

    <para>Compilez le paquet et générez la documentation HTML&nbsp;:</para>

<screen><userinput remap="make">make
make html</userinput></screen>

    <important>
      <para>La suite de tests de GMP dans cette section est considérée comme
      critique. Ne la sautez en aucun cas.</para>
    </important>

    <para>Testez les résultats&nbsp;:</para>

<screen><userinput remap="test">make check 2>&amp;1 | tee gmp-check-log</userinput></screen>

    <caution><para>Le code de gmp est particulièrement optimisé pour le processeur
    où il est construit. Il arrive que le code détectant le processeur identifie
    mal les fonctions du système et vous aurez des erreurs pendant les tests ou
    dans d'autres applications qui utilisent les bibliothèques gmp, avec un
    message "Illegal
    instruction". Dans ce cas, vous devriez reconfigurer gmp avec l'option
    --build=x86_64-unknown-linux-gnu et le reconstruire.</para></caution>

    <para>Assurez-vous que tous les 190 tests de la suite de tests réussissent.
    Vérifiez les résultats en lançant la commande suivante&nbsp;:</para>

<screen><userinput remap="test">awk '/# PASS:/{total+=$3} ; END{print total}' gmp-check-log</userinput></screen>

    <para>Installez le paquet et sa documentation&nbsp;:</para>

<screen><userinput remap="install">make install
make install-html</userinput></screen>

  </sect2>

  <sect2 id="contents-gmp" role="content">
    <title>Contenu de GMP</title>

    <segmentedlist>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoire installé</segtitle>

      <seglistitem>
        <seg>libgmp.so et libgmpxx.so</seg>
        <seg>/usr/share/doc/gmp-&gmp-version;</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="libgmp">
        <term><filename class="libraryfile">libgmp</filename></term>
        <listitem>
          <para>Contient les fonctions de maths de précision.</para>
          <indexterm zone="ch-system-gmp libgmp">
            <primary sortas="c-libgmp">libgmp</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libgmpxx">
        <term><filename class="libraryfile">libgmpxx</filename></term>
        <listitem>
          <para>Contient des fonctions de maths de précision pour C++</para>
          <indexterm zone="ch-system-gmp libgmpxx">
            <primary sortas="c-libgmpxx">libgmpxx</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>

  </sect2>

</sect1>
