<sect1 id="ch06-zlib">
<title>Installer Zlib-&zlib-version;</title>
<?dbhtml filename="zlib.html" dir="chapter06"?>

<screen>Estimation du temps de construction:           &zlib-time;
Estimation de l'espace disque requis:  &zlib-compsize;</screen>

&aa-zlib-shortdesc;
&aa-zlib-dep;

<sect2><title>&nbsp;</title><para>&nbsp;</para></sect2>

<sect2>
<title>Installation de Zlib</title>

<para>Zlib a un problème de dépassement de tampon potentiel dans sa fonction
<emphasis>gzprintf()</emphasis>, qui, bien que difficile à tirer avantage,
devrait être géré avec l'application de ce correctif&nbsp;:</para>

<screen><userinput>patch -Np1 -i ../&zlib-patch;</userinput></screen>

<para>Maintenant, préparez la compilation de Zlib&nbsp;:</para>

<screen><userinput>./configure --prefix=/usr --shared</userinput></screen>

<para>Note: Zlib est connu pour construire sa bibliothèque partagée de façon
incorrecte si un CFLAGS est spécifié dans son environnement. Si vous utilisez
vos propres variables CFLAGS, assurez-vous d'ajouter la directive <emphasis
role="strong">-fPIC</emphasis> à cette étapge et de la supprimer après.</para>

<para>Compilez le package&nbsp;:</para>

<screen><userinput>make</userinput></screen>

<para>Installez les bibliothèques partagées&nbsp;:</para>

<screen><userinput>make install</userinput></screen>

<para>Maintenant, construisez aussi les bibliothèques non partagées&nbsp;:</para>
<screen><userinput>make clean
./configure --prefix=/usr
make</userinput></screen>

<para>Ce package dispose d'une suite de tests, réalisant plusieurs tests pour
s'assurer que le programme a été construit correctement. Si vous décidez de le
lancer, la commande suivante fera le nécessaire&nbsp;:</para>

<screen><userinput>make test</userinput></screen>

<para>Enfin, installez le package&nbsp;:</para>

<screen><userinput>make install</userinput></screen>

<para>La bibliothèque partagée Zlib devrait être installée dans le répertoire
<filename>/lib</filename>. De cette façon, au cas où vous devriez redémarrer
sans le répertoire <filename>/usr</filename>, les programmes systèmes vitaux
auront toujours accès à la bibliothèque&nbsp;:</para>

<screen><userinput>mv /usr/lib/libz.so.* /lib</userinput></screen>

<para>Le lien symbolique <filename>/usr/lib/libz.so</filename> pointe vers un
fichier qui n'existe plus parce que nous l'avons déplacé. Créez un lien
symbolique vers le nouvel emplacement de la bibliothèque&nbsp;:</para>

<screen><userinput>ln -sf ../../lib/libz.so.1 /usr/lib/libz.so</userinput></screen>

<para>Zlib n'installe pas sa page man. Lancez cette commande pour installer
cette documentation&nbsp;:</para>

<screen><userinput>cp zlib.3 /usr/share/man/man3</userinput></screen>

</sect2>

</sect1>
