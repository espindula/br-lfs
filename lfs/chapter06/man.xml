<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>
<sect1 id="ch-system-man" xreflabel="Man">
<title>Man-&man-version;</title>
<?dbhtml filename="man.html"?>

<indexterm zone="ch-system-man"><primary sortas="a-Man">Man</primary></indexterm>

<para>Le paquet Man contient des programmes de recherche et de visualisation
de pages man.</para>

<screen>&buildtime; 0,1&nbsp;SBU
&diskspace; 1,9&nbsp;Mo</screen>

<para>L'installation de Man dépend de Bash, Binutils, Coreutils, Gawk, GCC,
Glibc, Grep, Make, Sed.</para>



<sect2>
<title>Installation de Man</title>

<para>Nous allons faire trois ajustements des sources de Man.</para>

<para>Le premier est un correctif qui permet à Man de mieux fonctionner avec
les nouvelles versions de Groff. En particulier, les pages man s'afficheront
maintenant sur la largeur complète du terminal au lieu d'être limité à 80
caractères&nbsp;:</para>

<screen><userinput>patch -Np1 -i ../man-&man-version;-80cols.patch</userinput></screen>

<para>Le second est une substitution sed pour ajouter l'option
<emphasis>-R</emphasis> à la variable <emphasis>PAGER</emphasis> de façon à ce
que les séquences d'échappement soient correctement gérées par
Less&nbsp;:</para>

<screen><userinput>sed -i 's/-is/&amp;R/' configure</userinput></screen>

<para>Le troisième est aussi une substitution sed décommentant la ligne
<quote>MANPATH /usr/man</quote> dans le fichier <filename>man.conf</filename>
pour supprimer les résultats redondants lors de l'utilisation de programmes
comme <command>whatis</command>&nbsp;:</para>

<screen><userinput>sed -i 's%MANPATH./usr/man%#&amp;%' src/man.conf.in</userinput></screen>
 
<para>Maintenant, préparez la compilation Man de&nbsp;:</para>

<screen><userinput>./configure -default -confdir=/etc</userinput></screen>

<para>Voici la signification des options de configure&nbsp;:</para>

<itemizedlist>
<listitem><para><userinput>-default</userinput>&nbsp;: ceci précise au script
configure de sélectionner un ensemble cohérent d'options par défaut. Par
exemple&nbsp;: seulement les pages man anglaises, pas de catalogues de
messages, pas de suid pour man, activer la compression des pages man, activer
la compression des pages cat, créer les pages cat lorsque le répertoire
correspondant existe, suivre FHS en plaçant les pages cat sous /var/cache/man
(si tant est que ce répertoire existe).</para></listitem>

<listitem><para><userinput>-confdir=/etc</userinput>&nbsp;: ceci indique au
programme <command>man</command> de rechercher le fichier de configuration
<filename>man.conf</filename> dans le répertoire <filename>/etc</filename>.
</para></listitem>
</itemizedlist>

<para>Compilez le paquet&nbsp;:</para>

<screen><userinput>make</userinput></screen>

<para>Enfin, installez-le&nbsp;:</para>

<screen><userinput>make install</userinput></screen>

<note><para>Si vous souhaitez désactiver les séquences d'échappement SGR
(<foreignphrase>Select Graphic Rendition</foreignphrase>), vous devez éditer le
fichier <filename>man.conf</filename> et ajouter l'option
<emphasis>-c</emphasis> pour NROFF.</para></note>

<para>Vous pouvez aussi jeter un &oelig;il à la page BLFS sur
<ulink url="&blfs-root;view/cvs/postlfs/compressdoc.html"/> car elle s'occupe
des problèmes de formattage et de compression des pages man.</para>

</sect2>


<sect2 id="contents-man"><title>Contenu de Man</title>

<para><emphasis>Programmes installés</emphasis>&nbsp;: apropos, makewhatis, man,
man2dvi, man2html et whatis</para>

</sect2>


<sect2><title>Courtes descriptions</title>

<indexterm zone="ch-system-man apropos"><primary sortas="b-apropos">apropos</primary></indexterm>
<para id="apropos"><command>apropos</command> cherche dans la base de données
whatis et affiche les descriptions courtes des commandes systèmes contenant
une chaîne donnée.</para>

<indexterm zone="ch-system-man makewhatis"><primary sortas="b-makewhatis">makewhatis</primary></indexterm>
<para id="makewhatis"><command>makewhatis</command> construit la base de données
whatis. Il lit toutes les pages man comprises dans manpath et, pour chaque
page, écrit le nom et une courte description dans la base de données whatis.
</para>

<indexterm zone="ch-system-man man"><primary sortas="b-man">man</primary></indexterm>
<para id="man"><command>man</command> formate et affiche la page man demandée
en ligne.</para>

<indexterm zone="ch-system-man man2dvi"><primary sortas="b-man2dvi">man2dvi</primary></indexterm>
<para id="man2dvi"><command>man2dvi</command> convertit une page man au format 
dvi.</para>

<indexterm zone="ch-system-man man2html"><primary sortas="b-man2html">man2html</primary></indexterm>
<para id="man2html"><command>man2html</command> convertit une page man en
html.</para>

<indexterm zone="ch-system-man whatis"><primary sortas="b-whatis">whatis</primary></indexterm>
<para id="whatis"><command>whatis</command> recherche dans la base de données
whatis et affiche les descriptions courtes des commandes système contenant un
mot clé donné comme un mot séparé.</para>

</sect2>



</sect1>
