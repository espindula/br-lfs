<sect2><title>&nbsp;</title><para>&nbsp;</para></sect2>

<sect2>
<title>Installation de GCC</title>

<note><para>La suite de tests pour GCC dans cette section est considérée
<emphasis>critique</emphasis>. Notre conseil est de la faire absolument.
</para></note>

<para>Ce package est connu pour mal se comporter si vous changez ses options
d'optimisation par défaut (ceci inclut les options -march et -mcpu). Donc, si
vous avez défini des variables d'environnement, telles que CFLAGS et CXXFLAGS,
qui annulent les optimisations par défaut, nous vous recommandons de les
supprimer ou de les modifier pour la construction de GCC.</para>

<para>Cette fois, nous construirons les compilateurs C et C++, donc vous aurez 
besoin de déballer les archives tar gcc-core <emphasis>et</emphasis> gcc-g++ --
ils se retouveront dans le même répertoire. Vous devriez de même extraire le
package GCC-testsuite. Le package GCC complet contient bien plus de
compilateurs. Les instructions pour les construire se trouvent
dans <ulink url="&blfs-root;view/cvs/general/gcc.html"/>.</para>

<para><screen><userinput>patch -Np1 -i ../gcc-&gcc-nofixincludes-patch-version;.patch
patch -Np1 -i ../gcc-&gcc-suppress-libiberty-patch-version;.patch</userinput></screen></para>

<para>Le deuxième correctif supprime l'installation de libiberty de GCC car nous
utilisons à la place celui apporté par binutils.</para>

<para>La documentation d'installation de GCC recommande de construire
GCC dans un répertoire dédié en dehors du répertoire des sources:</para>

<para><screen><userinput>mkdir ../gcc-build
cd ../gcc-build</userinput></screen></para>

<para>Maintenant, préparez la compilation de GCC:</para>

<para><screen><userinput>../gcc-&gcc-version;/configure --prefix=/usr \
&nbsp;&nbsp;&nbsp;&nbsp;--enable-shared --enable-threads=posix \
&nbsp;&nbsp;&nbsp;&nbsp;--enable-__cxa_atexit --enable-clocale=gnu \
&nbsp;&nbsp;&nbsp;&nbsp;--enable-languages=c,c++</userinput></screen></para>

<para>Compilez le package:</para>

<para><screen><userinput>make</userinput></screen></para>

<note><para>A ce moment, il est fortement recommendé de répéter les
vérifications que nous avions réalisé au chapitre précédent. Référez-vous à la
section "Ré-ajustement de l'ensemble des outils" et répétez cette vérification.
Si les résultats sont mauvais alors il y a de fortes chances pour que
l'application du correctif GCC Specs ait été mal fait lors du chapitre 5.
</para></note>

<para>Testez les résultats, mais sans s'arrêter aux erreurs (vous vous
rappelerez des quelques connues):</para>

<para><screen><userinput>make -k check</userinput></screen></para>

<para>Et installez le package:</para>

<para><screen><userinput>make install</userinput></screen></para>

<para>Quelques packages s'attendent à ce que le préprocesseur C soit installé
dans le répertoire <filename>/lib</filename>. Pour assurer la compatibilité
avec ces packages, créez deux liens symboliques:</para>

<para><screen><userinput>ln -s ../usr/bin/cpp /lib</userinput></screen></para>

<para>Plusieurs packages compilent en utilisant <userinput>cc</userinput> pour
appeler le compilateur C. Pour satisfaire ces packages, créez un lien
symbolique:</para>

<para><screen><userinput>ln -s gcc /usr/bin/cc</userinput></screen></para>

</sect2>
