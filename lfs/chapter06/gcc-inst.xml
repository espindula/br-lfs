<sect2><title>&nbsp;</title><para>&nbsp;</para></sect2>

<sect2>
<title>Installation de GCC</title>

<para>Ce package est connu pour mal se comporter si vous changez ses options
d'optimisation par défaut (ceci inclut les options -march et -mcpu). Donc, si
vous avez défini des variables d'environnement, telles que CFLAGS et CXXFLAGS,
qui annulent les optimisations par défaut, nous vous recommendons de les
supprimer ou de les modifier pour la construction de GCC.</para>

<para>Nous construirons maintenant les compilateurs C et C++, donc vous aurez le
besoin de déballer les archives tar gcc-core et gcc-g++. D'autres compilateurs
sont disponibles dans le package gcc complet; les instructions pour les
construire sont disponibles sur <ulink
url="&blfs-root;view/cvs/general/gcc.html"/>.</para>

<para>Il est recommendé par la documentation d'installation de GCC de construire
GCC dans un répertoire dédié en dehors du répertoire des sources. Créez le
répertoire de construction:</para>

<para><screen><userinput>mkdir ../gcc-build &amp;&amp;
cd ../gcc-build</userinput></screen></para>

<para>Préparez la compilation de GCC:</para>

<para><screen><userinput>../gcc-&gcc-version;/configure --prefix=/usr --enable-shared \
&nbsp;&nbsp;&nbsp;&nbsp;--enable-threads=posix --with-slibdir=/lib \
&nbsp;&nbsp;&nbsp;&nbsp;--enable-__cxa_atexit --enable-clocale=gnu</userinput></screen></para>

<para>La signification des options de configure sont:</para>

<itemizedlist>
<listitem><para><userinput>--enable-threads=posix</userinput> : Ceci active la
gestion des exceptions C++ pour le code multi-threadé.</para></listitem>

<listitem><para><userinput>--enable-__cxa_atexit</userinput> : Cette option
résultera en des bibliothèques partagées et des programmes C++, interopérables
avec d'autres distributions Linux.</para></listitem>

<listitem><para><userinput>--enable-clocale=gnu</userinput> : Certaines
personnes risquent de construire des bibliothèques C++ incompatibles avec ABI si
elles n'installent pas toute la glibc localedata. Utiliser --enable-clocale=gnu
vous assure que la "bonne chose" est faite dans tous les cas. Si vous ne
souhaitez pas utiliser cette option, alors construisez au moins la locale
<emphasis>de_DE</emphasis>. Lorsque GCC trouve cette locale spécifique, alors le
mode locale correct (<emphasis>gnu</emphasis>) est implémenté.</para></listitem>
</itemizedlist>

<para>Continuez avec la compilation du package:</para>

<para><screen><userinput>make bootstrap</userinput></screen></para>

<para>La cible <emphasis>bootstrap</emphasis> ne fait pas que compiler GCC, mais
il le compile plusieurs fois. Il utilise les premiers programmes compilés pour
se compiler une deuxième et une troisième fois pour s'assurer que le compilateur
a été compilé proprement.</para>

<para>Finissez l'installation du package:</para>

<para><screen><userinput>make install-no-fixedincludes</userinput></screen></para>

<para>Quelques packages s'attendent à ce que le préprocesseur C soit installé
dans les répertoires <filename>/lib</filename> et <filename>/usr/lib</filename>.
Pour honorer ces packages, créez deux liens symboliques:</para>

<para><screen><userinput>ln -s ../usr/bin/cpp /lib &amp;&amp;
ln -s ../bin/cpp /usr/lib</userinput></screen></para>

<para>Plusieurs packages compilent en utilisant <emphasis>cc</emphasis> comme
nom du compilateur C. Pour satisfaire ces packages, créez un lien symbolique
<emphasis>cc</emphasis>:</para>

<para><screen><userinput>ln -s gcc /usr/bin/cc</userinput></screen></para>

</sect2>
