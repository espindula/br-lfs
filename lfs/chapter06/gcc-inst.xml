<sect2><title>&nbsp;</title><para>&nbsp;</para></sect2>

<sect2>
<title>Installation de GCC</title>

<para>Ce package est connu pour mal se comporter si vous changez ses options
d'optimisation par défaut (ceci inclut les options -march et -mcpu). Donc, si
vous avez défini des variables d'environnement, telles que CFLAGS et CXXFLAGS,
qui annulent les optimisations par défaut, nous vous recommandons de les
supprimer ou de les modifier pour la construction de GCC.</para>

<para>Nous construirons maintenant les compilateurs C et C++, donc vous aurez 
besoin de déballer les archives tar gcc-core et gcc-g++. D'autres compilateurs
sont disponibles dans le package gcc complet; les instructions pour les
construire sont disponibles sur <ulink
url="&blfs-root;view/cvs/general/gcc.html"/>.</para>

<para><screen><userinput>patch -Np1 -i ../gcc-&gcc-version;-no_fixincludes.patch
patch -Np1 -i ../gcc-&gcc-version;-mmap_test.patch</userinput></screen></para>

<para>Il est recommandé par la documentation d'installation de GCC de construire
GCC dans un répertoire dédié en dehors du répertoire des sources. Créez le
répertoire de construction:</para>

<para><screen><userinput>mkdir ../gcc-build &amp;&amp;
cd ../gcc-build</userinput></screen></para>

<para>Préparez la compilation de GCC:</para>

<para><screen><userinput>CFLAGS="-O2 -pipe" CXXFLAGS="-O2 -pipe" \
&nbsp;&nbsp;&nbsp;&nbsp;../gcc-&gcc-version;/configure --prefix=/usr \
&nbsp;&nbsp;&nbsp;&nbsp;--enable-shared --enable-threads=posix \
&nbsp;&nbsp;&nbsp;&nbsp;--enable-__cxa_atexit --enable-clocale=gnu \
&nbsp;&nbsp;&nbsp;&nbsp;--mandir=/usr/share/man \
&nbsp;&nbsp;&nbsp;&nbsp;--infodir=/usr/share/info \
&nbsp;&nbsp;&nbsp;&nbsp;--enable-languages=c,c++</userinput></screen></para>

<para>Les significations des options de configure sont:</para>

<itemizedlist>
<listitem><para><userinput>--enable-threads=posix</userinput> : Ceci active la
gestion des exceptions C++ pour le code multi-threadé.</para></listitem>

<listitem><para><userinput>--enable-__cxa_atexit</userinput> : Cette option
génèrera des bibliothèques partagées et des programmes C++, interopérables
avec d'autres distributions Linux.</para></listitem>

<listitem><para><userinput>--enable-clocale=gnu</userinput> : Certaines
personnes risquent de construire des bibliothèques C++ incompatibles avec ABI si
elles n'installent pas toute la glibc localedata. Utiliser --enable-clocale=gnu
vous assure que la "bonne chose" est faite dans tous les cas. Si vous ne
souhaitez pas utiliser cette option, alors construisez au moins la
<quote>locale</quote> <emphasis>de_DE</emphasis>. Lorsque GCC trouve cette
<quote>locale</quote> spécifique, alors le mode <quote>locale</quote> correct
(<emphasis>gnu</emphasis>) est implémenté.</para></listitem>
</itemizedlist>

<para>Continuez avec la compilation du package:</para>

<para><screen><userinput>make LDFLAGS="-s"</userinput></screen></para>

<para><screen><userinput>make -k check</userinput></screen></para>

<para>Finissez l'installation du package:</para>

<para><screen><userinput>make install</userinput></screen></para>

<para>Quelques packages s'attendent à ce que le préprocesseur C soit installé
dans les répertoires <filename>/lib</filename> et <filename>/usr/lib</filename>.
Pour assurer la compatibilité avec ces packages, créez deux liens symboliques:</para>

<para><screen><userinput>ln -s ../usr/bin/cpp /lib</userinput></screen></para>

<para>Plusieurs packages compilent en utilisant <emphasis>cc</emphasis> comme
nom du compilateur C. Pour satisfaire ces packages, créez un lien symbolique
<emphasis>cc</emphasis>:</para>

<para><screen><userinput>ln -s gcc /usr/bin/cc</userinput></screen></para>

<para><screen><userinput>rm /usr/lib/libiberty.a</userinput></screen></para>

</sect2>
