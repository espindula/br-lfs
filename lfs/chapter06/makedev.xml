<sect1 id="ch06-makedev">
<title>Créer les périphériques (Makedev-&makedev-version;)</title>
<?dbhtml filename="makedev.html" dir="chapter06"?>

<screen>Estimation du temps de construction:           &makedev-time;
Estimation de l'espace disque requis:  &makedev-compsize;</screen>

&aa-makedev-shortdesc;
&aa-makedev-dep;

<sect2><title>&nbsp;</title><para>&nbsp;</para></sect2>

<sect2>
<title>Créer des périphériques</title>

<para>Notez que déballer le fichier
<filename>MAKEDEV-&makedev-version;.bz2</filename> ne crée pas un répertoire car
le fichier ne contient qu'un script shell.</para>

<para>Installez le script <userinput>MAKEDEV</userinput>&nbsp;:</para>

<screen><userinput>bzcat MAKEDEV-&makedev-version;.bz2 &gt; /dev/MAKEDEV
chmod 754 /dev/MAKEDEV</userinput></screen>

<para>Lancez le script pour créer les fichiers périphériques&nbsp;:</para>

<screen><userinput>cd /dev
./MAKEDEV -v generic-nopty</userinput></screen>

<para>La signification des arguments est la suivante&nbsp;:</para>

<itemizedlist>
<listitem><para><userinput>-v</userinput>: Ceci indique au script de se lancer
en mode verbeux.</para></listitem>

<listitem><para><userinput>generic-nopty</userinput>: Ceci indique à
<userinput>MAKEDEV</userinput> de créer une sélection générique des fichiers
spéciaux (périphériques) utilisés habituellement, sauf pour les fichiers ptyXX
et ttyXX. Nous n'avons pas besoin de ces fichiers parce que nous allons utiliser
les PTY Unix98 via le système de fichiers <emphasis>devpts</emphasis>.</para>
</listitem>
</itemizedlist>

<para>S'il s'avère que certains périphériques spéciaux <filename>zzz</filename>
dont vous avez besoin manquent, essayez de lancer <userinput>./MAKEDEV -v
zzz</userinput>. Autrement, vous pourriez créer des périphériques via le
programme <userinput>mknod</userinput>. Merci de vous référer aux pages man et
info si vous avez besoin de plus d'informations.</para>

<para>Sinon, si vous êtes incapable de monter le système de fichiers devpts plus
tôt dans la section "Monter les systèmes fichiers proc et devpts", c'est le bon
moment pour essayer les alternatives. Si votre noyau supporte le système de
fichiers devfs, lancez la commande suivante pour monter devfs&nbsp;:</para>

<screen><userinput>mount -t devfs devfs /dev</userinput></screen>

<para>Ceci montera le système de fichiers devfs au-dessus de la nouvelle
structure statique <filename>/dev</filename>. Ceci ne pose pas de problèmes, car
les noeuds du périphériques créés sont toujours présents, ils sont juste cachés
par le nouveau système de fichiers devfs.</para>

<para>Si ceci ne fonctionne toujours pas, la seule option laissée est d'utiliser
le script MAKEDEV pour créer les fichiers ptyXX et ttyXX qui ne seraient
autrement pas nécessaire. Assurez-vous de bien être dans le répertoire
<filename>/dev</filename> puis lancez <userinput>./MAKEDEV -v pty</userinput>.
Le mauvais côté de ceci est le suivant&nbsp;: nous allons créé 512 fichiers
spéciaux supplémentaires qui ne seront pas nécessaire lorsque nous démarrerons
enfin notre système LFS terminé.</para>

</sect2>

</sect1>

