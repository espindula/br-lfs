<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-system-e2fsprogs" role="wrap">
  <?dbhtml filename="e2fsprogs.html"?>

  <sect1info condition="script">
    <productname>e2fsprogs</productname>
    <productnumber>&e2fsprogs-version;</productnumber>
    <address>&e2fsprogs-url;</address>
  </sect1info>

  <title>E2fsprogs-&e2fsprogs-version;</title>

  <indexterm zone="ch-system-e2fsprogs">
    <primary sortas="a-E2fsprogs">E2fsprogs</primary>
  </indexterm>

  <sect2 role="package">
    <title/>

    <para>Le paquet E2fsprogs contient les outils de gestion du système
    de fichiers <systemitem class="filesystem">ext2</systemitem>. Il
    supporte aussi les systèmes de fichiers journalisés
    <systemitem class="filesystem">ext3</systemitem> et
    <systemitem class="filesystem">ext4</systemitem>.</para>

    <segmentedlist>
      <segtitle>&buildtime;</segtitle>
      <segtitle>&diskspace;</segtitle>

      <seglistitem>
        <seg>&e2fsprogs-ch6-sbu;</seg>
        <seg>&e2fsprogs-ch6-du;</seg>
      </seglistitem>
    </segmentedlist>

  </sect2>

  <sect2 role="installation">
    <title>Installation de E2fsprogs</title>

    <para>Il est recommandé par la documentation de construire E2fsprogs dans un
    sous-répertoire du répertoire source&nbsp;:</para>

<screen><userinput remap="pre">mkdir -v build
cd build</userinput></screen>

    <para>Préparez la compilation d'E2fsprogs&nbsp;:</para>

<screen><userinput remap="configure">LIBS=-L/tools/lib                    \
CFLAGS=-I/tools/include              \
PKG_CONFIG_PATH=/tools/lib/pkgconfig \
../configure --prefix=/usr           \
             --bindir=/bin           \
             --with-root-prefix=""   \
             --enable-elf-shlibs     \
             --disable-libblkid      \
             --disable-libuuid       \
             --disable-uuidd         \
             --disable-fsck</userinput></screen>

    <variablelist>
      <title>Voici la signification des variables d'environnement et des options
      de configure&nbsp;:</title>

      <varlistentry>
       <term><parameter>PKG_CONFIG_PATH, LIBS, CFLAGS</parameter></term>
         <listitem>
          <para>Ces variables permettent à e2fsprogs de se construire en utilisant
          la construction du paquet <xref linkend="ch-tools-util-linux"/> précédente.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>--with-root-prefix="" et --bindir=/bin</parameter></term>
        <listitem>
          <para>Certains programmes (comme <command>e2fsck</command>
          sont considérés comme essentiels. Quand, par exemple, 
          <filename class="directory">/usr</filename> n'est pas monté, ces
          programmes essentiels doivent encore être disponibles. Ils 
          appartiennent aux répertoires comme 
          <filename class="directory">/lib</filename> et 
          <filename class="directory">/sbin</filename>. Si cette option n'est 
          pas passée au configure d'E2fsprogs, les programmes sont placés dans le répertoire
          <filename class="directory">/usr</filename>.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>--enable-elf-shlibs</parameter></term>
        <listitem>
          <para>Ceci crée les bibliothèques partagées que certains programmes
          de ce paquet utilisent.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>--disable-*</parameter></term>
        <listitem>
          <para>Ceci empêche E2fsprogs de construire et d'installer les
          bibliothèques
          <systemitem class="library">libuuid</systemitem> et
          <systemitem class="library">libblkid</systemitem>,
          le démon <systemitem class="daemon">uuidd</systemitem> et
          l'emballeur <command>fsck</command>,  car Util-Linux installe des
          versions plus récentes.</para>
        </listitem>
      </varlistentry>

    </variablelist>

    <para>Compilez le paquet&nbsp;:</para>

<screen><userinput remap="make">make</userinput></screen>

    <para>Pour mettre en place et lancer la suite de tests, nous avons besoin de 
    lier d'abord les bibliothèques de /tools/lib à un emplacement où les programmes
    de  test vont chercher. Pour lancer les tests, exécutez&nbsp;:</para>

<screen><userinput remap="test">ln -sfv /tools/lib/lib{blk,uu}id.so.1 lib
make LD_LIBRARY_PATH=/tools/lib check</userinput></screen>

    <para>Un des tests de E2fsprogs tentera d'allouer 256 Mo de mémoire.
    Si vous n'avez guère plus de RAM, il est recommandé d'activer un
    espace d'échange suffisant pour le test. Voir la <xref
     linkend="space-creatingfilesystem"/> et <xref linkend="space-mounting"/> pour des
     détails sur la création et l'activation d'un espace d'échange.</para>

    <para>Installez les binaires et la documentation&nbsp;:</para>

<screen><userinput remap="install">make install</userinput></screen>

    <para>Installez les bibliothèques statiques et les en-têtes&nbsp;:</para>

<screen><userinput remap="install">make install-libs</userinput></screen>

    <para>Autorisez l'écriture dans les bibliothèques statiques installées
    pour que les symboles de débogage puissent être supprimés plus tard&nbsp;:</para>

<screen><userinput remap="install">chmod -v u+w /usr/lib/{libcom_err,libe2p,libext2fs,libss}.a</userinput></screen>

    <para>Ce paquet installe le fichier <filename class="extension">.info</filename>
    gzippé mais ne met pas à jour le
    fichier <filename>dir</filename> du système. Dézippez ce fichier puis 
    mettez à jour le fichier <filename>dir</filename> du système en utilisant
    les commandes suivantes.</para>

<screen><userinput remap="install">gunzip -v /usr/share/info/libext2fs.info.gz
install-info --dir-file=/usr/share/info/dir /usr/share/info/libext2fs.info</userinput></screen>             

    <para>Si vous le désirez, créez et installez de la documentation
    supplémentaire en lançant les
    commandes suivantes&nbsp;:</para>

<screen><userinput remap="install">makeinfo -o      doc/com_err.info ../lib/et/com_err.texinfo
install -v -m644 doc/com_err.info /usr/share/info
install-info --dir-file=/usr/share/info/dir /usr/share/info/com_err.info</userinput></screen>
  </sect2>

  <sect2 id="contents-e2fsprogs" role="content">
    <title>Contenu de E2fsprogs</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>badblocks, chattr, compile_et, debugfs, dumpe2fs,e2freefrag,
        e2fsck, e2image, e2label, e2undo, e4defrag, filefrag, fsck.ext2,
        fsck.ext3, fsck.ext4, fsck.ext4dev, logsave, lsattr, mk_cmds, mke2fs,
        mkfs.ext2, mkfs.ext3, mkfs.ext4, mkfs.ext4dev,
        resize2fs et tune2fs</seg>
        <seg>libcom_err.{a,so}, libe2p.{a,so}, libext2fs.{a,so},
        libquota.a, et libss.{a,so}</seg>
        <seg>/usr/include/e2p, /usr/include/et, /usr/include/ext2fs,
        /usr/include/quota, /usr/include/ss, /usr/share/et, /usr/share/ss</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="badblocks">
        <term><command>badblocks</command></term>
        <listitem>
          <para>Recherche les blocs défectueux sur un périphérique (habituellement une
          partition d'un disque)</para>
          <indexterm zone="ch-system-e2fsprogs badblocks">
            <primary sortas="b-badblocks">badblocks</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="chattr">
        <term><command>chattr</command></term>
        <listitem>
          <para>Modifie les attributs de fichiers sur un système de fichiers
          <systemitem class="filesystem">ext2</systemitem> et
          <systemitem class="filesystem">ext3</systemitem>,
          la version journalisée d'<systemitem
          class="filesystem">ext2</systemitem></para>
          <indexterm zone="ch-system-e2fsprogs chattr">
            <primary sortas="b-chattr">chattr</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="compile_et">
        <term><command>compile_et</command></term>
        <listitem>
          <para>Un compilateur de table d'erreurs. Il convertit une table de noms
          d'erreurs et des messages associés en un fichier source C à utiliser avec la
          bibliothèque
          <filename class="libraryfile">com_err</filename></para>
          <indexterm zone="ch-system-e2fsprogs compile_et">
            <primary sortas="b-compile_et">compile_et</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="debugfs">
        <term><command>debugfs</command></term>
        <listitem>
          <para>Un débogueur de système de fichiers. Il est utilisé pour
          examiner et modifier l'état d'un système de fichiers
          <systemitem class="filesystem">ext2</systemitem></para>
          <indexterm zone="ch-system-e2fsprogs debugfs">
            <primary sortas="b-debugfs">debugfs</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="dumpe2fs">
        <term><command>dumpe2fs</command></term>
        <listitem>
          <para>Affiche le superbloc et les informations de groupes de blocs sur le
          système de fichiers présent sur un périphérique donné</para>
          <indexterm zone="ch-system-e2fsprogs dumpe2fs">
            <primary sortas="b-dumpe2fs">dumpe2fs</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="e2freefrag">
        <term><command>e2freefrag</command></term>
        <listitem>
          <para>Raporte les informations de fragmentation de l'espace libre</para>
          <indexterm zone="ch-system-e2fsprogs e2freefrag">
            <primary sortas="b-e2freefrag">e2freefrag</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="e2fsck">
        <term><command>e2fsck</command></term>
        <listitem>
          <para>Est utilisé pour vérifier, et quelque fois réparer, les systèmes de fichiers <systemitem
          class="filesystem">ext2</systemitem> et <systemitem
          class="filesystem">ext3</systemitem></para>
          <indexterm zone="ch-system-e2fsprogs e2fsck">
            <primary sortas="b-e2fsck">e2fsck</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="e2image">
        <term><command>e2image</command></term>
        <listitem>
          <para>Est utilisé pour sauver les données critiques d'un système de fichiers <systemitem
          class="filesystem">ext2</systemitem> dans un fichier</para>
          <indexterm zone="ch-system-e2fsprogs e2image">
            <primary sortas="b-e2image">e2image</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="e2label">
        <term><command>e2label</command></term>
        <listitem>
          <para>Affiche ou modifie le label d'un système de fichiers
          <systemitem class="filesystem">ext2</systemitem> présent sur un
          périphérique donné</para>
          <indexterm zone="ch-system-e2fsprogs e2label">
            <primary sortas="b-e2label">e2label</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="e2undo">
        <term><command>e2undo</command></term>
        <listitem>
          <para>Rejoue le journal d'annulation undo_log pour un système de
          fichiers ext2/ext3/ext4 trouvé sur un périphérique. Il peut être
          utilisé pour annuler une opération échouée par un programme 
          e2fsprogs.</para>
          <indexterm zone="ch-system-e2fsprogs e2undo">
            <primary sortas="b-e2undo">e2undo</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="e4defrag"> 
        <term><command>e4defrag</command></term>
        <listitem>
          <para>Défragmenteur en ligne des systèmes de fichiers ext4</para>
          <indexterm zone="ch-system-e2fsprogs e4defrag">
            <primary sortas="b-e4defrag">e4defrag</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="filefrag">
 <term><command>filefrag</command></term>
        <listitem>
          <para>Signale le niveau de fragmentation que pourrait atteindre un
          fichier en particulier</para>
          <indexterm zone="ch-system-e2fsprogs filefrag">
            <primary sortas="b-filefrag">filefrag</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="fsck.ext2">
        <term><command>fsck.ext2</command></term>
        <listitem>
          <para>Vérifie par défaut les systèmes de fichiers <systemitem class="filesystem">ext2</systemitem>.
          C'est un lien vers <command>e2fsck</command>.</para>
          <indexterm zone="ch-system-e2fsprogs fsck.ext2">
            <primary sortas="b-fsck.ext2">fsck.ext2</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="fsck.ext3">
        <term><command>fsck.ext3</command></term>
        <listitem>
          <para>Vérifie par défaut les systèmes de fichiers
          <systemitem class="filesystem">ext3</systemitem>. C'est un lien vers
          <command>e2fsck</command>.</para>
          <indexterm zone="ch-system-e2fsprogs fsck.ext3">
            <primary sortas="b-fsck.ext3">fsck.ext3</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="fsck.ext4">
        <term><command>fsck.ext4</command></term>
        <listitem>
          <para>Vérifie par défaut les systèmes de fichiers
          <systemitem class="filesystem">ext4</systemitem>. C'est un lien vers
          <command>e2fsck</command>.</para>
          <indexterm zone="ch-system-e2fsprogs fsck.ext4">
            <primary sortas="b-fsck.ext4">fsck.ext4</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="fsck.ext4dev">
        <term><command>fsck.ext4dev</command></term>
        <listitem>
          <para>Vérifie par défaut les systèmes de fichiers de développement
          <systemitem class="filesystem">ext3</systemitem>. C'est un lien vers
          <command>e2fsck</command>.</para>
          <indexterm zone="ch-system-e2fsprogs fsck.ext4dev">
            <primary sortas="b-fsck.ext4dev">fsck.ext4dev</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="logsave">
        <term><command>logsave</command></term>
        <listitem>
          <para>Sauvegarde la sortie d'une commande dans un journal applicatif</para>
          <indexterm zone="ch-system-e2fsprogs logsave">
            <primary sortas="b-logsave">logsave</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="lsattr">
        <term><command>lsattr</command></term>
        <listitem>
          <para>Liste les attributs de fichiers sur un système de fichiers ext2
          (second extended file system)</para>
          <indexterm zone="ch-system-e2fsprogs lsattr">
            <primary sortas="b-lsattr">lsattr</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mk_cmds">
        <term><command>mk_cmds</command></term>
        <listitem>
          <para>Convertit une table de noms de commandes et de messages d'aide en un
          fichier source C bon à utiliser avec la bibliothèque sous-système <filename
          class="libraryfile">libss</filename></para>
          <indexterm zone="ch-system-e2fsprogs mk_cmds">
            <primary sortas="b-mk_cmds">mk_cmds</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mke2fs">
        <term><command>mke2fs</command></term>
        <listitem>
          <para>Crée un système de fichiers <systemitem class="filesystem">ext2</systemitem>
          ou <systemitem class="filesystem">ext3</systemitem> sur le périphérique
          donné</para>
          <indexterm zone="ch-system-e2fsprogs mke2fs">
            <primary sortas="b-mke2fs">mke2fs</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mkfs.ext2">
        <term><command>mkfs.ext2</command></term>
        <listitem>
          <para>Crée par défaut un système de fichiers <systemitem class="filesystem">ext2</systemitem>.
          C'est un lien vers <command>mke2fs</command>.</para>
          <indexterm zone="ch-system-e2fsprogs mkfs.ext2">
            <primary sortas="b-mkfs.ext2">mkfs.ext2</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mkfs.ext3">
        <term><command>mkfs.ext3</command></term>
        <listitem>
          <para>Crée par défaut un système de fichiers <systemitem class="filesystem">ext3</systemitem>.
          C'est un lien vers <command>mke2fs</command>.</para>
          <indexterm zone="ch-system-e2fsprogs mkfs.ext3">
            <primary sortas="b-mkfs.ext3">mkfs.ext3</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mkfs.ext4">
        <term><command>mkfs.ext4</command></term>
        <listitem>
          <para>Crée par défaut un système de fichiers <systemitem class="filesystem">ext4</systemitem>.
          C'est un lien vers <command>mke2fs</command>.</para>
          <indexterm zone="ch-system-e2fsprogs mkfs.ext4">
            <primary sortas="b-mkfs.ext4">mkfs.ext4</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mkfs.ext4dev">
        <term><command>mkfs.ext4dev</command></term>
        <listitem>
          <para>Crée par défaut les systèmes de fichiers de développement <systemitem class="filesystem">ext4</systemitem>.
          C'est un lien vers <command>fsck</command>.</para>
          <indexterm zone="ch-system-e2fsprogs mkfs.ext4dev">
            <primary sortas="b-mkfs.ext4dev">mkfs.ext4dev</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mklost-found">
 <term><command>mklost+found</command></term>
        <listitem>
          <para>Utilisé pour créer un répertoire <filename class="directory">lost+found</filename>
          sur un système de fichiers <systemitem class="filesystem">ext2</systemitem>&nbsp;;
          il pré-alloue des blocs de disque à ce répertoire pour alléger la tâche
          d'<command>e2fsck</command></para>
          <indexterm zone="ch-system-e2fsprogs mklost-found">
            <primary sortas="b-mklost+found">mklost+found</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="resize2fs">
        <term><command>resize2fs</command></term>
        <listitem>
          <para>Utilisé pour agrandir ou réduire un système de fichiers <systemitem
          class="filesystem">ext2</systemitem></para>
          <indexterm zone="ch-system-e2fsprogs resize2fs">
            <primary sortas="b-resize2fs">resize2fs</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="tune2fs">
        <term><command>tune2fs</command></term>
        <listitem>
          <para>Ajuste les paramètres d'un système de fichiers <systemitem
          class="filesystem">ext2</systemitem></para>
          <indexterm zone="ch-system-e2fsprogs tune2fs">
            <primary sortas="b-tune2fs">tune2fs</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libcom_err">
        <term><filename class="libraryfile">libcom_err</filename></term>
        <listitem>
          <para>La routine d'affichage d'erreurs</para>
          <indexterm zone="ch-system-e2fsprogs libcom_err">
            <primary sortas="c-libcom_err">libcom_err</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libe2p">
        <term><filename class="libraryfile">libe2p</filename></term>
        <listitem>
          <para>Est utilisé par <command>dumpe2fs</command>, <command>chattr</command>,
          et <command>lsattr</command></para>
          <indexterm zone="ch-system-e2fsprogs libe2p">
            <primary sortas="c-libe2p">libe2p</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libext2fs">
        <term><filename class="libraryfile">libext2fs</filename></term>
        <listitem>
          <para>Contient des routines pour permettre aux programmes niveau utilisateur de
          manipuler un système de fichiers
          <systemitem class="filesystem">ext2</systemitem></para>
          <indexterm zone="ch-system-e2fsprogs libext2fs">
            <primary sortas="c-libext2fs">libext2fs</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libquota">
        <term><filename class="libraryfile">libquota</filename></term>
        <listitem>
          <para>Offre une interface pour créer et mettre à jour des fichiers de
          quota et des champs de superblocs ext4</para>
          <indexterm zone="ch-system-e2fsprogs libquota">
            <primary sortas="c-libquota">libquota</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libss">
        <term><filename class="libraryfile">libss</filename></term>
        <listitem>
          <para>Est utilisé par <command>debugfs</command></para>
          <indexterm zone="ch-system-e2fsprogs libss">
            <primary sortas="c-libss">libss</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
