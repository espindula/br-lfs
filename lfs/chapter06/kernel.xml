<sect1 id="ch06-kernel">
<title>Installer des entêtes de Linux-&kernel-version;</title>
<?dbhtml filename="kernel.html" dir="chapter06"?>

<screen>Estimation du temps de construction:           &kernel-time-headers;
Estimation de l'espace disque requis:  &kernel-compsize-headers;</screen>

&aa-kernel-shortdesc;
&aa-kernel-dep;

<sect2><title>&nbsp;</title><para>&nbsp;</para></sect2>

<sect2>
<title>Installation des en-têtes du noyau</title>

<para>Nous n'allons pas encore compilé un nouveau noyau -- nous le ferons quand
nous aurons terminé l'installation de tous les packages. Mais comme certains
packages ont besoin des fichiers d'en-têtes, nous allons déballer l'archive du
noyau maintenant, le configurer et copier les fichiers d'en-têtes de façon à ce
qu'ils soient disponibles pour ces packages.</para>

<para>Il est important de noter que les fichiers du répertoire source du noyau
n'appartiennent pas à <emphasis>root</emphasis>. Quand vous déballez un package
en tant qu'utilisateur <emphasis>root</emphasis> (comme nous le faisons ici dans
le chroot), les fichiers ont l'identifiant de l'utilisateur et du groupe du
mainteneur du package sur son propre ordinateur. Ce n'est pas habituellement un
problème pour tous les autres packages que vous installez parce que vous
supprimez le répertoire des sources après l'installation. Mais le répertoire des
sources du noyau est souvent conservé un long moment, donc il existe une chance
pour que l'identifiant utilisateur du mainteneur soit affecté à un utilisateur
sur votre machine. Du coup, cette personne aurait le droit d'écriture sur les
sources du noyau.</para>

<para>A la lumière de ceci, il est préférable de lancer <userinput>chown -R
0:0</userinput>	sur le répertoire <filename>linux-&kernel-version;</filename>
pour vous assurer que tous les fichiers appartiennent bien à l'utilisateur
<emphasis>root</emphasis>.</para>

<para>Préparez l'installation des en-têtes&nbsp;:</para>

<screen><userinput>make mrproper</userinput></screen>

<para>Ceci nous assure que le répertoire des sources du noyau est totalement
propre. L'équipe du noyau recommande que cette commande soit exécutée avant
<emphasis>chaque</emphasis> compilation du noyau. Vous ne devez pas vous reposer
sur un répertoire non nettoyé après son déballage.</para>

<para>Créez le fichier <filename>include/linux/version.h</filename>&nbsp;:
</para>

<screen><userinput>make include/linux/version.h</userinput></screen>

<para>Créez le lien symbolique <filename>include/asm</filename> spécifique à la
plateforme&nbsp;:</para>

<screen><userinput>make symlinks</userinput></screen>

<para>Installez les fichiers d'en-têtes spécifiques à la plateforme&nbsp;:</para>

<screen><userinput>cp -HR include/asm /usr/include
cp -R include/asm-generic /usr/include</userinput></screen>

<para>Installez les fichiers d'en-têtes inter-plateforme&nbsp;:</para>

<screen><userinput>cp -R include/linux /usr/include</userinput></screen>

<para>Il existe quelques fichiers d'en-têtes du noyau utilisant le fichier
d'en-tête <filename>autoconf.h</filename>. Comme nous n'avons pas encore
configuré le noyau, nous avons besoin de créer ce fichier nous-même pour éviter
des échecs de compilation. Créez un fichier <filename>autoconf.h</filename>
vide&nbsp;:</para>

<screen><userinput>touch /usr/include/linux/autoconf.h</userinput></screen>

</sect2>

&c6-kernel-exp-headers;

</sect1>

