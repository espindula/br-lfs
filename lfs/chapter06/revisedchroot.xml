<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-system-revisedchroot">
  <?dbhtml filename="revisedchroot.html"?>

  <title>Nettoyer</title>

  <para>Enfin, nettoyez des fichiers résultant des tests&nbsp;:</para>

<screen><userinput>rm -rf /tmp/*</userinput></screen>

  <para>À partir de maintenant, en rentrant dans l'environnement chroot
  après l'avoir quitté, utilisez la commande chroot
  modifiée suivante&nbsp;:</para>

<screen role="nodump"><userinput>chroot "$LFS" /usr/bin/env -i              \
    HOME=/root TERM="$TERM" PS1='\u:\w\$ ' \
    PATH=/bin:/usr/bin:/sbin:/usr/sbin     \
    /bin/bash --login</userinput></screen>

  <para>La raison en est que les programmes de <filename
  class="directory">/tools</filename> ne sont plus
  nécessaires. Comme ils ne sont plus utiles, vous pouvez supprimer le
  répertoire <filename class="directory">/tools</filename> si vous le
  voulez.</para>

  <note>
    <para>Effacer aussi de <filename class="directory">/tools</filename> les copies
    temporaires de Tcl, Expect et DejaGnu, qui ont été utilisées
    pour lancer les tests de l'ensemble des outils. Si vous avez besoin de ces
    programmes plus tard, vous devrez les recompiler et les ré-installer. Le livre
    BLFS a les bonnes instructions pour le faire (voir <ulink url="&blfs-root;"/>).</para>
  </note>

  <para>Si les systèmes de fichiers virtuel du noyau ont été démontés,
  manuellement ou suite à un redémarrage, assurez-vous que les
  systèmes de fichiers virtuels du noyau seront montés lorsque vous
  entrerez à nouveau dans le chroot. On a expliqué cette procédure dans <xref
  linkend="ch-system-bindmount"/> et <xref
  linkend="ch-system-kernfsmount"/>.</para>
 
  <para>Enfin, plusieurs bibliothèques statiques ont été supprimées dans ce
  chapitre pour satisfaire les tests de régression de plusieurs paquets. Ces
  bibliothèques viennent de binutils, bzip2, e2fsprogs, <!--flex--> libtool, et zlib.  Si
  vous le souhaitez, supprimez-les maintenant&nbsp;:</para>

<screen><userinput>rm /usr/lib/lib{bfd,opcodes}.a
rm /usr/lib/libbz2.a
rm /usr/lib/lib{com_err,e2p,ext2fs,ss}.a
<!--rm /usr/lib/lib{fl,fl_pic}.a-->
rm /usr/lib/libltdl.a
rm /usr/lib/libz.a</userinput></screen>

</sect1>
