<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-system-udev" role="wrap">
  <?dbhtml filename="udev.html"?>

  <sect1info condition="script">
    <productname>udev</productname>
    <productnumber>&udev-version;</productnumber>
    <address>&udev-url;</address>
  </sect1info>

  <title>Udev-&udev-version;</title>

  <indexterm zone="ch-system-udev">
    <primary sortas="a-Udev">Udev</primary>
  </indexterm>

  <sect2 role="package">
    <title/>

    <para>Le paquet Udev contient des programmes pour créer
    dynamiquement des n&oelig;uds périphériques.</para>

    <segmentedlist>
      <segtitle>&buildtime;</segtitle>
      <segtitle>&diskspace;</segtitle>

      <seglistitem>
        <seg>&udev-ch6-sbu;</seg>
        <seg>&udev-ch6-du;</seg>
      </seglistitem>
    </segmentedlist>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Udev</title>

    <para>L'archive tar udev-config contient des fichiers spécifiques à
    LFS-specific utilisés pour configurer Udev. Déballez-la dans le
    répertoire des sources Udev&nbsp;:</para>

<screen><userinput remap="pre">tar -xvf ../&udev-config;.tar.bz2</userinput></screen>

    <para>Créez certains périphériques et répertoires qu'Udev ne peut pas
    gérer car ils sont nécessaires très tôt dans le processus de
    démarrage, ou Udev lui-même en a besoin&nbsp;:</para>

<screen><userinput remap="install">install -dv /lib/{firmware,udev/devices/{pts,shm}}
mknod -m0666 /lib/udev/devices/null c 1 3
mknod -m0600 /lib/udev/devices/kmsg c 1 11
ln -sv /proc/self/fd /lib/udev/devices/fd
ln -sv /proc/self/fd/0 /lib/udev/devices/stdin
ln -sv /proc/self/fd/1 /lib/udev/devices/stdout
ln -sv /proc/self/fd/2 /lib/udev/devices/stderr
ln -sv /proc/kcore /lib/udev/devices/core</userinput></screen>

    <para>Préparez la construction du paquet&nbsl;:</para>
    
<screen><userinput remap="configure">./configure --prefix=/usr \
            --exec-prefix= \
            --sysconfdir=/etc</userinput></screen>

    <para>Compilez le paquet&nbsp;:</para>

<screen><userinput remap="make">make</userinput></screen>

    <para>Ce paquet est fourni avec aucune suite de tests.</para>

    <para>Installez le paquet&nbsp;:</para>

<screen><userinput remap="install">make install</userinput></screen>

    <para>Udev doit être configuré afin de fonctionner correctement, vu
    que sa configuration par défaut ne couvre pas tous les périphériques. Tout
    d'abord, installez deux fichiers extérieurs de règles nécessaires
    fournis par Udev pour aider à supporter les paramètres RAID et
    device-mapper&nbsp;:</para>

<screen><userinput remap="install">install -m644 -v rules/packages/64-*.rules \
    /lib/udev/rules.d/</userinput></screen>

    <para>Maintenant, installez un fichier pour créer des liens symboliques
		pour certains périphériques gérés à la main&nbsp;:</para>

<screen><userinput remap="install">install -m644 -v rules/packages/40-pilot-links.rules \
     /lib/udev/rules.d/</userinput></screen>

    <!-- There are more files available in the packages/ directory, if we want
         to consider using them.  Most are probably irrelevant to LFS though.
         "alsa" isn't, but we already have those rules, using a better set of
         matches.  Most of the files in packages/ are for other architectures.
 		-->

    <para>Maintenant, installez les fichiers de règles personnalisées
    spécifiques à LFS&nbsp;:</para>

<screen><userinput remap="install">cd &udev-config;
make install</userinput></screen>

    <para>Installez la documentation qui explique les fichiers de règles
    spécifiques à LFS&nbsp;:</para>

<screen><userinput remap="install">make install-doc</userinput></screen>

    <para>Installez la documentation qui explique les fichiers de règles
    fréquemment utilisés fournis par Udev&nbsp;: </para>

<screen><userinput remap="install">make install-extra-doc</userinput></screen>

    <para>Installez la documentation qui explique comment créer des
    règles Udev personnalisées&nbsp;:</para>

<screen><userinput remap="install">cd ..
install -m644 -v -D docs/writing_udev_rules/index.html \
    /usr/share/doc/udev-&udev-version;/index.html</userinput></screen>

  </sect2>

  <sect2 id="contents-udev" role="content">
    <title>Contenu de Udev</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoire installé</segtitle>

      <seglistitem>

        <seg>ata_id, cdrom_id, collect, create_floppy_devices, edd_id,
				firmware.sh, fstab_import, path_id, scsi_id, udevadm, udevd,
				usb_id, vol_id, write_cd_rules, and write_net_rules</seg>

        <seg>udev et libvolume_id</seg>
        <seg>/etc/udev</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="ata_id">
        <term><command>ata_id</command></term>
        <listitem>
          <para>Fournit Udev avec une chaîne unique et des informations 
          supplémentaires (uuid, label) pour un disque ATA</para>
          <indexterm zone="ch-system-udev ata_id">
            <primary sortas="b-ata_id">ata_id</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="cdrom_id">
        <term><command>cdrom_id</command></term>
        <listitem>
          <para>Fournit Udev avec les possibilités d'un lecteur CD-ROM ou 
          DVD-ROM</para>
          <indexterm zone="ch-system-udev cdrom_id">
            <primary sortas="b-cdrom_id">cdrom_id</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="collect">
			  <term><command>collect</command></term>
			  <listitem>
				  <para>Donne un numéro ID pour le uevent courant et une liste d'IDs
					(pour tous les uevents cible), enregistre l'ID courant et indique si
					tous les IDs cibles ont été enregistrés</para>
					<indexterm zone="ch-system-udev collect">
					  <primary sortas="b-collect">collect</primary>
				  </indexterm>
			  </listitem>
		  </varlistentry>

      <varlistentry id="create_floppy_devices">
        <term><command>create_floppy_devices</command></term>
        <listitem>
          <para>Crée tous les périphériques amovibles possibles basés sur
          le type CMOS</para>
          <indexterm zone="ch-system-udev create_floppy_devices">
            <primary sortas="b-create_floppy_devices">create_floppy_devices</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="edd_id">
        <term><command>edd_id</command></term>
        <listitem>
          <para>Fournit Udev avec le EDD ID pour un lecteur de disque BIOS</para>
          <indexterm zone="ch-system-udev edd_id">
            <primary sortas="b-edd_id">edd_id</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="firmware.sh">
        <term><command>firmware.sh</command></term>
        <listitem>
          <para>Dépose un firmware dans les périphériques</para>
          <indexterm zone="ch-system-udev firmware.sh">
            <primary sortas="b-firmware.sh">firmware.sh</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="fstab_import">
			  <term><command>fstab_import</command></term>
				<listitem>
				<para>Trouve une entrée dans <filename>/etc/fstab</filename> qui
				correspond au périphérique courant, et fournit ses informations à
				Udev</para>
        <indexterm zone="ch-system-udev fstab_import">
				  <primary sortas="b-fstab_import">fstab_import</primary>
				</indexterm>
			</listitem>
		</varlistentry>

      <varlistentry id="path_id">
        <term><command>path_id</command></term>
        <listitem>
          <para>Fournit le chemin de matériel unique le plus court possible vers un
          un périphérique</para>
          <indexterm zone="ch-system-udev path_id">
            <primary sortas="b-path_id">path_id</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="scsi_id">
        <term><command>scsi_id</command></term>
        <listitem>
          <para>Fournit Udev avec un identificateur SCSI unique basé sur
          les données renvoyées par l'envoi d'une commande SCSI INQUIRY au
          périphérique spécifié</para>
          <indexterm zone="ch-system-udev scsi_id">
            <primary sortas="b-scsi_id">scsi_id</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="udevadm">
        <term><command>udevadm</command></term>
        <listitem>
				<para>Outil d'administration udev générique: il contrôle le démon udevd,
				fournit des informations à partir de la base de données Udev, surveille
				les uevents, attend que les uevents se terminent, teste la configuration
        Udev, et provoque des uevents pour un périphérique donné</para>
				<indexterm zone="ch-system-udev udevadm">
				  <primary sortas="b-udevadm">udevadm</primary>
        </indexterm>
      </listitem>
    </varlistentry>

      <varlistentry id="udevd">
        <term><command>udevd</command></term>
        <listitem>
          <para>Un démon qui écoute les <quote>uevents</quote> (événements udev)
          sur le socket netlink, crée des périphériques et exécute les programmes
          externes configurés en réponse à ces uevents</para>
          <indexterm zone="ch-system-udev udevd">
            <primary sortas="b-udevd">udevd</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="usb_id">
        <term><command>usb_id</command></term>
        <listitem>
          <para>Fournit Udev avec des informations sur les périphériques USB</para>
          <indexterm zone="ch-system-udev usb_id">
            <primary sortas="b-usb_id">usb_id</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="vol_id">
        <term><command>vol_id</command></term>
        <listitem>
          <para>Fournit Udev avec le label et l'uuid d'un système de fichiers</para>
          <indexterm zone="ch-system-udev vol_id">
            <primary sortas="b-vol_id">vol_id</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="write_cd_rules">
        <term><command>write_cd_rules</command></term>
        <listitem>
          <para>Un script qui génère des règles Udev pour fournir des 
          noms stables pour des lecteurs optiques (voir aussi
          <xref linkend="ch-scripts-symlinks"/>)</para>
          <indexterm zone="ch-system-udev write_cd_rules">
            <primary sortas="b-write_cd_rules">write_cd_rules</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="write_net_rules">
        <term><command>write_net_rules</command></term>
        <listitem>
          <para>Un script qui insère des règles Udev pour fournir des
          noms stables pour des interfaces réseau (voir aussi
          <xref linkend="ch-scripts-network"/>)
          </para>
          <indexterm zone="ch-system-udev write_net_rules">
            <primary sortas="b-write_net_rules">write_net_rules</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libudev">
        <term><command>libudev</command></term>
        <listitem>
          <para>Une interface bibliothèque vers les informations de
          périphériques</para>
          <indexterm zone="ch-system-udev libudev">
            <primary sortas="c-libudev">libudev</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libvolume_id">
        <term><command>libvolume_id</command></term>
        <listitem>
          <para>Une interface bibliothèque pour lire les labels de volume et
          les uuids</para>
          <indexterm zone="ch-system-udev libvolume_id">
            <primary sortas="c-libvolume_id">libvolume_id</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="etc-udev">
        <term><filename class="directory">/etc/udev</filename></term>
        <listitem>
          <para>Contient des fichiers de configuation Udev, des droits pour les
          périphériques, et des règles pour nommer les périphériques</para>
          <indexterm zone="ch-system-udev etc-udev">
            <primary sortas="e-/etc/udev">/etc/udev</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
