<sect1 id="ch06-chroot">
<title>Entrée dans l'environnement "chrooté"</title>
<?dbhtml filename="chroot.html" dir="chapter06"?>

<para>C'est le moment d'entrer dans l'environnement chroot afin d'installer
le reste des programmes nécessaires. Avant de lancer la commande chroot, vous
devez être <emphasis>root</emphasis> car seul l'utilisateur
<emphasis>root</emphasis> peut utiliser la commande
<userinput>chroot</userinput>.</para>

<para>Devenez <emphasis>root</emphasis> et lancez la commande suivante pour
entrer dans l'environnement chroot:</para>

<para><screen><userinput>chroot $LFS /static/bin/env -i \
&nbsp;&nbsp;&nbsp;&nbsp;HOME=/root TERM=$TERM PS1='\u:\w\$ ' \
&nbsp;&nbsp;&nbsp;&nbsp;PATH=/bin:/usr/bin:/sbin:/usr/sbin:/static/bin \
&nbsp;&nbsp;&nbsp;&nbsp;/static/bin/bash --login</userinput></screen>
</para>

<para>L'option <userinput>-i</userinput> donné à la commande
<userinput>env</userinput> efface toutes les variables de l'environnement
chroot. Après cela, seules les variables HOME, TERM, PS1 et PATH sont
initialisées de nouveau. La commande TERM=$TERM initialise la variable
TERM à l'intérieur de chroot à la même valeur que celle à l'extérieur de chroot;
cette variable est utilisée par des programmes comme vim et less pour
fonctionner correctement. Si vous avez besoin d'autres variables, telles que
CFLAGS ou CXXFLAGS, initialisez-les de même.</para>

<para>Dès maintenant, nous n'avons plus besoin d'utiliser la variable LFS --
car le que le shell pense être <filename class="directory">/mnt/lfs</filename>
est la valeur de <filename class="directory">$LFS</filename>, qui a été passé à
la commande chroot.</para>

<para>Assurez-vous que les commandes suivantes dans le reste de ce chapitre et
les suivants sont exécutées dans l'environnement chroot. Si vous quittez
l'environnement chroot (en redémarrant l'ordinateur par exemple), vous devez
vous rappeller de retourner dans l'environnement chroot et de monter $LFS/proc
de nouveau (comme indiqué plus tard) avant de continuer dans le livre.</para>

<para>Notez que l'invite de commande de bash contiendra "I have no name!" 
(je n'ai pas de nom!) ce qui est normal puisque Glibc n'a pas encore été 
installé.</para>

</sect1>
