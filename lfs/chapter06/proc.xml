<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>
<sect1 id="ch-system-proc">
<title>Monter les systèmes de fichiers proc et devpts</title>
<?dbhtml filename="proc.html"?>

<para>Pour que certains programmes fonctionnent correctement, les systèmes de
fichiers <emphasis>proc</emphasis> and <emphasis>devpts</emphasis> doivent être
disponibles dans l'environnement chroot. Le système de fichiers proc est le
pseudo système de fichiers d'informations sur les processus à travers lequel le
noyau fournit des informations sur l'état du système. Le système de fichiers
devpts est maintenant le moyen le plus commun d'implémenter les pseudo
terminaux (PTY). À partir de la version du noyau du noyau 2.4, un système de
fichiers est montable autant de fois et à autant d'endroits que possible, donc
ce n'est pas un problème que ces systèmes de fichiers soient déjà montés sur
votre système hôte, spécialement parce qu'ils sont des systèmes de fichiers
virtuels.</para>

<para>Tout d'abord, devenez <emphasis>root</emphasis>, car seul
<emphasis>root</emphasis> peut monter les systèmes de fichiers à des endroits
inhabituels. Puis, vérifiez bien que la variable d'environnement LFS est
correctement initialisée en lançant <userinput>echo
$LFS</userinput> et en vous assurant que s'affiche le chemin du point de
montage de votre partition LFS, <filename class="directory">/mnt/lfs</filename>
si vous avez suivi notre exemple.</para>

<para>Maintenant, créez les points de montage pour ces systèmes de
fichiers&nbsp;:</para>

<screen><userinput>mkdir -p $LFS/{proc,dev/pts}</userinput></screen>

<para>Montez le système de fichiers <emphasis>proc</emphasis>
avec&nbsp;:</para>

<screen><userinput>mount proc $LFS/proc -t proc</userinput></screen>

<para>Et montez le système de fichiers <emphasis>devpts</emphasis>
avec&nbsp;:</para>

<screen><userinput>mount devpts $LFS/dev/pts -t devpts</userinput></screen>

<para>La dernière commande pourrait échouer avec une erreur de ce
type&nbsp;:</para>

<blockquote><screen>filesystem devpts not supported by kernel</screen></blockquote>

<para>La cause la plus probable de cette erreur est que le noyau de votre
système hôte a été compilé sans le support du système de fichiers devpts (vous
pouvez vérifier quels systèmes de fichiers votre noyau supporte avec 
par exemple <command>cat /proc/filesystems</command>). Quelques PTY sont
nécessaires pour lancer les suites de tests pour Binutils et GCC un peu plus
tard. Si votre noyau ne supporte pas devpts, ne vous inquiétez pas  il existe
un autre moyen pour les faire fonctionner dans l'environnement chroot. Nous le
couvrirons rapidement dans la section <xref
linkend="ch-system-MAKEDEV"/>.</para>

<para>Rappellez-vous que, si pour une raison quelconque vous arrêter de
travailer avec votre LFS et recommencer un peu plus tard, il est important de
vérifier que ces systèmes de fichiers sont encore montés avant d'entrer dans
l'environnement chroot, sinon des problèmes pourraient survenir.</para>

</sect1>
