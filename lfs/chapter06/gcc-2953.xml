<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>
<sect1 id="ch-system-gcc-2953">
<title>GCC-&gcc-2953-version;</title>
<?dbhtml filename="gcc-2953.html"?>

<indexterm zone="ch-system-gcc-2953"><primary
sortas="a-GCC-2953">GCC-2953</primary></indexterm>

<screen>&buildtime; 1,5&nbsp;SBU
&buildtime; 130&nbsp;Mo</screen>

<sect2>
<title>Installation de GCC</title>

<para>Ce package est connu pour mal se comporter si vous changez les options
d'optimisation par défaut (en incluant les options -march et -mcpu). Donc, si
vous avez défini des variables d'environnement qui surchargent les optimisations
pas défaut, telles que CFLAGS et CXXFLAGS, nous vous recommandons de supprimer
cette initialisation lors de la construction de GCC.</para>

<para>C'est une ancienne version de GCC que nous allons installer pour compiler
le noyau Linux au <xref linkend="chapter-bootable"/>. Cette version est
recommandée par les développeurs du noyau lorsque vous avez besoin d'une
stabilité absolue. Les versions suivantes de GCC n'ont pas été autant testées
pour la compilation du noyau Linux. Utiliser une de ces versions a de bonne
chance de fonctionner, néanmoins, nous vous recommandons d'adhérer au conseil
des développeurs du noyau et d'utiliser cette version pour compiler votre
noyau.</para>

<note><para>Nous n'installons pas le compilateur C++ ou les bibliothèques ici.
Néanmoins, vous pouvez avoir de bonnes raisons pour souhaiter les installer.
Vous trouverez plus d'informations sur <ulink
url="&blfs-root;view/stable/general/gcc2.html"/>.</para></note>

<para>Nous installerons cette ancienne version de GCC avec comme préfixe, non
standard, <filename class="directory">/opt</filename> de façon à éviter les
interférences avec le système GCC déjà installé dans <filename
class="directory">/usr</filename>.</para>

<para>Appliquez les correctifs et faites un petit ajustement&nbsp;:</para>

<screen><userinput>patch -Np1 -i ../gcc-&gcc-2953-version;-2.patch
patch -Np1 -i ../gcc-&gcc-2953-version;-no-fixinc.patch
patch -Np1 -i ../gcc-&gcc-2953-version;-returntype-fix.patch
echo timestamp &gt; gcc/cstamp-h.in</userinput></screen>

<para>La documentation GCC recommande la construction de GCC en dehors du
répertoire des sources, c'est-à-dire dans un répertoire dédié&nbsp;:</para>

<screen><userinput>mkdir ../gcc-2-build
cd ../gcc-2-build</userinput></screen>

<para>Compilez et installez le compilateur&nbsp;:</para>

<screen><userinput>../gcc-&gcc-2953-version;/configure
--prefix=/opt/gcc-&gcc-2953-version; \
    --enable-shared --enable-languages=c \
    --enable-threads=posix
make bootstrap
make install</userinput></screen>

</sect2>

</sect1>

