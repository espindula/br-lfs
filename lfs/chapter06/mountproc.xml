<sect1 id="ch06-proc">
<title>Monter le système de fichier proc et devfs</title>
<?dbhtml filename="proc.html" dir="chapter06"?>

<para>Pour que certans programmes fonctionnent correctement, les systèmes
de fichiers proc et devfs doit être monté et disponible aussi depuis
l'environnement chrooté. Un système de fichiers peut être monté autant de fois
et à autant d'emplacements différents que vous le souhaitez. Donc, ce n'est pas
un problème que ces systèmes de fichiers proc soientt déjà montés sur votre
système hôte, surtout parce que ce sont des systèmes de fichiers virtuels.
</para>

<para>Le système de fichiers proc est monté sous <filename class="directory">
/proc</filename> en lançant la commande suivante.</para>

<para><screen><userinput>mount proc /proc -t proc</userinput></screen></para>

<para>Le système de fichiers devpts est monté sur <filename
class="directory">/dev/pts</filename> en lançant:</para>

<para><screen><userinput>mount devpts /dev/pts -t devpts</userinput></screen>
</para>

<para>Si cette commande devait échouer avec une erreur du style:</para>

<blockquote><screen>filesystem devpts not supported by kernel</screen></blockquote>

<para>Cela signifie que votre système hôte ne dispose pas du support de devfs.
Vous avez deux options à ce moment. Vous pouvez ne pas vous en soucier, dans ce
cas certains des tests lancés plus tard échoueront, ou vous pouvez utiliser
la commande suivante à partir d'un terminal ne se trouvant pas dans le chroot
pour placer le système pts de votre hôte dans votre nouveau système de fichiers
LFS:</para>

<para><screen><userinput>mount --bind /dev/pts $LFS/dev/pts</userinput></screen>
</para>

<para>Vous pouvez obtenir des messages d'avertissement de la commande mount,
tels que:</para>

<blockquote><screen>warning: can't open /etc/fstab: No such file or directory
not enough memory</screen></blockquote>

<para>Ignorez-les, ils sont dûs au fait que le système n'est pas encore
installé complètement et que quelques fichiers manquent. Le montage lui-même
sera fait avec succès et c'est tout ce dont nous avons besoin à ce moment.
</para>

<para>La dernière erreur ("not enough memory", c'est-à-dire pas assez de
mémoire) ne se montre pas toujours. Elle dépends de la configuration de votre
système (telle que la version de Glibc du système hôte, utilisé pour compiler
le programme mount).</para>

<para>Rappelez-vous, si pour quelques raisons que ce soit, vous arrêtez de
travailler sur votre LFS et que vous recommenciez plus tard, il est important
de vérifier que ces systèmes de fichiers sont toujours montés dans
l'environnement chroot. Sinon, certains programmes pourraient ne pas être
compilés correctement.</para>

</sect1>
