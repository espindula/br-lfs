<sect1 id="ch06-proc">
<title>Monter le système de fichier proc et devfs</title>
<?dbhtml filename="proc.html" dir="chapter06"?>

<para>Pour que certans programmes fonctionnent correctement, les systèmes
de fichiers <emphasis>proc</emphasis> et <emphasis>devpts</emphasis> doivent
être disponibles depuis l'environnement chrooté. Un système de fichiers peut
être monté autant de fois et à autant d'emplacements différents que vous le
souhaitez. Donc, ce n'est pas un problème que ces systèmes de fichiers proc
soient déjà montés sur votre système hôte -- surtout parce que ce sont des
systèmes de fichiers virtuels.</para>

<para>Le système de fichiers <emphasis>proc</emphasis> est le pseudo système de
fichiers d'informations sur les processus que le noyau utilise pour donner des
informations sur l'état du système.</para>

<para>Le système de fichiers proc est monté sous <filename class="directory">
/proc</filename> en lançant la commande suivante.</para>

<screen><userinput>mount proc /proc -t proc</userinput></screen>

<para>Vous pouvez obtenir des messages d'avertissement de la commande mount,
tels que:</para>

<blockquote><screen>warning: can't open /etc/fstab: No such file or directory
not enough memory</screen></blockquote>

<para>Ignorez-les, ils sont dûs au fait que le système n'est pas encore
installé complètement et que quelques fichiers manquent. Le montage lui-même
sera fait avec succès et c'est tout ce dont nous avons besoin à ce moment.
</para>

<para>Le système de fichiers <emphasis>devpts</emphasis> a été mentionné plus
tôt et est maintenant la façon la plus commune d'implémenter les
pseudos-terminaux(PTY).</para>

<para>Le système de fichiers devpts est monté sur
<filename class="directory">/dev/pts</filename> en lançant:</para>

<screen><userinput>mount devpts /dev/pts -t devpts</userinput></screen>

<para>Si cette commande devait échouer avec une erreur du genre:</para>

<blockquote><screen>filesystem devpts not supported by kernel</screen></blockquote>

<para>La cause probable de ceci est que le noyau de votre système hôte a été
compilé sans le support du système de fichiers devpts. Vous pouvez vérifier
quels sont systèmes de fichiers que votre noyau supporte en fouillant dans ses
entrailles avec une commande telle que
<userinput>cat /proc/filesystems</userinput>. Si un type de système de fichiers
nommé <emphasis>devfs</emphasis> est affiché ici, alors nous serons capable de
contourner le problème en montant le système de fichiers devfs de l'hôte
au-dessus de la nouvelle structure <filename>/dev</filename> que nous créerons
plus tard dans la section "Créer des périphériques (Makedev)". Si devfs n'est
pas affiché, ne vous inquiétez pas car il existe une troisième façon d'obtenir
des PTY fonctionnels à l'intérieur de l'environnement chroot. Nous en parlerons
assez rapidement dans la section Makedev déjà mentionnée.</para>

<para>Rappelez-vous, si pour quelques raisons que ce soit, vous arrêtez de
travailler sur votre LFS et que vous recommenciez plus tard, il est important
de vérifier que ces systèmes de fichiers sont toujours montés dans
l'environnement chroot. Sinon, certains programmes pourraient ne pas être
compilés correctement.</para>

</sect1>
