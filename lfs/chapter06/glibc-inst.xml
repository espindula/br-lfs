<sect2>
<title>Installation de Glibc</title>

<para>Ce package nécessite que son patch lui soit appliqué vant
de pouvoir l'installer. Soyez sûr qu'il a été déballé avant de
lancer les commandes d'installation.</para>

<para>Avant d'installer glibc, vous devez vous positionner dans le
répertoire glibc-&glibc-version; et y déballer glibc-linuxthreads,
et non pas dans /usr/src comme vous le feriez normalement.</para>

<para>Ce package est connu pour avoir un mauvais fonctionnement si vous avez changé ses
paramètres d'optimisation par défaut (incluant les options -march et mcpu). Glibc se 
comporte mieux sans. Donc, si vous avez défini des variables d'environnement qui
écrasent les optimisations par défaut, comme CFLAGS et CXXFLAGS,
nous vous recommendons de les annuler ou de les modifier lors de la construction
de Glibc. Vous avez été prévenu.</para>

<para>De même, ne donnez pas l'option --enable-kernel au script de configuration. C'est
connu pour générer des segmentation faults lorsque des packages comme fileutils, make
et tar sont liés avec lui.</para>

<para>Généralement, compiler Glibc de n'importe quel autre façon que ce que suggère ce
livre, impose un risque très important sur votre système.</para>

<para>Installez Glibc en lançant les commandes suivantes:</para>

<para><screen><userinput>patch -Np1 -i ../glibc-&glibc-patch-version;.patch &amp;&amp;
touch /etc/ld.so.conf &amp;&amp;
mkdir ../glibc-build &amp;&amp;
cd ../glibc-build &amp;&amp;
../glibc-&glibc-version;/configure --prefix=/usr --disable-profile \
&nbsp;&nbsp;&nbsp;&nbsp;--enable-add-ons --libexecdir=/usr/bin &amp;&amp;
echo "cross-compiling = no" &gt; configparms &amp;&amp;
make &amp;&amp;
make install &amp;&amp;
make localedata/install-locales &amp;&amp;
exec /static/bin/bash --login</userinput></screen></para>

<para>Une alternative à l'exécution de <userinput>make
localedata/install-locales</userinput> est de n'installer que les locales dont vous avez besoin ou
que vous voulez. Cela se fait en exécutant la commande localdef. Vous trouverez des informations
à ce sujet dans le fichier INSTALL de l'arborescence de glibc-&glibc-version;. Le programme
<userinput>localedef</userinput> assume que le répertoire <filename class="directory">
/usr/lib/locale</filename> existe, donc vous avez besoin de le créer auparavant.</para>

<para>Durant l'étape de configuration vous allez voir ces avertissements:</para>

<blockquote><screen>configure: warning:
*** These auxiliary programs are missing or too old: msgfmt
*** some features will be disabled.
*** Check the INSTALL file for required versions.</screen></blockquote>

<para>Le msgfmt manquant (du package gettext que nous installerons plus tard dans ce
chapitre) ne gêne en rien. msgfmt est utilisé pour générer les fichiers de traductions
binaires qui sont utilisés pour que votre système parle dans un langage différent.
Parce que ces fichiers ont déjà été généré pour vous, nous n'avons pas besoin de msgfmt.
Vous en aurez seulement besoin si vous faites des changements dans les fichiers sources
(les fichiers <filename>*.po</filename> situés dans le répertoire
<filename class="directory">po</filename>) qui vous imposeraient de recompiler les binaires.
</para>

</sect2>