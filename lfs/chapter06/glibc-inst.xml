<sect2><title>Installation de Glibc</title><para>Avant d'installer glibc, vous devez vous positionner dans lerépertoire glibc-&glibc-version; et y déballer glibc-linuxthreads,et non pas dans /usr/src comme vous le feriez normalement.</para><para>Ce package est connu pour avoir un mauvais fonctionnement si vous avez changé sesparamètres d'optimisation par défaut (incluant les options -march et mcpu). Glibc se comporte mieux sans. Donc, si vous avez défini des variables d'environnement quiécrasent les optimisations par défaut, comme CFLAGS et CXXFLAGS,nous vous recommendons de les annuler ou de les modifier lors de la constructionde Glibc. Vous avez été prévenu.</para><para>De même, ne donnez pas l'option --enable-kernel au script de configuration. C'estconnu pour générer des segmentation faults lorsque des packages comme fileutils, makeet tar sont liés avec lui.</para><para>Généralement, compiler Glibc de n'importe quel autre façon que ce que suggère celivre, impose un risque très important sur votre système.</para><para>Installez Glibc en lançant les commandes suivantes:</para><para><screen><userinput>mknod -m 0666 /dev/null c 1 3 &amp;&amp;touch /etc/ld.so.conf &amp;&amp;cp malloc/Makefile malloc/Makefile.backup &amp;&amp;sed 's%\$(PERL)%/usr/bin/perl%' \&nbsp;&nbsp;&nbsp;&nbsp;malloc/Makefile.backup &gt; malloc/Makefile &amp;&amp;cp login/Makefile login/Makefile.backup &amp;&amp;sed 's/root/0/' login/Makefile.backup &gt; login/Makefile &amp;&amp;mkdir ../glibc-build &amp;&amp;cd ../glibc-build &amp;&amp;../glibc-&glibc-version;/configure --prefix=/usr \&nbsp;&nbsp;&nbsp;&nbsp;--enable-add-ons --libexecdir=/usr/bin &amp;&amp;echo "cross-compiling = no" &gt; configparms &amp;&amp;make &amp;&amp;make install &amp;&amp;make localedata/install-locales &amp;&amp;exec /bin/bash --login</userinput></screen></para><para>Une alternative à l'exécution de <userinput>makelocaledata/install-locales</userinput> est de n'installer que les locales dont vous avez besoin ouque vous voulez. Ca se fait en exécutant la commande localdef. Vous trouverez des informationsà ce sujet dans le fichier INSTALL de l'arborescence de glibc-&glibc-version;. Le programme<userinput>localedef</userinput> assume que le répertoire <filename class="directory">/usr/lib/locale</filename> existe, donc vous avez besoin de le créer auparavant.</para><para>Durant l'étape de configuration vous allez voir ces avertissements:</para><blockquote><screen>configure: warning:*** These auxiliary programs are missing or too old: msgfmt*** some features will be disabled.*** Check the INSTALL file for required versions.</screen></blockquote><para>The missing msgfmt (from the gettext package which we will installlater in this chapter) won't cause any problems. msgfmt is used to generatethe binary translation files that are used to make your system talk in adifferent language. Because these translation files have already beengenerated for you, there is no need for msgfmt. You'd only need msgfmt ifyou change the translation source files (the <filename>*.po</filename>files in the <filename class="directory">po</filename> subdirectory) which\would require you to re-generate the binary files.</para><para>Le msgfmt manquant (du package gettext que nous installerons plus tard dans cechapitre) ne gène en rien. Le fichier que msgfmt aurait voulu créer est déjà pré-construit, il nenous manque donc rien. Vous en aurez seulement besoin si vous faites des changemenents dans lesfichiers sources (les fichiers <filename>*.po</filename>situés dans le répertoire <filename class="directory">po</filename>) quivous imposeraient de recompiler les binaires.</para></sect2>