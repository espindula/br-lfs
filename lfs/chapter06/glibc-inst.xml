<sect2><title>&nbsp;</title><para>&nbsp;</para></sect2>

<sect2>
<title>Installation de Glibc</title>

<para>La documentation d'installation de Glibc recommende de construire Glibc,
en dehors du répertoire des sources, dans un répertoire dédié:</para>

<para><screen><userinput>mkdir ../glibc-build
cd ../glibc-build</userinput></screen></para>

<para>Ensuite, préparez la compilation de Glibc:</para>

<para><screen><userinput>../glibc-&glibc-version;/configure --prefix=/usr \
&nbsp;&nbsp;&nbsp;&nbsp;--disable-profile --enable-add-ons \
&nbsp;&nbsp;&nbsp;&nbsp;--libexecdir=/usr/bin \
&nbsp;&nbsp;&nbsp;&nbsp;--with-headers=/usr/include</userinput></screen></para>

<para>La signification des options de configure est:</para>

<itemizedlist>
<listitem><para><userinput>--disable-profile</userinput> : Ceci désactive la
construction des bibliothèques avec des informations de profilage. Cette
commande peut être omise si vous plannifiez de faire du profilage.
</para></listitem>

<listitem><para><userinput>--enable-add-ons</userinput> : Ceci active tous les
modules supplémentaires que nous avons installés avec Glibc, c'est-à-dire
linuxthreads dans notre cas.</para></listitem>

<listitem><para><userinput>--libexecdir=/usr/bin</userinput> : Ceci fera que le
programme <filename>pt_chown</filename> sera installé dans le répertoire
<filename>/usr/bin</filename>.</para></listitem>
</itemizedlist>

<para>Durant cette étape, vous verrez le message d'avertissement suivant:</para>

<blockquote><screen>configure: warning:
*** These auxiliary programs are missing or too old: msgfmt
*** some features will be disabled.
*** Check the INSTALL file for required versions.</screen></blockquote>

<para>Le programme <filename>msgfmt</filename> manquant (du package Gettext que
nous installerons plus tard dans ce chapitre) ne causera pas de problèmes.
<filename>msgfmt</filename> permet de générer les fichiers binaires de
traduction que votre système utilise pour parler une autre langue. Comme les
fichiers de traduction ont déjà été générés pour vous, il n'y a pas besoin de
<filename>msgfmt</filename>. Vous aurez besoin de ce programme uniquement si
vous devez changer les fichiers source de traduction (les fichiers
<filename>*.po</filename> dans le sous-répertoire <filename
class="directory">po</filename>) ce qui nécessitera de regénérer les fichiers
binaires.</para>

<para>Continuez avec la compilation du package:</para>

<para><screen><userinput>make</userinput></screen></para>

<para>Nous continuerons avec l'installation du package. Les pages man de
Linuxthreads ne vont pas être installées à ce moment parce qu'elles nécessitent
une installation fonctionnelle de Perl. Nous installerons Perl plus tard sur ce
chapitre, et les pages man seront installées lorsque Glibc sera installé pour la
deuxième fois à la fin de ce chapitre.</para>

<para><screen><userinput>make check</userinput></screen></para>

<para><screen><userinput>make install</userinput></screen></para>

<para>Les <quote>locales</quote> (utilisées par Glibc pour que votre système
Linux puisse parler une autre langue) n'ont pas été installées lorsque vous
avez lancé la commande précédente, donc vous devez le faire vous-même
maintenant:</para>

<para><screen><userinput>make localedata/install-locales</userinput></screen></para>

<para>Une alternative au lancement de le commande précédente est d'installer
seulement les <quote>locales</quote> dont vous aurez besoin. On peut y arriver
en utilisant la commande localedef. Les informations à ce sujet sont
disponibles dans le fichier <filename>INSTALL</filename>, du répertoire
<filename>glibc-&glibc-version;</filename>.</para>

<para>Construire les pages man linuxthreads:</para>

<para><screen><userinput>make -C ../glibc-2.3.2/linuxthreads/man</userinput></screen></para>

<para>Installez les pages man:</para>

<para><screen><userinput>make -C ../glibc-2.3.2/linuxthreads/man install</userinput></screen></para>

<para>Pour finir l'installation, nous relancerons Bash pour qu'il utilise les
fichiers libnss. Ceci nous débarrasse du message <emphasis>I have no
name!</emphasis> ("Je n'ai pas de nom!") à l'invite:</para>

<para><screen><userinput>exec /stage1/bin/bash --login
set +h</userinput></screen></para>

</sect2>

