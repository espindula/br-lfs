<sect2><title>&nbsp;</title><para>&nbsp;</para></sect2>

<sect2>
<title>Installation de Glibc</title>

<para>Le système de construction de Glibc est très intégré et installera
parfaitement, même si le fichier specs de notre compilateur et les scripts de
l'éditeur de liens pointent toujours vers <filename>/tools</filename>. Nous ne
pouvons ajuster specs et l'éditeur de liens avant l'installation de Glibc,
parce que les tests autoconf de Glibc donneraient des résultats erronés et
mettraient en déroute notre but d'une construction saine.</para>

<note><para>La suite de tests pour Glibc dans cette section est considérée
<emphasis>critique</emphasis>. Notre conseil est de la faire absolument.
</para></note>

<para>Avant de commencer la construction de Glibc, rappelez-vous de déballer
Glibc-linuxthreads encore une fois à l'intérieur du répertoire
<filename>glibc-&glibc-version;</filename>, et de dé-configurer toute variable
d'environnement qui pourrait surcharger les options d'optimisation par
défaut.</para>

<para>Puis, appliquez le même correctif que nous avons utilisé précédemment:
</para>
<para><screen><userinput>patch -Np1 -i ../glibc-&glibc-sscanf-patch-version;.patch</userinput></screen></para>

<para>La documentation d'installation de Glibc recommende de construire Glibc,
en dehors du répertoire des sources, dans un répertoire dédié:</para>

<para><screen><userinput>mkdir ../glibc-build
cd ../glibc-build</userinput></screen></para>

<para>Maintenant, préparez la compilation de Glibc:</para>

<para><screen><userinput>../glibc-&glibc-version;/configure --prefix=/usr \
&nbsp;&nbsp;&nbsp;&nbsp;--disable-profile --enable-add-ons \
&nbsp;&nbsp;&nbsp;&nbsp;--libexecdir=/usr/bin --with-headers=/usr/include</userinput></screen></para>

<para>La signification des options de configure est:</para>

<itemizedlist>
<listitem><para><userinput>--libexecdir=/usr/bin</userinput> : Ceci fera que le
programme <filename>pt_chown</filename> sera installé dans le répertoire
<filename>/usr/bin</filename>.</para></listitem>

<listitem><para><userinput>--with-headers=/usr/include</userinput>: Ceci nous
assure que les entêtes du noyau dans <filename>/usr/include</filename> sont
utilisés lors de cette construction. Si vous ne donnez pas cette option, alors
les entêtes de <filename>/tools/include</filename> seront utilisés ce qui
ne sera, bien sûr, pas idéal (bien qu'ils devraient être identiques). Utiliser
cette option a l'avantage que vous serez informé immdiatement si vous avez
oublié d'installer les entêtes du noyau dans <filename>/usr/include</filename>.
</para></listitem>

</itemizedlist>

<para>Compilez le package:</para>

<para><screen><userinput>make</userinput></screen></para>

<para>Testez les résultats:</para>

<para><screen><userinput>make check</userinput></screen></para>

<para>Et installez le package:</para>

<para><screen><userinput>make install</userinput></screen></para>

<para>Les locales permettant à votre système de parler une autre langue n'ont
pas été installées par la commande précédente. Faites-le avec ceci:</para>

<para><screen><userinput>make localedata/install-locales</userinput></screen></para>

<para>Une alternative au lancement de le commande précédente est d'installer
seulement les <quote>locales</quote> dont vous aurez besoin. On peut y arriver
en utilisant la commande <userinput>localedef</userinput>. Les informations à
ce sujet sont disponibles dans le fichier <filename>INSTALL</filename>, du
répertoire <filename>glibc-&glibc-version;</filename>. Néanmoins, il existe un
nombre de locales essentiels pour que les tests des futurs packages réussissent.
Les instructions suivantes, au lieu de la commande install-locales ci-dessus,
installera l'ensemble minimum de locales nécessaires pour que les tests soient
couronnés de succès:</para>

<para><screen><userinput>mkdir -p /usr/lib/locale
localedef -i de_DE -f ISO-8859-1 de_DE
localedef -i de_DE@euro -f ISO-8859-15 de_DE@euro
localedef -i en_HK -f ISO-8859-1 en_HK
localedef -i en_PH -f ISO-8859-1 en_PH
localedef -i en_US -f ISO-8859-1 en_US
localedef -i es_MX -f ISO-8859-1 es_MX
localedef -i fr_FR -f ISO-8859-1 fr_FR
localedef -i fr_FR@euro -f ISO-8859-15 fr_FR@euro
localedef -i it_IT -f ISO-8859-1 it_IT
localedef -i ja_JP -f EUC-JP ja_JP</userinput></screen></para>

<para>Enfin, construisez les pages man linuxthreads:</para>

<para><screen><userinput>make -C ../glibc-2.3.2/linuxthreads/man</userinput></screen></para>

<para>Et installez les pages man:</para>

<para><screen><userinput>make -C ../glibc-2.3.2/linuxthreads/man install</userinput></screen></para>

</sect2>

