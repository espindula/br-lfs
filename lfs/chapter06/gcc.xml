<sect1 id="ch06-gcc">
<title>Installer GCC-&gcc-version;</title>
<?dbhtml filename="gcc.html" dir="chapter06"?>

<screen>Estimation du temps de construction:           &gcc-time;
Estimation de l'espace disque requis:  &gcc-compsize;</screen>

&aa-gcc-shortdesc;
&aa-gcc-dep;

<sect2><title>&nbsp;</title><para>&nbsp;</para></sect2>

<sect2>
<title>Installation de GCC</title>

<note><para>La suite de tests pour GCC de cette section est considérée comme
<emphasis>critique</emphasis>. Notre conseil est de la réaliser quelques soient
les circonstances.</para></note>

<para>Ce package est connu pour mal se comporter si vous changez les options
d'optimisation par défaut (en incluant les options -march et -mcpu). Donc, si
vous avez défini des variables d'environnement qui surchargent les optimisations
pas défaut, telles que CFLAGS et CXXFLAGS, nous vous recommandons de supprimer
cette initialisation lors de la construction de GCC.</para>

<para>Cette fois, nous allons construire le compilateur C et le compilateur C++,
donc vous devez déballer les archives tar GCC-core <emphasis>et</emphasis>
GCC-g++, qui utiliseront le même répertoire. Vous devrez aussi certainement
extraire le package GCC-testsuite. Le package GCC complet contient encore plus
de compilateurs. Les instructions de construction pour ceux-ci se trouvent sur
<ulink url="&blfs-root;view/stable/general/gcc.html"/>.</para>

<screen><userinput>patch -Np1 -i ../&gcc-nofixincludes-patch;
patch -Np1 -i ../&gcc-suppress-libiberty-patch;</userinput></screen>

<para>Le second correctif supprimer ici l'installation de libiberty à partir de
GCC, car nous utilisons celui fourni par binutils. Faites attention à
<emphasis>ne pas</emphasis> appliquer le correctif "GCC specs" du chapitre 5.
</para>

<para>La documentation GCC recommane de construire GCC en dehors du répertoire
source, c'est-à-dire dans un répertoire de construction dédié&nbsp;:</para>

<screen><userinput>mkdir ../gcc-build
cd ../gcc-build</userinput></screen>

<para>Maintenant, préparez la compilation de GCC&nbsp;:</para>

<screen><userinput>../gcc-&gcc-version;/configure --prefix=/usr \
&nbsp;&nbsp;&nbsp;&nbsp;--enable-shared --enable-threads=posix \
&nbsp;&nbsp;&nbsp;&nbsp;--enable-__cxa_atexit --enable-clocale=gnu \
&nbsp;&nbsp;&nbsp;&nbsp;--enable-languages=c,c++</userinput></screen>

<para>Compilez le package&nbsp;:</para>

<screen><userinput>make</userinput></screen>

<para>Testez le résultat mais ne vous arrêtez pas aux erreurs (vous vous en
rappelerez)&nbsp;:</para>

<screen><userinput>make -k check</userinput></screen>

<para>Les notes de la suite de tests de <xref linkend="ch05-gcc-pass2"/> sont
encore une fois appropriées ici. Assurez-vous de vous y référer si vous avez des
doutes.</para>

<para>Et, installez le package&nbsp;:</para>

<screen><userinput>make install</userinput></screen>

<para>Quelques packages s'attendent à ce que le préprocesseur C soit installé
dans le répertoire <filename>/lib</filename>. Pour utiliser ces packages, créez
ce lien symbolique&nbsp;:</para>

<screen><userinput>ln -s ../usr/bin/cpp /lib</userinput></screen>

<para>Beaucoup de packages utilisent le nom <userinput>cc</userinput> pour
appeler le compilateur C. Pour satisfaire ces packages, créez le lien
symbolique&nbsp;:</para>

<screen><userinput>ln -s gcc /usr/bin/cc</userinput></screen>

<note><para>Maintenant, il est fortement recommandé de répéter les vérifications
réalisées dans ce chapitre. Référez-vous à <xref
linkend="ch06-adjustingtoolchain"/> et répétez les vérifications. Si les
résultats sont mauvais, il est fortement probable que vous avez mal appliqué le
correctif "GCC Specs" lors du chapitre 5.</para></note>

</sect2>

</sect1>

