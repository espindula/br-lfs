<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>
<sect1 id="ch-system-gcc" xreflabel="GCC">
<title>GCC-&gcc-version;</title>
<?dbhtml filename="gcc.html"?>

<indexterm zone="ch-system-gcc"><primary sortas="a-GCC">GCC</primary></indexterm>

<para>Le paquet GCC contient la collection de compilateurs GNU, qui inclut les
compilateurs C et C++.</para>

<screen>&buildtime; 11,7&nbsp;SBU
&diskspace; 294&nbsp;Mo</screen>

<para>L'installation de GCC dépend de Bash, Binutils, Coreutils, Diffutils,
Findutils, Gawk, Gettext, Glibc, Grep, Make, Perl, Sed, Texinfo.</para>



<sect2>
<title>Installation de GCC</title>

<para>Ce paquet est connu pour mal se comporter si vous changez les options
d'optimisation par défaut (en incluant les options <emphasis>-march</emphasis>
et <emphasis>-mcpu</emphasis>). Donc, si vous avez défini des variables
d'environnement qui surchargent les optimisations par défaut, telles que CFLAGS
et CXXFLAGS, nous vous recommandons de supprimer cette initialisation lors de la
construction de GCC.</para>

<para>Déballez l'archive tar GCC-core <emphasis>et</emphasis> GCC-g++. Ils
atterriront dans le même répertoire. Vous devez extraire le paquet
GCC-testsuite. Le paquet GCC complet contient encore plus de compilateurs. Les
instructions pour leur construction sont disponibles sur
<ulink url="&blfs-root;view/stable/general/gcc.html"/>.</para>

<para>Tout d'abord, appliquez seulement le correctif No-Fixincludes (et
<emphasis>pas</emphasis> Specs ) utilisé aussi dans le chapitre précédent&nbsp;:
</para>

<screen><userinput>patch -Np1 -i ../gcc-&gcc-version;-no_fixincludes-1.patch</userinput></screen>

<para>Maintenant, appliquez une substitution sed qui supprimera l'installation
de <filename>libiberty.a</filename>. Nous voulons utiliser la version de
<filename>libiberty.a</filename> fournie par Binutils&nbsp;:</para>

<screen><userinput>sed -i 's/install_to_$(INSTALL_DEST) //' libiberty/Makefile.in</userinput></screen>

<para>La documentation de GCC recommande de construire GCC en dehors du
répertoire source, c'est-à-dire dans un répertoire dédié&nbsp;:</para>

<screen><userinput>mkdir ../gcc-build
cd ../gcc-build</userinput></screen>

<para>Maintenant, préparez la compilation de GCC&nbsp;:</para>

<screen><userinput>../gcc-&gcc-version;/configure --prefix=/usr \
    --enable-shared --enable-threads=posix \
    --enable-__cxa_atexit --enable-clocale=gnu \
    --enable-languages=c,c++</userinput></screen>

<para>Compilez le paquet&nbsp;:</para>

<screen><userinput>make</userinput></screen>

<important><para>La suite de tests pour GCC dans cette section est considérée
<emphasis>critique</emphasis>. Notre conseil est de ne pas la laisser passer
quelque soient les circonstances.</para></important>

<para>Testez les résultats mais ne vous arrêtez pas aux erreurs (vous vous
rappellerez des quelques-unes connues)&nbsp;:</para>

<screen><userinput>make -k check</userinput></screen>

<para>Les notes de la suite de tests sur <xref linkend="ch-tools-gcc-pass2"/>
sont toujours très appropriées ici. Assurez-vous de vous y référer si vous avez
un doute.</para>

<para>Maintenant, installez le paquet&nbsp;:</para>

<screen><userinput>make install</userinput></screen>

<para>Quelques paquets s'attendent à ce que le préprocesseur C soit installé
dans le répertoire <filename>/lib</filename>. Pour supporter ces paquets,
créez ce lien symbolique&nbsp;:</para>

<screen><userinput>ln -s ../usr/bin/cpp /lib</userinput></screen>

<para>Beaucoup de paquets utilisent le nom <command>cc</command> pour appeller
le compilateur C. Pour satisfaire ces paquets, créez un lien
symbolique&nbsp;:</para>

<screen><userinput>ln -s gcc /usr/bin/cc</userinput></screen>

<note><para>À ce moment, il est fortement recommandé de répéter les
vérifications que nous avons réalisé plus tôt dans ce chapitre. Référez-vous à
<xref linkend="ch-system-readjusting"/> et répétez la vérification. Si les
résultats sont mauvais, alors il y a des chances pour que vous ayez mal appliqué
le correctif GCC Specs à partir de <xref
linkend="chapter-temporary-tools"/>.</para></note>

</sect2>


<sect2 id="contents-gcc"><title>Contenu de GCC</title>

<para><emphasis>Programmes installés</emphasis>&nbsp;: c++, cc (lien vers gcc),
cc1, cc1plus, collect2, cpp, g++, gcc, gccbug et gcov</para>

<para><emphasis>Bibliothèques installées</emphasis>&nbsp;: libgcc.a,
libgcc_eh.a, libgcc_s.so, libstdc++.[a,so] et libsupc++.a</para>

</sect2>


<sect2><title>Courtes descriptions</title>

<indexterm zone="ch-system-gcc cpp"><primary sortas="b-cpp">cpp</primary></indexterm>
<para id="cpp"><command>cpp</command> est le préprocesseur C. Il est utilisé
par le compilateur pour l'extension des instructions #include et #define dans
les fichiers sources.</para>

<indexterm zone="ch-system-gcc g"><primary sortas="b-g++">g++</primary></indexterm>
<para id="g"><command>g++</command> est le compilateur C++.</para>

<indexterm zone="ch-system-gcc gcc"><primary sortas="b-gcc">gcc</primary></indexterm>
<para id="gcc"><command>gcc</command> est le compilateur C. Il est utilisé pour
traduire le code source d'un programme en code assembleur.</para>

<indexterm zone="ch-system-gcc gccbug"><primary sortas="b-gccbug">gccbug</primary></indexterm>
<para id="gccbug"><command>gccbug</command> est un script shell utilisé pour
aider à la création de bons rapports de bogues.</para>

<indexterm zone="ch-system-gcc gcov"><primary sortas="b-gcov">gcov</primary></indexterm>
<para id="gcov"><command>gcov</command> est un outil de tests. Il est utilisé
pour analyser les programmes et savoir où des optimisations seraient
suivies du plus d'effet.</para>

<indexterm zone="ch-system-gcc libgcc"><primary sortas="c-libgcc*">libgcc*</primary></indexterm>
<para id="libgcc"><command>libgcc*</command> contient un support en exécution
pour gcc.</para>

<indexterm zone="ch-system-gcc libstdc"><primary sortas="c-libstdc++">libstdc++</primary></indexterm>
<para id="libstdc"><command>libstdc++</command> est la bibliothèque standard
C++. Elle contient les fonctions les plus fréquemment utilisées.</para>

<indexterm zone="ch-system-gcc libsupc"><primary sortas="c-libsupc++">libsupc++</primary></indexterm>
<para id="libsupc"><command>libsupc++</command> fournit des routines de support
pour le langage de programmation C++.</para>

</sect2>



</sect1>
