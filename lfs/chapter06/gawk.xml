<sect1 id="ch06-gawk">
<title>Installer Gawk-&gawk-version;</title>
<?dbhtml filename="gawk.html" dir="chapter06"?>

<screen>Estimation du temps de construction :           &gawk-time;
Estimation de l'espace disque requis :  &gawk-compsize;</screen>

&aa-gawk-shortdesc;
&aa-gawk-dep;

<sect2><title>&nbsp;</title><para>&nbsp;</para></sect2>

<sect2>
<title>Installation de Gawk</title>

<para>Tout d'abord, appliquez un correctif pour résoudre les problèmes
suivants&nbsp;:</para>

<itemizedlist>
<listitem><para>L'emplacement par défaut de Gawk pour certains de ses
exécutables est <filename>$prefix/libexec/awk</filename>. Cet emplacement n'est
pas compatible avec FHS, qui ne mentionne à aucun moment un répertoire nommé
<filename>libexec</filename>. Le correctif rend possible le passage d'une option
<emphasis>--libexecdir</emphasis> au script configure, de façon à ce que nous
utilisions un emplacement plus approprié pour les binaires
<userinput>grcat</userinput> et <userinput>pwcat</userinput>&nbsp;:
<filename>/usr/bin</filename>.</para></listitem>

<listitem><para>Le répertoire des données par défaut de Gawk est
<filename>$prefix/share/awk</filename>. Mais les répertoires spécifiques aux
packages devraient être nommés suivant le nom du package et son numéro de
version (par exemple, <filename>gawk-7.7.2.</filename>) et non pas simplement
par son nom de package car il pourrait exister plusieurs versions d'un package
installé sur le système. Le correctif modifie le nom du répertoire de données en
un <filename>$prefix/share/gawk-&gawk-version;</filename> plsu correct.
</para></listitem>

<listitem><para>Le correctif nous assure aussi que le répertoire des données et
son contenu sont supprimés avec un <emphasis>make uninstall</emphasis>.
</para></listitem>
</itemizedlist>

<screen><userinput>patch -Np1 -i ../&gawk-patch;</userinput></screen>

<para>Maintenant, préparez la compilation de Gawk&nbsp;:</para>

<screen><userinput>./configure --prefix=/usr --libexecdir=/usr/bin</userinput></screen>

<para>Compilez le package&nbsp;:</para>

<screen><userinput>make</userinput></screen>

<para>Ce package dispose d'une suite de tests, réalisant plusieurs tests pour
s'assurer que le programme a été construit correctement. Si vous décidez de le
lancer, la commande suivante fera le nécessaire&nbsp;:</para>

<screen><userinput>make check</userinput></screen>

<para>Enfin, installez le package&nbsp;:</para>

<screen><userinput>make install</userinput></screen>

</sect2>

</sect1>

