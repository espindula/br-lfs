<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-system-dbus" role="wrap">
  <?dbhtml filename="dbus.html"?>

  <sect1info condition="script">
    <productname>dbus</productname>
    <productnumber>&dbus-version;</productnumber>
    <address>&dbus-url;</address>
  </sect1info>

  <title>D-Bus-&dbus-version;</title>

  <indexterm zone="ch-system-dbus">
    <primary sortas="a-dbus">D-Bus</primary>
  </indexterm>

  <sect2 role="package">
    <title/>

    <para>D-Bus est un système de bus de messages, manière simple pour les
    applications de se parler. D-Bus fournit un démon système (pour les
       événements comme "l'ajout de nouveaux matériels" ou le "changement de la
    file d'impression") et un démon individuel à chaque utilisateur connecté (pour
    les besoins généraux de communication entre les processus des applications
    utilisateur). De plus, le bus des messages est construit sur la base d'un
    environnement de circulation des messages par communication directe, ce que
    deux applications peuvent utiliser pour communiquer directement (sans
    passer par le démon de bus de messages).</para>

    <segmentedlist>
      <segtitle>&buildtime;</segtitle>
      <segtitle>&diskspace;</segtitle>

      <seglistitem>
        <seg>&dbus-ch6-sbu;</seg>
        <seg>&dbus-ch6-du;</seg>
      </seglistitem>
    </segmentedlist>

  </sect2>

  <sect2 role="installation">
    <title>Installation de D-Bus</title>

    <para>Préparez la compilation de D-Bus&nbsp;:</para>

<screen><userinput remap="configure">./configure --prefix=/usr                       \
            --sysconfdir=/etc                   \
            --localstatedir=/var                \
            --docdir=/usr/share/doc/dbus-&dbus-version;  \
            --with-console-auth-dir=/run/console</userinput></screen>

    <variablelist>
      <title>Voici la signification des options de configure&nbsp;:</title>

      <varlistentry>
        <term><parameter>--with-console-auth-dir=/run/console</parameter></term>
        <listitem>
          <para>Cela indique l'emplacement du répertoire d'auth de ConsoleKit.</para>
        </listitem>
      </varlistentry>

    </variablelist>

    <para>Compilez le paquet&nbsp;:</para>

<screen><userinput remap="make">make</userinput></screen>

    <para>Ce paquet est fourni avec une suite de tests mais elle exige des 
    paquets non inclus dans LFS. Vous pouvez trouver des instructions pour lancer
    la suite de tests dans BLFS, à <ulink url="http://www.fr.linuxfromscratch.org/view/blfs-svn/general/dbus.html"/>.</para>

    <para>Installez le paquet&nbsp;:</para>

<screen><userinput remap="install">make install</userinput></screen>

    <para>Il faut déplacer la bibliothèque partagée dans 
    <filename class="directory">/lib</filename> et, par conséquent, le fichier
    <filename class="extension">.so</filename> de
    <filename class="directory">/usr/lib</filename> devra être recréé&nbsp;:</para>

<screen><userinput remap="install">mv -v /usr/lib/libdbus-1.so.* /lib
ln -sfv ../../lib/$(readlink /usr/lib/libdbus-1.so) /usr/lib/libdbus-1.so</userinput></screen>

    <para>Créez un lien symbolique pour que D-Bus et Systemd puissent utiliser
    le fichier <filename>machine-id</filename>&nbsp;:</para>

<screen><userinput remap="install">ln -sv /etc/machine-id /var/lib/dbus</userinput></screen>

 
    <para>Enfin, générez un UUID D-Bus pour éviter des avertissements lors de la
    construction de certains paquets de BLFS&nbsp;:</para>

<screen><userinput remap="install">dbus-uuidgen --ensure</userinput></screen>

  </sect2>

  <sect2 id="contents-dbus" role="content">
    <title>Contenu de D-Bus</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>dbus-cleanup-sockets, dbus-daemon, dbus-launch, dbus-monitor,
        dbus-send et dbus-uuidgen</seg>
        <seg>libdbus-1.{a,so}</seg>
        <seg>/etc/dbus-1, /usr/include/dbus-1.0, /usr/lib/dbus-1.0,
        /usr/share/dbus-1, /usr/share/doc/dbus-&dbus-version;,
        /var/lib/dbus</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="dbus-cleanup-sockets">
        <term><command>dbus-cleanup-sockets</command></term>
        <listitem>
          <para>Utilisé pour nettoyer les sockets fantômes d'un répertoire.</para>
          <indexterm zone="ch-system-dbus dbus-cleanup-sockets">
            <primary sortas="b-dbus-cleanup-sockets">dbus-cleanup-sockets</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="dbus-daemon">
        <term><command>dbus-daemon</command></term>
        <listitem>
          <para>Démon de bus de messages.</para>
          <indexterm zone="ch-system-dbus dbus-daemon">
            <primary sortas="b-dbus-daemon">dbus-daemon</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="dbus-launch">
        <term><command>dbus-launch</command></term>
        <listitem>
          <para>Démarre <command>dbus-daemon</command> à partir d'un script shell.</para>
          <indexterm zone="ch-system-dbus dbus-launch">
            <primary sortas="b-dbus-launch">dbus-launch</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="dbus-monitor">
        <term><command>dbus-monitor</command></term>
        <listitem>
          <para>Surveille les messages circulant dans un bus de message D-Bus.</para>
          <indexterm zone="ch-system-dbus dbus-monitor">
            <primary sortas="b-dbus-monitor">dbus-monitor</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="dbus-send">
        <term><command>dbus-send</command></term>
        <listitem>
          <para>Envoie un message à un bus de message D-Bus.</para>
          <indexterm zone="ch-system-dbus dbus-send">
            <primary sortas="b-dbus-send">dbus-send</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="dbus-uuidgen">
        <term><command>dbus-uuidgen</command></term>
        <listitem>
          <para>Génère un ID universel et unique.</para>
          <indexterm zone="ch-system-dbus dbus-uuidgen">
            <primary sortas="b-dbus-uuidgen">dbus-uuidgen</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
