<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>
<sect1 id="ch-system-creatingdirs">
<title>Créer les répertoires</title>
<?dbhtml filename="creatingdirs.html"?>

<para>Il est temps de créer la hiérarchie de répertoires sur le système de
fichiers LFS. Créez une hiérarchie de répertoires standard en lançant les
commandes suivantes&nbsp;:</para>
 
<screen><userinput>install -dv /{bin,boot,dev,etc/opt,home,lib,mnt}
install -dv /{sbin,srv,usr/local,var,opt}
install -dv /root -m 0750
install -dv /tmp /var/tmp -m 1777
install -dv /media/{floppy,cdrom}
install -dv /usr/{bin,include,lib,sbin,share,src}
ln -sv share/{man,doc,info} /usr
install -dv /usr/share/{doc,info,locale,man}
install -dv /usr/share/{misc,terminfo,zoneinfo}
install -dv /usr/share/man/man{1,2,3,4,5,6,7,8}
install -dv /usr/local/{bin,etc,include,lib,sbin,share,src}
ln -sv share/{man,doc,info} /usr/local
install -dv /usr/local/share/{doc,info,locale,man}
install -dv /usr/local/share/{misc,terminfo,zoneinfo}
install -dv /usr/local/share/man/man{1,2,3,4,5,6,7,8}
install -dv /var/{lock,log,mail,run,spool}
install -dv /var/{opt,cache,lib/{misc,locate},local}
install -dv /opt/{bin,doc,include,info}
install -dv /opt/{lib,man/man{1,2,3,4,5,6,7,8}}</userinput></screen>

<para>Par défaut, les répertoires sont créés avec les droits 755, ce
qui n'est pas souhaitable pour tous les répertoires. Dans la commande ci-dessus,
deux modifications seront effectuées&nbsp;: un pour le répertoire principal de
<emphasis>root</emphasis> et un autre pour les répertoires des fichiers
temporaires.</para>

<para>Le premier changement de droit nous assure que n'importe qui ne
pourra pas entrer dans le répertoire <filename
class="directory">/root</filename> (de façon identique à ce que ferait un
utilisateur pour son répertoire principal). Le deuxième changement assure que
tout utilisateur peut écrire dans les répertoires <filename
class="directory">/tmp</filename> et <filename
class="directory">/var/tmp</filename>, mais ne peut pas supprimer les fichiers
des autres utilisateurs. Cette dernière interdiction est dûe au <quote>sticky
bit</quote>, le bit le plus haut dans le masque 1777.</para>

<sect2>
<title>Remarques à propos de la conformité FHS</title>

<para>L'arborescence de répertoires est basée sur le standard FHS
(disponible sur <ulink url="http://www.pathname.com/fhs/"/>). En plus de cette
arborescence, ce standard stipule l'existence de
<filename class="directory">/usr/local/games</filename> et
<filename class="directory">/usr/share/games</filename>. Le FHS n'est pas précis
en ce qui concerne la structure du sous-répertoire <filename
class="directory">/usr/local/share</filename>, donc
nous créons seulement les répertoires nécessaires. Néanmoins, n'hésitez pas à
créer ces répertoires si vous préférez vous conformer plus strictement au FHS.
</para>

</sect2>

</sect1>
