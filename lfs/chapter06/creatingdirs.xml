<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>
<sect1 id="ch-system-creatingdirs">
<title>Créer les répertoires</title>
<?dbhtml filename="creatingdirs.html"?>

<para>Créons maintenant la hiérarchie de répertoires sur notre système de
fichiers LFS. Lancer les commandes suivantes pour créer une hiérarchie
de répertoires plus ou moins standard :</para>
 
<screen><userinput>mkdir -p /{bin,boot,dev/{pts,shm},etc/opt,home,lib,mnt,proc}
mkdir -p /{root,sbin,srv,tmp,usr/local,var,opt}
mkdir -p /media/{floppy,cdrom}
mkdir /usr/{bin,include,lib,sbin,share,src}
ln -s share/{man,doc,info} /usr
mkdir /usr/share/{doc,info,locale,man}
mkdir /usr/share/{misc,terminfo,zoneinfo}
mkdir /usr/share/man/man{1,2,3,4,5,6,7,8}
mkdir /usr/local/{bin,etc,include,lib,sbin,share,src}
ln -s share/{man,doc,info} /usr/local
mkdir /usr/local/share/{doc,info,locale,man}
mkdir /usr/local/share/{misc,terminfo,zoneinfo}
mkdir /usr/local/share/man/man{1,2,3,4,5,6,7,8}
mkdir /var/{lock,log,mail,run,spool}
mkdir -p /var/{tmp,opt,cache,lib/misc,local}
mkdir /opt/{bin,doc,include,info}
mkdir -p /opt/{lib,man/man{1,2,3,4,5,6,7,8}}</userinput></screen>

<para>Par défaut, les répertoires sont créés avec le mode de permission 755, ce
qui n'est pas souhaitable pour tous les répertoires. Nous allons réaliser deux
changements&nbsp;: un pour le répertoire principal de <emphasis>root</emphasis>
et un autre pour les répertoires des fichiers temporaires.</para>

<screen><userinput>chmod 0750 /root
chmod 1777 /tmp /var/tmp</userinput></screen>

<para>Le premier changement de permission nous assure que n'importe qui ne
pourra pas entrer dans le répertoire <filename
class="directory">/root</filename>
(de façon identique à un utilisateur pour son répertoire principal).
Le deuxième changement assure que tout utilisateur peut écrire dans les
répertoires <filename class="directory">/tmp</filename> et
<filename class="directory">/var/tmp</filename>, mais ne peut pas supprimer
les fichiers des autres utilisateurs. Cette dernière interdiction est dûe au
<quote>sticky bit</quote>, le bit le plus haut dans le masque 1777.</para>

<sect2>
<title>Remarques à propos de la conformité FHS</title>

<para>Nous avons basé notre arborescence de répertoires sur le standard FHS
(disponible sur <ulink url="http://www.pathname.com/fhs/"/>). En plus de cette
arborescence, ce standard stipule l'existence de
<filename class="directory">/usr/local/games</filename> et
<filename class="directory">/usr/share/games</filename>, mais nous ne voyons pas
l'intérêt de ceux-ci pour un système de base. Néanmoins, vous êtes libres de
rendre votre système compatible FHS. En ce qui concerne la structure du
sous-répertoire <filename class="directory">/usr/local/share</filename>, le
FHS est inprécis, donc nous créons ici les répertoires qui nous semblent
nécessaires.</para>

</sect2>

</sect1>
