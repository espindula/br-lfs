<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>
<sect1 id="ch-system-creatingdirs">
<title>Créer les répertoires</title>
<?dbhtml filename="creatingdirs.html"?>

<para>Il est temps de créer la hiérarchie de répertoires sur le système de
fichiers LFS. Lancez les commandes suivantes pour créer une hiérarchie
de répertoires standard&nbsp;:</para>
 
<screen><userinput>install -d /{bin,boot,dev,etc/opt,home,lib,mnt}
install -d /{sbin,srv,usr/local,var,opt}
install -d /root -m 0750
install -d /tmp /var/tmp -m 1777
install -d /media/{floppy,cdrom}
install -d /usr/{bin,include,lib,sbin,share,src}
ln -s share/{man,doc,info} /usr
install -d /usr/share/{doc,info,locale,man}
install -d /usr/share/{misc,terminfo,zoneinfo}
install -d /usr/share/man/man{1,2,3,4,5,6,7,8}
install -d /usr/local/{bin,etc,include,lib,sbin,share,src}
ln -s share/{man,doc,info} /usr/local
install -d /usr/local/share/{doc,info,locale,man}
install -d /usr/local/share/{misc,terminfo,zoneinfo}
install -d /usr/local/share/man/man{1,2,3,4,5,6,7,8}
install -d /var/{lock,log,mail,run,spool}
install -d /var/{opt,cache,lib/{misc,locate},local}
install -d /opt/{bin,doc,include,info}
install -d /opt/{lib,man/man{1,2,3,4,5,6,7,8}}</userinput></screen>

<para>Par défaut, les répertoires sont créés avec les droits 755, ce
qui n'est pas souhaitable pour tous les répertoires. Dans la commande ci-dessus,
deux modifications seront effectuées&nbsp;: un pour le répertoire principal de
<emphasis>root</emphasis> et un autre pour les répertoires des fichiers
temporaires.</para>

<para>Le premier changement de droit nous assure que n'importe qui ne
pourra pas entrer dans le répertoire <filename
class="directory">/root</filename> (de façon identique à ce que ferait un
utilisateur pour son répertoire principal). Le deuxième changement assure que
tout utilisateur peut écrire dans les répertoires <filename
class="directory">/tmp</filename> et <filename
class="directory">/var/tmp</filename>, mais ne peut pas supprimer les fichiers
des autres utilisateurs. Cette dernière interdiction est dûe au <quote>sticky
bit</quote>, le bit le plus haut dans le masque 1777.</para>

<beginpage/>
<sect2>
<title>Remarques à propos de la conformité FHS</title>

<para>L'arborescence de répertoires est basée sur le standard FHS
(disponible sur <ulink url="http://www.pathname.com/fhs/"/>). En plus de cette
arborescence, ce standard stipule l'existence de
<filename class="directory">/usr/local/games</filename> et
<filename class="directory">/usr/share/games</filename>. Nous ne les recommandons
pas pour un système de base. Néanmoins, vous êtes libres de rendre votre système
compatible FHS. Le FHS n'est pas précis en ce qui concerne la structure du
sous-répertoire <filename class="directory">/usr/local/share</filename>, donc
nous créons seulement les répertoires nécessaires.</para>

</sect2>

</sect1>
