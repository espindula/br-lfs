<sect1 id="ch06-creatingdirs">
<title>Création des répertoires</title>
<?dbhtml filename="creatingdirs.html" dir="chapter05"?>

<para>Créons maintenant la hiérarchie de répertoires sur la partition
de LFS, basé sur le standard FHS qui peut être trouvé sur 
<ulink url="http://www.pathname.com/fhs/" />.
Lancer les commandes suivantes pour créer la hiérarchie par défaut des
répertoires:</para>
 
<para><screen><userinput>mkdir -p /{bin,boot,dev/pts,etc/opt,home,lib,mnt,proc} &amp;&amp;
mkdir -p /{root,sbin,tmp,usr/local,var,opt} &amp;&amp;
for dirname in /usr /usr/local
&nbsp;&nbsp;&nbsp;&nbsp;do
&nbsp;&nbsp;&nbsp;&nbsp;mkdir $dirname/{bin,etc,include,lib,sbin,share,src}
&nbsp;&nbsp;&nbsp;&nbsp;ln -s share/{man,doc,info} $dirname
&nbsp;&nbsp;&nbsp;&nbsp;mkdir $dirname/share/{dict,doc,info,locale,man}
&nbsp;&nbsp;&nbsp;&nbsp;mkdir $dirname/share/{nls,misc,terminfo,zoneinfo}
&nbsp;&nbsp;&nbsp;&nbsp;mkdir $dirname/share/man/man{1,2,3,4,5,6,7,8}
done &amp;&amp;
mkdir /var/{lock,log,mail,run,spool} &amp;&amp;
mkdir -p /var/{tmp,opt,cache,lib/misc,local} &amp;&amp;
mkdir /opt/{bin,doc,include,info} &amp;&amp;
mkdir -p /opt/{lib,man/man{1,2,3,4,5,6,7,8}} &amp;&amp;
ln -s ../var/tmp /usr</userinput></screen></para>

<para>Normalement, les répertoires sont créés avec le mode de permission
755, ce qui n'est pas souhaité pour tous les répertoires. La première
modification concerne le répertoire $LFS/root avec une permission 750.
Ainsi, personne ne pourra entrer dans le répertoire /root (de façon
identique à un utilisateur pour son répertoire /home/nomutilisateur).
Le deuxième changement concerne les répertoires tmp avec un mode 1777.
De cette façon, tout utilisateur peut écrire des données dans /tmp et
/var/tmp, mais ne peut pas supprimer des fichiers d'autres utilisateurs
(ceci grâce au "sticky bit" -- bit 1 du masque 1777).</para>

<para><screen><userinput>cd $LFS &amp;&amp;
chmod 0750 root &amp;&amp;
chmod 1777 tmp var/tmp</userinput></screen></para>

<para>Maintenant que les répertoires sont créés, copiez les fichiers
sources qui ont été téléchargés dans le chapitre 3 sur un sous-répertoire
de $LFS/usr/src (vous devrez créer ce répertoire vous-même).</para>

<sect2>
<title>Notes de conformité FHS</title>

<para>Le FHS stipule que le répertoire /usr/local doit contenir les
sous-répertoires bin, games, include, lib, man, sbin et share. Vous
pouvez modifier votre répertoire /usr/local vous-même si vous souhaitez 
que votre système soit en conformité avec FHS.</para>

<para>De la même manière, le standard indique qu'il doit exister un
répertoire /usr/share/games, ce dont nous ne voulons pas pour un système
de base. Mais n'hésitez pas à rendre votre système conforme à FHS si vous
le souhaitez. Le FHS n'est pas très précis sur la structure des
sous-répertoires de /usr/local/share, donc nous avons pris la liberté de
créer les répertoires qui nous semblaient nécessaires.</para>

</sect2>

</sect1>