<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-system-creatingdirs">
  <?dbhtml filename="creatingdirs.html"?>

  <title>Créer les répertoires</title>

  <para>Il est temps de créer la hiérarchie de répertoires sur le système de
  fichiers LFS. Créez une hiérarchie de répertoires standards en lançant les commandes suivantes&nbsp;:</para>

<screen><userinput>mkdir -pv /{bin,boot,etc/{opt,sysconfig},home,lib/firmware,mnt,opt}
mkdir -pv /{media/{floppy,cdrom},sbin,srv,var}
install -dv -m 0750 /root
install -dv -m 1777 /tmp /var/tmp
mkdir -pv /usr/{,local/}{bin,include,lib,sbin,src}
mkdir -pv /usr/{,local/}share/{color,dict,doc,info,locale,man}
mkdir -v  /usr/{,local/}share/{misc,terminfo,zoneinfo}
mkdir -v  /usr/libexec
mkdir -pv /usr/{,local/}share/man/man{1..8}

case $(uname -m) in
 x86_64) ln -sv lib /lib64
         ln -sv lib /usr/lib64
         ln -sv lib /usr/local/lib64 ;;
esac

mkdir -v /var/{log,mail,spool}
ln -sv /run /var/run
ln -sv /run/lock /var/lock
mkdir -pv /var/{opt,cache,lib/{color,misc,locate},local}</userinput></screen>

  <para>Par défaut, les répertoires sont créés avec les droits 755, ce
  qui n'est pas souhaitable pour tous les répertoires. Dans la commande ci-dessus,
  deux modifications seront effectuées&mdash;une
  pour le répertoire principal de <systemitem class="username">root</systemitem>,
  et une autre pour les répertoires des fichiers
  temporaires.</para>

  <para>Le premier changement de droit nous assure que n'importe qui ne
  pourra pas entrer dans le répertoire
  <filename class="directory">/root</filename>&mdash;de façon identique à ce que ferait un
  utilisateur pour son répertoire principal. Le deuxième changement assure que
  tout utilisateur peut écrire dans les répertoires
  <filename class="directory">/tmp</filename> et
  <filename class="directory">/var/tmp</filename>, mais ne peut pas supprimer les fichiers
  des autres utilisateurs. Cette dernière interdiction est due au
  <quote>sticky bit</quote>, le bit (1) le plus haut dans le masque 1777.</para>

  <sect2>
    <title>Remarques à propos de la conformité FHS</title>

    <para>L'arborescence de répertoires est basée sur le standard FHS
    (Filesystem Hierarchy Standard),
    disponible sur <ulink url="http://wiki.linuxfoundation.org/en/FHS"/>).
    Le FHS mentionne aussi l'existence de certains répertoires facultatifs
    comme <filename class="directory">/usr/local/games</filename>
    et  <filename class="directory">/usr/share/games</filename>. Nous ne créons que
    les répertoires nécessaires. Mais vous êtes libre de créer ces répertoires.</para>

  </sect2>

</sect1>
