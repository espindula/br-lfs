<sect1 id="ch06-creatingdirs">
<title>Création des répertoires</title>
<?dbhtml filename="creatingdirs.html" dir="chapter05"?>

<para>Créons maintenant la hiérarchie de répertoires sur notre système de
fichiers LFS. Lancer les commandes suivantes pour créer une hiérarchie plus ou
moins standard des répertoires:</para>
 
<para><screen><userinput>mkdir -p /{bin,boot,dev/pts,etc/opt,home,lib,mnt,proc} &amp;&amp;
mkdir -p /{root,sbin,tmp,usr/local,var,opt} &amp;&amp;
for dirname in /usr /usr/local
&nbsp;&nbsp;&nbsp;&nbsp;do
&nbsp;&nbsp;&nbsp;&nbsp;mkdir $dirname/{bin,etc,include,lib,sbin,share,src}
&nbsp;&nbsp;&nbsp;&nbsp;ln -s share/{man,doc,info} $dirname
&nbsp;&nbsp;&nbsp;&nbsp;mkdir $dirname/share/{dict,doc,info,locale,man}
&nbsp;&nbsp;&nbsp;&nbsp;mkdir $dirname/share/{nls,misc,terminfo,zoneinfo}
&nbsp;&nbsp;&nbsp;&nbsp;mkdir $dirname/share/man/man{1,2,3,4,5,6,7,8}
done &amp;&amp;
mkdir /var/{lock,log,mail,run,spool} &amp;&amp;
mkdir -p /var/{tmp,opt,cache,lib/misc,local} &amp;&amp;
mkdir /opt/{bin,doc,include,info} &amp;&amp;
mkdir -p /opt/{lib,man/man{1,2,3,4,5,6,7,8}} &amp;&amp;
ln -s ../var/tmp /usr</userinput></screen></para>

<para>Par défaut, les répertoires sont créés avec le mode de permission 755, ce
qui n'est pas souhaité pour tous les répertoires. Nous allons réaliser deux
changements: un pour le répertoire principal de root et un autre pour les
répertoires des fichiers temporaires.</para>

<para><screen><userinput>chmod 0750 root &amp;&amp;
chmod 1777 tmp var/tmp</userinput></screen></para>

<para>Le premier changement de permission nous aussre que personne ne pourra
entrer dans le répertoire <filename class="directory">/root</filename> (de
façon identique à un utilisateur pour son répertoire principal).
Le deuxième changement nous assure que tout utilisateur peut écrire dans
<filename class="directory">/tmp</filename> et
<filename class="directory">/var/tmp</filename>, mais ne peut pas supprimer
des fichiers d'autres utilisateurs. Cette dernière permission est assuré par le
"sticky bit", bit 1 du masque 1777.</para>

<para>Maintenant que les répertoires sont créés, déplacez les fichiers tar des
sources téléchargés au chapitre 3 dans un sous-répertoire de
<filename class="directory">$LFS/usr/src</filename> (vous devrez créer ce
répertoire vous-même).</para>

<sect2>
<title>Notes de conformité FHS</title>

<para>Nous avons basé notre arbre de répertoires sur le standard FHS
(disponible sur <ulink url="http://www.pathname.com/fhs/"/>). En dehors de cette
arborescence, ce standard stipule l'existence de
<filename class="directory">/usr/local/games</filename> et
<filename class="directory">/usr/share/games</filename>, mais nous ne voyons pas
l'intérêt de ceux-ci pour un système de base. Néanmoins, rendez votre système
compatible FHS si vous le souhaitez. En ce qui concerne la structure du
sous-répertoire <filename class="directory">/usr/local/share</filename>, le
FHS est inprécis, donc nous créons ici les répertoires dont nous pensons avoir
besoin.</para>

</sect2>

</sect1>
