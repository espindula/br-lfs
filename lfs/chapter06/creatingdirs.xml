<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-system-creatingdirs">
  <?dbhtml filename="creatingdirs.html"?>

  <title>Créer les répertoires</title>

  <para>Il est temps de créer la hiérarchie de répertoires sur le système de
  fichiers LFS. Créez une hiérarchie de répertoires standards en lançant les commandes suivantes&nbsp;:</para>

<screen><userinput>mkdir -pv /{bin,boot,etc/{opt,sysconfig},home,lib,mnt,opt}
mkdir -pv /{media/{floppy,cdrom},sbin,srv,var}
install -dv -m 0750 /root
install -dv -m 1777 /tmp /var/tmp
mkdir -pv /usr/{,local/}{bin,include,lib,sbin,src}
mkdir -pv /usr/{,local/}share/{doc,info,locale,man}
mkdir -v  /usr/{,local/}share/{misc,terminfo,zoneinfo}
mkdir -pv /usr/{,local/}share/man/man{1..8}
for dir in /usr /usr/local; do
  ln -sv share/{man,doc,info} $dir
done
case $(uname -m) in
  x86_64) ln -sv lib /lib64 &amp;&amp; ln -sv lib /usr/lib64 &amp;&amp; ln -sv lib /usr/local/lib64 ;;
esac
mkdir -v /var/{log,mail,spool}
ln -sv /run /var/run
ln -sv /run/lock /var/lock
mkdir -pv /var/{opt,cache,lib/{misc,locate},local}</userinput></screen>

  <para>Par défaut, les répertoires sont créés avec les droits 755, ce
  qui n'est pas souhaitable pour tous les répertoires. Dans la commande ci-dessus,
  deux modifications seront effectuées&mdash;une
  pour le répertoire principal de <systemitem class="username">root</systemitem>,
  et une autre pour les répertoires des fichiers
  temporaires.</para>

  <para>Le premier changement de droit nous assure que n'importe qui ne
  pourra pas entrer dans le répertoire
  <filename class="directory">/root</filename>&mdash;de façon identique à ce que ferait un
  utilisateur pour son répertoire principal. Le deuxième changement assure que
  tout utilisateur peut écrire dans les répertoires
  <filename class="directory">/tmp</filename> et
  <filename class="directory">/var/tmp</filename>, mais ne peut pas supprimer les fichiers
  des autres utilisateurs. Cette dernière interdiction est due au
  <quote>sticky bit</quote>, le bit (1) le plus haut dans le masque 1777.</para>

  <sect2>
    <title>Remarques à propos de la conformité FHS</title>

    <para>L'arborescence de répertoires est basée sur le standard FHS
    (Filesystem Hierarchy Standard),
    disponible sur
    <ulink url="http://www.pathname.com/fhs/"/>. Outre le FHS, nous créons
    des liens symboliques pour la compatibilité pour les répertoires
    <filename class="directory">man</filename>,
    <filename class="directory">doc</filename>, et
    <filename class="directory">info</filename> vu que beaucoup de paquets
    essaient encore d'installer leur documentation dans
    <filename class="directory">/usr/&lt;répertoire&gt;</filename> ou <filename
    class="directory">/usr/local/&lt;répertoire&gt;</filename> au lieu de
    <filename class="directory">/usr/share/&lt;répertoire&gt;</filename> ou
    <filename class="directory">/usr/local/share/&lt;répertoire&gt;</filename>.
    Le FHS stipule aussi l'existence de <filename class="directory">/usr/local/games</filename>
    et  <filename class="directory">/usr/share/games</filename>. Le FHS
    n'est pas précis en ce qui concerne la structure du sous-répertoire
    <filename class="directory">/usr/local/share</filename>,
    donc nous créons seulement les répertoires nécessaires. Néanmoins, n'hésitez
    pas à créer ces répertoires si vous préférez vous conformer plus strictement
    au FHS.</para>

  </sect2>

</sect1>
