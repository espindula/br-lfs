<sect1 id="ch09-theend">
<title>La fin</title>
<?dbhtml filename="theend.html" dir="chapter09"?>

<para>Bien joué! Vous avez terminé d'installer votre système LFS. Cela vous a
peut-être pris du temps, mais c'est une bonne chose que de l'avoir fait. Nous
vous souhaitons de bien vous amuser avec votre nouveau système Linux rutilant.
</para>

<para>Maintenant c'est le bon moment pour nettoyer les binaires de tous les
symboles de débogage sur votre système LFS. Si vous n'êtes pas un programmeur
et ne prévoyez pas de déboguer vos logiciels, alors vous serez certainement
content de savoir que l'on peut gagner quelques dizaines de mégas en enlevant
les symboles de débogage. Ce processus n'a pas d'autre inconvénient que de vous
empêcher de déboguer votre logiciel à l'avenir, ce qui n'a pas d'importance si
vous ne saviez pas comment faire.</para>

<para>Précision&nbsp;: 98% des personnes qui utilisent la commande ci-dessous
n'ont jamais eu de problème. Mais faites une sauvegarde de votre système LFS
avant de lancer cette commande. Il y a une chance infime que cela se retourne
contre vous et rende votre système inutilisable (essentiellement en détruisant
les modules du noyau et les bibliothèques dynamiques partagées). Cela est plus
souvent dû à des erreurs de frappes qu'à des problèmes avec les commandes
utilisées.</para>

<para>Cela étant dit, l'option --strip-debug que nous utilisons est plutôt sans
dommage dans des circonstances normales. Cela ne débarrasse pas les fichiers de
quoique ce soit de vital. Il n'est sûr d'utiliser --strip-all que sur des
programmes classiques (ne pas utiliser sur des bibliothèques - elles seraient
détruites) mais pas aussi sûr et l'espace gagné n'est pas plus grand. Mais si
vous êtes limité en espace disque, quelques octets de plus peuvent aider, alors
décidez vous-même. Référez vous, s'il vous plait, à la page man pour d'autres
options de strip que vous pourriez utiliser. L'idée générale est de ne pas
lancer strip sur des bibliothèques (autre que --strip-debug) pour rester du
côté sûr.</para>

<para>Si vous pensez vous lancer dans cette opération, une attention
particulière est nécessaire pour s'assurer qu'aucun des binaires que vous allez
modifier n'est en cours d'exécution, ceci incluant le shell bash actif. Donc,
vous devez quitter l'environnement chroot et y rentrer de nouveau avec une
commande chroot modifié&nbsp;:</para>

<screen><userinput>logout
chroot $LFS /tools/bin/env -i \
&nbsp;&nbsp;&nbsp;&nbsp;HOME=/root TERM=$TERM PS1='\u:\w\$ ' \
&nbsp;&nbsp;&nbsp;&nbsp;PATH=/bin:/usr/bin:/sbin:/usr/sbin \
&nbsp;&nbsp;&nbsp;&nbsp;/tools/bin/bash --login</userinput></screen>

<para>Maintenant, lancez la commande suivante&nbsp;:</para>

<screen><userinput>/tools/bin/find /{,usr/,usr/local/}{bin,sbin,lib} -type f \
&nbsp;&nbsp;&nbsp;-exec /tools/bin/strip --strip-debug '{}' ';'</userinput></screen>

<para>Un grand nombre de fichiers seront indiqués comme non supporté à cause de
leur format de fichier. La plupart d'entre eux sont des scripts au lieu d'être
des binaires. Ces messages peuvent être ignorés sans problème.</para>

<para>Il pourrait être une bonne idée de créer un fichier
<filename>/etc/lfs-release</filename>. Avec ce fichier, il vous est très facile
(ainsi que pour nous si vous nous demandez de l'aide) de savoir quelle
version de LFS vous avez installé sur votre système. Créez ce fichier en
lançant&nbsp;:</para>

<screen><userinput>echo &version; &gt; /etc/lfs-release</userinput></screen>

</sect1>
