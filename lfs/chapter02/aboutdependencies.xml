<sect1 id="ch02-aboutdependencies">
<title>A propos des dépendances</title>
<?dbhtml filename="aboutdependencies.html" dir="chapter02"?>

<!-- Leave this file in the repo until we figure out finally what to do with
dependencies -->

<para>Il existe plusieurs façons de compiler une liste de dépendances
d'installation d'un package. Ce que nous considérons être le meilleur moyen est
d'utiliser le programme <command>strace</command> disponible sur <ulink
url="http://www.wi.leidenuniv.nl/~wichert/strace/"/>.</para>

<para><command>strace</command> est un programme apportant une trace de tous les
appels système réalisés par un autre programme. Un des appels système les plus
utiles à tracer en ce qui concernent les dépendances est 
<emphasis>execve(2)</emphasis>, utilisé pour exécuter des programmes (voir sa
page man pour tous les détails). A chaque fois que vous lancez un programme, y
compris à partir du shell ou via un script configure ou un fichier Makefile,
l'appel execve est fait. Si vous tracez ces appels, vous saurez quels programmes
ont été exécutés en arrière plan.</para>

<para>Voici une ligne en sortie de l'exécution d'un script configure&nbsp;:
</para>

<screen>19580 execve("/bin/rm", ["rm", "-f", "conf19538", "conf19538.exe", "conf19538.file"], [/* 26 vars */]) = 0</screen>

<para>Cette ligne nous indique que le programme <command>/bin/rm</command> a été
exécuté avec le PID 19580 ainsi que les paramètres en ligne de commande (rm -f
conf195838 conf19538.exe conf19538.file) et sa valeur de sortie (0).</para>

<para>Pour des raisons de dépendances, tout ce que nous intéresse est que
<command>/bin/rm</command> a été lancé lors du script configure, donc c'est une
dépendance lors de l'installation. Sans <command>rm</command>, le script
n'aurait pas été capable de fonctionner correctement.</para>

<para>Malheureusement, cette méthode n'est pas sûre. Les scripts configure
vérifient la présence de beaucoup de programmes, mais tous ne sont pas
considérés comme des dépendances réelles. Par exemple, les scripts configure
peuvent vérifier la présence du programme <command>autoconf</command>. Il sera
listé dans la sortie de strace, mais ce n'est pas une vraie dépendance pour
l'installation. Un package pourra dans presque tous les cas s'installer sans ce
programme. Il existe d'autres faux positifs.</para>

<para>Ceci signifie que la récupération automatique des dépendances n'est pas
précise. Vous aurez toujours besoin de valider la liste et de trouver les faux
positifs. Dans quelques (rares) cas, autoconf pourrait être une vraie
dépendance, donc vous ne pouvez simplement ignorer les lignes autoconf. Une
validation manuelle est vraiment nécessaire pour obtenir une liste précise.
</para>

<para>Ce livre n'est pas assez verbeux pour comprendre une liste exacte des
programmes requis pour une installation réussie (nous l'avions fait mais cela
demande beaucoup trop de travail pour être maintenu). Le livre contiendra
seulement les noms des packages dont vous avez besoin pour l'installer. Si vous
avez besoin d'une verbosité de la forme "le package a a besoin des fichiers b
et c provenant du package d", jetez un oeil sur &lt;entrer l'URL lorsqu'elle
sera disponible&gt;.</para>

</sect1>

