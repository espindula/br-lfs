<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>
<sect1 id="space-creatingfilesystem">
<title>Créer un système de fichiers sur la partition</title>
<?dbhtml filename="creatingfilesystem.html"?>

<para>Maintenant qu'une partition vierge est prête, le système de fichiers peut
être créé. Le système le plus communément utilisé dans le monde Linux est le
système de fichiers étendu, deuxième version, (plus connu sous son acronyme,
ext2), mais avec les nouveaux disques haute capacité, les systèmes de fichiers
journalisés deviennent de plus en plus populaires. Nous créerons un système de
fichiers ext2. Les instructions de construction d'autres systèmes de fichiers
sont disponibles dans <ulink url="&blfs-root;view/svn/postlfs/filesystems.html"><phrase
condition="pdf">&blfs-root;view/svn/ postlfs/filesystems.html</phrase></ulink>.</para>

<para>Pour créer un système de fichiers ext2 sur la partition LFS, lancez ce
qui suit&nbsp;:</para>

<screen><userinput>mke2fs /dev/<replaceable>[xxx]</replaceable></userinput></screen>

<para>Remplacez <replaceable>[xxx]</replaceable> avec le nom de la partition LFS
(<filename class="devicefile">hda5</filename> dans notre exemple
précédent).</para>

<note><para>Quelques distributions hôtes utilisent des fonctionnalités
personnalisées dans leur outil de création de systèmes de fichiers (e2fsprogs).
Ceci peut poser des problèmes lors du démarrage dans votre nouveau LFS au
chapitre 9 car toutes ces fonctionnalités ne seront pas supportées par la version
d'e2fsprogs installée par LFS&nbsp; si vous obtenez une erreur similaire à
<quote>unsupported filesystem features, upgrade your e2fsprogs</quote>. Pour
vérifier que votre système hôte utilise des améliorations personnalisées, utilisez
la commande suivante&nbsp;:</para>

<screen><userinput>debugfs -R feature /dev/<replaceable>[xxx]</replaceable></userinput></screen>

<para>Si la sortie contient des fonctionnalités autres que dir_index, filetype,
large_file, resize_inode ou sparse_super, alors votre système hôte pourrait avoir
des améliorations personnalisées. Dans ce cas, pour éviter tout problème ultérieur,
vous devez compiler le paquetage e2fsprogs et utiliser les binaires résultant de
cette compilation pour re-créer le système de fichiers sur votre partition
LFS&nbsp;:</para>

<screen><userinput>cd /tmp
tar xjf /path/to/sources/e2fsprogs-&e2fsprogs-version;.tar.bz2
cd e2fsprogs-&e2fsprogs-version;
mkdir build
cd build
../configure
make #note that we intentionally don't 'make install' here!
./misc/mke2fs /dev/<replaceable>[xxx]</replaceable>
cd /tmp
rm -rf e2fsprogs-&e2fsprogs-version;</userinput></screen>
</note>

<para>Si une partition de swap a été créée, elle devra être initialisée, pour
pouvoir être utilisée, en exécutant la commande ci-dessous. Si vous utilisez déjà
une partition de swap, il n'est pas nécessaire de la formater.</para>

<screen><userinput>mkswap /dev/<replaceable>[yyy]</replaceable></userinput></screen>

<para>Remplacez <replaceable>[yyy]</replaceable> avec le nom de la partition de
swap.</para>

</sect1>

