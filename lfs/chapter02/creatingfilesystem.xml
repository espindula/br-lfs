<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>
<sect1 id="space-creatingfilesystem">
<title>Créer un système de fichiers sur la partition</title>
<?dbhtml filename="creatingfilesystem.html"?>

<para>Maintenant qu'une partition vierge est prête, le système de fichiers peut
être créé. Le système le plus communément utilisé dans le monde Linux est le
système de fichiers étendu, deuxième version, (plus connu sous son acronyme,
ext2), mais avec les nouveaux disques haute capacité, les systèmes de fichiers
journalisés deviennent de plus en plus populaires. Nous créerons un système de
fichiers ext2. Des instructions pour l'installation d'autres systèmes de fichiers
sont disponibles sur <ulink url="&blfs-root;view/svn/postlfs/filesystems.html"><phrase
condition="pdf">&blfs-root;view/svn/ postlfs/filesystems.html</phrase></ulink>.</para>

<para>Pour créer un système de fichiers ext2 sur la partition LFS, exécutez ce 
qui suit&nbsp;:</para>

<screen role="nodump"><userinput>mke2fs -v /dev/<replaceable>[xxx]</replaceable></userinput></screen>

<para>Remplacez <replaceable>[xxx]</replaceable> par le nom de la partition LFS
(<filename class="devicefile">hda5</filename> dans notre exemple
précédent).</para>

<note><para>Quelques distributions hôtes utilisent un outil de création de
systèmes de fichiers (e2fsprogs) offrant des fonctionnalités spécifiques.
Ceci peut poser des problèmes lors du démarrage sur votre nouveau LFS au
chapitre 9, car toutes ces fonctionnalités ne seront pas supportées par l'e2fsprogs
installé par LFS&nbsp; vous obtiendriez une erreur semblable à&nbsp;
<quote>unsupported filesystem features, upgrade your e2fsprogs</quote>. Pour
vérifier si votre système hôte utilise des fonctionnalités spécifiques, utilisez
la commande suivante&nbsp;:</para>

<screen role="nodump"><userinput>debugfs -R feature /dev/<replaceable>[xxx]</replaceable></userinput></screen>

<para>Si la sortie contient des fonctionnalités autres que dir_index, filetype,
large_file, resize_inode ou sparse_super, alors votre système hôte pourrait avoir
des fonctionnalités spécifiques. Dans ce cas, pour éviter tout problème ultérieur,
vous devez compiler le paquetage e2fsprogs standard et utiliser les binaires résultant de
cette compilation pour re-créer le système de fichiers sur votre partition
LFS&nbsp;:</para>

<screen role="nodump"><userinput>cd /tmp
tar -xjvf /path/to/sources/e2fsprogs-&e2fsprogs-version;.tar.bz2
cd e2fsprogs-&e2fsprogs-version;
mkdir -v build
cd build
../configure
make # notez que nous n'exécutons pas 'make install' ici
     # de façon intentionnelle !
./misc/mke2fs -v /dev/<replaceable>[xxx]</replaceable>
cd /tmp
rm -rfv e2fsprogs-&e2fsprogs-version;</userinput></screen>
</note>

<para>Si une partition de swap a été créée, elle devra être initialisée avant de 
pouvoir être utilisée, en exécutant la commande ci-dessous. Si vous utilisez déjà
une partition de swap, il n'est pas nécessaire de la reformater.</para>

<screen role="nodump"><userinput>mkswap -v /dev/<replaceable>[yyy]</replaceable></userinput></screen>

<para>Remplacez <replaceable>[yyy]</replaceable> par le nom de la partition de
swap.</para>

</sect1>

