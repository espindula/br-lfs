<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      9.5.&nbsp;Configuration de l'horloge système
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body class="lfs" id="lfs-r10.1-205-g49170-systemd+">
    <div class="navheader">
      <h4>
        Linux From Scratch - Version r10.1-205-g49170-systemd+
      </h4>
      <h3>
        Chapitre&nbsp;9.&nbsp;Configuration du système
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="symlinks.html" title=
          "Gérer les périphériques">Précédent</a>
          <p>
            Gérer les périphériques
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="console.html" title=
          "Configurer la Console Linux">Suivant</a>
          <p>
            Configurer la Console Linux
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter09.html" title=
          "Chapitre&nbsp;9.&nbsp;Configuration du système">Niveau
          supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - Version r10.1-205-g49170-systemd+">Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="ch-config-clock" name="ch-config-clock"></a>9.5. Configuration
        de l'horloge système
      </h1>
      <p>
        Cette section parle de la manière de configurer le service système
        <span class="command"><strong>systemd-timedated</strong></span>, qui
        configure l'horloge et le fuseau horaire système.
      </p>
      <p>
        Si vous ne vous souvenez pas si l'horloge matérielle est configurée
        en UTC ou non, trouvez le en lançant la commande <strong class=
        "userinput"><code>hwclock --localtime --show</code></strong>. Cela va
        afficher l'heure actuelle d'après l'horloge matérielle. Si l'heure
        correspond à celle de votre montre, alors votre horloge système est
        configurée à l'heure locale. Si la sortie de <span class=
        "command"><strong>hwclock</strong></span> n'est pas l'heure locale,
        il y a des chances qu'elle soit configurée en UTC. Vérifiez cela en
        ajoutant ou retirant le bon nombre d'heures par rapport à l'heure
        affichée par <span class="command"><strong>hwclock</strong></span>.
        Par exemple si vous êtes dans le fuseau horaire MST, qui est aussi
        connu comme GMT -7, ajoutez 7 heures à l'heure locale.
      </p>
      <p>
        <span class="command"><strong>systemd-timedated</strong></span> lit
        <code class="filename">/etc/adjtime</code>, et en fonction de ce qui
        est écrit dans le fichier, met l'horloge en UTC ou en heure locale.
      </p>
      <p>
        Créez le fichier <code class="filename">/etc/adjtime</code> avec le
        contenu suivant si votre horloge matérielle est configurée en heure
        locale&nbsp;:
      </p>
      <pre class="userinput"><kbd class=
      "command">cat &gt; /etc/adjtime &lt;&lt; "EOF"
<code class="literal">0.0 0 0.0
0
LOCAL</code>
EOF</kbd></pre>
      <p>
        Si le fichier <code class="filename">/etc/adjtime</code> n'est pas
        présent au premier démarrage, <span class=
        "command"><strong>systemd-timedated</strong></span> va considérer que
        l'horloge matérielle est configurée en UTC et ajuster le fichier en
        accord avec cela.
      </p>
      <p>
        Vous pouvez également utiliser l'utilitaire <span class=
        "command"><strong>timedatectl</strong></span> pour signaler à
        <span class="command"><strong>systemd-timedated</strong></span> si
        votre horloge matérielle est initialisée en UTC ou en temps
        local&nbsp;:
      </p>
      <pre class="userinput"><kbd class=
      "command">timedatectl set-local-rtc 1</kbd></pre>
      <p>
        <span class="command"><strong>timedatectl</strong></span> peut
        également être utilisé pour changer l'heure système et le fuseau
        horaire.
      </p>
      <p>
        Pour changer l'heure actuelle du système, tapez&nbsp;:
      </p>
      <pre class="userinput"><kbd class=
      "command">timedatectl set-time YYYY-MM-DD HH:MM:SS</kbd></pre>
      <p>
        L'horloge matérielle sera également mise à jour en conséquence.
      </p>
      <p>
        Pour changer de fuseau horaire, tapez:
      </p>
      <pre class="userinput"><kbd class=
      "command">timedatectl set-timezone TIMEZONE</kbd></pre>
      <p>
        Vous pouvez avoir une liste des fuseaux horaires disponibles en
        tapant&nbsp;:
      </p>
      <pre class="userinput"><kbd class=
      "command">timedatectl list-timezones</kbd></pre>
      <div class="admon note">
        <img alt="[Note]" src="../images/note.png" />
        <h3>
          Note
        </h3>
        <p>
          Merci de noter que la commande <span class=
          "command"><strong>timedatectl</strong></span> peut être utilisée
          seulement sur un système démarré avec systemd.
        </p>
      </div>
      <div class="sect2" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          9.5.1. Synchronisation réseau du temps
        </h2>
        <p>
          Depuis la version 213, systemd livre un démon appelé <span class=
          "command"><strong>systemd-timesyncd</strong></span> qui peut être
          utilisé pour synchroniser l'heure système avec les serveurs NTP
          distants.
        </p>
        <p>
          Le démon n'est pas prévu pour remplacer le démon bien établit NTP,
          mais comme client du protocole SNTP qui peut être utilisé pour les
          tâches moins avancées et sur les systèmes à ressources limitées.
        </p>
        <p>
          Depuis la version 216, le démon <span class=
          "command"><strong>systemd-timesyncd</strong></span> est activé par
          défaut. Si vous voulez le désactiver, tapez la commande
          suivante&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">systemctl disable systemd-timesyncd</kbd></pre>
        <p>
          Le fichier <code class=
          "filename">/etc/systemd/timesyncd.conf</code> peut être utilisé
          pour changer les serveurs NTP avec lesquels <span class=
          "command"><strong>systemd-timesyncd</strong></span> se
          synchronisent
        </p>
        <p>
          Merci de noter que quand l'horloge système est initialisée en temps
          local, <span class=
          "command"><strong>systemd-timesyncd</strong></span> ne mettra pas à
          jour l'horloge système.
        </p>
      </div>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="symlinks.html" title=
          "Gérer les périphériques">Précédent</a>
          <p>
            Gérer les périphériques
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="console.html" title=
          "Configurer la Console Linux">Suivant</a>
          <p>
            Configurer la Console Linux
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter09.html" title=
          "Chapitre&nbsp;9.&nbsp;Configuration du système">Niveau
          supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - Version r10.1-205-g49170-systemd+">Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
