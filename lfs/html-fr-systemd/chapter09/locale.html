<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      9.7.&nbsp;Configuration des paramètres régionaux du système
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body class="lfs" id="lfs-r10.1-205-g49170-systemd+">
    <div class="navheader">
      <h4>
        Linux From Scratch - Version r10.1-205-g49170-systemd+
      </h4>
      <h3>
        Chapitre&nbsp;9.&nbsp;Configuration du système
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="console.html" title=
          "Configurer la Console Linux">Précédent</a>
          <p>
            Configurer la Console Linux
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="inputrc.html" title=
          "Créer le fichier /etc/inputrc">Suivant</a>
          <p>
            Créer le fichier /etc/inputrc
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter09.html" title=
          "Chapitre&nbsp;9.&nbsp;Configuration du système">Niveau
          supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - Version r10.1-205-g49170-systemd+">Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="ch-config-locale" name="ch-config-locale"></a>9.7.
        Configuration des paramètres régionaux du système
      </h1>
      <p>
        Le fichier <code class="filename">/etc/locale.conf</code> ci-dessous
        défini certaines variables d'environnement nécessaires pour la prise
        en charge native des langues. Les configurer a pour résultat&nbsp;:
      </p>
      <div class="itemizedlist">
        <ul>
          <li class="listitem">
            <p>
              La sortie des programmes est traduite dans votre langue
              maternelle
            </p>
          </li>
          <li class="listitem">
            <p>
              Le classement correct des caractères en lettres, chiffres et
              autres classes. Cela est nécessaire pour <span class=
              "command"><strong>bash</strong></span> pour accepter
              correctement les caractères non-ASCII pour les paramètres
              linguistiques non anglais
            </p>
          </li>
          <li class="listitem">
            <p>
              Le classement alphabétique correct pour les autres pays
            </p>
          </li>
          <li class="listitem">
            <p>
              La taille de papier par défaut appropriée
            </p>
          </li>
          <li class="listitem">
            <p>
              Le formatage correct de la monnaie, du temps et de la date
            </p>
          </li>
        </ul>
      </div>
      <p>
        Remplacez <em class="replaceable"><code>&lt;ll&gt;</code></em>
        ci-dessous par les deux lettres de la langue désirée (par exemple
        <span class="quote">«&nbsp;<span class=
        "quote">fr</span>&nbsp;»</span>) et remplacez <em class=
        "replaceable"><code>&lt;CC&gt;</code></em> par les deux lettres du
        pays approprié (par exemple <span class="quote">«&nbsp;<span class=
        "quote">FR</span>&nbsp;»</span>). <em class=
        "replaceable"><code>&lt;charmap&gt;</code></em> doit être remplacé
        par la table de caractères classique pour le paramètre linguistique
        choisi. On peut aussi ajouter des modificateurs facultatifs comme
        <span class="quote">«&nbsp;<span class=
        "quote">@euro</span>&nbsp;»</span>.
      </p>
      <p>
        La liste des paramètre régionaux pris en charge par Glibc peut être
        obtenue en lançant la commande suivante&nbsp;:
      </p>
      <pre class="userinput"><kbd class="command">locale -a</kbd></pre>
      <p>
        Les tables de caractères peuvent aussi avoir certains alias, par
        exemple <span class="quote">«&nbsp;<span class=
        "quote">ISO-8859-1</span>&nbsp;»</span> est aussi référencé comme
        <span class="quote">«&nbsp;<span class=
        "quote">iso8859-1</span>&nbsp;»</span> et <span class=
        "quote">«&nbsp;<span class="quote">iso88591</span>&nbsp;»</span>.
        Certaines applications ne peuvent pas gérer les différents synonymes
        (il est par exemple requis que <span class=
        "quote">«&nbsp;<span class="quote">UTF-8</span>&nbsp;»</span> soit
        écrit <span class="quote">«&nbsp;<span class=
        "quote">UTF-8</span>&nbsp;»</span> et pas <span class=
        "quote">«&nbsp;<span class="quote">utf8</span>&nbsp;»</span>), il est
        donc plus sur de choisir le nom classique pour un paramètre
        linguistique particulier. Pour déterminer le nom classique, lancez la
        commande suivante, où <em class="replaceable"><code>&lt;nom du
        paramètre linguistique&gt;</code></em> est la sortie donnée par
        <span class="command"><strong>locale -a</strong></span> pour votre
        langue préférée (<span class="quote">«&nbsp;<span class=
        "quote">fr_FR.iso88591</span>&nbsp;»</span> dans notre exemple).
      </p>
      <pre class="userinput"><kbd class="command">LC_ALL=<em class=
      "replaceable"><code>&lt;nom du paramètre linguistique&gt;</code></em> locale charmap</kbd></pre>
      <p>
        Pour le paramètre <span class="quote">«&nbsp;<span class=
        "quote">fr_FR.iso885915</span>&nbsp;»</span>, la commande va
        renvoyer&nbsp;:
      </p>
      <pre class="screen"><code class=
      "computeroutput">ISO-8859-15</code></pre>
      <p>
        Cela résulte en un paramètre de régionalisation final de <span class=
        "quote">«&nbsp;<span class=
        "quote">fr_FR.ISO-8859-15</span>&nbsp;»</span>. Il est important que
        le paramètre trouvé en utilisant la syntaxe précédente soit testée
        avant d'être ajoutée aux fichiers de démarrage de bash&nbsp;:
      </p>
      <pre class="userinput"><kbd class=
      "command">LC_ALL=&lt;nom du paramètre linguistique&gt; locale language
LC_ALL=&lt;nom du paramètre linguistique&gt; locale charmap
LC_ALL=&lt;nom du paramètre linguistique&gt; locale int_curr_symbol
LC_ALL=&lt;nom du paramètre linguistique&gt; locale int_prefix</kbd></pre>
      <p>
        Les commandes ci-dessus devraient afficher la langue, l'encodage des
        caractères utilisé par le paramètre, la monnaie locale ainsi que le
        préfixe de téléphone à composer afin d'entrer dans le pays. Si une de
        ces commandes précédentes échoue, cela signifie que votre paramètre
        n'a pas été installé dans le chapitre&nbsp;8 ou n'est pas prise en
        charge par l'installation par défaut de Glibc.
      </p>
      <pre class="screen"><code class=
      "computeroutput">locale: Cannot set LC_* to default locale: No such file or directory</code></pre>
      <p>
        Si cela arrive, vous devez soit installer le paramètre régional
        désiré en utilisant la commande <span class=
        "command"><strong>localedef</strong></span>, ou en utilisant un autre
        paramètre. Les instructions suivantes supposent qu'il n'y a pas de
        tels message d'erreur de Glibc.
      </p>
      <p>
        Certains paquets au-delà de LFS peuvent ne pas prendre en charge le
        paramètre linguistique que vous avez choisi. Un exemple est la
        bibliothèque X (partie du système X Window), qui renvoie les messages
        suivant si le paramètre ou que le nom de jeu de caractères ne
        correspond pas exactement à ses fichiers internes&nbsp;:
      </p>
      <pre class="screen"><code class=
      "computeroutput">Warning: locale not supported by Xlib, locale set to C</code></pre>
      <p>
        Dans plusieurs cas Xlib s'attend à ce que le jeu de caractère soit
        inscrit en notation majuscule avec les tirets classiques. Par exemple
        «&nbsp;ISO-8859-1&nbsp;» plutôt que «&nbsp;iso88591&nbsp;». Il est
        aussi possible de trouver la spécification appropriée en retirant la
        partie correspondant au jeu de caractères de la spécification du
        paramètre régional. Cela peut être testé en lançant la commande
        <span class="command"><strong>locale charmap</strong></span> des deux
        paramètres. Par exemple, il faudra changer
        «&nbsp;de_DE.ISO-8859-15@euro&nbsp;» en «&nbsp;de_DE@euro&nbsp;» pour
        que ce paramètre soit reconnu par Xlib.
      </p>
      <p>
        D'autres programmes ne vont aussi pas fonctionner correctement (mais
        ne vont pas nécessairement afficher un message d'erreur) si le nom du
        paramètre régional ne rencontre pas leurs attentes. Dans d'autres
        cas, rechercher comment d'autres distributions Linux prennent en
        charge votre paramètre régional peut fournir des informations utiles.
      </p>
      <p>
        Une fois que les bonnes configurations de paramètres linguistiques
        ont été effectuées, créez le fichier <code class=
        "filename">/etc/locale.conf</code>&nbsp;:
      </p>
      <pre class="userinput"><kbd class=
      "command">cat &gt; /etc/locale.conf &lt;&lt; "EOF"
<code class="literal">LANG=<em class=
"replaceable"><code>&lt;ll&gt;_&lt;CC&gt;.&lt;charmap&gt;&lt;@modifiers&gt;</code></em></code>
EOF</kbd></pre>
      <p>
        Notez que vous devez modifier <code class=
        "filename">/etc/locale.conf</code> avec l'utilitaire systemd
        <span class="command"><strong>localectl</strong></span>. Pour
        utiliser <span class="command"><strong>localectl</strong></span> avec
        l'exemple précédent, lancez&nbsp;:
      </p>
      <pre class="userinput"><kbd class=
      "command">localectl set-locale LANG="<em class=
      "replaceable"><code>&lt;ll&gt;_&lt;CC&gt;.&lt;charmap&gt;&lt;@modifiers&gt;</code></em>"</kbd></pre>
      <p>
        Vous pouvez aussi spécifier d'autres variables d'environnement comme
        <code class="envar">LANG</code>, <code class="envar">LC_CTYPE</code>,
        <code class="envar">LC_NUMERIC</code> ou n'importe quel autre varable
        de la sortie de <span class="command"><strong>locale</strong></span>.
        Un exemple où <code class="envar">LANG</code> est définie à
        en_US.UTF-8 mais <code class="envar">LC_CTYPE</code> est défini juste
        à en_US est&nbsp;:
      </p>
      <pre class="userinput"><kbd class=
      "command">localectl set-locale LANG="en_US.UTF-8" LC_CTYPE="en_US"</kbd></pre>
      <div class="admon note">
        <img alt="[Note]" src="../images/note.png" />
        <h3>
          Note
        </h3>
        <p>
          Notez que la commande <span class=
          "command"><strong>localectl</strong></span> ne peut-être lancée que
          sur un système lancé avec systemd.
        </p>
      </div>
      <p>
        Les paramètres <span class="quote">«&nbsp;<span class=
        "quote">C</span>&nbsp;»</span> (défaut) et <span class=
        "quote">«&nbsp;<span class="quote">en_US</span>&nbsp;»</span>
        (recommandé pour les utilisateurs anglophones des États-Unis) sont
        différents. <span class="quote">«&nbsp;<span class=
        "quote">C</span>&nbsp;»</span> utilise le jeu de caractères US-ASCII
        7-bit et traite les octets avec le bit de point fort à 1 comme des
        caractères invalides. C'est pourquoi, par exemple, la commande
        <span class="command"><strong>ls</strong></span> les remplace par des
        points d'interrogation sous ce paramètre. En outre, les messages
        contenant ces caractères envoyés avec Mutt ou Pine ne sont pas
        conformes aux RFC (le jeu de caractères dans le mail sortant est
        indiqué comme <span class="quote">«&nbsp;<span class="quote">unknown
        8-bit</span>&nbsp;»</span>). Vous ne pouvez donc utiliser le
        paramètre régional <span class="quote">«&nbsp;<span class=
        "quote">C</span>&nbsp;»</span> que si vous êtes sûr que vous n'aurez
        jamais besoins de caractère 8 bits.
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="console.html" title=
          "Configurer la Console Linux">Précédent</a>
          <p>
            Configurer la Console Linux
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="inputrc.html" title=
          "Créer le fichier /etc/inputrc">Suivant</a>
          <p>
            Créer le fichier /etc/inputrc
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter09.html" title=
          "Chapitre&nbsp;9.&nbsp;Configuration du système">Niveau
          supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - Version r10.1-205-g49170-systemd+">Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
