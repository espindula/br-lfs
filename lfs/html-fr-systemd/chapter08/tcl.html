<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      8.15.&nbsp;Tcl-8.6.11
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body class="lfs" id="lfs-r10.1-205-g49170-systemd+">
    <div class="navheader">
      <h4>
        Linux From Scratch - Version r10.1-205-g49170-systemd+
      </h4>
      <h3>
        Chapitre&nbsp;8.&nbsp;Installer les logiciels du système de base
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="flex.html" title="Flex-2.6.4">Précédent</a>
          <p>
            Flex-2.6.4
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="expect.html" title=
          "Expect-5.45.4">Suivant</a>
          <p>
            Expect-5.45.4
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter08.html" title=
          "Chapitre&nbsp;8.&nbsp;Installer les logiciels du système de base">Niveau
          supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - Version r10.1-205-g49170-systemd+">Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="wrap" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="ch-system-tcl" name="ch-system-tcl"></a>8.15. Tcl-8.6.11
      </h1>
      <div class="package" lang="fr" xml:lang="fr">
        <p>
          Le paquet <span class="application">Tcl</span> contient le langage
          de commande des outils, un langage de script robuste. Le paquet
          <span class="application">Expect</span> est écrit en <span class=
          "application">Tcl</span>.
        </p>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Temps de construction
              approximatif:</strong> <span class="segbody">3.7 SBU</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Espace disque requis:</strong>
              <span class="segbody">80 Mo</span>
            </div>
          </div>
        </div>
      </div>
      <div class="installation" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          8.15.1. Installation de Tcl
        </h2>
        <p>
          Ce paquet et les deux suivants (Expect et DejaGNU) sont installés
          pour prendre en charge le lancement des suites de tests de
          binutils, GCC et d'autres paquets. Installer trois paquets pour les
          tests peut sembler excessif, mais c'est toujours rassurant, sinon
          essentiel, de savoir que les outils les plus importants
          fonctionnent correctement.
        </p>
        <p>
          Tout d'abord, déballez la documentation en lançant la commande
          suivante&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">tar -xf ../tcl8.6.11-html.tar.gz --strip-components=1</kbd></pre>
        <p>
          Préparez la compilation de Tcl&nbsp;:
        </p>
        <pre class="userinput"><kbd class="command">SRCDIR=$(pwd)
cd unix
./configure --prefix=/usr           \
            --mandir=/usr/share/man \
            $([ "$(uname -m)" = x86_64 ] &amp;&amp; echo --enable-64bit)</kbd></pre>
        <div class="variablelist">
          <p class="title">
            <strong>Voici la signification des options de
            configure&nbsp;:</strong>
          </p>
          <dl class="variablelist">
            <dt>
              <span class="term"><em class="parameter"><code>$([ "$(uname
              -m)" = x86_64 ] &amp;&amp; echo
              --enable-64bit)</code></em></span>
            </dt>
            <dd>
              <p>
                La construction <em class="parameter"><code>$(&lt;commande
                shell&gt;)</code></em> est remplacée par la sortie de
                commande shell. Ici cette sortie est vide si vous lancez sur
                une machine 32&nbsp;bit et <em class=
                "parameter"><code>--enable-64bit</code></em> si vous la
                lancez sur une machine 64&nbsp;bits.
              </p>
            </dd>
          </dl>
        </div>
        <p>
          Construisez le paquet&nbsp;:
        </p>
        <pre class="userinput"><kbd class="command">make

sed -e "s|$SRCDIR/unix|/usr/lib|" \
    -e "s|$SRCDIR|/usr/include|"  \
    -i tclConfig.sh

sed -e "s|$SRCDIR/unix/pkgs/tdbc1.1.2|/usr/lib/tdbc1.1.2|" \
    -e "s|$SRCDIR/pkgs/tdbc1.1.2/generic|/usr/include|"    \
    -e "s|$SRCDIR/pkgs/tdbc1.1.2/library|/usr/lib/tcl8.6|" \
    -e "s|$SRCDIR/pkgs/tdbc1.1.2|/usr/include|"            \
    -i pkgs/tdbc1.1.2/tdbcConfig.sh

sed -e "s|$SRCDIR/unix/pkgs/itcl4.2.1|/usr/lib/itcl4.2.1|" \
    -e "s|$SRCDIR/pkgs/itcl4.2.1/generic|/usr/include|"    \
    -e "s|$SRCDIR/pkgs/itcl4.2.1|/usr/include|"            \
    -i pkgs/itcl4.2.1/itclConfig.sh

unset SRCDIR</kbd></pre>
        <p>
          Les diverses instructions <span class="quote">«&nbsp;<span class=
          "quote">sed</span>&nbsp;»</span> après la commande <span class=
          "quote">«&nbsp;<span class="quote">make</span>&nbsp;»</span>
          suppriment des références au répertoire de construction des
          fichiers de configuration et les remplace par les répertoires
          d'installation. Ce n'est pas requis pour le reste de LFS, mais peut
          être requis pour un paquet construit plus tard avec Tcl.
        </p>
        <p>
          Pour tester les résultats, lancez&nbsp;:
        </p>
        <pre class="userinput"><kbd class="command">make test</kbd></pre>
        <p>
          Un test, unixInit-1.2, est connu pour échouer.
        </p>
        <p>
          Installez le paquet&nbsp;:
        </p>
        <pre class="userinput"><kbd class="command">make install</kbd></pre>
        <p>
          Rendez la bibliothèque installée réinscriptible pour que les
          symboles de débogages puissent être supprimés plus tard&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">chmod -v u+w /usr/lib/libtcl8.6.so</kbd></pre>
        <p>
          Installez les en-têtes de Tcl. Le paquet suivant, Expect, en a
          besoin.
        </p>
        <pre class="userinput"><kbd class=
        "command">make install-private-headers</kbd></pre>
        <p>
          Maintenant créez un lien symbolique nécessaire&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">ln -sfv tclsh8.6 /usr/bin/tclsh</kbd></pre>
        <p>
          Enfin, renommez une page de manuel qui entre en conflit avec une
          page de manuel de Perl&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">mv /usr/share/man/man3/{Thread,Tcl_Thread}.3</kbd></pre>
      </div>
      <div class="content" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          <a id="contents-tcl" name="contents-tcl"></a>8.15.2. Contenu de Tcl
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Programmes installés:</strong>
              <span class="segbody">tclsh (lien vers tclsh8.6) et
              tclsh8.6</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Bibliothèque installée:</strong>
              <span class="segbody">libtcl8.6.so et libtclstub8.6.a</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Descriptions courtes
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="tclsh8.6" name="tclsh8.6"></a><span class=
                    "term"><span class=
                    "command"><strong>tclsh8.6</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    Le shell de commande de Tcl
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="tclsh" name="tclsh"></a><span class=
                    "term"><span class=
                    "command"><strong>tclsh</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    Un lien vers tclsh8.6
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="libtcl8.6.so" name="libtcl8.6.so"></a><span class=
                    "term"><code class="filename">libtcl8.6.so</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    La bibliothèque Tcl
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="libtclstub8.6.a" name=
                    "libtclstub8.6.a"></a><span class="term"><code class=
                    "filename">libtclstub8.6.a</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    La bibliothèque de base de Tcl
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="flex.html" title="Flex-2.6.4">Précédent</a>
          <p>
            Flex-2.6.4
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="expect.html" title=
          "Expect-5.45.4">Suivant</a>
          <p>
            Expect-5.45.4
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter08.html" title=
          "Chapitre&nbsp;8.&nbsp;Installer les logiciels du système de base">Niveau
          supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - Version r10.1-205-g49170-systemd+">Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
