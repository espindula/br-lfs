<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      8.48.&nbsp;Libffi-3.4.2
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body class="lfs" id="lfs-r10.1-205-g49170-systemd+">
    <div class="navheader">
      <h4>
        Linux From Scratch - Version r10.1-205-g49170-systemd+
      </h4>
      <h3>
        Chapitre&nbsp;8.&nbsp;Installer les logiciels du système de base
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="libelf.html" title=
          "Libelf de Elfutils-0.185">Précédent</a>
          <p>
            Libelf de Elfutils-0.185
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="openssl.html" title=
          "OpenSSL-1.1.1l">Suivant</a>
          <p>
            OpenSSL-1.1.1l
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter08.html" title=
          "Chapitre&nbsp;8.&nbsp;Installer les logiciels du système de base">Niveau
          supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - Version r10.1-205-g49170-systemd+">Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="wrap" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="ch-system-libffi" name="ch-system-libffi"></a>8.48.
        Libffi-3.4.2
      </h1>
      <div class="package" lang="fr" xml:lang="fr">
        <p>
          La bibliothèque Libffi fournit une interface portable et
          haut-niveau pour diverses conventions d'appel. Cela permet au
          programmeur d'appeler des fonctions spécifiées par une interface
          d'appel décrite à l'exécution.
        </p>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Temps de construction
              approximatif:</strong> <span class="segbody">2.0 SBU</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Espace disque requis:</strong>
              <span class="segbody">10 Mo</span>
            </div>
          </div>
        </div>
      </div>
      <div class="installation" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          8.48.1. Installation de Libffi
        </h2>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            Comme pour GMP, libffi est construit avec des optimisations
            spécifiques au processeur utilisé. Si vous construisez pour un
            autre système, exportez CFLAGS et CXXFLAGS pour spécifier une
            construction générique pour votre architecture. Si vous ne faites
            pas cela, des erreurs de type opération illégale apparaîtront à
            l'édition des liens.
          </p>
        </div>
        <p>
          Préparez libffi à la compilation&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">./configure --prefix=/usr          \
            --disable-static       \
            --with-gcc-arch=native \
            --disable-exec-static-tramp</kbd></pre>
        <div class="variablelist">
          <p class="title">
            <strong>Voici la signification des options de
            configuration&nbsp;:</strong>
          </p>
          <dl class="variablelist">
            <dt>
              <span class="term"><em class=
              "parameter"><code>--with-gcc-arch=native</code></em></span>
            </dt>
            <dd>
              <p>
                S'assure que GCC active les optimisations pour le système
                actuel. Si l'option n'est pas spécifiée, il essaiera de
                deviner le système et le code généré peut ne pas être correct
                pour certains systèmes. Si le code généré est copié du
                système actuel vers un système avec moins de fonctionnalités,
                utilisez le système avec moins de fonctionnalités dans le
                paramètre. Pour des détails sur les types de systèmes
                alternatifs, voyez <a class="ulink" href=
                "https://gcc.gnu.org/onlinedocs/gcc-11.2.0/gcc/x86-Options.html">
                les options x86 dans le manuel de GCC</a>.
              </p>
            </dd>
            <dt>
              <span class="term"><em class=
              "parameter"><code>--disable-exec-static-tramp</code></em></span>
            </dt>
            <dd>
              <p>
                Désactivez la prise en charge du trampoline statique. C'est
                une nouvelle fonctionnalité de libffi, mais certains paquets
                de BLFS (notamment <span class="application">GJS</span> et
                <span class="application">gobject-introspection</span>) n'ont
                pas encore été adaptés.
              </p>
            </dd>
          </dl>
        </div>
        <p>
          Compilez le paquet&nbsp;:
        </p>
        <pre class="userinput"><kbd class="command">make</kbd></pre>
        <p>
          Pour tester les résultats, lancez&nbsp;:
        </p>
        <pre class="userinput"><kbd class="command">make check</kbd></pre>
        <p>
          Installez le paquet&nbsp;:
        </p>
        <pre class="userinput"><kbd class="command">make install</kbd></pre>
      </div>
      <div class="content" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          <a id="contents-libffi" name="contents-libffi"></a>8.48.2. Contenu
          de Libffi
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Bibliothèque installée:</strong>
              <span class="segbody">libffi.so</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Descriptions courtes
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="libffi" name="libffi"></a><span class=
                    "term"><code class="filename">libffi</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    contient les fonctions de l'API de l'interface pour les
                    fonctions externes.
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="libelf.html" title=
          "Libelf de Elfutils-0.185">Précédent</a>
          <p>
            Libelf de Elfutils-0.185
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="openssl.html" title=
          "OpenSSL-1.1.1l">Suivant</a>
          <p>
            OpenSSL-1.1.1l
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter08.html" title=
          "Chapitre&nbsp;8.&nbsp;Installer les logiciels du système de base">Niveau
          supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - Version r10.1-205-g49170-systemd+">Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
