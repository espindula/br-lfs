<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      8.78.&nbsp;Nettoyer
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body class="lfs" id="lfs-r10.1-212-g6711c+">
    <div class="navheader">
      <h4>
        Linux From Scratch - Version r10.1-212-g6711c+
      </h4>
      <h3>
        Chapitre&nbsp;8.&nbsp;Installer les logiciels du système de base
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="stripping.html" title=
          "Nettoyage">Précédent</a>
          <p>
            Nettoyage
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="../chapter09/chapter09.html" title=
          "Configuration du système">Suivant</a>
          <p>
            Configuration du système
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter08.html" title=
          "Chapitre&nbsp;8.&nbsp;Installer les logiciels du système de base">Niveau
          supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - Version r10.1-212-g6711c+ ">Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="ch-system-revisedchroot" name=
        "ch-system-revisedchroot"></a>8.78. Nettoyer
      </h1>
      <p>
        Enfin, nettoyez des fichiers résultant des tests&nbsp;:
      </p>
      <pre class="userinput"><kbd class="command">rm -rf /tmp/*</kbd></pre>
      <p>
        Maintenant déconnectez-vous et entrez de nouveau dans l'environnement
        chroot avec une nouvelle commande chroot. À partir de maintenant,
        utilisez cette nouvelle commande chroot à chaque fois que vous devrez
        entrer dans l'environnement chroot après l'avoir quitté&nbsp;:
      </p>
      <pre class="userinput"><kbd class="command">logout

chroot "$LFS" /usr/bin/env -i          \
    HOME=/root TERM="$TERM"            \
    PS1='(lfs chroot) \u:\w\$ '        \
    PATH=/usr/bin:/usr/sbin            \
    /bin/bash --login</kbd></pre>
      <p>
        Ici l'option <em class="parameter"><code>+h</code></em> n'est plus
        utilisée, comme tous les programmes précédents ont été
        remplacés&nbsp;: le hashage est donc possible.
      </p>
      <p>
        Si les systèmes de fichiers virtuels du noyau ont été démontés,
        manuellement ou suite à un redémarrage, assurez-vous que les systèmes
        de fichiers virtuels du noyau seront montés lorsque vous entrerez à
        nouveau dans le chroot. On a expliqué cette procédure dans <a class=
        "xref" href="../chapter07/kernfs.html#ch-tools-bindmount" title=
        "7.3.2.&nbsp;Monter et peupler /dev">Section&nbsp;7.3.2,
        «&nbsp;Monter et peupler /dev&nbsp;»</a> et <a class="xref" href=
        "../chapter07/kernfs.html#ch-tools-kernfsmount" title=
        "7.3.3.&nbsp;Monter les systèmes de fichiers virtuels du noyau">Section&nbsp;7.3.3,
        «&nbsp;Monter les systèmes de fichiers virtuels du noyau&nbsp;»</a>.
      </p>
      <p>
        Il y a aussi de nombreux fichiers installés dans les répertoires
        /usr/lib et /usr/libexec dont l'extension est .la. Ce sont les
        fichiers «&nbsp;d'archive libtool&nbsp;». Comme on l'a déjà dit, ils
        ne sont utiles que pour lier des bibliothèques statiques. Ils sont
        inutiles, et potentiellement dangereux, lorsqu'on utilise des
        bibliothèque partagée, surtout avec les systèmes de construction non
        autotools. Pour les supprimer, lancez&nbsp;:
      </p>
      <pre class="userinput"><kbd class=
      "command">find /usr/lib /usr/libexec -name \*.la -delete</kbd></pre>
      <p>
        Pour plus d'informations sur les fichiers d'archive libtool, voir la
        <a class="ulink" href=
        "http://fr.linuxfromscratch.org/blfs/../view/blfs-svn//introduction/la-files.html">
        section BLFS «&nbsp;À propos des fichiers d'archive libtool
        (.la)&nbsp;»</a>.
      </p>
      <p>
        Le compilateur construit dans <a class="xref" href=
        "../chapter06/chapter06.html" title=
        "Chapitre&nbsp;6.&nbsp;Compilation croisée des outils temporaires">Chapitre&nbsp;6</a>
        et <a class="xref" href="../chapter07/chapter07.html" title=
        "Chapitre&nbsp;7.&nbsp;Entrée dans le chroot et construction des outils temporaires supplémentaires">
        Chapitre&nbsp;7</a> est toujours partiellement installé et n'est plus
        requis. Supprimez-le avec&nbsp;:
      </p>
      <pre class="userinput"><kbd class=
      "command">find /usr -depth -name $(uname -m)-lfs-linux-gnu\* | xargs rm -rf</kbd></pre>
      <p>
        Enfin, supprimez le compte utilisateur temporaire
        «&nbsp;tester&nbsp;» créé au début du chapitre précédent.
      </p>
      <pre class="userinput"><kbd class=
      "command">userdel -r tester</kbd></pre>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="stripping.html" title=
          "Nettoyage">Précédent</a>
          <p>
            Nettoyage
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="../chapter09/chapter09.html" title=
          "Configuration du système">Suivant</a>
          <p>
            Configuration du système
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter08.html" title=
          "Chapitre&nbsp;8.&nbsp;Installer les logiciels du système de base">Niveau
          supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - Version r10.1-212-g6711c+ ">Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
