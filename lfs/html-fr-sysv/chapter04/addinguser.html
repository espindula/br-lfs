<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      4.3.&nbsp;Ajouter l'utilisateur LFS
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body class="lfs" id="lfs-r10.1-205-g49170+">
    <div class="navheader">
      <h4>
        Linux From Scratch - Version r10.1-205-g49170+
      </h4>
      <h3>
        Chapitre&nbsp;4.&nbsp;Dernières préparations
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="creatingminlayout.html" title=
          "Créer un ensemble limité de répertoire dans le système de fichiers LFS">
          Précédent</a>
          <p>
            Créer un ensemble limité de répertoire dans le système de
            fichiers LFS
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="settingenvironment.html" title=
          "Configurer l'environnement">Suivant</a>
          <p>
            Configurer l'environnement
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter04.html" title=
          "Chapitre&nbsp;4.&nbsp;Dernières préparations">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - Version r10.1-205-g49170+ ">Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="ch-preps-addinguser" name="ch-preps-addinguser"></a>4.3.
        Ajouter l'utilisateur LFS
      </h1>
      <p>
        Lorsque vous êtes connecté en tant qu'utilisateur <code class=
        "systemitem">root</code>, faire une simple erreur peut endommager
        voire dévaster votre système. Donc, les paquets dans les deux
        prochains chapitres sont construits en tant qu'utilisateur non
        privilégié. Vous pouvez bien sûr utiliser votre propre nom
        d'utilisateur mais, pour faciliter l'établissement d'un environnement
        de travail propre, créez un nouvel utilisateur <code class=
        "systemitem">lfs</code> comme membre d'un nouveau groupe (aussi nommé
        <code class="systemitem">lfs</code>) et utilisez cet utilisateur lors
        du processus d'installation. En tant que <code class=
        "systemitem">root</code>, lancez les commandes suivantes pour créer
        le nouvel utilisateur&nbsp;:
      </p>
      <pre class="userinput"><kbd class="command">groupadd lfs
useradd -s /bin/bash -g lfs -m -k /dev/null lfs</kbd></pre>
      <div class="variablelist">
        <p class="title">
          <strong>Voici la signification des options de la ligne de
          commande&nbsp;:</strong>
        </p>
        <dl class="variablelist">
          <dt>
            <span class="term"><em class="parameter"><code>-s
            /bin/bash</code></em></span>
          </dt>
          <dd>
            <p>
              Ceci fait de <span class="command"><strong>bash</strong></span>
              le shell par défaut de l'utilisateur <code class=
              "systemitem">lfs</code>.
            </p>
          </dd>
          <dt>
            <span class="term"><em class="parameter"><code>-g
            lfs</code></em></span>
          </dt>
          <dd>
            <p>
              Cette option ajoute l'utilisateur <code class=
              "systemitem">lfs</code> au groupe <code class=
              "systemitem">lfs</code>.
            </p>
          </dd>
          <dt>
            <span class="term"><em class=
            "parameter"><code>-m</code></em></span>
          </dt>
          <dd>
            <p>
              Ceci crée un répertoire personnel pour l'utilisateur
              <code class="systemitem">lfs</code>.
            </p>
          </dd>
          <dt>
            <span class="term"><em class="parameter"><code>-k
            /dev/null</code></em></span>
          </dt>
          <dd>
            <p>
              Ce paramètre empêche toute copie possible de fichiers provenant
              du répertoire squelette (par défaut, <code class=
              "filename">/etc/skel</code>) en modifiant son emplacement par
              le périphérique spécial null.
            </p>
          </dd>
          <dt>
            <span class="term"><em class=
            "parameter"><code>lfs</code></em></span>
          </dt>
          <dd>
            <p>
              Ceci est le nom réel pour l'utilisateur créé.
            </p>
          </dd>
        </dl>
      </div>
      <p>
        Pour vous connecter en tant qu'utilisateur <code class=
        "systemitem">lfs</code> (et non pas de passer à l'utilisateur
        <code class="systemitem">lfs</code> alors que vous êtes connecté en
        tant que <code class="systemitem">root</code>, ce qui ne requiert pas
        de mot de passe pour l'utilisateur <code class=
        "systemitem">lfs</code>), donnez un mot de passe à <code class=
        "systemitem">lfs</code>&nbsp;:
      </p>
      <pre class="userinput"><kbd class="command">passwd lfs</kbd></pre>
      <p>
        Donnez à <code class="systemitem">lfs</code> un accès complet aux
        répertoires de <code class="filename">$LFS</code> en indiquant que
        <code class="systemitem">lfs</code> est le propriétaire du
        répertoire&nbsp;:
      </p>
      <pre class="userinput"><kbd class=
      "command">chown -v lfs $LFS/{usr{,/*},lib,var,etc,bin,sbin,tools}
case $(uname -m) in
  x86_64) chown -v lfs $LFS/lib64 ;;
esac</kbd></pre>
      <p>
        Si un répertoire de travail séparé a été créé comme suggéré, faites
        en sorte que l'utilisateur <code class="systemitem">lfs</code> soit
        aussi le propriétaire de ce répertoire&nbsp;:
      </p>
      <pre class="userinput"><kbd class=
      "command">chown -v lfs $LFS/sources</kbd></pre>
      <div class="admon note">
        <img alt="[Note]" src="../images/note.png" />
        <h3>
          Note
        </h3>
        <p>
          Sur certains systèmes hôtes, la commande suivante ne termine pas
          correctement et place la connexion vers l'utilisateur lfs en tâche
          de fond. Si l'invite de commande «&nbsp;lfs:~$&nbsp;» n'apparaît
          pas immédiatement, saisissez la commande <span class=
          "command"><strong>fg</strong></span> pour corriger le problème.
        </p>
      </div>
      <p>
        Ensuite, connectez-vous en tant que <code class=
        "systemitem">lfs</code>. Ceci peut se faire via une console
        virtuelle, avec le gestionnaire d'affichage ou avec la commande
        suivante de substitution d'utilisateur&nbsp;:
      </p>
      <pre class="userinput"><kbd class="command">su - lfs</kbd></pre>
      <p>
        Le <span class="quote">«&nbsp;<span class="quote"><em class=
        "parameter"><code>-</code></em></span>&nbsp;»</span> indique à
        <span class="command"><strong>su</strong></span> de lancer un shell
        de connexion. Vous trouverez la différence entre un shell de
        connexion et un autre dans la page de manuel <code class=
        "filename">bash(1)</code> et <span class="command"><strong>info
        bash</strong></span>.
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="creatingminlayout.html" title=
          "Créer un ensemble limité de répertoire dans le système de fichiers LFS">
          Précédent</a>
          <p>
            Créer un ensemble limité de répertoire dans le système de
            fichiers LFS
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="settingenvironment.html" title=
          "Configurer l'environnement">Suivant</a>
          <p>
            Configurer l'environnement
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter04.html" title=
          "Chapitre&nbsp;4.&nbsp;Dernières préparations">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - Version r10.1-205-g49170+ ">Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
