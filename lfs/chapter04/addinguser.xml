<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>
<sect1 id="ch-tools-addinguser">
<title>Ajouter l'utilisateur LFS</title>
<?dbhtml filename="addinguser.html"?>

<para>Lorsque vous êtes connecté en tant qu'utilisateur
<emphasis>root</emphasis>, une seule erreur peut endommager, voire
dévaster votre système. Du coup, nous vous recommandons de construire les paquets
de ce chapitre en tant qu'utilisateur non privilégié. Vous pouvez bien sûr
utiliser votre propre nom d'utilisateur, mais pour vous assurer un 
environnement de travail propre, il est plus sûr de créer un nouvel utilisateur 
nommé <emphasis>lfs</emphasis> comme membre d'un nouveau groupe
<emphasis>lfs</emphasis> et de l'utiliser lors du processus d'installation.
En tant que <emphasis>root</emphasis>, exécutez les commandes suivantes pour créer
le nouvel utilisateur&nbsp;:</para>

<screen><userinput>groupadd lfs
useradd -s /bin/bash -g lfs -m -k /dev/null lfs</userinput></screen>

<para>Voici la signification des options de la ligne de commande&nbsp;:</para>

<variablelist>
<varlistentry>
<term><parameter>-s /bin/bash</parameter></term>
<listitem><para>Ceci fait de <command>bash</command> le shell par défaut de
l'utilisateur <emphasis>lfs</emphasis>.</para></listitem>
</varlistentry>

<varlistentry>
<term><parameter>-g lfs</parameter></term>
<listitem><para>Cette option ajoute l'utilisateur <emphasis>lfs</emphasis> au
groupe <emphasis>lfs</emphasis>.</para></listitem>
</varlistentry>

<varlistentry>
<term><parameter>-m</parameter></term>
<listitem><para>Ceci crée un répertoire personnel pour l'utilisateur
<emphasis>lfs</emphasis>.</para></listitem>
</varlistentry>

<varlistentry>
<term><parameter>-k /dev/null</parameter></term>
<listitem><para>Ce paramètre empêche la copie de fichiers provenant
du répertoire squelette (par défaut, <filename
class="directory">/etc/skel</filename>) en le remplaçant par le
périphérique spécial null.</para></listitem>
</varlistentry>

<varlistentry>
<term><parameter>lfs</parameter></term>
<listitem><para>Ceci est le nom réel pour le groupe et l'utilisateur
créé.</para></listitem>
</varlistentry>
</variablelist>

<para>Pour vous connecter en tant qu'utilisateur <emphasis>lfs</emphasis> (et
non pas de passer à l'utilisateur <emphasis>lfs</emphasis> alors que vous êtes
connecté en tant que <emphasis>root</emphasis>, ce qui ne requiert pas que 
<emphasis>lfs</emphasis> ait un mot de passe), donnez un mot de passe à
<emphasis>lfs</emphasis>&nbsp;:</para>

<screen role="nodump"><userinput>passwd lfs</userinput></screen>

<para>Donnez-lui un accès complet à <filename
class="directory">$LFS/tools</filename> en le désignant 
comme propriétaire du répertoire&nbsp;:</para>

<screen><userinput>chown -v lfs $LFS/tools</userinput></screen>

<para>Si vous avez créé un répertoire de travail séparé comme suggéré, faites
de même avec ce répertoire&nbsp;:</para>

<screen><userinput>chown -v lfs $LFS/sources</userinput></screen>

<para>Ensuite, connectez-vous en tant que <emphasis>lfs</emphasis>. Vous pouvez le faire 
via une console virtuelle, avec un gestionnaire d'affichage, ou avec
la commande suivante de substitution d'utilisateur&nbsp;:</para>

<screen><userinput>su - lfs</userinput></screen>

<para>Le <quote><command>-</command></quote> indique à <command>su</command> de
lancer un shell de connexion. La différence entre un shell de connexion et un 
autre est décrite dans la page man <filename>bash(1)</filename>, et par 
<command>info bash</command>.</para>

</sect1>
