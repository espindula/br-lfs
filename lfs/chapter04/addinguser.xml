<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>
<sect1 id="ch-tools-addinguser">
<title>Ajouter l'utilisateur lfs</title>
<?dbhtml filename="addinguser.html"?>

<para>Lorsque vous êtes connecté en tant qu'utilisateur
<emphasis>root</emphasis>, faire une simple erreur peut endommager voire
dévaster votre système. Donc, nous vous recommandons de construire les packages
dans ce chapitre en tant qu'utilisateur non privilégié. Vous pouvez bien sûr
utiliser votre propre nom d'utilisateur mais, pour faciliter l'établissement
d'un environnement de travail propre, nous allons créer un nouvel utilisateur 
nommé <emphasis>lfs</emphasis> et l'utiliser lors du processus d'installation.
En tant que <emphasis>root</emphasis>, lancez la commande suivante pour créer
le nouvel utilisateur&nbsp;:</para>

<screen><userinput>useradd -s /bin/bash -m -k /dev/null lfs</userinput></screen>

<para>Voici la signification des options&nbsp;:</para>

<itemizedlist>
<listitem><para><userinput>-s /bin/bash</userinput>&nbsp;: ceci fait que
<userinput>bash</userinput> est le shell par défaut de l'utilisateur
<emphasis>lfs</emphasis>.</para></listitem>

<listitem><para><userinput>-m</userinput>&nbsp;: ceci crée un répertoire
personnel pour <emphasis>lfs</emphasis>.</para></listitem>

<listitem><para><userinput>-k /dev/null</userinput>&nbsp;: ce paramètre empêche
le copie possible de fichiers à partir du répertoire modèle (par défaut, 
<filename>/etc/skel</filename>) en modifiant l'emplacement par le périphérique
null.</para></listitem>
</itemizedlist>

<para>Si vous souhaitez vous connecter en tant que <emphasis>lfs</emphasis>,
alors donnez un mot de passe à <emphasis>lfs</emphasis>&nbsp;:</para>

<screen><userinput>passwd lfs</userinput></screen>

<para>et donnez-lui un accès complet à <filename
class="directory">$LFS/tools</filename> en indiquant que
<emphasis>lfs</emphasis> est le propriétaire du répertoire&nbsp;:</para>

<screen><userinput>chown lfs $LFS/tools</userinput></screen>

<para>Si vous avez créé un répertoire de travail séparé comme suggéré, faites
que l'utilisateur <emphasis>lfs</emphasis> soit aussi le propriétaire de ce
répertoire&nbsp;:</para>

<screen><userinput>chown lfs $LFS/sources</userinput></screen>

<para>Ensuite, connectez-vous en tant que <emphasis>lfs</emphasis>. Ceci peut
se faire via une console virtuelle, avec le gestionnaire d'affichage ou avec
la commande suivante de substitution d'utilisateur&nbsp;:</para>

<screen><userinput>su - lfs</userinput></screen>

<para>Le <quote><command>-</command></quote> indique à <command>su</command> de
lancer un shell de <emphasis>connexion</emphasis>.</para>

</sect1>
