<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="pre-hostreqs">
  <?dbhtml filename="hostreqs.html"?>

  <title>Prérequis du système hôte</title>

    <para>Votre système hôte doit contenir les logiciels suivants dans leur
    version minimum indiquée. Cela ne devrait pas poser de problème sur la
    plupart des distributions Linux modernes. Noter également que
    certaines distributions placeront les en-tête des logiciels
    dans un répertoire distinct des paquets, ayant souvent la forme
    <quote>&lt;nom-du-paquet&gt;-devel</quote> ou
    <quote>&lt;nom-du-paquet&gt;-dev</quote>. Assurez-vous qu'ils sont
    installés si votre distribution les fournit.</para>

  <itemizedlist spacing="compact">

    <listitem>
      <para><emphasis role="strong">Bash-2.05a</emphasis> (/bin/sh
      devrait être un lien symbolique ou physique vers bash)</para>
    </listitem>

    <listitem>
      <para><emphasis role="strong">Binutils-2.12</emphasis> (les versions
      supérieure à &binutils-version; ne sont pas recommandées car elles 
      n'ont pas été testées)</para>
    </listitem>

    <listitem>
      <para><emphasis role="strong">Bison-1.875</emphasis> (/usr/bin/yacc
      devrait être un lien vers bison ou un petit script qui exécute bison)</para>
    </listitem>

    <listitem>
      <para><emphasis role="strong">Bzip2-1.0.2</emphasis></para>
    </listitem>

    <listitem>
      <para><emphasis role="strong">Coreutils-5.0</emphasis> (ou Sh-Utils-2.0,
      Textutils-2.0 et Fileutils-4.1)</para>
    </listitem>

    <listitem>
      <para><emphasis role="strong">Diffutils-2.8</emphasis></para>
    </listitem>

    <listitem>
      <para><emphasis role="strong">Findutils-4.1.20</emphasis></para>
    </listitem>

    <listitem>
      <para><emphasis role="strong">Gawk-3.0</emphasis> (/usr/bin/awk
      devrait être un lien vers gawk)</para>
    </listitem>

    <listitem>
      <para><emphasis role="strong">Gcc-3.0.1</emphasis> (les versions
      supérieures à &gcc-version; ne sont pas recommandées car elles n'ont
      pas été testées)</para>
    </listitem>

    <listitem>
      <para><emphasis role="strong">Glibc-2.2.5</emphasis> (les versions
      supérieures à &glibc-version; ne sont pas recommandées car elles n'ont
      pas été testées)</para>
    </listitem>

    <listitem>
      <para><emphasis role="strong">Grep-2.5</emphasis></para>
    </listitem>

    <listitem>
      <para><emphasis role="strong">Gzip-1.2.4</emphasis></para>
    </listitem>

    <listitem>
      <para><emphasis role="strong">Noyau Linux 2.6.18</emphasis>
      (compilé avec GCC-3.0 ou supérieur)</para>

      <para>Cette version du noyau est requise car nous spécifions cette version-là lors de la construction de
      <application>glibc</application> au chapitre 6, suivant ainsi une recommandation des développeurs. Vous pouvez éviter cela si vous le 
      désirez mais un noyau au moins 2.6.0 est nécessaire car le support pour le
      <quote>thread-local storage</quote> de Binutils ne sera pas compilé et la suite de
      tests NPTL (<foreignphrase>Native POSIX Threading Library</foreignphrase>
      produira une erreur de segmentation (segfault) si le noyau du système
      hôte n'est pas au moins à la version 2.6.x, compilé avec une version 3.0
      ou supérieure de GCC.</para>

      <para>Si le noyau hôte est plus ancien que le 2.6.18, ou s'il n'a pas
      été compilé avec le compilateur GCC-3.0 (ou supérieur),
      vous devrez remplacer le noyau par un nouveau qui satisfait ces
      spécifications. Vous pouvez employer deux méthodes pour cela.
      Vous pouvez d'abord voir si votre distribution Linux fournit un paquet
      pour le noyau 2.6.18 ou supérieur. Si tel est le cas, vous pouvez l'installer. Si
      votre distribution n'offre pas un paquet acceptable pour le noyau, ou si vous
      préféreriez l'installer, vous pouvez compiler un noyau 2.6 vous-même.
      Les instructions pour la compilation du noyau et la configuration du
      chargeur de démarrage (en supposant que le système hôte utilise GRUB) sont
      <xref linkend="chapter-bootable"/>.</para>
      
      <note>
      
        <para>Cette version du livre construit un système Linux 32 bits et
        nécessite une version 32 bits existante du noyau sur une architecture
        x86 Intel/AMD. L'ajout de la possibilité de systèmes x86_64 est un
        objectif majeur d'une prochaine version de LFS. Vous pouvez trouver de 
        l'aide pour des systèmes 64 bits et des architectures supplémentaires
        dans le projet Cross-Compiled Linux From Scratch (CLFS) sur 
        <ulink url="http://cross-lfs.org/view/svn/"/>. </para>
      </note>
    </listitem>
    <listitem>
      <para><emphasis role="strong">M4-1.4</emphasis></para>
    </listitem>
    <listitem>
      <para><emphasis role="strong">Make-3.79.1</emphasis></para>
    </listitem>

    <listitem>
      <para><emphasis role="strong">Patch-2.5.4</emphasis></para>
    </listitem>

    <listitem>
      <para><emphasis role="strong">Perl-5.6.0</emphasis></para>
    </listitem>

    <listitem>
      <para><emphasis role="strong">Sed-3.0.2</emphasis></para>
    </listitem>

    <listitem>
      <para><emphasis role="strong">Tar-1.14</emphasis></para>
    </listitem>

    <!-- Needed by the apparently broken Binutils-2.18 -->
    <listitem>
      <para><emphasis role="strong">Texinfo-4.8</emphasis></para>
    </listitem>

  </itemizedlist>
  
  <para>Notez que les liens symboliques mentionnés ci-dessus sont nécessaires
  pour construire un système LFS en utilisant les instructions contenues à 
  l'intérieur de ce livre. Il se peut que les liens symboliques qui pointent 
  vers d'autres logiciels (comme dash, mawk, etc), mais ils n'ont pas été testés
  ou supportés par l'équipe de développement LFS et ils se peut qu'ils 
  impliquent d'autres déviations par rapport aux instructions ou des correctifs
  supplémentaires pour certains paquets.</para>

  <para>Pour voir si votre système hôte a toutes les versions nécessaires,
  exécutez ceci&nbsp;:</para>

<anchor xreflabel="Version Check Script" id="version-check"/>
<screen role="nodump"><userinput>cat &gt; version-check.sh &lt;&lt; "EOF"
<literal>#!/bin/bash
export LC_ALL=C

# Simple script to list version numbers of critical development tools

bash --version | head -n1 | cut -d" " -f2-4
echo "/bin/sh -> `readlink -f /bin/sh`"
echo -n "Binutils: "; ld --version | head -n1 | cut -d" " -f3-
bison --version | head -n1
if [ -e /usr/bin/yacc ];
   then echo "/usr/bin/yacc -> `readlink -f /usr/bin/yacc`";
  else echo "yacc not found"; fi
bzip2 --version 2&gt;&amp;1 &lt; /dev/null | head -n1 | cut -d" " -f1,6-
echo -n "Coreutils: "; chown --version | head -n1 | cut -d")" -f2
diff --version | head -n1
find --version | head -n1
gawk --version | head -n1
if [ -e /usr/bin/awk ];
   then echo "/usr/bin/awk -> `readlink -f /usr/bin/awk`";
  else echo "awk not found"; fi
gcc --version | head -n1
/lib/libc.so.6 | head -n1 | cut -d" " -f1-7
grep --version | head -n1
gzip --version | head -n1
cat /proc/version
m4 --version | head -n1
make --version | head -n1
patch --version | head -n1
echo Perl `perl -V:version`
sed --version | head -n1
tar --version | head -n1
makeinfo --version | head -n1
echo 'main(){}' > dummy.c &amp;&amp; gcc -o dummy dummy.c
if [ -x dummy ]; then echo "Compilation OK";
   else echo "Compilation failed"; fi
rm -f dummy.c dummy

</literal>
EOF

bash version-check.sh</userinput></screen>

</sect1>
