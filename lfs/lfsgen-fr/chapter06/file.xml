<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-tools-file" role="wrap">
  <?dbhtml filename="file.html"?>

  <sect1info condition="script">
<productname>file</productname>
<productnumber>&file-version;</productnumber> <address>&file-url;</address></sect1info>

  <title>File-&file-version;</title>

  <indexterm zone="ch-tools-file">
    <primary sortas="a-File">File</primary>
    <secondary>tools</secondary>
  </indexterm>

  <sect2 role="package">
    <title/>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../chapter08/file.xml"
    xpointer="xpointer(/sect1/sect2[1]/para[1])"/>

    <segmentedlist>
      <segtitle>&buildtime;</segtitle>
      <segtitle>&diskspace;</segtitle>

      <seglistitem>
        <seg>&file-tmp-sbu;</seg>
        <seg>&file-tmp-du;</seg>
      </seglistitem>
    </segmentedlist>

  </sect2>

  <sect2 role="installation">
    <title>Installation de File</title>

    <para>
       La commande <command>file</command> sur l'hôte de construction doit être à
la même version que celle que nous construisons pour créer le fichier de
signature. Lancez les commandes suivantes pour la construire&nbsp;:
    </para>

<screen><userinput remap="pre">mkdir build
pushd build
  ../configure --disable-bzlib      \
               --disable-libseccomp \
               --disable-xzlib      \
               --disable-zlib
  make
popd</userinput></screen>

    <variablelist>
      <title>Voici la signification des nouvelles options de configure&nbsp;:</title>

      <varlistentry>
        <term><parameter>--disable-*</parameter></term>
        <listitem>
          <para>Le script de configuration essaye d'utiliser certains paquets de la
distribution hôte si les fichiers de bibliothèques correspondantes
existent. Cela peut causer un échec à la construction si un fichier de
bibliothèque existe, mais pas les fichiers d'en-têtes correspondants. Ces
options évitent d'utiliser ces fonctionnalités inutiles de l'hôte.</para>
        </listitem>
      </varlistentry>
    </variablelist>

    <para>Préparez la compilation de File&nbsp;:</para>

<!-- devs: if using - -build here, the build system wants to compile
     the signature file with "file" on the build system, but stops if it is not
     the same version. One possibility would be to build "file" on the build
     system first, but it is simpler to have the system think it is not
     cross-compiling, and use the just built "file". -->
<screen><userinput remap="configure">./configure --prefix=/usr --host=$LFS_TGT --build=$(./config.guess)</userinput></screen>


    <para>Compilez le paquet&nbsp;:</para>

<screen><userinput remap="make">make FILE_COMPILE=$(pwd)/build/src/file</userinput></screen>

    <para>Installez le paquet&nbsp;:</para>

<screen><userinput remap="install">make DESTDIR=$LFS install</userinput></screen>

  </sect2>

  <sect2 role="content">
    <title/>
    <para>Les détails de ce paquet se trouvent sur <xref linkend="contents-file"
role="."/></para>

  </sect2>

</sect1>
