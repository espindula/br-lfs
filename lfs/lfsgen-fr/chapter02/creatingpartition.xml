<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-partitioning-creatingpartition">
  <?dbhtml filename="creatingpartition.html"?>

  <title>Créer une nouvelle partition</title>

  <para>Comme la plupart des autres systèmes d'exploitation, LFS est habituellement
installé dans une partition dédiée. L'approche recommandée pour la
construction d'un système LFS est d'utiliser une partition vide disponible
ou, si vous avez assez d'espace non partitionné, d'en créer une.</para>

  <para>Un système minimal requiert une partition d'environ 10&nbsp;Go
(gigaoctets). C'est suffisant pour conserver toutes les archives tar des
sources et pour compiler tous les paquets. Néanmoins, si le système LFS a
pour but d'être un système Linux primaire, des logiciels supplémentaires
seront probablement installés et réclameront une place supplémentaire. Une
partition de 30&nbsp;Go est raisonnable pour offrir le nécessaire. Le
système LFS lui-même ne prendra pas tout cet espace. Une grande partie de
cet espace est requis pour fournir un espace temporaire libre
suffisant. Compiler des paquets peut demander beaucoup d'espace disque qui
sera récupéré après l'installation du paquet.</para>

  <para>Parce qu'il n'y a pas toujours assez de mémoire (RAM)  disponible pour les
processus de compilation, une bonne idée est d'utiliser une petite partition
comme espace d'échange <systemitem class="filesystem">swap</systemitem>. Cet
espace est utilisé par le noyau pour stocker des données rarement utilisées
et pour laisser plus de place disponible aux processus actifs. La partition
de <systemitem class="filesystem">swap</systemitem> pour un système LFS peut
être la même que celle utilisée par le système hôte, donc il n'est pas
nécessaire de créer une autre partition si votre système hôte a déjà cette
configuration.</para>

  <para>Lancez un programme de partitionnement de disques tel que
<command>cfdisk</command> ou <command>fdisk</command> avec une option en
ligne de commande nommant le disque dur sur lequel la nouvelle partition
sera créée &mdash; par exemple <filename
class="devicefile">/dev/sda</filename> pour le disque primaire. Créez une
partition Linux native et, si nécessaire, une partition de <systemitem
class="filesystem">swap</systemitem>.  Merci de vous référer aux pages de
manuel de <filename>cfdisk(8)</filename> ou de <filename>fdisk(8)</filename>
si vous ne savez pas encore utiliser le programme.</para>

  <note><para>Pour les utilisateurs expérimentés, d'autres méthodes de partitionnement
sont possibles. Le nouveau système LFS peut se situer sur un <ulink
url="&blfs-book;postlfs/raid.html">RAID</ulink> logiciel ou sur un volume
<ulink url="&blfs-book;postlfs/aboutlvm.html">LVM</ulink> logique. Par
contre, certaines options exigent un <ulink
url="&blfs-book;postlfs/initramfs.html">initramfs</ulink>, ce qui relève
d'un sujet avancé. Ces méthodes de partitionnement ne sont pas recommandées
pour les utilisateurs de LFS pour la première fois.</para></note>

  <para>Rappelez-vous de la désignation de la nouvelle partition (par exemple
<filename class="devicefile">sda5</filename>). Ce livre y fera référence en
tant que la partition LFS. Rappelez-vous aussi de la désignation de la
partition <systemitem class="filesystem">swap</systemitem>. Ces noms seront
nécessaires après pour le fichier <filename>/etc/fstab</filename>.</para>

  <sect2>
  <title>Autres problématiques du partitionnement</title>

  <para>Des demandes de conseils sont souvent postées sur les listes de diffusion
LFS. C'est un sujet très subjectif. Par défaut, la plupart des distributions
utilisent le disque en entier, sauf une petite partie réservée à la
partition d'échange. Ce n'est pas optimal avec LFS, pour plusieurs
raisons. Cela réduit la flexibilité, rend plus difficile le partage de
données par plusieurs distributions ou constructions de LFS, allonge le
temps de sauvegarde et cela peut occuper de l'espace disque avec une
allocation inefficace des structures du système de fichiers.</para>

    <sect3>
    <title>La partition racine</title>

    <para>Une partition racine LFS (à ne pas confondre avec le répertoire <filename
class="directory">/root</filename>), de vingt gigaoctets est un bon
compromis pour la plupart des systèmes. Cela fournit assez de place pour
construire LFS et la plupart de BLFS, tout en étant assez petit pour que
plusieurs partitions puissent être créées facilement à des fins
expérimentales.</para> </sect3>

    <sect3>
    <title>La partition d'échange</title>

    <para>La plupart des distributions créent automatiquement une partition
d'échange. En général, la taille recommandée d'une partition d'échange est à
peu près deux fois supérieure à la taille de la RAM physique, cependant
c'est rarement nécessaire. Si vous avez un espace de disque limité, laissez
la partition d'échange à deux gigaoctets et surveillez l'utilisation de la
mémoire d'échange sur le disque.</para>

    <para>Si vous voulez utiliser l'hibernation (veille sur disque) de Linux, cela
écrit le contenu de la RAM vers la partition d'échange avant d'éteindre la
machine. Dans ce cas la partition d'échange devrait être au moins aussi
grande que la RAM installée sur le système.</para>

    <para>L'utilisation de la mémoire d'échange n'est jamais une bonne chose. Avec un
disque mécanique, vous pouvez dire si un système utilise la mémoire
d'échange simplement en écoutant l'activité du disque et en observant la
façon dont le système réagit aux commandes. Pour un disque SSD vous ne
pourrez pas l'entendre utiliser l'espace d'échange mais vous pouvez savoir
combien d'espace d'échange est utilisé avec les programmes
<command>top</command> ou <command>free</command>. Vous devriez éviter
d'utiliser une partition d'échange sur un SSD si possible. Votre première
réaction lorsque la mémoire d'échange est utilisée devrait être de vérifier
si une commande n'est pas déraisonnable, comme essayer d'éditer un fichier
de cinq gigaoctets. Si l'utilisation de la mémoire d'échange devient un
phénomène habituel, la meilleure solution est d'ajouter de la RAM à votre
système.</para> </sect3>

    <sect3>
    <title>La partition Bios de Grub</title>

    <para>Si le <emphasis>disque de démarrage</emphasis> est partitionné avec une
table de partition GUID (GPT), alors une petite partition de l’ordre d’1 Mo
doit être créée si elle n’existe pas déjà. Cette partition n’est pas
formatée, mais doit être disponible pour que GRUB l’utilise pendant
l’installation du chargeur de démarrage. Cette partition sera normalement
intitulée «&nbsp;<foreignphrase>BIOS Boot</foreignphrase>&nbsp;» si vous
utilisez <command>fdisk</command> ou aura le code <emphasis>EF02</emphasis>
avec <command>gdisk</command>.</para>

    <note><para>La partition Bios de Grub doit être présente sur le disque que le BIOS
utilise pour démarrer le système. Ce n’est pas nécessairement le même disque
que celui sur lequel la partition racine de LFS est installée. Les disques
d’un système peuvent utiliser des types de tables de partitions
différents. Le besoin de cette partition ne dépend que du type de table de
partitions du disque de démarrage.</para></note>
    </sect3>

    <sect3>
    <title>Partitions de commodité</title>

    <para>Plusieurs autres partitions ne sont pas nécessaires mais vous devriez les
étudier lorsque vous aménagez un disque dur. La liste suivante n'est pas
exhaustive mais peut être perçue comme un guide.</para>

    <itemizedlist>

      <listitem><para>/boot &ndash; Fortement recommandée. Utilisez cette partition pour conserver
les noyaux et d'autres informations de démarrage. Pour minimiser les
problèmes de démarrage avec les gros disques, faites-en la première
partition physique sur votre premier disque dur. Une taille de partition de
200 mégaoctets est parfaitement adaptée.</para></listitem>

      <listitem><para>/home &ndash; Fortement recommandée. Partage votre répertoire home et vos
paramètres utilisateur entre plusieurs distributions ou constructions de
LFS. La taille est en général très importante et dépend de l'espace disque
disponible.</para></listitem>

      <listitem><para>/usr &ndash; On utilise généralement une partition /usr séparée si on
fournit un serveur pour un client léger ou une station de travail sans
disque. Elle n'est normalement pas nécessaire pour LFS. Une taille de dix
gigaoctets gérera la plupart des installations.</para></listitem>

      <listitem><para>/opt &ndash; Ce répertoire est surtout utile pour BLFS où vous pouvez
installer plusieurs versions de gros paquets tels que Gnome ou KDE sans
mettre les fichiers dans la hiérarchie /usr. Si vous l'utilisez, 5 à 10
gigaoctets sont généralement adaptés.</para>
      </listitem>

      <listitem><para>/tmp &ndash; Un répertoire /tmp séparé est rare, mais utile si vous
configurez un client léger. Cette partition, si vous l'utilisez, ne
nécessitera en général pas plus de deux gigaoctets.</para></listitem>

      <listitem><para>/usr/src &ndash; Cette partition est très utile pour fournir un endroit où
conserver les fichiers des sources de BLFS et les partager entre des
constructions LFS. Vous pouvez aussi l'utiliser comme lieu de construction
des paquets BLFS. Une partition raisonnablement grande de 30-50 gigaoctets
permet d'avoir beaucoup de place.</para></listitem>

    </itemizedlist>

    <para>Vous devez spécifier toute partition que vous voulez voir montée
automatiquement au démarrage dans <filename>/etc/fstab</filename>. Les
détails sur la façon de spécifier les partitions seront donnés à la <xref
linkend="ch-bootable-fstab"/>.  </para>

    </sect3>
  </sect2>
</sect1>
