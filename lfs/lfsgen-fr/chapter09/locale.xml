<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-config-locale" revision="systemd">
  <?dbhtml filename="locale.html"?>

  <title>Configuration des paramètres régionaux du système</title>

  <indexterm zone="ch-config-locale">
    <primary sortas="e-etc-locale-conf">/etc/locale.conf</primary>
  </indexterm>

  <para>Le fichier <filename>/etc/locale.conf</filename> ci-dessous défini certaines
variables d'environnement nécessaires pour la prise en charge native des
langues. Les configurer a pour résultat&nbsp;:</para>

  <itemizedlist>
    <listitem>
      <para>La sortie des programmes est traduite dans votre langue maternelle</para>
    </listitem>
    <listitem>
      <para>Le classement correct des caractères en lettres, chiffres et autres
classes. Cela est nécessaire pour <command>bash</command> pour accepter
correctement les caractères non-ASCII pour les paramètres linguistiques non
anglais</para>
    </listitem>
    <listitem>
      <para>Le classement alphabétique correct pour les autres pays</para>
    </listitem>
    <listitem>
      <para>La taille de papier par défaut appropriée</para>
    </listitem>
    <listitem>
      <para>Le formatage correct de la monnaie, du temps et de la date</para>
    </listitem>
  </itemizedlist>

  <para>Remplacez <replaceable>&lt;ll&gt;</replaceable> ci-dessous par les deux
lettres de la langue désirée (par exemple <quote>fr</quote>) et remplacez
<replaceable>&lt;CC&gt;</replaceable> par les deux lettres du pays approprié
(par exemple <quote>FR</quote>). <replaceable>&lt;charmap&gt;</replaceable>
doit être remplacé par la table de caractères classique pour le paramètre
linguistique choisi. On peut aussi ajouter des modificateurs facultatifs
comme <quote>@euro</quote>.</para>

  <para>La liste des paramètre régionaux pris en charge par Glibc peut être obtenue
en lançant la commande suivante&nbsp;:</para>

<screen role="nodump"><userinput>locale -a</userinput></screen>

  <para>Les tables de caractères peuvent aussi avoir certains alias, par exemple
<quote>ISO-8859-1</quote> est aussi référencé comme
<quote>iso8859-1</quote> et <quote>iso88591</quote>. Certaines applications
ne peuvent pas gérer les différents synonymes (il est par exemple requis que
<quote>UTF-8</quote> soit écrit <quote>UTF-8</quote> et pas
<quote>utf8</quote>), il est donc plus sur de choisir le nom classique pour
un paramètre linguistique particulier. Pour déterminer le nom classique,
lancez la commande suivante, où <replaceable>&lt;nom du paramètre
linguistique&gt;</replaceable> est la sortie donnée par <command>locale
-a</command> pour votre langue préférée (<quote>fr_FR.iso88591</quote> dans
notre exemple).</para>

<screen role="nodump"><userinput>LC_ALL=<replaceable>&lt;nom du paramètre linguistique&gt;</replaceable> locale charmap</userinput></screen>

  <para>Pour le paramètre <quote>fr_FR.iso885915</quote>, la commande va
renvoyer&nbsp;:</para>

<screen><computeroutput>ISO-8859-15</computeroutput></screen>

  <para>Cela résulte en un paramètre de régionalisation final de
<quote>fr_FR.ISO-8859-15</quote>. Il est important que le paramètre trouvé
en utilisant la syntaxe précédente soit testée avant d'être ajoutée aux
fichiers de démarrage de bash&nbsp;:</para>

<screen role="nodump"><userinput>LC_ALL=&lt;nom du paramètre linguistique&gt; locale language
LC_ALL=&lt;nom du paramètre linguistique&gt; locale charmap
LC_ALL=&lt;nom du paramètre linguistique&gt; locale int_curr_symbol
LC_ALL=&lt;nom du paramètre linguistique&gt; locale int_prefix</userinput></screen>

  <para>The above commands should print the language name, the character encoding
used by the locale, the local currency, and the prefix to dial before the
telephone number in order to get into the country. If any of the commands
above fail with a message similar to the one shown below, this means that
your locale was either not installed in Chapter&nbsp;8 or is not supported
by the default installation of Glibc.</para>

<screen><computeroutput>locale: Cannot set LC_* to default locale: No such file or directory</computeroutput></screen>

  <para>Si cela arrive, vous devez soit installer le paramètre régional désiré en
utilisant la commande <command>localedef</command>, ou en utilisant un autre
paramètre. Les instructions suivantes supposent qu'il n'y a pas de tels
message d'erreur de Glibc.</para>

  
  <!-- FIXME: the xlib example will become obsolete in the future.-->
<para>Certains paquets au-delà de LFS peuvent ne pas prendre en charge le
paramètre linguistique que vous avez choisi. Un exemple est la bibliothèque
X (partie du système X Window), qui renvoie les messages suivant si le
paramètre ou que le nom de jeu de caractères ne correspond pas exactement à
ses fichiers internes&nbsp;:</para>

<screen><computeroutput>Warning: locale not supported by Xlib, locale set to C</computeroutput></screen>

  <para>Dans plusieurs cas Xlib s'attend à ce que le jeu de caractère soit inscrit
en notation majuscule avec les tirets classiques. Par exemple
«&nbsp;ISO-8859-1&nbsp;» plutôt que «&nbsp;iso88591&nbsp;». Il est aussi
possible de trouver la spécification appropriée en retirant la partie
correspondant au jeu de caractères de la spécification du paramètre
régional. Cela peut être testé en lançant la commande <command>locale
charmap</command> des deux paramètres. Par exemple, il faudra changer
«&nbsp;de_DE.ISO-8859-15@euro&nbsp;» en «&nbsp;de_DE@euro&nbsp;» pour que ce
paramètre soit reconnu par Xlib.</para>

  <para>D'autres programmes ne vont aussi pas fonctionner correctement (mais ne vont
pas nécessairement afficher un message d'erreur) si le nom du paramètre
régional ne rencontre pas leurs attentes. Dans d'autres cas, rechercher
comment d'autres distributions Linux prennent en charge votre paramètre
régional peut fournir des informations utiles.</para>

  <para>Une fois que les bonnes configurations de paramètres linguistiques ont été
effectuées, créez le fichier <filename>/etc/locale.conf</filename>&nbsp;:</para>

<screen><userinput>cat &gt; /etc/locale.conf &lt;&lt; "EOF"
<literal>LANG=<replaceable>&lt;ll&gt;_&lt;CC&gt;.&lt;charmap&gt;&lt;@modifiers&gt;</replaceable></literal>
EOF</userinput></screen>

  <para>Notez que vous devez modifier  <filename>/etc/locale.conf</filename> avec
l'utilitaire systemd <command>localectl</command>. Pour utiliser
<command>localectl</command> avec l'exemple précédent, lancez&nbsp;:</para>

<screen role="nodump"><userinput>localectl set-locale LANG="<replaceable>&lt;ll&gt;_&lt;CC&gt;.&lt;charmap&gt;&lt;@modifiers&gt;</replaceable>"</userinput></screen>

  <para>Vous pouvez aussi spécifier d'autres variables d'environnement  comme
<envar>LANG</envar>, <envar>LC_CTYPE</envar>, <envar>LC_NUMERIC</envar> ou
n'importe quel autre varable de la sortie de <command>locale</command>. Un
exemple où <envar>LANG</envar> est définie à en_US.UTF-8 mais
<envar>LC_CTYPE</envar> est défini juste à en_US est&nbsp;:</para>

<screen role="nodump"><userinput>localectl set-locale LANG="en_US.UTF-8" LC_CTYPE="en_US"</userinput></screen>

  <note><para>Notez que la commande <command>localectl</command> ne peut-être lancée que
sur un système lancé avec systemd.</para></note>

  <para>Les paramètres <quote>C</quote> (défaut) et <quote>en_US</quote> (recommandé
pour les utilisateurs anglophones des États-Unis) sont
différents. <quote>C</quote> utilise le jeu de caractères US-ASCII 7-bit et
traite les octets avec le bit de point fort à 1 comme des caractères
invalides. C'est pourquoi, par exemple, la commande <command>ls</command>
les remplace par des points d'interrogation sous ce paramètre. En outre, les
messages contenant ces caractères envoyés avec Mutt ou Pine ne sont pas
conformes aux RFC (le jeu de caractères dans le mail sortant est indiqué
comme <quote>unknown 8-bit</quote>). Vous ne pouvez donc utiliser le
paramètre régional <quote>C</quote> que si vous êtes sûr que vous n'aurez
jamais besoins de caractère 8 bits.</para>



<!--
  <para>
UTF-8 based locales are not supported well by many programs.
  Work is in progress to document and, if possible, fix such problems, see
  <ulink url="&blfs-book;introduction/locale-issues.html"/>.</para>
-->
</sect1>
