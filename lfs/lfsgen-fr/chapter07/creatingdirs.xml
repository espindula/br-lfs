<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-tools-creatingdirs">
  <?dbhtml filename="creatingdirs.html"?>

  <title>Créer les répertoires</title>

  <para>Il est temps de créer la structure complète du système de fichiers LFS.</para>

  <para>Créez quelques répertoires de plus haut niveau qui ne font pas partie de
l'ensemble limité requis dans les chapitres précédents en lançant la
commande suivante&nbsp;:</para>

  <note><para>Certains des répertoires suivants ont déjà été créés plus tôt avec des
instructions explicites ou lors de l'installation de certains paquets. Ils
sont répétés ici pour être complet.</para></note>

<screen><userinput>mkdir -pv /{boot,home,mnt,opt,srv}</userinput></screen>

  <para>Créez l'ensemble de sous-répertoires requis sous la racine en lançant les
commandes suivantes&nbsp;:</para>

<screen><userinput>mkdir -pv /etc/{opt,sysconfig}
mkdir -pv /lib/firmware
mkdir -pv /media/{floppy,cdrom}
mkdir -pv /usr/{,local/}{include,src}
mkdir -pv /usr/local/{bin,lib,sbin}
mkdir -pv /usr/{,local/}share/{color,dict,doc,info,locale,man}
mkdir -pv /usr/{,local/}share/{misc,terminfo,zoneinfo}
mkdir -pv /usr/{,local/}share/man/man{1..8}
mkdir -pv /var/{cache,local,log,mail,opt,spool}
mkdir -pv /var/lib/{color,misc,locate}

ln -sfv /run /var/run
ln -sfv /run/lock /var/lock

install -dv -m 0750 /root
install -dv -m 1777 /tmp /var/tmp</userinput></screen>

  <para>Par défaut, les répertoires sont créés avec les droits 755, ce qui n'est pas
souhaitable pour tous les répertoires. Dans la commande ci-dessus, deux
modifications seront effectuées&mdash;une pour le répertoire principal de
<systemitem class="username">root</systemitem>, et une autre pour les
répertoires des fichiers temporaires.</para>

  <para>Le premier changement de droit nous assure que n'importe qui ne pourra pas
entrer dans le répertoire <filename
class="directory">/root</filename>&mdash;de façon identique à ce que ferait
un utilisateur pour son répertoire principal. Le deuxième changement assure
que tout utilisateur peut écrire dans les répertoires <filename
class="directory">/tmp</filename> et <filename
class="directory">/var/tmp</filename>, mais ne peut pas supprimer les
fichiers des autres utilisateurs. Cette dernière interdiction est due au
<quote>sticky bit</quote>, le bit (1) le plus haut dans le masque 1777.</para>

  <sect2>
    <title>Remarques à propos de la conformité FHS</title>

    <para>L'arborescence des répertoires est basée sur le standard FHS
<foreignphrase>Filesystem Hierarchy Standard</foreignphrase>, (disponible
sur <ulink url="https://refspecs.linuxfoundation.org/fhs.shtml"/>). Le FHS
stipule aussi l'existence de quelques répertoires comme <filename
class="directory">/usr/local/games</filename> et <filename
class="directory">/usr/share/games</filename>. Nous créons seulement les
répertoires nécessaires. Néanmoins, n'hésitez pas à créer ces répertoires.  </para>

  </sect2>

</sect1>
