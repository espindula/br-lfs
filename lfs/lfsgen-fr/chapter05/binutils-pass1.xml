<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-tools-binutils-pass1" role="wrap">
  <?dbhtml filename="binutils-pass1.html"?>

  <sect1info condition="script">
<productname>binutils-pass1</productname>
<productnumber>&binutils-version;</productnumber> <address>&binutils-url;</address></sect1info>

  <title>Binutils-&binutils-version; — Passe 1</title>

  <indexterm zone="ch-tools-binutils-pass1">
    <primary sortas="a-Binutils">Binutils</primary>
    <secondary>outils, passe 1</secondary>
  </indexterm>

  <sect2 role="package">
    <title/>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../chapter08/binutils.xml"
    xpointer="xpointer(/sect1/sect2[1]/para[1])"/>

    <segmentedlist>
      <segtitle>&buildtime;</segtitle>
      <segtitle>&diskspace;</segtitle>

      <seglistitem>
        <seg>&binutils-tmpp1-sbu;</seg>
        <seg>&binutils-tmpp1-du;</seg>
      </seglistitem>
    </segmentedlist>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Binutils croisé</title>

    <note><para>Revenez en arrière et relisez les remarques de la section <xref
linkend="ch-tools-generalinstructions"/>.  La compréhension des remarques
notées importantes vous évitera beaucoup de problèmes plus tard.</para></note>

    <para>Il est important que Binutils soit le premier paquet compilé parce que Glibc
et GCC réalisent différents tests sur l'éditeur de liens et l'assembleur
disponibles pour déterminer leurs propres fonctionnalités à activer.</para>

    <para>La documentation de Binutils recommande de construire Binutils dans un
répertoire de construction dédié&nbsp;:</para>

<screen><userinput remap="pre">mkdir -v build
cd build</userinput></screen>

    <note>
      <para>Pour que les valeurs SBU listées dans le reste du livre vous soient utiles,
mesurez le temps pris pour construire ce paquet, de la configuration jusqu'à
la première installation. Pour cela, englobez les commandes dans une
commande <command>time</command> de cette façon&nbsp;: <userinput>time {
../configure ... &amp;&amp; make &amp;&amp; make install; }</userinput>.</para>
    </note>

    <para>Maintenant, préparez la compilation de Binutils&nbsp;:</para>

    <screen><userinput remap="configure">../configure --prefix=$LFS/tools \
             --with-sysroot=$LFS \
             --target=$LFS_TGT   \
             --disable-nls       \
             --disable-werror</userinput></screen>

    <variablelist>
      <title>Voici la signification des options de configure&nbsp;:</title>

      <varlistentry>
        <term><parameter>--prefix=$LFS/tools</parameter></term>
        <listitem>
          <para>Ceci dit au script configure de se préparer à installer les programmes de
binutils dans le répertoire <filename
class="directory">$LFS/tools</filename>.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>--with-sysroot=$LFS</parameter></term>
        <listitem>
          <para>Pour de la compilation croisée, ceci dit au système de construction de
chercher dans $LFS les bibliothèques système cibles comme nécessaire.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><envar>--target=$LFS_TGT</envar></term>
        <listitem>
          <para>Vu que la description de la machine dans la variable <envar>LFS_TGT</envar>
est légèrement différente de la valeur renvoyée par le script
<command>config.guess</command>, ce paramètre va dire au script
<command>configure</command> d'ajuster le système de construction de
binutils pour la construction d'un éditeur de lien croisé.  </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>--disable-nls</parameter></term>
        <listitem>
          <para>Ceci désactive l'internationalisation (i18n), car ce n'est pas nécessaire
pour des outils temporaires.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>--disable-werror</parameter></term>
        <listitem>
          <para>Ceci empêche la compilation de s'arrêter lorsqu'interviennent des événements
comme des avertissements du compilateur du système hôte.</para>
        </listitem>
      </varlistentry>

    </variablelist>

    <para>Continuez avec la compilation du paquet&nbsp;:</para>

<screen><userinput remap="make">make</userinput></screen>

    <para>Installez le paquet&nbsp;:</para>

<screen><userinput remap="install">make install -j1</userinput></screen>

    <variablelist>
      <title>Voici la signification des options de make&nbsp;:</title>

      <varlistentry>
        <term><parameter>-j1</parameter></term>
        <listitem>
          <para>Un problème dans le système de construction peut causer l'échec de
l'installation avec <option>-j N</option> dans les
<envar>MAKEFLAGS</envar>. Remplacez la valeur pour éviter le problème.</para>
        </listitem>
      </varlistentry>
    </variablelist>

  </sect2>

  <sect2 role="content">
    <title/>

    <para>Les détails sur ce paquet sont disponibles dans <xref
linkend="contents-binutils" role="."/></para>

  </sect2>

</sect1>
