<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-system-vim" role="wrap">
  <?dbhtml filename="vim.html"?>

  <sect1info condition="script">
<productname>vim</productname> <productnumber>&vim-version;</productnumber>
<address>&vim-url;</address></sect1info>

  <title>Vim-&vim-version;</title>

  <indexterm zone="ch-system-vim">
    <primary sortas="a-Vim">Vim</primary>
  </indexterm>

  <sect2 role="package">
    <title/>

    <para>Le paquet Vim contient un puissant éditeur de texte.</para>

    <segmentedlist>
      <segtitle>&buildtime;</segtitle>
      <segtitle>&diskspace;</segtitle>

      <seglistitem>
        <seg>&vim-fin-sbu;</seg>
        <seg>&vim-fin-du;</seg>
      </seglistitem>
    </segmentedlist>

    <tip>
      <title>Alternatives à Vim</title>

      <para>Si vous préférez un autre éditeur&mdash;comme Emacs, Joe, ou
Nano&mdash;merci de vous référer à <ulink
url="&blfs-book;postlfs/editors.html"/> pour des instructions
d'installation.</para>
    </tip>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Vim</title>

    <para>Tout d'abord, modifiez l'emplacement par défaut du fichier de configuration
<filename>vimrc</filename> en <filename
class="directory">/etc</filename>&nbsp;:</para>

<screen><userinput remap="pre">echo '#define SYS_VIMRC_FILE "/etc/vimrc"' &gt;&gt; src/feature.h</userinput></screen>

    <para>Préparez la compilation de Vim&nbsp;:</para>

<screen><userinput remap="configure">./configure --prefix=/usr</userinput></screen>

    <para>Compilez le paquet&nbsp;:</para>

<screen><userinput remap="make">make</userinput></screen>

    <para>Pour préparer les tests, assurez-vous que l'utilisateur <systemitem
class="username">tester</systemitem> puisse écrire dans l'arborescence des
sources&nbsp;:</para>

<screen><userinput remap="test">chown -Rv tester .</userinput></screen>

    <para>Maintenant lancez les tests en tant qu'utilisateur <systemitem
class="username">tester</systemitem>&nbsp;:</para>

<screen><userinput remap="test">su tester -c "LANG=en_US.UTF-8 make -j1 test" &amp;> vim-test.log</userinput></screen>

    <para>La suite de tests affiche à l'écran beaucoup de caractères binaires. Ils
peuvent causer des soucis avec les paramètres de votre terminal actuel. Le
problème peut se résoudre en redirigeant la sortie vers un journal de traces
comme montré ci-dessus. Un test réussi donnera les mots «&nbsp;ALL
DONE&nbsp;» à la fin.</para>

    <para>Installez le paquet&nbsp;:</para>

<screen><userinput remap="install">make install</userinput></screen>

    <para>Beaucoup d'utilisateurs sont habitués à utiliser <command>vi</command> au
lieu de <command>vim</command>. Pour permettre l'exécution de
<command>vim</command> quand les utilisateurs saisissent habituellement
<command>vi</command>, créez un lien symbolique vers les binaires et vers
les pages de man dans les langues fournies&nbsp;:</para>

<screen><userinput remap="install">ln -sv vim /usr/bin/vi
for L in  /usr/share/man/{,*/}man1/vim.1; do
    ln -sv vim.1 $(dirname $L)/vi.1
done</userinput></screen>

    <para>Par défaut, la documentation de Vim s'installe dans <filename
class="directory">/usr/share/vim</filename>. Le lien symbolique suivant
permet d'accéder à la documentation via <filename
class="directory">/usr/share/doc/vim-&vim-version;</filename>, en cohérence
avec l'emplacement de la documentation d'autres paquets&nbsp;:</para>

<screen><userinput remap="install">ln -sv ../&vim-docdir;/doc /usr/share/doc/vim-&vim-version;</userinput></screen>

    <para>Si vous allez installer le système de fenêtrage X sur votre système LFS, il
pourrait être nécessaire de recompiler Vim après avoir installé X. Vim
fournit une version graphique de l'éditeur qui requiert X et quelques autres
bibliothèques pour s'installer. Pour plus d'informations sur ce processus,
référez-vous à la documentation de Vim et à la page d'installation de Vim
dans le livre BLFS sur <ulink url="&blfs-book;postlfs/vim.html"/>.</para>

  </sect2>

  <sect2 id="conf-vim" role="configuration">
    <title>Configuration de Vim</title>

    <indexterm zone="conf-vim">
      <primary sortas="e-/etc/vimrc">/etc/vimrc</primary>
    </indexterm>

    <para>Par défaut, <command>vim</command> est lancé en mode compatible vi. Ceci
pourrait être nouveau pour les personnes qui ont utilisé d'autres éditeurs
dans le passé. Le paramètre <quote>nocompatible</quote> est inclus
ci-dessous pour surligner le fait qu'un nouveau comportement est en cours
d'utilisation. Il rappelle aussi à ceux qui voudraient le changer en mode
<quote>compatible</quote> qu'il devrait être le premier paramètre dans le
fichier de configuration. Ceci est nécessaire car il modifie d'autres
paramètres et la surcharge doit survenir après ce paramètre. Créez un
fichier de configuration <command>vim</command> par défaut en lançant ce qui
suit&nbsp;:</para>

<screen><userinput>cat &gt; /etc/vimrc &lt;&lt; "EOF"
<literal>" Begin /etc/vimrc

" Ensure defaults are set before customizing settings, not after
source $VIMRUNTIME/defaults.vim
let skip_defaults_vim=1 

set nocompatible
set backspace=2
set mouse=
syntax on
if (&amp;term == "xterm") || (&amp;term == "putty")
  set background=dark
endif

" End /etc/vimrc</literal>
EOF</userinput></screen>

    <para>L'option <parameter>set nocompatible</parameter> change le comportement de
<command>vim</command> d'une façon plus utile (par défaut) que le
comportement compatible vi. Supprimez <quote>no</quote> pour conserver
l'ancien comportement de <command>vi</command>. Le paramètre <parameter>set
backspace=2</parameter> permet le retour en arrière après des sauts de
ligne, l'indentation automatique et le début de l'insertion. L'instruction
<parameter>syntax on</parameter> active la coloration syntaxique. Le
paramètre <parameter>set mouse=r</parameter> permet de coller du texte avec
la souris correctement dans un environnement chroot ou au travers d'une
connexion à distance. Enfin, l'instruction <emphasis>if</emphasis> avec
<parameter>set background=dark</parameter> corrige l'estimation de
<command>vim</command> concernant la couleur du fond de certains émulateurs
de terminaux. Ceci permet d'utiliser de meilleures gammes de couleurs pour
la coloration syntaxique, notamment avec les fonds noirs de ces programmes.</para>

    <para>La documentation pour les autres options disponibles peut être obtenue en
lançant la commande suivante&nbsp;:</para>

<screen role="nodump"><userinput>vim -c ':options'</userinput></screen>

    <note>
      <para>Par défaut, Vim installe uniques les fichiers de dictionnaires pour
l'anglais. Pour installer des fichiers de dictionnaires pour votre langue,
téléchargez les fichiers <filename>*.spl</filename> et éventuellement, les
<filename>*.sug</filename> pour votre langue et votre encodage sur <ulink
url="ftp://ftp.vim.org/pub/vim/runtime/spell/"/> et enregistrez-les dans
<filename class='directory'>/usr/share/&vim-docdir;/spell/</filename>.</para>

      <para>Pour utiliser ces fichiers dictionnaire, il faut une configuration dans
<filename>/etc/vimrc</filename>, comme&nbsp;:</para>

<screen><literal>set spelllang=en,ru
set spell</literal></screen>

      <para>Pour plus d'informations, voir le fichier README approprié situé sur la page
ci-dessus.</para>
    </note>

  </sect2>

  <sect2 id="contents-vim" role="content">
    <title>Contenu de Vim</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Répertoire installé</segtitle>

      <seglistitem>
       <seg> ex (lien vers vim), rview (lien vers vim), rvim (lien vers vim), vi (lien
vers vim), view (lien vers vim), vim, vimdiff (lien vers vim), vimtutor, et
xxd</seg>
        <seg>/usr/share/vim</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="ex">
        <term><command>ex</command></term>
        <listitem>
          <para>Démarre <command>vim</command> en mode ex</para>
          <indexterm zone="ch-system-vim ex">
            <primary sortas="b-ex">ex</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="rview">
        <term><command>rview</command></term>
        <listitem>
          <para>Une version restreinte de <command>view</command>&nbsp;: aucune commande
shell ne peut être lancée et <command>view</command> ne peut pas être
suspendu</para>
          <indexterm zone="ch-system-vim rview">
            <primary sortas="b-rview">rview</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="rvim">
        <term><command>rvim</command></term>
        <listitem>
          <para>Une version restreinte de <command>vim</command>&nbsp;: aucune commande
shell ne peut être lancée et <command>vim</command> ne peut pas être
suspendu</para>
          <indexterm zone="ch-system-vim rvim">
            <primary sortas="b-rvim">rvim</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="vi">
        <term><command>vi</command></term>
        <listitem>
          <para>Lien vers <command>vim</command></para>
          <indexterm zone="ch-system-vim vi">
            <primary sortas="b-vi">vi</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="view">
        <term><command>view</command></term>
        <listitem>
          <para>Démarre <command>vim</command> en mode lecture seule</para>
          <indexterm zone="ch-system-vim view">
            <primary sortas="b-view">view</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="vim">
        <term><command>vim</command></term>
        <listitem>
          <para>L'éditeur</para>
          <indexterm zone="ch-system-vim vim">
            <primary sortas="b-vim">vim</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="vimdiff">
        <term><command>vimdiff</command></term>
        <listitem>
          <para>Édite deux ou trois versions d'un fichier avec <command>vim</command> et
montre les différences</para>
          <indexterm zone="ch-system-vim vimdiff">
            <primary sortas="b-vimdiff">vimdiff</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="vimtutor">
        <term><command>vimtutor</command></term>
        <listitem>
          <para>Vous apprend les touches et les commandes basiques de <command>vim</command></para>
          <indexterm zone="ch-system-vim vimtutor">
            <primary sortas="b-vimtutor">vimtutor</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="xxd">
        <term><command>xxd</command></term>
        <listitem>
          <para>Fait un affichage hexa du fichier donné. Il peut aussi faire l'inverse pour
une correspondance binaire</para>
          <indexterm zone="ch-system-vim xxd">
            <primary sortas="b-xxd">xxd</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
