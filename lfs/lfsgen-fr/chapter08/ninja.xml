<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-system-ninja" role="wrap">
  <?dbhtml filename="ninja.html"?>

  <sect1info condition="script">
<productname>ninja</productname>
<productnumber>&ninja-version;</productnumber> <address>&ninja-url;</address></sect1info>

  <title>Ninja-&ninja-version;</title>

  <indexterm zone="ch-system-ninja">
    <primary sortas="a-Ninja">Ninja</primary>
  </indexterm>

  <sect2 role="package">
    <title/>

    <para>Ninja est un petit système de construction qui met l'accent sur la rapidité.</para>

    <segmentedlist>
      <segtitle>&buildtime;</segtitle>
      <segtitle>&diskspace;</segtitle>

      <seglistitem>
        <seg>&ninja-fin-sbu;</seg>
        <seg>&ninja-fin-du;</seg>
      </seglistitem>
    </segmentedlist>

    <tip revision="sysv">
      <para>Cette section n'est pas strictement requise pour LFS si vous n'utilisez pas
systemd. Cependant, ninja associé à meson est un système de costruction
puissant, qui est utilisé de plus en plus souvent. Il est requis par
plusierus paquets dasn <ulink url="&blfs-book;">le livre BLFS</ulink>.</para>
    </tip>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Ninja</title>

    <para>Lorsque lancé, ninja lance un nombre maximum de processus en parallèle. Par
défaut c'est le nombre de cœurs du système plus deux. Dans certains cas,
cela peut surchauffer le CPU ou épuiser la mémoire. S'il est lancé depuis la
ligne de commande, passer le paramètre -jN limitera le nombre de processus
en parallèle, mais certains paquets incluent l'exécution de ninja et ne
passent pas de paramètre -j.</para>

    <para>Utiliser la procédure <emphasis>facultative</emphasis> ci-dessous permet à
l'utilisateur de limiter le nombre de processus en parallèle via une
variable d'environnement, NINJAJOBS. <emphasis role="bold">Par
exemple</emphasis> initialiser&nbsp;: <screen>export NINJAJOBS=4</screen>limitera ninja à 4 processus en parallèle.</para>

    <para>Si vous le souhaitez, ajoutez la possibilité d'utiliser la variable
d'environnement NINJAJOBS en lançant&nbsp;:</para>

<screen><userinput remap="pre">sed -i '/int Guess/a \
  int   j = 0;\
  char* jobs = getenv( "NINJAJOBS" );\
  if ( jobs != NULL ) j = atoi( jobs );\
  if ( j > 0 ) return j;\
' src/ninja.cc</userinput></screen>

    <para>Construisez Ninja avec&nbsp;:</para>

<screen><userinput remap="configure">python3 configure.py --bootstrap</userinput></screen>

    <variablelist>
      <title>Voici la signification des options de construction&nbsp;:</title>

      <varlistentry>
        <term><parameter>--bootstrap</parameter></term>
        <listitem>
          <para>Ce paramètre force ninja à se reconstruire pour le système actuel.</para>
        </listitem>
      </varlistentry>

    </variablelist>

    <para>Pour tester les résultats, lancez&nbsp;:</para>

<screen><userinput remap="test">./ninja ninja_test
./ninja_test --gtest_filter=-SubprocessTest.SetWithLots</userinput></screen>

    <para>Installez le paquet&nbsp;:</para>

<screen><userinput remap="install">install -vm755 ninja /usr/bin/
install -vDm644 misc/bash-completion /usr/share/bash-completion/completions/ninja
install -vDm644 misc/zsh-completion  /usr/share/zsh/site-functions/_ninja</userinput></screen>

  </sect2>

  <sect2 id="contents-ninja" role="content">
    <title>Contenu de Ninja</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>

      <seglistitem>
        <seg>ninja</seg>
      </seglistitem>
    </segmentedlist>
    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="ninja">
        <term><command>ninja</command></term>
        <listitem>
          <para>est le système de construction Ninja</para>
          <indexterm zone="ch-system-ninja ninja">
            <primary sortas="b-ninja">ninja</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>

