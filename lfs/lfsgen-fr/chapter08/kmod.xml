<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-system-kmod" role="wrap">
  <?dbhtml filename="kmod.html"?>

  <sect1info condition="script">
<productname>kmod</productname>
<productnumber>&kmod-version;</productnumber> <address>&kmod-url;</address></sect1info>

  <title>Kmod-&kmod-version;</title>

  <indexterm zone="ch-system-kmod">
    <primary sortas="a-Kmod">Kmod</primary>
  </indexterm>

  <sect2 role="package">
    <title/>

    <para>Le paquet Kmod contient des bibliothèques et des outils pour charger des
modules du noyau</para>

    <segmentedlist>
      <segtitle>&buildtime;</segtitle>
      <segtitle>&diskspace;</segtitle>

      <seglistitem>
        <seg>&kmod-fin-sbu;</seg>
        <seg>&kmod-fin-du;</seg>
      </seglistitem>
    </segmentedlist>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Kmod</title>

    <para>Préparez la compilation de Kmod&nbsp;:</para>

<screen><userinput remap="configure">./configure --prefix=/usr          \
            --sysconfdir=/etc      \
            --with-xz              \
            --with-zstd            \
            --with-zlib</userinput></screen>

    <variablelist>
      <title>Voici la signification des options de configure&nbsp;:</title>

      <varlistentry>
        <term><parameter>--with-xz, --with-zlib, --with-zstd</parameter></term>
        <listitem>
          <para>Ces options permettent à Kmod de gérer des modules noyau compressés.</para>
        </listitem>
      </varlistentry>

    </variablelist>

    <para>Compilez le paquet&nbsp;:</para>

<screen><userinput remap="make">make</userinput></screen>

    <para>Ce paquet ne contient pas de suite de tests qui peut être lancée dans
l’environnement chroot de LFS. Git est requis et plusieurs tests ne vont pas
fonctionner en dehors d'un répertoire git. </para>

    <para>Installez le paquet et créez des liens symboliques à des fins de
compatibilité avec Module-Init-Tools (le paquet qui gérait auparavant les
modules du noyau Linux)&nbsp;:</para>

<screen><userinput remap="install">make install

for target in depmod insmod lsmod modinfo modprobe rmmod; do
  ln -sfv ../bin/kmod /sbin/$target
done

ln -sfv kmod /bin/lsmod</userinput></screen>

  </sect2>

  <sect2 id="contents-kmod" role="content">
    <title>Contenu de Kmod</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèque installée</segtitle>

      <seglistitem>
        <seg>depmod (lien vers kmod), insmod (lien vers kmod), kmod, kmod-nolib, lsmod
(lien vers kmod), modinfo (liien vers kmod), modprobe (lien vers kmod), et
rmmod (liien vers kmod)</seg>
        <seg>libkmod.so</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="depmod">
        <term><command>depmod</command></term>
        <listitem>
          <para>Crée un fichier de dépendances basé sur les symboles qu'il trouve dans
l'ensemble de modules existant&nbsp;; ce fichier de dépendance est utilisé
par <command>modprobe</command> pour charger automatiquement les modules
requis</para>
          <indexterm zone="ch-system-kmod depmod">
            <primary sortas="b-depmod">depmod</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="insmod">
        <term><command>insmod</command></term>
        <listitem>
          <para>Installe un module chargeable dans le noyau en cours d'exécution</para>
          <indexterm zone="ch-system-kmod insmod">
            <primary sortas="b-insmod">insmod</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="kmod">
        <term><command>kmod</command></term>
        <listitem>
          <para>Charge et décharge des modules du noyau</para>
          <indexterm zone="ch-system-kmod kmod">
            <primary sortas="b-kmod">kmod</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="lsmod">
        <term><command>lsmod</command></term>
        <listitem>
          <para>Cette bibliothèque est utilisée par d'autres programmes pour charger et
décharger des modules noyau</para>
          <indexterm zone="ch-system-kmod lsmod">
            <primary sortas="b-lsmod">libkmod</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="modinfo">
        <term><command>lsmod</command></term>
        <listitem>
          <para>Liste les modules actuellement chargés</para>
          <indexterm zone="ch-system-kmod modinfo">
            <primary sortas="b-modinfo">lsmod</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="modprobe">
        <term><command>modinfo</command></term>
        <listitem>
          <para>Utilise un fichier de dépendance, créé par <command>depmod</command>, pour
charger automatiquement les modules adéquats</para>
          <indexterm zone="ch-system-kmod modprobe">
            <primary sortas="b-modprobe">modinfo</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="rmmod">
        <term><command>modprobe</command></term>
        <listitem>
          <para>Décharge les modules du noyau en cours d'exécution.</para>
          <indexterm zone="ch-system-kmod rmmod">
            <primary sortas="b-rmmod">modprobe</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libkmod">
        <term><filename class="libraryfile">libkmod</filename></term>
        <listitem>
          <para>Décharge des modules du noyau en cours d'exécution</para>
          <indexterm zone="ch-system-kmod">
            <primary sortas="c-libkmod">rmmod</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>

