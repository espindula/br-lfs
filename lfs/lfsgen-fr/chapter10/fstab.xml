<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-bootable-fstab">
  <?dbhtml filename="fstab.html"?>

  <title>Créer le fichier /etc/fstab</title>

  <indexterm zone="ch-bootable-fstab">
    <primary sortas="e-/etc/fstab">/etc/fstab</primary>
  </indexterm>

  <para>Le fichier <filename>/etc/fstab</filename> est utilisé par quelques
programmes pour déterminer les systèmes de fichiers à monter par défaut,
dans quel ordre, et lesquels doivent être vérifiés (recherche d'erreurs
d'intégrité) avant le montage.  Créez une nouvelle table des systèmes de
fichiers comme ceci&nbsp;:</para>

<screen revision="sysv"><userinput>cat &gt; /etc/fstab &lt;&lt; "EOF"
<literal># Begin /etc/fstab

# file system  mount-point  type     options             dump  fsck
#                                                              order

/dev/<replaceable>&lt;xxx&gt;</replaceable>     /            <replaceable>&lt;fff&gt;</replaceable>    defaults            1     1
/dev/<replaceable>&lt;yyy&gt;</replaceable>     swap         swap     pri=1               0     0
proc           /proc        proc     nosuid,noexec,nodev 0     0
sysfs          /sys         sysfs    nosuid,noexec,nodev 0     0
devpts         /dev/pts     devpts   gid=5,mode=620      0     0
tmpfs          /run         tmpfs    defaults            0     0
devtmpfs       /dev         devtmpfs mode=0755,nosuid    0     0

# End /etc/fstab</literal>
EOF</userinput></screen>

<screen revision="systemd"><userinput>cat &gt; /etc/fstab &lt;&lt; "EOF"
<literal># Begin /etc/fstab

# file system  mount-point  type     options             dump  fsck
#                                                              order

/dev/<replaceable>&lt;xxx&gt;</replaceable>     /            <replaceable>&lt;fff&gt;</replaceable>    defaults            1     1
/dev/<replaceable>&lt;yyy&gt;</replaceable>     swap         swap     pri=1               0     0

# End /etc/fstab</literal>
EOF</userinput></screen>

  <para>Remplacez <replaceable>&lt;xxx&gt;</replaceable>,
<replaceable>&lt;yyy&gt;</replaceable> et
<replaceable>&lt;fff&gt;</replaceable> par les valeurs appropriées pour
votre système, par exemple <filename class="partition">sda2</filename>,
<filename class="partition">sda5</filename> et <systemitem
class="filesystem">ext4</systemitem>.  Pour tous les détails sur les six
champs de cette table, voyez <command>man 5 fstab</command>.</para>

  <para>Les systèmes de fichiers ayant pour origine MS-DOS ou Windows (c-à-d. vfat,
ntfs, smbfs, cifs, iso9660, udf) ont besoin d'une option spéciale, utf8,
pour que les caractères non-ascii dans les noms de fichiers soient
interprétés correctement. Pour les paramètres linguistiques non-utf-8, la
valeur de <option>iocharset</option> devrait être la même que le jeu de
caractères de votre locale, ajustée de telle sorte que le noyau la
comprenne. Cela fonctionne si la définition du codage adéquat (que vous
trouverez sous File systems -&gt; Native Language Support lors de la
configuration du noyau) a été compilée en dur dans le noyau ou en
module. Cependant, si le jeu de caractères des paramètres linguistiques est
UTF-8, l'option correspondante <option>iocharset=utf8</option> rendrait le
système de fichier sensible à la casse. Pour corriger cela, utilisez
l'option spéciale <option>utf8</option> au lieu de
<option>iocharset=utf8</option> pour les paramètres linguistiques
UTF-8. L'option <quote>codepage</quote> est aussi nécessaire aux systèmes de
fichiers vfat et smbfs.  Elle devrait être paramétrée pour correspondre à la
page de code utilisée sous MS-DOS dans votre pays. Par exemple, pour monter
des lecteurs flash USB, un utilisateur ru_RU.KOI8-R aurait besoin de ce qui
suit dans la partie des options de sa ligne de montage dans
<filename>/etc/fstab</filename>&nbsp;:</para>

<screen><literal>noauto,user,quiet,showexec,codepage=866,iocharset=koi8r</literal></screen>

  <para>Le fragment d'options correspondantes pour les utilisateurs ru_RU.UTF-8
est&nbsp;:</para>

<screen><literal>noauto,user,quiet,showexec,codepage=866,utf8</literal></screen>

  <para>Remarquez que l'utilisation de <option>iocharset</option> se fait par défaut
pour <literal>iso8859-1</literal> (ce qui laisse le système de fichiers
insensible à la casse) et l'option <option>utf8</option> dit au noyau de
convertir les noms de fichiers en UTF-8 pour qu'ils puissent être
interprétés dans les paramètres linguistiques UTF-8.</para>

  

  <!--note>

    <para>In the latter case, the kernel emits the following message:</para>

<screen><computeroutput>FAT: utf8 is not a recommended IO charset for FAT filesystems,
    filesystem will be case sensitive!</computeroutput></screen>

    <para>This negative recommendation should be ignored, since all other values
    of the <quote>iocharset</quote> option result in wrong display of filenames in
    UTF-8 locales.</para>
  </note-->
<para>Il est aussi possible de spécifier les valeurs de page de code et de codage
entrée/sortie (iocharset) par défaut pour certains systèmes de fichiers
pendant la configuration du noyau. Les paramètres pertinents sont nommés
<quote>Default NLS Option</quote> (<option>CONFIG_NLS_DEFAULT)</option>,
<quote>Default Remote NLS Option</quote>
(<option>CONFIG_SMB_NLS_DEFAULT</option>), <quote>Default codepage for
FAT</quote> (<option>CONFIG_FAT_DEFAULT_CODEPAGE</option>) et <quote>Default
iocharset for FAT</quote> (<option>CONFIG_FAT_DEFAULT_IOCHARSET</option>).
Il n'y a aucun moyen de spécifier ces paramètres pour les systèmes de
fichiers ntfs au moment de la compilation du noyau.</para>

  <para>Il est possible de rendre le système de fichiers ext3 résistant aux coupures
de courant pour certains types de disques durs.  Pour cela, ajoutez l'option
de montage <option>barrier=1</option> à l'entrée appropriée dans
<filename>/etc/fstab</filename>. Pour vérifier si le périphérique prend en
charge cette option, lancez <ulink
url="&blfs-book;general/hdparm.html">hdparm</ulink> sur le périphérique où
elle s'appliquera. Par exemple, si&nbsp;:</para>

<screen role="nodump"><userinput>hdparm -I /dev/sda | grep NCQ</userinput></screen>

  <para>ne retourne pas une sortie non vide, l'option est prise en charge.</para>

  <para>Remarque&nbsp;: Les partitions basées sur <foreignphrase>Logical Volume
Management</foreignphrase> (LVM)  ne peuvent pas utiliser l'option
<option>barrier</option>.</para>

</sect1>
