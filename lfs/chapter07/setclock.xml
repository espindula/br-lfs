<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>
<sect1 id="ch-scripts-setclock">
<title>Configurer le script setclock</title>
<?dbhtml filename="setclock.html"?>

<indexterm zone="ch-scripts-setclock">
<primary sortas="d-setclock">setclock</primary>
<secondary>configurer</secondary></indexterm>

<para>Le script <command>setclock</command> lit le temps sur l'horloge
matérielle, aussi connu sous le nom d'horloge BIOS or CMOS (Complementary
Metal Oxide Semiconductor). Si l'horloge matérielle est configurée en UTC,
le script convertira le temps de l'horloge matérielle en temps local en
utilisant le fichier <filename>/etc/localtime</filename> (indiquant au programme
<command>hwclock</command> le fuseau horaire où se situe l'utilisateur. Il
n'existe pas de moyens de détecter si l'horloge matérielle est configurée en
temps UTC, donc elle doit être configurée manuellement.</para>

<para>If you cannot remember whether or not the hardware
clock is set to UTC time, find out by running
the <userinput>hwclock --localtime --show</userinput> command. This will tell
what the current time is according to the hardware clock. If this time
matches whatever your watch says, then the hardware clock is set to
local time. If the output from <command>hwclock</command> is not local
time, chances are it is set to UTC time. Verify this by adding or
subtracting the proper amount of hours for the timezone to this
<command>hwclock</command> time. For example, if you live in the MST
timezone, which is also known as GMT -0700, add seven hours to the local
time. Then, account for Daylight Savings Time, which requires
subtracting an hour (or only add six in the first place) during the summer
months.</para>

<para>Modifiez la valeur de la variable <envar>UTC</envar> ci-dessous par une
valeur <parameter>0</parameter> (zéro) si l'horloge matérielle n'est
<emphasis>pas</emphasis> configurée en temps UTC.</para>

<para>Créez un nouveau fichier <filename>/etc/sysconfig/clock</filename> en
lançant ce qui suit&nbsp;:</para>

<screen><userinput>cat &gt; /etc/sysconfig/clock &lt;&lt; "EOF"
<literal># Début /etc/sysconfig/clock

UTC=1

# Fin /etc/sysconfig/clock</literal>
EOF</userinput></screen>

<para>Une bonne astuce expliquant comment gérer l'horloge sur LFS est disponible
sur <ulink url="&hints-root;time.txt"/>. Il explique certains concepts comme les
fuseaux horaires, UTC et la variable d'environnement <envar>TZ</envar>.</para>

</sect1>

