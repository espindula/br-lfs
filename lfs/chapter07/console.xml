<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-scripts-console">
  <?dbhtml filename="console.html"?>

  <title>Configurer la console Linux</title>

  <indexterm zone="ch-scripts-console">
    <primary sortas="d-console">console</primary>
    <secondary>configuration</secondary>
  </indexterm>

  <indexterm zone="ch-scripts-console">
    <primary sortas="d-consolelog">consolelog</primary>
    <secondary>configuration</secondary>
  </indexterm>

  <para>Cette section discute de la configuration du script de démarrage
  <command>console</command>, initialisant le plan de codage du clavier
  et la police de la console. Si des caractères non ASCII (par exemple,
  la livre anglaise et le caractère Euro) ne seront pas utilisés et que
  le clavier est un clavier US, passez cette section. Sans le fichier de
  configuration, le script de démarrage <command>console</command> ne
  fera rien.</para>

  <para>Les scripts <command>console</command>  et
  <command>consolelog</command> lisent le fichier
  <filename>/etc/sysconfig/console</filename> pour des informations de
  configuration. Il décide du plan de codage et de la police de la
  console à utiliser. Différents guides pratiques spécifiques aux
  langues peuvent aussi être d'une grande aide (voir

  <ulink url="http://www.tldp.org/HOWTO/HOWTO-INDEX/other-lang.html"/>.
  Si vous avez toujours des doutes, jetez un &oelig;il dans le
  répertoire

  <filename class="directory">/lib/kbd</filename> pour des plans de
  codage valides et des polices pour écran. Lisez les pages man de
  <filename>loadkeys(1)</filename> et de <filename>setfont(8)</filename>
  pour déterminer les bons arguments pour ces programmes.</para>

  <para>Le fichier <filename>/etc/sysconfig/console</filename> devrait
  contenir des lignes sous la forme&nbsp;: VARIABLE="valeur". Les
  variables suivantes sont reconnues&nbsp;:</para>

  <variablelist>

    <varlistentry>
      <term>LOGLEVEL</term>
      <listitem>
        <para>Cette variable spécifie le niveau de traçage pour les messages du 
        noyau envoyés à la console, selon le paramétrage par 
        <command>dmesg</command>. Les niveaux valides sont de « 1 » (aucun 
        message) à « 8 ». Le niveau par défaut est « 7 ».</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>KEYMAP</term>
      <listitem>
        <para>Cette variable spécifie les arguments du programme
        <command>loadkeys</command>, en général le nom du plan de codage à
        charger, comme <quote>es</quote>. Si cette variable n'est pas réglée,
        le script de démarrage ne lancera pas le programme <command>loadkeys</command>,
	et le plan de codage du noyau par défaut sera utilisé.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>KEYMAP_CORRECTIONS</term>
      <listitem>
        <para>Cette variable (rarement utilisée) spécifie les arguments du
        second appel au programme <command>loadkeys</command>. C'est
        utile si le plan de codage stocké n'est pas totalement satisfaisant
        et que vous devez faire un petit ajustement. Par exemple, pour inclure le
					signe Euro dans un plan de codage qui ne l'a normalement pas, réglez
					cette variable à <quote>euro2</quote>.</para>
				</listitem>
			</varlistentry>

			<varlistentry>
				<term>FONT</term>
				<listitem>
					<para>Cette variable spécifie les arguments du programme
					<command>setfont</command>. En principe, ceci inclut le nom de la police,
					<quote>-m</quote> et le nom du plan de caractères de l'application
        à charger. Par exemple, pour charger la police <quote>lat1-16</quote>
        avec le plan de caractère de l'application <quote>8859-1</quote>, (comme
        il convient aux Etats-Unis),  <!-- because of the copyright sign -->
	réglez cette variable à <quote>lat1-16 -m 8859-1</quote>.
        Si cette variable n'est pas réglée, le script de démarrage ne lancera
        pas le programme <command>setfont</command>, et la police VGA par 
        défaut sera utilisée avec le plan de caractère de l'application par
        défaut.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>UNICODE</term>
      <listitem>
        <para>Règle cette variable à <quote>1</quote>, <quote>yes</quote> ou
	<quote>true</quote> afin de mettre la console en mode UTF-8. Ceci
        est utile dans les locales basées sur UTF-8 et sinon difficiles.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>LEGACY_CHARSET</term>
      <listitem>
        <para>Pour beaucoup de types de clavier, il n'y a pas de plan de codage 
        pour le stock Unicode dans le paquet Kbd. Le script de démarrage

        <command>console</command> convertira un plan de codage disponible en
        UTF-8 au vol si cette variable est réglée à l'encodage du plan de codage
	non UTF-8 disponible.</para>
      </listitem>
    </varlistentry>

  </variablelist>

  <para>Quelques exemples&nbsp;:</para>

  <itemizedlist>

    <listitem>
      <para>Pour une initialisation non Unicode, en général seules les
      variables KEYMAP et FONT sont nécessaires. Par exemple, pour 
      l'initialisation en polonais, on utiliserait&nbsp;:</para>

<screen role="nodump"><userinput>cat &gt; /etc/sysconfig/console &lt;&lt; "EOF"
<literal># Begin /etc/sysconfig/console

KEYMAP="pl2"
FONT="lat2a-16 -m 8859-2"

# End /etc/sysconfig/console</literal>
EOF</userinput></screen>
    </listitem>

    <listitem>
      <para>Comme mentioné ci-dessus, il est parfois nécessaire d'ajuster 
      légèrement un plan de codage stocké. L'exemple suivant ajoute le symbole
      Euro au plan de codage allemand&nbsp;:</para>

<screen role="nodump"><userinput>cat &gt; /etc/sysconfig/console &lt;&lt; "EOF"
<literal># Begin /etc/sysconfig/console

KEYMAP="de-latin1"
KEYMAP_CORRECTIONS="euro2"
FONT="lat0-16 -m 8859-15"

# End /etc/sysconfig/console</literal>
EOF</userinput></screen>
    </listitem>

    <listitem>
      <para>Ce qui suit est un exemple avec l'Unicode activé pour le bulgare, où
      un plan de codage UTF-8 stocké existe&nbsp;:</para>

<screen role="nodump"><userinput>cat &gt; /etc/sysconfig/console &lt;&lt; "EOF"
<literal># Begin /etc/sysconfig/console

UNICODE="1"
KEYMAP="bg_bds-utf8"
FONT="LatArCyrHeb-16"

# End /etc/sysconfig/console</literal>
EOF</userinput></screen>
    </listitem>

    <listitem>
      <para>Du fait de l'utilisation d'une police 512-glyph LatArCyrHeb-16 dans
      l'exemple précédent, les couleurs brillantes ne sont plus disponibles 
      sur la console Linux à moins qu'un framebuffer soit utilisé. Si vous
      voulez avoir les couleurs brillantes sans framebuffer et que vous pouvez
     vivre sans caractère n'appartenant pas à votre langue, il est encore 
      possible d'utiliser une police 256-glyph spécifique à votre langue, 
      comme illustré ci-dessous&nbsp;:</para>

<screen role="nodump"><userinput>cat &gt; /etc/sysconfig/console &lt;&lt; "EOF"
<literal># Begin /etc/sysconfig/console

UNICODE="1"
KEYMAP="bg_bds-utf8"
FONT="cyr-sun16"

# End /etc/sysconfig/console</literal>
EOF</userinput></screen>
    </listitem>

    <listitem>
      <para>Il n'y a pas de plan de codage russe pour UTF-8 préfabriqué,
      donc il faut le produire en convertissant le plan de codage existant
      KOI8-R comme illustré ci-dessous&nbsp;:</para>

<screen role="nodump"><userinput>cat &gt; /etc/sysconfig/console &lt;&lt; "EOF"
<literal># Begin /etc/sysconfig/console

UNICODE="1"
KEYMAP="ru-ms"
LEGACY_CHARSET="koi8-r"
FONT="LatArCyrHeb-16"

# End /etc/sysconfig/console</literal>
EOF</userinput></screen>
    </listitem>

    <listitem>
      <para>Certains plans de codage ont des touches mortes (par exemple,
      les touches qui ne produisent pas un caractère en elles-mêmes, mais mettent
       un accent sur le caractère produit par la touche suivante) ou définissent
      des règles de comportement (comme&nbsp;: <quote>Appuyez sur Ctrl+. A E pour
      obtenir &AElig;</quote> dans le plan de codage par défaut).
      Linux-&linux-version; dans le mode clavier UTF-8 assume que les caractères
      accentués produit par des touches mortes ou de composition sont dans
      la série Latin-1 de Unicode, et il est impossible de changer cette
      suposition). Donc, les caractères accentués nécessaires, comme le Tchèque,
      ne peuvent être tapés sur la console Linux en mode UTF-8 (mais des fichiers
      contenant ces caractères peuvent être affichés correctement). La solution
      est soit d'éviter d'utiliser UTF-8, soit d'installer le X window system
      qui n'a pas cette limitation dans sa gestion de l'entrée.</para>
    </listitem>

    <listitem>
      <para>Pour le Chinois, le Japonais, le Coréen et certaines autres langues,
      la console Linux ne peut pas être configurée pour afficher les caractères
      nécessaires. Les utilisateurs qui ont besoin de telles langues devraient
      installer le X Window System, dont les polices couvrent la plage de 
      caractères nécessaire et qui a la bonne méthode d'entrée (par exemlle
      SCIM supporte une large variété de langues).</para>
    </listitem>

  </itemizedlist>

  <!-- Added because folks keep posting their console file with X questions
  to blfs-support list -->
  <note>
    <para>Le fichier <filename>/etc/sysconfig/console</filename> ne contrôle
     que la localisation de la console Linux en texte. Cela n'a rien à voir
     avec le bon paramétrage du type de clavier et des polices du terminal dans
    le X Window System, avec les sessions ssh ou une console en série. Dans de
    telles situations, les limitations mentionnées dans les deux derniers points
    de la liste ci-dessus ne s'appliquent pas.</para>
  </note>

</sect1>
