<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>
<sect1 id="ch-scripts-profile">
<title>Les fichiers de démarrage du shell Bash</title>
<?dbhtml filename="profile.html"?>

<indexterm zone="ch-scripts-profile"><primary sortas="e-/etc/profile">/etc/profile</primary></indexterm>

<para>Le programme shell <command>/bin/bash</command> (dénommé ci-après
<quote>le shell</quote>) utilise une collection de fichiers de démarrage pour
aider à la création d'un environnement d'exécution. Chaque fichier a une
utilisation spécifique et pourrait avoir des effets différents sur les
environnements de connexion et interactif. Les fichiers du répertoire <filename
class="directory">/etc</filename> fournissent un paramètrage global. Si un
fichier équivalent existe dans le répertoire personnel, il pourrait surcharger
les paramètrages globaux.</para>

<para>Un shell interactif de connexion est lancé après une connexion réussie,
en utilisant <command>/bin/login</command>, par la lecture du fichier
<filename>/etc/passwd</filename>. Un shell interactif sans connexion est lancé
en ligne de commande (c'est-à-dire
<prompt>[invite]$</prompt><command>/bin/bash</command>). Un shell non
interactif est habituellement présent quand un script shell est en cours
d'exécution. Il est non interactif parce qu'il traite un script et n'attend pas
une saisie de l'utilisateur entre les commandes.</para>

<para>Pour plus d'informations, voir <command>info bash</command> -
N&oelig;ud&nbsp;: Bash Startup Files and Interactive Shells.</para>

<para>Les fichiers <filename>/etc/profile</filename> et
<filename>~/.bash_profile</filename> sont lus quand le shell est appelé en tant
que shell interactif de connexion.</para>

<para>Un fichier <filename>/etc/profile</filename> de base, ci-dessous,
configure quelques variables d'environnement nécessaire au support des
langues natives. Les configurer proprement résulte en ce qui suit&nbsp;:</para>

<itemizedlist>
<listitem><para>La sortie des programmes traduite dans le langage
natif</para></listitem>
<listitem><para>Correction de la classification des caractères en lettres,
chiffres et autres classes. Ceci est nécessaire pour que Bash accepte
proprement les caractères non ASCII dans les lignes de commandes pour les
locales autres qu'anglais</para></listitem>
<listitem><para>L'ordre de tri alphabetique correct pour le pays
</para></listitem>
<listitem><para>Taille de papier par défaut appropriée</para></listitem>
<listitem><para>Bon formatage des valeurs monétaires, de l'heure et des
dates</para></listitem>
</itemizedlist>

<para>Ce script configure aussi la variable d'environnement
<envar>INPUTRC</envar> qui fait que <application>Bash</application> et
<application>Readline</application> utilisent le fichier
<filename>/etc/inputrc</filename> créé précédemment.</para>

<beginpage/>
<para>Remplacez <replaceable>[ll]</replaceable> ci-dessous avec le code à deux
lettres de la langue désirée (par exemple, <quote>en</quote>) et
<replaceable>[CC]</replaceable> avec le code à deux lettres du pays approprié
(par exemple, <quote>GB</quote>). Il pourrait aussi être nécessaire de
spécifier (et ceci est la forme réellement préférée) le codage des caractères
(par exemple <quote>iso8859-1</quote>) après un point (donc le résultat serait
<quote>en_GB.iso8859-1</quote>). Lancez la commande suivante pour plus
d'informations&nbsp;:</para>

<screen><userinput>man 3 setlocale</userinput></screen>

<para>La liste de toutes les locales supportées par Glibc peut être obtenue en
exécutant la commande suivante&nbsp;:</para>

<screen><userinput>locale -a</userinput></screen>

<para>Une fois que les bons paramètres de locale ont été déterminés, créez le
fichier <filename>/etc/profile</filename>&nbsp;:</para>

<screen><userinput>cat &gt; /etc/profile &lt;&lt; "EOF"
<literal># Début /etc/profile

export LC_ALL=<replaceable>[ll]</replaceable>_<replaceable>[CC]</replaceable>
export LANG=<replaceable>[ll]</replaceable>_<replaceable>[CC]</replaceable>
export INPUTRC=/etc/inputrc

# Fin /etc/profile</literal>
EOF</userinput></screen>

<note><para>Les locales <quote>C</quote> (par défaut) et <quote>en_US</quote>
(celle recommandée pour les utilisateurs de langue anglaise vivant aux
États-Unis) sont différentes.</para></note>

<para>Initialiser le plan de codage du clavier, la police de la console
et les variables d'environnement relatives à la locale sont les seules
étapes d'internationalisation nécessaires pour supporter les locales qui
utilisent habituellement les codages à un seul octet et la direction d'écriture
de la gauche vers la droite. Les cas plus complexes (incluant les locales
basées sur UTF-8) nécessitent des étapes et des correctifs supplémentaires
parce qu'un grand nombre d'applications ont tendance à ne pas fonctionner
corrctement dans de telles conditions. Ces étapes et correctifs ne sont pas
inclus dans le livre LFS et de telles locales ne sont pas supportées par LFS de
toute façon.</para>

</sect1>

