<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>
<sect1 id="ch-scripts-network">
<title>Configurer le script network</title>
<?dbhtml filename="network.html"?>

<indexterm zone="ch-scripts-network">
<primary sortas="d-network">réseau</primary>
<secondary>configuration</secondary></indexterm>

<para>Cette section n'est utile que si vous souhaitez configurer une
carte réseau.</para>

<para>Si vous ne possédez aucune carte réseau, vous pouvez ne pas créer
les fichiers de configuration en rapport avec celle-ci. Si c'est le
cas, vous devez supprimer les liens symboliques de <filename>network</filename>
de toutes les répertoires des niveaux d'exécution
(<filename class="directory">/etc/rc.d/rc*.d</filename>)</para>

<sect2>
<title>Configurer la passerelle par défaut</title>

<para>Si vous êtes sur un réseau, vous pouvez avoir besoin de configurer la
passerelle par défaut (un n&oelig;ud dans votre réseau qui fournit un accès 
à d'autres réseaux) de cette machine. Ceci se fait en ajoutant les bonnes
valeurs au fichier /etc/sysconfig/network, en lançant les commandes
suivantes&nbsp;:</para>

<screen><userinput>cat &gt;&gt; /etc/sysconfig/network &lt;&lt; "EOF"</userinput>
GATEWAY=192.168.1.2
GATEWAY_IF=eth0
<userinput>EOF</userinput></screen>

<para>Les valeurs pour GATEWAY et GATEWAY_IF doivent être changées pour
correspondre à la configuration de votre réseau. GATEWAY contient
l'adresse IP de la passerelle par défaut, et GATEWAY_IF contient
l'interface réseau par laquelle la passerelle par défaut peut être
jointe.</para>

</sect2>

<sect2>
<title>Créer les fichiers de configuration d'interfaces</title>

<para>Quelles interfaces doivent être activées ou non dépendent des
fichiers du répertoire /etc/sysconfig/network-devices. Ce répertoire
contient des fichiers de la forme ifconfig.xyz, où xyz est le nom
de l'interface (comme eth0 ou eth0:1).</para>

<para>Si vous décidez de renommer ou changer le répertoire
/etc/sysconfig/network-devices, assurez-vous de modifier le fichier
/etc/sysconfig/rc et de mettre à jour la variable network_devices en
lui indiquant le nouveau chemin.</para>

<para>Maintenant, de nouveaux fichiers sont créés dans ce répertoire. La
commande suivante crée un fichier d'exemple ifconfig.eth0&nbsp;:</para>

<screen><userinput>cat &gt; /etc/sysconfig/network-devices/ifconfig.eth0 &lt;&lt; "EOF"</userinput>
ONBOOT=yes
IP=192.168.1.1
NETMASK=255.255.255.0
BROADCAST=192.168.1.255
<userinput>EOF</userinput></screen>

<para>Bien sûr, les valeurs de ces variables doivent être changées dans
chaque fichier pour correspondre à votre propre configuration.
Si la variable ONBOOT est mise à yes, le script network activera la carte
réseau équivalente lors du
démarrage du système. Pour une quelconque autre valeur, cette interface sera
ignorée par le script network et donc non activée.</para>

<para>L'entrée SERVICE définit la méthode d'obtention de l'adresse IP. Les
scripts de démarrage LFS ont un format d'affectation IP modulaire et, en créant
des fichiers supplémentaires dans /etc/sysconfig/network-devices/services, vous
pouvez activer d'autres méthodes d'affection d'IP. Ceci serait habituellement
utilisé si vous avez besoin de DHCP, qui est couvert dans le livre BLFS.</para>

</sect2>

<sect2>
<title>Créer le fichier /etc/resolv.conf</title>

<para>Si vous allez être connecté à Internet, vous aurez besoin de moyens DNS
pour résoudre les noms de domaines Internet en adresses IP. Ceci est réalisé en
enregistrant l'adresse IP du DNS de votre FAI (Fournisseur d'Accès à Internet)
ou de votre adminstrateur réseau dans le fichier
<filename>/etc/resolv.conf</filename>. Créez ce fichier en lançant la commande
suivante&nbsp;:</para>

<screen><userinput>cat &gt; /etc/resolv.conf &lt;&lt; "EOF"</userinput>
# Début /etc/resolv.conf

nameserver &lt;adresse IP de votre serveur de nom&gt;

# Fin   /etc/resolv.conf
<userinput>EOF</userinput></screen>

<para>Bien sûr, remplacez &lt;adresse IP de votre serveur de nom&gt; avec l'a
dresse IP du DNS le plus approprié pour votre configuration. Il y aura souvent
plus d'une entrée (un serveur secondaire est important en cas de problème sur
le premier). L'adresse IP pourrait même être un routeur sur votre réseau
local.</para>

</sect2>

</sect1>
