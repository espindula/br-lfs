<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>
<sect1 id="ch-scripts-network">
<title>Configurer le script network</title>
<?dbhtml filename="network.html"?>

<indexterm zone="ch-scripts-network">
<primary sortas="d-network">network</primary>
<secondary>configurer</secondary></indexterm>

<para>Cette section s'applique seulement si une carte réseau doit être
configurée.</para>

<para>Si une carte réseau ne sera pas utilisée, il n'y a aucun besoin de créer
des fichiers de configuration relatifs aux cartes réseau. Si c'est le cas,
supprimez les liens symboliques <filename class="symlink">network</filename> de
tous les répertoires des niveaux d'exécution (<filename
class="directory">/etc/rc.d/rc*.d</filename>).</para>

<sect2>
<title>Créer des fichiers de configuration des interfaces réseau</title>

<para>Les interfaces activées et désactivées par le script network dépendent
des fichiers et des répertoires compris dans le répertoire <filename
class="directory">/etc/sysconfig/network-devices</filename>. Ce répertoire
doit contenir un sous-répertoire pour chaque interface à configurer, comme
<filename>ifconfig.xyz</filename>, avec <quote>xyz</quote> le nom de l'interface
réseau. Dans ce répertoire se trouvent des fichiers définissant les attributs
de cette interface, comme le(s) adresse(s) IP, masque de sous-réseau et ainsi
de suite.</para>

<para>La commande suivante crée un fichier <filename>ipv4</filename> d'exemple
pour le périphérique <emphasis>eth0</emphasis>&nbsp;:</para>

<para>Les nouveaux fichiers sont créés dans ce répertoire. La commande suivan
te crée un fichier d'exemple <filename>ipv4</filename> pour le périphérique
<emphasis>eth0</emphasis>&nbsp;:</para>

<screen><userinput>cd /etc/sysconfig/network-devices &amp;&amp;
mkdir ifconfig.eth0 &amp;&amp;
cat &gt; ifconfig.eth0/ipv4 &lt;&lt; "EOF"
<literal>ONBOOT=yes
SERVICE=ipv4-static
IP=192.168.1.1
GATEWAY=192.168.1.2
PREFIX=24
BROADCAST=192.168.1.255</literal>
EOF</userinput></screen>

<para>Les valeurs de ces variables doivent être modifiées dans chaque fichier
pour correspondre à la bonne configuration. Si la variable
<envar>ONBOOT</envar> est configurée à <quote>yes</quote>, le script network
configurera la carte réseau (NIC) pendant le démarrage du système. S'il est
configuré avec toute autre valeur que <quote>yes</quote>, l'interface réseau 
sera ignorée par le script network et non montée.</para>

<para>La variable <envar>SERVICE</envar> définit la méthode utilisée pour obtenir
une adresse IP. Les scripts de démarrage LFS ont un format d'affectation IP
modulaire. Créer les fichier supplémentaires dans le répertoire <filename
class="directory">/etc/sysconfig/network-devices/services</filename> autorise
d'autres méthodes d'affectation. Ceci est habituellement utilisé pour le DHCP,
qui est adressé dans le livre BLFS.</para>

<para>La variable <envar>GATEWAY</envar> devrait contenir l'adresse IP par
défaut de la passerelle, si elle existe. Sinon, mettez entièrement en
commentaire la variable.</para>

<para>La variable <envar>PREFIX</envar> a besoin de contenir le nombre de bits
utilisé dans le sous-réseau. Chaque octet dans une adresse IP est sur huit
bits. Si le masque réseau du sous-réseau est 255.255.255.0, alors il est en
train d'utiliser les trois premiers octets (24 bits) pour spécifier le numéro
réseau number. Si le masque réseau est 255.255.255.240, il utiliserait les
128 premiers bits. Les préfixes plus longs que 24 bits sont habituellement u
tilisés par les fournisseurs d'accès à Internet DSL et cable. Dans cet exemple
(PREFIX=24), le masque réseau est 255.255.255.0. Ajustez la variable
<envar>PREFIX</envar> en concordance avec votre sous-réseau spécifique.</para>

</sect2>

<sect2 id="resolv.conf">
<title>Créer le fichier /etc/resolv.conf</title>
<indexterm zone="resolv.conf"><primary sortas="e-/etc/resolv.conf">/etc/resolv.conf</primary></indexterm>

<para>Si le système a besoin d'être connecté à Internet, il aura besoin de la
résolution de noms proposée par le DNS (Domain Name Service) pour résoudre les
noms de domaines Internet, et vice-versa. Ceci se fait en plaçant les adresses
IP du serveur DNS, disponibles auprès du FAI ou de l'administrateur système,
dans <filename>/etc/resolv.conf</filename>. Créez le fichier en lançant ce qui
suit&nbsp;:</para>

<screen><userinput>cat &gt; /etc/resolv.conf &lt;&lt; "EOF"
<literal># Début /etc/resolv.conf

domain {<replaceable>[Votre nom de domaine]</replaceable>}
nameserver <replaceable>[adresse IP de votre DNS principal]</replaceable>
nameserver <replaceable>[adresse IP de votre DNS secondaire]</replaceable>

# Fin /etc/resolv.conf</literal>
EOF</userinput></screen>

<para>Remplacez <replaceable>[adresse IP du DNS]</replaceable> avec l'adresse
IP du DNS le plus approprié pour la configuration. Il y aura souvent plus d'une
entrée (les conseils recommandent des serveurs DNS disposant de capacité de
prise en charge. Si vous avez seulement besoin ou si vous voulez uniquement le
serveur DNS, supprimez la seconde ligne <emphasis>serveur de noms</emphasis> à
partir du fichier. L'adresse IP pourrait aussi être un routeur sur le réseau
local.</para>
</sect2>

</sect1>

