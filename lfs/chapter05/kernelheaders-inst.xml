<sect2><title>&nbsp;</title><para>&nbsp;</para></sect2>

<sect2>
<title>Installation entêtes du noyau</title>

<para>Nous n'allons pas encore compilé le noyau. Nous le ferons une fois tous
les autres packages installés. Mais comme certains packages ont besoin des
fichiers d'entête du noyau, nous allons déballer l'archive du noyau maintenant,
le configurer et copier les fichiers d'entête de façon à ce qu'ils puissent
être trouvé par ces packages.</para>

<para>Il est important de noter que les fichiers du répertoire des sources du
noyau n'appartiennent pas à <emphasis>root</emphasis>. Quand vous déballez le
package en tant qu'utilisateur <emphasis>root</emphasis> (comme nous ne le
faisons ici à l'intérieur de la cage chroot), les fichiers disposent des IDs
de l'utilisateur et du groupe qu'ils avaient lorsque l'archive a été créé. Ce
n'est habituellement pas un problème pour les autres packages que vous installez
car vous supprimez le répertoire des sources après l'installation. Mais le
répertoire des sources du noyau Linux est souvent conservé un long moment, donc
il existe un risque que les fichiers soient affectés à une personne sur votre
machine. Et dans ce cas, cette personne obtiendra les droits d'écriture sur les
sources du noyau.</para>

<para>A la lumière de ceci, vous pourriez souhaiter lancer la commande
<userinput>chown -R 0:0</userinput> sur le répertoire
<filename>linux-&kernel-version;</filename> pour vous assurez que tous les
fichiers appartiennent bien à l'utilisateur <emphasis>root</emphasis>.</para>

<para>Préparez l'installation des entêtes:</para>

<para><screen><userinput>make mrproper</userinput></screen></para>

<para>Ceci s'assure que le répertoire des sources est propre. L'équipe du noyau
recommande que cette commande soit lancée avant <emphasis>chaque</emphasis>
compilation du noyau. Vous ne devriez pas penser que le répertoire des sources
est propre après son déballage.</para>

<para>Créez le fichier <filename>include/linux/version.h</filename>:</para>

<para><screen><userinput>make include/linux/version.h</userinput></screen></para>

<para>Créez le lien symbolique spécifique à la plateforme
<filename>include/asm</filename>:</para>

<para><screen><userinput>make symlinks</userinput></screen></para>

<para>Installez les fichiers d'entête spécifiques à la plateforme:</para>

<para><screen><userinput>mkdir /stage1/include/asm &amp;&amp;
cp include/asm/* /stage1/include/asm &amp;&amp;
cp -R include/asm-generic /stage1/include</userinput></screen></para>

<para>Installez les fichiers d'entête du noyau inter-plateforme:</para>

<para><screen><userinput>cp -R include/linux /stage1/include</userinput></screen></para>

<para>Il existe quelques fichiers d'entête du noyau qui utilisent le fichier
d'entête <filename>autoconf.h</filename>. Comme nous n'avons pas encore
configuré le noyau, nous avons besoin de créer ce fichier nous-même pour éviter
des erreurs de compilation. Créez un fichier <filename>autoconf.h</filename>
vide:</para>

<para><screen><userinput>touch /stage1/include/linux/autoconf.h</userinput></screen></para>

</sect2>

