<sect2><title>&nbsp;</title><para>&nbsp;</para></sect2>

<sect2>
<title>Installation de Fileutils</title>

<para>Il existe un bogue connu avec la fonction atexit() dans glibc-2.2.3
lorsqu'il est compilé avec gcc-2.95.3. Ce bogue ne se produit que sur certains
systèmes (principalement AMD, mais pas seulement). Ce bogue donne des erreurs de
segmentation dans fileutils-4.1 lorsque celui-ci est compilé statiquement. Ce
correctif fait que on_exit() soit appelé à la place de atexit().</para>

<para>Noter que, dans certains cas, utiliser ce correctif aboutira à une
impossibilité de compiler, même si votre système dispose d'un
processeur AMD et d'une version Glibc-2.2.3 ou plus récente. Dans ce cas,
vous devrez supprimer le répertoire fileutils-&fileutils-version; et
déballer à nouveau l'archive tar. Nous croyons que cela peut être le
cas si votre distribution a modifié Glibc-2.2.3, mais les détails exacts sont
inconnus.</para>

<para>Pour permettre au package de compiler correctement sur des machines 
AMD/Glibc-2.2.3, lancez la commande suivante. N'essayez <emphasis>PAS
</emphasis> cette correction si vous n'avez pas Glibc-2.2.3 installée. Cela 
créerait toutes sortes de problèmes de compilation.</para>

<para><screen><userinput>patch -Np1 -i ../fileutils-&fileutils-patch-version;.patch</userinput></screen></para>

<para>Préparez la compilation du package:</para>

<para><screen><userinput>LDFLAGS="-static" \
&nbsp;&nbsp;&nbsp;&nbsp;./configure --disable-nls --prefix=$LFS/static</userinput></screen></para>

<para>Continuez avec la compilation du package:</para>

<para><screen><userinput>make</userinput></screen></para>

<para>Et finissez avec l'installation du package:</para>

<para><screen><userinput>make install</userinput></screen></para>

<para>Une fois Fileutils installée, vous pouvez tester si le problème d'erreur
de segmentation a été évité en lançant
<userinput>$LFS/static/bin/ls</userinput>. Si cela fonctionne, tout va bien.
Sinon, vous devez refaire l'installation en utilisant le correctif si vous
ne l'aviez pas utilisé, ou sans les commandes sed si vous les aviez
utilisées.</para>

</sect2>
