<sect2><title>&nbsp;</title><para>&nbsp;</para></sect2>

<sect2>
<title>Installation de GCC</title>

<para>Déballez uniquement l'archive tar gcc-core car nous n'avons pas besoin
d'un compilateur C++ pour le moment.</para>

<note><para>Bien que GCC soit un important package de l'ensemble des outils,
nous n'allons pas lancer la suite de tests en ce moment. Tout d'abord,
l'environnement de travail de la suite de tests n'est pas encore en place et
ensuite, les programmes de cette première passe seront bientôt écrasés par ceux
installés lors de la seconde passe.</para></note>

<para>Ce package est connu pour se comporter bizarrement si vous avez changé
les options d'optimisation par défaut (y compris les options -march et -mcpu).
Donc, si vous avez défini des variables d'environnement qui écrasent les
optimisations par défaut, comme CFLAGS et CXXFLAGS, nous vous recommandons de
les annuler ou de les modifier lors de la construction de GCC.</para>

<para>La documentation d'installation de GCC recommende de construire GCC en
dehors du répertoire des sources, c'est-à-dire dans un répertoire dédié:</para>

<para><screen><userinput>mkdir ../gcc-build
cd ../gcc-build</userinput></screen></para>

<para>Préparez la compilation de GCC:</para>

<para><screen><userinput>../gcc-&gcc-version;/configure --prefix=/tools \
&nbsp;&nbsp;&nbsp;&nbsp;--with-local-prefix=/tools \
&nbsp;&nbsp;&nbsp;&nbsp;--disable-nls --enable-shared \
&nbsp;&nbsp;&nbsp;&nbsp;--enable-languages=c</userinput></screen></para>

<para>La signification des nouvelles options de configure est:</para>

<itemizedlist>
<listitem><para><userinput>--with-local-prefix=/tools</userinput>:  Le but
de cette option est de supprimer <filename>/usr/local/include</filename>
du chemin de recherche des fichiers includes de <userinput>gcc</userinput>. Ce
n'est pas absolument essentiel; néanmoins, nous voulons essayer de minimiser
l'influence du système hôte, ce qui semble logique.</para></listitem>

<listitem><para><userinput>--enable-shared</userinput>: Cette option pourrait
sembler non intuitive en premier lieu. Mais l'utiliser permet la construction
de <filename>libgcc_s.so.1</filename> et <filename>libgcc_eh.a</filename>, et
avoir <filename>libgcc_eh.a</filename> disponible nous assure que le script
configure pour Glibc (le prochain package que nous allons compilé) produira les
bons résultats. Notez que les binaires <userinput>gcc</userinput> seront
toujours liés statiquement, comme c'est contrôlé par la valeur
<userinput>-static</userinput> de BOOT_LDFLAGS un peu plus loin.</para></listitem>

<listitem><para><userinput>--enable-languages=c</userinput>: Cette option nous
assure que seul le compilateur C sera construit. Cette option est nécessaire
uniquement si vous avez téléchargé et déballé l'archive tar complète de GCC.
</para></listitem>
</itemizedlist>

<para>Continuez avec la compilation du package:</para>

<para><screen><userinput>make BOOT_LDFLAGS="-static" bootstrap</userinput></screen></para>

<para>La signification des paramètres de make est:</para>

<itemizedlist>
<listitem><para><userinput>BOOT_LDFLAGS="-static"</userinput>: Ceci indique à
GCC de lier ces programmes statiquement.</para></listitem>

<listitem><para><userinput>bootstrap</userinput>: Cette cible ne fait pas que
compiler GCC, mais le compile plusieurs fois. Elle utilise les programmes
compilés lors du premier tout pour se compiler une deuxième fois, puis une
troisième fois. Ensuite, il compare les deuxième et troisième compilation pour
s'assurer qu'il peut se reproduire sans failles, ce qui voudra probablement dire
que le compilation s'était bien déroulée.</para></listitem>
</itemizedlist>

<para>Et installez le package:</para>

<para><screen><userinput>make install</userinput></screen></para>

<para>En touche finale, nous allons créer le lien symbolique <filename
class="symlink">/tools/bin/cc</filename>. Beaucoup de programmes et de scripts
lancent <userinput>cc</userinput> au lieu de <userinput>gcc</userinput>,
pour que les programmes restent génériques et donc utilisables sur tous les
systèmes UNIX. Tout le monde n'a pas un compilateur GNU C installé. Lancer
simplement <userinput>cc</userinput> laisse l'adimnistrateur système libre de
choisir quel compilateur C installer, si un lien symbolique pointe vers lui:
</para>

<para><screen><userinput>ln -sf gcc /tools/bin/cc</userinput></screen></para>

</sect2>

