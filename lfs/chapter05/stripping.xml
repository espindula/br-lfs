<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-tools-stripping">
  <?dbhtml filename="stripping.html"?>

  <title>Supprimer les symboles des fichiers objets</title>

  <para>Les étapes de cette section sont optionnelles mais si la partition LFS
  est plutôt petite, il est intéressant d'apprendre que des éléments inutiles
  sont supprimables. Les exécutables et les bibliothèques que vous avez construit
  jusqu'à maintenant contiennent jusqu'à 130&nbsp;Mo de symboles de débogages
  inutiles. Supprimez ces symboles avec&nbsp;:</para>

<screen><userinput>strip --strip-debug /tools/lib/*
/usr/bin/strip --strip-unneeded /tools/{,s}bin/*</userinput></screen>

  <para>Ces commandes vont laisser de côté une vingtaine de
  fichiers en indiquant qu'elles ne reconnaissent pas leur format. La
  plupart sont des scripts et non pas des binaires. Par ailleurs, utilisez
  la commande strip du système pour inclure le binaire strip dans /tools.</para>

  <para>Faites attention à ne <emphasis>pas</emphasis> utiliser
  <parameter>--strip-unneeded</parameter>  sur les bibliothèques. Cela
  détruirait les versions statiques et les paquets devraient être de nouveau
  construits.</para>

  <para>Pour sauver encore davantage, supprimez toute la documentation&nbsp;:</para>

<screen><userinput>rm -rf /tools/{,share}/{info,man,doc}</userinput></screen>

  <para>Il devrait y avoir maintenant au moins 3&nbsp;Go d'espace disque libre sur le
  système de fichiers <envar>$LFS</envar> à utiliser pour construire et installer 
  Glibc et Gcc dans la
  prochaine phase. Si vous pouvez construire et installer Glibc, vous pourrez
  aussi construire et installer le reste.</para>

</sect1>
