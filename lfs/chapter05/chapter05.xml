<chapter id="chapter05" xreflabel="chapitre 5">
<title>Préparer le système LFS</title>
<?dbhtml filename="chapter05.html" dir="chapter05"?>

&c5-introduction;
&c5-toolchaintechnotes;
&c5-creatingtoolsdir;
&c5-addinguser;
&c5-settingenviron;
&c5-binutils-pass1;
&c5-gcc-pass1;
&c5-kernelheaders;
&c5-glibc;
&c5-lockingglibc;
&c5-tcl;
&c5-expect;
&c5-dejagnu;
&c5-gcc-pass2;
&c5-binutils-pass2;
&c5-gawk;
&c5-coreutils;
&c5-bzip2;
&c5-gzip;
&c5-diffutils;
&c5-findutils;
&c5-make;
&c5-grep;
&c5-sed;
&c5-gettext;
&c5-ncurses;
&c5-patch;
&c5-tar;
&c5-texinfo;
&c5-bash;
&c5-utillinux;
&c5-perl;

<sect1 id="ch05-stripping">
<title>Nettoyer</title>
<?dbhtml filename="stripping.html" dir="chapter05"?>

<para>Les étapes de cette section sont optionnelles. Si votre partition LFS est
assez petite, vous serez content d'apprendre que vous pouvez jeter certaines
choses inutiles. Les exécutables et bibliothèques que vous avez construit
jusqu'à maintenant contiennent à peu près 130 Mo de symbôles de débuggage
inutiles. Supprimez ces symbôles de cette façon:</para>

<screen><userinput>strip --strip-unneeded /tools/{,s}bin/*
strip --strip-debug /tools/lib/*</userinput></screen>

<para>La première de ces commandes supprimera environ 20 fichiers, en indiquant
qu'elle ne reconnaît pas leur format de fichier. La plupart sont des scripts et non des binaires.</para>

<para>Faites attention à ne <emphasis>pas</emphasis> utiliser
<userinput>--strip-unneeded</userinput> sur ces bibliothèques -- elles seraient
détruites et vous n'auriez plus qu'à reconstruire complètement Glibc.</para>

<para>Pour sauver encore quelques mégaoctets, vous pouvez supprimer la
documentation:</para>

<screen><userinput>rm -rf /tools/{,share/}{doc,info,man}</userinput></screen>

<para>Vous aurez maintenant besoin d'avoir au moins 850&nbsp;Mo d'espace libre
sur le système de fichiers LFS pour pouvoir construire et installer la Glibc
lors de la prochaine phase. Si vous pouvez construire et installer Glibc, vous
pourrez aussi construire et installer le reste.</para>

</sect1>

</chapter>
