<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>
<sect1 id="ch-tools-binutils-pass2" role="wrap">
<title>Binutils-&binutils-version; - Passe 2</title>
<?dbhtml filename="binutils-pass2.html"?>

<indexterm zone="ch-tools-binutils-pass2">
<primary sortas="a-Binutils">Binutils</primary>
<secondary>outils, passe 2</secondary></indexterm>

<sect2 role="package"><title/>
<xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
	href="../chapter06/binutils.xml"
	xpointer="xpointer(/sect1/sect2[1]/para[1])"/>

<segmentedlist>
<segtitle>&buildtime;</segtitle>
<segtitle>&diskspace;</segtitle>
<seglistitem><seg>1,5&nbsp;SBU</seg><seg>114&nbsp;Mo</seg></seglistitem>
</segmentedlist>

<xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
	href="../chapter06/binutils.xml"
	xpointer="xpointer(/sect1/sect2[1]/segmentedlist[2])"/>

</sect2>

<sect2 role="installation">
<title>Ré-installation de Binutils</title>

<para>Ce paquet est connu pour avoir des soucis quand les options d'optimisation
par défaut (en incluant les options <parameter>-march</parameter> et
<parameter>-mcpu</parameter>) sont modifiées. Donc, si des variables d'environnement
qui surchargent les optimisations par défaut, telles que <envar>CFLAGS</envar>
et <envar>CXXFLAGS</envar>, ont été définies, supprimez cette initialisation
pour la construction de Binutils.</para>

<para>Créez de nouveau un répertoire de construction séparé&nbsp;:</para>

<screen><userinput>mkdir ../binutils-build
cd ../binutils-build</userinput></screen>

<para>Préparez la compilation de Binutils&nbsp;:</para>

<screen><userinput>../binutils-&binutils-version;/configure --prefix=/tools \
    --disable-nls --enable-shared --with-lib-path=/tools/lib</userinput></screen>

<para>Voici la signification des nouvelles options de configure&nbsp;:
</para>

<variablelist>
<varlistentry>
<term><parameter>--with-lib-path=/tools/lib</parameter></term>
<listitem><para>Ceci indique au script configure de spécifier le chemin de
recherche des bibliothèques lors de la compilation de Binutils, résultant au
passage de <filename class="directory">/tools/lib</filename> à l'éditeur de
liens. Ceci empêche l'éditeur de liens de chercher dans tous les répertoires de
bibliothèques de l'hôte.</para></listitem>
</varlistentry>
</variablelist>

<para>Compilez le paquet&nbsp;:</para>

<screen><userinput>make</userinput></screen>

<para>La compilation est maintenant terminée. Comme dit plutôt, lancer les
suites de tests n'est pas nécessaire pour les outils temporaires dans ce
chapitre. Néanmoins, pour lancer la suite de tests Binutils, lancez la commande
suivante&nbsp;:</para>

<screen><userinput>make check</userinput></screen>

<para>Installez le paquet&nbsp;:</para>                                              
<screen><userinput>make install</userinput></screen>

<para>Maintenant, préparez l'éditeur de liens pour la phase de
<quote>ré-ajustement</quote> du prochain chapitre&nbsp;:</para>

<screen><userinput>make -C ld clean
make -C ld LIB_PATH=/usr/lib:/lib</userinput></screen>

<warning><para><emphasis>Ne supprimez pas encore</emphasis> les répertoires des
sources et de construction de Binutils. Ces répertoires seront nécessaires pour
le prochain chapitre dans l'état où ils sont actuellement.</para></warning>

</sect2>

<sect2 role="content"><title/>
<para>Les détails sur ce paquet sont disponibles dans <xref
linkend="contents-binutils" role="."/></para>
</sect2>

</sect1>

