<sect2><title>&nbsp;</title><para>&nbsp;</para></sect2>

<sect2>
<title>Installation de Glibc</title>

<para>Avant de commencer l'installation de Glibc, vou devez entrer
(<userinput>cd</userinput>) dans le répertoire
<filename>glibc-&glibc-version;</filename> et déballer Glibc-linuxthreads dans
ce répertoire, et pas dans <filename>/usr/src</filename> comme vous le faites
habituellement.</para>

<para>Ce package est connu pour mal se comporter si ses options d'optimisation
par défaut ont été changées (incluant les options -march et -mcpu). Donc, si
vous avez défini des variables d'environnement qui surchargent les
optimisations par défaut, telles que CFLAGS et CXXFLAGS, nous vous recommandons
de les supprimer ou de les modifier lors de la construction de Glibc.</para>

<para>En gros, compiler Glibc d'une autre façon que ce qu'indique le livre met
la stabilité de votre système en grand danger.</para>

<para>Bien que ce soit un message non dangereux, la phase d'installation de
Glibc se plaindra de la présence de <filename>/etc/ld.so.conf</filename>.
Corrigez cette petite erreur ennuyante:</para>

<para><screen><userinput>mkdir /stage1/etc
touch /stage1/etc/ld.so.conf</userinput></screen></para>

<para>La documentation venant avec Glibc recommende de construire le package
en dehors du répertoire des sources, dans un répertoire séparé et dédié à cela:
</para>

<para><screen><userinput>mkdir ../glibc-build
cd ../glibc-build</userinput></screen></para>

<para>Ensuite, préparez la compilation de Glibc:</para>

<para><screen><userinput>../glibc-&glibc-version;/configure --prefix=/stage1 \
&nbsp;&nbsp;&nbsp;&nbsp;--disable-profile --enable-add-ons \
&nbsp;&nbsp;&nbsp;&nbsp;--with-headers=/stage1/include \
&nbsp;&nbsp;&nbsp;&nbsp;--with-binutils=/stage1/bin \
&nbsp;&nbsp;&nbsp;&nbsp;--without-gd</userinput></screen></para>

<para>La signification des nouvelles options de configure est:</para>

<itemizedlist>
<listitem><para><userinput>--disable-profile</userinput> : Ceci désactive la
construction des bibliothèques avec des informations de profilage. Cette
commande peut être omise si vous plannifiez de faire du profilage.
</para></listitem>

<listitem><para><userinput>--enable-add-ons</userinput> : Ceci active tous les
modules supplémentaires qui étaient installés avec Glibc, c'est-à-dire
linuxthreads dans notre cas.</para></listitem>

<listitem><para><userinput>--with-binutils=/stage1/bin</userinput> et
<userinput>--with-headers=/stage1/include</userinput>: De façon stricte, ces
options ne sont pas requises. Mais elles nous assurent que rien n'ira mal en ce
qui concerne les entêtes du noyau et les programmes Binutils sont utilisés
durant la construction de Glibc.</para></listitem>

<listitem><para><userinput> --without-gd</userinput>: Cette option s'assure que
nous ne construisons pas le programme <userinput>memusagestat</userinput>, qui
assez bizarrement insiste pour lier de nouveau les bibliothèques de l'hôte 
(libgd, libpng, libz, et ainsi de suite).</para></listitem>
</itemizedlist>

<para>Durant cette étape, vous verrez le message d'avertissement suivant:</para>

<blockquote><screen>configure: warning:
*** These auxiliary programs are missing or too old: msgfmt
*** some features will be disabled.
*** Check the INSTALL file for required versions.</screen></blockquote>

<para>Le programme <filename>msgfmt</filename> manquant (du package Gettext que
nous installerons plus tard) ne causera pas de problèmes.
<filename>msgfmt</filename> est utilisé pour générer les fichiers binaires de
traduction que votre système utilise pour parler une autre langue. Comme les
fichiers de traduction ont déjà été générés pour vous, il n'y a pas besoin de
<filename>msgfmt</filename>. Vous aurez besoin de ce programme uniquement si
vous devez changer les fichiers source de traduction (les fichiers
<filename>*.po</filename> dans le sous-répertoire <filename
class="directory">po</filename>) ce qui nécessitera de regénérer les fichiers
binaires.</para>

<para>Continuez avec la compilation du package:</para>

<para><screen><userinput>make
make check
make install</userinput></screen></para>

<para>Les <quote>locales</quote> (utilisées par Glibc pour que votre système
Linux puisse parler une autre langue) n'ont pas été installées lorsque vous
avez lancé la commande précédente, donc vous devez le faire vous-même
maintenant:</para>

<para><screen><userinput>make localedata/install-locales</userinput></screen></para>

<para>Une alternative au lancement de le commande précédente est d'installer
seulement les <quote>locales</quote> dont vous aurez besoin. On peut y arriver
en utilisant la commande <userinput>localedef</userinput>. Les informations à
ce sujet sont disponibles dans le fichier <filename>INSTALL</filename>, du
répertoire <filename>glibc-&glibc-version;</filename>.</para>

</sect2>

