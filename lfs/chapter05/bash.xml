<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-tools-bash" role="wrap">
  <?dbhtml filename="bash.html"?>

  <sect1info condition="script">
    <productname>bash</productname>
    <productnumber>&bash-version;</productnumber>
    <address>&bash-url;</address>
  </sect1info>

  <title>Bash-&bash-version;</title>

  <indexterm zone="ch-tools-bash">
    <primary sortas="a-Bash">Bash</primary>
    <secondary>outils</secondary>
  </indexterm>

  <sect2 role="package">
    <title/>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../chapter06/bash.xml"
    xpointer="xpointer(/sect1/sect2[1]/para[1])"/>

    <segmentedlist>
      <segtitle>&buildtime;</segtitle>
      <segtitle>&diskspace;</segtitle>

      <seglistitem>
        <seg>&bash-ch5-sbu;</seg>
        <seg>&bash-ch5-du;</seg>
      </seglistitem>
    </segmentedlist>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Bash</title>

    <para>Tout d'abord, appliquez le correctif suivant pour corriger divers
    bogues traités en amont&nbsp;:</para>

<screen><userinput remap="pre">patch -Np1 -i ../&bash-fixes-patch;</userinput></screen>

    <para>Préparez la compilation de Bash&nbsp;:</para>

<screen><userinput remap="configure">./configure --prefix=/tools --without-bash-malloc</userinput></screen>

    <variablelist>
      <title>Voici la signification des options de configure&nbsp;:</title>

      <varlistentry>
        <term><parameter>--without-bash-malloc</parameter></term>
        <listitem>
          <para>Cette option désactive l'utilisation par Bash de la fonction
          d'allocation mémoire
          <function>malloc</function> qui est connue pour causer des erreurs de
          segmentation. En désactivant cette option, Bash utilisera les fonctions
          <function>malloc</function> de Glibc qui sont plus stables.</para>
        </listitem>
      </varlistentry>

    </variablelist>

    <para>Compilez le paquet&nbsp;:</para>

<screen><userinput remap="make">make</userinput></screen>

    <para>La compilation est maintenant terminée. Comme décrit plus tôt, 
    l'exécution de la suite de tests n'est pas obligatoire pour les outils
    temporaires dans ce chapitre. Pour lancer cependant la suite de tests de 
    bash, faites la commande suivante&nbsp;:</para>

<screen><userinput remap="test">make tests</userinput></screen>

    <para>Installez le paquet&nbsp;:</para>

<screen><userinput remap="install">make install</userinput></screen>

    <para>Créez un lien pour les programmes qui utilisent <command>sh</command>
    comme shell&nbsp;:</para>

<screen><userinput remap="install">ln -sv bash /tools/bin/sh</userinput></screen>

  </sect2>

  <sect2 role="content">
    <title/>

    <para>Les détails sur ce paquet sont situés dans
    <xref linkend="contents-bash" role="."/></para>

  </sect2>

</sect1>
