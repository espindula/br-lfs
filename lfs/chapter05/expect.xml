<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>
<sect1 id="ch-tools-expect" role="wrap">
<title>Expect-&expect-version;</title>
<?dbhtml filename="expect.html"?>

<indexterm zone="ch-tools-expect"><primary sortas="a-Expect">Expect</primary></indexterm>

<sect2 role="package"><title/>
<para>Le paquet Expect permet de réaliser des dialogues
scriptés avec d'autres programmes interactifs.</para>

<segmentedlist>
<segtitle>&buildtime;</segtitle>
<segtitle>&diskspace;</segtitle>
<seglistitem><seg>0,1&nbsp;SBU</seg><seg>4,0&nbsp;Mo</seg></seglistitem>
</segmentedlist>

<segmentedlist>
<segtitle>&dependencies;</segtitle>
<seglistitem><seg>Bash, Binutils, Coreutils, Diffutils,
GCC, Glibc, Grep, Make, Sed et Tcl</seg></seglistitem>
</segmentedlist>
</sect2>

<sect2 role="installation">
<title>Installation d'Expect</title>

<para>Tout d'abord, corrigez un bogue qui provoquerait de nombreux faux échecs lors
de l'exécution de la suite de tests de GCC&nbsp;:</para>

<screen><userinput>patch -Np1 -i ../&expect-spawn-patch;</userinput></screen>

<para>Maintenant, préparez la compilation d'Expect&nbsp;:</para>

<screen><userinput>./configure --prefix=/tools --with-tcl=/tools/lib \
   --with-tclinclude=$TCLPATH --with-x=no</userinput></screen>

<para>Voici la signification des options de configure&nbsp;:</para>

<variablelist>
<varlistentry>
<term><parameter>--with-tcl=/tools/lib</parameter></term>
<listitem><para>Ceci nous assure que le script configure travaille avec le
Tcl situé dans l'emplacement temporaire des outils, et non avec un Tcl résidant sur le
système hôte.</para></listitem>
</varlistentry>

<varlistentry>
<term><parameter>--with-tclinclude=$TCLPATH</parameter></term>
<listitem><para>Ceci indique explicitement à Expect où trouver le répertoire
des sources de Tcl et ses en-têtes internes. Utiliser cette option évite
certaines situations où <command>configure</command> échoue car il n'a pas pu
découvrir automatiquement l'emplacement de ce répertoire.</para></listitem>
</varlistentry>

<varlistentry>
<term><parameter>--with-x=no</parameter></term>
<listitem><para>Ceci indique au script configure de ne pas rechercher Tk (le
composant de Tcl en interface graphique utilisateur) ni les bibliothèques systèmes d'X Window, 
qui peuvent tous les deux résider sur le système hôte mais n'existeront pas dans l'environnement
temporaire.</para></listitem>
</varlistentry>
</variablelist>

<para>Construisez le paquet&nbsp;:</para>

<screen><userinput>make</userinput></screen>

<para>Pour tester le résultat, exécutez&nbsp;:
<userinput>make test</userinput>. Notez que la suite de tests d'Expect est
connue pour rencontrer de nombreux échecs dans certaines configurations de l'hôte,
conditions sur lesquelles nous n'avons pas de contrôle. Du coup, les échecs de cette
suite de tests ne seraient pas surprenants et ne sont pas considérés comme
critiques.</para>

<para>Installez-le&nbsp;:</para>

<screen><userinput>make SCRIPTS="" install</userinput></screen>

<para>Voici la signification du paramètre de make&nbsp;:</para>

<variablelist>
<varlistentry>
<term><parameter>SCRIPTS=""</parameter></term>
<listitem><para>Ceci empêche l'installation des scripts expect additionels,
non nécessaires.</para></listitem>
</varlistentry>
</variablelist>

<para>Maintenant, libérez la variable <envar>TCLPATH</envar>&nbsp;:</para>

<screen><userinput>unset TCLPATH</userinput></screen>

<para>Les répertoires des sources de Tcl et d'Expect peuvent maintenant être
supprimés.</para>

</sect2>

<sect2 id="contents-expect" role="content"><title>Contenu d'Expect</title>

<segmentedlist>
<segtitle>Programme installé</segtitle>
<segtitle>Bibliothèque installée</segtitle>
<seglistitem><seg>expect</seg><seg>libexpect-&expect-lib-version;.a</seg></seglistitem>
</segmentedlist>

<variablelist><bridgehead renderas="sect3">Descriptions courtes</bridgehead>
<?dbfo list-presentation="list"?>
<?dbhtml list-presentation="table"?>

<varlistentry id="expect">
<term><command>expect</command></term>
<listitem>
<para>Communique avec d'autres programmes interactifs suivant un script.</para>
<indexterm zone="ch-tools-expect expect"><primary sortas="b-expect">expect</primary></indexterm>
</listitem>
</varlistentry>

<varlistentry id="libexpect">
<term><filename class="libraryfile">libexpect-&expect-lib-version;.a</filename></term>
<listitem>
<para>Contient des fonctions qui permettent à Expect d'être utilisé comme une
extension Tcl ou d'être utilisé directement à partir du langage C ou du langage
C++ (sans Tcl)</para>
<indexterm zone="ch-tools-expect libexpect"><primary
sortas="c-libexpect-&expect-lib-version;">libexpect-&expect-lib-version;</primary></indexterm>
</listitem>
</varlistentry>
</variablelist>

</sect2>

</sect1>
