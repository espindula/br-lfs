<sect1 id="ch05-creatingdirs">
<title>Création des répertoires</title>
<?dbhtml filename="creatingdirs.html" dir="chapter05"?>

<para>Créons maintenant la hiérarchie de répertoires sur la partition
de LFS, basé sur le standard FHS qui peut être trouvé sur 
<ulink url="http://www.pathname.com/fhs/">http://www.pathname.com/fhs/</ulink>.
Lancer les commandes suivantes pour créer la hiérarchie par défaut des
répertoires:</para>
 
<para><screen><userinput>cd $LFS &amp;&amp;
mkdir -p bin boot dev/pts etc/opt home lib mnt proc root sbin tmp var opt &amp;&amp;
for dirname in $LFS/usr $LFS/usr/local
<literal>&nbsp;&nbsp;&nbsp;do</literal>
&nbsp;&nbsp;&nbsp;mkdir $dirname
&nbsp;&nbsp;&nbsp;cd $dirname
&nbsp;&nbsp;&nbsp;mkdir bin etc include lib sbin share src var
&nbsp;&nbsp;&nbsp;ln -s share/man
&nbsp;&nbsp;&nbsp;ln -s share/doc
&nbsp;&nbsp;&nbsp;ln -s share/info
&nbsp;&nbsp;&nbsp;cd $dirname/share
&nbsp;&nbsp;&nbsp;mkdir dict doc info locale man nls misc terminfo zoneinfo
&nbsp;&nbsp;&nbsp;cd $dirname/share/man
&nbsp;&nbsp;&nbsp;mkdir man{1,2,3,4,5,6,7,8}
done &amp;&amp;
cd $LFS/var &amp;&amp;
mkdir -p lock log mail run spool tmp opt cache lib/misc local &amp;&amp;
cd $LFS/opt &amp;&amp;
mkdir bin doc include info lib man &amp;&amp;
cd $LFS/usr &amp;&amp;
ln -s ../var/tmp</userinput></screen></para>

<para>Normalement, les répertoires sont créés avec le mode de permission
755, ce qui n'est pas souhaité pour tous les répertoires. La première
modification concerne le répertoire $LFS/root avec une permission 750.
Ainsi, personne ne pourra entrer dans le répertoire /root (de façon
identique à un utilisateur pour son répertoire /home/nomutilisateur).
Le deuxième changement concerne les répertoires tmp avec un mode 1777.
De cette façon, tout utilisateur peut écrire des données dans /tmp et
/var/tmp mais ne peut pas supprimer des fichiers d'autres utilisateurs
(ceci grâce au "sticky bit" - bit 1 du masque 1777).</para>

<para><screen><userinput>cd $LFS &amp;&amp;
chmod 0750 root &amp;&amp;
chmod 1777 tmp var/tmp</userinput></screen></para>

<para>Maintenant que les répertoires sont créés, copiez les fichiers
sources qui ont été téléchargés dans le chapitre 3 sur un sous-répertoire
de $LFS/usrc/src (vous devrez créer ce répertoire vous-même).</para>

<sect2>
<title>Notes de conformité FHS</title>

<para>Le FHS stipule que le répertoire /usr/local doit contenir les
sous-répertoires bin, games, include, lib, man, sbin et share. Vous
pouvez modifier votre répertoire /usr/local vous-même si vous souhaitez 
que votre système soit en conformité avec FHS.</para>

<para>De la même manière, le standard indique qu'il doit existeer un
répertoire /usr/share/games, ce dont nous ne voulons pas pour un système
de base. Mais n'hésitez pas à rendre votre système conforme à FHS si vous
le souhaitez. Le FHS n'est pas très précis sur la structure des
sous-répertoires de /usr/local/share, donc nous avons pris la liberté de
créer les répertoires qui nous semblaient nécessaires.</para>

</sect2>

</sect1>

