<sect1 id="ch05-settingenviron">
<title>Configurer l'environnement</title>
<?dbhtml filename="settingenviron.html" dir="chapter05"?>

<para>Une fois connecté en tant qu'utilisateur <emphasis>lfs</emphasis>, lancez
les commandes suivantes pour mettre en place un bon environnement de travail:
</para>

<para><screen><userinput>cat &gt; ~/.bash_profile &lt;&lt; "EOF"
set +h
umask 022
LFS=/mnt/lfs
LC_ALL=POSIX
LDFLAGS="-s"
PATH=/stage1/bin:$PATH
export LFS LC_ALL LDFLAGS PATH
EOF
source ~/.bash_profile</userinput></screen></para>

<para><userinput>set +h</userinput> arrête la fonction de hachage de Bash. Le
hachage est normalement une fonction utile qui permet à Bash d'utiliser une
table hâchée pour se rappeler les chemins complets des fichiers exécutables
pour éviter de nombreuses recherches dans 'PATH'. Néanmoins, nous souhaitons que
les nouveaux outils deviennent disponibles tout de suite après leur
installation. EN désactivant la fonction de hachage, nos commandes
"interactives" (make, patch, sed, cp, etc.) utiliseront toujours les derniers
disponibles lors du processus de construction.</para>

<para>Ce profil configure le umask à 022, donc les fichiers et les répertoires
nouvellement créés auront les bonnes permissions. Pour être plus spécifique,
seul le propriétaire du fichier aura la permission d'écriture sur les nouveaux
fichiers et répertoires. Les autres utilisateurs du système auront le droit de
lire et le droit de traverser les répertoires. Il est conseillé de garder ce
paramétrage tout au long de l'installation LFS.</para>

<para>La variable LFS doit bien sûr être configuré au point de montage que vous
avez choisi.</para>

<para>La variable LC_ALL contrôle l'emplacement de certains programmes, en
faisant que certains messages suivent les conventions du pays spécifié. Si votre
système hôte utilise une version de la <emphasis>glibc</emphasis> plus ancienne
que la 2.2.4, avoir LC_ALL positionné sur quelque chose d'autre que "C" ou
"POSIX" durant ce chapitre peut poser des problèmes si vous sortez de 
l'environnement chroot et souhaitez y retourner plus tard. En positionnant
LC_ALL à "POSIX" ("C" est un alias pour "POSIX"), nous nous assurons que tout
fonctionnera comme attendu dans l'environnement chroot.</para>

<para>LDFLAGS est une variable que nous initialisons pour éviter que des
symbôles de débogage ne soient compilés dans les packages statiques. En omettant
ces symbôles, nous sauvons de l'espace disque et diminuons le temps de
construction.</para>

<para>Nous sommes maintenant préparés pour le début de la construction des
outils temporaires qui nous aideront dans les chapitres suivants.</para>

</sect1>

