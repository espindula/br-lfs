<sect1 id="ch05-locking-glibc">
<title>"Verrouiller" Glibc</title>
<?dbhtml filename="lockingglibc.html" dir="chapter05"?>

<sect2><title>&nbsp;</title><para>&nbsp;</para></sect2>

<sect2>
<title>Installation des scripts de l'éditeur de liens</title>

<para><screen><userinput>make -C ld install-data-local</userinput></screen></para>

<para>Ceci installe les scripts ajustés de l'éditeur de liens. Vous
rappelez-vous qu'ils ont il y a un moment, à la fin du premier tour avec
Binutils? Les scripts de l'éditeur de liens ne contiennent plus de mention de
<filename>/lib</filename>, <filename>/usr/lib</filename> ou
<filename>/usr/local/lib</filename>.
A partir de ça, tout va être lier <emphasis>seulement</emphasis> avec les
bibliothèques dans <filename>/stage1/lib</filename>.</para>

<para>Vous pouvez maintenant supprimer les répertoires binutils-*.</para>

</sect2>

<sect2>
<title>Modification des fichiers specs de GCC</title>

<para>La dernière chose à faire est de modifier les fichiers specs de GCC de
façon à ce qu'ils pointent vers le nouvel éditeur de liens dynamiques. Une
simple commande sed accomplira ceci:</para>
   
<para><screen><userinput>SPECFILE=/stage1/lib/gcc-lib/*/*/specs
sed -e 's@/lib/ld.so.1@/stage1/lib/ld.so.1@g' \
&nbsp;&nbsp;&nbsp;&nbsp;-e 's@/lib/ld-linux.so.2@/stage1/lib/ld-linux.so.2@g' \
&nbsp;&nbsp;&nbsp;&nbsp;$SPECFILE > XX
mv XX $SPECFILE
unset SPECFILE</userinput></screen></para>

<para>Nous recommendons de copier/coller les commandes ci-dessus plutôt que
vous tentiez de taper tout ce qui s'y trouve. Ou vous pouvez éditer le fichier
specs à la main si vous le voulez: remplacez "/lib/ld-linux.so.2" par
"/stage1/lib/ld-linux.so.2".</para>

<para>Ceci complète l'installation de l'ensemble d'outils qui pourra maintenant
être utilisé pour construire le reste des outils temporaires.</para>

</sect2>

</sect1>

