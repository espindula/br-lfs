<sect2><title>&nbsp;</title><para>&nbsp;</para></sect2>

<sect2>
<title>Installation de Bash</title>

<para>Avant d'installer Bash, vous devez vérifier que votre distribution
dispose des fichiers <filename>/usr/lib/libcurses.a</filename> et
<filename>/usr/lib/libncurses.a</filename>. Si votre distribution est un
système LFS, tous les fichiers seront présents si vous avez suivi les
instructions du livre que vous êtes en train de lire.</para>

<para>Si les deux fichiers sont manquants, vous devez installer le package de 
développement de Ncurses. Ce package est souvent dénommé 
<emphasis>ncurses-dev</emphasis> ou <emphasis>ncurses-static</emphasis>. Si ce
package est déjà installé, ou si vous venez de l'installer, vérifiez à nouveau
la présence des deux fichiers. Souvent, le fichier
<filename>libcurses.a</filename> est (encore) manquant. S'il l'est, créez
<filename>libcurses.a</filename> comme un lien symbolique en exécutant la
commande suivante en tant qu'utilisateur <emphasis>root</emphasis>:</para>

<para><screen><userinput>ln -s libncurses.a /usr/lib/libcurses.a</userinput></screen></para>

<para>Maintenant, nous pouvons réellement commencer. Préparez Bash à être
compilé en exécutant les commandes suivantes:</para>

<para><screen><userinput>./configure --enable-static-link \
&nbsp;&nbsp;&nbsp;&nbsp;--prefix=$LFS/static --with-curses</userinput></screen></para>

<para>La signification des options de configure est la suivante:</para>

<itemizedlist>
<listitem><para><userinput>--enable-static-link</userinput> : Cette option
demande que le programme <userinput>bash</userinput> soit lié statiquement.
</para></listitem>

<listitem><para><userinput>--prefix=$LFS/static</userinput> : Cette option
installe tous les fichiers Bash sous le répertoire <filename
class="directory">$LFS/static</filename>, qui deviendra le répertoire <filename
class="directory">/static</filename> lorsque nous nous placerons sous chroot
lors du redémarrage sous LFS.</para></listitem>

<listitem><para><userinput>--with-curses</userinput> : Cette option demande à
<filename>bash</filename> d'être liée avec la bibliothèque curses au lieu de la
bibliothèque termcap par défaut qui est devenu obsolète. Notez que, sur la
plupart des systèmes Linux, la bibliothèque curses est apportée par le package
Ncurses (donc en vérité nous la lions avec la bibliothèque ncurses).</para>

<para>Ce n'est pas strictement nécessaire pour que le bash statique soit lié
avec libncurses (il peut être lié avec un termcap statique pour le temps restant
parce que nous réinstallerons néanmoins Bash dans le chapitre 6, où nous
utiliserons libncurses), mais c'est un bon test pour s'assurer que le package
Ncurses a été installé proprement. Dans le cas contraire, vous aurez des
problèmes sur ce chapitre lorsque vous installerez le package Texinfo. Ce
package nécessite ncurses, et termcap ne peut pas être utilisé ici.
</para></listitem>
</itemizedlist>

<para>Maintenant, nous pouvons continuer avec la compilation de Bash:</para>

<para><screen><userinput>make</userinput></screen></para>

<para>Et finissez l'installation de Bash:</para>

<para><screen><userinput>make install</userinput></screen></para>

<para>Si la phase <userinput>make install</userinput> se termine par quelque
chose comme:</para>

<blockquote><screen>install-info: unknown option `--dir-file=/mnt/lfs/usr/info/dir' 
usage: install-info [--version] [--help] [--debug] [--maxwidth=nnn] 
        [--section regexp title] [--infodir=xxx] [--align=nnn] 
        [--calign=nnn] [--quiet] [--menuentry=xxx]
        [--info-dir=xxx] 
        [--keep-old] [--description=xxx] [--test]
        [--remove] [--] filename 
make[1]: *** [install] Error 1 
make[1]: Leaving directory `/mnt/lfs/usr/src/bash-&bash-version;/doc' 
make: [install] Error 2 (ignored)</screen></blockquote>

<para>alors cela veut dire que vous utilisez probablement Debian-2.2 (potato),
et que vous avez une ancienne version du package texinfo et les pages info ne
peuvent pas être installées à ce moment. Cette erreur n'est pas un problème car
les pages info seront installées lors de la recompilation dynamique de bash au
chapitre 6, donc nous pouvons l'ignorer. Il est indiqué que la version courante
de Debian (3.0; aussi connu sous le nom de Woody) n'a pas ce problème.</para>

</sect2>
