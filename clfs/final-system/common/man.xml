<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<sect1 id="ch-system-man" role="wrap">
  <?dbhtml filename="man.html"?>

  <title>Man-&man-version;</title>

  <indexterm zone="ch-system-man">
    <primary sortas="a-Man">Man</primary>
  </indexterm>

  <sect2 role="package">
    <title/>

    <para>Le paquet Man contient des programmes pour trouver et voir
    des pages de manuel.</para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Man</title>

    <para os="p1">Ce correctif ajoute le support de l'internationalisation&nbsp;:</para>

<screen os="p2"><userinput>patch -Np1 -i ../&man-i18n-patch;</userinput></screen>

    <para os="a">Il faut effectuer quelques ajustements aux sources de Man.</para>

    <para os="b">D'abord, une substitution <command>sed</command> est nécessaire pour ajouter l'option <option>-R</option> à 
    la variable <envar>PAGER</envar> afin que les séquences d'échappement soient correctement gérées par Less&nbsp;:</para>

<screen os="c"><userinput>sed -i 's@-is@&amp;R@g' configure</userinput></screen>

    <para os="d">Deux autres substitutions <command>sed</command> commentent les lignes
    <quote>MANPATH /usr/man</quote> et <quote>MANPATH /usr/local/man</quote> dans le fichier
    <filename>man.conf</filename> pour empêcher des résultats redondants lors de l'utilisation de programmes tels que 
    <command>whatis</command>&nbsp;:</para>

<screen os="e"><userinput>sed -i 's@MANPATH./usr/man@#&amp;@g' src/man.conf.in
sed -i 's@MANPATH./usr/local/man@#&amp;@g' src/man.conf.in</userinput></screen>

    <para os="h">Préparez la compilation de Man&nbsp;:</para>

<screen os="i"><userinput>./configure -confdir=/etc</userinput></screen>

    <variablelist os="j">
      <title>Voici la signification des options de configure&nbsp;:</title>

      <varlistentry>
      <term><parameter>-confdir=/etc</parameter></term>
      <listitem>
        <para>Ceci dit au programme <command>man</command> de chercher le fichier de configuration 
        <filename>man.conf</filename> dans le répertoire <filename class="directory">/etc</filename>.</para>
      </listitem>
      </varlistentry>
    </variablelist>

    <para os="k">Compilez le paquet&nbsp;:</para>

<screen os="l"><userinput>make</userinput></screen>

    <para os="m">Ce paquet ne fournit pas de suite de tests.</para>

    <para os="n">Installez le paquet&nbsp;:</para>

<screen os="o"><userinput>make install</userinput></screen>

    <note os="p">
      <para>Si vous allez travailler sur un terminal qui ne supporte pas les attributs de texte comme la  couleur ou le gras, 
      vous pouvez désactiver les séquences d'échappement Select Graphic Rendition (SGR) en éditant le fichier
      <filename>man.conf</filename> et en ajoutant l'option <option>-c</option> à la variable <envar>NROFF</envar>. Si vous 
      utilisez plusieurs types de terminal pour un ordinateur, il peut être préférable d'ajouter de manière sélective la 
      variable d'environnement <envar>GROFF_NO_SGR</envar> pour les terminaux qui ne supportent pas SGR.</para>
    </note>

    <para os="q">Si l'encodage de la locale utilise les caractères 8 bits, cherchez la ligne commençant par
    <quote>NROFF</quote> dans <filename>/etc/man.conf</filename> et vérifiez qu'elle correspond à ce qui suit&nbsp;:</para>

<screen os="r">NROFF /usr/bin/nroff -Tlatin1 -mandoc</screen>

    <para os="s">Remarquez que vous devriez utiliser <quote>latin1</quote> même si ce n'est pas l'encodage de la locale. La 
    raison à cela est que, selon la spécification, <command>groff</command> n'attribue aucun sens aux caractères différents de 
    <foreignphrase>International Organization for Standards</foreignphrase> (ISO) 8859-1
    sans quelques codes d'échappement bizarres. Lorsqu'il formatte des pages de man, <command>groff</command> pense qu'elles 
    sont en encodage ISO 8859-1 et ce paramètre <parameter>-Tlatin1</parameter> dit à <command>groff</command> d'utiliser le 
    même encodage pour la sortie. Comme <command>groff</command> ne fait pas de recodage des caractères d'entrée, le résultat
    formaté est vraiment dans le même encodage que l'entrée et ainsi, il est utilisable comme l'entrée pour un pager.</para>

    <para os="t">Cela ne résout pas le problème du programme <command>man2dvi</command> qui ne fonctionne pas pour les pages 
    de man non localisées en locales ISO 8859-1. En outre, il ne fonctionne pas avec les encodages multioctets. Le premier
    problème n'a aucune solution actuellement. Le second problème ne nous concerne pas car l'installation de CLFS ne supporte 
    pas les encodages multioctets.</para>

  </sect2>

  <sect2 id="contents-man" role="content">
    <title>Contenu de Man</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>

      <seglistitem>
        <seg>apropos, makewhatis, man, man2dvi, man2html et whatis</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="apropos">
        <term><command>apropos</command></term>
        <listitem>
          <para>Cherche la base de données <command>whatis</command> et affiche les descriptions courtes des commandes 
          système qui contiennent une chaîne donnée</para>
          <indexterm zone="ch-system-man apropos">
            <primary sortas="b-apropos">apropos</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="makewhatis">
        <term><command>makewhatis</command></term>
        <listitem>
          <para>Construit la base de données <command>whatis</command>&nbsp;; il lit toutes les pages de man dans
          <envar>MANPATH</envar> et écrit le nom et une courte description dans la base de données <command>whatis</command> 
          pour chaque page</para>
          <indexterm zone="ch-system-man makewhatis">
            <primary sortas="b-makewhatis">makewhatis</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="man">
        <term><command>man</command></term>
        <listitem>
          <para>Formatte et affiche la page de manuel en ligne demandée</para>
          <indexterm zone="ch-system-man man">
            <primary sortas="b-man">man</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="man2dvi">
        <term><command>man2dvi</command></term>
        <listitem>
          <para>Convertit une page de manuel au format dvi</para>
          <indexterm zone="ch-system-man man2dvi">
            <primary sortas="b-man2dvi">man2dvi</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="man2html">
        <term><command>man2html</command></term>
        <listitem>
          <para>Convertit une page de manuel en HTML</para>
          <indexterm zone="ch-system-man man2html">
            <primary sortas="b-man2html">man2html</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="whatis">
        <term><command>whatis</command></term>
        <listitem>
          <para>Cherche la base de données <command>whatis</command> et affiche les descriptions courtes des commandes 
          système qui contiennent le mot-clé donné</para>
          <indexterm zone="ch-system-man whatis">
            <primary sortas="b-whatis">whatis</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
