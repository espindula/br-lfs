<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<sect1 id="ch-system-ncurses" role="wrap">
  <?dbhtml filename="ncurses.html"?>

  <title>Ncurses-&ncurses-version;</title>

  <indexterm zone="ch-system-ncurses">
    <primary sortas="a-Ncurses">Ncurses</primary>
  </indexterm>

  <sect2 role="package">
    <title/>

    <para>Le paquet Ncurses contient les bibliothèques de gestion des
    écrans type caractère, indépendant des terminaux.</para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Ncurses</title>

    <para os="p1">Le correctif suivant incorpore les mises à jour de la branche &ncurses-version; issue des  
    développeurs de Ncurses&nbsp;:</para>

<screen os="p2"><userinput>patch -Np1 -i ../&ncurses-branch_update-patch;</userinput></screen>

    <para os="a">Préparez la compilation de Ncurses&nbsp;:</para>

<screen os="b"><userinput>./configure --prefix=/usr --libdir=/lib \
    --with-shared --without-debug --enable-widec \
    --with-manpage-format=normal \
    --with-default-terminfo-dir=/usr/share/terminfo</userinput></screen>

    <para os="c">Compilez le paquet&nbsp;:</para>

<screen os="d"><userinput>make</userinput></screen>

    <para os="e">Ce paquet a une suite de tests qu'on peut lancer après avoir
    installé le paquet. Les tests se trouvent dans le répertoire
    <filename class="directory">test/</filename>. Voir le fichier
    <filename>README</filename> de ce répertoire pour les détails.</para>

    <para os="f">Installez le paquet&nbsp;:</para>

<screen os="g"><userinput>make install</userinput></screen>

    <para os="h">Déplacez les bibliothèques statiques de Ncurses au bon endroit&nbsp;:</para>

<screen os="i"><userinput>mv -v /lib/lib{panelw,menuw,formw,ncursesw,ncurses++w}.a /usr/lib</userinput></screen>

    <para os="j">Créez des liens symboliques dans <filename class="directory">/usr/lib:</filename></para>

<screen os="k"><userinput>rm -v /lib/lib{ncursesw,menuw,panelw,formw}.so
ln -svf ../../lib/libncursesw.so.5 /usr/lib/libncursesw.so
ln -svf ../../lib/libmenuw.so.5 /usr/lib/libmenuw.so
ln -svf ../../lib/libpanelw.so.5 /usr/lib/libpanelw.so
ln -svf ../../lib/libformw.so.5 /usr/lib/libformw.so</userinput></screen>

    <para os="l">Maintenant, nous allons rendre notre Ncurses compatible pour que les vieux programmes non compatibles avec widec se construisent correctement&nbsp;:</para>

<screen os="m"><userinput>for lib in curses ncurses form panel menu ; do
        echo "INPUT(-l${lib}w)" > /usr/lib/lib${lib}.so
        ln -sfv lib${lib}w.a /usr/lib/lib${lib}.a
done
ln -sfv libncursesw.so /usr/lib/libcursesw.so
ln -sfv libncursesw.a /usr/lib/libcursesw.a
ln -sfv libncurses++w.a /usr/lib/libncurses++.a
ln -sfv ncursesw5-config /usr/bin/ncurses5-config</userinput></screen>

    <para os="n">Maintenant, nous allons créer un lien symbolique pour /usr/share/terminfo dans
     <filename class="directory">/usr/lib</filename> pour des questions de compatibilité&nbsp;:</para>
 
<screen os="o"><userinput>ln -sfv ../share/terminfo /usr/lib/terminfo</userinput></screen>

  </sect2>

  <sect2 id="contents-ncurses" role="content">
    <title>Contenu de Ncurses</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>captoinfo (lien vers tic), clear, infocmp, infotocap (lien vers tic),
        ncursesw5-config, reset (lien vers tset), tabs, tic, toe, tput et tset</seg>
        <seg>libcursesw.so (link to libncursesw.so), libformw.[a,so] et
        libpanelw.[a,so]</seg>
        <seg>/usr/share/tabset, /usr/share/terminfo</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="captoinfo">
        <term><command>captoinfo</command></term>
        <listitem>
          <para>Convertit une description termcap en description terminfo</para>
          <indexterm zone="ch-system-ncurses captoinfo">
            <primary sortas="b-captoinfo">captoinfo</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="clear">
        <term><command>clear</command></term>
        <listitem>
          <para>Vide l'écran, si possible</para>
          <indexterm zone="ch-system-ncurses clear">
            <primary sortas="b-clear">clear</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="infocmp">
        <term><command>infocmp</command></term>
        <listitem>
          <para>Compare ou affiche des descriptions terminfo</para>
          <indexterm zone="ch-system-ncurses infocmp">
            <primary sortas="b-infocmp">infocmp</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="infotocap">
        <term><command>infotocap</command></term>
        <listitem>
          <para>Convertit une description terminfo en description termcap</para>
          <indexterm zone="ch-system-ncurses infotocap">
            <primary sortas="b-infotocap">infotocap</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ncursesw5-config">
        <term><command>ncursesw5-config</command></term>
        <listitem>
          <para>Fournit des informations de configuration de ncurses</para>
          <indexterm zone="ch-system-ncurses ncursesw5-config">
            <primary sortas="b-ncursesw5-config">ncursesw5-config</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="reset">
        <term><command>reset</command></term>
        <listitem>
          <para>Réinitialise un terminal à ses valeurs par défaut</para>
          <indexterm zone="ch-system-ncurses reset">
            <primary sortas="b-reset">reset</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="tabs">
        <term><command>tabs</command></term>
        <listitem>
          <para>Initialise et vide des taquets de tab sur un terminal</para>
          <indexterm zone="ch-system-ncurses tabs">
            <primary sortas="b-tabs">tabs</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="tic">
        <term><command>tic</command></term>
        <listitem>
          <para>Le compilateur entrée-description qui traduit un fichier terminfo à partir du format source en format binaire requis pour les routines de la bibliothèque 
          ncurses.  Un fichier terminfo contient des informations sur les possibilités d'un terminal donné</para>
          <indexterm zone="ch-system-ncurses tic">
            <primary sortas="b-tic">tic</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="toe">
        <term><command>toe</command></term>
        <listitem>
          <para>Liste tous les types de terminaux disponibles, en donnant leur nom primaire et leur description</para>
          <indexterm zone="ch-system-ncurses toe">
            <primary sortas="b-toe">toe</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="tput">
        <term><command>tput</command></term>
        <listitem>
          <para>Rend disponibles les fonctionalités dépendantes du terminal pour le shell&nbsp;; il peut aussi être utilisé pour réinitialiser ou paramétrer un terminal ou 
          d'afficher son nom long</para>
          <indexterm zone="ch-system-ncurses tput">
            <primary sortas="b-tput">tput</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="tset">
        <term><command>tset</command></term>
        <listitem>
          <para>Peut être utilisé pour initialiser des terminaux</para>
          <indexterm zone="ch-system-ncurses tset">
            <primary sortas="b-tset">tset</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libcursesw">
        <term><filename class="libraryfile">libcursesw</filename></term>
        <listitem>
          <para>Un lien vers <filename>libncursesw</filename></para>
          <indexterm zone="ch-system-ncurses libcursesw">
            <primary sortas="c-libcurses">libcursesw</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libncursesw">
        <term><filename class="libraryfile">libncursesw</filename></term>
        <listitem>
          <para>Contient des fonctions pour afficher du texte de
          façons complexes sur un écran de terminal&nbsp;; un bon exemple
          d'utilisation de ces fonctions est le menu affiché par le
          <command>make menuconfig</command> du noyau</para>
          <indexterm zone="ch-system-ncurses libncursesw">
            <primary sortas="c-libncurses">libncursesw</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libformw">
        <term><filename class="libraryfile">libformw</filename></term>
        <listitem>
          <para>Contient des fonctions pour implémenter des formulaires</para>
          <indexterm zone="ch-system-ncurses libformw">
            <primary sortas="c-libform">libformw</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libmenuw">
        <term><filename class="libraryfile">libmenuw</filename></term>
        <listitem>
          <para>Contient des fonctions pour implémenter des menus</para>
          <indexterm zone="ch-system-ncurses libmenuw">
            <primary sortas="c-libmenu">libmenuw</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libpanelw">
        <term><filename class="libraryfile">libpanelw</filename></term>
        <listitem>
          <para>Contient des fonctions pour implémenter des panneaux</para>
          <indexterm zone="ch-system-ncurses libpanelw">
            <primary sortas="c-libpanel">libpanelw</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>

