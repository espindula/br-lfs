<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<sect1 id="ch-system-vim" role="wrap">
  <?dbhtml filename="vim.html"?>

  <title>Vim-&vim-version;</title>

  <indexterm zone="ch-system-vim">
    <primary sortas="a-Vim">Vim</primary>
  </indexterm>

  <sect2 role="package">
    <title/>

    <para>Le paquet Vim contient un puissant éditeur de texte.</para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Vim</title>

    <tip os="t1">

      <title>Alternatives à Vim</title>

      <para>Si vous préférez un autre éditeur&mdash;comme Emacs, Joe, ou
      Nano&mdash;merci de vous
      référer à <ulink url="&cblfs-root;index.php/Category:Text_Editors"/> pour
      des instructions d'installation.</para>
    </tip>


    <para os="p1">Le correctif suivant incorpore toutes les mises à jour de la branche &vim-version; issue des 
    développeurs de Vim&nbsp;:</para>

<screen os="p2"><userinput>patch -Np1 -i ../&vim-branch_update-patch;</userinput></screen>


    <para os="b">Modifiez l'emplacement par défaut du fichier de configuration <filename>vimrc</filename> vers
    <filename class="directory">/etc</filename>&nbsp;:</para>

<screen os="c"><userinput>echo '#define SYS_VIMRC_FILE "/etc/vimrc"' &gt;&gt; src/feature.h</userinput></screen>

    <para os="d">Préparez la compilation de Vim&nbsp;:</para>

<screen os="e"><userinput>./configure \
    --prefix=/usr --enable-multibyte</userinput></screen>

    <variablelist os="f">
      <title>Voici la signification des options de configure&nbsp;:</title>

      <varlistentry>
        <term><parameter>--enable-multibyte</parameter></term>
        <listitem>
        <para>Ce commutateur optionnel mais hautement recommandé inclut le
        support pour l'édition de fichiers comprenant des codages de caractères
        multioctets. Ceci est nécessaire dans le cas d'une utilisation d'une
        locale avec un ensemble de caractères multi-octets. Ce commutateur peut aussi
        être utile pour avoir la capacité d'éditer des fichiers créés initialement avec
        des distributions Linux comme Fedora qui utilise UTF-8 comme ensemble de
        caractères par défaut.</para>
        </listitem>
      </varlistentry>

    </variablelist>

    <para os="g">Compilez le paquet&nbsp;:</para>

<screen os="h"><userinput>make</userinput></screen>

    <para os="i">Pour tester les résultats, exécutez&nbsp;:</para>

<screen os="i2"><userinput remap="test">make test</userinput></screen>

    <para os="i3">Néanmoins, cette suite de tests affiche beaucoup de données binaires à l'écran, ce qui peut provoquer des problèmes 
    avec les paramètres du terminal actuel. Vous pouvez résoudre cela en redirigeant la sortie vers un fichier journal</para>

    <para os="j">Installez le paquet&nbsp;:</para>

<screen os="k"><userinput>make install</userinput></screen>

    <para os="l">Beaucoup d'utilisateurs sont habitués à utiliser
    <command>vi</command> au lieu de <command>vim</command>. Certains programmes comme
    <command>vigr</command> et <command>vipw</command> utilisent aussi 
    <command>vi</command>. Créez un lien symbolique pour permettre l'exécution de
    <command>vim</command> lorsque les utilisateurs entrent habituellement <command>vi</command> et pour permettre aux 
    programmes qui utilisent <command>vi</command> de fonctionner&nbsp;:</para>

<screen os="m"><userinput>ln -sv vim /usr/bin/vi</userinput></screen>

<para os="n">Par défaut, la documentation de Vim est installée dans <filename class="directory">/usr/share/vim</filename>. Le lien symbolique suivant permet l'accès à la documentation via 
<filename class="directory">/usr/share/doc/vim-&vim-version;</filename>, le rendant cohérent avec l'emplacement de la documentation pour d'autres paquets&nbsp;:</para>

<screen os="o"><userinput>ln -sv ../vim/vim&vim-version2;/doc /usr/share/doc/vim-&vim-version;</userinput></screen>

    <para os="p">Si un système X Window va être installé sur votre système CLFS,
    il pourrait être nécessaire de recompiler Vim après avoir installé
    X. Vim fournit alors une jolie version GUI de l'éditeur qui requiert
    X et quelques autres bibliothèques pour s'installer. Pour plus
    d'informations sur ce processus, référez-vous à la documentation de
    Vim et à la page d'installation de Vim dans CBLFS sur <ulink url="&cblfs-root;index.php/Vim"/>.</para>
  </sect2>

  <sect2 id="conf-vim" role="configuration">
    <title>Configurer Vim</title>

    <indexterm zone="conf-vim">
      <primary sortas="e-/etc/vimrc">/etc/vimrc</primary>
    </indexterm>

    <para>Par défaut, <command>vim</command> est lancé en mode
    compatible vi. Ceci pourrait être nouveau pour les personnes qui ont
    utilisé d'autres éditeurs dans le passé. Le paramètre
    <quote>nocompatible</quote> est inclus ci-dessous pour surligner le
    fait qu'un nouveau comportement est en cours d'utilisation. Il
    rappelle aussi à ceux qui voudraient le changer en mode
    <quote>compatible</quote> qu'il devrait être le premier paramètre
    dans le fichier de configuration. Ceci est nécessaire car il modifie
    d'autres paramètres et la surcharge doit survenir après ce
    paramètre. Créez un fichier de configuration <command>vim</command>
    par défaut en lançant ce qui suit&nbsp;:</para>

<screen><userinput>cat &gt; /etc/vimrc &lt;&lt; "EOF"
<literal>" Début de /etc/vimrc

set nocompatible
set backspace=2
set ruler
syntax on
if (&amp;term == "iterm") || (&amp;term == "putty")
  set background=dark
endif

" Fin de /etc/vimrc</literal>
EOF</userinput></screen>

    <para>L'option <parameter>set nocompatible</parameter> change le
    comportement de <command>vim</command> d'une façon plus utile que le
    comportement compatible vi. Supprimez <quote>no</quote> pour
    conserver le comportement de l'ancien <command>vi</command>. Le
    paramètre <parameter>set backspace=2</parameter> permet le retour en
    arrière après des sauts de ligne, l'indentation automatique et le
    début de l'insertion. L'instruction <parameter>syntax on</parameter>
    active la coloration syntaxique. Enfin, l'instruction
    <emphasis>if</emphasis> avec <parameter>set
    background=dark</parameter> corrige l'estimation de
    <command>vim</command> concernant la couleur du fond de certains
    émulateurs de terminaux. Ceci permet d'utiliser de meilleurs gammes
    de couleurs pour la coloration syntaxique, notamment avec les fonds
    noirs de ces programmes.</para>

    <para>La documentation pour les autres options disponibles peut être
    obtenue en lançant la commande suivante&nbsp;:</para>

<screen role="nodump"><userinput>vim -c ':options'</userinput></screen>

  </sect2>

  <sect2 id="contents-vim" role="content">
    <title>Contenu de Vim</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Répertoire installé</segtitle>
      <seglistitem>
        <seg>efm_filter.pl, efm_perl.pl, ex (link to vim), less.sh, mve.awk,
        pltags.pl, ref, rview (link to vim), rvim (link to vim), shtags.pl,
        tcltags, vi (link to vim), view (link to vim), vim, vim132, vim2html.pl,
        vimdiff (link to vim), vimm, vimspell.sh, vimtutor et xxd</seg>
        <seg>/usr/share/vim</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="efm_filter.pl">
        <term><command>efm_filter.pl</command></term>
        <listitem>
          <para>Un filtre pour créer un fichier d'erreurs lisible 
          par <command>vim</command></para>
          <indexterm zone="ch-system-vim efm_filter.pl">
            <primary sortas="b-efm_filter.pl">efm_filter.pl</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="efm_perl.pl">
        <term><command>efm_perl.pl</command></term>
        <listitem>
          <para>Reformatte les messages d'erreur de l'interpréteur Perl pour une utilisation avec le mode 
          <quote>quickfix</quote> de <command>vim</command></para>
          <indexterm zone="ch-system-vim efm_perl.pl">
            <primary sortas="b-efm_perl.pl">efm_perl.pl</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ex">
        <term><command>ex</command></term>
        <listitem>
          <para>Lance <command>vim</command> en mode ex</para>
          <indexterm zone="ch-system-vim ex">
            <primary sortas="b-ex">ex</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="less.sh">
        <term><command>less.sh</command></term>
        <listitem>
          <para>Un script qui démarre <command>vim</command> avec less.vim</para>
          <indexterm zone="ch-system-vim less.sh">
            <primary sortas="b-less.sh">less.sh</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mve.awk">
        <term><command>mve.awk</command></term>
        <listitem>
          <para>Montre les erreurs de <command>vim</command></para>
          <indexterm zone="ch-system-vim mve.awk">
            <primary sortas="b-mve.awk">mve.awk</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="pltags.pl">
        <term><command>pltags.pl</command></term>
        <listitem>
          <para>Crée un fichier de balises pour le code Perl pour une utilisation par
          <command>vim</command></para>
          <indexterm zone="ch-system-vim pltags.pl">
            <primary sortas="b-pltags.pl">pltags.pl</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ref">
        <term><command>ref</command></term>
        <listitem>
          <para>Vérifie l'orthographe des arguments</para>
          <indexterm zone="ch-system-vim ref">
            <primary sortas="b-ref">ref</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="rview">
        <term><command>rview</command></term>
        <listitem>
          <para>Est une version restreinte de <command>view</command>&nbsp;; aucune commande shell ne peut être lancée et 
          <command>view</command> ne peut pas être suspendu</para>
          <indexterm zone="ch-system-vim rview">
            <primary sortas="b-rview">rview</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="rvim">
        <term><command>rvim</command></term>
        <listitem>
          <para>Est une version restreinte de <command>vim</command>&nbsp;; aucune commande shell ne peut être lancée et 
          <command>vim</command> ne peut pas être suspendu</para>
          <indexterm zone="ch-system-vim rvim">
            <primary sortas="b-rvim">rvim</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="shtags.pl">
        <term><command>shtags.pl</command></term>
        <listitem>
          <para>Génère un fichier de balises pour les scripts Perl</para>
          <indexterm zone="ch-system-vim shtags.pl">
            <primary sortas="b-shtags.pl">shtags.pl</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="tcltags">
        <term><command>tcltags</command></term>
        <listitem>
          <para>Génère un fichier de balises pour les scripts TCL</para>
          <indexterm zone="ch-system-vim tcltags">
            <primary sortas="b-tcltags">tcltags</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="view">
        <term><command>view</command></term>
        <listitem>
          <para>Lance <command>vim</command> en mode lecture seule</para>
          <indexterm zone="ch-system-vim view">
            <primary sortas="b-view">view</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="vi">
        <term><command>vi</command></term>
        <listitem>
          <para>Lien vers <command>vim</command></para>
          <indexterm zone="ch-system-vim vi">
            <primary sortas="b-vi">vi</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="vim">
        <term><command>vim</command></term>
        <listitem>
          <para>Est l'éditeur</para>
          <indexterm zone="ch-system-vim vim">
            <primary sortas="b-vim">vim</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="vim132">
        <term><command>vim132</command></term>
        <listitem>
          <para>Lance <command>vim</command> avec le mode terminal en 132 colonnes</para>
          <indexterm zone="ch-system-vim vim132">
            <primary sortas="b-vim132">vim132</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="vim2html.pl">
        <term><command>vim2html.pl</command></term>
        <listitem>
          <para>Convertit la documentation Vim en <foreignphrase>HypterText Markup Language</foreignphrase>
          (HTML)</para>
          <indexterm zone="ch-system-vim vim2html.pl">
            <primary sortas="b-vim2html.pl">vim2html.pl</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="vimdiff">
        <term><command>vimdiff</command></term>
        <listitem>
          <para>Edite deux ou trois versions d'un fichier avec <command>vim</command> et montre les
          différences</para>
          <indexterm zone="ch-system-vim vimdiff">
            <primary sortas="b-vimdiff">vimdiff</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="vimm">
        <term><command>vimm</command></term>
        <listitem>
          <para>Active le modèle d'entrée DEC locator sur un terminal distant</para>
          <indexterm zone="ch-system-vim vimm">
            <primary sortas="b-vimm">vimm</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="vimspell.sh">
        <term><command>vimspell.sh</command></term>
        <listitem>
          <para>Vérifie l'orthographe d'un fichier et génère l'état de la syntaxe qui doit être surlignée dans
          <command>vim</command>. Ce script exige la vieille commande <command>spell</command> qui n'est fournie ni dans CLFS 
          ni dans CBLFS</para>
          <indexterm zone="ch-system-vim vimspell.sh">
            <primary sortas="b-vimspell.sh">vimspell.sh</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="vimtutor">
        <term><command>vimtutor</command></term>
        <listitem>
          <para>Enseigne les touches et les commandes de base de  
          <command>vim</command></para>
          <indexterm zone="ch-system-vim vimtutor">
            <primary sortas="b-vimtutor">vimtutor</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="xxd">
        <term><command>xxd</command></term>
        <listitem>
          <para>Crée un hexa du fichier donné&nbsp;; il peut aussi faire l'inverse et peut donc être utilisé pour corriger 
          du binaire</para>
          <indexterm zone="ch-system-vim xxd">
            <primary sortas="b-xxd">xxd</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
