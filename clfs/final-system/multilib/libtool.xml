<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<sect1 id="ch-system-libtool-32" role="wrap">
  <?dbhtml filename="libtool.html"?>

  <title>Bibliothèques Libtool-&libtool-version; 32 bits</title>

<!-- with the introduction of an LDEMULATION  on make check, to fix a test
 failure which has appeared for unknown reasons, this text is now specific
 to mips -o32. -->

  <indexterm zone="ch-system-libtool-32">
    <primary sortas="a-Libtool">Libtool</primary>
    <secondary>32 bits</secondary>
  </indexterm>

  <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
  href="../common/libtool.xml"
  xpointer="xpointer(//*[@role='package'])"/>

  <sect2 role="installation">
    <title>Installation de Libtool</title>

    <para os="a1">Le fichier <filename>config.cache</filename> suivant permet 
    de forcer le chemin de recherche par défaut pour prendre en compte 
    l'environnement multilib&nbsp;:</para>

<screen os="a2"><userinput>echo "lt_cv_sys_dlsearch_path='/lib /usr/lib /usr/local/lib /opt/lib'" &gt; config.cache</userinput></screen>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../common/libtool.xml"
    xpointer="xpointer(//*[@os='a'])"/>

<screen os="b"><userinput>CC="gcc ${BUILD32}" ./configure --prefix=/usr \
    --cache-file=config.cache</userinput></screen>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../common/libtool.xml"
    xpointer="xpointer(//*[@os='c'])"/>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../common/libtool.xml"
    xpointer="xpointer(//*[@os='d'])"/>

    <para os="e">Pour tester les résultats, vous devez d'abord savoir si votre machine 
    a une architecture big-endian ou little-endian. Les machines SGI sont généralement de type 
    big-endian et les Cobalt sont de type little-endian. Si vous avez un doute, <command>echo ${MACHTYPE} | grep 'el-'
    </command> trouvera une occurrence sur une machine de type little-endian.</para>

    <para os="e2">Pour tester les résultats sur une machine little-endian, lancez&nbsp;:
    <userinput>make LDEMULATION=elf32ltsmip check</userinput>.</para>

    <para os="e1">Pour tester les résultats sur une machine big-endian, lancez&nbsp;:
    <userinput>make LDEMULATION=elf32btsmip check</userinput>.</para>

    <variablelist os="c">
      <title>Voici la signification du paramètre de make&nbsp;:</title>

      <varlistentry>
        <term><parameter>LDEMULATION=[emulation]</parameter></term>
        <!-- <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
        href="../ppc64/libtool.xml"
        xpointer="xpointer(//*[@os='c2'])"/> -->
        <listitem os="c2">
          <para>Libtool a tendance à se comporter de façon inattendue en environnement multilib, 
          du moins sur des architectures autres que celle par défaut. On ne saisit pas tout à fait 
          les causes de ces erreurs car elles peuvent apparaître ou disparaître bon gré mal gré, 
          même lors de changements normalement inoffensifs au bon déroulement de la compilation. 
          Dans cette version du livre, l'un des tests, pdemo-make, ne se lie pas correctement 
          car il cherche à lier les objets 32 bits aux bibliothèques 64 bits du système. 
          Cette option permet à ce test de réussir sans impacter les autres tests (par rapport aux méthodes 
          de correction plus traditionnelles comme spécifier 
          <literal>LD="gcc ${BUILD32}"</literal>, ce qui empêche l'exécution de nombreux test ou bien
          configurer avec <literal>LDFLAGS='-L/lib -L/usr/lib'</literal>, ce qui dans ce cas fait échouer 
          d'autres tests).</para>
        </listitem>
      </varlistentry>

    </variablelist>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../common/libtool.xml"
    xpointer="xpointer(//*[@os='f'])"/>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../common/libtool.xml"
    xpointer="xpointer(//*[@os='g'])"/>

    <para os="m1">Préparez <filename>libtool</filename> à être pris en charge par le
    programme enveloppe multi-architectures (« multiarch-wrapper »). Libtool seul 
    ne supporte pas l'environnement multilib&nbsp;:</para>

<screen os="m2"><userinput>mv -v /usr/bin/libtool{,-32}</userinput></screen>

  </sect2>

  <sect2 role="content">
    <title/>

    <para>Les détails sur ce paquet sont disponibles dans <xref
    linkend="contents-libtool" role="."/></para>

  </sect2>

</sect1>
