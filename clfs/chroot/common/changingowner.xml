<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<sect1 id="ch-chroot-changingowner">
  <?dbhtml filename="changingowner.html"?>

  <title>Changer de  propriétaire</title>

    <note>
      <para>Cette étape n'est pas facultative vu que certains binaires de
      <filename class="directory">/tools</filename> sont réglés sur u+s. Laisser
      les droits en l'état pourrait entraîner que certaines commandes,
      en particulier mount, échouent plus loin.</para>
    </note>

  <para os="a">Pour l'instant, les répertoires
  <filename class="directory">$CLFS/tools</filename> et <filename class="directory">/cross-tools</filename> appartiennent à 
  l'utilisateur
  <emphasis>clfs</emphasis>, un utilisateur
  qui n'existe que sur le système hôte. Bien que les répertoires <filename class="directory">/tools</filename> et 
  <filename class="directory">/cross-tools</filename> puissent être effacés une fois que
  la construction du système CLFS est finie, vous 
  pouvez les garder pour construire des systèmes CLFS supplémentaires. Si les répertoires 
  <filename class="directory">/tools</filename> et <filename class="directory">/cross-tools</filename> restent ainsi, les 
  fichiers appartiennent à un ID utilisateur sans compte correspondant. C'est dangereux
  car un compte utilisateur créé plus tard pourrait se voir attribuer ce même
  ID utilisateur et être propriétaire du répertoire
  <filename class="directory">/tools</filename> et de tous les fichiers
  à l'intérieur, les exposant ainsi à des manipulations malintentionnées.</para>

  <para os="b">Pour éviter ce problème, vous pouvez ajouter l'utilisateur
  <systemitem class="username">clfs</systemitem> au nouveau système CLFS
  plus tard lorsque vous créerez le fichier <filename>/etc/passwd</filename>, en prenant garde à 
  assigner les ID utilisateur et groupe de la même manière que sur le
  système hôte. Mieux encore, changez le propriétaire des répertoires
  <filename class="directory">/tools</filename> et <filename class="directory">/cross-tools</filename> en les affectant à 
  l'utilisateur <systemitem class="username">root</systemitem> en exécutant les commandes
  suivantes&nbsp;:</para>

<screen os="c"><userinput>chown -Rv 0:0 /tools
chown -Rv 0:0 /cross-tools</userinput></screen>

    <para os="d">Les commandes utilisent <parameter>0:0</parameter> au lieu de <parameter>root:root</parameter> car 
    <command>chown</command> n'est pas capable de résoudre le nom <quote>root</quote> jusqu'à ce que le fichier
    <filename>passwd</filename> a été créé.</para>

</sect1>
