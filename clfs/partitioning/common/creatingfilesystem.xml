<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<sect1 id="ch-partitioning-creatingfilesystem">
  <?dbhtml filename="creatingfilesystem.html"?>

  <title>Créer un système de fichiers sur la partition</title>

  <para os="a">Maintenant qu'une partition vierge est prête, le système de
  fichiers peut
  être créé. Le système le plus communément utilisé dans le monde Linux
  est le système de fichiers étendu, deuxième version (<systemitem class="filesystem">ext2</systemitem>), mais
  avec les nouveaux disques haute capacité, les systèmes de fichiers
  journalisés deviennent de plus en plus populaires. Nous allons créer un système de fichiers
  <systemitem class="filesystem">ext2</systemitem>.
  Les instructions de construction d'autres systèmes de fichiers sont disponibles dans
  <ulink url="&cblfs-root;index.php?section=6#File_System"/>.</para>

  <para os="b">Pour créer un système de fichiers
  <systemitem class="filesystem">ext2</systemitem> sur la partition CLFS,
  lancez ce qui suit en tant que <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen os="c"><userinput>mke2fs /dev/<replaceable>[xxx]</replaceable></userinput></screen>

  <para os="d">Remplacez <replaceable>[xxx]</replaceable> par le nom de
  la partition CLFS (<filename class="devicefile">sda5</filename> dans
  notre exemple précédent).</para>

  <note os="e">
    <para>Quelques distributions hôtes utilisent des fonctionnalités
    personnalisées dans leur outil de création de systèmes de fichiers
    (e2fsprogs). Ceci peut poser des problèmes lors du démarrage dans
    votre nouveau système CLFS au chapitre 9 car toutes ces fonctionnalités ne
    seront pas supportées par la version d'e2fsprogs installée par CLFS&nbsp;;
    vous aurez une erreur du type <computeroutput>unsupported filesystem
    features, upgrade your e2fsprogs</computeroutput>. Pour
    voir si votre système hôte utilise des améliorations
    personnalisées, utilisez la commande suivante&nbsp;:</para>

<screen os="f"><userinput>debugfs -R feature /dev/<replaceable>[xxx]</replaceable></userinput></screen>

    <para>Si la sortie contient des fonctionnalités autres que dir_index,
    filetype, large_file, resize_inode ou sparse_super, 
    alors votre système hôte pourrait
    avoir des améliorations personnalisées. Dans ce cas, pour éviter tout
    problème ultérieur, vous devez compiler le paquet e2fsprogs et
    utiliser les binaires résultant de cette compilation pour re-créer
    le système de fichiers sur votre partition CLFS. Pour ce faire, lancez les
    commandes suivantes en tant que <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen os="g"><userinput>cd /tmp
tar xjf /path/to/sources/e2fsprogs-&e2fsprogs-version;.tar.bz2
cd e2fsprogs-&e2fsprogs-version;
mkdir build
cd build
../configure
make #Remarquez que nous n'exécutons pas intentionnellement "make install"
./misc/mke2fs /dev/<replaceable>[xxx]</replaceable>
cd /tmp
rm -rf e2fsprogs-&e2fsprogs-version;</userinput></screen>

  </note>

  <para os="h">Si vous avez créé une nouvelle partition d'échange, vous devrez
  l'initialiser, pour pouvoir être utilisée, en exécutant la
  commande ci-dessous en tant que <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen os="i"><userinput>mkswap /dev/<replaceable>[yyy]</replaceable></userinput></screen>

  <para os="j">Remplacez <replaceable>[yyy]</replaceable>  par le nom de la partition
  d'échange. Si vous utilisez une partition d'échange existante, vous n'avez pas
  besoin de la formater.</para>

</sect1>

