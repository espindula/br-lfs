<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<sect1 id="ch-temp-system-vim" role="wrap">
  <?dbhtml filename="vim.html"?>

  <title>Vim-&vim-version;</title>

  <indexterm zone="ch-temp-system-vim">
    <primary sortas="a-Vim">Vim</primary>
    <secondary>système temporaire</secondary>
  </indexterm>

  <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
  href="../../final-system/common/vim.xml"
  xpointer="xpointer(//*[@role='package'])"/>

  <sect2 role="installation">
    <title>Installation de VIM</title>

    <para os="a">Nous compilerons Vim de façon croisée pour que nous puissions avoir un éditeur de textes
    dans
    <filename class="directory">/tools</filename>. Vim n'est pas techniquement
    nécessaire dans le système temporaire, car il n'est pas la pour satisfaire une dépendance
    de paquet dans le système final, mais nous pensons qu'un éditeur de textes est un outil extrèmement
     utile à avoir ici.
    <!-- If you prefer a different
    editor, you may check the hints project at <ulink url="&hints-root;" />
    for information on cross-compiling other text editors. (placeholder -
    uncomment this sentence if/when such information actually exists)--></para>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../final-system/common/vim.xml"
    xpointer="xpointer(//*[@os='p1'])"/>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../final-system/common/vim.xml"
    xpointer="xpointer(//*[@os='p2'])"/>

    <para os="c1">Le script <command>configure</command> est tel qu'il s'arrête au premier signe d'une compilation croisée. 
    Améliorez cela en initialisant les valeurs en cache de ces tests avec la commande 
    suivante&nbsp;:</para>

<screen os="c2"><userinput>cat &gt; src/auto/config.cache &lt;&lt; "EOF"
vim_cv_getcwd_broken=no
vim_cv_memmove_handles_overlap=yes
vim_cv_stat_ignores_slash=no
vim_cv_terminfo=yes
vim_cv_toupper_broken=no
vim_cv_tty_group=world
EOF</userinput></screen>

  <para os="b">Modifiez l'emplacement par défaut du fichier de configuration 
    <filename>vimrc</filename> vers 
    <filename class="directory">/tools/etc</filename>&nbsp;:</para>

<screen os="c"><userinput>echo '#define SYS_VIMRC_FILE "/tools/etc/vimrc"' &gt;&gt; src/feature.h</userinput></screen>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../final-system/common/vim.xml"
    xpointer="xpointer(//*[@os='d'])"/>

<screen os="e"><userinput>./configure --build=${CLFS_HOST} --host=${CLFS_TARGET} \
    --prefix=/tools --enable-gui=no --disable-gtktest --disable-xim \
    --disable-gpm --without-x --disable-netbeans --with-tlib=ncurses</userinput></screen>

    <variablelist os="f">
      <title>Signification des nouvelles options de configure:</title>

      <varlistentry>
        <term><parameter>--enable-gui=no --disable-gtktest --disable-xim --disable-gpm --without-x --disable-netbeans</$
        <listitem>
          <para>Ces options empêchent Vim d'essayer de se lier aux bibliothèques
          qui peuvent être sur l'hôte mais qui n'existe pas dans l'environement de construction
          temporaire.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><parameter>--with-tlib=ncurses</parameter></term>
        <listitem>
          <para>Indique à Vim d'utiliser Ncurses comme sa bibliothèque de terminal.</para>
        </listitem>
      </varlistentry>

    </variablelist>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../final-system/common/vim.xml"
    xpointer="xpointer(//*[@os='g'])"/>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../final-system/common/vim.xml"
    xpointer="xpointer(//*[@os='h'])"/>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../final-system/common/vim.xml"
    xpointer="xpointer(//*[@os='j'])"/>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../final-system/common/vim.xml"
    xpointer="xpointer(//*[@os='k'])"/>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../final-system/common/vim.xml"
    xpointer="xpointer(//*[@os='l'])"/>

<screen os="m"><userinput>ln -sv vim /tools/bin/vi</userinput></screen>

    <para os="tv1" >Créez un vimrc temporaire pour qu'il fonctionne davantage 
    selon la manière à laquelle vous pourriez vous attendre. C'est expliqué plus
    amplement dans le szstème final&nbsp;:</para>

<screen os="tv2"><userinput>cat &gt; /tools/etc/vimrc &lt;&lt; "EOF"
<literal>" Début de /tools/etc/vimrc

set nocompatible
set backspace=2
set ruler
syntax on

" Fin de /tools/etc/vimrc</literal>
EOF</userinput></screen>

  </sect2>

  <sect2 role="content">
    <title/>

    <para>Les détails sur ce paquet sont disponibles dans <xref
    linkend="contents-vim" role="."/></para>

  </sect2>

</sect1>
