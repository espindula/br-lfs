<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<sect1 id="ch-temp-system-bash" role="wrap">
  <?dbhtml filename="bash.html"?>

  <title>Bash-&bash-version;</title>

  <indexterm zone="ch-temp-system-bash">
    <primary sortas="a-Bash">Bash</primary>
    <secondary>système temporaire</secondary>
  </indexterm>

  <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
  href="../../final-system/common/bash.xml"
  xpointer="xpointer(//*[@role='package'])"/>

  <sect2 role="installation">
    <title>Installation de Bash</title>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../final-system/common/bash.xml"
    xpointer="xpointer(//*[@os='p1'])"/>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../final-system/common/bash.xml"
    xpointer="xpointer(//*[@os='p2'])"/>

    <para os="t1">Quand Bash est compilé de manière croisée, il ne peut notamment
    pas tester la présence de pipes (tubes) nommés. 
    Si vous avez utilisé <command>su</command> pour devenir utilisateur non privilégié, cette combinaison aura pour conséquence que Bash se 
    construira sans <emphasis>substitution de processus</emphasis>, ce qui va casser un des scripts de test de C++ dans
    <literal>glibc</literal>. Ce qui suit empêche des problèmes futurs en sautant
    la vérification des tubes nommés et d'autres tests qui ne peuvent pas s'exécuter 
    lors d'une compilation croisée ou qui ne s'exécutent pas correctement&nbsp;:</para>

<screen os="t2"><userinput>cat &gt; config.cache &lt;&lt; "EOF"
ac_cv_func_mmap_fixed_mapped=yes
ac_cv_func_strcoll_works=yes
ac_cv_func_working_mktime=yes
bash_cv_func_sigsetjmp=present
bash_cv_getcwd_malloc=yes
bash_cv_job_control_missing=present
bash_cv_printf_a_format=yes
bash_cv_sys_named_pipes=present
bash_cv_ulimit_maxfds=yes
bash_cv_under_sys_siglist=yes
bash_cv_unusable_rtsigs=no
gt_cv_int_divbyzero_sigfpe=yes
EOF</userinput></screen>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../final-system/common/bash.xml"
    xpointer="xpointer(//*[@os='a'])"/>

<screen os="b"><userinput>./configure --prefix=/tools \
    --build=${CLFS_HOST} --host=${CLFS_TARGET} \
    --without-bash-malloc --cache-file=config.cache</userinput></screen>

    <variablelist os="c">
      <title>Voici la signification de la nouvelle option de configure&nbsp;:</title>

      <varlistentry>
        <term><parameter>--without-bash-malloc</parameter></term>
        <listitem>
          <para>Cette option désactive l'utilisation de la fonction d'allocation
              de mémoire de Bash (malloc) qui est connue pour  provoquer des
              erreurs de segmentation. En désactivant cette option, Bash
              utilisera les  fonctions malloc de Glibc qui sont plus
              stables.</para>
        </listitem>
      </varlistentry>

    </variablelist>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../final-system/common/bash.xml"
    xpointer="xpointer(//*[@os='d'])"/>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../final-system/common/bash.xml"
    xpointer="xpointer(//*[@os='e'])"/>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../final-system/common/bash.xml"
    xpointer="xpointer(//*[@os='g'])"/>

<screen os="h"><userinput>make install</userinput></screen>

  </sect2>

  <sect2 role="content">
    <title/>

    <para>Les détails sur ce paquet sont disponibles dans <xref
    linkend="contents-bash" role="."/></para>

  </sect2>

</sect1>
