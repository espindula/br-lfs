<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-final-preps-addinguser">
  <?dbhtml filename="addinguser.html"?>

  <title>Ajouter l'utilisateur CLFS</title>

  <para>Lorsque vous êtes connecté en tant qu'utilisateur
  <systemitem class="username">root</systemitem>, faire une seule
  erreur peut endommager voire dévaster votre système. Donc, nous
  recommandons de construire les paquets dans ce chapitre en tant
  qu'utilisateur non privilégié. Vous pouvez bien sûr utiliser
  votre propre nom d'utilisateur mais, pour faciliter l'établissement
  d'un environnement de travail propre, créez un nouvel utilisateur
  <systemitem class="username">clfs</systemitem> comme membre d'un
  nouveau groupe <systemitem class="groupname">clfs</systemitem>)
  utilisez-le lors du processus d'installation. En tant que <systemitem
  class="username">root</systemitem>, lancez les commandes suivantes
  pour créer le nouvel utilisateur&nbsp;:</para>

<screen><userinput>groupadd clfs
useradd -s /bin/bash -g clfs -d /home/clfs clfs
mkdir -pv /home/clfs
chown -v clfs:clfs /home/clfs</userinput></screen>

  <variablelist>
    <title>Voici la signification des options en ligne de commande&nbsp;:</title>

    <varlistentry>
      <term><parameter>-s /bin/bash</parameter></term>
      <listitem>
        <para>Ceci fait de <command>bash</command> le shell par défaut de
        l'utilisateur
        <systemitem class="username">dlfs</systemitem>.</para>

        <important>
          <para>Les instructions de construction supposent que vous utilisez le
          shell <command>bash</command>.</para>
        </important>

      </listitem>
    </varlistentry>

    <varlistentry>
      <term><parameter>-g clfs</parameter></term>
      <listitem>
        <para>Cette option ajoute l'utilisateur <systemitem class="username">clfs</systemitem>
        au groupe <systemitem class="groupname">clfs</systemitem>.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><parameter>clfs</parameter></term>
      <listitem>
        <para>Ceci est le nom réel du groupe et de l'utilisateur
        créé.</para>
      </listitem>
    </varlistentry>

  </variablelist>

  <para>Pour vous connecter en tant qu'utilisateur
  <systemitem class="username">clfs</systemitem> (et non pas de passer à
  l'utilisateur <systemitem class="username">clfs</systemitem> alors que
  vous êtes connecté en tant que  
  <systemitem class="username">root</systemitem>, ce qui ne requiert pas
  de mot de passe pour l'utilisateur
  <systemitem class="username">clfs</systemitem>, donnez un mot de passe
  à <systemitem class="username">clfs</systemitem>&nbsp;:</para>

<screen role="nodump"><userinput>passwd clfs</userinput></screen>

  <para>Donnez à 
  <systemitem class="username">clfs</systemitem> un accès complet à <filename class="directory">${CLFS}/cross-tools</filename> et à
  <filename class="directory">$CLFS/tools</filename> en indiquant que
  <systemitem class="username">clfs</systemitem> est le propriétaire des
  répertoires&nbsp;:</para>

<screen><userinput>chown -v clfs ${CLFS}/tools
chown -v clfs ${CLFS}/cross-tools</userinput></screen>


  <para>Si un répertoire de travail séparé a été créé comme suggéré,
  faites que l'utilisateur <systemitem class="username">clfs</systemitem>
  soit aussi le propriétaire de ce répertoire&nbsp;:</para>

<screen><userinput>chown -v clfs ${CLFS}/sources</userinput></screen>

  <para>Ensuite, connectez-vous en tant que 
  <systemitem class="username">clfs</systemitem>. Ceci peut se faire via
  une console virtuelle, avec le gestionnaire d'affichage ou avec la
  commande suivante de substitution d'utilisateur</para>

<screen role="nodump"><userinput>su - clfs</userinput></screen>

  <para>Le <quote><parameter>-</parameter></quote> indique à
  <command>su</command> un shell de connexion par opposition à
  un shell de non connexion. Vous trouverez
  la différence entre les deux types de shells dans la page man
  <filename>bash(1)</filename> et <command>info bash</command>.</para>

  <note>
    <para>Tant que rien d'autre n'est indiqué, toutes les commandes à partir
    de maintenant se lancent en tant qu'utilisateur
    <systemitem class="username">clfs</systemitem>.</para>
  </note>

</sect1>
