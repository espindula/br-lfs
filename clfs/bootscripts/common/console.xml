<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<sect1 id="ch-scripts-console">
  <?dbhtml filename="console.html"?>
  <title>Configurier la  console Linux</title>

  <indexterm zone="ch-scripts-console">
    <primary sortas="d-console">console</primary>
  <secondary>configuring</secondary></indexterm>

  <para>Cette section discute de la configuration des scripts de démarrage
  <command>console</command>, initialisant le plan de codage du clavier et la police de la console.
  Si des caractères non ASCII (par exemple, la livre anglaise et le
  caractère Euro) ne seront pas utilisés et que le clavier est un clavier US, passez cette section. Sans le fichier de configuration, le script de démarrage <command>console</command> ne
  fera rien.</para>

  <para>Le script lit le fichier
  <filename>/etc/sysconfig/console</filename> pour des informations de
  configuration. Décidez du plan de codage et de la police de la
  console à utiliser. Différents guides pratiques spécifiques aux
  langues peuvent aussi être d'une grande aide (voir
  <ulink url="http://www.tldp.org/HOWTO/HOWTO-INDEX/other-lang.html"/>. Un fichier 
  <filename>/etc/sysconfig/console</filename> préfabriqué avec des paramètres connus pour plusieurs pays  a été installé 
  avec le paquet CLFS-Bootscripts, donc vous pouvez décommenter la pection appropriée si votre pays est supporté. Si vous
  avez toujours des doutes, jetez un &oelig;il dans le
  répertoire
  <filename class="directory">/lib/kbd</filename> pour des plans de
  codage valides et des polices pour écran. Lisez les pages man de
  <filename>loadkeys(1)</filename> et de <filename>setfont(8)</filename>
  pour déterminer les bons arguments pour ces programmes. Une fois que vous êtes décidé, créez le fichier de configuration 
  avec la commande suivante&nbsp;:</para>

<screen><userinput>cat &gt;/etc/sysconfig/console &lt;&lt;"EOF"
<literal>KEYMAP="<replaceable>[arguments fpour loadkeys]</replaceable>"
FONT="<replaceable>[arguments pour setfont]</replaceable>"</literal>
EOF</userinput></screen>

  <para>Par exemple,  pour les utilisateurs espagnols qui veulent utiliser aussi le caractère Euro (accessible en appuyant 
  sur AltGr+E), les paramètres suivants sont corrects&nbsp;:</para>

<screen><userinput>cat &gt;/etc/sysconfig/console &lt;&lt;"EOF"
<literal>KEYMAP="es euro2"
FONT="lat9-16 -u iso01"</literal>
EOF</userinput></screen>

  <note>
    <para>La ligne <envar>FONT</envar> ci-dessus n'est correcte que pour l'encodage ISO 8859-15. Si vous utilisez ISO 8859-1, 
    et donc un signe livre anglaise au lieu de l'Euro, la ligne <envar>FONT</envar> adéquate serait&nbsp;:</para>

<screen><userinput>FONT="lat1-16"</userinput></screen>

  </note>

    <para>Ii la variable <envar>KEYMAP</envar> ou <envar>FONT</envar> n'est pas définie, le script d'initialisation 
    <command>console</command> ne se lancera pas sur le programme correspondant.</para>

    <para>Dans certains plans de codage, les touches Effacer et Supprimer envoient des caractères différents  de ceux par  
    défaut dans le plan de codage construit  dans le noyau. Ceci perturbe certaines applications. Par exemple, Emacs affiche 
    son aide (au lieu d'effacer  le caractère avant le curseur) quand on appuie sur Effacement. Pour vérifier si le plan de 
    $codage utilisé est concerné (ceci ne fonctionne que pour les plans de codage i386)&nbsp;:</para>

<screen><userinput>zgrep '\W14\W' <replaceable>[/path/to/your/keymap]</replaceable></userinput></screen>

  <para>Si le code de touche 14 renvoie à Effacement au lieu de Supprimer, créez le fragment de plan de codage suivant pour corriger ce 
  problème&nbsp;:</para>

<screen><userinput>mkdir -pv /etc/kbd &amp;&amp; cat &gt; /etc/kbd/bs-sends-del &lt;&lt;"EOF"
<literal>                  keycode  14 = Delete Delete Delete Delete
              alt keycode  14 = Meta_Delete
        altgr alt keycode  14 = Meta_Delete
                  keycode 111 = Remove
    altgr control keycode 111 = Boot
      control alt keycode 111 = Boot
altgr control alt keycode 111 = Boot</literal>
EOF</userinput></screen>

  <para>Dites au script <command>console</command> de charger ce fragmedt après le plan de codage principal&nbsp;:</para>

<screen><userinput>cat &gt;&gt;/etc/sysconfig/console &lt;&lt;"EOF"
<literal>KEYMAP_CORRECTIONS="/etc/kbd/bs-sends-del"</literal>
EOF</userinput></screen>

</sect1>

