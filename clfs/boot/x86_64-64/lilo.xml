<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<sect1 id="ch-boot-lilo">
  <?dbhtml filename="lilo.html"?>

  <title>Rendre le système CLFS amorçable</title>

  <indexterm zone="ch-boot-lilo">
    <primary sortas="a-Lilo">Lilo</primary>
    <secondary>configuration</secondary>
  </indexterm>

     <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
     href="../../final-system/x86/grub.xml"
     xpointer="xpointer(//*[@os='n1'])"/>

  <para os="a">Vous êtes presque prêt à démarrer votre nouveau système temporaire. Une des dernières choses à faire est
  de s'assurer que le système puisse démarrer. Les instructions ci-dessous ne s'appliquent qu'à des machines x86_64 sur
  lesquelles Lilo va être installé. Des informations sur l'utilisation d'un GRUB préinstallé sur des machines qui
  s'exécutent actuellement en x86 ou x86_64 multilib  devraient être disponibles aux endroits habituels 
  pour la documentation de ces architectures. Si vous avez installé une version  x86 de Lilo, vous devriez modifier ces instructions pour vous 
  référer aux commandes <command>lilo</command> et <command>keytab-lilo.pl</command> que vous avez installées sur le système
  hôte.</para>

  <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
  href="../x86/grub.xml"
  xpointer="xpointer(//*[@os='b'])"/>

  <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
  href="../../bootable/x86_64-64/lilo.xml"
  xpointer="xpointer(//*[@os='c'])"/>

  <para os="d">Plus haut, nous avons compilé et installé le logiciel chargeur de démarrage pour préparer cette étape. La 
  procédure implique d'écrire un image de démarrage à un endroit particulier du disque dur. Si vous avez un lecteur de 
  disquette ou si vous avez installé un programme graveur de CDs, nous vous recommandons fortement d'utiliser 
  <command>mkrescue</command> pour créer une disquette de démarrage Lilo ou un CD (en utilisant par exemple dvdrecord de 
  dvdrtools) pour faire un test et une sauvegarde.</para>

  <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
  href="../../bootable/x86_64-64/lilo.xml"
  xpointer="xpointer(//*[@os='e'])"/>

<screen os="f" role="nodump"><userinput>keytab-lilo.pl uk >${CLFS}/boot/uk.ktl</userinput></screen>

  <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
  href="../../bootable/x86_64-64/lilo.xml"
  xpointer="xpointer(//*[@os='g'])"/>

  <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
  href="../../bootable/x86_64-64/lilo.xml"
  xpointer="xpointer(//*[@os='i'])"/>

<screen os="j" role="nodump"><userinput>cat &gt; ${CLFS}/etc/lilo.conf &lt;&lt; "EOF"
<literal># Begin /etc/lilo.conf
# lilo.conf
#
# options globales
boot=/dev/&lt;bootdisk&gt;
keytable=/boot/&lt;keytable&gt;
lba32
map=/boot/map
prompt

# réglez le nom de l'image par défaut à démarrer
default=clfs

# définissez une image
image=/boot/clfskernel&linux-version;
    label=clfs
    root=/dev/&lt;partition&gt;
    read-only
# ajoutez éventuellement des paramètres à passer comme 
#   append="video=radeonfb:1024x768-16@70"

# si vous aviez un système existant, vous pouvez ajouter
# ses détails ici.
EOF</literal></userinput></screen>


  <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
  href="../../bootable/x86_64-64/lilo.xml"
  xpointer="xpointer(//*[@os='k'])"/>

  <warning os="l">
    <para>La commande suivante va écraser tout chargeur de démarrage actuel. Ne lancez pas la commande si tel n'est pas votre 
    souhait. Si vous avez compilé de manière croisée depuis une machine différente de la cible, vous devez installer le 
    chargeur de démarrage sur la machine cible, le bloc de démarrage installé n'est pas un fichier qui peut se copier avec 
    <command>tar</command>. </para>
  </warning>

  <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
  href="../../bootable/x86_64-64/lilo.xml"
  xpointer="xpointer(//*[@os='m'])"/>

<screen os="n" role="nodump"><userinput>/tools/bin/lilo.static -v -C ${CLFS}/etc/lilo.conf</userinput></screen>

  <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
  href="../../bootable/x86_64-64/lilo.xml"
  xpointer="xpointer(//*[@os='o'])"/>

</sect1>
