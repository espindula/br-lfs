<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<sect1 id="ch-boot-kernel" role="wrap">
  <?dbhtml filename="kernel.html"?>

  <title>Linux-&linux-version2;</title>

  <indexterm zone="ch-boot-kernel">
    <primary sortas="a-Linux">Linux</primary>
    <secondary>démarrage</secondary>
  </indexterm>

  <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
  href="../../bootable/x86/kernel.xml"
  xpointer="xpointer(//*[@role='package'])"/>

  <sect2 role="installation">
    <title>Installation de the kernel</title>

    <warning os="aa">
      <para>Un noyau temporaire compilé de façon croisée sera ici construit. Lors de sa configuration,
      sélectionnez un jeu d'options minimal requis pour
      démarrer la machine cible et construire le système final. Ainsi, aucun support pour
      le son, les imprimantes, etc ne sera nécessaire.</para>

      <para>Essayez d'éviter aussi si possible l'utilisation de modules et n'utilisez
      pas l'image du noyau finale pour la production de systèmes.</para>
    </warning>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../bootable/x86/kernel.xml"
    xpointer="xpointer(//*[@os='a'])"/>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../bootable/x86/kernel.xml"
    xpointer="xpointer(//*[@os='p1'])"/>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../bootable/x86/kernel.xml"
    xpointer="xpointer(//*[@os='p2'])"/>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../bootable/x86/kernel.xml"
    xpointer="xpointer(//*[@os='b'])"/>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../bootable/x86/kernel.xml"
    xpointer="xpointer(//*[@os='c'])"/>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../bootable/x86/kernel.xml"
    xpointer="xpointer(//*[@os='d'])"/>

    <note os="kc"><para>Un bon début pour paramétrer la
    configuration du noyau est de lancer <command>make defconfig</command>. Cela
    règlera la configuration de base correctement en prenant en compte votre
    architecture système.</para>

    <para>Assurez-vous de configurer les options suivantes comme indiqué, sans
    quoi le système pourrait ne pas marcher correctement, voire pas du tout.</para>

    <screen role="nodump">Device Drivers  ---&gt;
  Generic Driver Options  ---&gt;
    ()  path to uevent helper (CONFIG_UEVENT_HELPER_PATH)
    [*] Maintain a devtmpfs filesystem to mount at /dev (CONFIG_DEVTMPFS)
    [ ] Fallback user-helper invocation for firmware loading (CONFIG_FW_LOADER_USER_HELPER)</screen></note>

    <para os="ae">Configurez le noyau avec l'interface du menu&nbsp;:</para>

<screen><userinput>make ARCH=i386 CROSS_COMPILE=${CLFS_TARGET}- menuconfig</userinput></screen>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../bootable/x86/kernel.xml"
    xpointer="xpointer(//*[@os='m'])"/>

<screen><userinput>make ARCH=i386 CROSS_COMPILE=${CLFS_TARGET}-</userinput></screen>

    <para os="af">Si vous ne pouvez pas vous passer des modules du noyau, vous pouvez avoir
    besoin d'un fichier <filename>/etc/modprobe.d</filename>. Vous trouverez
    des informations concernant les modules et la configuration du noyau dans la
    documentation du noyau dans le répertoire <filename
    class="directory">Documentation</filename> de l'arborescence des sources
    du noyau. La page de man <filename>modprobe.d</filename> peut aussi être
    intéressante.</para>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../bootable/x86/kernel.xml"
    xpointer="xpointer(//*[@os='s'])"/>

<screen><userinput>make ARCH=i386 CROSS_COMPILE=${CLFS_TARGET}- \
    INSTALL_MOD_PATH=/tools modules_install</userinput></screen>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../bootable/x86/kernel.xml"
    xpointer="xpointer(//*[@os='s2'])"/>

<screen><userinput>make ARCH=i386 CROSS_COMPILE=${CLFS_TARGET}- \
    INSTALL_MOD_PATH=/tools firmware_install</userinput></screen>

    <para os="u">Après que la compilation est finie, des étapes supplémentaires
    sont nécessaire pour achever l'installation. Il faut copier certains fichiers
    dans le répertoire <filename class="directory">/tools/boot</filename>.</para>

    <para os="v">Exécutez les commandes suivantes pour installer le noyau&nbsp;:</para>

<screen><userinput>mkdir -pv /tools/boot
cp -v arch/i386/boot/bzImage /tools/boot/vmlinuz-clfs-&linux-version2;</userinput></screen>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../bootable/x86/kernel.xml"
    xpointer="xpointer(//*[@os='w'])"/>

<screen os="w1"><userinput>cp -v System.map /tools/boot/System.map-&linux-version;</userinput></screen>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../bootable/x86/kernel.xml"
    xpointer="xpointer(//*[@os='x'])"/>

<screen os="x1"><userinput>cp -v .config /tools/boot/config-&linux-version;</userinput></screen>

  </sect2>

  <sect2 role="content">
    <title/>

    <para>Les détails sur ce paquet sont situés dans <xref
    linkend="contents-kernel" role="."/></para>

  </sect2>

</sect1>
