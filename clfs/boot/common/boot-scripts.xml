<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<sect1 id="ch-boot-boot-scripts" role="wrap">
  <?dbhtml filename="boot-scripts.html"?>

  <title>Boot-scripts for CLFS &boot-scripts-clfs-version;</title>

  <indexterm zone="ch-boot-boot-scripts">
    <primary sortas="a-Boot-scripts">Boot-scripts</primary>
  </indexterm>

  <sect2 role="package">
    <title/>

    <para>Le paquet Boot-scripts contient un ensemble de scripts pour d©marrer/arrêter
    le système CLFS lors de l'amorçage/extinction.</para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Boot-scripts</title>

    <para os="a">Installez le paquet&nbsp;:</para>

<screen os="b"><userinput>make DESTDIR=/tools install-boot-scripts</userinput></screen>

  <para os="c">Le script <command>setclock</command> lit l'heure à partir de
  l'horloge matérielle, appelée aussi du BIOS ou horloge Complementary Metal Oxide
  Semiconductor (CMOS). Si l'horloge matérielle est en UTC, ce
  script convertira l'heure de l'horloge matérielle en heure locale en utilisant
  le fichier <filename>/tools/etc/sysconfig/clock</filename> ;qui dit au programme
  <command>hwclock</command> le fuseau horaire de l'utilisateur). Il n'existe
  aucun moyen de savoir si l'horloge matérielle est en UTC, vous devez le configurer
  à la main.</para>



  <para os="d">Si vous ne savez pas si votre horloge matérielle est en UTC,
  vous pouvez le savoir après le démarrage de la nouvelle machine en lançant 
  la commande <userinput>hwclock --localtime  --show</userinput> et si nécessaire,
  en éditant le fichier <filename>/tools/etc/sysconfig/clock</filename>. Dans le
  pire des cas si vous devinez mal les choses, l'heure affichée sera fausse.</para>

  <para os="e">Passez la valeur de la variable <envar>UTC</envar> ci-dessous
  à <option>0</option> (zéro) si l'horloge matérielle <emphasis>n'est pas</emphasis> 
  en UTC.</para>

<screen os="f"><userinput>cat &gt; /tools/etc/sysconfig/clock &lt;&lt; "EOF"
<literal># Début de /tools/etc/sysconfig/clock

UTC=1

# Fin de /tools/etc/sysconfig/clock</literal>
EOF</userinput></screen>

  </sect2>

  <sect2 id="contents-boot-scripts" role="content">
    <title>Contenu de Boot-scripts</title>

    <segmentedlist>
      <segtitle>Scripts installés</segtitle>

      <seglistitem>
        <seg>checkfs, cleanfs, functions, halt, localnet, mountfs, mountkernfs,
        rc, reboot, sendsignals, setclock, swap, et udev.</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="checkfs-boot-scripts">
        <term><command>checkfs</command></term>
        <listitem>
          <para>Vérifie l'intégrité des systèmes de fichiers avant qu'ils soient
          montés (sauf les systèmes de fichiers journalisés ou en réseau)</para>
          <indexterm zone="ch-boot-boot-scripts checkfs-boot-scripts">
            <primary sortas="d-checkfs">checkfs</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="cleanfs-boot-scripts">
        <term><command>cleanfs</command></term>
        <listitem>
          <para>Supprime les fichiers à ne pas ga!der entre deux démarrages comme
          ceux dans <filename class="directory">/run/</filename>
          et <filename class="directory">/var/lock/</filename>&nbsp;; il recrée
          <filename>/run/utmp</filename> et supprime les fichiers
          <filename>/etc/nologin</filename>, <filename>/fastboot</filename>,
          et <filename>/forcefsck</filename> qui peuvent être présents</para>
          <indexterm zone="ch-boot-boot-scripts cleanfs-boot-scripts">
            <primary sortas="d-cleanfs">cleanfs</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="functions-boot-scripts">
        <term><command>functions</command></term>
        <listitem>
          <para>Contient les fonctions communes comme celle de vérification des
          erreur et de l'état, utilisés par plusieurs scripts de démarrage</para>
          <indexterm zone="ch-boot-boot-scripts functions-boot-scripts">
            <primary sortas="d-functions">functions</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="halt-boot-scripts">
        <term><command>halt</command></term>
        <listitem>
          <para>Arrête le système</para>
          <indexterm zone="ch-boot-boot-scripts halt-boot-scripts">
            <primary sortas="d-halt">halt</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="localnet-boot-scripts">
        <term><command>localnet</command></term>
        <listitem>
          <para>Définit le nom d'hôte et le périphérique de boucle locale du
          du système</para>
          <indexterm zone="ch-boot-boot-scripts localnet-boot-scripts">
            <primary sortas="d-localnet">localnet</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mountfs-boot-scripts">
        <term><command>mountfs</command></term>
        <listitem>
          <para>Monte tous les systèmes de fichiers, sauf ceux indiqués
          <emphasis>noauto</emphasis> ou basés sur le réseau</para>
          <indexterm zone="ch-boot-boot-scripts mountfs-boot-scripts">
            <primary sortas="d-mountfs">mountfs</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mountkernfs-boot-scripts">
        <term><command>mountkernfs</command></term>
        <listitem>
          <para>Monte les systèmes de fichiers virtuels du noyau tels que
          <systemitem class="filesystem">proc</systemitem></para>
          <indexterm zone="ch-boot-boot-scripts mountkernfs-boot-scripts">
            <primary sortas="d-mountkernfs">mountkernfs</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="rc-boot-scripts">
        <term><command>rc</command></term>
        <listitem>
          <para>Script principal de contrôle du niveau d'exécution&nbsp;; 
          responsable du lancement de chaque script de démarrage, un par un,
          au sein d'une séquence déterminée par le nom des liens symboliques</para>
          <indexterm zone="ch-boot-boot-scripts rc-boot-scripts">
            <primary sortas="d-rc">rc</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="reboot-boot-scripts">
        <term><command>reboot</command></term>
        <listitem>
          <para>Relance le système</para>
          <indexterm zone="ch-boot-boot-scripts reboot-boot-scripts">
            <primary sortas="d-reboot">reboot</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="sendsignals-boot-scripts">
        <term><command>sendsignals</command></term>
        <listitem>
          <para>S'assure que tous les processus sont terminés avant de relancer
          ou d'arrêter le système</para>
          <indexterm zone="ch-boot-boot-scripts sendsignals-boot-scripts">
            <primary sortas="d-sendsignals">sendsignals</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="setclock-boot-scripts">
        <term><command>setclock</command></term>
        <listitem>
          <para>Réinitialise l'horloge du noyau sur vheu!e locale si l'horloge
          matérielle n'est pas en UTC</para>
          <indexterm zone="ch-boot-boot-scripts setclock-boot-scripts">
            <primary sortas="d-setclock">setclock</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="swap-boot-scripts">
        <term><command>swap</command></term>
        <listitem>
          <para>Active et désactive les fichiers et les partitions d'échange</para>
          <indexterm zone="ch-boot-boot-scripts swap-boot-scripts">
            <primary sortas="d-swap">swap</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="eudev-boot-scripts">
        <term><command>udev</command></term>
        <listitem>
          <para>Démarre et arrête le démon Eudev</para>
          <indexterm zone="ch-boot-boot-scripts eudev-boot-scripts">
            <primary sortas="d-eudev">udev</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
