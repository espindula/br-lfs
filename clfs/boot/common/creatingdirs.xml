<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<sect1 id="ch-boot-creatingdirs">
  <?dbhtml filename="creatingdirs.html"?>

  <title>Créer les répertoires</title>

  <para os="a">Il est temps de créer une structure sur le système de
  fichiers CLFS. Créez une arborescence de répertoires standard en lançant les
  commandes suivantes&nbsp;:</para>

<screen os="b"><userinput>mkdir -pv ${CLFS}/{bin,boot,dev,{etc/,}opt,home,lib,mnt}
mkdir -pv ${CLFS}/{proc,media/{floppy,cdrom},sbin,srv,sys}
mkdir -pv ${CLFS}/var/{lock,log,mail,run,spool}
mkdir -pv ${CLFS}/var/{opt,cache,lib/{misc,locate},local}
install -dv -m 0750 ${CLFS}/root
install -dv -m 1777 ${CLFS}{/var,}/tmp
mkdir -pv ${CLFS}/usr/{,local/}{bin,include,lib,sbin,src}
mkdir -pv ${CLFS}/usr/{,local/}share/{doc,info,locale,man}
mkdir -pv ${CLFS}/usr/{,local/}share/{misc,terminfo,zoneinfo}
mkdir -pv ${CLFS}/usr/{,local/}share/man/man{1,2,3,4,5,6,7,8}
for dir in ${CLFS}/usr{,/local}; do
  ln -sv share/{man,doc,info} $dir
done</userinput></screen>

  <para os="c">Par défaut, les répertoires sont créés avec les droits 755, ce
  qui n'est pas souhaitable pour tous les répertoires. Dans la commande ci-dessus,
  deux modifications ont été 
  effectuées&nbsp;: une
  pour le répertoire principal de <systemitem class="username">root</systemitem>,
  et une autre pour les répertoires des fichiers
  temporaires.</para>

  <para os="d">Le premier changement de droit nous assure que n'importe qui ne
  pourra pas entrer dans le répertoire
  <filename class="directory">/root</filename>&mdash;de façon identique à ce que ferait un
  utilisateur pour son répertoire principal. Le deuxième changement assure que
  tout utilisateur peut écrire dans les répertoires
  <filename class="directory">/tmp</filename> et 
  <filename class="directory">/var/tmp</filename>, mais ne peut pas supprimer les fichiers
  des autres utilisateurs. Cette dernière interdiction est due au
  <quote>sticky bit</quote>, le bit (1) le plus haut dans le masque 1777.</para>

  <sect2 os="e">
    <title>Remarques à propos de la conformité FHS</title>

    <para>L'arborescence de répertoires est basée sur le standard FHS
    (Filesystem Hierarchy Standard), 
    disponible sur
    <ulink url="http://www.pathname.com/fhs/"/>. Outre l'arborescence créée ci-dessus, le FHS stipule aussi l'existence de 
    <filename class="directory">/usr/local/games</filename>
    et <filename class="directory">/usr/share/games</filename>. Le FHS 
    n'est pas précis en ce qui concerne la structure du sous-répertoire 
    <filename class="directory">/usr/local/share</filename>,
    donc nous créons seulement les répertoires nécessaires. Néanmoins, n'hésitez
    pas à créer ces répertoires si vous préférez vous conformer plus strictement 
    au FHS.</para>

  </sect2>

</sect1>

