<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<sect1 id="ch-boot-createfiles">
  <?dbhtml filename="createfiles.html"?>

  <title>Créer les liens symboliques essentiels</title>

  <para os="a">Certains programmes utilisent des chemins liés en dur à des fichiers qui n'existent pas encore. Afin de satisfaire ces 
  programmes, créez un certain nombre de liens symboliques qui seront remplacés par des fichiers réels tout au long du chapitre suivant
  après que le logiciel a été installé.</para>

<screen os="b"><userinput>ln -sv /tools/bin/{bash,cat,echo,grep,login,pwd,stty} ${CLFS}/bin
ln -sv /tools/bin/file ${CLFS}/usr/bin
ln -sv /tools/lib/libgcc_s.so{,.1} ${CLFS}/usr/lib
ln -sv /tools/lib/libstdc++.so{.6,} ${CLFS}/usr/lib
sed -e 's/tools/usr/' /tools/lib/libstdc++.la &gt; ${CLFS}/usr/lib/libstdc++.la
ln -sv bash ${CLFS}/bin/sh
ln -sv /tools/sbin/init ${CLFS}/sbin
ln -sv /tools/etc/{login.{access,defs},limits} ${CLFS}/etc</userinput></screen>

  <variablelist os="c">
    <title>Voici la signification de chaque lien&nbsp;:</title>

    <varlistentry os="c1">
      <term><parameter><filename>/bin/bash</filename></parameter></term>
      <listitem>
        <para>De nombreux scripts <command>bash</command> spécifient
        <filename>/bin/bash</filename>.</para>
      </listitem>
    </varlistentry>

    <varlistentry os="c2">
      <term><parameter><filename>/bin/cat</filename></parameter></term>
      <listitem>
        <para>Ce chemin est codé en dur dans le script de configuration de Glibc.</para>
      </listitem>
    </varlistentry>

    <varlistentry os="c3">
      <term><parameter><filename>/bin/echo</filename></parameter></term>
      <listitem>
        <para>Ceci pour satisfaire un des tests de la suite de tests de Glibc
        qui s'attend à avoir <filename>/bin/echo</filename>.</para>
      </listitem>
    </varlistentry>

    <varlistentry os="c4">
      <term><parameter><filename>/bin/grep</filename></parameter></term>
      <listitem>
        <para>Ceci pour éviter une référence
        <filename class="directory">/tools</filename> codée en dur dans Libtool.</para>
      </listitem>
    </varlistentry>

    <varlistentry os="c5">
      <term><parameter><filename>/bin/login</filename></parameter></term>
      <listitem>
        <para>Le programme <command>agetty</command> attend un
        <command>login</command> dans <filename class="directory">/bin</filename>.</para>
      </listitem>
    </varlistentry>

    <varlistentry os="c6">
      <term><parameter><filename>/bin/pwd</filename></parameter></term>
      <listitem>
        <para>Certains scripts <command>configure</command>, en particulier celui
        de Glibc, ont codé en dur ce chemin.</para>
      </listitem>
    </varlistentry>

    <varlistentry os="c7">
      <term><parameter><filename>/bin/stty</filename></parameter></term>
      <listitem>
        <para>Ce chemin est codé en dur dans Expect, il est donc nécessaire pour
        passer les suites de tests de Binutils et de GCC.</para>
      </listitem>
    </varlistentry>

    <varlistentry os="c8">
      <term><parameter><filename>/usr/bin/file</filename></parameter></term>
      <listitem>
        <para>Les scripts <command>configure</command> de Binutils  spécifient
        cet emplacement de commande.</para>
      </listitem>
    </varlistentry>

    <varlistentry os="c9">
      <term><parameter><filename>/usr/lib/libgcc_s.so{,.1}</filename></parameter></term>
      <listitem>
        <para>Glibc en a besoin pour que la bibliothèque pthreads fonctionne.</para>
      </listitem>
    </varlistentry>

    <varlistentry os="c10">
      <term><parameter><filename>/usr/lib/libstdc++{,.6}</filename></parameter></term>
      <listitem>
        <para>Ceci est nécessaire pour plusieurs tests de la suite de tests de 
        Glibc et pour le support C++ de GMP.</para>
      </listitem>
    </varlistentry>

    <varlistentry os="c11">
      <term><parameter><filename>/usr/lib/libstdc++.la</filename></parameter></term>
      <listitem>
        <para>Cela empêche une référence à <filename class="directory">/tools</filename>
        qui serait sinon dans
        <filename>/usr/lib/libstdc++.la</filename> après l'installation de
        GCC.</para>
      </listitem>
    </varlistentry>

    <varlistentry os="c12">
      <term><parameter><filename>/bin/sh</filename></parameter></term>
      <listitem>
        <para>De nombreux scripts shell codent en dur <filename>/bin/sh</filename>.</para>
      </listitem>
    </varlistentry>

    <varlistentry os="c13">
      <term><parameter><filename>/sbin/init</filename></parameter></term>
      <listitem>
        <para>C'est là que le noyau attend <command>init</command>.</para>
      </listitem>
    </varlistentry>

    <varlistentry os="c14">
      <term><parameter><filename>/etc/{login.{access,defs},limits}</filename></parameter></term>
      <listitem>
        <para>Ce sont les fichiers de configuration utilisés par Shadow et ils
        sont censés se trouver dans <filename class="directory">/etc</filename>, pour
        que les programmes tels que <command>login</command> et <command>su</command>
        fonctionnent.</para>
      </listitem>
    </varlistentry>

  </variablelist>

  <para os="d">Historiquement, Linux maintient une liste des systèmes de fichiers
  montés dans le fichier <filename>/etc/mtab</filename>. Les noyaux modernes
  maintiennent cette liste en inteqoe et la présentent à l'utilisateur via le
  système de fichiers <filename class="directory">/proc</filename>. Pour
  satisfaire ces outils qui attendent la présence de <filename>/etc/mtab</filename>,
  créez le lien symbolique suivant&nbsp;:</para>

<screen os="e"><userinput>ln -sv /proc/self/mounts ${CLFS}/etc/mtab</userinput></screen>

</sect1>
