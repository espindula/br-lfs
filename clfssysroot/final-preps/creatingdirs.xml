<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-final-preps-creatingdirs">
  <?dbhtml filename="creatingdirs.html"?>

  <title>Création des répertoires</title>

  <para>Il est temps de crée une structure dans le système de fichier CLFS.
  Créer une arborescence de répertoires standard grace aux commandes suivantes :</para>

<screen><userinput>mkdir -pv ${CLFS}/{bin,boot,dev,{etc/,}opt,home,lib,mnt}
mkdir -pv ${CLFS}/{proc,media/{floppy,cdrom},sbin,srv,sys}
mkdir -pv ${CLFS}/var/{lock,log,mail,run,spool}
mkdir -pv ${CLFS}/var/{opt,cache,lib/{misc,locate},local}
install -dv -m 0750 ${CLFS}/root
install -dv -m 1777 ${CLFS}{/var,}/tmp
mkdir -pv ${CLFS}/usr/{,local/}{bin,include,lib,sbin,src}
mkdir -pv ${CLFS}/usr/{,local/}share/{doc,info,locale,man}
mkdir -pv ${CLFS}/usr/{,local/}share/{misc,terminfo,zoneinfo}
mkdir -pv ${CLFS}/usr/{,local/}share/man/man{1,2,3,4,5,6,7,8}
for dir in ${CLFS}/usr{,/local}; do
  ln -sfnv share/{man,doc,info} ${dir}
done</userinput></screen>

  <para>Les répertoires sont créés, par défaut, avec le mode de permission 755, 
  mais ce n'est pas souhaitable pour tous les répertoires. Dans les commandes 
  ci dessus, deux modifications sont apportés &mdash; l'une pour le repertoire
  home de l'utilisateur <systemitem class="username">root</systemitem>, 
  et l'autre pour le répertoire des fichiers temporaires.</para>

  <para>Le premier changement mode veille à ce que n'importe qui ne rentre pas dans 
  le répertoire <filename class="directory">/root</filename> &mdash; le même mode 
  est appliqué au répertoires home des utilisateurs normaux. Le
  second changement de mode permet de s'assurer que tout utilisateur 
  peut écrire dans les répertoires  <filename class="directory">/tmp</filename> et 
  <filename class="directory">/var/tmp</filename>, mais qu'ils ne peuvent pas supprimer 
  les fichiers appartenant à d'autres utilisateurs, ceci grâce au <quote>sticky bit</quote>, 
  le plus haut bit (1) dans le mode de permission 1777.</para>

  <sect2>
    <title>Note de conformité FHS</title>

    <para>L'arborescence de répertoires est basée sur le <quote>Filesystem Hierarchy Standard</quote> (FHS)
    (disponnible sur <ulink url="http://www.pathname.com/fhs/"/>). En plus du FHS, nous créons des liens 
    symboliques de compatibilité pour les répertoires <filename class="directory">man</filename>, 
    <filename class="directory">doc</filename>, et <filename
    class="directory">info</filename>, puisque certain paquets essayent 
    d'installer leur documentation dans <filename
    class="directory">/usr/&lt;directory&gt;</filename> ou <filename
    class="directory">/usr/local/&lt;directory&gt;</filename> à la place de
    <filename class="directory">/usr/share/&lt;directory&gt;</filename> ou
    <filename class="directory">/usr/local/share/&lt;directory&gt;</filename>.
    Le FHS stipule également l'existence de <filename
    class="directory">/usr/local/games</filename> et <filename
    class="directory">/usr/share/games</filename>.  n'est pas précis quant à la structure 
    du répertoire <filename class="directory">/usr/local/share</filename>, 
    donc nous créons seulement les répertoires requis. Toutefois, n'hésitez pas à créer ces répertoires
    si vous préférez rester plus conforme au FHS.</para>

  </sect2>

</sect1>
