<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
    "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
   <!ENTITY % general-entities SYSTEM "../../general.ent">
   %general-entities;
   
   <!ENTITY cups-download-http "http://ftp.easysw.com/pub/cups/&cups-version;/cups-&cups-version;-source.tar.bz2">
   <!ENTITY cups-download-ftp  "ftp://ftp.easysw.com/pub/cups/&cups-version;/cups-&cups-version;-source.tar.bz2">
   <!ENTITY cups-md5sum        "e54ed09ede2340fc3014913333520fe4">
   <!ENTITY cups-size          "3.9 Mio">
   <!ENTITY cups-buildsize     "91 Mio">
   <!ENTITY cups-time          "0.7 SBU">
   
]>
<sect1 id="cups" xreflabel="Cups-&cups-version;">
   <?dbhtml filename="cups.html"?>
   
   <sect1info>
      <othername>$LastChangedBy: krejzi $</othername>
      <date>$Date: 2012-04-06 14:13:40 +0200 (ven. 06 avril 2012) $</date>
   </sect1info>
   
   <title>Cups-&cups-version;</title> 
   
   <indexterm zone="cups">
      <primary sortas="a-Cups"> Cups </primary>
   </indexterm>
   
   <sect2 role="package">
      <title>Introduction à Cups</title> 
      
      <para>
         Le <foreignphrase>Common Unix Printing System</foreignphrase> (Cups) (système d'impression
         Unix général) est un ensemble tampon d'imprimantes et d'outils associés. Il se base sur
         l'"Internet Printing Protocol" (protocole d'impression par Internet) et il offre des
         services d'impression pour la plupart des imprimantes PostScript and raster. 
      </para> 
      
      &lfs71_checked;
      
      <bridgehead renderas="sect3"> Informations sur le paquet </bridgehead>
      <itemizedlist spacing="compact">
         <listitem>
            <para>
               Téléchargement (HTTP): <ulink url="&cups-download-http;"/> 
            </para> 
         </listitem>
         <listitem>
            <para>
               Téléchargement (FTP): <ulink url="&cups-download-ftp;"/> 
            </para> 
         </listitem>
         <listitem>
            <para>
               Somme de contrôle MD5 du téléchargement: &cups-md5sum; 
            </para> 
         </listitem>
         <listitem>
            <para>
               Taille du téléchargement: &cups-size; 
            </para> 
         </listitem>
         <listitem>
            <para>
               Estimation de l'espace disque requis: &cups-buildsize; 
            </para> 
         </listitem>
         <listitem>
            <para>
               Estimation du temps de construction: &cups-time; 
            </para> 
         </listitem>
      </itemizedlist>
      
      <bridgehead renderas="sect3"> Dépendances de Cups </bridgehead>
      
      <bridgehead renderas="sect4"> Recommandées </bridgehead>
      
      <para role="recommended">
         <xref linkend="libjpeg"/>, <xref linkend="libpng"/>
         et <xref linkend="libtiff"/>
      </para> 
      
      <bridgehead renderas="sect4"> Facultatives </bridgehead>
      
      <para role="optional">
         <xref linkend="tcpwrappers"/>, <xref linkend="dbus"/>
         , <xref linkend="libusb"/>, <xref linkend="acl"/>
         , <xref linkend="linux-pam"/>, <xref linkend="openldap"/>
         , <xref linkend="gnutls"/>or <xref linkend="openssl"/>
         (recherché dans cet ordre), <xref linkend="mitkrb"/>, <xref linkend="php"/>
         , <xref linkend="gs"/>, <xref linkend="python2"/>
         , <xref linkend="icedtea6"/>ou <xref linkend="jdk"/>
         , <ulink url="http://portland.freedesktop.org/wiki/"> Xdg-utils </ulink>
         , <ulink url="http://www.openslp.org/"> OpenSLP </ulink>
         , <ulink url="http://packages.debian.org/unstable/source/libpaper"> libpaper </ulink>
         , <ulink url="http://www.easysw.com/htmldoc/"> HTMLDOC </ulink>
         , and <ulink url="http://valgrind.org/"> Valgrind </ulink>
         (utilisé éventuellement si vous lancez les suites de tests) 
      </para> 
      
      <para condition="html" role="usernotes">
         Notes utilisateur: <ulink url="&blfs-wiki;/cups"/> 
      </para> 
      
   </sect2>
   
   <sect2 role="kernel" id="cups-kernel">
      <title>Configuration du noyau</title> 
      
      <para>
         Si vous avez une imprimante sur port parallèle, activez les options suivantes dans la
         configuration de votre noyau et recompilez le noyau: 
      </para> 
      
<screen><literal>
</literal>
</screen>
      
      <note> 
         <para>
            Si vous avez une imprimante en port USB, il y a un conflit entre le fond
            <application>libusb</application> de <application>Cups</application> et le pilote du
            noyau. Si vous voulez utiliser <application>Cups</application> avec le support
            <application>libusb</application> , <emphasis>
            n'activez pas </emphasis>
            USB Printer support dans votre noyau et supprimez <option>
            --disable-libusb </option>
            quand vous configurerez <application>Cups</application> . 
         </para> 
      </note>
      
      <para>
         Si vous voulez utiliser le pilote usblp du noyau, activez les options suivantes dans la
         configuration de votre noyau et recompilez le noyau: 
      </para> 
      
<screen>-Device Drivers  ---&gt;
  [*] USB support  ---&gt;
...
Enable support for either UHCI or OHCI, not both:
    [*]   OHCI HCD support
    [*]   UHCI HCD (most Intel and VIA) support
...
    [*]   USB Printer support
</screen>
      <indexterm zone="cups cups-kernel">
         <primary sortas="d-cups"> cups </primary>
      </indexterm>
      
   </sect2>
   
   <sect2 role="installation">
      <title>Installation de Cups</title> 
      
      <para>
         Créez un utilisateur <systemitem class="username"> lp </systemitem>car
         <application>Cups</application> va créer des fichiers appartenant à cet utilisateur
         (l'utilisateur <systemitem class="username"> lp </systemitem>est celui utilisé par défaut
         par <application>Cups</application> , mais il peut être modifié pour un utilisateur
         différent en passant un paramètre au script <command>configure</command> .) Utilisez la
         commande suivante en tant qu'utilisateur <systemitem class="username">
         root </systemitem>&nbsp;: 
      </para> 
      
<screen role="root">
<userinput>useradd -c "Print Service User" -d /dev/null -g lp -s /bin/false -u 9
lp</userinput></screen>
      
      <para>
         Installez <application>Cups</application> en lançant les commandes suivantes: 
      </para> 
      
<screen><userinput>sed -i 's#@CUPS_HTMLVIEW@#firefox#' desktop/cups.desktop.in &amp;&amp;
./configure --localstatedir=/var       \
            --disable-libusb           \
            --with-rcdir=/tmp/cupsinit \
            --with-docdir=/usr/share/doc/cups-&cups-version; &amp;&amp;
make</userinput></screen>
      
      <para>
         Pour tester les résultats, lancez: <command>make check</command> . Cela lancera une suite
         de tests basiques sans test de chargement. Si vous souhaitez lancer les tests en spécifiant
         des paramètres non par défaut, lancez: <command>make test</command> . Remarquez que le test
         <quote>torture load testing </quote> (test de charge de torture) utilise plus de ressources
         que ce qui est affiché sur l'invite. 
      </para> 
      
      <para>
         Maintenant, en tant qu'utilisateur <systemitem class="username"> root </systemitem>&nbsp;: 
         
      </para> 
      
<screen role="root">
<userinput>make install &amp;&amp;
rm -rf /tmp/cupsinit</userinput></screen>
      
      <para>
         Les fichiers de <application>man</application> sont installés dans un format compressé (
         <filename class="extension">.gz</filename> ). Si vous le désirez, utilisez les commandes
         suivantes pour les décompresser en tant qu'utilisateur <systemitem class="username"> root
         </systemitem>&nbsp;:  
      </para> 
      
<screen role="root">
<userinput>pushd /usr/share/man/                                  &amp;&amp;
find -name cups\*gz -type l -print -delete             &amp;&amp;
find -name \*gz -exec gunzip -v {} \;                  &amp;&amp;
popd                                                   &amp;&amp;
ln -v -s cupsaccept.8 /usr/share/man/man8/reject.8     &amp;&amp;
ln -v -s cupsaccept.8 /usr/share/man/man8/cupsreject.8 &amp;&amp;
ln -v -s cupsaccept.8 /usr/share/man/man8/accept.8     &amp;&amp;
ln -v -s cupsenable.8 /usr/share/man/man8/cupsdisable.8</userinput></screen>
      
   </sect2>
   
   <sect2 role="commands">
      <title>Explication des commandes</title> 
      
      <para>
         <command>sed -i 's#@CUPS_HTMLVIEW@#firefox#' ...</command>&nbsp;: Ceci modifie le
         navigateur utilisé par fichier de bureau <application>Cups</application> pour son interface
         web. 
      </para> 
      
      <para>
         <option>
         --localstatedir=/var </option>
         : Ceci modifie l'emplacement des répertoires cache, log, run et spool de /usr/var en /var. 
      </para> 
      
      <para>
         <option>
         --disable-libusb </option>
         : Ceci désactive le fond <application>libusb</application> de
         <application>Cups</application> . Si vous souhaitez que <application>Cups</application>
         utilise <application>libusb</application> , enlevez cette option et assurez-vous de
         compiler votre noyau avec: # CONFIG_USB_PRINTER is not set 
      </para> 
      
      <para>
         <option>
         --with-rcdir=/tmp/cupsinit </option>
         : Cette option lui fait installer ses scripts de démarrage dans <filename
         class="directory">/tmp</filename> au lieu de <filename class="directory">
         /etc/rc.d</filename> . 
      </para> 
      
   </sect2>
   
   <sect2 role="configuration">
      <title>Configuration de Cups</title> 
      
      <para>
         La configuration de <application>Cups</application> dépend du type d'imprimante et elle
         peut être complexe. En général, les imprimantes PostScript sont plus simples. Pour des
         instructions détaillées sur la configuration et l'utilisation de
         <application>Cups</application> , voir <ulink url="http://www.cups.org/documentation.php"/>
         . Le <foreignphrase>Software Administrators Manual</foreignphrase> (manuel ges
         administrateurs du logiciel) et le <foreignphrase>Software Users Manual</foreignphrase>
         (manuel des utilisateurs) sont particulièrement utiles. 
      </para> 
      
      <para>
         Pour que des imprimantes non PostScript impriment avec <application>Cups</application> ,
         vous devez installer <xref linkend="gs"/>pour convertir PostScript en images raster et un
         pilote (comme ceux de <xref linkend="gutenprint"/>
         ) pour convertir les images raster résultantes sous une forme compréhensible par
         l'imprimante. Les pilotes de <ulink url="http://www.linuxprinting.org/foomatic.html">
         Foomatic </ulink>
         utilisent Ghostscript pour convertir du PostScript en forme directement imprimable, mais
         les développeurs de <application>Cups</application> considèrent cela comme du bricolage. 
      </para> 
      
      <sect3 id="cups-init">
         <title>Script de démarrage</title> 
         
         <para>
            Si vous voulez que <application>Cups</application> démarre automatiquement lors du
            démarrage du système, installez le script de démarrage inclu dans le paquet <xref
            linkend="bootscripts"/>&nbsp;: 
         </para> 
         <indexterm zone="cups cups-init">
            <primary sortas="f-cups"> cups </primary>
         </indexterm>
         
<screen role="root">
<userinput>make install-cups</userinput></screen>
         
      </sect3>
      
   </sect2>
   
   <sect2 role="content">
      <title>Contenu</title> 
      
      <segmentedlist>
         <segtitle>Programmes installés</segtitle>
         <segtitle>Bibliothèques installées</segtitle>
         <segtitle>Répertoires installés</segtitle>
         
         <seglistitem>
            <seg>
               accept, cancel, cups-config, cupsaccept, cupsaddsmb, cupsctl, cupsd, cupsdisable,
               cupsenable, cupsfilter, cupsreject, cupstestdsc, cupstestppd, lp, lpadmin, lpc,
               lpinfo, lpmove, lpoptions, lppasswd, lpq, lpr, lprm, lpstat, ppdc, ppdhtml, ppdi,
               ppdmerge, ppdpo, reject
            </seg>
            <seg>
               libcups.so, libcupscgi.so, libcupsdriver.so, libcupsimage.so, libcupsmime.so,
               libcupsppdc.so, and various filters et backend drivers
            </seg>
            <seg>
               /etc/cups, /usr/include/cups, /usr/lib/cups, /usr/share/cups,
               /usr/share/doc/cups-&cups-version;, /var/cache/cups, /var/log/cups, /var/run/cups and
               /var/spool/cups.
            </seg>
         </seglistitem>
      </segmentedlist>
      <variablelist>
      
      <bridgehead renderas="sect3"> Descriptions courtes </bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      
      <varlistentry id="accept">
         <term><command>accept</command> </term>
         <listitem>
            <para>
               demande au système d'impression d'accepter les tâches d'impression sur les
               destinations spécifiées. 
            </para> 
            <indexterm zone="cups accept">
               <primary sortas="b-accept"> accept </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="cancel-cups">
         <term><command>cancel</command> </term>
         <listitem>
            <para>
               annule les tâches d'impression existantes dans les queues d'imprimante. 
            </para> 
            <indexterm zone="cups cancel-cups">
               <primary sortas="b-cancel"> cancel </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="cups-config">
         <term><command>cups-config</command> </term>
         <listitem>
            <para>
               est un outil de configuration <application>Cups</application> . 
            </para> 
            <indexterm zone="cups cups-config">
               <primary sortas="b-cups-config"> cups-config </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="cupsaddsmb">
         <term><command>cupsaddsmb</command> </term>
         <listitem>
            <para>
               exporte des imprimantes vers les logiciels <application>Samba</application> pour une
               utilisation avec des clients Windows. 
            </para> 
            <indexterm zone="cups cupsaddsmb">
               <primary sortas="b-cupsaddsmb"> cupsaddsmb </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="cupsd">
         <term><command>cupsd</command> </term>
         <listitem>
            <para>
               est le programmeur de tâches du <foreignphrase>Common Unix Printing
               System</foreignphrase>. 
            </para> 
            <indexterm zone="cups cupsd">
               <primary sortas="b-cupsd"> cupsd </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="cupstestppd">
         <term><command>cupstestppd</command> </term>
         <listitem>
            <para>
               teste la conformité des fichiers PPD. 
            </para> 
            <indexterm zone="cups cupstestppd">
               <primary sortas="b-cupstestppd"> cupstestppd </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="disable">
         <term><command>disable</command> </term>
         <listitem>
            <para>
               arrête les imprimantes ou les classes désignées. 
            </para> 
            <indexterm zone="cups disable">
               <primary sortas="b-disable"> disable </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="enable">
         <term><command>enable</command> </term>
         <listitem>
            <para>
               démarre les imprimantes ou les classes désignées. 
            </para> 
            <indexterm zone="cups enable">
               <primary sortas="b-enable"> enable </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="lp-cups">
         <term><command>lp</command> </term>
         <listitem>
            <para>
               soumet des fichiers pour qu'ils soient imprimés ou modifie des tâches en attente. 
            </para> 
            <indexterm zone="cups lp-cups">
               <primary sortas="b-lp"> lp </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="lpadmin">
         <term><command>lpadmin</command> </term>
         <listitem>
            <para>
               configure les queues d'une imprimante ou d'une classe fournies par
               <application>Cups</application> . 
            </para> 
            <indexterm zone="cups lpadmin">
               <primary sortas="b-lpadmin"> lpadmin </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="lpc-cups">
         <term><command>lpc</command> </term>
         <listitem>
            <para>
               offre un contrôle limité des queues d'imprimante ou de classe fournies par
               <application>Cups</application> . 
            </para> 
            <indexterm zone="cups lpc-cups">
               <primary sortas="b-lpc"> lpc </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="lpinfo">
         <term><command>lpinfo</command> </term>
         <listitem>
            <para>
               liste les périphériques ou les pilotes disponibles connus du serveur
               <application>Cups</application> . 
            </para> 
            <indexterm zone="cups lpinfo">
               <primary sortas="b-lpinfo"> lpinfo </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="lpmove">
         <term><command>lpmove</command> </term>
         <listitem>
            <para>
               envoie la tâche spécifiée vers une nouvelle destination. 
            </para> 
            <indexterm zone="cups lpmove">
               <primary sortas="b-lpmove"> lpmove </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="lpoptions">
         <term><command>lpoptions</command> </term>
         <listitem>
            <para>
               affiche ou règle les options de l'imprimante et ceux par défaut. 
            </para> 
            <indexterm zone="cups lpoptions">
               <primary sortas="b-lpoptions"> lpoptions </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="lppasswd">
         <term><command>lppasswd</command> </term>
         <listitem>
            <para>
               ajoute, modifie ou efface des mots de passe dans le fichier
               <application>CUPS</application> de mots de passe chiffrés de
               <filename>passwd.md5</filename> . 
            </para> 
            <indexterm zone="cups lppasswd">
               <primary sortas="b-lppasswd"> lppasswd </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="lpq-cups">
         <term><command>lpq</command> </term>
         <listitem>
            <para>
               affiche le statut actuel de la queue d'impression de l'imprimante mentionnée. 
            </para> 
            <indexterm zone="cups lpq-cups">
               <primary sortas="b-lpq"> lpq </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="lpr-cups">
         <term><command>lpr</command> </term>
         <listitem>
            <para>
               soumet des fichiers pour qu'ils soient imprimés. 
            </para> 
            <indexterm zone="cups lpr-cups">
               <primary sortas="b-lpr"> lpr </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="lprm-cups">
         <term><command>lprm</command> </term>
         <listitem>
            <para>
               annule des tâches d'impression envoyées pour impression vers la queue. 
            </para> 
            <indexterm zone="cups lprm-cups">
               <primary sortas="b-lprm"> lprm </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="lpstat-cups">
         <term><command>lpstat</command> </term>
         <listitem>
            <para>
               affiche des informations statutaires sur les classes, les tâches et les imprimantes
               actuelles. 
            </para> 
            <indexterm zone="cups lpstat-cups">
               <primary sortas="b-lpstat"> lpstat </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="reject">
         <term><command>reject</command> </term>
         <listitem>
            <para>
               demande au système d'impression de rejeter les tâches d'impression des destinations
               spécifiées. 
            </para> 
            <indexterm zone="cups reject">
               <primary sortas="b-reject"> reject </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      </variablelist>
      
   </sect2>
   
</sect1>
