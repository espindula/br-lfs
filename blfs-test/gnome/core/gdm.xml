<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
    "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
   <!ENTITY % general-entities SYSTEM "../../general.ent">
   %general-entities;
   
   <!ENTITY gdm-download-http "&gnome-download-http;/gdm/&gnome-version;/gdm-&gdm-version;.tar.xz">
   <!ENTITY gdm-download-ftp  "&gnome-download-ftp;/gdm/&gnome-version;/gdm-&gdm-version;.tar.xz">
   <!ENTITY gdm-md5sum        "df3f38061066f5e0816676b4eef7854a">
   <!ENTITY gdm-size          "1.6 Mio">
   <!ENTITY gdm-buildsize     "59 Mio">
   <!ENTITY gdm-time          "0.7 SBU">
   
]>
<sect1 id="gdm" xreflabel="GDM-&gdm-version;">
   <?dbhtml filename="gdm.html"?>
   
   <sect1info>
      <othername>$LastChangedBy: wblaszcz $</othername>
      <date>$Date: 2012-04-07 15:03:48 +0200 (sam. 07 avril 2012) $</date>
   </sect1info>
   
   <title>GDM-&gdm-version;</title> 
   
   <indexterm zone="gdm">
      <primary sortas="a-GDM"> GDM </primary>
   </indexterm>
   
   <sect2 role="package">
      <title>Introduction à GDM</title> 
      
      <para>
         Le paquet <application>GDM</application> contient le démon du gestionnaire d'affichage de
         <application>GNOME</application> . C'est utile pour permettre des connexions graphiques
         configurables. 
      </para> 
      
      &lfs70_checked;
      
      <bridgehead renderas="sect3"> Informations sur le paquet </bridgehead>
      <itemizedlist spacing="compact">
         <listitem>
            <para>
               Téléchargement (HTTP): <ulink url="&gdm-download-http;"/> 
            </para> 
         </listitem>
         <listitem>
            <para>
               Téléchargement (FTP): <ulink url="&gdm-download-ftp;"/> 
            </para> 
         </listitem>
         <listitem>
            <para>
               Somme de contrôle MD5 du téléchargement: &gdm-md5sum; 
            </para> 
         </listitem>
         <listitem>
            <para>
               Taille du téléchargement: &gdm-size; 
            </para> 
         </listitem>
         <listitem>
            <para>
               Estimation de l'espace disque requis: &gdm-buildsize; 
            </para> 
         </listitem>
         <listitem>
            <para>
               Estimation du temps de construction: &gdm-time; 
            </para> 
         </listitem>
      </itemizedlist>
      
      <bridgehead renderas="sect3"> Dépendances de GDM </bridgehead>
      
      <bridgehead renderas="sect4"> Requises </bridgehead>
      
      <para role="required">
         <xref linkend="accountsservice"/>, <xref linkend="gnome-panel"/>
         , <xref linkend="linux-pam"/>et <xref linkend="xorg7-lib"/>
      </para> 
      
      <bridgehead renderas="sect4"> Recommandées </bridgehead>
      
      <para role="recommended">
         <xref linkend="consolekit"/>(Requis pour la fonitionnalité Shutdown/Restart) et <xref
         linkend="polkit-gnome"/>
      </para> 
      
      <bridgehead renderas="sect4"> Facultatives </bridgehead>
      
      <para role="optional">
         <xref linkend='check'/>(requis pour lancer la suite de tests), <xref linkend="upower"/>
         , <xref linkend="libxklavier"/>, et <xref linkend="tcpwrappers"/>
      </para> 
      
      <para condition="html" role="usernotes">
         Notes utilisateur: <ulink url="&blfs-wiki;/gdm"/> 
      </para> 
      
   </sect2>
   
   <sect2 role="installation">
      <title>Installation de GDM</title> 
      
      <para>
         Il est recommandé d'avoir un groupe et un utilisateur dédiés pour prendre le contrôle du
         démon <command>gdm-binary</command> après qu'il a été démarré. Lancez les commandes
         suivantes en tant qu'utilisateur <systemitem class="username"> root </systemitem>&nbsp;:  
      </para> 
      
<screen role='root'>
<userinput>groupadd -fg 21 gdm &amp;&amp;
useradd -c "GDM Daemon Owner" -d /var/lib/gdm -u 21 \
    -g gdm -s /bin/false gdm  || [ $? == 9 ]</userinput></screen>
      
      <para>
         Installez <application>GDM</application> en lançant les commandes suivantes en tant
         qu'utilisateur non privilégié: 
      </para> 
      
<screen><userinput>./configure --prefix=$GNOME_PREFIX \
            --sysconfdir=$GNOME_SYSCONFDIR \
            --libexecdir=$GNOME_PREFIX/lib/gdm \
            --localstatedir=/var \
            --with-pam-prefix=/etc \
            --enable-static=no &amp;&amp;
make</userinput></screen>
      
      <para>
         Si vous avez installé <xref linkend="check"/>et si vous souhaitez lancer la suite de tests,
         lancez: <command>make check</command> . 
      </para> 
      
      <para>
         Maintenant, en tant qu'utilisateur <systemitem class="username"> root </systemitem>&nbsp;: 
         
      </para> 
      
<screen role='root'>
<userinput>make install &amp;&amp;
ln -fsv $GNOME_PREFIX/lib/gnome-settings-daemon/gnome-settings-daemon \
        $GNOME_PREFIX/lib/gdm &amp;&amp;
ln -fsv /usr/lib/ConsoleKit/ck-get-x11-display-device \
        $GNOME_PREFIX/lib/gdm &amp;&amp;
ln -fsv /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 \
        $GNOME_PREFIX/lib/gdm &amp;&amp;
ln -fsv /usr/lib/gnome-session/gnome-session-check-accelerated \
        $GNOME_PREFIX/lib/gdm</userinput></screen>
      
      <para>
         Si votre <envar>GNOME_SYSCONFDIR </envar>n'est <emphasis> 
         PAS </emphasis>
         simplement <filename class="directory">/etc</filename> alors vous aurez besoin de créer
         quelques liens symboliques supplémentaires pour que le menu et quelques fichiers <literal>
         </literal>
         .desktop <filename>gnome-settings-daemon.desktop</filename> (en particulier ) puissent
         <envar>être trouvés, car </envar>XDG_CONFIG_DIRS <command>n'est pas respecté
         quand</command> gdm <command>invoque</command> gnome-session . Lancez les commandes
         suivantes, <systemitem class="username"> en tant qu'utilisateur </systemitem>root  
      </para>  
      
<screen role='root'>
<userinput>ln -sfv $GNOME_SYSCONFDIR/xdg/menus /etc/xdg &amp;&amp;
pushd $GNOME_SYSCONFDIR/xdg/autostart &amp;&amp;
FILES=`ls` &amp;&amp;
popd &amp;&amp;
for F in $FILES; do
    ln -sfv $GNOME_SYSCONFDIR/xdg/autostart/$F /etc/xdg/autostart
done</userinput></screen>
      
   </sect2>
   
   <sect2 role="commands">
      <title>Explication des commandes</title> 
      
      <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/gnome-prefix.xml"/>
      <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/gnome-sysconfdir.xml"/>
      
      <para>
      <parameter>&nbsp;: </parameter> --libexecdir=$GNOME_PREFIX/lib/gdm&nbsp;: Ce
      <application>GDM</application> paramètre est utilisé pour que les programmes de support
      internes de <filename class='directory'>$GNOME_PREFIX/lib/gdm</filename> s'installent à
      l'endroit préféré <filename class='directory'>
         $GNOME_PREFIX/libexec</filename> et non 
      </para> 
      
      <para>
      <parameter>. </parameter> --localstatedir=/var&nbsp;: Cette commande <filename
      class="directory">/var</filename> met les fichiers dans et non <filename class="directory">
         $GNOME_PREFIX/var</filename> dans 
      </para> 
      
      <para>
      <parameter>. </parameter> --with-pam-prefix=/etc&nbsp;: Cette commande
      <application>PAM</application> met les fichiers de configuration de <filename
      class="directory">/etc/pam.d</filename> dans <filename class="directory">
         $GNOME_SYSCONFDIR</filename> au lieu de 
      </para> 
      
      <para>
      <parameter>. </parameter> --enable-static=no&nbsp;: Ce paramètre empêche 
      </para> 
      
      <para>
      <parameter>les bibliothèques statiques de s'installer. </parameter> ln -fsv
      $GNOME_PREFIX/lib/gnome-settings-daemon/...&nbsp;: <application>gdm</application> ces trois
      liens symboliques autorisent les fonctions d'arrêt/rédémarrage dans 
      </para> 
      
   </sect2>
   
   <sect2 role="configuration">
      <title>Configuration de GDM</title> 
      
      <sect3 id="gdm-config">
         <title>Fichiers de configuration</title> 
         
         <para>
            <filename>$GNOME_SYSCONFDIR/gdm/custom.conf</filename> 
         </para> 
         <indexterm zone="gdm gdm-config">
            <primary sortas="e-etc-gnome-&gnome-version;&gnome-minor-version;gdm-custom.conf">
            $GNOME_SYSCONFDIR/gdm/custom.conf </primary>
         </indexterm>
         
      </sect3>
      
      <sect3>
         <title>Informations de configuration</title> 
         
         <para>
            à fonctionner. <filename>$GNOME_SYSCONFDIR/gdm/custom.conf</filename> Le démon GDM est
            configuré en utilisant le fichier . <filename>gdm.schemas</filename> Les valeurs par
            défaut sont stockées dans GConf dans le fichier . Il est recommandé que les utilisateurs
            finaux <filename>$GNOME_SYSCONFDIR/gdm/custom.conf</filename> modifient le fichier car
            le fichier schemas peut être écrasé par les utilisateurs mettent à jour leur 
         </para> 
         
         <para>
              système pour avoir une nouvelle version de GDM. <application>PAM</application> Les
              fichiers de configuration <application>GDM</application> de contiennent des modules
              non présents dans installation de BLFS. Lancez les commandes suivantes <systemitem
              class="username"> en tant qu'utilisateur </systemitem>root pour remplacer ces fichiers
              par des fichiers contenant les modules  
         </para> 
         
<screen role="root">
<userinput>cat &gt; /etc/pam.d/gdm &lt;&lt; "EOF"
<literal>
</literal>
EOF
chmod -v 644 /etc/pam.d/gdm
cat &gt; /etc/pam.d/gdm-autologin &lt;&lt; "EOF"
<literal>
</literal>
EOF
chmod -v 644 /etc/pam.d/gdm-autologin
cat &gt; /etc/pam.d/gdm-welcome &lt;&lt; "EOF"
<literal>
</literal>
EOF
chmod -v 644 /etc/pam.d/gdm-welcome</userinput></screen>
         <indexterm zone="gdm gdm-config">
            <primary sortas="e-etc-pam.d-gdm"> /etc/pam.d/gdm </primary>
         </indexterm>
         <indexterm zone="gdm gdm-config">
            <primary sortas="e-etc-pam.d-gdm-autologin"> /etc/pam.d/gdm-autologin </primary>
         </indexterm>
         
         <para id="gdm-config-dbus">
            correctement spécifiés: <filename>gnome.desktop</filename> Le fichier
            <application>D-BUS</application> livré ne démarre par le démon de la session , et
            <application>GNOME</application> il en résulte que tous les fichiers nécessaires par le
            gestionnaire de fenêtre ne sont pas trouvés. Vous pouvez créer un nouveau fichier 
         </para> 
         
<screen role="root">
<userinput>cat &gt; $GNOME_PREFIX/share/xsessions/gnome-dbus.desktop &lt;&lt; "EOF"
<literal>
</literal>
EOF
chmod -v 644 $GNOME_PREFIX/share/xsessions/gnome-dbus.desktop</userinput></screen>
         
         <para>
            Xsession en utilisant la commande suivante en tant qu'utilisateur root. Choisissez cette
            session en utilisant la boîte de dialogue de sélection de session sur l'écran de
            connexion du gestionnaire d'affichage. Vous avez 
         </para> 
         
         <para>
            aussi la possibilité d'en faire votre session par défaut. Après avoir comparé les
            résultats en utilisant ces deux fichiers différents, et particulièrement si la
            traduction du fichier livré est utile pour vous, vous pouvez <literal>
            </literal>
            éditer les commandes <literal>
            </literal>
            Exec <filename>gnome.desktop</filename> et TryExec 
         </para> 
         
         <note> 
            <para>
               dans le fichier <filename class='extension'>.desktop</filename> fourni.
               Alternativement, vous pouvez l'effacer si vous le trouvez inutile. <filename
               class='extension'>
               .desktop</filename> Il se peut que vous utilisiez le fichier créé ci-dessus comme
               exemple pour créer des fichiers <application>GDM</application> supplémentaires et 
            </para> 
         </note>
         <important>
         
         <para>
            ajouter d'autres éléments désirés au menu de sélection des sessions
            <application>D-BUS</application> du gestionnaire d'affichage .
            <application>gdm</application> Si le démon système est exécuté pendant
            <application>D-BUS</application> l'installation de <command>,</command> assurez vous de
            stopper et de redémarrer le demon 
         </para> 
         </important>
         
         <para>
            avant de tenter de démarrer <command>gdm</command> . On peut tester <systemitem
            class="username"> gdm </systemitem>en l'exécutant en tant qu'utilisateur  
         </para> 
         
      </sect3>
      
      <sect3 id="gdm-init">
         <title>Script de démarrage</title> 
         
         <para>
            root . si vous souhaitez l'arrêter <filename>/etc/rc.d/init.d/gdm</filename> vous devez
            allez dans un tty différent et ensuite le tuer. <xref linkend="bootscripts"/>Pour
            démarrer une connexion graphique au démarrage du système, <envar>installez le script de
            démarrage </envar>fourni dans le paquet <filename class='directory'> /usr</filename> .
            Si votre variable d'environnement <filename class='directory'>
            /opt/gnome-&gnome-version;&gnome-minor-version;</filename> GNOME_PREFIX est autre chose
            que <envar>ou </envar>, vous devrez modifier la déclaration de
            <application>GNOME</application> PATH  
         </para> 
         <indexterm zone="gdm gdm-init">
            <primary sortas="f-gdm"> gdm </primary>
         </indexterm>
         
<screen role="root">
<userinput>make install-gdm</userinput></screen>
         
         <para>
            du script pour <filename>/etc/inittab</filename> inclure le chemin où vous avez installé
            . 
         </para> 
         
<screen role="root">
<userinput>sed -i 's/id:3:initdefault:/id:5:initdefault:/' \
    /etc/inittab</userinput></screen>
         
      </sect3>
      
   </sect2>
   
   <sect2 role="content">
      <title>Contenu</title> 
      
      <segmentedlist>
         <segtitle>Programmes installés</segtitle>
         <segtitle>Bibliothèques installées</segtitle>
         <segtitle>Répertoires installés</segtitle>
         
         <seglistitem>
            <seg>
               Default, Default.sample, Default, Default, Xsession, gdm, gdm-screenshot,
               gdmflexiserver, gdm-crash-logger, gdm-factory-slave, gdm-host-chooser,
               gdm-product-slave, gdm-session-worker, gdm-simple-chooser, gdm-simple-greeter,
               gdm-simple-slave, gdm-user-switch-applet, gdm-xdmcp-chooser-slave, gdm et gdm-binary
            </seg>
            <seg>
               libfingerprint.so, libpassword.so, libsmartcard.so
            </seg>
            <seg>
               $GNOME_SYSCONFDIR/{dbus-1/system.d.gdm/{Init,PostLogin,PostSession,PreSession}},
               <envar>$GNOME_PREFIX</envar> 
               /{lib/gdm,share/{gnome/help/gdm/*,omf/gdm, pixmaps/faces}},
               /var/{cache/gdm,gdm,lib/gdm/.gconf.mandatory,log/gdm, run/gdm/greeter}
            </seg>
         </seglistitem>
      </segmentedlist>
      <variablelist>
      
      <bridgehead renderas="sect3"> Descriptions courtes </bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      
      <varlistentry id="gdmflexiserver">
         <term><command>gdmflexiserver</command> </term>
         <listitem>
            <para>
               Maintenant éditez avec les 
            </para> 
            <indexterm zone="gdm gdmflexiserver">
               <primary sortas="b-gdmflexiserver"> gdmflexiserver </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="gdm-screenshot">
         <term><command>gdm-screenshot</command> </term>
         <listitem>
            <para>
               commandes suivantes. 
            </para> 
            <indexterm zone="gdm gdm-screenshot">
               <primary sortas="b-gdm-screenshot"> gdm-screenshot </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="gdm-prog">
         <term><command>gdm</command> </term>
         <listitem>
            <para>
               est le mécanisme de serveur flexi qui permet de lancer des sessions
               <application>GDM</application> GDM à la demande, dans une nouvelle console virtuelle.
               est un outil d'impression écran. <application>GNOME</application> est un script
               enveloppe pour exécute le binaire 
            </para> 
            <indexterm zone="gdm gdm-prog">
               <primary sortas="b-gdm"> gdm </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="gdm-binary">
         <term><command>gdm-binary</command> </term>
         <listitem>
            <para>
               , l'invite de connexion configurable <application>GNOME</application> basé sur 
            </para> 
            <indexterm zone="gdm gdm-binary">
               <primary sortas="b-gdm-binary"> gdm-binary </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      </variablelist>
      
   </sect2>
   
</sect1>
