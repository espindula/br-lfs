<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
    "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
   <!ENTITY % general-entities SYSTEM "../../general.ent">
   %general-entities;
   
   <!ENTITY sudo-download-http "http://www.sudo.ws/sudo/dist/sudo-&sudo-version;.tar.gz">
   <!ENTITY sudo-download-ftp  "ftp://ftp.twaren.net/Unix/Security/Sudo/sudo-&sudo-version;.tar.gz">
   <!ENTITY sudo-md5sum        "b9be6df7ecefedff2263052ed9fc5e93">
   <!ENTITY sudo-size          "1.5 Mio">
   <!ENTITY sudo-buildsize     "16 Mio">
   <!ENTITY sudo-time          "0.3 SBU">
   
]>
<sect1 id="sudo" xreflabel="sudo-&sudo-version;">
   <?dbhtml filename="sudo.html"?>
   
   <sect1info>
      <othername>$LastChangedBy: krejzi $</othername>
      <date>$Date: 2012-03-14 22:35:12 +0100 (mer. 14 mars 2012) $</date>
   </sect1info>
   
   <title>Sudo-&sudo-version;</title> 
   
   <indexterm zone="sudo">
      <primary sortas="a-sudo"> sudo </primary>
   </indexterm>
   
   <sect2 role="package">
      <title>Introduction à Sudo</title> 
      
      <para>
         Le paquet <application>sudo</application> permet à un administrateur système de donner à
         certains utilisateurs (ou à certains groupes d'utilisateurs) la possibilité de lancer tout
         ou partie des commandes en tant qu'utilisateur <systemitem class="username"> root
         </systemitem>ou qu'un autre utilisateur en enregistrant les commandes et les arguments.  
      </para> 
      
      &lfs70_checked;
      
      <bridgehead renderas="sect3"> Informations sur le paquet </bridgehead>
      <itemizedlist spacing="compact">
         <listitem>
            <para>
               Téléchargement (HTTP): <ulink url="&sudo-download-http;"/> 
            </para> 
         </listitem>
         <listitem>
            <para>
               Téléchargement (FTP): <ulink url="&sudo-download-ftp;"/> 
            </para> 
         </listitem>
         <listitem>
            <para>
               Somme de contrôle MD5 du téléchargement: &sudo-md5sum; 
            </para> 
         </listitem>
         <listitem>
            <para>
               Taille du téléchargement: &sudo-size; 
            </para> 
         </listitem>
         <listitem>
            <para>
               Estimation de l'espace disque requis: &sudo-buildsize; 
            </para> 
         </listitem>
         <listitem>
            <para>
               Estimation du temps de construction: &sudo-time; 
            </para> 
         </listitem>
      </itemizedlist>
      
      <bridgehead renderas="sect3"> Dépendances de Sudo </bridgehead>
      
      <bridgehead renderas="sect4"> Facultatives </bridgehead>
      
      <para role="optional">
         <ulink url="http://www.openafs.org/"> AFS </ulink>
         , <xref linkend="linux-pam"/>, <ulink url="http://www.fwtk.org/"> FWTK </ulink>
         , <xref linkend="mitkrb"/>, un <xref linkend="server-mail"/>
         (qui fournit une commande <command>sendmail</command> ), <xref linkend="openldap"/>, <ulink
         url="ftp://ftp.nrl.navy.mil/pub/security/opie"> Opie </ulink>
         and <ulink url="http://www.rsa.com/node.aspx?id=1156"> SecurID </ulink>
      </para> 
      
      <para condition="html" role="usernotes">
         Notes utilisateur: <ulink url="&blfs-wiki;/sudo"/> 
      </para> 
      
   </sect2>
   
   <sect2 role="installation">
      <title>Installation de Sudo</title> 
      
      <para>
         Installez <application>sudo</application> en lançant les commandes suivantes: 
      </para> 
      
<screen><userinput>./configure --prefix=/usr \
            --libexecdir=/usr/lib/sudo \
            --with-all-insults \
            --with-env-editor \
            --without-pam \
            --without-sendmail &amp;&amp;
make</userinput></screen>
      
      <para>
         Ce paquet n'est pas fourni avec une suite de tests. 
      </para> 
      
      <para>
         Maintenant, en tant qu'utilisateur <systemitem class="username"> root </systemitem>&nbsp;: 
         
      </para> 
      
<screen role="root">
<userinput>make install</userinput></screen>
      
   </sect2>
   
   <sect2 role="commands">
      <title>Explication des commandes</title> 
      
      <para>
         <option>
         --with-all-insults </option>
         : Ce paramètre inclut tous les paramètres insulte de <application>sudo</application> . 
      </para> 
      
      <para>
         <option>
         --with-env-editor </option>
         : Ce paramètre active l'utilsiation de la variable d'environnement EDITOR pour
         <command>visudo</command> . 
      </para> 
      
      <para>
         <option>
         --without-pam </option>
         : Ce paramètre désactive l'utilisation de l'authentication <application>PAM</application> .
         Ne le mettez pas si vous avez installé <application>Linux PAM</application> . 
      </para> 
      
      <para>
         <option>
         --without-sendmail </option>
         : Ce paramètre désactive l'utilisation de sendmail. Supprimez-le si vous avez un MTA
         compatible avec sendmail. 
      </para> 
      
      <note> 
         <para>
            Il y a de nombreuses options pour la commande <application>sudo</application> configure
            <command>de</command> . Regardez la sortie de <command>configure --help</command> pour
            une liste complète. 
         </para> 
      </note>
      
   </sect2>
   
   <sect2 role="configuration">
      <title>Configuration de Sudo</title> 
      
      <sect3 id="sudo-config">
         <title>Config File</title> 
         
         <para>
            <filename>/etc/sudoers</filename> 
         </para> 
         <indexterm zone="sudo sudo-config">
            <primary sortas="e-etc-sudoers"> /etc/sudoers </primary>
         </indexterm>
         
      </sect3>
      
      <sect3>
         <title>Informations de configuration</title> 
         
         <para>
            Le fichier <filename>sudoers</filename> peut être très compliqué. Il se compose de deux
            types d'entrées: des alias (des variables de base) et des spécifications utilisateur
            (qui indiquent qui peut lancer quoi). L'installation installe une configuration par
            défaut qui n'a aucun privilège installés pour aucun utilisateur. 
         </para> 
         
         <para>
            Un exemple d'utilisation est de permettre à l'administrateur système d'exécuter
            n'importe quel programme sans taper de mots de passe à chaque fois que les privilèges
            root sont nécessaires. On peut configurer cela ainsi: 
         </para> 
         
<screen>-# User alias specification
User_Alias  ADMIN = YourLoginId
# Allow people in group ADMIN to run all commands without a password
ADMIN       ALL = NOPASSWD: ALL
</screen>
         
         <para>
            Pour des détails, voir <command>man sudoers</command> . 
         </para> 
         
         <note> 
            <para>
               Les développeurs de <application>Sudo</application> recommandent fortement d'utiliser
               le programme <command>visudo</command> pour éditer le fichier
               <filename>sudoers</filename> . Il fournira une vérification de santé de base comme
               l'analyse de la syntaxe et les droits du fichiers pour éviter des erreurs possibles
               qui pourraient aboutir à une configuration vulnérable. 
            </para> 
         </note>
         
         <para>
            Si vous avez construit <application>Sudo</application> avec le support
            <application>PAM</application> , exécutez la commande suivante en tant qu'utilisateur
            <systemitem class="username"> root </systemitem>user pour créer le fichier de
            configuration <application>PAM</application>&nbsp;:  
         </para> 
         
<screen role="root">
<userinput>cat &gt; /etc/pam.d/sudo &lt;&lt; "EOF" &amp;&amp;
# Begin /etc/pam.d/sudo -# Inclure les paramètres d'authentification par défaut-auth      include   
 system-auth
# Inclure les paramètres du compte par défaut-account   include     system-account
# Initialise les variables d'environnement pour l'utilisateur-session   required    pam_env.so
# Inclure les valeurs par défaut de la session système-session   include     system-session
# End /etc/pam.d/sudo-EOF
chmod 644 /etc/pam.d/sudo</userinput></screen>
         
      </sect3>
      
   </sect2>
   
   <sect2 role="content">
      <title>Contenu</title> 
      
      <segmentedlist>
         <segtitle>Programmes installés</segtitle>
         <segtitle>Bibliothèque installée</segtitle>
         <segtitle>Répertoires installés</segtitle>
         
         <seglistitem>
            <seg>
               sudo, sudoedit, sudoreplay and visudo
            </seg>
            <seg>
               sudoers.so and sudo_noexec.so
            </seg>
            <seg>
               Aucun
            </seg>
         </seglistitem>
      </segmentedlist>
      <variablelist>
      
      <bridgehead renderas="sect3"> Descriptions courtes </bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      
      <varlistentry id="sudo_prog">
         <term><command>sudo</command> </term>
         <listitem>
            <para>
               exécute une commande en tant qu'un autre utilisateur selon les permissions du fichier
               de configuration <filename>/etc/sudoers</filename> . 
            </para> 
            <indexterm zone="sudo sudo">
               <primary sortas="b-sudo"> sudo </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="sudoedit">
         <term><command>sudoedit</command> </term>
         <listitem>
            <para>
               est un lien dur vers <command>sudo</command> qui inclut l'option <option>
               pour appeler un éditeur en tant qu'un autre utilisateur. </option>
               permet une édition sécurisée du fichier 
            </para> 
            <indexterm zone="sudo sudoedit">
               <primary sortas="b-sudoedit"> sudoedit </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="visudo">
         <term><command>visudo</command> </term>
         <listitem>
            <para>
               . <filename>sudoers</filename> est utilisé pour rejouer ou afficher les logs de
               sorties créés 
            </para> 
            <indexterm zone="sudo visudo">
               <primary sortas="b-visudo"> visudo </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="sudoreplay">
         <term><command>sudoreplay</command> </term>
         <listitem>
            <para>
               sudo <command>.</command> est le module par defaut de règles de sécurité. 
            </para> 
            <indexterm zone="sudo sudoreplay">
               <primary sortas="b-sudoreplay"> sudoreplay </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="sudoers">
         <term><filename class='libraryfile'>sudoers.so</filename> </term>
         <listitem>
            <para>
               active le support de la fonctionnalité "noexec" qui empêche un programme lié de
               manière dynamique exécuté par sudo d'exécuter un autre programme (pensez aux
               échappements du shell). 
            </para> 
            <indexterm zone="sudo sudoers">
               <primary sortas="c-sudoers"> sudoers.so </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="sudo_noexec">
         <term><filename class='libraryfile'>sudo_noexec.so</filename> </term>
         <listitem>
            <para>
            </para> 
            <indexterm zone="sudo sudo_noexec">
               <primary sortas="c-sudo_noexec"> sudo_noexec.so </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      </variablelist>
      
   </sect2>
   
</sect1>
