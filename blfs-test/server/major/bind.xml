<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
    "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
   <!ENTITY % general-entities SYSTEM "../../general.ent">
   %general-entities;
   
   <!ENTITY bind-download-http "http://gd.tuwien.ac.at/infosys/servers/isc/bind9/&bind-version;/bind-&bind-version;.tar.gz">
   <!ENTITY bind-download-ftp "ftp://ftp.isc.org/isc/bind9/&bind-version;/bind-&bind-version;.tar.gz">
   <!ENTITY bind-md5sum "afa41f8203d50bedad65071f9b6f96d7">
   <!ENTITY bind-size "8.1 Mio">
   <!ENTITY bind-buildsize "260 Mio">
   <!ENTITY bind-time "1.7 SBU (ajouter 13 minutes, processor independent, to run the complete test suite)">
   
]>
<sect1 id="bind" xreflabel="BIND-&bind-version;">
   <?dbhtml filename="bind.html"?>
   
   <sect1info>
      <othername>$LastChangedBy: andy $</othername>
      <date>$Date: 2012-03-06 17:54:55 +0100 (mar. 06 mars 2012) $</date>
   </sect1info>
   
   <title></title> 
   
   <indexterm zone="bind">
      <primary sortas="a-BIND"> BIND </primary>
   </indexterm>
   
   <sect2 role="package">
      <title></title> 
      
      <para>
          <application></application>  <xref linkend="bind-utils"/> 
      </para> 
      
      &lfs71_checked;
      
      <bridgehead renderas="sect3">  </bridgehead>
      <itemizedlist spacing="compact">
         <listitem>
            <para>
                <ulink url="&bind-download-http;"/> 
            </para> 
         </listitem>
         <listitem>
            <para>
                <ulink url="&bind-download-ftp;"/> 
            </para> 
         </listitem>
         <listitem>
            <para>
            </para> 
         </listitem>
         <listitem>
            <para>
            </para> 
         </listitem>
         <listitem>
            <para>
            </para> 
         </listitem>
         <listitem>
            <para>
            </para> 
         </listitem>
      </itemizedlist>
      
      <bridgehead renderas="sect3">  </bridgehead>
      <itemizedlist spacing='compact'>
         <listitem>
            <para>
                <ulink url="&patch-root;/bind-&bind-version;-use_iproute2-1.patch"/> 
            </para> 
         </listitem>
      </itemizedlist>
      
      <bridgehead renderas="sect3">  </bridgehead>
      
      <bridgehead renderas="sect4">  </bridgehead>
      
      <para role="optional">
         <xref linkend="openssl"/>
      </para> 
      
      <bridgehead renderas="sect4">  </bridgehead>
      
      <para role="optional">
         <xref linkend="perl-net-dns"/> <xref linkend="net-tools"/>
      </para> 
      
      <bridgehead renderas="sect4">  </bridgehead>
      
      <para role="optional">
         <xref linkend="texlive"/> <xref linkend="libxslt"/>
      </para> 
      
      <para condition="html" role="usernotes">
          <ulink url="&blfs-wiki;/bind"/> 
      </para> 
      
   </sect2>
   
   <sect2 role="installation">
      <title></title> 
      
      <para>
      </para> 
      
<screen><userinput>patch -Np1 -i ../bind-&bind-version;-use_iproute2-1.patch</userinput></screen>
      
      <para>
          <command></command>  <application></application>  <option>
          </option>
      </para> 
      
<screen><userinput>sed -i 's# driver.o# .libs/driver.o#'
bin/tests/system/dlzexternal/Makefile.in</userinput></screen>
      
      <para>
          <application></application>  
      </para> 
      
<screen><userinput>./configure --prefix=/usr \
            --sysconfdir=/etc \
            --localstatedir=/var \
            --mandir=/usr/share/man \
            --enable-threads \
            --with-libtool &amp;&amp;
make</userinput></screen>
      
      <para>
          <systemitem class="username">  </systemitem>  
      </para> 
      
<screen role="root">
<userinput>bin/tests/system/ifconfig.sh up</userinput></screen>
      
      <para>
      </para> 
      
<screen><userinput>make check 2&gt;&amp;1 | tee check.log</userinput></screen>
      
      <para>
          <systemitem class="username">  </systemitem>  
      </para> 
      
<screen role="root">
<userinput>bin/tests/system/ifconfig.sh down</userinput></screen>
      
      <para>
      </para> 
      
<screen><userinput>grep "R:PASS" check.log | wc -l</userinput></screen>
      
      <para>
          <systemitem class="username">  </systemitem>  
      </para> 
      
<screen role="root">
<userinput>make install &amp;&amp;
chmod 755 /usr/lib/lib{bind9,isc{,cc,cfg},lwres,dns}.so.*.?.? &amp;&amp;
cd doc &amp;&amp;
install -v -d -m755 /usr/share/doc/bind-&bind-version;/{arm,draft,misc,rfc} &amp;&amp;
install -v -m644 arm/*.html \
    /usr/share/doc/bind-&bind-version;/arm &amp;&amp;
install -v -m644 draft/*.txt \
    /usr/share/doc/bind-&bind-version;/draft &amp;&amp;
install -v -m644 rfc/* \
    /usr/share/doc/bind-&bind-version;/rfc &amp;&amp;
install -v -m644 \
    misc/{dnssec,ipv6,migrat*,options,rfc-compliance,roadmap,sdb} \
    /usr/share/doc/bind-&bind-version;/misc</userinput></screen>
      
   </sect2>
   
   <sect2 role="commands">
      <title></title> 
      
      <para>
      <parameter> </parameter>  <application></application>  <filename
      class='directory'>/etc</filename>  <filename class='directory'>
         /usr/etc</filename>  
      </para> 
      
      <para>
      <parameter> </parameter>  
      </para> 
      
      <para>
      <parameter> </parameter>  
      </para> 
      
      <para>
         <command></command>  <command></command>  
      </para> 
      
      <para>
         <command></command>  
      </para> 
      
   </sect2>
   
   <sect2 role="configuration">
      <title></title> 
      
      <sect3 id="bind-config">
         <title></title> 
         
         <para>
            <filename>named.conf</filename>  <filename>root.hints</filename> 
            <filename>127.0.0</filename>  <filename>rndc.conf</filename> 
            <filename>resolv.conf</filename> 
         </para> 
         <indexterm zone="bind bind-config">
            <primary sortas="e-etc-named.conf"> /etc/named.conf </primary>
         </indexterm>
         <indexterm zone="bind bind-config">
            <primary sortas="e-etc-rndc.conf"> /etc/rndc.conf </primary>
         </indexterm>
         <indexterm zone="bind bind-config">
            <primary sortas="e-etc-resolv.conf"> /etc/resolv.conf </primary>
         </indexterm>
         <indexterm zone="bind bind-config">
            <primary sortas="e-etc-namedb-root.hints"> /etc/namedb/root.hints </primary>
         </indexterm>
         <indexterm zone="bind bind-config">
            <primary sortas="e-etc-namedb-pz-127.0.0.0"> /etc/namedb/pz/127.0.0.0 </primary>
         </indexterm>
         
      </sect3>
      
      <sect3>
         <title></title> 
         
         <para>
            <application></application>  <command></command>  <systemitem class="username"> 
            </systemitem> <systemitem class="username">  </systemitem> <envar> </envar>  
         </para> 
         
         <para>
             <systemitem class="username">  </systemitem>  
         </para> 
         
<screen role="root">
<userinput>groupadd -g 20 named &amp;&amp;
useradd -c "BIND Owner" -g named -s /bin/false -u 20 named &amp;&amp;
install -d -m770 -o named -g named /srv/named</userinput></screen>
         
         <para>
             <application></application>  
         </para> 
         
<screen role="root">
<userinput>cd /srv/named &amp;&amp;
mkdir -p dev etc/namedb/{slave,pz} usr/lib/engines var/run/named &amp;&amp;
mknod /srv/named/dev/null c 1 3 &amp;&amp;
mknod /srv/named/dev/random c 1 8 &amp;&amp;
chmod 666 /srv/named/dev/{null,random} &amp;&amp;
cp /etc/localtime etc &amp;&amp;
touch /srv/named/managed-keys.bind &amp;&amp;
cp /usr/lib/engines/libgost.so usr/lib/engines &amp;&amp;
[ $(uname -m) = x86_64 ] &amp;&amp; ln -sv lib usr/lib64</userinput></screen>
         
         <para>
             <filename>rndc.conf</filename>  <command></command>  <command></command> 
             <filename>named.conf</filename>  <filename>rdnc.conf</filename>  <command></command>  
         </para> 
         
<screen role="root">
<userinput>rndc-confgen -r /dev/urandom -b 512>
 /etc/rndc.conf &amp;&amp;
sed '/conf/d;/^#/!d;s:^#&nbsp;::' /etc/rndc.conf>
 /srv/named/etc/named.conf</userinput></screen>
         
         <para>
             <filename>named.conf</filename>  <command></command>  
         </para> 
         
<screen role="root">
<?dbfo keep-together="auto"?>
<userinput>cat &gt;&gt; /srv/named/etc/named.conf &lt;&lt; "EOF"
<literal>
    directory "/etc/namedb"; -    pid-file "/var/run/named.pid"; -    statistics-file
    "/var/run/named.stats"; -zone "." { -    file "root.hints"; -zone "0.0.127.in-addr.arpa" { -   
    file "pz/127.0.0"; -      file "named.run";                   // write to named.run in -        
                                     // of "named.run"
</literal>
EOF</userinput></screen>
         
         <para>
         </para> 
         
<screen role="root">
<userinput>cat &gt; /srv/named/etc/namedb/pz/127.0.0 &lt;&lt; "EOF"
<literal>
</literal>
EOF</userinput></screen>
         
         <para>
             <filename>root.hints</filename>  
         </para> 
         
         <note> 
            <para>
            </para> 
         </note>
         
<screen role="root">
<userinput>cat &gt; /srv/named/etc/namedb/root.hints &lt;&lt; "EOF"
<literal>
</literal>
EOF</userinput></screen>
         
         <para>
             <filename>root.hints</filename>  <command></command>  <ulink
             url="ftp://rs.internic.net/domain/named.root" />  <ulink
             url="http://www.bind9.net/Bv9ARM.html">
             </ulink>
         </para> 
         
         <para>
             <filename>resolv.conf</filename>  
         </para> 
         
         <note> 
            <para>
                <replaceable> </replaceable> 
            </para> 
         </note>
         
<screen role="root">
<userinput>cp /etc/resolv.conf /etc/resolv.conf.bak &amp;&amp;
cat &gt; /etc/resolv.conf &lt;&lt; "EOF"
<literal>
<replaceable></replaceable>
</literal>
EOF</userinput></screen>
         
         <para>
             <command></command>  
         </para> 
         
<screen role="root">
<userinput>chown -R named:named /srv/named</userinput></screen>
         
      </sect3>
      
      <sect3  id="bind-init">
         <title></title> 
         
         <para>
             <filename>/etc/rc.d/init.d/bind</filename>  <xref linkend="bootscripts"/> 
         </para> 
         <indexterm zone="bind bind-init">
            <primary sortas="f-bind"> bind </primary>
         </indexterm>
         
<screen role="root">
<userinput>make install-bind</userinput></screen>
         
         <para>
             <application></application>  
         </para> 
         
<screen role="root">
<userinput>/etc/rc.d/init.d/bind start</userinput></screen>
         
      </sect3>
      
      <sect3>
         <title></title> 
         
         <para>
             <application></application>  <command></command>  
         </para> 
         
<screen><userinput>dig -x 127.0.0.1</userinput></screen>
         
         <para>
             <command></command>  
         </para> 
         
<screen><userinput>dig www.&lfs-domainname; &amp;&amp;
dig www.&lfs-domainname;</userinput></screen>
         
         <para>
             <application></application>  <filename>doc/arm/Bv9ARM.html</filename>  
         </para> 
         
      </sect3>
      
   </sect2>
   
   <sect2 role="content">
      <title></title> 
      
      <segmentedlist>
         <segtitle>Programmes installés</segtitle>
         <segtitle>Bibliothèques installées</segtitle>
         <segtitle>Répertoires installés</segtitle>
         
         <seglistitem>
            <seg>
               
            </seg>
            <seg>
               
            </seg>
            <seg>
               
            </seg>
         </seglistitem>
      </segmentedlist>
      <variablelist>
      
      <bridgehead renderas="sect3">  </bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      
      <varlistentry id="dig">
         <term><command>dig</command> </term>
         <listitem>
            <para>
            </para> 
            <indexterm zone="bind dig">
               <primary sortas="b-dig"> dig </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="dnssec-keygen">
         <term><command>dnssec-keygen</command> </term>
         <listitem>
            <para>
            </para> 
            <indexterm zone="bind dnssec-keygen">
               <primary sortas="b-dnssec-keygen"> dnssec-keygen </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="dnssec-signzone">
         <term><command>dnssec-signzone</command> </term>
         <listitem>
            <para>
            </para> 
            <indexterm zone="bind dnssec-signzone">
               <primary sortas="b-dnssec-signzone"> dnssec-signzone </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="host">
         <term><command>host</command> </term>
         <listitem>
            <para>
            </para> 
            <indexterm zone="bind host">
               <primary sortas="b-host"> host </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="lwresd">
         <term><command>lwresd</command> </term>
         <listitem>
            <para>
            </para> 
            <indexterm zone="bind lwresd">
               <primary sortas="b-lwresd"> lwresd </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="named">
         <term><command>named</command> </term>
         <listitem>
            <para>
            </para> 
            <indexterm zone="bind named">
               <primary sortas="b-named"> named </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="named-checkconf">
         <term><command>named-checkconf</command> </term>
         <listitem>
            <para>
                <filename>named.conf</filename>  
            </para> 
            <indexterm zone="bind named-checkconf">
               <primary sortas="b-named-checkconf"> named-checkconf </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="named-checkzone">
         <term><command>named-checkzone</command> </term>
         <listitem>
            <para>
            </para> 
            <indexterm zone="bind named-checkzone">
               <primary sortas="b-named-checkzone"> named-checkzone </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="nslookup">
         <term><command>nslookup</command> </term>
         <listitem>
            <para>
            </para> 
            <indexterm zone="bind nslookup">
               <primary sortas="b-nslookup"> nslookup </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="nsupdate">
         <term><command>nsupdate</command> </term>
         <listitem>
            <para>
            </para> 
            <indexterm zone="bind nsupdate">
               <primary sortas="b-nsupdate"> nsupdate </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="rndc">
         <term><command>rndc</command> </term>
         <listitem>
            <para>
                <application></application>  
            </para> 
            <indexterm zone="bind rndc">
               <primary sortas="b-rndc"> rndc </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="rndc-confgen">
         <term><command>rndc-confgen</command> </term>
         <listitem>
            <para>
                <filename>rndc.conf</filename>  
            </para> 
            <indexterm zone="bind rndc-confgen">
               <primary sortas="b-rndc-confgen"> rndc-confgen </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      </variablelist>
      
   </sect2>
   
</sect1>
