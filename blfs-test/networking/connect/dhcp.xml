<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
    "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
   <!ENTITY % general-entities SYSTEM "../../general.ent">
   %general-entities;
   
   <!ENTITY dhcp-download-http " ">
   <!ENTITY dhcp-download-ftp "ftp://ftp.isc.org/isc/dhcp/&dhcp-version;/dhcp-&dhcp-version;.tar.gz">
   <!ENTITY dhcp-md5sum "14f57fd580d01633d0fad4809007a801">
   <!ENTITY dhcp-size "9.1 Mio">
   <!ENTITY dhcp-buildsize "192 M (client and server), 140MB client only, 172MB server only">
   <!ENTITY dhcp-time "0.7 SBU (client and server, or server), 0.6 SBU client only ">
   
]>
<sect1 id="dhcp" xreflabel="DHCP-&dhcp-version;">
   <?dbhtml filename="dhcp.html"?>
   
   <sect1info>
      <othername>$LastChangedBy: bdubbs $</othername>
      <date>$Date: 2012-02-10 21:24:23 +0100 (ven. 10 févr. 2012) $</date>
   </sect1info>
   
   <title>DHCP-&dhcp-version;</title> 
   
   <indexterm zone="dhcp">
      <primary sortas="a-dhcp"> Dhcp </primary>
   </indexterm>
   
   <sect2 role="package">
      <title>Introduction à DHCP</title> 
      
      <para>
         Le paquet <application>DHCP</application> contient le client et le serveur DHCP.
         <command>dhclient</command> (le client) est utile pour connecter votre ordinateur à un
         réseau utilisant DHCP pour attribuer des adresses réseau. <command>dhcpd</command> (le
         serveur) est utile pour affecter des adresses réseau sur votre réseau privé. 
      </para> 
      
      &lfs70_checked;
      
      <bridgehead renderas="sect3"> Informations sur le paquet </bridgehead>
      <itemizedlist spacing="compact">
         <listitem>
            <para>
               Téléchargement (HTTP): <ulink url="&dhcp-download-http;"/> 
            </para> 
         </listitem>
         <listitem>
            <para>
               Téléchargement (FTP): <ulink url="&dhcp-download-ftp;"/> 
            </para> 
         </listitem>
         <listitem>
            <para>
               Somme de contrôle MD5 du téléchargement: &dhcp-md5sum; 
            </para> 
         </listitem>
         <listitem>
            <para>
               Taille du téléchargement: &dhcp-size; 
            </para> 
         </listitem>
         <listitem>
            <para>
               Estimation de l'espace disque requis: &dhcp-buildsize; 
            </para> 
         </listitem>
         <listitem>
            <para>
               Estimation du temps de construction: &dhcp-time; 
            </para> 
         </listitem>
      </itemizedlist>
      
      <bridgehead renderas="sect3"> Téléchargements supplémentaires </bridgehead>
      <itemizedlist spacing='compact'>
         <listitem>
            <para>
               Correctif recommandé (pour le client): <ulink
               url="&patch-root;/dhcp-&dhcp-version;-iproute2-1.patch"/> 
            </para> 
         </listitem>
         <listitem>
            <para>
               Correctif facultatif: <ulink
               url="&patch-root;/dhcp-&dhcp-version;-missing_ipv6-1.patch"/> 
            </para> 
         </listitem>
      </itemizedlist>
      
      <bridgehead renderas="sect3"> Dépendances de DHCP </bridgehead>
      
      <bridgehead renderas="sect4"> Requises </bridgehead>
      
      <para role="required">
         <xref linkend="net-tools"/>est requis lors de l'exécution par <command>dhclient</command>
         si vous n'utilisez pas le correctif iproute2. 
      </para> 
      
      <para condition="html" role="usernotes">
         Notes utilisateur: <ulink url="&blfs-wiki;/dhcp"/> 
      </para> 
      
   </sect2>
   
   <sect2 role="kernel" id='dhcp-kernel'>
      <title>Configuration du noyau</title> 
      
      <para>
         Vous devez avoir compilé en dur le support de Packet Socket (Networking Support &rArr;
         Networking Options &rArr; Packet Socket). Si vous n'avez pas compilé en dur le support
         d'IPv6 (Networking Support &rArr; Networking Options &rArr; The IPv6 Protocol), vous
         utilisez le correctif missing_ipv6. 
      </para> 
      <indexterm zone="dhcp dhcp-kernel">
         <primary sortas="d-dhcp"> DHCP </primary>
      </indexterm>
      
   </sect2>
   
   <sect2 role="installation">
      <title>Installation de DHCP</title> 
      
      <para>
         Si vous n'avez pas compilé en dur dans le noyau le support d'IPV6, appliquez le correctif
         missing_patch 
      </para> 
      
<screen><userinput>patch -Np1 -i ../dhcp-&dhcp-version;-missing_ipv6-1.patch</userinput></screen>
      
      <para>
         Si vous n'installez que le client, appliquez le correctif iproute2 sauf si vous prévoyez
         d'installer <application>net-tools</application> et si vous ne souhaitez utiliser que le
         client: 
      </para> 
      
<screen><userinput>patch -Np1 -i ../dhcp-&dhcp-version;-iproute2-1.patch</userinput></screen>
      
      <para>
         Installez <application>DHCP</application> en lançant les commandes suivantes: 
      </para> 
      
<screen><userinput>sed -i 's%\(^sbindir =\).*%\1 @prefix@@sbindir@%' server/Makefile.in &amp;&amp;
./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var \
            --sbindir=/sbin                                      \
            --with-srv-lease-file=/var/state/dhcp/dhcpd.leases   \
            --with-srv6-lease-file=/var/state/dhcp/dhcpd6.leases \
            --with-cli-lease-file=/var/state/dhclient.leases     \
            --with-cli6-lease-file=/var/state/dhclient6.leases   &amp;&amp;
sed -i 's/-Werror//' {client,common,dst,omapip,relay,server,tests}/Makefile</userinput></screen>
      
      <para>
         Si vous ne souhaitez construire que le serveur, entrez: 
      </para> 
      
<screen><userinput>sed -i 's/ client//' Makefile</userinput></screen>
      
      <para>
         Si vous ne souhaitez construire que le client, entrez: 
      </para> 
      
<screen><userinput>sed -i 's/ dhcpctl relay server//' Makefile</userinput></screen>
      
      <para>
         Construisez la/les variante(s) choisie(s) avec: 
      </para> 
      
<screen><userinput>make</userinput></screen>
      
      <para>
         Pour tester les résultats, lancez: <command>make check</command> 
      </para> 
      
      <para>
         Maintenant, en tant qu'utilisateur <systemitem class="username"> root </systemitem>&nbsp;: 
         
      </para> 
      
<screen role="root">
<userinput>make install &amp;&amp;
install -v -m755 client/scripts/linux /sbin/dhclient-script</userinput></screen>
      
      <para>
         Le <filename>/etc/dhcpd.conf</filename> (serveur) et
         <filename>/etc/dhclient.conf</filename> (client) fournis sont des exemples valant pour des
         systèmes <literal>
         </literal>
         BSD spécifiques. Il est peu probable qu'ils s'adaptent à vos besoins, mais vous pourriez
         souhaiter les lire pour pour récupérer des idées avant de les effacer ou de les déplacer 
      </para> 
      
      <para>
         vers un autre endroit. 
      </para> 
      
      <para>
         Maintenant, créez les répertoires nécessaires pour les interfaces. 
      </para> 
      
<screen role="root">
<userinput>mkdir -pv /var/state/dhcp</userinput></screen>
      
      <para>
         Pour le serveur: 
      </para> 
      
<screen role="root">
<userinput>mkdir -pv /var/state</userinput></screen>
      
   </sect2>
   
   <sect2 role="commands">
      <title>Explication des commandes</title> 
      
      <para>
         <command>Pour le client:</command> sed -i 's%\(^sbindir =\).*%\1 @prefix@@sbindir@%'
         server/Makefile.in <command>Cette commande déplace le programme</command> dhcp <filename
         class='directory'>/usr/sbin</filename> vers <filename class='directory'>
         /sbin</filename> au lieu de car il est inutile pendant que 
      </para> 
      
      <para>
         <command>le serveur démarre.</command> --sbindir=/sbin <command>Déplace le
         programme</command> dhclient <filename class='directory'>/sbin</filename> vers <filename
         class='directory'>
         /usr/sbin</filename> au lieu de pour qu'il soit disponible <filename
         class='directory'>/usr</filename> au moment du démarrage, par exemple si <literal>
         </literal>
         sera un montage 
      </para> 
      
      <para>
         <command>nfs</command> . --with-*-lease-files=... <filename
         class='directory'>/var/db</filename> Par défaut, les fichiers de lease (interfaces) vont
         dans 
      </para> 
      
      <para>
         <command>, ce</command> qui est un anachronisme. sed -i 's/-Werror//'
         {client,common,...}/Makefile <literal>
         </literal>
         - <literal>
         </literal>
         les Makefiles de ce paquet ajoutent <application>gcc</application> -Werror à <literal>
         </literal>
         CFLAGS .  Sur les versions récentes de 
      </para> 
      
      <para>
         <command>davantage d'éléments, en particulier des variables inutiles, créent des</command>
         avertissements. Le drapeau -Werror 
      </para> 
      
      <para>
         <option>
         fait casser la construction </option>
         par les avertissements, donc nous le supprimons là où il le faut. sed -i 's/ something//'
         Makefile - ceci arrête <filename>libdhcpctl.a</filename> la construction à l'entrée dans
         le/les répertoire(s) nommé(s) ici. 
      </para> 
      
   </sect2>
   
   <sect2 role="configuration">
      <title>Configuration de DHCP</title> 
      
      <sect3 id='dhcp-config'>
         <title>Fichiers de configuration</title> 
         
         <para>
            <filename>/etc/dhclient.conf</filename> rm -v /usr/lib/lib{dhcpctl,dst,omapi}.a
            <filename>/etc/dhcpd.conf</filename> 
         </para> 
         <indexterm zone="dhcp dhcp-config">
            <primary sortas="e-etc-dhclient.conf"> /etc/dhclient.conf </primary>
         </indexterm>
         <indexterm zone="dhcp dhcp-config">
            <primary sortas="e-etc-dhcpd.conf"> /etc/dhcpd.conf </primary>
         </indexterm>
         
      </sect3>
      
      <sect3 id='dhcp-init'>
         <title>Informations de configuration</title> 
         
         <para>
            - il n'y a aucun moyen facile d'empêcher l'installation de ces bibliothèques statiques.
            <xref linkend="basicnet-connect"/>Mais on ne s'en sert que lors de la construction du
            paquet. 
         </para> 
         
         <para>
            n'est installé que si vous construisez le serveur. et Vous pouvez trouver des
            informations sur la configuring du client <emphasis role="strong">
            DHCP au chapitre </emphasis>
            . Remarquez que vous n'avez besoin du serveur DHCP que si voulez gérer 
         </para> 
         
         <para>
            des adresses LAN sur votre réseau. Le client DHCP n'a pas besoin que ce
            <filename>/etc/rc.d/init.d/dhcp</filename> script soit utilisé. Remarquez aussi que ce
            script est codé pour l'interface <xref linkend="bootscripts"/>eth1 
         </para> 
         <indexterm zone="dhcp dhcp-init">
            <primary sortas="f-dhcp"> dhcpd </primary>
         </indexterm>
         
<screen role="root">
<userinput>make install-dhcp</userinput></screen>
         
         <para>
            , ce qui peut se changer selon votre configuration matérielle. 
         </para> 
         
<screen role="root">
<userinput>touch /var/state/dhcp/dhcpd.leases</userinput></screen>
         
         <para>
            Installez le script de démarrage inclu dans le paquet . Le fichier lease doit exister au
            démarrage. La commande suivante <filename>dhcp.conf</filename> satisfera cette exigence:
            
         </para> 
         
<screen role="root">
<userinput>cat &gt; /etc/dhcpd.conf &lt;&lt; "EOF"
<literal>
<replaceable></replaceable><replaceable>
</replaceable><replaceable></replaceable><replaceable>
</replaceable><replaceable></replaceable>
</literal>
EOF</userinput></screen>
         
         <para>
            Les commandes suivantes créeront un fichier de configuration de base d'un serveur DHCP.
            Ce sont plusieurs options que vous pourriez vouloir 
         </para> 
         
      </sect3>
      
   </sect2>
   
   <sect2 role="content">
      <title>Contenu</title> 
      
      <segmentedlist>
         <segtitle>Programmes installés</segtitle>
         <segtitle>Bibliothèques installées</segtitle>
         <segtitle>Répertoires installés</segtitle>
         
         <seglistitem>
            <seg>
               dhcpd, dhcrelay, dhclient, dhclient-script, et omshell
            </seg>
            <seg>
               libbdhcpctl.a, libdst.a, libomapi.a
            </seg>
            <seg>
               /var/state/dhcp, /usr/include/omapip, et /usr/include/isi-dhcp
            </seg>
         </seglistitem>
      </segmentedlist>
      <variablelist>
      
      <bridgehead renderas="sect3"> Descriptions courtes </bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      
      <varlistentry id="dhclient">
         <term><command>dhclient</command> </term>
         <listitem>
            <para>
               ajouter (des informations passées au client DHCP) et ils sont 
            </para> 
            <indexterm zone="dhcp dhclient">
               <primary sortas="b-dhclient"> dhclient </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="dhclient-script">
         <term><command>dhclient-script</command> </term>
         <listitem>
            <para>
               traités dans les pages de man de . Vous devriez modifier toutes les adresses pour
               correspondre à votre 
            </para> 
            <indexterm zone="dhcp dhclient-script">
               <primary sortas="b-dhclient-script"> dhclient-script </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="dhcpd">
         <term><command>dhcpd</command> </term>
         <listitem>
            <para>
               votre contexte. est l'implémentation du client DHCP. est utilisé par dhclient pour
               (re)configurer les interfaces. Il peut faire des modifications supplémentaires en
               appelant un 
            </para> 
            <indexterm zone="dhcp dhcpd">
               <primary sortas="b-dhcpd"> dhcpd </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="dhcrelay">
         <term><command>dhcrelay</command> </term>
         <listitem>
            <para>
               dhclient-{entry,exit}-hooks personnalisé. implémente les requêtes
               <foreignphrase>Dynamic Host Configuration Protocol</foreignphrase> (DHCP, protocole
               de configuration d'hôte 
            </para> 
            <indexterm zone="dhcp dhcrelay">
               <primary sortas="b-dhcrelay"> dhcrelay </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      
      <varlistentry id="omshell">
         <term><command>omshell</command> </term>
         <listitem>
            <para>
               dynamique) et <foreignphrase>Internet Bootstrap Protocol</foreignphrase> (BOOTP) pour
               les adresses réseaux. offre un moyen d'accepter des requêtes DHCP et BOOTP sur un
               sous-réseau sans serveur DHCP et les relayer vers le serveur DHCP d'un 
            </para> 
            <indexterm zone="dhcp omshell">
               <primary sortas="b-omshell"> omshell </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      </variablelist>
      
   </sect2>
   
</sect1>
