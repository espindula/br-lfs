<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
    "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
   <!ENTITY % general-entities SYSTEM "../../general.ent">
   %general-entities;
   
]>
<sect1 id="xorg-config">
   <?dbhtml filename="xorg-config.html"?>
   
   <sect1info>
      <othername>$LastChangedBy: ken $</othername>
      <date>$Date: 2012-04-08 23:22:47 +0200 (dim. 08 avril 2012) $</date>
   </sect1info>
   
   <title>Xorg-&xorg7-release; Test et configuration</title> 
   
   <sect2 id='X11-testing' xreflabel="Testing Xorg">
      <title>Test de Xorg</title> 
      
      <para>
         Pour tester l'installation de <application>Xorg</application> , tapez <userinput>startx
         </userinput>
         .  Cette commande lance un gestionnaire de fenêtres très rudimentaire appelé <emphasis>
         twm </emphasis>
         avec trois terminaux X (xterm) et une fenêtre d'horloge (xclock). Le terminal X dans le
         coin supérieur gauche est un terminal de login et lance <emphasis>
         exit </emphasis>
         dans le terminal quand l'on quittera la session <application>X Window</application> . Le
         troisième terminal X peut être recouvert sur votre système par les deux autres terminaux X.
         
      </para> 
      
      <para>
         Généralement, il n'y a pas de configuration spécifique requise pour
         <application>Xorg</application> , mais une personnalisation est possible.  Pour plus de
         détails voir <xref linkend='xconfig'/>en dessous. 
      </para> 
      
   </sect2>
   
   <sect2 role="configuration" id='checking-dri' xreflabel="Checking the DRI installation">
      <title>Vérifier l'installation de la Direct Rendering Infrastructure (DRI)</title> 
      
      <para>
         DRI est un environnement permettant aux logiciels d'accéder au matériel graphique d'une
         manière sûre et efficace. Elle est installée par défaut dans <application>X</application>
         (en utilisant <application>MesaLib</application> ) si vous avez une carte graphique
         supportée. 
      </para> 
      
      <para>
         Pour vérifier que la DRI est installée correctement, vérifiez que le fichier journal
         <filename>/var/log/Xorg.0.log</filename> contient des messages comme: 
      </para> 
      
<screen><literal>
</literal>
</screen>
      
      <note> 
         <para>
            Il se peut que la configuration DRI diffère si vous utilisez d'autres pilotes tels que
            ceux de <ulink url="http://www.nvidia.com/page/home.html"> NVIDIA </ulink>
            ou de <ulink url="http://www.ati.com/"> ATI </ulink>
            . 
         </para> 
      </note>
      
      <para>
         Alors que tous les utilisateurs peuvent utiliser l'accélération logicielle, l'accélération
         matérielle (DRI2), n'est disponible que pour <systemitem class="username"> root
         </systemitem>et les membres du groupe <systemitem class="groupname"> video </systemitem>. 
      </para> 
      
      <para>
         Pour voir si l'accélération matérielle est disponible pour votre pilote, cherchez dans
         <filename>/var/log/Xorg.0.log</filename> des messages comme: 
      </para> 
      
<screen><literal>
</literal>
</screen>
      
      <para>
         Si votre pilote est supporté, ajoutez les utilisateurs qui pourraient utiliser X à ce
         groupe: 
      </para> 
      
<screen role="root">
<userinput>usermod -a -G video<replaceable>-&lt;username&gt;</replaceable></userinput>
</screen>
      
      <para>
         Si vous optez pour l'installation du paquet Mesa-Demos lors de l'installation de <xref
         linkend="mesalib"/>, depuis un <command>xterm</command> , lancez <command>glxinfo</command>
         et cherchez d'emblée le passage: 
      </para> 
      
<screen><computeroutput>
direct rendering: Yes
</computeroutput>
</screen>
      
      <para>
         Si direct rendering est activé, vous pouvez ajouter de la verbosité en lançant
         <command>LIBGL_DEBUG=verbose glxinfo</command> .  Ceci affichera les pilotes, les
         n&oelig;uds de périphériques et les fichiers utilisés par le système DRI. 
      </para> 
      
      <para>
         Si la DRI est activée, pour confirmer que l'accélération matérielle DRI2 fonctionne, vous
         pouvez (toujours dans un <command>xterm</command> ) lancer la commande <command>glxinfo |
         grep "OpenGL renderer string"</command> - si cela renvoie quelque chose <emphasis>
         d'autre que </emphasis>
         <literal>
         </literal>
         Software Rasterizer c'est que l'accélération fonctionne 
      </para> 
      
      <para>
         pour l'utilisateur qui a lancç la commande. De nouveau, si vous avez ajouté le paquet
         Mesa-Demos, vous pouvez <command>aussi lancer le programme de test</command> glxgears .
         <command>Ce programme affiche une fenêtre de trois boutons à bascule. Le</command> xterm
         affichera le nombre de cadres dessinés toutes les cinq secondes, donc c'est un test fiable.
         La fenêtre est échelonable et les 
      </para> 
      
   </sect2>
   
   <sect2 role="configuration" id='X11R6-compat-symlink' xreflabel="Creating an X11R6 Compatibility
   Symlink">
      <title>Création d'un lien symbolique de compatibilité X11R6</title> 
      
      <para>
         cadres dessinés par secondes dépendent beaucoup de la taille de la fenêtre. Jusqu'à
         récemment (relativement parlant) presque toutes les <application>X Window</application>
         installations que vous avez effectuées <filename class='directory'>/usr/X11R6</filename> ou
         rencontrées étaient installées dans le répertoire . Cela a été la norme pendant des années.
         Les développeurs restant sur cela ont écrit leurs scripts <application>X</application>
         d'installation des paquets à la recherche de dans l'emplacement standard. Les choses ont
         changées et la tendance est d'installer <application>X</application> maintenant <filename
         class='directory'>
         /usr</filename> dans . 
      </para> 
      
      <para>
         Certaines personnes veulent installer dans un emplacement personnalisé. Beaucoup de
         développeurs de paquets n'ont pas rattrapé le changement <application>X</application> et
         leurs paquets sont encore à essayer de trouver <filename
         class='directory'>/usr/X11R6</filename> dans et donc échouent quand vous essayez de
         construire le paquet. Si pour la plupart des  paquets, il n'est pas difficile de «hacker»
         le script d'installation pour résoudre le problème, ce n'est pas la solution à long terme
         au problème. Les développeurs amont ont 
      </para> 
      
      <para>
         besoin de moderniser leurs scripts d'installation et d'éliminer complètement le problème.
         Jusque-là, vous pouvez créer un lien symbolique pour satisfaire <filename
         class='directory'>/usr/X11R6</filename> la nécessité de de sorte que vous ne serez pas gêné
         avec un échec de construction de paquet en raison de ce problème connu. <systemitem
         class="username"> Si vous souhaitez créer le lien symbolique, taper la commande suivante en
         tant que </systemitem>root <replaceable> (assurez vous de modifier
         </replaceable>&lt;$XORG_PREFIX&gt; 
      </para>  
<screen role="root">
<userinput>ln -vsf<replaceable>-&lt;$XORG_PREFIX&gt;</replaceable>- /usr/X11R6</userinput></screen>
      
   </sect2>
   
   <sect2 role="configuration" id="xft-font-protocol"  xreflabel="Xft Font Protocol">
      <title>Protocole Xft Font</title> 
      
      <indexterm role="configuration" id=" fonts">
         <primary sortas="g-truetype"> TrueType Fonts </primary>
      </indexterm>
      
      <para>
         de façon appropriée): <application>Freetype</application> Xft fournit le rendu des polices
         anti-crénelage à travers , et les polices sont contrôlés par
         <application>Fontconfig</application>   le côté client à l'aide de . Le chemin <filename
         class="directory">/usr/share/fonts</filename>   de recherche par défaut est <filename
         class="directory">
         ~/.fonts</filename> et <application>Fontconfig</application> . recherche des répertoires
         dans son chemin   de façon récursive et  maintient un cache des caractéristiques de la
         police dans <filename>fonts.cache-1</filename> les fichiers dans chaque répertoire.  Si le 
          cache semble  pas être à jour, il est ignorée, et l'information est (lentement) <command> 
         extraites de la polices elles-mêmes. Ce cache peut être régénéré en utilisant</command>
         fc-cache à tout moment. Vous pouvez voir la liste des polices
         <application>Fontconfig</application>   connues par <command>en exécutant la
         commande</command> fc-list 
      </para> 
      
      <para>
         . <application>Xorg</application> si vous avez installé dans n'importe quel <filename
         class="directory">/usr</filename>   préfixe autre que <application>X</application> , Les
         polices ne seront pas installées dans un emplacement connu
         <application>Fontconfig</application>   par <application>Fontconfig</application> . Cela
         empêche d'utiliser le faible rendu des polices   Type 1 ou les polices non-évolutive 
         bitmap. Les liens symboliques sont créés <filename class="directory">
         OTF</filename> depuis <filename class="directory">TTF</filename> et
         <application>X</application> les répertoires de polices <filename class="directory">
         /usr/share/fonts/X11-{OTF,TTF}</filename>   vers . <application>Fontconfig</application>  
         Cela autorise à utiliser les polices <application>X</application>   OpenType et TrueType
         fournies par (qui sont évolutives 
      </para> 
      
      <para>
         <application>Fontconfig</application>   et de qualité supérieure). utilise des noms comme
         "Monospace 12" pour définir les polices.  Les applications utilisent généralement
         <application>Fontconfig</application>   les noms de polices génériques telles que 
         "Monospace", "Sans" et "Serif". résout ces noms par une police qui a tous   les caractères 
         qui couvrent l'orthographe de la langue indiquée par
         <filename>/etc/fonts/fonts.conf</filename>   les paramètres régionaux.  La connaissance de
         ces noms de polices est inclus dans . Les polices qui ne sont pas répertoriés
         <application>Fontconfig</application>   dans ce fichier restent utilisables par , 
      </para> 
      
      <para>
         mais elles ne seront pas  accessibles  par les noms de familles génériques.
         <application>X</application> Les polices standards évolutives qui accompagnent fournissent
         une très mauvaise couverture d'Unicode.  Vous remarquerez peut-être
         <application>Xft</application>   dans les applications qui utilisent que certains  
         caractères apparaissent comme une boîte avec quatre chiffres binaires à l'intérieur.   Dans
         ce cas, un jeu de polices avec les  glyphes  disponibles  n'a pas été trouvé.   D'autres
         fois, les applications qui n'utilisent pas d'autres familles de polices
         <application>Fontconfig</application>   par défaut et n'ont pas accepté les substitutions
         de l'   affichent des lignes vides lorsque la police par défaut ne couvre pas l'orthographe
         <application>Fluxbox</application>   de la langue de l'utilisateur. Cela arrive, par
         exemple avec 
      </para> 
      
      <para>
           dans la localisation ru_RU.KOI8-R. Afin d'offrir une plus grande couverture d'Unicode, il
           est recommandé 
      </para> 
      <itemizedlist>
         <listitem>
            <para>
               <ulink url="http://dejavu.sourceforge.net/"> que vous installiez ces polices:
               </ulink>
               DejaVu fonts - Ces polices sont des remplacements  pour les polices Bitstream Vera et
               fournissent des scripts basés sur le latin avec des accents et des glyphes 
            </para> 
         </listitem>
         <listitem>
            <para>
               <ulink url="http://download.savannah.nongnu.org/releases/freefont/">  cyrilliques.
               </ulink>
               FreeFont - Cet ensemble de polices couvre presque tous les caractères non-CJC, mais
               <application>Fontconfig</application>   n'est pas agréable visuellement. va  
               l'utiliser comme un dernier recours pour remplacer les noms génériques 
            </para> 
         </listitem>
         <listitem>
            <para>
               <ulink url="http://corefonts.sourceforge.net/">   de la famille de polices. </ulink>
               Microsoft Core fonts - Ces polices offrent une couverture légèrement moins bonne que
               freefont d'Unicode,   mais font plus illusion. Soyez sûr de lire la licence avant de
               les utiliser. <filename class="directory">/etc/fonts/fonts.d</filename>   Ces polices
               sont énumérés dans les alias du répertoire 
            </para> 
         </listitem>
         <listitem>
            <para>
               <ulink url="http://cle.linux.org.tw/fonts/FireFly"> par défaut. </ulink>
               Firefly New Sung font - Cette police fourni la couverture chinoise. Ces polices sont
               énumérés <filename class="directory">/etc/fonts/fonts.d</filename>   dans les alias
               du répertoire 
            </para> 
         </listitem>
         <listitem>
            <para>
               <ulink url="http://cle.linux.org.tw/fonts/Arphic">   par défaut. </ulink>
               Arphic fonts - un ensemble similaire à la police Firefly New Sung de polices
               chinoises. <filename class="directory">/etc/fonts/fonts.d</filename> Ces polices sont
               énumérés dans les alias du répertoire 
            </para> 
         </listitem>
         <listitem>
            <para>
               <ulink url="http://sourceforge.jp/projects/efont/"> par défaut. </ulink>
               Kochi fonts - Elles fournissent les caractères japonnais, et sont listées dans les
               alias <filename class="directory">/etc/fonts/fonts.d</filename> du répertoire 
            </para> 
         </listitem>
         <listitem>
            <para>
               <ulink url="http://kldp.net/projects/baekmuk/"> par défaut. </ulink>
               Baekmuk fonts - Ces polices fournissent la couverture Coréenne, et sont listées dans
               les alias <filename class="directory">/etc/fonts/fonts.d</filename> du répertoire 
            </para> 
         </listitem>
         <listitem>
            <para>
               <ulink url="&gnome-download-http;/cantarell-fonts/0.0/"> par défaut. </ulink>
               Polices Cantarell - La famille des polices Cantarell fournit une contemporaine
               Humaniste sans serif. Elle est particulièrement optimisée pour être lisible dans les
               petites tailles <application>GNOME-3</application>   et est la famille de polices
               préférée pour l'interface utilisateur de 
            </para> 
         </listitem>
      </itemizedlist>
      
      <para>
         . La liste ci-dessus ne donnera pas une couverture complète d'Unicode. <ulink
         url="http://unifont.org/fontguide/">   Pour plus d'informations, vous pouvez consulter le
         </ulink>
         Unicode Font Guide 
      </para> 
      
      <para>
         . Par exemple, considérons l'installation des polices DejaVu. A partir <systemitem
         class="username"> du répertoire source décompressé, exécuter les commandes suivantes en
         tant que </systemitem>root  
      </para> 
      
<screen role="root">
<userinput>install -v -d -m755 /usr/share/fonts/dejavu &amp;&amp;
install -v -m644 *.ttf /usr/share/fonts/dejavu &amp;&amp;
fc-cache -v /usr/share/fonts/dejavu</userinput></screen>
      
   </sect2>
   
   <sect2 role="configuration" id='xconfig'>
      <title>Configuration des périphériques Xorg</title> 
      
      <para>
         : Pour la plupart des configurations matérielles, Xorg va automatiquement obtenir la
         configuration correcte du serveur sans aucune intervention de l'utilisateur. Il existe,
         cependant, certains cas où l'auto-configuration sera incorrecte. Voici quelques 
      </para> 
      
      <sect3 id="xinput">
         <title>Configuration des périphériques X d'entrée</title> 
         
         <para>
            exemples de la configuration manuelle qui peuvent être utile dans ces cas la. Pour la
            plupart des appareils d'entrée, aucune configuration supplémentaire sera 
         </para> 
         
         <para>
            nécessaires. Cette section est fourni à titre informatif seulement. <systemitem
            class="username"> Un exemple de configuration XKB par défaut peut être comme le suivant
            (executé en tant que </systemitem>root  
         </para> 
         
<screen><userinput role="username">-cat &gt; /etc/X11/xorg.conf.d/xkb-defaults.conf &lt;&lt; "EOF"
Section "InputClass"
    Identifier "XKB Defaults"
    MatchIsKeyboard "yes"
    Option "XkbOptions" "terminate:ctrl_alt_bksp"
EOF</userinput></screen>
         
      </sect3>
      
      <sect3 id="xdisplay">
         <title>Réglage fin des paramètres d'affichage</title> 
         
         <para>
            ): Encore une fois, avec Xorg, peu ou aucune configuration supplémentaire n'est
            nécessaires. Si vous avez besoin d'options supplémentaires à passer à votre pilote
            vidéo, <systemitem class="username"> par exemple, vous pouvez utiliser ce qui suit (de
            nouveau, executé en tant que </systemitem>root  
         </para> 
         
<screen><userinput role="root">-cat &gt; /etc/X11/xorg.conf.d/videocard-0.conf &lt;&lt; "EOF"
Section "Device"
    Identifier  "Videocard0"
    Driver      "radeon"
    VendorName  "Videocard vendor"
    BoardName   "ATI Radeon 7500"
    Option      "NoAccel" "true"
EndSection
EOF</userinput></screen>
         
         <para>
            ): Une autre configuration courante est d'avoir des configurations multi-serveurs pour
            une utilisation dans des environnements différents. Bien que le serveur détecte
            automatiquement 
         </para> 
         
<screen><userinput role="root">-cat &gt; /etc/X11/xorg.conf.d/server-layout.conf &lt;&lt; "EOF"
Section "ServerLayout"
    Identifier     "DefaultLayout"
    Screen      0  "Screen0" 0 0
    Screen      1  "Screen1" LeftOf "Screen0"
    Option         "Xinerama"
EndSection
EOF</userinput></screen>
         
      </sect3>
      
   </sect2>
   
</sect1>
