<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
    "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
   <!ENTITY % general-entities SYSTEM "../../general.ent">
   %general-entities;
   
   <!ENTITY xulrunner-download-http "http://releases.mozilla.org/pub/mozilla.org/firefox/releases/&firefox-version;/source/firefox-&firefox-version;.source.tar.bz2">
   <!ENTITY xulrunner-download-ftp "ftp://ftp.mozilla.org/pub/mozilla.org/firefox/releases/&firefox-version;/source/firefox-&firefox-version;.source.tar.bz2">
   <!ENTITY xulrunner-md5sum        "4b07acf47857aff72776d805409cdd1b">
   <!ENTITY xulrunner-size          "75 Mio">
   <!ENTITY xulrunner-buildsize     "2.6 G (440 M installed)">
   <!ENTITY xulrunner-time          "22 SBU">
   
]>
<sect1 id="xulrunner" xreflabel="Xulrunner-&xulrunner-version;">
   <?dbhtml filename="xulrunner.html" ?>
   
   <sect1info>
      <othername>$LastChangedBy: andy $</othername>
      <date>$Date: 2012-04-04 17:56:08 +0200 (mer. 04 avril 2012) $</date>
   </sect1info>
   
   <title></title> 
   
   <indexterm zone="xulrunner">
      <primary sortas="a-Xulrunner"> Xulrunner </primary>
   </indexterm>
   
   <sect2 role="package">
      <title></title> 
      
      <para>
         <application></application> est un environnement d'exécution pour les applications XUL, et
         il constitue la majeure partie de la base de code de <application></application> . En
         particulier, il offre le moteur gecko et les fichiers pkgconfig pour que des applications
         puissent l'utiliser. 
      </para> 
      
      &lfs71_checked;
      
      <bridgehead renderas="sect3">  </bridgehead>
      <itemizedlist spacing="compact">
         <listitem>
            <para>
               Téléchargement (HTTP): <ulink url="&xulrunner-download-http;"/> 
            </para> 
         </listitem>
         <listitem>
            <para>
               Téléchargement (FTP): <ulink url="&xulrunner-download-ftp;"/> 
            </para> 
         </listitem>
         <listitem>
            <para>
               Somme de contrôle MD5 du téléchargement: &xulrunner-md5sum; 
            </para> 
         </listitem>
         <listitem>
            <para>
               Taille du téléchargement: &xulrunner-size; 
            </para> 
         </listitem>
         <listitem>
            <para>
               Estimation de l'espace disque requis: &xulrunner-buildsize; 
            </para> 
         </listitem>
         <listitem>
            <para>
               Estimation du temps de construction: &xulrunner-time; 
            </para> 
         </listitem>
      </itemizedlist>
      
      <bridgehead renderas="sect3">  </bridgehead>
      <itemizedlist spacing="compact">
         <listitem>
            <para>
               correctif requis si vous utilisez <application></application>&nbsp;: <ulink
               url="&patch-root;/xulrunner-&xulrunner-version;_gcc-4.7-1.patch"/> 
            </para> 
         </listitem>
      </itemizedlist>
      
      <bridgehead renderas="sect3">  </bridgehead>
      
      <bridgehead renderas="sect4">  </bridgehead>
      
      <para role="required">
         <xref linkend="alsa-lib"/>, <xref linkend="gtk2"/>
         , <xref linkend="zip"/>et <xref linkend="unzip"/>
         . 
      </para> 
      
      <para>
         Remarque: Vous devriez avoir installé <application></application> et
         <application></application> (corrigé pour le support apng) avant
         <application></application> et elle devrait exister sur votre système. Si pour une raison
         quelconque, vous ne les avez pas installées, vous devriez supprimer les options <option>
         --with-system-jpeg </option>
         et <option>
         --with-system-png </option>
         du fichier <filename></filename> créé ci-dessous. 
      </para> 
      
      <bridgehead renderas="sect4">  </bridgehead>
      
      <para role="recommended">
         <xref linkend="yasm"/>ou <xref linkend="libvpx"/>
         (pour permettre à <application></application> de lire des vidéos webm). 
      </para> 
      
      <bridgehead renderas="sect4">  </bridgehead>
      
      <para role="optional">
         <xref linkend="dbus-glib"/>, <xref linkend="startup-notification"/>
         , <xref linkend="sqlite"/>, <ulink url="http://sourceforge.net/projects/hunspell/">
         Hunspell </ulink>
         , <ulink url="http://libevent.org/"> Libevent </ulink>
         , <xref linkend="doxygen"/>, <xref linkend="gnome-vfs"/>
         et <xref linkend="libgnomeui"/>(pour une intégration avec l'ancienne version de
         <application></application> ), <xref linkend="libnotify"/>
         , <xref linkend="nspr"/>, <xref linkend="nss"/>
         , <xref linkend="wireless_tools"/>, <ulink url="http://www.valgrind.org/"> Valgrind
         </ulink>
         (seulement pour tester le code jemalloc) et <xref linkend="wget"/>
      </para> 
      
      <para condition="html" role="usernotes">
         Notes utilisateur: <ulink url="&blfs-wiki;/xulrunner"/> 
      </para> 
      
   </sect2>
   
   <sect2 role="installation">
      <title></title> 
      
      <para>
         La configuration de <application></application> se fait en créant un fichier
         <filename></filename> contenant les options de configuration désirées. Un
         <filename></filename> par défaut est créé ci-dessous. Pour voir toute la liste des options
         de configuration disponibles (et une description abrégée de chacune), exécutez
         <command>./configure --help</command> . Vosu devez éditer entièrement le fichier et
         commenter ou décommenter les options il faut. 
      </para> 
      
<screen><userinput>cat &gt; mozconfig &lt;&lt; "EOF"
# Si vous avez une machine multicoeurs, vous pouvez accélérer la -# construction en lançant
plusieurs tâches en même temps, mais vous n'avez qu'un -# coeur, effacez cette ligne:-mk_add_options
MOZ_MAKE_FLAGS="-j4"
# Si vous avez installé Yasm effacez cette option:-ac_add_options --disable-webm
# Si vous avez installé DBus-Glib effacez cette option:-ac_add_options --disable-dbus
# Si vous avez installé wireless-tools effacez cette option:-ac_add_options --disable-necko-wifi
# Si vous avez installé libnotify effacez cette option:-ac_add_options --disable-libnotify
# Si vous n'avez pas installé nss effacez ces deux lignes: -#ac_add_options --with-system-nspr
-#ac_add_options --with-system-nss -# Décommentez ceci si vous les avez installés: -# ac_add_options
--enable-system-sqlite -# ac_add_options --with-system-libvpx -# ac_add_options
--enable-startup-notification -# ac_add_options --enable-system-hunspell -# ac_add_options
--with-system-libevent-mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/xulrunner-build-dir
ac_add_options --prefix=/usr
ac_add_options --enable-application=xulrunner
ac_add_options --with-pthreads
ac_add_options --enable-system-ffi
ac_add_options --with-system-jpeg
ac_add_options --with-system-png
ac_add_options --enable-system-cairo
ac_add_options --with-system-zlib
ac_add_options --enable-shared
ac_add_options --disable-static
ac_add_options --disable-debug
ac_add_options --disable-crashreporter
ac_add_options --disable-installer
ac_add_options --disable-updater
ac_add_options --disable-tests
EOF</userinput></screen>
      
      <para>
         Installez <application></application> en tapant les commandes suivantes: 
      </para> 
      
<screen><userinput>patch -p1 &lt; ../xulrunner-&xulrunner-version;_gcc-4.7-1.patch &amp;&amp;
sed -i 's#VPX_CODEC_USE_INPUT_PARTITION#VPX_CODEC_USE_INPUT_FRAGMENTS#' configure &amp;&amp;
if pkg-config --atleast-version &nspr-version; nspr
then sed -i '/Version/aRequires: nspr &gt;= &nspr-version;'
xulrunner/installer/libxul-embedding.pc.in
else sed -i '/Version/aRequires: mozilla-nspr &gt;= &nspr-version;'
xulrunner/installer/libxul-embedding.pc.in
fi &amp;&amp;
make -f client.mk</userinput></screen>
      
      <para>
         Ce paquet n'est pas fourni avec une suite de tests. 
      </para> 
      
      <para>
         Maintenant, en tant qu'utilisateur <systemitem class="username"> root </systemitem>.  
      </para> 
      
<screen role="root">
<userinput>make -C xulrunner-build-dir install &amp;&amp;
mkdir -p /usr/lib/mozilla &amp;&amp;
rm -rf /usr/lib/xulrunner-&xulrunner-version;/plugins &amp;&amp;
ln -sv ../mozilla/plugins /usr/lib/xulrunner-&xulrunner-version; &amp;&amp;
chown -Rv root:root /usr/{include,lib,share/idl}/xulrunner-* &amp;&amp;
for library in /usr/lib/xulrunner-devel-&xulrunner-version;/sdk/lib/*.so
do ln -sfv ${library#/usr/lib/} /usr${library#*sdk}
done</userinput></screen>
      
   </sect2>
   
   <sect2 role="commands">
      <title></title> 
      
      <para>
           <command><!-- sed -i 's#VPX_CODEC_USE_INPUT_PARTITION ...= --> \n
           --non_traduit--</command> <!--&nbsp;: This fixes= --> \n --non_traduit--
           <application></application> <command><!-- configure= --> \n --non_traduit--</command>
           <!-- script to properly detect= --> \n --non_traduit-- <xref linkend="libvpx"/><!-- . It
           is not needed if you have libvpx-v0.9.7 or earlier installed or if you've not installed=
           --> \n --non_traduit-- <application></application> . 
      </para> 
      
      <para>
         <command><!-- if pkg-config - -atleast-version &nspr-version; nspr; then sed -i
         '/Version/aRequires: nspr &gt;= &nspr-version;' xulrunner/installer/libxul-embedding.pc.in;
         else sed -i '/Version/aRequires: mozilla-nspr &gt;= &nspr-version;'
         xulrunner/installer/libxul-embedding.pc.in; fi= --> \n --non_traduit--</command>
         <!--&nbsp;: This uses= --> \n --non_traduit-- <command><!-- pkg-config= --> \n
         --non_traduit--</command> <!-- to see if= --> \n --non_traduit-- <xref linkend="nspr"/><!--
         is installed and then adds a line to require= --> \n --non_traduit--
         <application></application> <!-- or= --> \n --non_traduit-- <application></application>
         <!-- to= --> \n --non_traduit-- <filename></filename> <!-- . If you try to build some other
         applications without this, the prtypes header from NSPR will not be found.= --> \n
         --non_traduit-- 
      </para> 
      
      <para>
         <command><!-- make -f client.mk ...= --> \n --non_traduit--</command> <!--&nbsp;: Mozilla
         products are packaged to allow the use of a configuration file which can be used to pass
         the configuration settings to the= --> \n --non_traduit-- <command><!-- configure= --> \n
         --non_traduit--</command> <!-- command.= --> \n --non_traduit-- <command><!-- make= --> \n
         --non_traduit--</command> <!-- uses the= --> \n --non_traduit-- <filename></filename> <!--
         file to get initial configuration and setup parameters.= --> \n --non_traduit-- 
      </para> 
      
      <para>
         <command><!-- ln -sv ../mozilla/plugins ...= --> \n --non_traduit--</command> <!--&nbsp;:
         Some packages will install browser plugins into= --> \n --non_traduit-- <filename
         class="directory"></filename> <!-- . Creating this symlink= --> \n --non_traduit--
         <application></application> <!-- keeps additional plugins in a common directory.= --> \n
         --non_traduit-- 
      </para> 
      
      <para>
         <command><!-- for library in /usr/lib/xulrunner-devel-&xulrunner-version;/sdk/lib/*.so; do
         ln -sfv ${library#/usr/lib/} /usr${library#*sdk}; done= --> \n --non_traduit--</command>
         <!--&nbsp;: The libraries shipped with this package are installed into= --> \n
         --non_traduit-- <filename class="directory"></filename> <!-- which means they will not be
         found at runtime. These commands make relative symbolic links to the shared libraries from=
         --> \n --non_traduit-- <filename class="directory">
         </filename> . 
      </para> 
      
   </sect2>
   
   <sect2 role="content">
      <title></title> 
      
      <segmentedlist>
         <segtitle>Programmes installés</segtitle>
         <segtitle>Bibliothèques installées</segtitle>
         <segtitle>Répertoires installés</segtitle>
         
         <seglistitem>
            <seg>
               
            </seg>
            <seg>
               
            <filename class="directory"></filename> </seg>
            <seg>
               
            </seg>
         </seglistitem>
      </segmentedlist>
      <variablelist>
      
      <bridgehead renderas="sect3">  </bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      
      <varlistentry id="xulrunner-prog">
         <term><command>xulrunner</command> </term>
         <listitem>
            <para>
               est un script shell, utile pour identifier la version installée. 
            </para> 
            <indexterm zone="xulrunner xulrunner-prog">
               <primary sortas="b-xulrunner"> xulrunner </primary>
            </indexterm>
         </listitem>
      </varlistentry>
      </variablelist>
      
   </sect2>
   
</sect1>
