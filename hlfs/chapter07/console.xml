<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="bootable-console">
  <?dbhtml filename="console.html"?>

  <title>Configurer la console Linux</title>

  <indexterm zone="bootable-console">
    <primary sortas="d-console">console</primary>
    <secondary>configuring</secondary>
  </indexterm>

  <para>Cette section traite de la configuration du script de démarrage
  <command>console</command>, initialisant
  la disposition des touches du clavier et la police de la console.
  Si des caractères non ASCII (par exemple, les symboles livre
  anglaise et Euro) ne seront pas utilisés et que le clavier est un clavier américain,
  passez cette section. Sans le fichier de configuration, le script de démarrage 
  <command>console</command> ne fera rien.</para>
 
  <para>Le script <command>console</command> utilise le fichier de configuration 
  <filename>/etc/sysconfig/console</filename>.
  Décidez quelle disposition de clavier et quelle police seront utilisées. Des
  HOWTO spécifiques à chaque langue peuvent vous aider avec cela (NDT : ces
  HOWTO sont disponibles à l'URL suivante : <ulink
  url="http://www.tldp.org/HOWTO/HOWTO-INDEX/other-lang.html"/>). Un fichier
  <filename>/etc/sysconfig/console</filename> pré-fabriqué avec les paramètres
  courants pour plusieurs pays a été installé par le paquet LFS-Bootscripts,
  les sections pertinentes peuvent être décommentées si le pays est supporté. Si
  vous doutez toujours, regardez dans le répertoire <filename
  class="directory">/usr/share/kbd</filename> pour des dispositions de clavier
  et des polices valides. Lisez les pages de manuel de loadkeys et setfont, puis
  déterminez les bon arguments pour ces programmes. Quand vous êtes décidé,
  créez le fichier de configuration avec les commandes suivantes&nbsp;:</para>
 
<screen><userinput>cat &gt;/etc/sysconfig/console &lt;&lt;"EOF"
<literal>KEYMAP="<replaceable>[arguments de loadkeys]</replaceable>"
FONT="<replaceable>[arguments de setfont]</replaceable>"</literal>
EOF</userinput></screen>

  <para>Par exemple, pour les utilisateurs espagnols qui veulent utiliser le
      caractère Euro (accessible en pressant AltGr+E), les paramètres suivants
      sont corrects&nbsp;:</para>

<screen><userinput>cat &gt;/etc/sysconfig/console &lt;&lt;"EOF"
<literal>KEYMAP="es euro2"
FONT="lat9-16 -u iso01"</literal>
EOF</userinput></screen>

   <note>
    <para>La ligne <envar>FONT</envar> ci-dessus n'est correcte que pour
        l'encodage de caractère ISO 8859-15. Si vous utilisez l'encodage ISO
        8859-1 et, par conséquent, le signe de la livre anglaise au lieu de
        l'euro, la ligne <envar>FONT</envar> correcte serait&nbsp;:</para>
 
<screen><userinput>FONT="lat1-16"</userinput></screen>
   </note>

  <para>Si la variable <envar>KEYMAP</envar> ou <envar>FONT</envar> n'est pas
      paramétrée, le script d'initialisation <command>console</command> ne
      démarrera pas le programme correspondant.</para>

  <para>Dans certaines disposition de clavier, les touches Effacement et Supprimer
      envoient des caractères différents de ceux de la disposition clavier par
      défaut incluse dans le noyau. Cela embrouille certaines application. Par
      exemple, <application>Emacs</application> affiche l'aide (au lieu
      d'effacer le caractère avant le curseur) quand on appuie sur la touche Effacement. Pour vérifier si la disposition-clavier en usage 
      est affectée (cela marche seulement pour les dispositions i386)&nbsp;:</para>
 
<screen><userinput>zgrep '\W14\W' <replaceable>[/path/to/your/keymap]</replaceable></userinput></screen>

  <para>Si le code de touche 14 correspond à Effacement au lieu de
      Supprimer, créez le bout de code suivant pour corriger ce problème&nbsp;:</para>

<screen><userinput>mkdir -p /etc/kbd &amp;&amp; cat &gt; /etc/kbd/bs-sends-del &lt;&lt;"EOF"
<literal>                  keycode  14 = Delete Delete Delete Delete
              alt keycode  14 = Meta_Delete
        altgr alt keycode  14 = Meta_Delete
                  keycode 111 = Remove
    altgr control keycode 111 = Boot
      control alt keycode 111 = Boot
altgr control alt keycode 111 = Boot</literal>
EOF</userinput></screen>

  <para>Dites au script <command>console</command> de charger ce bout de code
      après la disposition-clavier principale&nbsp;:</para>
 
<screen><userinput>cat &gt;&gt;/etc/sysconfig/console &lt;&lt;"EOF"
<literal>KEYMAP_CORRECTION="/etc/kbd/bs-sends-del"</literal>
EOF</userinput></screen>

  <para>Pour compiler la disposition-clavier directement dans le noyau au lieu
      de la paramétrer à chaque fois dans le script de démarage <command>console</command>,
      suivez les instructions données dans <xref linkend="bootable-kernel" role="."/>
      Faire cela assure que le clavier va toujours fonctionner comme prévu, même
      lors d'un démarage en mode maintenance (en passant l'instruction
  <parameter>init=/bin/sh</parameter> au noyau), car le script de démarage
  <command>console</command> ne sera pas exécuté dans cette situation. Par
  contre, le noyau ne paramétrera pas la police de l'écran automatiquement.
  Cela ne devrait pas poser de problème car les caractère ASCII seront gérés
  correctement, et ce serait curieux qu'un utilisateur ait besoin d'utiliser des
  caractères non-ASCII en mode maintenance.</para>

  <para>Puisque le noyau va paramétrer la disposition du clavier, il est
      possible d'ommetre la variable <envar>KEYMAP</envar> dans le fichier de
      configuration <filename>/etc/sysconfig/console</filename>. Elle peut être
      laissée telle quelle sans conséquences. La laisser peut être bénéfique si
      vous utlisez différents noyaux et où il est difficile de s'assurer que la
      disposition du clavier est compilée dans chacun d'entre eux.</para>

</sect1>

