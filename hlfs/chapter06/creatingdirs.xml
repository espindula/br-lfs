<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-system-creatingdirs">
  <?dbhtml filename="creatingdirs.html"?>

  <title>Créer les répertoires</title>

  <para>Il est temps de créer la structure du système de
	fichiers HLFS. Créez une hiérarchie de répertoires standards en lançant les
	commandes suivantes&nbsp;:</para>

<screen><userinput>install -vd /{bin,boot,etc,home,lib,mnt,sbin,var}
install -vd -m 0750 /root
install -vd -m 1777 /tmp /var/tmp
install -vd /usr/{,local/}{bin,include,lib,sbin,src}
install -vd /usr/{,local/}share/{doc,info,locale,man}
install -vd  /usr/{,local/}share/{misc,terminfo,zoneinfo}
install -vd /usr/{,local/}share/man/man{1..8}
for dir in /usr /usr/local; do
  ln -sv share/{man,doc,info} $dir
done
install -vd /var/{lock,log,mail,run,spool}
install -vd /var/{cache,lib/{misc,locate},local}</userinput></screen>

  <para>Par défaut, les répertoires sont créés avec les droits 755, ce
	qui n'est pas souhaitable pour tous les répertoires. Dans la commande ci-dessus,
	deux modifications seront effectuées&mdash;une
	pour le répertoire principal de <systemitem class="username">root</systemitem>
	et une autre pour les répertoires des fichiers
	temporaires.</para>

  <para>Le premier changement de droit nous assure que n'importe qui ne
	pourra pas entrer dans le répertoire
  <filename class="directory">/root</filename>&nbsp;&mdash; de façon identique à ce que
	ferait un utilisateur pour son répertoire principal. Le deuxième changement 
	assure que tout utilisateur peut écrire dans les répertoires
  <filename class="directory">/tmp</filename> et
	<filename class="directory">/var/tmp</filename>, mais ne peut pas supprimer
  les fichiers des autres utilisateurs. Cette dernière interdiction est due au
	<quote>sticky bit</quote>, le bit (1) de poids fort dans le masque 1777.</para>

  <sect2>
    <title>Remarques à propos de la conformité FHS</title>

    <para>L'arborescence de répertoires est basée sur le standard FHS
		(Filesystem Hierarchy Standard, disponible sur
		<ulink url="http://www.pathname.com/fhs/"/>). Outre le FHS, nous créons
		des liens symboliques pour la compatibilité avec les répertoires
    <filename class="directory">man</filename>, 
		<filename class="directory">doc</filename> et
		<filename class="directory">info</filename> vu que beaucoup de paquets
		essaient encore d'installer leur documentation dans
	  <filename class="directory">/usr/&lt;répertoire&gt;</filename> ou
		<filename class="directory">/usr/local/&lt;répertoire&gt;</filename> 
		au lieu de
    <filename class="directory">/usr/share/&lt;répertoire&gt;</filename> ou
    <filename class="directory">/usr/local/share/&lt;répertoire&gt;</filename>.
    Le FHS stipule aussi l'existence de
		<filename class="directory">/usr/local/games</filename>, <filename
    class="directory">/usr/share/games</filename>, <filename
    class="directory">/opt</filename>, <filename
    class="directory">/media</filename> et
		<filename class="directory">/srv</filename>. Le FHS n'est pas précis en ce
		qui concerne la structure du sous-répertoire
    <filename class="directory">/usr/local/share</filename>, donc nous créons
		seulement les répertoires nécessaires. Néanmoins, n'hésitez pas à créer ces
		répertoires si vous préférez vous conformer plus strictement
		au FHS.</para>

  </sect2>

</sect1>
