<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-system-findutils" role="wrap">
  <?dbhtml filename="findutils.html"?>

  <title>Findutils-&findutils-version;</title>

  <indexterm zone="ch-system-findutils">
    <primary sortas="a-Findutils">Findutils</primary>
  </indexterm>

  <sect2 role="package">
    <title/>

    <para>Le paquet Findutils contient des programmes de recherche de
		fichiers. Ces programmes sont fournis pour rechercher récursivement
		dans une hiérarchie de répertoires et pour créer, maintenir ainsi que
		chercher dans une base de données (souvent plus rapide que la
		recherche récursive mais moins fiable si la base de données n'a pas
		été mise à jour récemment).</para>

    <para>Notes utilisateur&nbsp;: <ulink url="&hlfs-wiki;/findutils"/></para>

    <para>Notes testeur&nbsp;: Le script <command>updatedb</command> utilise
		des fichiers temporaires lors de la création de la base de données. Il
    utilise <filename class="directory">/var/tmp</filename> s'il existe,
		puis <filename class="directory">/usr/tmp</filename> s'il existe, puis enfin
    <filename class="directory">/tmp</filename>. Ceci est contrôlé dans le 
    fichier <filename>updatedb.sh</filename>. Pour modifier ce comportement,
		vous devriez éditer le fichier <filename>updatedb.sh</filename> à la main
		ou lui appliquer un correctif.</para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Findutils</title>

    <para>Préparez la compilation de Findutils&nbsp;:</para>

<screen><userinput>./configure --prefix=/usr --libexecdir=/usr/lib/findutils \
    --localstatedir=/var/lib/locate</userinput></screen>

    <variablelist>
      <title>Voici la signification de l'option de configure&nbsp;:</title>

      <varlistentry>
        <term><parameter>--localstatedir</parameter></term>
        <listitem>
          <para>Cette option modifie l'emplacement de la base de données
					<command>locate</command> pour qu'elle soit dans
					<filename class="directory">/var/lib/locate</filename>,
					pour être compatible avec FHS.</para>
        </listitem>
      </varlistentry>

    </variablelist>

    <para>Compilez le paquet&nbsp;:</para>

<screen><userinput>make</userinput></screen>

    <para>Pour tester les résultats, lancez&nbsp;:
    <userinput>make check</userinput>.</para>

    <para>Installez le paquet&nbsp;:</para>

<screen><userinput>make install</userinput></screen>

			<para>Certains scripts du paquet LFS-Bootscripts dépendent de
			<command>find</command>. Comme		
			<filename class="directory">/usr</filename> peut ne pas être
			disponible lors des premières étapes du démarrage, ce programme doit
			être sur la partition racine. Le script <command>updatedb</command>
			doit aussi être modifié pour corriger un chemin explicite&nbsp;:</para>

<screen><userinput>mv -v /usr/bin/find /bin
sed 's/find:=${BINDIR}/find:=\/bin/' -i /usr/bin/updatedb</userinput></screen>

  </sect2>

  <sect2 id="contents-findutils" role="content">
    <title>Contenu de Findutils</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>

      <seglistitem>
        <seg>bigram, code, find, frcode, locate, updatedb et xargs</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="bigram">
        <term><command>bigram</command></term>
        <listitem>
          <para>Était auparavant utilisé pour créer les bases de données
          <command>locate</command></para>
          <indexterm zone="ch-system-findutils bigram">
            <primary sortas="b-bigram">bigram</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="code">
        <term><command>code</command></term>
        <listitem>
          <para>Était auparavant utilisé pour créer les bases de données
          <command>locate</command>&nbsp;; c'est l'ancêtre de
          <command>frcode</command>.</para>
          <indexterm zone="ch-system-findutils code">
            <primary sortas="b-code">code</primary>
          </indexterm>
       </listitem>
      </varlistentry>

      <varlistentry id="find">
        <term><command>find</command></term>
        <listitem>
          <para>Cherche dans les hiérarchies de répertoires donnés les fichiers
          correspondant à un critère spécifié</para>
          <indexterm zone="ch-system-findutils find">
            <primary sortas="b-find">find</primary>
          </indexterm>
        </listitem>
      </varlistentry>
     <varlistentry id="frcode">
        <term><command>frcode</command></term>
        <listitem>
          <para>Est appelé par <command>updatedb</command> pour compacter la 
          liste des noms de fichiers. Il utilise front-compression, réduisant 
          la taille de la base de données d'un facteur de quatre à cinq</para>
          <indexterm zone="ch-system-findutils frcode">
            <primary sortas="b-frcode">frcode</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="locate">
        <term><command>locate</command></term>
        <listitem>
          <para>Recherche à travers la base de données des noms de fichiers et renvoie
          les noms contenant une certaine chaîne ou correspondant à un certain modèle</para>
          <indexterm zone="ch-system-findutils locate">
            <primary sortas="b-locate">locate</primary>
          </indexterm>
        </listitem>
      </varlistentry>
     <varlistentry id="updatedb">
      <term><command>updatedb</command></term>
        <listitem>
          <para>Met à jour la base de données <command>locate</command>&nbsp;;
          Il parcourt le système de fichiers entier (en incluant
          les autres systèmes de fichiers actuellement montés, sauf si le 
          contraire est spécifié) et place tous les noms de fichiers qu'ils 
          trouvent dans la base de données</para>
          <indexterm zone="ch-system-findutils updatedb">
            <primary sortas="b-updatedb">updatedb</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="xargs">
        <term><command>xargs</command></term>
        <listitem>
          <para>Peut être utilisé pour lancer une commande donnée sur une liste
          de fichiers</para>
          <indexterm zone="ch-system-findutils xargs">
            <primary sortas="b-xargs">xargs</primary>
          </indexterm>
        </listitem>
      </varlistentry>

   </variablelist>

  </sect2>

</sect1>


