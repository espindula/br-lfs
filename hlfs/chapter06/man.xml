<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-system-man" role="wrap">
  <?dbhtml filename="man.html"?>

  <title>Man-&man-version;</title>

  <indexterm zone="ch-system-man">
    <primary sortas="a-Man">Man</primary>
  </indexterm>

  <sect2 role="package">
    <title/>

    <para>Le paquet Man contient des programmes de recherche et de 
		visualisation de pages man.</para>

    <para>Notes utilisateurs&nbsp;: <ulink url="&hlfs-wiki;/man"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Man</title>

    <para>Deux ajustements doivent être effectués sur les sources de Man.</para>

    <para>Le premier est une substitution <command>sed</command> pour
		ajouter l'option <parameter>-R</parameter> à la variable
		<envar>PAGER</envar> de façon à ce que les séquences d'échappement
		soient correctement gérées par Less&nbsp;:</para>

<screen><userinput>sed 's@-is@&amp;R@g' -i.orig configure</userinput></screen>

    <para>Le second est aussi une substitution <command>sed</command>
		décommentant la ligne <quote>MANPATH /usr/man</quote> dans le fichier
		<filename>man.conf</filename> pour supprimer les résultats redondants
		lors de l'utilisation de programmes comme
		<command>whatis</command>&nbsp;:</para>

<screen><userinput>sed 's@MANPATH./usr/man@#&amp;@g' -i.orig src/man.conf.in</userinput></screen>

    <para>Préparez la compilation de Man&nbsp;:</para>

<screen><userinput>./configure -confdir=/etc<parameter condition="uclibc"> +lang none</parameter></userinput></screen>

    <variablelist>
      <title>Voici la signification des options de configure&nbsp;:</title>

      <varlistentry>
        <term><parameter>-confdir=/etc</parameter></term>
        <listitem>
          <para>Ceci indique au programme <command>man</command> de rechercher
					le fichier de configuration <filename>man.conf</filename> dans le 
					répertoire <filename class="directory">/etc</filename>.</para>
        </listitem>
      </varlistentry>

      <varlistentry condition="uclibc">
        <term><parameter>+lang none</parameter></term>
        <listitem>
          <para>Ceci est nécessaire car uClibc ne supporte pas pour l'instant 
          <function>catopen()</function>.</para>
        </listitem>
      </varlistentry>

    </variablelist>

    <para>Compilez le paquet&nbsp;:</para>

<screen><userinput>make</userinput></screen>

    <para>Installez le paquet&nbsp;:</para>

<screen><userinput>make install</userinput></screen>

<!-- The next paras are valid also for uClibc, or only for Glibc? -->

    <note>
      <para>Pour désactiver les séquences d'échapement <quote>Select 
			Graphic Rendition (SGR)</quote>, éditez le fichier 
      <filename>man.conf</filename> et ajoutez l'option 
      <parameter>-c</parameter> à la variable <envar>NROFF</envar>.</para>
    </note>

    <para>Si l'ensemble de caractères de la locale utilise les caractères 8 bits, recherchez la ligne commençant par   
    <quote>NROFF</quote> dans <filename>/etc/man.conf</filename>, et vérifiez
		qu'elle ressemble à ce qui suit&nbsp;:</para>

<screen>NROFF  /usr/bin/nroff -Tlatin1 -mandoc</screen>

    <para>Notez que <quote>latin1</quote> devrait être utilisé même s'il ne s'agit
		pas de l'ensemble des caractères de la locale. La raison en est que, suivant
		la spécification, <command>groff</command> n'a aucun moyen de présenter les
		caractères en dehors de l'ISO 8859-1 sans certains codes d'échappement étranges.
		En formatant les pages man, <command>groff</command> pense qu'elles sont dans le
		codage ISO 8859-1 et le commutateur <parameter>-Tlatin1</parameter> indique à
		<command>groff</command> d'utiliser le même codage pour la sortie. Comme
		<command>groff</command> ne recode pas les caractères en entrée, le résultat
		formaté est réellement dans le même codage qu'en entrée et est, du coup,
		utilisable en entrée par un pagineur.</para>

    <para>Ceci ne résout pas le problème du programme bogué
		<command>man2dvi</command> pour les pages man localisés dans des locales autres
		que ISO 8859-1. De plus, cela ne fonctionne pas avec des ensembles de caractères
		multi-octets. Le premier problème n'a pas de solution. Le second n'a pas
		d'importance car l'installation LFS ne supporte pas les ensembles de caractères
		multi-octets.</para>

<!-- -->

    <para>Des informations supplémentaires concernant la compression des pages man
		et info sont disponibles dans le livre BLFS sur
		<ulink url="&blfs-root;view/cvs/postlfs/compressdoc.html"/>.</para>

  </sect2>

  <sect2 id="contents-man" role="content">
    <title>Contenu de Man</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>

      <seglistitem>
        <seg>apropos, makewhatis, man, man2dvi, man2html et whatis</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="apropos">
        <term><command>apropos</command></term>
        <listitem>
          <para>Cherche dans la base de données <command>whatis</command> et affiche les
					descriptions courtes des commandes systèmes contenant une chaîne donnée</para>
          <indexterm zone="ch-system-man apropos">
            <primary sortas="b-apropos">apropos</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="makewhatis">
        <term><command>makewhatis</command></term>
        <listitem>
          <para>Construit la base de données <command>whatis</command>&nbsp;; elle lit
					toutes les pages man comprises dans <envar>MANPATH</envar> et, pour chaque
					page, écrit le nom et une courte description dans la base de données
					whatis</para>
          <indexterm zone="ch-system-man makewhatis">
            <primary sortas="b-makewhatis">makewhatis</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="man">
        <term><command>man</command></term>
        <listitem>
          <para>Formate et affiche la page man demandée en ligne</para>
          <indexterm zone="ch-system-man man">
            <primary sortas="b-man">man</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="man2dvi">
        <term><command>man2dvi</command></term>
        <listitem>
          <para>Convertit une page man au format dvi</para>
          <indexterm zone="ch-system-man man2dvi">
            <primary sortas="b-man2dvi">man2dvi</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="man2html">
        <term><command>man2html</command></term>
        <listitem>
          <para>Convertit une page man au format HTML</para>
          <indexterm zone="ch-system-man man2html">
            <primary sortas="b-man2html">man2html</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="whatis">
        <term><command>whatis</command></term>
        <listitem>
          <para>Recherche dans la base de données whatis et affiche les
					descriptions courtes des commandes système contenant un mot clé donné
					comme un mot séparé</para>
          <indexterm zone="ch-system-man whatis">
            <primary sortas="b-whatis">whatis</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
