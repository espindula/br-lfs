<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  %general-entities;
]>

<sect1 id="ch-tools-addinguser">
  <?dbhtml filename="addinguser.html"?>

  <title>Ajouter l'utilisateur HLFS</title>

  <para>Lorsque vous êtes connecté en tant qu'utilisateur
  <systemitem class="username">root</systemitem>, faire une simple
  erreur peut endommager voire dévaster votre système. Donc, nous
  recommandons de construire les paquets dans ce chapitre en tant
  qu'utilisateur non privilégié. Vous pouvez bien sûr utiliser
  votre propre nom d'utilisateur mais, pour faciliter l'établissement
  d'un environnement de travail propre, créez un nouvel utilisateur
  <systemitem class="username">hlfs</systemitem> comme membre d'un
  nouveau groupe <systemitem class="groupname">hlfs</systemitem>)
  utilisez-le lors du processus d'installation. En tant que <systemitem
  class="username">root</systemitem>, lancez les commandes suivantes
  pour créer le nouvel utilisateur&nbsp;:</para>

<screen><userinput>groupadd hlfs
useradd -s /bin/bash -g hlfs -m -k /dev/null hlfs</userinput></screen>

  <variablelist>
    <title>Voici la signification des options en ligne de commande&nbsp;:</title>

    <varlistentry>
      <term><parameter>-s /bin/bash</parameter></term>
      <listitem>
        <para>Ceci fait de <command>bash</command> le shell par défaut de
        l'utilisateur
        <systemitem class="username">lfs</systemitem>.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><parameter>-g hlfs</parameter></term>
      <listitem>
        <para>Cette option ajoute l'utilisateur <systemitem class="username">lfs</systemitem>
        au groupe <systemitem class="groupname">hlfs</systemitem>.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><parameter>-m</parameter></term>
      <listitem>
        <para>Ceci crée un répertoire personnel pour l'utilisateur
        <systemitem class="username">hlfs</systemitem>.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><parameter>-k /dev/null</parameter></term>
      <listitem>
        <para>Ce paramètre empêche toute copie possible de fichiers provenant
        du répertoire squelette (par défaut, <filename class="directory">/etc/skel</filename>)
        en modifiant son emplacement par le
        périphérique spécial null.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><parameter>hlfs</parameter></term>
      <listitem>
        <para>Ceci est le nom réel pour le groupe et l'utilisateur
        créé.</para>
      </listitem>
    </varlistentry>

  </variablelist>

  <para>Pour vous connecter en tant qu'utilisateur
  <systemitem class="username">hlfs</systemitem> (et non pas de passer à
  l'utilisateur <systemitem class="username">hlfs</systemitem> alors que
  vous êtes connecté en tant que  
  <systemitem class="username">root</systemitem>, ce qui ne requiert pas
  de mot de passe pour l'utilisateur
  <systemitem class="username">hlfs</systemitem>, donnez un mot de passe
  à <systemitem class="username">hlfs</systemitem>&nbsp;:</para>

<screen role="nodump"><userinput>passwd hlfs</userinput></screen>

  <para>Donnez à
  <systemitem class="username">hlfs</systemitem> un accès complet à
  <filename class="directory">$HLFS/tools</filename>  en indiquant que
  <systemitem class="username">hlfs</systemitem> est le propriétaire du
  répertoire&nbsp;:</para>

<screen><userinput>chown -v hlfs $HLFS/tools</userinput></screen>

  <para>Si un répertoire de travail séparé a été créé comme suggéré,
  faites que l'utilisateur <systemitem class="username">hlfs</systemitem>
  soit aussi le propriétaire de ce répertoire&nbsp;:</para>

<screen><userinput>chown -v hlfs $HLFS/sources</userinput></screen>

  <para>Ensuite, connectez-vous en tant que 

  <systemitem class="username">hlfs</systemitem>. Ceci peut se faire via
  une console virtuelle, avec le gestionnaire d'affichage ou avec la
  commande suivante de substitution d'utilisateur</para>

<screen role="nodump"><userinput>su - hlfs</userinput></screen>

  <para>Le <quote><parameter>-</parameter></quote> indique à
  <command>su</command> de lancer un shell de connexion. Vous trouverez
  la différence entre un shell de connexion et un autre dans la page man
  <filename>bash(1)</filename> et <command>info bash</command>.</para>

</sect1>
