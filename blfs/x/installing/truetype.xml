<sect1 id="x-installing-truetype">
<?dbhtml filename="truetype.html" dir="x"?>
<title>Ajouter le support des polices TrueType dans XFree86</title>

<para>Le support des polices TrueType est maintenant construit dans XFree86. Les
actions suivantes doivent être réalisées pour que les polices soient
disponibles.</para>

<itemizedlist>

<listitem><para>Créez un répertoire pour les polices et déplacez toutes les
polices TrueType que vous voulez dans ce répertoire.</para></listitem>

<listitem><para>Créez les fichiers <filename>fonts.scale</filename> et 
<filename>fonts.dir</filename> dans le répertoire des polices TrueType.
</para></listitem>

<listitem><para>Assurez-vous que le module truetype est chargé dans
<filename>XF86Config</filename>.</para></listitem>

<listitem><para>Assurez-vous que <parameter>FontPath</parameter> dans 
<filename>XF86Config</filename> contient le répertoire des polices TrueType.
</para></listitem>

</itemizedlist>

<sect2><title>Créer le répertoire des polices TrueType</title>

<para>La construction de XFree86 comme indiquée ci-dessus crée automatiquement
un répertoire des polices TrueType:
<filename>/usr/X11R6/lib/X11/fonts/TTF</filename>. Ce répertoire a déjà
quelques polices TrueType et est configué correctement. Si ce répertoire est
satisfaisant, copiez toutes les autres polices TrueType que vous voulez dans ce
répertoire. Sinon, créez un nouveau répertoire, de préférence dans le répertoire
<filename>/usr/X11R6/lib/X11/fonts/</filename> et mettez vos polices TrueType
dedans.</para></sect2>

<sect2><title>Créez <filename>fonts.scale</filename> et
<filename>fonts.dir</filename></title>

<para>Pour faire le fichier <filename>fonts.scale</filename>, vous devez
construire le programme <filename>ttmkfdir</filename>. Malheureusement, ce
programme a besoin des bibliothèques du projet <filename>freetype</filename>,
donc nous avons besoin de faire cela d'abord.</para>

<screen>Site de téléchargement (HTTP):       <ulink url="http://prdownloads.sourceforge.net/freetype/freetype-1.3.1.tar.gz"/></screen>

<para>Déballez le fichier et construisez-le avec
<screen><userinput>./configure --prefix=/usr &amp;&amp;
make &amp;&amp;
make install &amp;&amp;
ldconfig</userinput></screen></para>

<para>Maintenant, construisez l'utilitaire <filename>ttmkfdir</filename>. 
<screen>Site de téléchargement: <ulink url="http://freshmeat.net/projects/ttmkfdir"/></screen> 
Le fichier est <filename>ttmkfdir.tar.gz</filename>.
</para>

<para>Ce programme très court déballe ces fichiers dans le répertoire courant,
donc il est préférable de créer un répertoire séparé.
<screen><userinput>mkdir ttmkfdir &amp;&amp; 
cd ttmkfdir &amp;&amp; 
tar zxvf ../ttmkfdir.tar.gz</userinput></screen></para>

<para>Editez le <filename>Makefile</filename> pour changer les lignes suivantes:
<screen>FREETYPE_BASE=/usr
FREETYPE_INCL=$(FREETYPE_BASE)/include/freetype
FREETYPE_LIB=-L$(FREETYPE_BASE)/lib -lttf</screen>
</para>

<para>Lancez
<screen><userinput>make &amp;&amp;
install -m755 ttmkfdir /usr/bin</userinput></screen></para>

<para>Maintenant, changez le répertoire où vous avez vos polices TrueType et
lancez:
<screen>ttmkfdir -o fonts.scale &amp;&amp;
mkfontdir</screen></para></sect2>

<sect2><title>Assurez-vous que TrueType est chargé dans <filename>XF86Config</filename></title> 
<para>La section "Module" doit ressembler à ceci:
<screen>Section "Module"
        ...
        Load  "freetype"
        Load  "speedo"
EndSection</screen></para></sect2>

<sect2><title>Assurez-vous que <parameter>FontPath</parameter> dans
<filename>XF86Config</filename> pointe vers votre répertoire de polices TrueType</title>
<para>La section "Files" doit ressembler à ceci:
<screen>Section "Files"
        ...
        FontPath     "/usr/X11R6/lib/X11/fonts/TTF/"
EndSection</screen></para>

<para>XFree86 sera maintenant capable d'utiliser les polices TrueType quand il
sera relancé. Vous pouvez vérifier que les nouvelles polices sont disponibles
avec le programme <userinput>xlsfonts</userinput>.</para></sect2>

</sect1>

