<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  <!ENTITY mesa-download-http " ">
  <!ENTITY mesa-download-ftp  "ftp://ftp.freedesktop.org/pub/mesa/&mesa-version;/mesa-&mesa-version;.tar.xz">
  <!ENTITY mesa-md5sum        "0a1e9b0419b7cda01203eedaedfd37b5">
  <!ENTITY mesa-size          "7.3 Mo">
  <!ENTITY mesa-buildsize     "317 Mo (avec les tests and docs)">
  <!ENTITY mesa-time          "2.9 SBU (avec les tests and docs - all with parallelism = 4)">
]>
<sect1 id="mesa" xreflabel="Mesa-&mesa-version;">
  <?dbhtml filename="mesa.html"?>
  <sect1info>
    <othername>$LastChangedBy: igor $</othername>
    <date>$Date: 2015-10-11 13:51:21 +0200 (dim. 11 oct. 2015) $</date>
  </sect1info>
  <title>Mesa-&mesa-version;</title>
  <indexterm zone="mesa">
    <primary sortas="a-Mesa">Mesa</primary>
  </indexterm>
  <sect2 role="package">
    <title>Introduction à Mesa</title>
    <para>
      <application>Mesa</application> est une bibliothèque graphique 3D compatible avec OpenGL.
    </para>
    &lfs78_checked;
    <bridgehead renderas="sect3">Information sur le paquet </bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP) : <ulink url="&mesa-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP) : <ulink url="&mesa-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5 du téléchargement : &mesa-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement : &mesa-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis : &mesa-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction : &mesa-time;
        </para>
      </listitem>
    </itemizedlist>
    <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Correctif recommandé:
          <ulink
            url="&patch-root;/mesa-&mesa-version;-add_xdemos-1.patch"/>
          (installe 2 prorgammes dedemo pour tester Mesa - pas nécéssaire si vous installez le paquet
          <ulink url="ftp://ftp.freedesktop.org/pub/mesa/demos/">mesa-demos</ulink>)
        </para>
      </listitem>
    </itemizedlist>
    <bridgehead renderas="sect3">Dépendances de Mesa</bridgehead>
    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
      <xref linkend="xorg7-lib"/> et
      <xref linkend="libdrm"/>
    </para>
    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="elfutils"/> (requis pour le pilote Gallium3D radeonsi),
      <xref linkend="libvdpau"/> (pour construire les pilotes VDPAU),
      <xref linkend="llvm"/> (requis pour les pilotes Gallium3D r300, r600 et radeonsi
      et aussi pour llvmpipe qui est prévu pour être le plus rapide des trois rasteriseurs, voir
      <ulink url="http://www.mesa3d.org/faq.html#part3"/>)
    </para>
    <bridgehead renderas="sect4">Facultative</bridgehead>
    <para role="optional">
      <xref linkend="libgcrypt"/>,
      <xref linkend="nettle"/>,
     <xref linkend="wayland"/> (requise pour <xref linkend="plasma5-build"/>),
      <ulink url="ftp://ftp.freedesktop.org/pub/mesa/demos/">mesa-demos</ulink>
      (fournis plus de 300 démos pour tester
      <application>Mesa</application>; cela inclu les mêmes programmes ajoutés par le correctif),
      <ulink url="http://omxil.sourceforge.net/">Bellagio OpenMAX Integration
      Layer</ulink> (pour les plateformes mobiles) et
      <ulink url="http://wayland.freedesktop.org/">Wayland</ulink>
    </para>
    <note>
      <para>
        Les instructions considères que <application>elfutils</application>
        et <application>LLVM</application> avec le moteur r600/amdgpu backend sont installés.
        Vous devrez modifier les instructions si vous choisissez de ne pas les installer.
        Merci de noter que <application>elfutils</application>
        et <application>LLVM</application> sont <emphasis>requis</emphasis>
        pour les pilotes Gallium3D r300, r600 et radeonsi. Pour une explication de
        Gallium3D merci de regarder
        <ulink url="https://fr.wikipedia.org/wiki/Gallium3D"/>.
      </para>
    </note>
    <para condition="html" role="usernotes">Notes utilisateur :
      <ulink url="&blfs-wiki;/mesa"/>
    </para>
  </sect2>
  <sect2 role="installation">
    <title>Installation de Mesa</title>
    <para>
      Si vous avez téléchargé le correctif xdemos (nécéssaire pour tester l'installation de Xorg par les
      instructions de BLFS), appliquez le en lançant la commande suivante:
    </para>
<screen>
<userinput>patch -Np1 -i ../mesa-&mesa-version;-add_xdemos-1.patch</userinput>
</screen>
    <para>
      Installez <application>Mesa</application> en lançant les commandes suivantes :
    </para>
    <note>
      <para>Ajoutez wayland à l'option <option>--with-egl-platforms</option> si vous prévoyez de construire
       <xref linkend="plasma5-build"/>.</para>
    </note>
<screen>
<userinput>GLL_DRV="nouveau,r300,r600,radeonsi,svga,swrast" &amp;&amp;
./autogen.sh CFLAGS='-O2' CXXFLAGS='-O2'                --prefix=$XORG_PREFIX                       --sysconfdir=/etc                           --enable-texture-float                      --enable-gles1                              --enable-gles2                              --enable-osmesa                             --enable-xa                                 --enable-gbm                                --enable-glx-tls                            --with-egl-platforms="drm,x11"              --with-gallium-drivers=$GLL_DRV &amp;&amp;
unset GLL_DRV &amp;&amp;
make</userinput>
</screen>
    <para>
      Si vous avez appliqué le correctif Xdemos, construisez les programmes de démo en lançant la commande
      suivante:
    </para>
<screen>
<userinput>make -C xdemos DEMOS_PREFIX=$XORG_PREFIX</userinput>
</screen>
    <para>
      Pour tester le résultat, tapez : <command>make check</command>.
    </para>
    <para>
      Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem> :
    </para>
<screen role="root">
<userinput>make install</userinput>
</screen>
    <para>
      Si vosu avez construit les programmes de démi, installez les en lançant la commande suivante en tant
      qu'utilisateur
      <systemitem class="username">root</systemitem>:
    </para>
<screen role="root">
<userinput>make -C xdemos DEMOS_PREFIX=$XORG_PREFIX install</userinput>
</screen>
    <para>
      SI vous le désirez, installez la documentation facultative en lançant les commandes suivantes en tant
      qu'utilisateur
      <systemitem class="username">root</systemitem> :
    </para>
<screen role="root">
<userinput>install -v -dm755 /usr/share/doc/mesa-&mesa-version; &amp;&amp;
cp -rfv docs/* /usr/share/doc/mesa-&mesa-version;</userinput>
</screen>
  </sect2>
  <sect2 role="commands">
    <title>Explications des commandes</title>
    <para>
      <parameter>CFLAGS="-O2" CXXFLAGS="-O2"</parameter> : Par défaut,
      <application>Autoconf</application> initialise CFLAGS et CXXFLAGS à
      "-g -O2". Ce qui fait que les binaires et les bibliothèques sont construits avec
      les symboles de déboguage, ce qui les rend plus gros. Ecrasez les valeurs par
      défaut pour ne pas utiliser le drapeau -g du compilateur et que les bibliothèques
      soient plus légères.
    </para>
    <para>
      <parameter>--enable-texture-float</parameter> : Ce paramètre active les buffers de rendus et les textures
      à points flottant. Merci de consulter
      <filename>docs/patents.txt</filename> pour voir s'il n'y a pas de problèmes
      légaux si vous utilisez cette possibilité.
    </para>
    <para>
      <parameter>--enable-gles1</parameter> : Ce paramètre actuve le support pour
      OpenGL ES 1.x API.
    </para>
    <para>
      <parameter>--enable-gles2</parameter> : Ce paramètre active le support pour
      OpenGL ES 2.x API.
    </para>
    <para>
      <parameter>--enable-osmesa</parameter> : Ce paramètre active la construction de
      la bibliothèque <filename class="libraryfile">libOSMesa</filename>.
    </para>
    <para>
      <parameter>--enable-xa</parameter> : Ce paramètre active la construction de
      l'API XA X Acceleration (Requis pour le pilote VMware 3D).
    </para>
    <para>
      <parameter>--enable-gbm</parameter> : Ce paramètre active la construction de
      la bibliothèuqe de gestion des buffets graphiques de
      <application>Mesa</application>.
    </para>
    <para>
      <parameter>--enable-glx-tls</parameter> : Ce paramètre active le support TLS (Thread Local
      Storage) dans GLX.
    </para>
    <para>
      <parameter>--with-egl-platforms="..."</parameter>&nbsp;: Ce paramètre contrôle pour quelle plate-forme
      EGL devra être construit. Les plate-formes disponibles sont drm, x11 et wayland.
    </para>
    <para>
      <parameter>--with-gallium-drivers="..."</parameter>&nbsp;: Ce paramètre
      contrôle quels sont les pilotes Gallium3D qui doivent être construits. Les pilotes disponibles
      sont i915, ilo,nouveau, r300, radeonsi, svga et swrast. Vous devez effacer
      r300, r600 et radeonsi de la liste si vous n'installez pas
       <application>elfutils</application> et
      <application>LLVM</application> avec le support r600/amdgpu..
    </para>
    <para>
      <option>--enable-r600-llvm-compiler</option>: Utilisez ce paramètre pour
      activer le serveur <application>LLVM</application> de R600 pour les
      surfaces graphiques qui réclament d'accélerer le pilote.
     </para>
    <para>
      <option>--enable-sysfs</option>: Utilisez ce paramètre pour activer la méthode d'identification
      simple de PCI, demandé pour construire le DRI sur les systèmes dans udev.
    </para>
  </sect2>
  <sect2 role="content">
    <title>Contenu</title>
    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>
      <seglistitem>
        <seg>
          glxgears et glxinfo
        </seg>
        <seg>
          libEGL.so,
          libgbm.so,
          libglapi.so,
          libGLESv1_CM.so,
          libGLESv2.so,
          libGL.so,
          libOSMesa.so,
          libxatracker.so,
          libXvMCnouveau.so,
          et libXvMCr600.so
        </seg>
        <seg>
          $XORG_PREFIX/{include/{EGL,GL,GLES,GLES2,GLES3,KHR},lib/{dri,vdpau}}
          et
          /usr/share/doc/mesa-&mesa-version; (optional)
        </seg>
      </seglistitem>
    </segmentedlist>
    <variablelist>
      <bridgehead renderas="sect3">Description courte</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      <varlistentry id="glxgears">
        <term><command>glxgears</command></term>
        <listitem>
          <para>
            est une démo GL utile pour dépanner des problèmes graphiques.
          </para>
          <indexterm zone="mesa glxgears">
            <primary sortas="b-glxgears">glxgears</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="glxinfo">
        <term><command>glxinfo</command></term>
        <listitem>
          <para>est un programme de diagnostique affichant des informations
          sur le matériel graphique et les bibliothèques GL installées.</para>
          <indexterm zone="mesa glxinfo">
            <primary sortas="b-glxinfo">glxinfo</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libEGL">
        <term><filename class='libraryfile'>libEGL.so</filename></term>
        <listitem>
          <para>fournit nativement un interface de plate-forme graphique qui est définie
          avec les spécifications EGL-1.4.</para>
          <indexterm zone="mesa libEGL">
            <primary sortas="c-libGL">libEGL.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libgbm">
        <term><filename class="libraryfile">libgbm.so</filename></term>
        <listitem>
          <para>
            est la bibliothèque de gestion du tampon graphique de <application>Mesa</application>.
          </para>
          <indexterm zone="mesa libgbm">
            <primary sortas="c-libgbm">libgbm.so</primary>
          </indexterm>
       </listitem>
      </varlistentry>
      <varlistentry id="libGLESv1_CM">
        <term><filename class="libraryfile">libGLESv1_CM.so</filename></term>
        <listitem>
          <para>
           est la bibliothèque  OpenGL ES 1.1 de <application>Mesa</application>.
          </para>
          <indexterm zone="mesa libGLESv1_CM">
            <primary sortas="c-libGLESv1_CM">libGLESv1_CM.so</primary>
         </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libGLES2">
        <term><filename class="libraryfile">libGLES2.so</filename></term>
       <listitem>
          <para>
            est la bibliothèque  OpenGL ES 2.0 de <application>Mesa</application>.
         </para>
          <indexterm zone="mesa libGLES2">
            <primary sortas="c-libGLES2">libGLES2.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libGL">
        <term><filename class='libraryfile'>libGL.so</filename></term>
        <listitem>
          <para>est la bibliothèque principale OpenGL de <application>Mesa</application> .</para>
          <indexterm zone="mesa libGL">
            <primary sortas="c-libGL">libGL.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libOSMesa">
        <term><filename class="libraryfile">libOSMesa.so</filename></term>
        <listitem>
          <para>
            est la bibliothèque de rendu hors-ligne de <application>Mesa</application>.
         </para>
          <indexterm zone="mesa libOSMesa">
            <primary sortas="c-libOSMesa">libOSMesa.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
        <varlistentry id="libxatracker">
        <term><filename class='libraryfile'>libxatracker.so</filename></term>
        <listitem>
          <para>est la bibliothèque d'accélération de Xorg Gallium3D.</para>
          <indexterm zone="mesa libxatracker">
            <primary sortas="c-libxatracker">libxatracker.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
     </variablelist>
  </sect2>
</sect1>
