<?xml version="1.0" encoding="ISO-8859-1"?>
<sect2>
<title>Configurer <application>XFree86</application></title>

<para>Editez <filename>/etc/ld.so.conf</filename> et lancez
<filename class="directory">/usr/X11R6/lib</filename>.
Lancez</para> <screen><userinput><command>ldconfig</command></userinput></screen>

<para>Assurez-vous que <filename class='directory'>/usr/X11R6/bin</filename> est
ajouté à votre variable d'environnement <envar>PATH</envar>. Les instructions
pour ce faire sont décrites dans la section <xref
linkend='postlfs-config-profile'/>.</para>
 
<para>Étendez <envar>PKG_CONFIG_PATH</envar> de façon à ce que les autres
paquetages puissent trouver les bibliothèques <application>X</application>. Les
procédures pour ce faire sont aussi décrites dans la section <xref linkend='postlfs-config-profile'/>.</para>

<para>Lancez</para>
<screen><userinput><command>source ~/.bash_profile</command></userinput></screen>

<para>Configurez votre souris:
<screen><userinput><command>ln -s psaux /dev/mouse</command></userinput></screen>

Ajustez le lien symbolique comme nécessaire pour les autres types de souris.
Par exemple, un souris série sur le premier port série sera lié vers ttyS1.
</para>

<para>Créez le fichier XF86Config avec
<screen><command>cd ~
XFree86 -configure</command></screen>
L'écran va devenir noir et vous pourrez entendre des clics sur le moniteur.
Cette commande va créer un fichier, <filename>XF86Config.new</filename> dans
votre répertoire principal.</para>

<para>Editez <filename>XF86Config.new</filename> suivant votre système. Les
détails de ce fichier sont indiqués dans la page man
<userinput>man XF86Config</userinput>. Vous pourriez vouloir faire:</para>

<itemizedlist>

<listitem><para>Section "Files". Changer l'ordre du chemin des polices.
Vous pouvez vouloir placer les polices 100dpi avant les polices 75dpi si votre
système est plus près de 100 points par pouce. Vous pourriez vouloir supprimer
complètement quelques répertoires de polices.</para></listitem>

<listitem><para>Section "Monitor". Spécifiez les valeurs de <parameter>VertRefresh</parameter>
et <parameter>HorizSync</parameter> si le système ne détecte pas automatiquement
le moniteur et ses valeurs.</para></listitem>

<listitem><para>Section "InputDevice".  Vous pouvez vouloir changer le taux de
répétition automatique en ajoutant
<userinput>Option "Autorepeat" "250 30"</userinput>.</para></listitem>

<listitem><para>Section "Device". Vous pouvez initialiser certaines options
disponibles dans le pilote vidéo que vous avez sélectionné. Une description des
paramètres du pilote se trouve sur la page man de votre pilote.</para></listitem>

<listitem><para>Section "Screen". Ajouter une indication DefaultDepth telle que:
<parameter>DefaultDepth 16</parameter>. Dans la sous-section (SubSection) pour
votre profondeur par défaut, ajouter les lignes 'modes line' telles que:
<parameter> Modes "1280x1024" "1024x768"</parameter>.
Le premier mode affiché va normalement être la résolution lors du démarrage.
</para></listitem>

</itemizedlist>

<para>Testez le system avec
<screen><userinput><command>XFree86 -xf86config ~/XF86Config.new</command></userinput></screen>
Vous obtiendrez seulement un fond d'écran gris avec un curseur de souris en
forme de X, mais il confirme que le système fonctionne. Sortez avec
Control-Alt-Backspace. Si le système ne fonctionne pas, jetez un oeil sur
<filename>/var/log/XFree86.0.log</filename> pour voir ce qui ne va pas.</para>

<para>Déplacez le fichier de configuration à son emplacement final
<screen><userinput><command>mv ~/XF86Config.new /etc/X11/XF86Config-4</command></userinput></screen></para>

<para>Créez <filename>.xinitrc</filename>
<screen><userinput><command>cat &gt; ~/.xinitrc &lt;&lt; "EOF"</command>
# Begin .xinitrc file
xterm  -g 80x40+0+0   &amp;
xclock -g 100x100-0+0 &amp;
twm
<command>EOF</command></userinput></screen>
Ceci apporte un écran initial avec un xterm et une horloge géré par un
gestionnaire de fenêtres simple, Tab Window Manager. Pour plus de détails sur
twm, voir la page man.</para>

<note>

<para>Si nécessaire, <application>XFree86</application> crée le répertoire
<filename>/tmp/.ICE-unix</filename> si celui-ci n'existe pas. Si ce répertoire
n'appartient pas à root, <application>XFree86</application> ajoute un délai au
lancement de quelques secondes et ajoute aussi un message d'attention dans le
journal des traces. Ceci affecte aussi le démarrage des autres applications. Pour
améliorer les performances, un conseil est de créer le répertoire avant que
XFree86 ne l'utilise. Ajoutez le création du fichier dans
<filename>/etc/sysconfig/createfiles</filename> qui est lancé par le script de
démarrage <filename>/etc/rc.d/init.d/cleanfs</filename>.</para>

<screen><userinput><command>cat &gt;&gt; /etc/sysconfig/createfiles &lt;&lt; "EOF"</command>
/tmp/.ICE-unix dir 1777 root root
<command>EOF</command></userinput></screen>

</note>

<para>Lancez <application>X</application> avec
<screen><userinput><command>startx</command></userinput></screen>
pour obtenir un système <application>X</application> Windows basique fonctionnel.</para>

</sect2>

