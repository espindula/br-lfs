<sect1 id="x-setup">
<?dbhtml filename="xfree86-setup.html" dir="x"?>
<title>Configuration des composants XFree86</title>

<sect2>
<title>Vérification de l'installation Direct Rendering Infrastructure (DRI)</title>
<para>DRI est un ensemble de travail permettant aux logiciels d'accéder au matériel
graphique d'une manière efficace et sûre. Il est installé avec XFree86 par défaut si vous
disposez d'une carte vidéo le supportant. Pour vérifier si le DRI est installé
correctement, vérifiez le fichier de traces <filename>/var/log/XFree86.0.log</filename>
pour des indications comme:</para>

<para><screen>(II) R128(0): Direct rendering enabled</screen></para>

<para>A partir d'un xterm, lancez <userinput>glxinfo</userinput> et cherchez la phrase:</para> 
<para><screen>direct rendering: Yes</screen></para>

<para>Vous pouvez aussi lancer le programme de test <userinput>glxgears</userinput>.
Ce programme affiche une fenêtre avec trois engrenages tournants. 
<filename>xterm</filename> affichera le nombre d'images par cinq secondes, ce qui est
une mesure de performance raisonnable. La fenêtre est redimensionnable, et le temps
d'affichage des images écrites chaque seconde sont extrêmement dépendantes de la taille
de la fenêtre.</para>
 
<para>Pour résoudre les problèmes éventuels, voir le Guide de l'utiilisateur DRI sur
<userinput><ulink url="http://dri.sourceforge.net/doc/DRIuserguide.html"/></userinput>.
</para>
</sect2>

<!-- ================================================== -->

<sect2>
<title>Ajouter des polices TrueType à XFree86</title>

<para>Le support des polices TrueType est intégré à XFree86. Les éléments suivants ont
besoin d'être complétés pour rendre les polices disponibles.</para>

<itemizedlist>

<listitem><para>Etablir un répertoire pour les polices et y placer toutes les polices
TrueType souhaitées.</para></listitem>

<listitem><para>Créer les fichiers <filename>fonts.scale</filename> et
<filename>fonts.dir</filename> dans le répertoire des polices TrueType.</para></listitem>

<listitem><para>S'assurer que le module truetype est chargé dans 
<filename>XF86Config</filename>.</para></listitem>

<listitem><para>S'assurer que la variable <parameter>FontPath</parameter> dans
<filename>XF86Config</filename> contient le répertoire des polices TrueType.</para></listitem>

</itemizedlist>

<sect3><title>Etablir un répertoire des polices TrueType</title>

<para>La construction d'XFree86 faite ci-dessus crée un répertoire pour les polices
TrueType: <filename>/usr/X11R6/lib/X11/fonts/TTF</filename>. Ce répertoire dispose déjà
de quelques polices TrueType et est configuré correctement. Si ce répertoire est
satisfaisant, copiez toutes les autres polices TrueType que vous souhaitez dans ce
répertoire. Sinon, créez un nouveau répertoire, de préférence dans le répertoire
<filename>/usr/X11R6/lib/X11/fonts/</filename> et placez vos polices TrueType ici.
</para></sect3>

<sect3><title>Créer <filename>fonts.scale</filename> et
<filename>fonts.dir</filename></title>

<para>Maintenant, allez dans le répertoire où se trouvent vos polices TrueType et lancez
<screen><userinput>mkfontscale &amp;&amp;
mkfontdir</userinput></screen></para></sect3>

<sect3><title>S'assurer que TrueType est chargé dans <filename>XF86Config</filename></title> 
<para>La section "Module" devrait ressembler à ceci:
<screen>Section "Module"
        ...
        Load  "freetype"
        ...
EndSection</screen></para></sect3>

<sect3><title>S'assurer que la variable <parameter>FontPath</parameter> dans
<filename>XF86Config</filename> pointe vers le répertoire des polices TrueType</title>
<para>Le section "Files" devrait ressembler à ceci:
<screen>Section "Files"
        ...
        FontPath     "/usr/X11R6/lib/X11/fonts/&lt;TruetypeDir&gt;/"
        ...
EndSection</screen></para>
</sect3>

<sect3><title>Mettre à jour les fichiers de cache des polices</title> 
<para>Finalement, pour mettre à jour tous les fichiers de cache des polices spécifiés
dans <filename>/etc/fonts/fonts.conf</filename>, lancez
<screen><userinput>fc-cache</userinput></screen>
</para>

<para>XFree86 sera maintenant capable d'utiliser les polices TrueType lorsqu'il sera
relancé.
Vous pouvez vérifier si les nouvelles polices sont disponibles avec les programmes
<userinput>xlsfonts</userinput>  et <userinput>xfontsel</userinput>.</para>

<note><para>Vous devriez relancer <userinput>mkfontscale</userinput> et
<userinput>mkfontdir</userinput> à chaque fois que vous ajoutez ou supprimez des polices
TrueType. Vous devriez aussi relancer <userinput>fc-cache</userinput> à chaque fois que
vous ajoutez ou enlevez des polices.</para></note>

</sect3>
</sect2>

<!-- ================================================== -->
<sect2>
<title>Configurer les claviers</title>
<para>Dans cette version d'XFree86, il a été dit que les plans de codage du clavier
non-latin n'incluaient pas le configuration pour les entrées latin et non-latin, ce qui
était auparavant le cas. Pour configurer un clavier en latin et non-latin, modifiez
l'option du pilote du clavier XkbLayout dans la section InputDevice du fichier
<filename>XF86Config</filename>. Par exempe:</para>

<para><screen>   Section "InputDevice"
     Identifier          "Keyboard0"
     Driver              "Keyboard"
     Option "XkbModel"   "pc105"
     Option "XkbLayout"  "en_US,ru"
     Option "XkbOptions" "grp:switch,grp:alt_shift_toggle,grp_led:scroll"
   EndSection</screen></para>

<para>Dans cet exemple, vous pouvez utiliser la combinaison Alt-Shift pour passer
d'un plan de codage à un autre et utiliser la LED "Scroll Lock" pour indiquer lorsque le
deuxième plan est actif.</para>
</sect2>

<!-- ================================================== -->
<sect2>
<title>Configurer xdm</title>
<para><filename>xdm</filename> apporte un utilitaire de connexion graphique et est
normalement configuré avec <filename>/etc/inittab</filename>. La plupart des informations
dont vous avez besoin pour personnaliser <filename>xdm</filename> se trouve dans sa
page man. Pour exécuter xdm au lancement, modifiez le niveau d'initialisation par
défaut à 5 et ajoutez les lignes suivantes à <filename>/etc/inittab</filename>:</para>

<para><screen># Lancez xdm en tant que service séparé
x:5:respawn:/usr/X11R6/bin/xdm -nodaemon</screen></para>
</sect2>

<!-- ================================================== -->
<sect2>
<title>Utiliser les ressources d'XFree86</title>
<para>Il existe beaucoup d'options pouvant être configurées dans XFree86 et les clients
X via les ressources. Des ressources typiques sont configurées dans le fichier
<filename>~/.Xresources</filename>.</para>

<para>La répartition du fichier <filename>~/.Xresources</filename> consiste en une liste
de spécifications de la forme:</para>

<para><screen>object.subobject[.subobject...].attribute: value</screen></para>

<para>Typiquement, les composants d'une spécification de ressource sont liés ensemble
par un lien <emphasis>serré</emphasis>, représenté par un point (.),
ou <emphasis>lâche</emphasis>, représenté par une astérisque (*).
Un lien serré indique que les composants de chaque côté du point doivent être
directement associés comme défini dans l'implémentation. Une astérisque est un caractère
spécial signifiant un nombre illimité d'une hiérarchie définie.
Par exemple, XFree86 offre deux nouveaux curseurs: redglass et whiteglass. Pour utiliser
une de ces ressources, vous avez besoin d'ajouter la ligne suivante:</para>

<para><screen>Xcursor.theme: whiteglass</screen></para>

<para>Néanmoins, vous pouvez spécifier que le fond de tous les cliens avec:</para>

<para><screen>*background: blue</screen></para>

<para>Des variables de ressources plus spécifiques vont surenchérir des noms moins
spécifiques.</para>

<para>Des définitions de ressources sont disponibles dans les pages man de chaque client.
</para>

<para>Pour charger vos ressourcesn, le programme <filename>xrdb</filename> doit être
appelé avec les paramètres appropriés. Typiquement, la première fois que vous chargez les
ressources, vous utilisez:</para>

<para><screen>xrdb -load &lt;filename&gt;</screen></para>

<para>Pour ajouter des ressources à la base de données XFree86 en mémoire, utilisez:
</para>
<para><screen>xrdb -merge &lt;filename&gt;</screen></para>

<para>L'instruction <filename>xrdb</filename> est généralement placé dans
<filename>~/.xinitrc</filename> ou <filename>~/.xsession</filename>.
Pour plus d'informations, voir la page man <filename>xrdb</filename>.</para>
</sect2>

</sect1>

