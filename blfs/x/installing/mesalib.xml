<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  <!ENTITY mesalib-download-http " ">
  <!ENTITY mesalib-download-ftp
  "ftp://ftp.freedesktop.org/pub/mesa/&mesalib-version;/mesa-&mesalib-version;.tar.xz">
  <!ENTITY mesalib-md5sum        "72aaa2604b38135a3a37c37cd967284d">
  <!ENTITY mesalib-size          "6.7 Mo">
  <!ENTITY mesalib-buildsize     "230 Mo (additional 56 Mo for the tests and 2 Mo for the docs)">
  <!ENTITY mesalib-time          "7.9 SBU (additional 0.5 SBU for the tests)">
]>
<sect1 id="mesalib" xreflabel="MesaLib-&mesalib-version;">
  <?dbhtml filename="mesalib.html"?>
  <sect1info>
    <othername>$LastChangedBy&nbsp;: bdubbs $</othername>
    <date>$Date&nbsp;: 2013-03-06 04:05:17 +0100 (Wed, 06 Mar 2013) $</date>
  </sect1info>
  <title>MesaLib-&mesalib-version;</title>
  <indexterm zone="mesalib">
    <primary sortas="a-MesaLib">MesaLib</primary>
  </indexterm>
  <sect2 role="package">
    <title>Introduction à MesaLib</title>
    <para><application>Mesa</application> est une bibliothèque graphique 
    compatible OpenGL 3D.</para>
    &lfs77_checked;
    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&mesalib-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&mesalib-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &mesalib-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;:
        &mesalib-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;:
        &mesalib-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;:
        &mesalib-time;</para>
      </listitem>
    </itemizedlist>
     <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
         <para>
          Correctif recommandé:
         <ulink url="&patch-root;/mesa-&mesalib-version;-add_xdemos-1.patch"/>
          (installes 2 programmes de démo pour tester - pas utile si vous isntallez
          le paquet <ulink url="ftp://ftp.freedesktop.org/pub/mesa/demos/">mesa-demos</ulink>
          )
       </para>
      </listitem>
    </itemizedlist>
   <bridgehead renderas="sect3">Dépendances de MesaLib</bridgehead>
    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
      <xref linkend="xorg7-lib"/> et,
      <xref linkend="libdrm"/>
    </para>
   <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="elfutils"/> (requis pour le pilote Gallium3D radeonsi),
      <xref linkend="libvdpau"/> (pour construire les pilotes VDPAU),
      <xref linkend="llvm"/> (requis pour Gallium3D r300 et les pilotes de radeonsi et aussi pour
      llvmpipe qui est connu pour être le plus rapide des trois rasteriseurs,
      regardez <ulink url="http://www.mesa3d.org/faq.html#part3"></ulink>
   </para>
    <bridgehead renderas="sect4">Facultative</bridgehead>
    <para role="optional">
      <xref linkend="mako"/>,
        <xref linkend="python2"/>      
      <ulink url="ftp://ftp.freedesktop.org/pub/mesa/demos/">mesa-demos</ulink>
      fournit plus de 300 démos supplémentaires pour tester
      <application>MesaLib</application>; ce qui inclu les mêmes programme ajoutés par le correctif) et
      <ulink url="http://wayland.freedesktop.org/">Wayland</ulink>
    </para>
    <note>
      <para>
        Les instructions qui suivent considèrent que  <application>elfutils</application>
        et <application>LLVM</application>
        sont installés. Vous devrez modifier les instructions si vous choisissez de ne pas les installer
        Merci de noter que <application>elfutils</application> et
       <application>LLVM</application> sont <emphasis>requis</emphasis> pour les pilotes Gallium3D r300 et
        Radeon. Pour une explication de gallium merci de regarder
        <ulink url="https://en.wikipedia.org/wiki/Gallium3D"></ulink>.
      </para>
    </note>
    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/mesalib"/></para>
  </sect2>
  <sect2 role="installation">
    <title>Installation de MesaLib</title>
    <para>
      Si vous avez téléchargé le correctif xdemos (Nécessaire pour tester l'installation de Xorg par les instructions de BLFS).
      appliquez le en lançant les commandes suivantes:
    </para>
<screen>
<userinput>patch -Np1 -i ../mesa-&mesalib-version;-add_xdemos-1.patch</userinput>
</screen>
    <para>
     Installez <application>MesaLib</application> en lançant les commandes
    suivantes&nbsp;:</para>
<screen>
<userinput>autoreconf -f -i &amp;&amp;
./configure CFLAGS='-O2' CXXFLAGS='-O2'                --prefix=$XORG_PREFIX                      --sysconfdir=/etc                          --enable-texture-float                     --enable-gles1                             --enable-gles2                             --enable-osmesa                            --enable-xa                                --enable-gbm                               --enable-glx-tls                           --with-egl-platforms="drm,x11"             --with-gallium-drivers="nouveau,r300,r600,radeonsi,svga,swrast" &amp;&amp;
make</userinput>
</screen>
    <para>
      Si vous avez appliqué le correctif xdemos, construisez les programmes de démo en lançant la commande suivante:
    </para>
<screen>
<userinput>make -C xdemos DEMOS_PREFIX=$XORG_PREFIX</userinput>
</screen>
    <para>
        Pour tester les résultats, tapez : <command>make check</command>.</para>
    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>
<screen role="root">
<userinput>make install</userinput>
</screen>
    <para>
      Si vous avez construit les programmes de démo, installez les en lançant la commande suivante en tant qu'utilisateur
    <systemitem class="username">root</systemitem>&nbsp;:</para>
<screen role="root">
<userinput>make -C xdemos DEMOS_PREFIX=$XORG_PREFIX install</userinput>
</screen>
    <para>
     Si vous le souhaitez, installez les documentations facultatives en lançant les commandes suivantes en tant qu'utilisateur
      <systemitem class="username">root</systemitem>&nbsp;:
    </para>
<screen role="root">
<userinput>install -v -dm755 /usr/share/doc/mesa-&mesalib-version; &amp;&amp;
cp -rfv docs/* /usr/share/doc/mesa-&mesalib-version;</userinput>
</screen>
  </sect2>
 
  <sect2 role="commands">
    <title>Explications des commandes</title>
    <para>
  <parameter>CFLAGS="-O2" CXXFLAGS="-O2"</parameter>&nbsp;: Par défaut,
      <application>Autoconf</application> initialise CFLAGS et CXXFLAGS à
      "-g -O2". Ce qui fait que les binaires et les bibliothèques sont construits
      avec les symboles de déboguage ce qui fait qu'ils sont plus lourd. Ecrasez
      les drapeaux par défauts pour omettre le drapeau -g du compilateur pour avoir au final des
      bibliothèques plus légeres.
    </para>
     <para>
      <parameter>--enable-texture-float</parameter>&nbsp;: Ce paramètre active les
      textures et les tampons d'affichage de points flottants. Merci de consulter
      <filename>docs/patents.txt</filename> pour voir s un problème légal existe
      en cas d'utilisation de cette fonctionnalité.
    </para>
    <para>
      <parameter>--enable-gles1</parameter>&nbsp;: Ce paramètre active le support
      de l'API d'OpenGL ES 1.x.
    </para>
    <para>
      <parameter>--enable-gles2</parameter>&nbsp;: Ce paramètre active le support de
      l'API d'OpenGL ES 2.x.
    </para>
 
    <para>
      <parameter>--enable-osmesa</parameter>&nbsp;: Ce paramètre active la construction
      de la bibliothèque <filename class="libraryfile">libOSMesa</filename>.
    </para>
    <para>
       <parameter>--enable-xa</parameter>&nbsp;: Ce paramètre active la construction de
      l'API d'accélération XA X (Requise pour le pilote 3D de VMware).
    </para>
  <para>
     <parameter>--enable-gbm</parameter>&nbsp;: Ce paramètre active la construction de
      la bibliothèque de <application>Mesa</application> Graphics Buffer Manager.
   </para>
    <para>
      <parameter>--enable-glx-tls</parameter>&nbsp;: Ce paramètre active le support
      TLS ((Thread Local Storage) dans GLX.
    </para>
    <para>
      <parameter>--with-egl-platforms="..."</parameter>&nbsp;: Ce paramètre contrôle pour quel plate-forme
      EGL doit être construit. Les plate-formes disponibles sont drm, x11 et wayland.
    </para>
    <para>
      <parameter>--with-gallium-drivers="..."</parameter>&nbsp;: Ce paramètre
      contrôle quels sont les pilotes Gallium3D qui doivent être construits. Les pilotes disponibles
      sont&nbsp;!
      i915,  ilo,nouveau, r300, radeonsi, svga et swrast. Vous devez effacer
      r300, r600 et radeonsi de la liste si vous n'installez pas
       <application>elfutils</application> et
      <application>LLVM</application>.
    </para>
    <para>
      <option>--enable-r600-llvm-compiler</option>: Utilisez ce paramètre pour
      activer le serveur <application>LLVM</application> de R600 pour les
      surfaces graphiques qui réclament d'accélerer le pilote.
     </para>
    <para>
      <option>--enable-sysfs</option>: Utilisez ce paramètre pour activer la méthode d'identification
      simple de PCI, demdné pour construire le DRI sur les systèmes dans udev.
    </para>
  </sect2>
  <sect2 role="content">
    <title>Contenu</title>
    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>
      <seglistitem>
        <seg>
          glxgears et glxinfo
        </seg>
        <seg>
          libEGL.so,
          libgbm.so,
          libglapi.so,
          libGLESv1_CM.so,
          libGLESv2.so,
          libGL.so,
          libOSMesa.so, et
          libxatracker.so
          libXvMCnouveau.so,
          et libXvMCr600.so
        </seg>
        <seg>
          $XORG_PREFIX/{include/{EGL,GL,GLES,GLES2,GLES3,KHR},lib/{dri,vdpau}}
          et
          /usr/share/doc/mesa-&mesalib-version; (facultatif)
        </seg>
      </seglistitem>
    </segmentedlist>
    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      <varlistentry id="glxgears">
        <term><command>glxgears</command></term>
        <listitem>
          <para>est une démo GL utile pour dépanner des problèmes graphiques.</para>
          <indexterm zone="mesalib glxgears">
            <primary sortas="b-glxgears">glxgears</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="glxinfo">
        <term><command>glxinfo</command></term>
        <listitem>
          <para>est un programme de diagnostique affichant des informations
          sur le matériel graphique et les bibliothèques GL installées.</para>
          <indexterm zone="mesalib glxinfo">
            <primary sortas="b-glxinfo">glxinfo</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libEGL">
        <term><filename class='libraryfile'>libEGL.so</filename></term>
        <listitem>
          <para>fournit nativement un interface de plate-forme graphique qui est définie
          avec les spécifications EGL-1.4.</para>
          <indexterm zone="mesalib libEGL">
            <primary sortas="c-libGL">libEGL.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libgbm">
        <term><filename class="libraryfile">libgbm.so</filename></term>
        <listitem>
          <para>
            est la bibliothèque de gestion du tampon graphique de <application>Mesa</application>.
          </para>
          <indexterm zone="mesalib libgbm">
            <primary sortas="c-libgbm">libgbm.so</primary>
          </indexterm>
       </listitem>
      </varlistentry>
      <varlistentry id="libGLESv1_CM">
        <term><filename class="libraryfile">libGLESv1_CM.so</filename></term>
        <listitem>
          <para>
           est la bibliothèque  OpenGL ES 1.1 de <application>Mesa</application>.
          </para>
          <indexterm zone="mesalib libGLESv1_CM">
            <primary sortas="c-libGLESv1_CM">libGLESv1_CM.so</primary>
         </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libGLES2">
        <term><filename class="libraryfile">libGLES2.so</filename></term>
       <listitem>
          <para>
            est la bibliothèque  OpenGL ES 2.0 de <application>Mesa</application>.
         </para>
          <indexterm zone="mesalib libGLES2">
            <primary sortas="c-libGLES2">libGLES2.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libGL">
        <term><filename class='libraryfile'>libGL.so</filename></term>
        <listitem>
          <para>est la bibliothèque principale OpenGL de <application>Mesa</application> .</para>
          <indexterm zone="mesalib libGL">
            <primary sortas="c-libGL">libGL.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
     
      <varlistentry id="libOSMesa">
        <term><filename class="libraryfile">libOSMesa.so</filename></term>
        <listitem>
          <para>
            est la bibliothèque de rendu hors-ligne de <application>Mesa</application>.
         </para>
          <indexterm zone="mesalib libOSMesa">
            <primary sortas="c-libOSMesa">libOSMesa.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
        <varlistentry id="libxatracker">
        <term><filename class='libraryfile'>libxatracker.so</filename></term>
        <listitem>
          <para>est la bibliothèque d'accélération de Xorg Gallium3D.</para>
          <indexterm zone="mesalib libxatracker">
            <primary sortas="c-libxatracker">libxatracker.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
     </variablelist>
  </sect2>
</sect1>
