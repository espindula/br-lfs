<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  <!ENTITY mesalib-download-http " ">
  <!ENTITY mesalib-download-ftp  "ftp://ftp.freedesktop.org/pub/mesa/&mesalib-version;/MesaLib-&mesalib-version;.tar.bz2">
  <!ENTITY mesalib-md5sum        "443a2a352667294b53d56cb1a74114e9">
  <!ENTITY mesalib-size          "5.9 Mo">
  <!ENTITY mesalib-buildsize     "335 Mo">
  <!ENTITY mesalib-time          "4.7 SBU">
  <!ENTITY glu-download-http " ">
  <!ENTITY glu-download-ftp  "ftp://ftp.freedesktop.org/pub/mesa/glu/glu-&glu-version;.tar.bz2">
  <!ENTITY glu-md5sum        "be9249132ff49275461cf92039083030">
  <!ENTITY glu-size          "484 Ko">
  <!ENTITY glu-buildsize     "13 Mo">
  <!ENTITY glu-time          "0.2 SBU">
]>
<sect1 id="mesalib" xreflabel="MesaLib-&mesalib-version;">
  <?dbhtml filename="mesalib.html"?>
  <sect1info>
    <othername>$LastChangedBy&nbsp;: bdubbs $</othername>
    <date>$Date&nbsp;: 2013-03-06 04:05:17 +0100 (Wed, 06 Mar 2013) $</date>
  </sect1info>
  <title>MesaLib-&mesalib-version;</title>
  <indexterm zone="mesalib">
    <primary sortas="a-MesaLib">MesaLib</primary>
  </indexterm>
  <sect2 role="package">
    <title>Introduction à MesaLib</title>
    <para><application>Mesa</application> est une bibliothèque graphique 
    compatible OpenGL 3D.</para>
    &lfs74_checked;
    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&mesalib-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&mesalib-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &mesalib-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;:
        &mesalib-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;:
        &mesalib-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;:
        &mesalib-time;</para>
      </listitem>
    </itemizedlist>
    <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Correctif requis: 
        Téléchargement (HTTP) de GLU: <ulink url="&glu-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP) de GLU: <ulink url="&glu-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5 du téléchargement de GLU: &glu-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement de GLU: &glu-size;
       </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis de GLU: &glu-buildsize;
        </para>
      </listitem>
      <listitem>
       <para>
          Estimation du temps de construction de GLU: &glu-time;
       </para>
      </listitem>
    </itemizedlist>
    <bridgehead renderas="sect3">Correctifs supplémentaires</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Correctif requis:
          <ulink url="&patch-root;/MesaLib-&mesalib-version;-llvm_fixes-1.patch"/>
        </para>
      </listitem>
      <listitem>
        <para>
            Correctif recommandé&nbsp;:
         <ulink url="&patch-root;/MesaLib-&mesalib-version;-add_xdemos-1.patch"/>
          (Nécessaire pour tester l'installation de Xorg par les instructions de BLFS).
       </para>
      </listitem>
    </itemizedlist>
   <bridgehead renderas="sect3">Dépendances de MesaLib</bridgehead>
    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
      <xref linkend="expat"/>,
      <xref linkend="libdrm"/>,
      <xref linkend="libxml2"/>,
      <xref linkend="makedepend"/> et,
      <xref linkend="xorg7-lib"/>
    </para>
   <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="libvdpau"/> (pour construire les pilotes VDPAU) et
      <xref linkend="llvm"/>
   </para>
    <bridgehead renderas="sect4">Facultative</bridgehead>
    <para role="optional">
      <ulink url="http://wayland.freedesktop.org/">Wayland</ulink>
    </para>
     <warning>
      <para>
        Les instructions qui suivent considèrent que <application>LLVM</application>
        est installé. vous devrez modifier les instructions si vous choisissez de ne pas l'installer
        Merci de noter que 
       <application>LLVM</application> et <emphasis>requis</emphasis> pour les pilotes 3D
        Radeon.
      </para>
    </warning>
    <note>
      <para>Le module <application>Python</application> <application>libxml2</application>
      doit avoir été construit pendant l'installation de <application>libxml2</application>
     ou alors la construction de <application>MesaLib</application> échouera.</para>
    </note>
    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/mesalib"/></para>
  </sect2>
  <sect2 role="installation">
    <title>Installation de MesaLib</title>
    <note><para>Sans autres paquets, l'archive
    <filename>MesaLib-&mesalib-version;.tar.bz2</filename>
    sera extraite dans le repertoire
    <filename class="directory">Mesa-&mesalib-version;</filename>.</para></note>
    <para>
      Si vous avez téléchargé le correctif recommandé, appliquez le en lançant les commandes suivantes:
    </para>
<screen>
<userinput>patch -Np1 -i ../MesaLib-&mesalib-version;-add_xdemos-1.patch</userinput>
</screen>
    <para>
     Installez <application>MesaLib</application> en lançant les commandes
    suivantes&nbsp;:</para>
<screen>
<userinput>patch -Np1 -i ../MesaLib-&mesalib-version;-llvm_fixes-1.patch &amp;&amp;
sed -i "/LLVM_VERSION_INT/s:-ne:-lt:" configure.ac &amp;&amp;
autoreconf -fi &amp;&amp;
./configure CFLAGS="-O2" CXXFLAGS="-O2"    \
            --prefix=/usr                  \
            --sysconfdir=/etc              \
            --enable-texture-float         \
            --enable-gles1                 \
            --enable-gles2                 \
            --enable-openvg                \
            --enable-osmesa                \
            --enable-xa                    \
            --enable-gbm                   \
            --enable-gallium-egl           \
            --enable-gallium-gbm           \
            --enable-glx-tls               \
            --with-llvm-shared-libs        \
            --with-egl-platforms="drm,x11" \
            --with-gallium-drivers="nouveau,r300,r600,radeonsi,svga,swrast" &amp;&amp;
make</userinput>
</screen>
    <para>
      Si vous avez appliqué le correctif recommandé, construisez les programmes de démo en lançant la commande suivante:
    </para>
<screen>
<userinput>make -C xdemos DEMOS_PREFIX=/usr</userinput>
</screen>
    <para>
        Ce paquet n'est pas fourni avec une suite de tests.</para>
    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>
<screen role="root">
<userinput>make install &amp;&amp;
install -v -m755 lib/swrast_dri.so /usr/lib/dri/swrast_dri.so</userinput>
</screen>
    <para>
      Si vous avez construit les programmes de démo, installez les en lançant la commande suivante en tant qu'utilisateur
    <systemitem class="username">root</systemitem>&nbsp;:</para>
<screen role="root">
<userinput>make -C xdemos DEMOS_PREFIX=/usr install</userinput>
</screen>
    <para>
     Si vous le souhaitez, installez les documentations facultatives en lançant les commandes suivantes en tant qu'utilisateur
      <systemitem class="username">root</systemitem>&nbsp;:
    </para>
<screen role="root">
<userinput>install -v -dm755 /usr/share/doc/MesaLib-&mesalib-version; &amp;&amp;
cp -rfv docs/* /usr/share/doc/MesaLib-&mesalib-version;</userinput>
</screen>
  </sect2>
  <sect2 role="installation">
    <title>Installation de GLU</title>
    <para>
      Installez <application>GLU</application> en lançant les commandes suivantes:
     </para>      
<screen>
<userinput>./configure --prefix=/usr --disable-static &amp;&amp;
make</userinput>
</screen>
     <para>
      Ce paquet n'a pas de suite de tests.
    </para>
    <para>
      Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:
    </para>
<screen role="root">
<userinput>make install</userinput>
</screen>
  </sect2>
  <sect2 role="commands">
    <title>Explications des commandes</title>
     <para>
     <command>sed -i "..."</command>: Ce sed corrige la construction avec
      <application>LLVM</application> 3.3. Merci de noter que
      R600 LLVM Compiler et le pilote Gallium LLVMPipe sont actuellement
      cassé avec <application>LLVM</application> 3.3.
    </para>
    <para>
   <parameter>CFLAGS="-O2" CXXFLAGS="-O2"</parameter>&nbsp;: Par défaut,
      <application>Autoconf</application> initialise CFLAGS et CXXFLAGS à
      "-g -O2". Ce qui fait que les binaires et les bibliothèques sont construits
      avec les symboles de déboguage ce qui fait qu'ils sont plus lourd. Ecrasez
      les drapeaux par défauts pour omettre le drapeau -g du compilateur pour avoir au final des
      bibliothèques plus légeres.
    </para>
     <para>
      <option>--enable-texture-float</option>&nbsp;: Ce paramètre active les
      textures et les tampons d'affichage de points flottants. Merci de consulter
      <filename>docs/patents.txt</filename> pour voir s un problème légal existe
      en cas d'utilisation de cette fonctionnalité.
    </para>
    <para>
      <option>--enable-gles1</option>&nbsp;: Ce paramètre active le support
      de l'API d'OpenGL ES 1.x.
    </para>
    <para>
      <option>--enable-gles2</option>&nbsp;: Ce paramètre active le support de
      l'API d'OpenGL ES 2.x.
    </para>
 
    <para>
      <option>--enable-openvg</option>&nbsp;: Ce paramètre active le support de
      l'API d'OpenVG.
    </para>
    <para>
      <option>--enable-osmesa</option>&nbsp;: Ce paramètre active la construction
      de la bibliothèque <filename class="libraryfile">libOSMesa</filename>.
    </para>
    <para>
       <option>--enable-xa</option>&nbsp;: Ce paramètre active la construction de
      l'API d'accélération XA X (Requise pour le pilote 3D de VMware).
    </para>
  <para>
     <option>--enable-gbm</option>&nbsp;: Ce paramètre active la construction de
      la bibliothèque de <application>Mesa</application> Graphics Buffer Manager.
   </para>
  <para>
     <option>--enable-gallium-egl</option>&nbsp;: Ce paramètre active le tracker facultatif
      de EGL pour Gallium.
   </para>
      <para>
      <option>--enable-gallium-gbm</option>&nbsp;: Ce paramètre active le tracker facultatif
      de GBM pour Gallium.
    </para>
    <para>
      <option>--enable-glx-tls</option>&nbsp;: Ce paramètre active le support
      TLS ((Thread Local Storage) dans GLX.
    </para>
     <para>
      <option>--with-llvm-shared-libs</option>&nbsp;: Ce paramètre est utilisé pour que les pilotes
      Gallium soient liés à la bibliothèque
      <application>LLVM</application> au lieu d'utiliser la statique.
      A supprimer si vous n'installez pas <xref linkend="llvm"/>.
    </para>
    <para>
      <parameter>--with-egl-platforms="..."</parameter>&nbsp;: Ce paramètre contrôle pour quel plate-forme
      EGL doit être construit. Les plate-formes disponibles sont drm, x11 et wayland.
    </para>
    <para>
      <parameter>--with-gallium-drivers="..."</parameter>&nbsp;: Ce paramètre
      contrôle quels sont les pilotes Gallium qui doivent être construits. Les pilotes disponibles
      sont&nbsp;!
      i915, nouveau, r300, r600, radeonsi, svga et swrast. Vous devez effacer
      r300, r600 de la liste si vous n'installez pas
       <xref linkend="llvm"/>.
    </para>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/static-libraries.xml"/>
  </sect2>
  <sect2 role="content">
    <title>Contenu</title>
    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>
      <seglistitem>
        <seg>
          glxgears et glxinfo
        </seg>
        <seg>
          libdricore&mesalib-version;.so, libEGL.so, libgbm.so, libglapi.so,
          libGLESv1_CM.so, libGLESv2.so, libGL.so, libGLU.so,
          libllvmradeon&mesalib-version;.so, libOpenVG.so, libOSMesa.so et
          libxatracker.so
        </seg>
        <seg>
          $XORG_PREFIX/include/EGL,
          $XORG_PREFIX/include/GLES,
          $XORG_PREFIX/include/GLES2,
          $XORG_PREFIX/include/GLES3,
          $XORG_PREFIX/include/KHR,
          $XORG_PREFIX/include/VG,
          $XORG_PREFIX/lib/dri,
          $XORG_PREFIX/lib/egl,
         $XORG_PREFIX/lib/gallium-pipe et
          $XORG_PREFIX/lib/gbm
        </seg>
      </seglistitem>
    </segmentedlist>
    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      <varlistentry id="glxgears">
        <term><command>glxgears</command></term>
        <listitem>
          <para>est une démo GL utile pour dépanner des problèmes graphiques.</para>
          <indexterm zone="mesalib glxgears">
            <primary sortas="b-glxgears">glxgears</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="glxinfo">
        <term><command>glxinfo</command></term>
        <listitem>
          <para>est un programme de diagnostique affichant des informations
          sur le matériel graphique et les bibliothèques GL installées.</para>
          <indexterm zone="mesalib glxinfo">
            <primary sortas="b-glxinfo">glxinfo</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libdricore">
        <term><filename class="libraryfile">libdricore&mesalib-version;.so</filename></term>
        <listitem>
          <para>
            contient les routines courantes DRI utilisées par les pilotes DRI de <application>Mesa</application>.
          </para>
          <indexterm zone="mesalib libdricore">
            <primary sortas="c-libdricore">libdricore&mesalib-version;.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libEGL">
        <term><filename class='libraryfile'>libEGL.so</filename></term>
        <listitem>
          <para>fournit nativement un interface de plate-forme graphique qui est définie
          avec les spécifications EGL-1.4.</para>
          <indexterm zone="mesalib libEGL">
            <primary sortas="c-libGL">libEGL.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libgbm">
        <term><filename class="libraryfile">libgbm.so</filename></term>
        <listitem>
          <para>
            est la bibliothèque de gestion du tampon graphique de <application>Mesa</application>.
          </para>
          <indexterm zone="mesalib libgbm">
            <primary sortas="c-libgbm">libgbm.so</primary>
          </indexterm>
       </listitem>
      </varlistentry>
      <varlistentry id="libGLESv1_CM">
        <term><filename class="libraryfile">libGLESv1_CM.so</filename></term>
        <listitem>
          <para>
           est la bibliothèque  OpenGL ES 1.1 de <application>Mesa</application>.
          </para>
          <indexterm zone="mesalib libGLESv1_CM">
            <primary sortas="c-libGLESv1_CM">libGLESv1_CM.so</primary>
         </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libGLES2">
        <term><filename class="libraryfile">libGLES2.so</filename></term>
       <listitem>
          <para>
            est la bibliothèque  OpenGL ES 2.0 de <application>Mesa</application>.
         </para>
          <indexterm zone="mesalib libGLES2">
            <primary sortas="c-libGLES2">libGLES2.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libGL">
        <term><filename class='libraryfile'>libGL.so</filename></term>
        <listitem>
          <para>est la bibliothèque principale OpenGL de <application>Mesa</application> .</para>
          <indexterm zone="mesalib libGL">
            <primary sortas="c-libGL">libGL.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libGLU">
        <term><filename class='libraryfile'>libGLU.so</filename></term>
        <listitem>
          <para>est la bibliothèque de l'outil OpenGL de <application>Mesa</application>.</para>
          <indexterm zone="mesalib libGLU">
            <primary sortas="c-libGLU">libGLU.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libOpenVG">
        <term><filename class="libraryfile">libOpenVG.so</filename></term>
        <listitem>
          <para>
            est la bibliothèque OpenVG 1.0 de <application>Mesa</application>.
          </para>
         <indexterm zone="mesalib libOpenVG">
            <primary sortas="c-libOpenVG">libOpenVG.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libOSMesa">
        <term><filename class="libraryfile">libOSMesa.so</filename></term>
        <listitem>
          <para>
            est la bibliothèque de rendu hors-ligne de <application>Mesa</application>.
         </para>
          <indexterm zone="mesalib libOSMesa">
            <primary sortas="c-libOSMesa">libOSMesa.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
        <varlistentry id="libxatracker">
        <term><filename class='libraryfile'>libxatracker.so</filename></term>
        <listitem>
          <para>est la bibliothèque d'accélération de Xorg Gallium3D.</para>
          <indexterm zone="mesalib libxatracker">
            <primary sortas="c-libxatracker">libxatracker.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
     </variablelist>
  </sect2>
</sect1>
