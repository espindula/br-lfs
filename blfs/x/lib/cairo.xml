<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY cairo-download-http "http://cairographics.org/releases/cairo-&cairo-version;.tar.xz">
  <!ENTITY cairo-download-ftp  " ">
  <!ENTITY cairo-md5sum        "87649eb75789739d517c743e94879e51">
  <!ENTITY cairo-size          "41 Mio">
  <!ENTITY cairo-buildsize     "178 Mio (ajouter 270 Mio pour exécuter la suite de tests)">
  <!ENTITY cairo-time          "1.1 SBU (ajouter 2 SBU pour exécuter la suite de tests)">

]>

<sect1 id="cairo" xreflabel="cairo-&cairo-version;">
  <?dbhtml filename="cairo.html"?>

  <sect1info>
    <othername>$LastChangedBy&nbsp;: ken $</othername>
    <date>$Date&nbsp;: 2012-06-09 01:56:43 +0200 (Sat, 09 Jun 2012) $</date>
  </sect1info>

  <title>cairo-&cairo-version;</title>

  <indexterm zone="cairo">
    <primary sortas="a-cairo">cairo</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à Cairo</title>

    <para><application>Cairo</application> est une bibliothèque graphique2D 
    avec un support de plusieurs périphériques de sortie. Les cibles de sortie
    actuellement supportées incluent le système <application>X</application> 
    Window, win32, les tampons image, PostScript, PDF et SVG. Des fondements
    expérimentaux incluent le fichier de sortie OpenGL, Quartz et 
    XCB. <application>Cairo</application> est conçu pour produire une sortie cohérente sur tous les médias de
    sortie, tout en tirant parti de l'accélération matérielle si elle est
    disponible (à travers par exemple l'extension X Render). L'API de
    <application>Cairo</application> offre des opérations ressemblant au
    dessin d'opérateurs de PostScript et de PDF. Les opérations dans 
    <application>cairo</application> incluent le découpage et le remplissage de
    splines Bézier cubiques, la transformation et la décomposition d'images 
    translucides, et l'affichage de texte non aliassé. Toutes les opérations
    de dessin peuvent être transformées par une <ulink 
    url="http://en.wikipedia.org/wiki/Affine_transformation">transformation 
    affine</ulink> (échelle, rotation, dépouillement, etc.).</para>

    &lfs71_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&cairo-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&cairo-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &cairo-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &cairo-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &cairo-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &cairo-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Correctif requis (si vous prévoyez de compiler un des produits Mozilla)&nbsp;:
          <ulink url="&patch-root;/cairo-&cairo-version;-expose-snapshot-1.patch"/>
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de Cairo</bridgehead>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
    <xref linkend="pixman"/> et
    <xref linkend="glib2"/> 
    </para>

    <bridgehead renderas="sect4">Recommandées (Requises pour la construction de GTK+) </bridgehead>
    <para role="recommended">
      <xref linkend="fontconfig"/>,
      <xref linkend="libpng"/> (Si vous voulez construire 
      <application>Cairo</application> sans <application>Libpng</application>
      vous devez ajouter --disable-png --disable-svg dans les options de configuration
      et supprimer --enable-tee) et
      <xref linkend="xorg7-lib"/>.
   </para>
 
    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional"><xref linkend="cogl"/>,
    <ulink url="http://www.directfb.org/">DirectFB</ulink>,
      <xref linkend="gs"/> (pour tester le fondement postscript),
      <xref linkend="gtk2"/> (pour tester le fondement PDF),
    <xref linkend="gtk-doc"/>,
    <xref linkend="libdrm"/>,
      <xref linkend="librsvg"/> (pour tester le fondement SVG),
      <ulink url="http://libspectre.freedesktop.org">libspectre</ulink> (pour 
      tester le fondement PDF),
    <xref linkend="mesalib"/>,
      <xref linkend="poppler"/> (pour tester le fondement PDF),
    <xref linkend="qt4"/>,
    <ulink url="http://code.google.com/p/skia/">Skia</ulink> et
    <ulink url="http://www.valgrind.org">Valgrind</ulink>.</para>

    <note><para>Il y a une dépendance circulaire avec les paquets <application>Gtk 2</application>,
    <application>Librsvg</application> et
        <application>Poppler</application>. Comme la suite de test est actuellement peu fiable,
        il est mieux de simplement l'éviter à ce point.</para></note>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/cairo"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Cairo</title>

    <para>Installez <application>Cairo</application> en lançant les commandes
    suivantes&nbsp;:</para>

<screen><userinput>sed -i 's#check-plt.sh ##' src/Makefile.in &amp;&amp;
patch -p1 &lt; ../cairo-&cairo-version;-expose-snapshot-1.patch &amp;&amp;
./configure --prefix=/usr --disable-static --enable-tee --enable-xcb &amp;&amp;
make</userinput></screen>
    
    <para>Remarquez que les tests mettent beaucoup de temps à s'exécuter et 
    beaucoup échouent pour des raisons
    inconnues et provoquent un kernel panic. <!-- I suspect that
      the panic was due to a bug in the xf86-video-ati driver but I can't be
      sure as the system locked up hard. cairo-1.12.0 has exposed bugs in other
      parts of Xorg https://bugs.freedesktop.org/show_bug.cgi?id=47266 Andy
      2012-04-22 -->Si vous voulez exécuter les tests,
    lancez&nbsp;: <command>make -k check</command>.</para>

    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>make install</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para>
      <command>sed -i 's#check-plt.sh ##' src/Makefile.in</command>&nbsp;: Ce
      sed désactive le lancement d'un test connu pour échouer avec le correctif
      expose-snapshot.
    </para>

    <para>
      <command>patch -p1 &lt;
      ../cairo-&cairo-version;-expose-snapshot-1.patch</command>&nbsp;: Ce
     correctif offre des fonctions sur lesquelles <application>Firefox</application>
      s'appuie. L'application de ce correctif permet à <application>Firefox</application>
      d'utiliser <application>Cairo</application> installé sur le système.
    </para>

    <para><option>--enable-tee</option>&nbsp;: Ceci est utilisé par
    <application>Firefox</application>. Si vous n'activez pas la fondation de
    surface tee de Cairo, vous pourrez construire <application>Firefox</application> avec
    <option>--enable-system-cairo</option>.</para>

    <para><option>--enable-gl</option>&nbsp;: Active la fondation OpenGL de
    <application>Cairo</application>.</para>

    <para><option>--enable-xcb</option>&nbsp;: Active la fondation 
    libxcb de <application>Cairo</application>.</para>

    <para><option>--enable-vg</option>&nbsp;: Active la fondation
    <ulink url="http://en.wikipedia.org/wiki/OpenVG">OpenVG</ulink> de
    <application>Cairo</application> (exige 
    l'installation de <xref linkend="mesalib"/>, configuré avec
    --enable-gallium-egl et --enable-openvg).</para>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/static-libraries.xml"/>

      <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../xincludes/gtk-doc-rebuild.xml"/>
    </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>cairo-sphinx et cairo-trace</seg>
        <seg>libcairo.so, libcairo-gobject.so et
          libcairo-script-interpreter.so</seg>
        <seg>/usr/include/cairo, /usr/lib/cairo et
        /usr/share/gtk-doc/html/cairo</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="cairo-trace">
        <term><command>cairo-trace</command></term>
        <listitem>
          <para>génère un journal de tous les appels d'une application à
          <application>Cairo</application>.</para>
          <indexterm zone="cairo cairo-trace">
            <primary sortas="b-cairo-trace">cairo-trace</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libcairo">
        <term><filename class='libraryfile'>libcairo.so</filename></term>
        <listitem>
          <para>contient les fonctions graphiques 2D exigées pour afficher sur
          des cibles de sortie variées.</para>
          <indexterm zone="cairo libcairo">
            <primary sortas="c-libcairo">libcairo.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

     <varlistentry id="libcairo-gobject">
         <term><filename class='libraryfile'>libcairo-gobject.so</filename></term>
        <listitem>
          <para>contient des fonctions qui intègrent 
          <application>Cairo</application> avec le système de type GObject
          de <xref linkend="glib2"/>.</para>
          <indexterm zone="cairo libcairo-gobject">
            <primary sortas="c-libcairo-gobject">libcairo-gobject.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libcairo-script-interpreter">
        <term><filename class='libraryfile'>libcairo-script-interpreter.so</filename></term>
        <listitem>
          <para>contient les fonctions de l'interpréteur de script pour
          exécuter et manipuler des traces d'exécution de
          <application>Cairo</application>.</para>
          <indexterm zone="cairo libcairo-script-interpreter">
            <primary sortas="c-libcairo-script-interpreter">libcairo-script-interpreter.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
