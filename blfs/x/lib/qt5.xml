<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY qt5-major "5.1">
  <!ENTITY qt5-url   "http://download.qt-project.org/official_releases/qt/&qt5-major;/&qt5-version;/single">

  <!ENTITY qt5-download-http "&qt5-url;/qt-everywhere-opensource-src-&qt5-version;.tar.xz">
  <!ENTITY qt5-download-ftp  " ">
  <!ENTITY qt5-md5sum        "44a507beebef73eb364b5a2ec7bbe090">
  <!ENTITY qt5-size          "169 Mo">
  <!ENTITY qt5-buildsize     "2.5 GB">
  <!ENTITY qt5-time          "50 SBU">
]>

<sect1 id="qt5" xreflabel="Qt-&qt5-version;">
  <?dbhtml filename="qt5.html" ?>

  <sect1info>
    <othername>$LastChangedBy: krejzi $</othername>
    <date>$Date: 2013-08-11 04:12:50 +0200 (dim. 11 août 2013) $</date>
  </sect1info>

  <title>Qt-&qt5-version;</title>

  <indexterm zone="qt5">
    <primary sortas="a-Qt">Qt</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à Qt</title>

    <para>
      <application>Qt</application> is a cross-platform application
      framework that is widely used for developing application software
      with a graphical user interface (GUI) (in which cases Qt is classified
      as a widget toolkit), et also used for developing non-GUI programs such
      as command-line tools et consoles for servers. One of the major users
      of <application>Qt</application> is <application>KDE</application>.
    </para>

    &lfs73_checked;

    <bridgehead renderas="sect3">Information sur le paquet </bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP) : <ulink url="&qt5-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP) : <ulink url="&qt5-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5 du téléchargement : &qt5-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement : &qt5-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis : &qt5-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction : &qt5-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Additional Téléchargements</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Required patch:
          <ulink url="&patch-root;/qt-&qt5-version;-bison_fixes-1.patch"/>
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de Qt</bridgehead>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
      <xref linkend="alsa-lib"/>,
      <xref linkend="mesalib"/>,
      <xref linkend="xcb-util-image"/>,
      <xref linkend="xcb-util-keysyms"/>,
      <xref linkend="xcb-util-renderutil"/> et
      <xref linkend="xcb-util-wm"/>
    </para>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="cacerts"/>,
      <xref linkend="cups"/>,
      <xref linkend="dbus"/>,
      <xref linkend="glib2"/>,
      <xref linkend="gst-plugins-base"/>,
      <xref linkend="icu"/>,
      <xref linkend="libjpeg"/>,
      <xref linkend="libpng"/>,
      <xref linkend="libtiff"/>,
      <xref linkend="openssl"/>,
      <xref linkend="pcre"/> et
      <xref linkend="sqlite"/>
    </para>

    <bridgehead renderas="sect4">Facultative</bridgehead>
    <para role="optional">
      <xref linkend="gst10-plugins-base"/> (QtWebKit HTML5 Video Support),
      <xref linkend="gtk2"/> (GTK+ Theme Support),
      <ulink url="http://xkbcommon.org/">libxkbcommon</ulink>,
      <xref linkend="mysql"/>,
      <xref linkend="postgresql"/>,
      <xref linkend="pulseaudio"/> et
      <xref linkend="unixodbc"/>
    </para>

    <para condition="html" role="usernotes">Notes utilisateur :
      <ulink url="&blfs-wiki;/qt5"/>
    </para>
  </sect2>

  <sect2 role="installation">
    <title>Installation de Qt</title>

   <warning>
      <para>
        If you did not install some of the recommended dependencies, examine
        <command>./configure --help</command> output to check how to disable
        them or use internal versions bundled in the source tarball.
      </para>
    </warning>

    <note>
      <para>
        The build time et space required for the full
        <application>Qt</application> is quite long. The instructions below
        do not build the tests et examples. Removing the
        <parameter>-nomake</parameter> lines will create a complete build.
      </para>
    </note>

    <para>
      Install <application>Qt</application> by running the
      following  
    </para>

<screen><userinput>patch -Np1 -i ../qt-&qt5-version;-bison_fixes-1.patch &amp;&amp;
./configure -confirm-license \
            -opensource \
            -prefix /usr \
            -bindir /usr/lib/qt5/bin \
            -headerdir /usr/include/qt5 \
            -archdatadir /usr/lib/qt5 \
            -datadir /usr/share/qt5 \
            -translationdir /usr/share/qt5/translations \
            -sysconfdir /etc/xdg \
            -docdir /usr/share/doc/qt5 \
            -examplesdir /usr/share/doc/qt5/examples \
            -dbus-linked \
            -openssl-linked \
            -system-sqlite \
            -plugin-sql-sqlite \
            -no-nis \
            -nomake examples \
            -nomake tests \
            -optimized-qmake &amp;&amp;
make</userinput></screen>

    <para>
      Remove references to the build directory from pkg-confg
      files by running the following command:
    </para>

<screen><userinput>find . -name "*.pc" -exec perl -pi -e "s, -L$PWD/?\S+,,g" {} \;</userinput></screen>

    <para>
      This package does not come with a test suite.
    </para>

    <para>
      Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem> :
    </para>

<screen role="root"><userinput>make install &amp;&amp;
install -v -Dm644 qttools/src/assistant/assistant/images/assistant-128.png \
                  /usr/share/pixmaps/assistant-qt5.png &amp;&amp;
install -v -Dm644 qttools/src/designer/src/designer/images/designer.png \
                  /usr/share/pixmaps/designer-qt5.png &amp;&amp;
install -v -Dm644 qttools/src/linguist/linguist/images/icons/linguist-128-32.png \
                  /usr/share/pixmaps/linguist-qt5.png &amp;&amp;
install -v -Dm644 qttools/src/qdbus/qdbusviewer/images/qdbusviewer-128.png \
                  /usr/share/pixmaps/qdbusviewer-qt5.png</userinput></screen>

    <para>
      Remove references to the build directory from installed files by
      running the following commands as the
      <systemitem class="username">root</systemitem> user:
    </para>

<screen role="root"><userinput>sed -i -e "s:$PWD/qtbase:/usr/lib/qt5:g" \
    /usr/lib/qt5/mkspecs/modules/qt_lib_bootstrap.pri &amp;&amp;
find /usr/lib/*.prl -exec sed -i -e \
     '/^QMAKE_PRL_BUILD_DIR/d;s/\(QMAKE_PRL_LIBS =\).*/\1/' {} \;</userinput></screen>

    <para>
      Symlink the <application>Qt</application> executables into
      <filename class="directory">/usr/bin</filename> by running the
      following commands as the
      <systemitem class="username">root</systemitem> user:
    </para>

<screen role="root"><userinput>for file in /usr/lib/qt5/bin/*
do
  ln -sfv ../lib/qt5/bin/$(basename $file) /usr/bin/$(basename $file)-qt5
done</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explications des commandes</title>

    <para>
      <parameter>-confirm-license</parameter> : Accept license
      without prompting user during configuration.
    </para>

    <para>
      <parameter>-opensource</parameter> : Install the opensource
      version of <application>Qt</application>.
    </para>

    <para><parameter>-release</parameter> :
    This switch disables building with debugging symbols.</para>

    <para>
      <parameter>-nomake tests -nomake examples</parameter> :
      These switches disable building programs that are only of
      interest to a <application>Qt</application> developer.
    </para>

    <para>
      <parameter>-system-sqlite</parameter> : This switch enables use
      the system version of <application>SQLite</application>.
    </para>

    <para>
      <parameter>-no-nis</parameter> : This switch disables support
      for Network Information Service (NIS) which has been
      deprecated in recent versions of <application>Glibc</application>.
    </para>

    <para>
      <parameter>-dbus-linkend -openssl-linkend</parameter> : These
      switches enable explicit linking of the
      <application>D-Bus</application> et
      <application>OpenSSL</application> libraries into
      <application>Qt</application> libraries instead of
      <command>dlopen()</command>-ing them.
    </para>

    <para>
      <parameter>-plugin-sql-<replaceable>&lt;driver&gt;</replaceable></parameter> :
      These switches enable SQL support in the
      <application>Qt</application> libraries. Available drivers are:
      ibase, mysql, psql, sqlite et odbc.
    </para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuring Qt</title>

    <sect3 id="qt5-config">
      <title>Configuration Information</title>

      <para>
        Create the menu entries for installed applications.
        As the <systemitem class="username">root</systemitem> user:
      </para>

<screen role="root"><userinput>install -dm755 /usr/share/applications
cat &gt; /usr/share/applications/assistant-qt5.desktop &lt;&lt; "EOF"
<literal>[Desktop Entry]
Name=Qt5 Assistant 
Comment=Shows Qt5 documentation et examples
Exec=assistant-qt5
Icon=assistant-qt5
Terminal=false
Encoding=UTF-8
Type=Application
Categories=Qt;Development;Documentation;</literal>
EOF
cat &gt; /usr/share/applications/designer-qt5.desktop &lt;&lt; "EOF"
<literal>[Desktop Entry]
Name=Qt5 Designer
GenericName=Interface Designer
Comment=Design GUIs for Qt5 applications
Exec=designer-qt5
Icon=designer-qt5
MimeType=application/x-designer;
Terminal=false
Encoding=UTF-8
Type=Application
Categories=Qt;Development;</literal>
EOF
cat &gt; /usr/share/applications/linguist-qt5.desktop &lt;&lt; "EOF"
<literal>[Desktop Entry]
Name=Qt5 Linguist
Comment=Add translations to Qt5 applications
Exec=linguist-qt5
Icon=linguist-qt5
MimeType=text/vnd.trolltech.linguist;application/x-linguist;
Terminal=false
Encoding=UTF-8
Type=Application
Categories=Qt;Development;</literal>
EOF
cat &gt; /usr/share/applications/qdbusviewer-qt5.desktop &lt;&lt; "EOF"
<literal>[Desktop Entry]
Name=Qt5 QDbusViewer 
GenericName=D-Bus Debugger
Comment=Debug D-Bus applications
Exec=qdbusviewer-qt5
Icon=qdbusviewer-qt5
Terminal=false
Encoding=UTF-8
Type=Application
Categories=Qt;Development;Debugger;</literal>
EOF</userinput></screen>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>
          assistant-qt5, designer-qt5, lconvert-qt5, linguist-qt5, lrelease-qt5,
          lupdate-qt5, moc-qt5, pixeltool-qt5, qcollectiongenerator-qt5,
          qdbuscpp2xml-qt5, qdbus-qt5, qdbusviewer-qt5, qdbusxml2cpp-qt5, qdoc-qt5,
          qhelpconverter-qt5, qhelpgenerator-qt5, qmake-qt5, qml1plugindump-qt5,
          qmlbundle-qt5, qmlmin-qt5, qmlplugindump-qt5, qmlprofiler-qt5, qmlscene-qt5,
          qmltestrunner-qt5, qmlviewer-qt5, rcc-qt5, syncqt.pl-qt5, uic-qt5,
          xmlpatterns-qt5 et xmlpatternsvalidator-qt5
        </seg>
        <seg>
          libqgsttools_p.so, libQt5Bootstrap.a, libQt5CLucene.so, libQt5Concurrent.so,
          libQt5Core.so, libQt5DBus.so, libQt5Declarative.so, libQt5DesignerComponents.so,
          libQt5Designer.so, libQt5Gui.so, libQt5Help.so, libQt5MultimediaQuick_p.so,
          libQt5Multimedia.so, libQt5MultimediaWidgets.so, libQt5Network.so,
          libQt5OpenGLExtensions.a, libQt5OpenGL.so, libQt5PlatformSupport.a,
          libQt5PrintSupport.so, libQt5QmlDevTools.a, libQt5Qml.so, libQt5QuickParticles.so,
          libQt5Quick.so, libQt5QuickTest.so, libQt5Script.so, libQt5ScriptTools.so,
          libQt5Sensors.so, libQt5SerialPort.so, libQt5Sql.so, libQt5Svg.so, libQt5Test.so,
          libQt5UiTools.a, libQt5V8.so, libQt5WebKit.so, libQt5WebKitWidgets.so,
          libQt5Widgets.so, libQt5X11Extras.so, libQt5XmlPatterns.so et libQt5Xml.so
        </seg>
        <seg>
          /usr/include/qt5,
          /usr/lib/qt5,
          /usr/share/doc/qt5 et
          /usr/share/qt5
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Description courte</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="assistant-qt5">
        <term><command>assistant-qt5</command></term>
        <listitem>
          <para>
            is a tool for presenting on-line documentation.
          </para>
          <indexterm zone="qt5 assistant-qt5">
            <primary sortas="b-assistant-qt5">assistant-qt5</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="designer-qt5">
        <term><command>designer-qt5</command></term>
        <listitem>
          <para>
            is a full-fledged GUI builder. It includes
            powerful features such as preview mode, automatic widget
            layout, support for custom widgets, et an advanced
            property editor.
          </para>
          <indexterm zone="qt5 designer-qt5">
            <primary sortas="b-designer-qt5">designer-qt5</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="linguist-qt5">
        <term><command>linguist-qt5</command></term>
        <listitem>
          <para>
            provides support for translating applications into
            local languages.
          </para>
          <indexterm zone="qt5 linguist-qt5">
            <primary sortas="b-linguist-qt5">linguist-qt5</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="lrelease-qt5">
        <term><command>lrelease-qt5</command></term>
        <listitem>
          <para>
            is a simple command line tool. It reads a Qt project
            file et produces message files used by the application.
          </para>
          <indexterm zone="qt5 lrelease-qt5">
            <primary sortas="b-lrelease-qt5">lrelease-qt5</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="lupdate-qt5">
        <term><command>lupdate-qt5</command></term>
        <listitem>
          <para>
            reads a Qt project file, finds the translatable
            strings in the specified source, header et Qt Designer
            interface files, et produces or updates the translation
            files listed in the project file.
          </para>
          <indexterm zone="qt5 lupdate-qt5">
            <primary sortas="b-lupdate-qt5">lupdate-qt5</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="moc-qt5">
        <term><command>moc-qt5</command></term>
        <listitem>
          <para>
            generates Qt meta object support code.
          </para>
          <indexterm zone="qt5 moc-qt5">
            <primary sortas="b-moc-qt5">moc-qt5</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="pixeltool-qt5">
        <term><command>pixeltool-qt5</command></term>
        <listitem>
          <para>
            is a desktop magnifier et as you move your mouse around
            the screen it will show the magnified contents in its window.
          </para>
          <indexterm zone="qt5 pixeltool-qt5">
            <primary sortas="b-pixeltool-qt5">pixeltool-qt5</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qmake-qt5">
        <term><command>qmake-qt5</command></term>
        <listitem>
          <para>
            uses information stored in project files to
            determine what should go in the makefiles it
            generates.
          </para>
          <indexterm zone="qt5 qmake-qt5">
            <primary sortas="b-qmake-qt5">qmake-qt5</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="rcc-qt5">
        <term><command>rcc-qt5</command></term>
        <listitem>
          <para>
            is a resource compiler used in conjunction with designer.
          </para>
          <indexterm zone="qt5 rcc-qt5">
            <primary sortas="b-rcc-qt5">rcc-qt5</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="uic-qt5">
        <term><command>uic-qt5</command></term>
        <listitem>
          <para>
            is a Qt user interface compiler.
          </para>
          <indexterm zone="qt5 uic-qt5">
            <primary sortas="b-uic-qt5">uic-qt5</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
