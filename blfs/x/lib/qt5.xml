<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  
  <!ENTITY qt5-major "5.4">
  <!ENTITY qt5-url   "http://download.qt-project.org/official_releases/qt/&qt5-major;/&qt5-version;/single">
  <!ENTITY qt5-download-http "&qt5-url;/qt-everywhere-opensource-src-&qt5-version;.tar.xz">
  <!ENTITY qt5-download-ftp  " ">
  <!ENTITY qt5-md5sum        "21843b00ecde8956217faab391bc007b">
  <!ENTITY qt5-size          "279 Mo">
  <!ENTITY qt5-buildsize     "6.9 Go (266 Mo installé)">
  <!ENTITY qt5-time          "27 SBU (parallelism=4, without Qt Web Engine), 138 SBU (parallelism=1, with Qt Web Engine)">
]>
<sect1 id="qt5" xreflabel="Qt-&qt5-version;">
  <?dbhtml filename="qt5.html" ?>
  <sect1info>
    <othername>$LastChangedBy: krejzi $</othername>
    <date>$Date: 2013-08-11 04:12:50 +0200 (dim. 11 août 2013) $</date>
  </sect1info>
  <title>Qt-&qt5-version;</title>
  <indexterm zone="qt5">
    <primary sortas="a-Qt">Qt</primary>
  </indexterm>
  <sect2 role="package">
    <title>Introduction  Qt5</title>
    <para>
      <application>Qt5</application> est une boite à outils multi-plate-forme
      qui est largement utilisée pour le développement d'application
      avec une interface graphique (GUI) (dans ce cas  <application>Qt5</application> est classée comme une boite à outils
      de boutons), et est également utilisée pour le développement de programmes
      sans GUI comme est outils en ligne de commande et les consoles pour serveurs.
    </para>
    &lfs77_checked;
    <bridgehead renderas="sect3">Information sur le paquet </bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP) : <ulink url="&qt5-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP) : <ulink url="&qt5-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5 du téléchargement : &qt5-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement : &qt5-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis : &qt5-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction : &qt5-time;
        </para>
      </listitem>
    </itemizedlist>
    <bridgehead renderas="sect3">Dépendances de Qt5</bridgehead>
    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
 <xref linkend="xorg7-lib"/>
    </para>
    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="alsa-lib"/>,
      <xref linkend="cacerts"/>,
      <xref linkend="cups"/>,
      <xref linkend="dbus"/>,
      <xref linkend="glib2"/>,
      <xref linkend="gst-plugins-base"/>,
      <xref linkend="icu"/>,
      <xref linkend="jasper"/>,
      <xref linkend="libjpeg"/>,
      <xref linkend="libmng"/>,
      <xref linkend="libpng"/>,
      <xref linkend="libtiff"/>,
      <xref linkend="libwebp"/>,
      <xref linkend="mesalib"/>,
      <xref linkend="mtdev"/>,
      <xref linkend="openssl"/>,
      <xref linkend="pcre"/>,
      <xref linkend="sqlite"/>,
      <xref linkend="ruby"/> (requis pour QtWebKit),
      <xref linkend="xcb-util-image"/>,
      <xref linkend="xcb-util-keysyms"/>,
      <xref linkend="xcb-util-renderutil"/>, et
      <xref linkend="xcb-util-wm"/>
    </para>
    <bridgehead renderas="sect4">Facultative</bridgehead>
    <para role="optional">
      <xref linkend="geoclue"/>,
      <xref linkend="gst10-plugins-base"/> (Support de QtWebKit HTML5 Video),
      <xref linkend="gtk2"/> (Support de GTK+ Theme),
      <xref linkend="harfbuzz"/>,
      <ulink url="https://code.google.com/p/ibus/">IBus</ulink>,
      <ulink url="http://xkbcommon.org/">libxkbcommon</ulink>,
      <xref linkend="mariadb"/> ou <ulink url="http://www.mysql.com/">MySQL</ulink>,
      <xref linkend="postgresql"/>,
      <xref linkend="pulseaudio"/> et 
      <xref linkend="unixodbc"/>
    </para>
 
  
 <para condition="html" role="usernotes">Notes utilisateur :
      <ulink url="&blfs-wiki;/qt5"/>
    </para>
  </sect2>
<xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
               href="../../xincludes/qt-alternatives.xml"/>
 <sect2 role="installation">
    <title>Installation de Qt5</title>
    <caution>
      <para>
        Si vous n'installez pas certaine des dépendances recommandées, examinez
        la sortie de <command>./configure --help</command> pour vérifier comment
	les désactiver ou utiliser les versions internes livrées avec le paquet
	des sources.
      </para>
     </caution>
      <warning>
     <para>
       Si <application>Qt5</application> doit être réinstallé dans le même répertoire
       qu'une précédente installation,
      lancez les commandes fait par
        <systemitem class="username">root</systemitem>, comme <command>make install</command>,
       depuis une console ou un
      gestionnaire de fenêtres non Qt5. Elle écrase les bibliothèques
      <application>Qt5</application> qui ne devraient pas être utilisées pendant
      le processus d'installation.</para>
      </warning>
     <bridgehead renderas="sect3">Méthode 1: Installation dans /usr</bridgehead>    <para>
      Installez <application>Qt5</application> en lançant les commandes suivantes
    </para>
<screen>
<userinput>export QT5LINK=/usr
./configure -prefix         /usr               \
            -sysconfdir     /etc/xdg           \
            -bindir         /usr/bin           \
            -headerdir      /usr/include/qt5   \
            -archdatadir    /usr/lib/qt5       \
            -datadir        /usr/share/qt5     \
            -docdir         /usr/share/doc/qt5 \
            -translationdir /usr/share/qt5/translations \
            -examplesdir    /usr/share/doc/qt5/examples \
            -confirm-license   \
            -opensource        \
            -dbus-linked       \
            -openssl-linked    \
            -system-sqlite     \
            -no-nis            \
            -skip qtwebengine  \
            -nomake examples   \
            -optimized-qmake   &amp;&amp;
make</userinput>
</screen>
    <para>
      Ce paquet n'a pas de suite de tests.
    </para>
    <para>
      Enlevez les références au répertoire de construction des fichiers  <filename class="extension">.pc</filename>
      en lançant la commande suivante:
    </para>
<screen>
<userinput>find . -name "*.pc" -exec perl -pi -e "s, -L$PWD/?\S+,,g" {} \;</userinput>
</screen>
    <para>
      Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem> :
    </para>
<screen role="root">
<userinput>make install</userinput>
</screen>
    <para>
      Enlevez les références au répertoire de construction des fichiers installés
      en lançant la commande suivante en tant qu'utilisateur
      <systemitem class="username">root</systemitem>:
    </para>
<screen role="root">
<userinput>sed -e "s:$PWD/qtbase:/usr/lib/qt5:g" \
    -i /usr/lib/qt5/mkspecs/modules/qt_lib_bootstrap_private.pri &amp;&amp;
find /usr/lib/lib{qgsttools_p,Qt5*}.prl -exec sed -i -r \
     '/^QMAKE_PRL_BUILD_DIR/d;s/(QMAKE_PRL_LIBS =).*/\1/' {} \;</userinput>
</screen>
 <bridgehead renderas="sect3">Methode 2: Installation dans /opt/qt-&qt5-version;</bridgehead>
    <para>
        Cette partie fournit les instructions d'installation de Qt5
        dans le répertoire <filename class="directory">/opt</filename>.
</para>
<screen>
<userinput>export QT5DIR=/opt/qt-&qt5-version; &amp;&amp;
export QT5LINK=/opt/qt5 &amp;&amp;
./configure -prefix     $QT5DIR  \
            -sysconfdir /etc/xdg \
            -confirm-license     \
            -opensource          \
            -dbus-linked         \
            -openssl-linked      \
            -system-sqlite       \
            -no-nis              \
            -nomake examples     \
            -skip qtwebengine    \
            -optimized-qmake     &amp;&amp;
make</userinput>
</screen>
    <para>
      Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem> :
    </para>
<screen role="root">
<userinput>make install &amp;&amp;
ln -svfn $QT5DIR /opt/qt5</userinput>
</screen>
    <para>
      Enlevez les références au répertoire de construction dans les fichiers
      installés en lançant les commandes suivantes en tant qu'utilisateur
      <systemitem class="username">root</systemitem>:
    </para>
<screen role="root">
<userinput>find $QT5DIR -name qt_lib_bootstrap_private.pri \
   -exec sed -i -e "s:$PWD/qtbase:/$QT5DIR/lib/:g" {} \; &amp;&amp;
find $QT5DIR -name \*.prl \
   -exec sed -i -e '/^QMAKE_PRL_BUILD_DIR/d' {} \;</userinput>
</screen>
    <bridgehead renderas="sect3">Suite pour les deux méthodes</bridgehead>
    <para>
      Pour toutes les méthodes, installez les images et créez les entrées de menu pour les
      applications installées. Soyez certain que la variable <envar>QT5LINK</envar>
      est définie dans l'environnement root et en tant qu'utilisateur
      <systemitem class="username">root</systemitem> :
    </para>
<screen role="root">
<userinput>install -v -dm755 /usr/share/pixmaps/                  &amp;&amp;
install -v -Dm644 qttools/src/assistant/assistant/images/assistant-128.png \
                  /usr/share/pixmaps/assistant-qt5.png &amp;&amp;
install -v -Dm644 qttools/src/designer/src/designer/images/designer.png \
                  /usr/share/pixmaps/designer-qt5.png  &amp;&amp;
install -v -Dm644 qttools/src/linguist/linguist/images/icons/linguist-128-32.png \
                  /usr/share/pixmaps/linguist-qt5.png  &amp;&amp;
install -v -Dm644 qttools/src/qdbus/qdbusviewer/images/qdbusviewer-128.png \
                  /usr/share/pixmaps/qdbusviewer-qt5.png &amp;&amp;
install -dm755 /usr/share/applications &amp;&amp;
cat &gt; /usr/share/applications/assistant-qt5.desktop &lt;&lt; EOF
<literal>[Desktop Entry]
Name=Qt5 Assistant 
Comment=Shows Qt5 documentation and examples
Exec=$QT5LINK/bin/assistant
Icon=assistant-qt5.png
Terminal=false
Encoding=UTF-8
Type=Application
Categories=Qt;Development;Documentation;</literal>
EOF
cat &gt; /usr/share/applications/designer-qt5.desktop &lt;&lt; EOF
<literal>[Desktop Entry]
Name=Qt5 Designer
GenericName=Interface Designer
Comment=Design GUIs for Qt5 applications
Exec=$QT5LINK/bin/designer
Icon=designer-qt5.png
MimeType=application/x-designer;
Terminal=false
Encoding=UTF-8
Type=Application
Categories=Qt;Development;</literal>
EOF
cat &gt; /usr/share/applications/linguist-qt5.desktop &lt;&lt; EOF
<literal>[Desktop Entry]
Name=Qt5 Linguist
Comment=Add translations to Qt5 applications
Exec=$QT5LINK/bin/linguist
Icon=linguist-qt5.png
MimeType=text/vnd.trolltech.linguist;application/x-linguist;
Terminal=false
Encoding=UTF-8
Type=Application
Categories=Qt;Development;</literal>
EOF
cat &gt; /usr/share/applications/qdbusviewer-qt5.desktop &lt;&lt; EOF
<literal>[Desktop Entry]
Name=Qt5 QDbusViewer 
GenericName=D-Bus Debugger
Comment=Debug D-Bus applications
Exec=$QT5LINK/bin/qdbusviewer
Icon=qdbusviewer-qt5.png
Terminal=false
Encoding=UTF-8
Type=Application
Categories=Qt;Development;Debugger;</literal>
EOF</userinput>
</screen>
  </sect2>
  <sect2 role="commands">
    <title>Explications des commandes</title>
    <para>
      <parameter>-confirm-license</parameter> : Acceptez la licence
      sans poser la question à l'utilisateur pendant la configuration.
    </para>
    <para>
      <parameter>-opensource</parameter> : Installez la version opensource
      de <application>Qt5</application>.
    </para>
    <para><parameter>-release</parameter> :
    Ce paramètre désactive la construction avec les symboles de déboguage.</para>
    <para>
      <parameter>-nomake examples</parameter> :
      Ce paramètre désactive la construction des programmes d'exemple inclus dans
      les sources. Enlevez le si vous voulez les construire.
    </para>
    <para>
           <parameter>-system-sqlite</parameter> : Ce paramètre active l'utilisation
      de la version du système de <application>SQLite</application>.
    </para>
    <para>
      <parameter>-no-nis</parameter> : Ce paramètre désactive le support
      pour Network Information Service (NIS) qui est enlevé dans les dernières
      versions de <application>Glibc</application>.
    </para>
    <para>
      <parameter>-dbus-linked -openssl-linked</parameter> : Ces paramètres
      active la liaison explicite des bibliothèques
      <application>D-Bus</application> et
      <application>OpenSSL</application> dans les bibliothèques
      <application>Qt5</application> au lieu de les
      <command>dlopen()</command>-itiser.
    </para>
     <para>
      <parameter>-skip qtwebengine</parameter>: ce paramètre désactive la construction
      du moteur Web Qt. Il n'est pas présentement utilisé par des application. Si c'est option est enlevée, 
      corrigez un problème de construction avec :
<screen>
<userinput>sed -i '$ a !contains(QT_CONFIG, pulseaudio): GYP_CONFIG += use_pulseaudio=0' \
       qtwebengine/src/core/config/desktop_linux.pri</userinput>
</screen>
    </para>
    <para>
      <parameter>-optimized-qmake</parameter>: Ce paramètre active
      la construction du programme optimisé <command>qmake</command>.
    </para>
    <para>
      <option>-system-harfbuzz</option>: Ce paramètre active l'utilisation de la version du système de
       <application>Harfbuzz</application>
      qui corrige quelques problèmes de rendu de police dans les applications
      <application>Qt5</application> mais n'a pas toutes les fonctionnalités que la version incluse a.
    </para>
  </sect2>
  <sect2 role="configuration">
    <title>Configuration de Qt5</title>
    <sect3 id="qt5-config">
      <title>Information de Configuration</title>
      <para>
        Créez les entrées du menu pour les applications installées en lançant
        les commandes suivantes 
        en tant qu'utilisateur <systemitem class="username">root</systemitem>:
      </para>
     <para>
        Si vous avez installé <application>Qt5</application> dans
        <filename class="directory">/usr</filename>, créez une variable d'environnement
        utilisée par certains paquets
        En tant qu'utilisateur <systemitem class="username">root</systemitem>:
      </para>
<screen role="root">
<userinput>cat &gt; /etc/profile.d/qt5.sh &lt;&lt; EOF
<literal># Begin /etc/profile.d/qt5.sh
QT5DIR=/usr
export QT5DIR
# End /etc/profile.d/qt5.sh</literal>
EOF</userinput>
</screen>
      <para>
        Si vous avez installé <application>Qt5</application> dans un emplacement autre que
        <filename class="directory">/usr</filename>, vous devez mettre à jour les fichiers de configuration
        suivant pour que <application>Qt5</application> soit correctement trouvé par les autres
        paquet et les processus systèmes.
      </para>
      <para>
        En tant qu'utilisateur <systemitem class="username">root</systemitem>, mettez à jour
        le fichier <filename>/etc/ld.so.conf</filename> et le fichier cache de l'éditeur de liens:
      </para>
<screen role="root">
<userinput>cat &gt;&gt; /etc/ld.so.conf &lt;&lt; EOF
<literal># Begin Qt addition
/opt/qt5/lib
# End Qt addition</literal>
EOF
ldconfig</userinput>
</screen>
      <indexterm zone="qt5 qt5-config">
        <primary sortas="e-etc-ld.so.conf">/etc/ld.so.conf</primary>
      </indexterm>
      <para>
        En tant qu'utilisateur <systemitem class="username">root</systemitem>, créez
        le fichier <filename>/etc/profile.d/qt5.sh</filename>:
      </para>
<screen role="root">
<userinput>cat &gt; /etc/profile.d/qt5.sh &lt;&lt; EOF
<literal># Begin /etc/profile.d/qt5.sh
QT5DIR=/opt/qt5
pathappend /opt/qt5/bin           PATH
pathappend /opt/qt5/lib/pkgconfig PKG_CONFIG_PATH
export QT5DIR
# End /etc/profile.d/qt5.sh</literal>
EOF</userinput>
</screen>
    </sect3>
   <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
               href="../../xincludes/setqt.xml"/>
  </sect2>
  <sect2 role="content">
    <title>Contenu</title>
    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>
      <seglistitem>
        <seg>
          assistant, designer, lconvert, linguist, lrelease,
          lupdate, moc, pixeltool, qcollectiongenerator, qdbuscpp2xml,
          qdbus, qdbusviewer, qdbusxml2cpp, qdoc, qhelpconverter,
          qhelpgenerator, qlalr, qmake, qml1plugindump, qmlbundle,
          qmlimportscanner, qmlmin, qmlplugindump, qmlprofiler, qml,
          qmlscene, qmltestrunner, qmlviewer,qtdiag, qtpaths, rcc,
          syncqt.pl, uic, xmlpatterns, and xmlpatternsvalidator
        </seg>
        <seg>
          libEnginio.so, libqgsttools_p.so, libQt5Bluetooth.so,
          libQt5Bootstrap.a, libQt5CLucene.so, libQt5Concurrent.so,
          libQt5Core.so, libQt5DBus.so, libQt5Declarative.so,
          libQt5DesignerComponents.so, libQt5Designer.so, libQt5Gui.so,
          libQt5Help.so, libQt5MultimediaQuick_p.so, libQt5Multimedia.so,
          libQt5MultimediaWidgets.so, libQt5Network.so, libQt5Nfc.so,
          libQt5OpenGLExtensions.a, libQt5OpenGL.so, libQt5PlatformSupport.a,
          libQt5Positioning.so, libQt5PrintSupport.so, libQt5QmlDevTools.a,
          libQt5Qml.so, libQt5QuickParticles.so, libQt5QuickWidgets.so,
          libQt5Quick.so, libQt5QuickTest.so, libQt5Script.so,
          libQt5ScriptTools.so, libQt5Sensors.so, libQt5SerialPort.so,
          libQt5Sql.so, libQt5Svg.so, libQt5Test.so, libQt5UiTools.a,
          libQt5WebKit.so, libQt5WebKitWidgets.so, libQt5WebSockets.so,
          libQt5Widgets.so, libQt5X11Extras.so, libQt5XmlPatterns.so,
          libQt5Xml.so, et plusieurs sous /opt/qt5/{imports,plugins,qml}
        </seg>
        <seg>
          /usr/include/qt5,
          /usr/lib/qt5,
          /usr/share/doc/qt5 et
          /usr/share/qt5
          OU
          /opy/qt5 et
          /opt/qt-&qt5-version;
       </seg>
      </seglistitem>
    </segmentedlist>
    <variablelist>
      <bridgehead renderas="sect3">Description courte</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      <varlistentry id="assistant-qt5">
        <term><command>assistant</command></term>
        <listitem>
          <para>
            est un outil pour la présentation de documentation en ligne.
          </para>
          <indexterm zone="qt5 assistant-qt5">
            <primary sortas="b-assistant-qt5">assistant</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="designer-qt5">
        <term><command>designer</command></term>
        <listitem>
          <para>
            est un constructeur complet de GUI. Il inclut des possibilités puissantes
	    comme le mode de prévisualisation, la couche de boutons automatiques,
	    le support des boutons personnalisés et un éditeur de propriétés avancées.
	    </para>
          <indexterm zone="qt5 designer-qt5">
            <primary sortas="b-designer-qt5">designer</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="linguist-qt5">
        <term><command>linguist</command></term>
        <listitem>
          <para>
            fournit un support pour la traduction d'applications dans les langues
	    locales.
          </para>
          <indexterm zone="qt5 linguist-qt5">
            <primary sortas="b-linguist-qt5">linguist</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="lrelease-qt5">
        <term><command>lrelease</command></term>
        <listitem>
          <para>
            est un outil simple en ligne de commande. Il lit les fichiers
	    de projet Qt et produit des fichiers de messages utilisés par l'application.
	    </para>
          <indexterm zone="qt5 lrelease-qt5">
            <primary sortas="b-lrelease-qt5">lrelease</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="lupdate-qt5">
        <term><command>lupdate</command></term>
        <listitem>
          <para>
            lit les fichiers de projet Qt, trouve les chaînes traduisibles dans
	    le source spécifié, les fichiers d'entête et d'interface Qt et produit
	    ou met à jour les fichiers de traduction dans le fichier projet.
	  </para>
          <indexterm zone="qt5 lupdate-qt5">
            <primary sortas="b-lupdate-qt5">lupdate</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="moc-qt5">
        <term><command>moc</command></term>
        <listitem>
          <para>
            génère un code de support des meta-objets Qt.
          </para>
          <indexterm zone="qt5 moc-qt5">
            <primary sortas="b-moc-qt5">moc</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="pixeltool-qt5">
        <term><command>pixeltool</command></term>
        <listitem>
          <para>
            est une loupe de bureau et  tant que vous bougez votre souris dans l'écran
	    il affichera le contenu agrandi dans sa fenêtre.
	  </para>
          <indexterm zone="qt5 pixeltool-qt5">
            <primary sortas="b-pixeltool-qt5">pixeltool</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="qmake-qt5">
        <term><command>qmake</command></term>
        <listitem>
          <para>
            utilise les informations enregistrées dans les fichiers projet
	    pour déterminer ceux qui doivent aller dans les makefiles qu'il génère.
	  </para>
          <indexterm zone="qt5 qmake-qt5">
            <primary sortas="b-qmake-qt5">qmake</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="rcc-qt5">
        <term><command>rcc</command></term>
        <listitem>
          <para>
            est un compilateur de ressources utilisé en conjonction avec
	    le dessinateur.
          </para>
          <indexterm zone="qt5 rcc-qt5">
            <primary sortas="b-rcc-qt5">rcc</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="uic-qt5">
        <term><command>uic</command></term>
        <listitem>
          <para>
            est le compilateur d'interfaces utilisateur Qt.
          </para>
          <indexterm zone="qt5 uic-qt5">
            <primary sortas="b-uic-qt5">uic</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect2>
</sect1>
