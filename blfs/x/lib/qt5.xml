<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  <!ENTITY qt5-major "5.2">
  <!ENTITY qt5-url   "http://download.qt-project.org/official_releases/qt/&qt5-major;/&qt5-version;/single">
  <!ENTITY qt5-download-http "&qt5-url;/qt-everywhere-opensource-src-&qt5-version;.tar.xz">
  <!ENTITY qt5-download-ftp  " ">
  <!ENTITY qt5-md5sum        "0c8d2aa45f38be9c3f7c9325eb059d9d">
  <!ENTITY qt5-size          "166 Mo">
  <!ENTITY qt5-buildsize     "2.6 Go (160 Mo installed)">
  <!ENTITY qt5-time          "60 SBU">
]>
<sect1 id="qt5" xreflabel="Qt-&qt5-version;">
  <?dbhtml filename="qt5.html" ?>
  <sect1info>
    <othername>$LastChangedBy: krejzi $</othername>
    <date>$Date: 2013-08-11 04:12:50 +0200 (dim. 11 août 2013) $</date>
  </sect1info>
  <title>Qt-&qt5-version;</title>
  <indexterm zone="qt5">
    <primary sortas="a-Qt">Qt</primary>
  </indexterm>
  <sect2 role="package">
    <title>Introduction à Qt5</title>
    <para>
      <application>Qt5</application> est une boite à outils multi-plate-forme
      qui est largement utilisée pour le développement d'application
      avec une interface graphique (GUI) (dans ce cas Qt5 est classée comme une boite à outils
      de boutons), et est également utilisée pour le développement de programmes
      sans GUI comme est outils en ligne de commande et les consoles pour serveurs.
      Un des principaux utilisateurs de <application>Qt5</application> est
      le <application>l'environnement KDE 5</application>.
    </para>
    &lfs75_checked;
    <bridgehead renderas="sect3">Information sur le paquet </bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP) : <ulink url="&qt5-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP) : <ulink url="&qt5-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5 du téléchargement : &qt5-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement : &qt5-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis : &qt5-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction : &qt5-time;
        </para>
      </listitem>
    </itemizedlist>
    <bridgehead renderas="sect3">Dépendances de Qt5</bridgehead>
    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
      <xref linkend="alsa-lib"/>,
      <xref linkend="mesalib"/>,
      <xref linkend="xcb-util-image"/>,
      <xref linkend="xcb-util-keysyms"/>,
      <xref linkend="xcb-util-renderutil"/> et
      <xref linkend="xcb-util-wm"/>
    </para>
    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="cacerts"/>,
      <xref linkend="cups"/>,
      <xref linkend="dbus"/>,
      <xref linkend="glib2"/>,
      <xref linkend="gst-plugins-base"/>,
      <xref linkend="icu"/>,
      <xref linkend="libjpeg"/>,
      <xref linkend="libmng"/>,
      <xref linkend="libpng"/>,
      <xref linkend="libtiff"/>,
      <xref linkend="mtdev"/>,
      <xref linkend="openssl"/>,
      <xref linkend="pcre"/> et
      <xref linkend="sqlite"/>
    </para>
    <bridgehead renderas="sect4">Facultative</bridgehead>
    <para role="optional">
      <xref linkend="geoclue"/>,
      <xref linkend="gst10-plugins-base"/> (Support de QtWebKit HTML5 Video),
      <xref linkend="gtk2"/> (Support de GTK+ Theme),
      <ulink url="https://code.google.com/p/ibus/">IBus</ulink>,
      <ulink url="http://xkbcommon.org/">libxkbcommon</ulink>,
      <xref linkend="mariadb"/> ou <xref linkend="mysql"/>,
      <xref linkend="postgresql"/>,
      <xref linkend="pulseaudio"/> et 
      <xref linkend="unixodbc"/>
    </para>
 
  
 <para condition="html" role="usernotes">Notes utilisateur :
      <ulink url="&blfs-wiki;/qt5"/>
    </para>
  </sect2>

<xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
               href="../../xincludes/qt-alternatives.xml"/>

    <caution>
      <para>
        Si vous n'installez pas certaine des dépendances recommandées, examinez
        la sortie de <command>./configure --help</command> pour vérifier comment
	les désactiver ou utiliser les versions internes livrées avec le paquet
	des sources.
      </para>
     </caution>
      <warning>
      <para>
       Si <application>Qt5</application> doit être réinstallé dans le même répertoire
       qu'une précédente installation,
      lancez les commandes suivantes depuis une console ou un
      gestionnaire de fenêtres non Qt5. Elle écrase les bibliothèques
      <application>Qt5</application> qui ne devraient pas être utilisées pendant
      le processus d'installation.</para>
      </warning>
     <bridgehead renderas="sect3">Méthode 1: Installation dans /usr</bridgehead>    <para>
      Installez <application>Qt5</application> en lançant les commandes suivantes
    </para>
    
    <note><para>
      Si <application>Qt5</application> <emphasis>n'est pas</emphasis> aussi installé
      dans le répertoire /usr, modifiez l'entrée pour -bindir dessous en /usr/bin.
    </para></note>
<screen>
<userinput>./configure -prefix         /usr               \
            -sysconfdir     /etc/xdg           \
            -bindir         /usr/lib/qt5/bin   \
            -headerdir      /usr/include/qt5   \
            -archdatadir    /usr/lib/qt5       \
            -datadir        /usr/share/qt5     \
            -docdir         /usr/share/doc/qt5 \
            -translationdir /usr/share/qt5/translations \
            -examplesdir    /usr/share/doc/qt5/examples \
            -confirm-license   \
            -opensource        \
            -dbus-linked       \
            -openssl-linked    \
            -system-sqlite     \
            -no-nis            \
            -nomake examples   \
            -opengl es2        \
            -optimized-qmake   &amp;&amp;
make</userinput>
</screen>
    <para>
      Ce paquet n'a pas de suite de tests.
    </para>
    <para>
      Enlevez les références au répertoire de construction des fichiers  <filename class="extension">.pc</filename>
      en lançant la commande suivante:
    </para>
<screen>
<userinput>find . -name "*.pc" -exec perl -pi -e "s, -L$PWD/?\S+,,g" {} \;</userinput>
</screen>
    <para>
      Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem> :
    </para>
<screen role="root">
<userinput>make install &amp;&amp;
install -v -Dm644 qttools/src/assistant/assistant/images/assistant-128.png \
                  /usr/share/pixmaps/assistant-qt5.png &amp;&amp;
install -v -Dm644 qttools/src/designer/src/designer/images/designer.png \
                  /usr/share/pixmaps/designer-qt5.png &amp;&amp;
install -v -Dm644 qttools/src/linguist/linguist/images/icons/linguist-128-32.png \
                  /usr/share/pixmaps/linguist-qt5.png &amp;&amp;
install -v -Dm644 qttools/src/qdbus/qdbusviewer/images/qdbusviewer-128.png \
                  /usr/share/pixmaps/qdbusviewer-qt5.png</userinput>
</screen>
    <para>
      Enlevez les références au répertoire de construction des fichiers installés
      en lançant la commande suivante en tant qu'utilisateur
      <systemitem class="username">root</systemitem>:
    </para>
<screen role="root">
<userinput>sed -i -e "s:$PWD/qtbase:/usr/lib/qt5:g" \
    /usr/lib/qt5/mkspecs/modules/qt_lib_bootstrap_private.pri &amp;&amp;
find /usr/lib/lib{qgsttools_p,Qt5*}.prl -exec sed -i -e \
     '/^QMAKE_PRL_BUILD_DIR/d;s/\(QMAKE_PRL_LIBS =\).*/\1/' {} \;</userinput>
</screen>
 <bridgehead renderas="sect3">Methode 2: Installation dans /opt/qt-&qt5-version;</bridgehead>
    <para>
        Cette partie fournit l'installation de Qt5 avec la plupart des fichiers
        dans le rÃ©pertoire <filename class="directory">/opt</filename>.
</para>
<screen>
<userinput>export QT5DIR=/opt/qt-&qt5-version;
./configure -prefix     $QT5DIR  \
            -sysconfdir /etc/xdg \
            -confirm-license     \
            -opensource          \
            -dbus-linked         \
            -openssl-linked      \
            -system-sqlite       \
            -no-nis              \
            -nomake examples     \
            -opengl es2          \
            -optimized-qmake     &amp;&amp;
make</userinput>
</screen>
    <para>
      Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem> :
    </para>
<screen role="root">
<userinput>make install &amp;&amp;
install -v -Dm644 qttools/src/assistant/assistant/images/assistant-128.png \
                  /usr/share/pixmaps/assistant-qt5.png &amp;&amp;
install -v -Dm644 qttools/src/designer/src/designer/images/designer.png \
                  /usr/share/pixmaps/designer-qt5.png &amp;&amp;
install -v -Dm644 qttools/src/linguist/linguist/images/icons/linguist-128-32.png \
                  /usr/share/pixmaps/linguist-qt5.png &amp;&amp;
install -v -Dm644 qttools/src/qdbus/qdbusviewer/images/qdbusviewer-128.png \
                  /usr/share/pixmaps/qdbusviewer-qt5.png</userinput>
</screen>
    <para>
      Enlevez les références au répertoire de construction dans les fichiers
      <filename class="extension">.pc</filename> installés en lançant les commandes suivantes en tant qu'utilisateur
      <systemitem class="username">root</systemitem>:
    </para>
<screen role="root">
<userinput>find $QT5DIR -name qt_lib_bootstrap_private.pri \
   -exec sed -i -e "s:$PWD/qtbase:/$QT5DIR/lib/:g" {} \; &amp;&amp;
find $QT5DIR -name \*.prl \
   -exec sed -i -e '/^QMAKE_PRL_BUILD_DIR/d' {} \;</userinput>
</screen>
  <para>
      Liez symboliquement les exécutables <application>Qt5</application> 
      dans
      <filename class="directory">/usr/bin</filename> en lançant les commandes suivantes
      en tant qu'utilisateur 
      <systemitem class="username">root</systemitem> :
    </para>
<screen role="root">
<userinput>ln -svf $QT5DIR /opt/qt5 &amp;&amp;
for file in /opt/qt5/bin/*; do
  ln -sfv $file /usr/bin/$(basename $file)-qt5
done</userinput>
</screen>
<!-- ==== Common  ====== -->
    <bridgehead renderas="sect3">Continuing for Both Methods</bridgehead>
    <para>
      Pour toutes les mÃ©thodes, installez les images et crÃ©ez les entrÃ©es de menu pour les
      applications installÃ©es. Soyez certain que la variable <envar>QT5LINK</envar>
      est dÃ©finie dans l'environnement root et en tant qu'utilisateur
      <systemitem class="username">root</systemitem> :
    </para>
<screen role="root"><userinput>install -v -dm755 /usr/share/pixmaps/                  &amp;&amp;
install -v -Dm644 qttools/src/assistant/assistant/images/assistant-128.png \
                  /usr/share/pixmaps/assistant-qt5.png &amp;&amp;
install -v -Dm644 qttools/src/designer/src/designer/images/designer.png \
                  /usr/share/pixmaps/designer-qt5.png  &amp;&amp;
install -v -Dm644 qttools/src/linguist/linguist/images/icons/linguist-128-32.png \
                  /usr/share/pixmaps/linguist-qt5.png  &amp;&amp;
install -v -Dm644 qttools/src/qdbus/qdbusviewer/images/qdbusviewer-128.png \
                  /usr/share/pixmaps/qdbusviewer-qt5.png &amp;&amp;
install -dm755 /usr/share/applications &amp;&amp;
cat &gt; /usr/share/applications/assistant-qt5.desktop &lt;&lt; EOF
<literal>[Desktop Entry]
Name=Qt5 Assistant
Comment=Shows Qt5 documentation and examples
Exec=$QTLINK/bin/assistant
con=assistant-qt5.png
Terminal=false
Encoding=UTF-8
Type=Application
Categories=Qt;Development;Documentation;</literal>
EOF
cat &gt; /usr/share/applications/designer-qt5.desktop &lt;&lt; EOF
<literal>[Desktop Entry]
Name=Qt5 Designer
GenericName=Interface Designer
Comment=Design GUIs for Qt5 applications
Exec=$QTLINK/bin/designer
Icon=designer-qt5.png
MimeType=application/x-designer;
Terminal=false
Encoding=UTF-8
Type=Application
Categories=Qt;Development;</literal>
EOF
cat &gt; /usr/share/applications/linguist-qt5.desktop &lt;&lt; EOF
<literal>[Desktop Entry]
Name=Qt5 Linguist
Comment=Add translations to Qt5 applications
Exec=$QTLINK/bin/linguist
Icon=linguist-qt5.png
MimeType=text/vnd.trolltech.linguist;application/x-linguist;
Terminal=false
Encoding=UTF-8
Type=Application
Categories=Qt;Development;</literal>
EOF
cat &gt; /usr/share/applications/qdbusviewer-qt5.desktop &lt;&lt; EOF
<literal>[Desktop Entry]
Name=Qt5 QDbusViewer
GenericName=D-Bus Debugger
Comment=Debug D-Bus applications
Exec=$QTLINK/bin/qdbusviewer
Icon=qdbusviewer-qt5.png
Terminal=false
Encoding=UTF-8
Type=Application
Categories=Qt;Development;Debugger;</literal>
EOF</userinput></screen>

  </sect2>
  <sect2 role="commands">
    <title>Explications des commandes</title>
<para>
        <command>sed -e "..." -e "..." -i ...</command>:
      Cette commande corrige la détection de 
      <application>libmng</application> 2.0.
    </para>
    <para>
      <parameter>-confirm-license</parameter> : Acceptez la licence
      sans poser la question à l'utilisateur pendant la configuration.
    </para>
    <para>
      <parameter>-opensource</parameter> : Installez la version opensource
      de <application>Qt5</application>.
    </para>
    <para><parameter>-release</parameter> :
    Ce paramètre désactive la construction avec les symboles de déboguage.</para>
    <para>
      <parameter>-nomake examples</parameter> :
      Ce paramètre désactive la construction des programmes d'exemple inclus dans
      les sources. Enlevez le si vous voulez les construire.
    </para>
    <para>
      <parameter>-system-harfbuzz</parameter>: Ce paramètre active l'utilisation de la version du système de
       <application>Harfbuzz</application>
      qui corrige quelques problèmes de rendu de police dans les applications
      <application>Qt5</application>.
    </para>
    <para>
           <parameter>-system-sqlite</parameter> : Ce paramètre active l'utilisation
      de la version du système de <application>SQLite</application>.
    </para>
    <para>
      <parameter>-no-nis</parameter> : Ce paramètre désactive le support
      pour Network Information Service (NIS) qui est enlevé dans les dernières
      versions de <application>Glibc</application>.
    </para>
    <para>
      <parameter>-dbus-linkend -openssl-linkend</parameter> : Ces paramètres
      active la liaison explicite des bibliothèques
      <application>D-Bus</application> et
      <application>OpenSSL</application> dans les bibliothèques
      <application>Qt5</application> au lieu de les
      <command>dlopen()</command>-itiser.
    </para>
     <para>
      <parameter>-opengl es2</parameter>: Ce paramètre active le support de
      OpenGL ES2 dans <application>Qt5</application>.
    </para>
    <para>
      <parameter>-optimized-qmake</parameter>: Ce paramètre active
      la construction du programme optimisé <command>qmake</command>.
    </para>
  </sect2>
  <sect2 role="configuration">
    <title>Configuration de Qt</title>
    <sect3 id="qt5-config">
      <title>Information de Configuration</title>
      <para>
        Créez les entrées du menu pour les applications installées en lançant
        les commandes suivantes 
        en tant qu'utilisateur <systemitem class="username">root</systemitem>:
      </para>
    </sect3>
   <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
               href="../../xincludes/setqt.xml"/>

  </sect2>
  <sect2 role="content">
    <title>Contenu</title>
    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>
      <seglistitem>
        <seg>
          assistant, designer, lconvert, linguist, lrelease,
          lupdate, moc, pixeltool, qcollectiongenerator, qdbuscpp2xml,
          qdbus, qdbusviewer, qdbusxml2cpp, qdoc, qhelpconverter,
          qhelpgenerator, qmake, qml1plugindump, qmlbundle,
          qmlimportscanner, qmlmin, qmlplugindump, qmlprofiler, qml,
          qmlscene, qmltestrunner, qmlviewer, qtpaths, rcc,
          syncqt.pl, uic, xmlpatterns, and xmlpatternsvalidator
        </seg>
        <seg>
          libqgsttools_p.so, libQt5Bluetooth.so, libQt5Bootstrap.a, libQt5CLucene.so,
          libQt5Concurrent.so, libQt5Core.so, libQt5DBus.so, libQt5Declarative.so,
          libQt5DesignerComponents.so, libQt5Designer.so, libQt5Gui.so, libQt5Help.so,
          libQt5MultimediaQuick_p.so, libQt5Multimedia.so, libQt5MultimediaWidgets.so,
          libQt5Network.so, libQt5Nfc.so, libQt5OpenGLExtensions.a, libQt5OpenGL.so,
          libQt5PlatformSupport.a, libQt5Positioning.so, libQt5PrintSupport.so,
          libQt5QmlDevTools.a, libQt5Qml.so, libQt5QuickParticles.so, libQt5Quick.so,
          libQt5QuickTest.so, libQt5Script.so, libQt5ScriptTools.so, libQt5Sensors.so,
          libQt5SerialPort.so, libQt5Sql.so, libQt5Svg.so, libQt5Test.so, libQt5UiTool$
          libQt5WebKit.so, libQt5WebKitWidgets.so, libQt5Widgets.so, libQt5X11Extras.s$
          libQt5XmlPatterns.so, and libQt5Xml.so
        </seg>
        <seg>
          /usr/include/qt5,
          /usr/lib/qt5,
          /usr/share/doc/qt5 et
          /usr/share/qt5
          OU
          /opy/qt5 et
          /opt/qt-&qt5-version;
       </seg>
      </seglistitem>
    </segmentedlist>
    <variablelist>
      <bridgehead renderas="sect3">Description courte</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      <varlistentry id="assistant-qt5">
        <term><command>assistant</command></term>
        <listitem>
          <para>
            est un outil pour la présentation de documentation en ligne.
          </para>
          <indexterm zone="qt5 assistant-qt5">
            <primary sortas="b-assistant-qt5">assistant</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="designer-qt5">
        <term><command>designer</command></term>
        <listitem>
          <para>
            est un constructeur complet de GUI. Il inclut des possibilités puissantes
	    comme le mode de prévisualisation, la couche de boutons automatiques,
	    le support des boutons personnalisés et un éditeur de propriétés avancées.
	    </para>
          <indexterm zone="qt5 designer-qt5">
            <primary sortas="b-designer-qt5">designer</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="linguist-qt5">
        <term><command>linguist</command></term>
        <listitem>
          <para>
            fournit un support pour la traduction d'applications dans les langues
	    locales.
          </para>
          <indexterm zone="qt5 linguist-qt5">
            <primary sortas="b-linguist-qt5">linguist</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="lrelease-qt5">
        <term><command>lrelease</command></term>
        <listitem>
          <para>
            est un outil simple en ligne de commande. Il lit les fichiers
	    de projet Qt et produit des fichiers de messages utilisés par l'application.
	    </para>
          <indexterm zone="qt5 lrelease-qt5">
            <primary sortas="b-lrelease-qt5">lrelease</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="lupdate-qt5">
        <term><command>lupdate</command></term>
        <listitem>
          <para>
            lit les fichiers de projet Qt, trouve les chaînes traduisibles dans
	    le source spécifié, les fichiers d'entête et d'interface Qt et produit
	    ou met à jour les fichiers de traduction dans le fichier projet.
	  </para>
          <indexterm zone="qt5 lupdate-qt5">
            <primary sortas="b-lupdate-qt5">lupdate</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="moc-qt5">
        <term><command>moc</command></term>
        <listitem>
          <para>
            génère un code de support des meta-objets Qt.
          </para>
          <indexterm zone="qt5 moc-qt5">
            <primary sortas="b-moc-qt5">moc</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="pixeltool-qt5">
        <term><command>pixeltool</command></term>
        <listitem>
          <para>
            est une loupe de bureau et  tant que vous bougez votre souris dans l'écran
	    il affichera le contenu agrandi dans sa fenêtre.
	  </para>
          <indexterm zone="qt5 pixeltool-qt5">
            <primary sortas="b-pixeltool-qt5">pixeltool</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="qmake-qt5">
        <term><command>qmake</command></term>
        <listitem>
          <para>
            utilise les informations enregistrées dans les fichiers projet
	    pour déterminer ceux qui doivent aller dans les makefiles qu'il génère.
	  </para>
          <indexterm zone="qt5 qmake-qt5">
            <primary sortas="b-qmake-qt5">qmake</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="rcc-qt5">
        <term><command>rcc</command></term>
        <listitem>
          <para>
            est un compilateur de ressources utilisé en conjonction avec
	    le dessinateur.
          </para>
          <indexterm zone="qt5 rcc-qt5">
            <primary sortas="b-rcc-qt5">rcc</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="uic-qt5">
        <term><command>uic</command></term>
        <listitem>
          <para>
            est le compilateur d'interfaces utilisateur Qt.
          </para>
          <indexterm zone="qt5 uic-qt5">
            <primary sortas="b-uic-qt5">uic</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect2>
</sect1>
