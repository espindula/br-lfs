<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY qt4-download-http "http://get.qt.nokia.com/qt/source/qt-everywhere-opensource-src-&qt4-version;.tar.gz">
  <!ENTITY qt4-download-ftp  "ftp://ftp.trolltech.com/qt/source/qt-everywhere-opensource-src-&qt4-version;.tar.gz">
  <!ENTITY qt4-md5sum        "7960ba8e18ca31f0c6e4895a312f92ff">
  <!ENTITY qt4-size          "228 Mio">
  <!ENTITY qt4-buildsize     "1.8 Gio (complet), 619 (essentiel)">
  <!ENTITY qt4-time          "69 SBU (complet), 54 SBU (essentiel)">
]>

<sect1 id="qt4" xreflabel="Qt-&qt4-version;">
  <?dbhtml filename="qt4.html" ?>

  <sect1info>
    <othername>$LastChangedBy&nbsp;: rthomsen $</othername>
    <date>$Date&nbsp;: 2012-04-04 22:58:11 +0200 (Wed, 04 Apr 2012) $</date>
  </sect1info>

  <title>Qt-&qt4-version;</title>

  <indexterm zone="qt4">
    <primary sortas="a-qt4">Qt4</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à Qt4</title>

    <para><application>Qt</application> est un environnement de travail d'applications
    multi-plateforme qui est largemet utilisé pour développer des applications
    avec une interface utilisateur graphique (GUI) (dans quelques cas Qt est classé
    comme une trousse de widgets), et aussi utilisé pour developper des programmes
    non-GUI comme les outils en ligen de commande et les consoles pour les serveurs.
    Un des utilisateurs majeurs de <application>Qt4</application> est <application>KDE</application>.</para>

    &lfs71_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&qt4-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&qt4-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &qt4-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &qt4-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &qt4-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &qt4-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
       <para>Correctif GCC 4.7&nbsp;: <ulink
	url="&patch-root;/qt-everywhere-opensource-src-&qt4-version;-gcc_fix-1.patch"/>
       </para>
     </listitem>
      <listitem>
        <para>Correctif GLib 2.32&nbsp;: <ulink
	url="&patch-root;/qt-everywhere-opensource-src-&qt4-version;-glib_fix-1.patch"/>
        </para>
       </listitem>
    </itemizedlist>


    <bridgehead renderas="sect3">Dépendances de Qt</bridgehead>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required"><xref linkend="x-window-system"/></para>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended"><xref linkend="libjpeg"/>,
      <xref linkend="libmng"/>,
      <xref linkend="libtiff"/>,
      <xref linkend="libpng"/> et
      <xref linkend="pkgconfig"/> (nécessaire pour utiliser D-BUS, GLib, GTK et
      PulseAudio)
    </para>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      <!--      <xref linkend="nas"/>, -->
      <xref linkend="dbus"/>,
      <xref linkend="gst-plugins-base"/>,
      <xref linkend='pulseaudio'/>,
      <xref linkend="gtk2"/>,
      <xref linkend="openssl"/>,
      <xref linkend="cups"/>,
      <xref linkend="mysql"/>,
      <xref linkend="postgresql"/>,
      <xref linkend="unixodbc"/> et
      <xref linkend="sqlite"/>
    </para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/qt4"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Qt4</title>

    <para>Il y a plusieurs manières d'installer un paquet aussi compliqué que
    <application>Qt4</application>. Les fichiers ne sont pas complètement 
    indifférents à la position. Les procédures d'installation exécutent le 
    programme <command>pkg-config</command> pour déterminer l'emplacement des
    exécutables du paquet, les bibliothèques, les en-têtes et d'autres fichiers.
    Pour <application>Qt4</application>, <command>pkg-config</command> 
    cherchera les fichiers <filename>lib/pkgconfig/Qt*.pc</filename> adéquats
    qui doivent être modifiés en cas de relocalisation du paquet. Ces fichiers
    sont correctement paramétrés par le processus de construction.</para>

    <para>L'installation par défaut met les fichiers dans
    <filename class='directory'>/usr/local/qt/</filename>. Beaucoup de
    distributions mettent les fichiers dans la hiérarchie 
    <filename class='directory'>/usr</filename> du système. Le paquet peut
    être aussi installé dans un répertoire de votre choix.</para>

    <para>L'avantage de cette méthode qu'aucune mise à jour des fichiers
    <filename>/etc/ld.so.conf</filename> ou
    <filename>/etc/man_db.conf</filename> n'est nécessaire. Les fichiers du
    paquet sont répartis dans plusieurs sous-répertoires de la hiérarchie
    <filename class='directory'>/usr</filename>. C'est la méthode utilisée par la
    plupart des distributions du marché.</para>

<!--
    <note>
      <para>Il n'y a pas de conflit entre les applications et les en-têtes de
      <application>Qt3</application> et de <application>Qt4</application>, donc
      les deux peuvent s'installer en même temps. Cela peut être nécessaire pour
      construire ou lancer des applications 3 comme <application>KDE3</application> et 
      des applications <application>Qt4</application> comme
      <application>doxywizard</application> de
      <application>Doxygen</application> sur le même système.  
      </para>

      <para>Pour paramétrer à la fois <application>Qt3</application> et
      <application>Qt4</application> sur le même système, choisissez la
      version primaire du lien symbolique <filename>/opt/qt</filename> et ajoutez
      directement la bibliothèque explicite de l'autre version à
      <filename>/etc/ld.so.conf</filename>.</para>

      <para>Sur un système ayant les deux versions de Qt, il y a un conflit de
      nom entre les applications Qt tel qu'un <filename>qmake</filename>,
      <filename>assistant</filename> et <filename>designer</filename>.  Dans un
      cas pareil, assurez-vous que la variable PATH liste le bon répertoire
      <filename>/opt/qt&lt;version&gt;/bin</filename> avant l'autre répertoire
      bin de Qt.  </para>
    </note>
    -->
    <caution>
      <para>Si vous allez réinstaller <application>Qt4</application> et si le
      répertoire <filename class='directory'>/usr</filename> est utilisé comme
      préfixe, lancez les commandes suivantes depuis une console ou un
      gestionnaire de fenêtres non Qt4. Elle écrase les bibliothèques
      <application>Qt4</application> qui ne devraient pas être utilisées pendant
      le processus d'installation.</para>
    </caution>

    <note>
      <para>Le temps et l'espace de construction requis pour tout 
      <application>Qt4</application> est considérable. Les instructions 
      ci-dessous ne construisent pas les tutoriels et les exemples. La
      suppression des lignes <parameter>-nomake</parameter> créera une
      construction complète.</para>
    </note>

    <para>La méthode recommandée par les développeurs de <application>Qt4</application>
    n'utilise pas le préfixe de répertoire /usr. Elle présente l'avantage de
    garder tous les fichiers du paquet rassemblés dans une hiérarchie de
    répertoires dédiée. En utilisant cette méthode, on peut faire une mise à 
    jour sans écraser l'installation précédente et les utilisateurs peuvent
    facilement revenir en arrière vers une version précédente en modifiant un
    lien symbolique.</para>

    <para>Les développeurs de <application>Qt4</application> utilisent un
    emplacement par défaut de <filename class='directory'>/usr/local/qt/</filename>, 
    mais la procédure ci-dessous met les fichiers dans <filename
    class='directory'>/opt/qt-&qt4-version;/</filename> puis crée un lien
    symbolique vers <filename>/opt/qt/</filename>.</para>

    <para>Configurez <application>Qt4</application> en lançant les commandes
    suivantes&nbsp;:</para>

<screen><userinput>patch -Np1 -i ../qt-everywhere-opensource-src-&qt4-version;-gcc_fix-1.patch &amp;&amp;
patch -Np1 -i ../qt-everywhere-opensource-src-&qt4-version;-glib_fix-1.patch &amp;&amp;
./configure -prefix /opt/qt-&qt4-version;  \
            -release               \
            -nomake examples       \
            -nomake demos          \
            -system-sqlite         \
            -no-nis                \
	    -opensource            \
	    -confirm-license</userinput></screen>


    <note><title>Phonon</title>
    <para>Si <application>KDE4</application> est prévu d'être installé, ajoutez
    <option>-no-phonon</option> à la commande <command>./configure</command> ci-dessus.
    Au moment de l'installation de <application>KDE4</application>, une version
	séparées de la bibliothèque <application>Phonon</application> sera installée 
	qui correspondra mieux au besoin du bureau <application>KDE4</application>.</para></note>

    <para>Si vous avez compilé avec <application>GCC</application> 4.7 vous devez supprimer quelques
    messages d'alerte qui peuvent faire que la construction échouera. Ceci peut être réalisé
    par la modification de quelques Makefiles:</para>

    <screen><userinput>find src/3rdparty/webkit/Source/{WebCore,WebKit} -name 'Makefile*' -exec sed -i 's@-Werror @@' {} \;</userinput></screen>

    <para>Maintenant, construisez le paquet:</para>

    <screen><userinput>make</userinput></screen>
  
    <para>Ce paquet n'est pas fourni avec une suite de tests.</para>

    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>make install</userinput></screen>

    <para>Si vous avez installé <application>Qt4</application> dans le
    répertoire /opt, toujours en tant qu'utilisateur <systemitem class="username">root</systemitem> user lancez&nbsp;:</para>

<screen role="root"><userinput>ln -v -sfn qt-&qt4-version; /opt/qt</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para><command>patch -Np1 -i qt-everywhere-...</command>&nbsp;:
    Les deux correctifs corrigent la compilation avec <application>GCC</application>
    4.7 et <application>GLib</application> 2.32.</para>
    
    <para><parameter>-nomake examples, -nomake demos</parameter>&nbsp;: Ces
    paramètres désactivent la construction de programmes qui n'ont d'intérêt 
    que pour un développeur <application>Qt4</application>.</para>

    <para>Il existe plusieurs autres options qu'on peut spécifier sur la
    ligne <command>./configure</command>. Parmi eux, 
    <option>-bindir</option>, <option>-libdir</option>,
    <option>-docdir</option> et <option>-headerdir</option>.  Pour une liste
    complète, lancez <command>./configure -help</command>.</para>

    <para><parameter>-plugin-sql-<replaceable>&lt;pilote&gt;</replaceable></parameter>
    ou <parameter>-qt-sql-<replaceable>&lt;pilote&gt;</replaceable></parameter>&nbsp;:
    Ces paramètres construisent le support SQL dans les bibliothèques
    <application>Qt4</application>.</para>

    <note>
      <para>Pour vérifier que <application>mysql</application> est détecté 
      automatiquement correctement, regardez la sortie de <command>./configure -qt-sql-mysql
      -help</command>. D'autres support de base de données exigeront des paramètres
      <command>configure</command> identiques.</para>
    </note>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de Qt4</title>

    <sect3 id='qt4-config'>
      <title>Informations de configuration</title>

      <para>Si vous avez installé <application>Qt4</application> à un autre
      endroit que /usr, vous devez aussi mettre à jour les fichiers de configuration 
      suivants pour que <application>Qt4</application> soit trouvé correctement
      par les autres paquets et les processus systèmes.</para>

      <para>En tant que <systemitem class="username">root</systemitem>&nbsp;, mettez à jour
      le fichier <filename>/etc/ld.so.conf</filename> et l'éditeur de liens dynamiques de
      fichiers de cache d'exécution:</para>
	  
<screen role="root"><userinput>cat &gt;&gt; /etc/ld.so.conf &lt;&lt; "EOF" &amp;&amp;
<literal># Début du supplément qt

/opt/qt/lib

# Fin du supplément qt</literal>
EOF
ldconfig</userinput></screen>

      <indexterm zone="qt4 qt4-config">
        <primary sortas="e-etc-ld.so.conf">/etc/ld.so.conf</primary>
      </indexterm>

      <para>En tant qu'utilisateur <systemitem class="username">root</systemitem>, créez
      le fichier <filename>/etc/profile.d/qt4.sh</filename>&nbsp;:</para>

<screen><userinput>cat &gt; /etc/profile.d/qt4.sh &lt;&lt; "EOF"
#Début de /etc/profile.d/qt4.sh
QT4DIR=/opt/qt
QTDIR=/opt/qt

pathappend /opt/qt/bin           PATH
pathappend /opt/qt/lib/pkgconfig PKG_CONFIG_PATH

export QT4DIR QTDIR

# Fin de /etc/profile.d/qt4.sh
EOF</userinput></screen>

     </sect3>
  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>assistant, assistant_adp, designer, lconvert, linguist, lrelease,
        lupdate, moc, pixeltool, qcollectiongenerator, qdbus, qdbuscpp2xml,
        qdbusviewer, qdbusxml2cpp, qhelpconverter, qhelpgenerator,qmake,
        qt3to4, qtconfig, qtdemo, rcc, uic, uic3, et xmlpatterns</seg>

        <seg>libphonon.so, libQt3Support.so, libQtAssistantClient.so,
        libQtCLucene.so, libQtCore.so, libQtDesigner.so, libQtDBus.so,
        libQtDesignerComponents.so, libQtGui.so, libQtHelp.so, libQtNetwork.so,
        libQtOpenGL.so, libQtScript.so, libQtScriptTools.so, libQtSql.so,
        libQtSvg.so, libQtTest.so, libQtUiTools.a, libQtWebKit.so, libQtXml.so,
        libQtXmlPatterns.so, et numerous plugin modules installed in
        <filename class='directory'>/opt/qt/plugins</filename></seg>

        <seg>/opt/qt-&qt4-version;</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="qt4-assistant">
        <term><command>assistant</command></term>
        <listitem>
          <para>est un outil pour présenter de la documentation en ligne.</para>
          <indexterm zone="qt4 qt4-assistant">
            <primary sortas="b-assistant">assistant</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt4-designer">
        <term><command>designer</command></term>
        <listitem>
          <para>est un constructeur GUI complètement mûr. Il inclut des
          fonctionnalités puissantes telles qu'un mode de prévisualisation, 
          l'aménagement automatique des widgets, le support des widgets
          personnalisés et aun éditeur avancé de propriétés.</para>
          <indexterm zone="qt4 qt4-designer">
            <primary sortas="b-designer">designer</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt4-linguist">
        <term><command>linguist</command></term>
        <listitem>
          <para>fournit un support de traduction d'applications en langues
          locales.</para>
          <indexterm zone="qt4 qt4-linguist">
            <primary sortas="b-linguist">linguist</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt4-lrelease">
        <term><command>lrelease</command></term>
        <listitem>
          <para>est un outil simple en ligne de commande. Il lit un fichier
          de projet Qt et produit des fichiers de message utilisés par
          l'application.</para>
          <indexterm zone="qt4 qt4-lrelease">
            <primary sortas="b-lrelease">lrelease</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt4-lupdate">
        <term><command>lupdate</command></term>
        <listitem>
          <para>lit un fichier de projet Qt, cherche les chaînes traduisibles
          dans les sources spécifiées, l'en-tête et les fichiers du designer 
          Qt, et produit ou met à jour les fichiers de traduction listés dans
          le fichier du projet.</para>
          <indexterm zone="qt4 qt4-lupdate">
            <primary sortas="b-lupdate">lupdate</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt4-moc">
        <term><command>moc</command></term>
        <listitem>
          <para>génère le support du code des méta-objets Qt.</para>
          <indexterm zone="qt4 qt4-moc">
            <primary sortas="b-moc">moc</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt4-pixeltool">
        <term><command>pixeltool</command></term>
        <listitem>
          <para>est une loupe de bureau et, quand vous déplacez votre souris
          sur l'écran, elle vous montrera le contenu agrandi dans sa fenêtre.</para>
          <indexterm zone="qt4 qt4-pixeltool">
            <primary sortas="b-pixeltool">pixeltool</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt4-qmake">
        <term><command>qmake</command></term>
        <listitem>
          <para>qutilise des informations stockées dans des fichiers de projet
          pour déterminer ce qui devrait aller dans les makefiles qu'il génère.</para>
          <indexterm zone="qt4 qt4-qmake">
            <primary sortas="b-qmake">qmake</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt4-qt3to4">
        <term><command>qt3to4</command></term>
        <listitem>
          <para>qt3to4 est un outil pour aider à mettre à jour du code Qt3 vers
          Qt4.</para>
          <indexterm zone="qt4 qt4-qt3to4">
            <primary sortas="b-qt3to4">qt3to4</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt4-qtconfig">
        <term><command>qtconfig</command></term>
        <listitem>
          <para>est utilisé pour personnaliser l'appearance des applications Qt.</para>
          <indexterm zone="qt4 qt4-qtconfig">
            <primary sortas="b-qtconfig">qtconfig</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt4-qtdemo">
        <term><command>qtdemo</command></term>
        <listitem>
          <para>est un portail de diverses démonstrations d'applications Qt.</para>
          <indexterm zone="qt4 qt4-qtdemo">
            <primary sortas="b-qtdemo">qtdemo</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt4-rcc">
        <term><command>rcc</command></term>
        <listitem>
          <para>est un compilateurde ressources utilisé avec le designer.</para>
          <indexterm zone="qt4 qt4-rcc">
            <primary sortas="b-rcc">rcc</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt4-uic">
        <term><command>uic</command></term>
        <listitem>
          <para>est un compilateur d'interface utilisateur Qt.</para>
          <indexterm zone="qt4 qt4-uic">
            <primary sortas="b-uic">uic</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt4-uic3">
        <term><command>uic3</command></term>
        <listitem>
          <para>est un outil pour générer du code Qt4 hors des fichiers de
          l'interface utilisateur générés par la version Qt3 de
          <command>designer</command>.</para>
          <indexterm zone="qt4 qt4-uic3">
            <primary sortas="b-uic3">uic3</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
