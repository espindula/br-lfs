<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>
<sect1 id="aboutlvm">
  <?dbhtml filename="aboutlvm.html"?>
  <sect1info>
    <othername>$LastChangedBy : randy $</othername>
    <date>$Date : 2013-02-11 19:51:17 +0100 (Mon, 11 Feb 2013) $</date>
  </sect1info>
  <title>A propos de la gestion des volumes logiques (LVM)</title>
  <para>LVM gères les disques durs.  Il permet que de multiples disques et partitions
  soient combinés dans de gros <emphasis>groupes de volumes</emphasis>, assiste la création de sauvegardes
  au travers de <emphasis>snapshot</emphasis>, et permet le redimensionnement dynamique des volumes.
  Il peut également fournir une fonction de miroir similaire à une grappe de RAID 1.</para>
  <para>Une présentation complète de LVM est au-delà de la portée de cette introduction,
   mais les concepts de base sont présentés ci-dessous.</para>
  <para>Pour exécuter chacunes des commandes présentées ici, le paquet <xref linkend="lvm2"/>
  doit être installé. toutes les commandes doivent être lancées en tant qu'utilisateur <systemitem
  class="username">root</systemitem>.</para>
  <para>La gestion des disques avec LVM est accomplie en utilisant les concepts suivants&nbsp;:</para>
  <variablelist>
    <varlistentry>
      <term>Volumes physiques</term>
      <listitem><para>Il y a des disques ou des partitions physiques comme
      /dev/sda3 ou /dev/sdb.</para></listitem>
    </varlistentry>
    <varlistentry>
      <term>Groupes de volumes</term>
      <listitem><para>On appelle groupes de volumes physiques ce qui peut être manipulées par l'administrateur.
      Le nombre de volumes physiques qui constituent un groupe de volumes est arbitraire.
      Les volumes physiques peuvent être dynamiquement ajoutés ou supprimés à partir d'un groupe de volumes.
      </para></listitem>
    </varlistentry>
    <varlistentry>
      <term>Volumes logique</term>
      <listitem><para>Les groupes de volume peuvent être divisés en volumes logiques.
      Chaque volume logique peut être ainsi formaté individuellement comme s'il s'agissait d'une partition
      linux normal. Les volumes logiques peuvent être redimensionné dynamiquement par l'administrateur
      en fonction des besoins.</para></listitem>
    </varlistentry>
  </variablelist>
  <para>Pour donner un exemple concret, supposez que vous avez deux disques de 2 To.
  Supposons également qu'une grande quantité d'espace est nécessaire pour une très grosse base de données,
  monté en <filename class='directory'>/srv/mysql</filename>. Voila à quoi rassemblerait
  l'ensemble des initialisations des partitions&nbsp;:</para>

<screen>
<literal>Partition  Use    Size      Partition Type
/dev/sda1  /boot  100MB     83 (Linux)
/dev/sda2  /       10GB     83 (Linux)
/dev/sda3  swap     2GB     82 (Swap)
/dev/sda4  LVM    remainder 8e (LVM)
/dev/sdb1  swap     2GB     82 (Swap)
/dev/sdb2  LVM    remainder 8e (LVM)</literal>
</screen>
  <para>En premier initialisez les volumes physiques&nbsp;:</para>

<screen>
<userinput>pvcreate /dev/sda4 /dev/sdb2</userinput>
</screen>
  <para>Ensuite créez un groupe de volume appelé lfs-lvm:</para>

<screen>
<userinput>vgcreate lfs-lvm /dev/sda4  /dev/sdb2</userinput>
</screen>
  <para>L'état du groupe de volumes peut être vérifiés en lançant la commande
  <command>vgscan</command>. Maintenant créez les volumes logiques.   Comme il y a
   environ 3900 Go d'espace disponible, laissez environ 900 Go d'espace libre pour l'expansion.
   Notez que le volume logique appelé <emphasis>mysql</emphasis> est plus grand que chacun des disques
   physiques.</para>

<screen>
<userinput>lvcreate --name mysql --size 2500G lfs-lvm
lvcreate --name home  --size  500G lfs-lvm</userinput>
</screen>
  <para>Finallement les volumes logiques peuvent être formatés et montés. Dans cet exemple,
  Le système de fichier jfs (<xref linkend="jfsutils"/>) est utilisé pour la démonstration.</para>

<screen>
<userinput>mkfs -t ext4 /dev/lfs-lvm/home
mkfs -t jfs  /dev/lfs-lvm/mysql
mount /dev/lfs-lvm/home /home
mkdir -p /srv/mysql
mount /dev/lfs-lvm/mysql /srv/mysql</userinput>
</screen>
  <para>Les scripts de démarrage de LFS rendront automatiquement ces systèmes de fichiers disponible
  pour les scripts checkfs. L'édition du fichier <filename>/etc/fstab</filename>
  est nécessaire pour automatiquement le monter.</para>
  <para>Un volume logique peut acceuillir un système de fichier racine, mais nécessite l'utilisation d'un
  initramfs (initial RAM file system) et cela n'est pas présenté ici.</para>
  <para>Pour plus d'information sur LVM, voir le <ulink
  url="http://www.tldp.org/HOWTO/LVM-HOWTO/">LVM HOWTO</ulink> et
  les pages de manuel lvm.</para>
</sect1>
