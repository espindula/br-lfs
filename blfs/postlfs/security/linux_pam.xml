<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
   "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY Linux_PAM-download-http "http://www.kernel.org/pub/linux/libs/pam/pre/library/Linux-PAM-&Linux_PAM-version;.tar.bz2">
  <!ENTITY Linux_PAM-download-ftp "ftp://ftp.kernel.org/pub/linux/libs/pam/pre/library/Linux-PAM-&Linux_PAM-version;.tar.bz2">
  <!ENTITY Linux_PAM-md5sum    "34938b4f2449d4d3b2ffdbf354257205">
  <!ENTITY Linux_PAM-size      "364 KB">
  <!ENTITY Linux_PAM-buildsize "6.1 MB">
  <!ENTITY Linux_PAM-time      "0.07 SBU">
]>

<sect1 id="Linux_PAM" xreflabel="Linux-PAM-&Linux_PAM-version;">
<sect1info>
<othername>$LastChangedBy: dj $</othername>
<date>$Date: 2005-06-16 06:20:37 $</date>
</sect1info>
<?dbhtml filename="linux_pam.html"?>
<title>Linux-PAM-&Linux_PAM-version;</title>
<indexterm zone="Linux_PAM">
<primary sortas="a-PAM_linux">PAM(Linux)</primary></indexterm>

<sect2>
<title>Introduction to <application>Linux-<acronym>PAM</acronym></application>
</title>

<para>The <application>Linux-<acronym>PAM</acronym></application> package 
contains Pluggable Authentication Modules. This is useful to enable the local 
system administrator to choose how applications authenticate users.</para>

<sect3><title>Package information</title>
<itemizedlist spacing='compact'>
<listitem><para>Download (HTTP): <ulink
url="&Linux_PAM-download-http;"/></para></listitem>
<listitem><para>Download (FTP): <ulink
url="&Linux_PAM-download-ftp;"/></para></listitem>
<listitem><para>Download MD5 sum: &Linux_PAM-md5sum;</para></listitem>
<listitem><para>Download size: &Linux_PAM-size;</para></listitem>
<listitem><para>Estimated disk space required:
&Linux_PAM-buildsize;</para></listitem>
<listitem><para>Estimated build time:
&Linux_PAM-time;</para></listitem></itemizedlist>
</sect3>

<sect3><title>Additional download</title>
<itemizedlist spacing='compact'>
<listitem><para>Required Patch: <ulink 
url="&patch-root;/Linux-PAM-&Linux_PAM-version;-linkage-2.patch"/></para>
</listitem></itemizedlist>
</sect3>

<sect3><title><application>Linux-<acronym>PAM</acronym></application> 
dependencies</title>
<sect4><title>Recommended</title>
<para><xref linkend="cracklib"/></para>
</sect4>

<sect4><title>Optional</title>
<para><ulink 
url="http://sourceforge.net/projects/sgmltools-lite/">sgmltools-lite</ulink>
and <xref linkend="db"/> (for pam_userdb module)</para>
</sect4>
</sect3>

</sect2>

<sect2>
<title>Installation of 
<application>Linux-<acronym>PAM</acronym></application></title>

<para>Install <application>Linux-<acronym>PAM</acronym></application> by 
running the following commands:</para>

<screen><userinput><command>patch -Np1 -i ../Linux-PAM-&Linux_PAM-version;-linkage-2.patch &amp;&amp;
autoconf &amp;&amp;
sed -i 's/(mandir)/(MANDIR)/g' modules/Simple.Rules &amp;&amp;
./configure --enable-static-libpam --with-mailspool=/var/mail \
    --enable-read-both-confs --sysconfdir=/etc &amp;&amp;
make</command></userinput></screen>

<para>Now, as the root user:</para>

<screen><userinput role='root'><command>make install &amp;&amp;
mv /lib/libpam.a /lib/libpam_misc.a /lib/libpamc.a /usr/lib &amp;&amp;
rm /lib/libpam{,c,_misc}.so &amp;&amp;
ln -sf ../../lib/libpam.so.&Linux_PAM-version; /usr/lib/libpam.so &amp;&amp;
ln -sf ../../lib/libpam_misc.so.&Linux_PAM-version; /usr/lib/libpam_misc.so &amp;&amp;
ln -sf ../../lib/libpamc.so.&Linux_PAM-version; /usr/lib/libpamc.so</command></userinput></screen>

</sect2>

<sect2>
<title>Command explanations</title>

<para><command>autoconf</command>:  This is necessary because the patch 
changes where <acronym>PAM</acronym> looks for the 
<application>cracklib</application> libraries, requiring regeneration of the 
configure script.</para>

<para><command>sed -i 's/(mandir)/(MANDIR)/g'
modules/Simple.Rules</command>: This command puts the module manpages
with the rest of the manpages in 
<filename>/usr/share/man</filename>.</para>

<para><option>--enable-static-libpam</option>: This switch builds
static <acronym>PAM</acronym> libraries as well as the dynamic libraries.</para>

<para><parameter>--with-mailspool=/var/mail</parameter>: This switch makes
the mailspool directory <acronym>FHS</acronym> compliant.</para>

<para><option>--enable-read-both-confs</option>: This switch lets the local
administrator choose which configuration file setup to use.</para>

<para><command>mv /lib/libpam.a /lib/libpam_misc.a /lib/libpamc.a
/usr/lib</command>: This command moves the static libraries to
<filename>/usr/lib</filename> to comply with <acronym>FHS</acronym> 
guidelines.</para>

<para><command>rm /lib/libpam{,c,_misc}.so; ln -sf ... /usr/lib/...</command>: 
These commands move the <filename class='symlink'>.so</filename> symlinks from 
<filename class='directory'>/lib</filename> to 
<filename class='directory'>/usr/lib</filename>.</para>

</sect2>

<sect2>
<title>Configuring 
<application>Linux-<acronym>PAM</acronym></application></title>

<sect3 id="pam-config"><title>Config files</title>
<para><filename>/etc/pam.d/*</filename> or 
<filename>/etc/pam.conf</filename></para>
<indexterm zone="Linux_PAM pam-config">
<primary sortas="e-etc-pam.d">/etc/pam.d/*</primary></indexterm>
<indexterm zone="Linux_PAM pam-config">
<primary sortas="e-etc-pam.conf">/etc/pam.conf</primary></indexterm>
</sect3>

<sect3><title>Configuration Information</title>

<para>Configuration information is placed in 
<filename class='directory'>/etc/pam.d/</filename> or
<filename>/etc/pam.conf</filename> depending on user preference.  Below are
example files of each type:</para>

<screen># Begin /etc/pam.d/other

auth            required        pam_unix.so     nullok
account         required        pam_unix.so
session         required        pam_unix.so
password        required        pam_unix.so     nullok

# End /etc/pam.d/other

# Begin /etc/pam.conf

other           auth            required        pam_unix.so     nullok
other           account         required        pam_unix.so
other           session         required        pam_unix.so
other           password        required        pam_unix.so     nullok

# End /etc/pam.conf</screen>

<para>The <application><acronym>PAM</acronym></application> man page
(<command>man pam</command>) provides a good starting point for descriptions 
of fields and allowable entries.  The 
<ulink url="http://www.kernel.org/pub/linux/libs/pam/Linux-PAM-html/pam.html">
Linux-PAM guide for system administrators</ulink>
is recommended for further reading.</para>

<para>Refer to 
<ulink url="http://www.kernel.org/pub/linux/libs/pam/modules.html"/>
for a list of various modules available.</para>

<note><para>You should now reinstall the <xref linkend="shadow"/> 
package.</para></note>
</sect3>

</sect2>

<sect2>
<title>Contents</title>

<segmentedlist>
<segtitle>Installed Program</segtitle>
<segtitle>Installed Libraries</segtitle>
<segtitle>Installed Directories</segtitle>
<seglistitem>
<seg>unix_chkpwd and pam_tally</seg>
<seg>libpam.[so,a], libpamc.[so,a] and libpam_misc.[so,a]</seg>
<seg>/etc/pam.d, /etc/security, /lib/security and /usr/include/security</seg>
</seglistitem>
</segmentedlist>

<variablelist>
<bridgehead renderas="sect3">Short Descriptions</bridgehead>
<?dbfo list-presentation="list"?>

<varlistentry id="unix_chkpwd">
<term><command>unix_chkpwd</command></term>
<listitem><para>checks user passwords that are stored
in read protected databases.</para>
<indexterm zone="Linux_PAM unix_chkpwd">
<primary sortas="b-unix_chkpwd">unix_chkpwd</primary></indexterm>
</listitem>
</varlistentry>

<varlistentry id="libpam">
<term><filename class='libraryfile'>libpam.[so,a]</filename></term>
<listitem><para>provide the interfaces between applications and the 
<acronym>PAM</acronym> modules.</para>
<indexterm zone="Linux_PAM libpam">
<primary sortas="c-libpam">libpam.[so,a]</primary></indexterm>
</listitem>
</varlistentry>
</variablelist>

</sect2>

</sect1>

