<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY openssl-download-http "http://www.openssl.org/source/openssl-&openssl-version;.tar.gz">
  <!ENTITY openssl-download-ftp  "ftp://ftp.openssl.org/source/openssl-&openssl-version;.tar.gz">
  <!ENTITY openssl-md5sum        "40b6ea380cc8a5bf9734c2f8bf7e701e">
  <!ENTITY openssl-size          "3.9 Mio">
  <!ENTITY ca-bundle-download    "http://anduin.linuxfromscratch.org/files/BLFS/BLFS-ca-bundle-&ca-bundle-version;.tar.bz2">
  <!ENTITY ca-bundle-size        "196 Kio">
  <!ENTITY ca-bundle-md5sum      "83493398428df943364aa41c609f51f7">
  <!ENTITY openssl-buildsize     "48 MB">
  <!ENTITY openssl-time          "1.0 SBU (ajouter pour exécuter la suite de tests)">
]>

<sect1 id="openssl" xreflabel="OpenSSL-&openssl-version;">
  <?dbhtml filename="openssl.html"?>

  <sect1info>
    <othername>$LastChangedBy: ken $</othername>
    <date>$Date: 2010-11-18 02:06:14 +0100 (jeu 18 nov 2010) $</date>
  </sect1info>

  <title>OpenSSL-&openssl-version;</title>

  <indexterm zone="openssl">
    <primary sortas="a-OpenSSL">OpenSSL</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à OpenSSL</title>

    <para>Le paquet <application>OpenSSL</application> contient des outils et
    des bibliothèques de gestion en matière de chiffrement. Elles sont utiles pour
    fournir des fonctions de cryptographie à d'autres paquets, en particulier 
    <application>OpenSSH</application>, des applications de messagerie
    électronique et des navigateurs Internet (pour accéder à des sites
    commençant par HTTPS).</para>

    &lfs65_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&openssl-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&openssl-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &openssl-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &openssl-size;</para>
      </listitem>
      <listitem>
        <para>CA Bundle Download: <ulink url="&ca-bundle-download;"/></para>
      </listitem>
      <listitem>
        <para>CA Bundle size: &ca-bundle-size;</para>
      </listitem>
      <listitem>
        <para>CA Bundle MD5 sum: &ca-bundle-md5sum;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &openssl-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &openssl-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>
    <itemizedlist spacing='compact'>
      <listitem>
        <para>Correctifs requis&nbsp;: <ulink
        url="&patch-root;/openssl-&openssl-version;-fix_manpages-1.patch"/></para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances d'OpenSSL</bridgehead>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional"><xref linkend="mitkrb"/> or
    <xref linkend="heimdal"/>, et <xref linkend="bc"/> (requis pour une total protection
    de la suite de tests pendant la construction)</para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url='&blfs-wiki;/OpenSSL'/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de OpenSSL</title>

    <para>Installez <application>OpenSSL</application> en lançant 
    les commandes suivantes&nbsp;:</para>

<screen><userinput>patch -Np1 -i ../openssl-&openssl-version;-fix_manpages-1.patch &amp;&amp;
tar -vxf ../BLFS-ca-bundle-&ca-bundle-version;.tar.bz2 &amp;&amp;

./config --prefix=/usr         \
         --openssldir=/etc/ssl \
         shared                \
         zlib-dynamic          &amp;&amp;
make</userinput></screen>

    <para>Pour tester les résultats, lancez&nbsp;: <command>make test</command>.</para>

    <!-- <para>Pour tester les résultats, lancez&nbsp;: <command>make test</command>.  Note that the
    test results/output depend on the availability of /etc/ssl/openssl.cnf.  If
    running the tests for the first time run the following as the 
    <systemitem class="username">root</systemitem> user before running the
    tests:</para>

<screen role="root"><userinput>install -v -m755 d /etc/ssl &amp;&amp;
install -v ./apps/openssl.cnf /etc/ssl/</userinput></screen> -->

    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>make MANDIR=/usr/share/man install                &amp;&amp;

cp -v -r certs /etc/ssl                           &amp;&amp;

install -v -d -m755 /usr/share/doc/openssl-&openssl-version; &amp;&amp;
cp      -v -r       doc/{HOWTO,README,*.{txt,html,gif}} \
                    /usr/share/doc/openssl-&openssl-version;</userinput></screen>

    <para>Tant que vous êtes en tant qu'utilisateur 
    <systemitem class="username">root</systemitem>, créez un seul fichier qui
    contient tous les certificats installés&nbsp;:</para>

<screen role="root"><userinput>for pem in /etc/ssl/certs/*.pem
do
   cat $pem
   echo ""
done &gt; /etc/ssl/ca-bundle.crt</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para>
    <command>tar -vxf ../BLFS-ca-bundle-&ca-bundle-version;.tar.bz2</command>>:nbsp;:
      <application>OpenSSL</application> n'inclut plus de certificat root. Ce paquet
      ajoute les certificats root fournis par mozilla.org.</para>

    <para><parameter>shared</parameter>&nbsp;: Ce paramètre oblige la création 
    des bibliothèques partagées ainsi que des bibliothèques statiques.</para>

    <para><parameter>zlib-dynamic</parameter>&nbsp;: Ce paramètre ajoute
    une fonction de compression/décompression en utilisant la bibliothèque
    <filename class="libraryfile">libz</filename>.</para>

    <para><option>no-rc5 no-idea</option>&nbsp;: Ajouté à la commande
    <command>./config</command>, cela éliminera la construction de ces méthodes
    de chiffrement. Il se peut que des licences d'autorisation soient nécessaires
    pour que vous utilisiez une de ces méthodes dans vos projets.</para>

    <para><command>make MANDIR=/usr/share/man install</command>&nbsp;: Cette
    commande installe <application>OpenSSL</application> avec les pages de man
    dans <filename class='directory'>/usr/share/man</filename> et non dans
    <filename class='directory'>/etc/ssl/man</filename>.</para>

    <!-- <para><option>enable-tlsext</option>>:nbsp;: When added to the
    <command>./config</command> command, this switch will enable TLS
    Extensions. Currently this is only RFC 3546 et 4507bis for Server Name
    Indication.  This allows the use of multiple SSL certificates with multiple
    virtual hosts in Apache, while using only one IP address et one port for
    all virtual hosts.</para> -->

    <!-- <para><option>zlib-dynamic</option>>:nbsp;: When added to the
    <command>./config</command> command, this switch will enable 
    use of <filename>libz.so</filename> for compression/decompression.</para> -->

    <para><command>cp -v -r certs /etc/ssl</command>&nbsp;: Ceci installe les
      certificats échantillon et la documentation incluse avec <application>OpenSSL</application>
      et les certificats extraits du paquet BLFS-ca-bundle-&ca-bundle-version;.</para>

    <para><command>for pem in /etc/ssl/certs/*.pem...</command>&nbsp;: Cet
    ensemble de commandes crée un bouquet de certificats en un seul fichier
    (<filename>/etc/ssl/ca-bundle.crt</filename>) utilisable par de nombreux
    autres paquets. <filename>ca-bundle.crt</filename> devrait être recréé
    à chaque fois qu'un certificat nouveau ou modifié est ajouté à 
    <filename class="directory">/etc/ssl/certs</filename>.</para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration d'OpenSSL</title>

    <sect3 id="openssl-config">
      <title>Fichiers de configuration</title>

      <para><filename>/etc/ssl/openssl.cnf</filename></para>

      <indexterm zone="openssl openssl-config">
        <primary sortas="e-etc-ssl-openssl.cnf">/etc/ssl/openssl.cnf</primary>
      </indexterm>

    </sect3>

    <sect3>
      <title>Informations de configuration</title>

      <para>La plupart des gens qui veulent seulement utiliser <application>OpenSSL</application>
      pour fournir des fonctions aux autres programmes tels que
      <application>OpenSSH</application> et des navigateurs Internet n'auront
      pas à s'inquiéter de la configuration de <application>OpenSSL</application>. 
      La configuration d'<application>OpenSSL</application> est un thème avancé
      qui ceux qui en font savent en principe ce qu'ils doivent faire ou ne pas
      faire ou où trouver comment faire quelque chose.</para>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>c_rehash et openssl</seg>
        <seg>libcrypto.{so,a}, libssl.{so,a}, et additional encryption
        libraries in /usr/lib/engines/ (lib4758cca.so, libaep.so,
        libatalla.so, libcapi.so, libchil.so, libcswift.so, libgmp.so,
        libgost.so, libnuron.so, libpadlock.so, libsureware.so, et
        libubsec.so)</seg>
        <seg>/etc/ssl, /usr/include/openssl, /usr/lib/engines
        et /usr/share/doc/openssl-&openssl-version;</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="c_rehash">
        <term><command>c_rehash</command></term>
        <listitem>
          <para>est un script <application>Perl</application> qui analyse
          tous les fichiers d'un répertoire et qui ajoute des liens symboliques
          à leurs valeurs hachées.</para>
          <indexterm zone="openssl c_rehash">
            <primary sortas="b-c_rehash">c_rehash</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="openssl-prog">
        <term><command>openssl</command></term>
        <listitem>
          <para>est un outil en ligne de commande permettant d'utiliser diverses
          fonctions de la bibliothèque de chiffrement d'<application>OpenSSL</application>
          depuis le shell. On peut l'utiliser pour diverses fonctions qui sont 
          documentées dans <command>man 1 openssl</command>.</para>
          <indexterm zone="openssl openssl-prog">
            <primary sortas="b-openssl">openssl</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libcrypto">
        <term><filename class='libraryfile'>libcrypto.{so,a}</filename></term>
        <listitem>
          <para>implémente une grande variété d'algorithmes de chiffrement 
          utilisés dans divers standards Internet. Les services offerts par
          cette bibliothèque sont utilisés par des implémentations
          <application>OpenSSL</application> de SSL, de TLS et de S/MIME, et
          on les utilise aussi pour implémenter
          <application>OpenSSH</application>, <application>OpenPGP</application>,
          et d'autres standards de chiffrement.</para>
          <indexterm zone="openssl libcrypto">
            <primary sortas="c-libcrypto">libcrypto.{so,a}</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libssl">
        <term><filename class='libraryfile'>libssl.{so,a}</filename></term>
        <listitem>
          <para>implémente le protocoles <foreignphrase>Secure Sockets Layer</foreignphrase>
          (SSL v2/v3) et <foreignphrase>Transport Layer Security</foreignphrase>
          (TLS v1). Elle offre une API riche, sur laquelle vous pouvez trouver
          de la documentation en lançant <command>man 3 ssl</command>.</para>
          <indexterm zone="openssl libssl">
            <primary sortas="c-libssl">libssl.{so,a}</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
