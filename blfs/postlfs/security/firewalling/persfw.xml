<?xml version="1.0" encoding="ISO-8859-1"?>
<sect3 id="postlfs-security-fw-persFw" xreflabel="Personal Firewall">
<title>Un pare-feu personnel</title>

<para>Un pare-feu personnel est supposé vous laisser l'accès à tous les services
offerts sur internet, mais fait en sorte que votre machine est sécurisé et que
vos données restent privées.</para>

<para>Ci-dessous est une version légèrement modifiée des recommandations de
Rusty Russell à partir de "<ulink
url="http://www.netfilter.org/documentation/HOWTO/packet-filtering-HOWTO.html">Linux
2.4 Packet Filtering HOWTO</ulink>":</para>

<screen><userinput><command>cat &gt; /etc/rc.d/init.d/firewall &lt;&lt; "EOF"</command>
#!/bin/sh

# Début $rc_base/init.d/firewall

# Insertion des modules de traces de connexion (pas nécessaire si intégrés au
# noyau).
modprobe ip_tables
modprobe iptable_filter
modprobe ip_conntrack
modprobe ip_conntrack_ftp
modprobe ipt_state
modprobe ipt_LOG

# permet les connexions local uniquement
iptables -A INPUT  -i lo -j ACCEPT
# free output on any interface to any ip for any service (equal to -P ACCEPT)
iptables -A OUTPUT -j ACCEPT

# autorise les réponses à des connexions déjà établies
# et permet les nouvelles connexions en relation avec celles déjà établies (par
# exemple active-ftp)
iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT

# Enregistre tout le reste:  Quelle est la dernière vulnérabilité de Windows?
iptables -A INPUT -j LOG --log-prefix "FIREWALL:INPUT "

# Met en place une politique saine:    tout ce qui n'est pas accepté &gt; /dev/null
iptables -P INPUT    DROP
iptables -P FORWARD  DROP
iptables -P OUTPUT   DROP

# soit verbeux pour les adresses dynamiques (pas nécessaire dans le cas des adresses IP statiques)
echo 2 &gt; /proc/sys/net/ipv4/ip_dynaddr

# désactive ExplicitCongestionNotification - trop de routeurs les ignorent encore
echo 0 &gt; /proc/sys/net/ipv4/tcp_ecn

# Fin $rc_base/init.d/firewall
<command>EOF</command></userinput></screen>

<para>Son script est assez simple, il 'oublie' (drop) tout trafic venant sur
votre ordinateur qui n'a pas été initié à partir de votre machine, mais aussi
longtemps que vous surfez simplement sur internet, vous ne risquez pas
d'excéder ces limites.</para>

<para>Si vous rencontrez fréquemment certains délais pour accéder à des serveurs
ftp, jetez un oeil sur <xref linkend="postlfs-security-fw-busybox"/> - 
<xref linkend="postlfs-security-fw-BB-4"/>.</para>

<para>Même si vous avez des démons ou services tournant sur votre machine, ils
seront inaccessibles partout ailleurs que sur votre machine. Si vous souhaitez
permettre l'accès à des services sur votre machine, tels que ssh ou ping,
regardez <xref linkend="postlfs-security-fw-busybox"/>.</para> 

</sect3>
