<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  <!ENTITY linux-pam-download-http "http://linux-pam.org/library/Linux-PAM-&linux-pam-version;.tar.bz2">
  <!ENTITY linux-pam-download-ftp  " ">
  <!ENTITY linux-pam-md5sum        "9f90888cd22212a6b5af2920f4eaaf1b">
  <!ENTITY linux-pam-size          "1.1 Mo">
  <!ENTITY linux-pam-buildsize     "36 Mo">
  <!ENTITY linux-pam-time          "0.3 SBU">
  <!ENTITY linux-pam-docs-download "http://linux-pam.org/documentation/Linux-PAM-&linux-pam-version;-docs.tar.bz2">
  <!ENTITY linux-pam-docs-md5sum   "808054213e884e69e3f7045d80700da1">
  <!ENTITY linux-pam-docs-size     "152 Ko">
  <!ENTITY debian-pam-docs         "http://debian.securedservers.com/kernel/pub/linux/libs/pam">
]>
<sect1 id="linux-pam" xreflabel="Linux-PAM-&linux-pam-version;">
  <?dbhtml filename="linux-pam.html"?>
  <sect1info>
    <othername>$LastChangedBy&nbsp;: krejzi $</othername>
    <date>$Date&nbsp;: 2012-09-23 22:08:11 +0200 (Sun, 23 Sep 2012) $</date>
  </sect1info>
  <title>Linux-PAM-&linux-pam-version;</title>
  <indexterm zone="linux-pam">
    <primary sortas="a-Linux-PAM">Linux-PAM</primary>
  </indexterm>
  <sect2 role="package">
    <title>Introduction à Linux-PAM</title>
    <para>
		Le paquet <application>Linux-PAM</application> contient des
		<foreignphrase>Pluggable Authentication Modules</foreignphrase> (modules
		d'authentification connectables). C'est utile pour permettre à
		l'administrateur système local de choisir la façon dont s'authentifient les
		utilisateurs des applications.
    </para>
		&lfs75lfs76_checked;
    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
    <title>Optional Documentation</title>
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&linux-pam-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&linux-pam-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &linux-pam-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &linux-pam-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &linux-pam-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &linux-pam-time;</para>
      </listitem>
    </itemizedlist>
    <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Documentation facultative&nbsp;: <ulink url="&linux-pam-docs-download;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement MD5sum: &linux-pam-docs-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp; &linux-pam-docs-size;</para>
      </listitem>
    </itemizedlist>
    <bridgehead renderas="sect3">Dépendances de Linux-PAM</bridgehead>
    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      <xref linkend="db"/>,
      <xref linkend="cracklib"/>,
      <xref linkend="libtirpc"/> et
      <ulink url="http://www.prelude-ids.org/">Prelude</ulink>
    </para>
    <bridgehead renderas="sect4">Facultatives (Pour reconstruire la documentation)</bridgehead>
    <para role="optional">
      <xref linkend="DocBook"/>,
      <xref linkend="docbook-xsl"/>,
      <xref linkend="fop"/>,
      <xref linkend="libxslt"/> et
      <xref linkend="w3m"/>
    </para>
    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/linux-pam"/></para>
  </sect2>
  <sect2 role="installation">
    <title>Installation de Linux-PAM</title>
    <para>Si vous avez téléchargé la documentation, déballez l'archive tar en
    exécutant la commande suivante.</para>
<screen>
<userinput>tar -xf ../Linux-PAM-&linux-pam-version;-docs.tar.bz2 --strip-components=1</userinput>
</screen>
    <para>Installez <application>Linux-PAM</application> en
    lançant les commandes suivantes&nbsp;:</para>
<screen>
<userinput>./configure --prefix=/usr \
            --sysconfdir=/etc \
            --libdir=/usr/lib \
            --enable-securedir=/lib/security \
            --docdir=/usr/share/doc/Linux-PAM-&linux-pam-version; &amp;&amp;
make</userinput>
</screen>
    <para>Pour tester les résultats,
    le fichier de configuration suivant <filename>/etc/pam.d/other</filename>
    doit exister.
     </para>
    <caution>
      <title>Reinstallation ou mise à jour de Linux PAM</title>
      <para>
        Si vous avez un système avec Linux PAM installé et en fonctionnement, soyez attentif quand vous modifiez
        les fichiers dans 
        <filename class="directory">/etc/pam.d</filename>, car votre système peut devenir totalement inutilisable. Si vous souhaitez lancer les tests, vous n'avez pas besoin de créer un autre fichier
        <filename>/etc/pam.d/other</filename>. Le fichier installé peut être utilisé pour cela.
      </para>
      <para>
         Vous devez aussi être attentif que <command>make install</command>
         écrase les fichiers de configuration dans 
         <filename class="directory">/etc/security</filename> aussi bien que dans 
         <filename>/etc/environment</filename>. Dans le cas ou vous avez modifié ces fichiers, soyez certain de
          les avoir sauvegardé.
      </para>
    </caution>
    <para>
      Pour une première installation, créez le fichier de configuration en tapant les commandes suivantes
      en tant qu'utilisateur <systemitem class="username">root</systemitem>:
    </para>
<screen role="root">
<userinput>install -v -m755 -d /etc/pam.d &amp;&amp;
cat &gt; /etc/pam.d/other &lt;&lt; "EOF"
auth     required       pam_deny.so
account  required       pam_deny.so
password required       pam_deny.so
session  required       pam_deny.so
EOF</userinput>
</screen>
    <para>Maintenant lancez les tests en exécutant <command>make check</command>.</para>
    <para>Seulement dans le cas d'une première installation, supprimez le fichier de configuration créé plus haut en lançant la
    commande suivante en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>
<screen role="root">
<userinput>rm -rfv /etc/pam.d</userinput>
</screen>
    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>
<screen role="root">
<userinput>make install &amp;&amp;
chmod -v 4755 /sbin/unix_chkpwd &amp;&amp;
for file in pam pam_misc pamc
do
  mv -v /usr/lib/lib${file}.so.* /lib &amp;&amp;
  ln -sfv ../../lib/$(readlink /usr/lib/lib${file}.so) /usr/lib/lib${file}.so
done</userinput>
</screen>
  </sect2>
  <sect2 role="commands">
    <title>Explication des commandes</title>
    <para>
      <parameter>--enable-securedir=/lib/security</parameter>:
      Ce paramètre initialise l'emplacement pour les modules
      <application>PAM</application>.
    </para>
    <para>
      <command>chmod -v 4755 /sbin/unix_chkpwd</command>&nbsp;:
      Le programme d'aide <command>unix_chkpwd</command> doit être setuid
      afin que les processus non-<systemitem class="username">root</systemitem>
      puissent accéder au fichier shadow.
    </para>
  </sect2>
  <sect2 role="configuration">
    <title>Configuration de Linux-PAM</title>
    <sect3 id="pam-config">
      <title>Fichiers de configuration</title>
      <para>
        <filename>/etc/security/*</filename> and
        <filename>/etc/pam.d/*</filename>
      </para>
      <indexterm zone="linux-pam pam-config">
        <primary sortas="e-etc-security">/etc/security/*</primary>
      </indexterm>
      <indexterm zone="linux-pam pam-config">
        <primary sortas="e-etc-pam.d">/etc/pam.d/*</primary>
      </indexterm>
    </sect3>
    <sect3>
      <title>Informations de configuration</title>
      <para>
		  Les informations de configuration se trouvent dans
		  <filename class="directory">/etc/pam.d/</filename>.
		  Voici ci-dessous un fichier exemple&nbsp;:</para>
<screen>
<literal># Begin /etc/pam.d/other
auth            required        pam_unix.so     nullok
account         required        pam_unix.so
session         required        pam_unix.so
password        required        pam_unix.so     nullok
# End /etc/pam.d/other</literal>
</screen>
      <para>La page de man de <application>PAM</application>
      (<command>man pam</command>) offre un bon point de départ pour  des
      descriptions des champs et des entrées autorisées. Le <ulink
      url="http://www.linux-pam.org/Linux-PAM-html/Linux-PAM_SAG.html">
      Linux-PAM System Administrators' Guide</ulink> (guide de l'administrateur
      système Linux-PAM) est recommandé pour des informations supplémentaires.</para>
      <para>
        Référez vous à <ulink url="&debian-pam-docs;/modules.html"/> pour une liste
        des modules tiers disponibles.
      </para>
      <important>
        <para>Vous devriez maintenant réinstaller le paquet 
        <xref linkend="shadow"/>.</para>
      </important>
    </sect3>
  </sect2>
  <sect2 role="content">
    <title>Contenu</title>
    <segmentedlist>
      <segtitle>Programmes Installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>
      <seglistitem>
        <seg>
          mkhomedir_helper, pam_tally, pam_tally2,
          pam_timestamp_check, unix_chkpwd et
          unix_update
        </seg>
        <seg>
          libpam.so, libpamc.so and libpam_misc.so
        </seg>
        <seg>
          /etc/security,
          /lib/security,
          /usr/include/security et
          /usr/share/doc/Linux-PAM-&linux-pam-version;
        </seg>
      </seglistitem>
    </segmentedlist>
    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      <varlistentry id="mkhomedir_helper">
        <term><command>mkhomedir_helper</command></term>
        <listitem>
          <para>
            est un assistant binaire qui crée des répertoires home.
          </para>
          <indexterm zone="linux-pam mkhomedir_helper">
            <primary sortas="b-mkhomedir_helper">mkhomedir_helper</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="pam_tally">
        <term><command>pam_tally</command></term>
        <listitem>
          <para>
			  est utilisé pour interroger et manipuler le fichier compteur de login.
          </para>
          <indexterm zone="linux-pam pam_tally">
            <primary sortas="b-pam_tally">pam_tally</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="pam_tally2">
        <term><command>pam_tally2</command></term>
        <listitem>
          <para>
            est utilisé pour interroger et manipuler le fichier compteur de login sans
            certaines limitations de <command>pam_tally</command>.
          </para>
          <indexterm zone="linux-pam pam_tally2">
            <primary sortas="b-pam_tally2">pam_tally2</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="pam_timestamp_check">
        <term><command>pam_timestamp_check</command></term>
        <listitem>
          <para>
            est utilisé pour vérifier si l'horodatage par défaut est valide.
          </para>
          <indexterm zone="linux-pam pam_timestamp_check">
            <primary sortas="b-pam_timestamp_check">pam_timestamp_check</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="unix_chkpwd">
        <term><command>unix_chkpwd</command></term>
        <listitem>
          <para>
            est un assistant binaire qui vérifie le mot de passe de l'actuel utilisateur.
          </para>
          <indexterm zone="linux-pam unix_chkpwd">
            <primary sortas="b-unix_chkpwd">unix_chkpwd</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="unix_update">
        <term><command>unix_update</command></term>
        <listitem>
          <para>
            est un assistant binaire qui met à jour le mot de passe d'un utilisateur donné.
          </para>
          <indexterm zone="linux-pam unix_update">
            <primary sortas="b-unix_update">unix_update</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libpam">
        <term><filename class='libraryfile'>libpam.so</filename></term>
        <listitem>
          <para>fournit les interfaces entre les applications et les modules
          PAM.</para>
          <indexterm zone="linux-pam libpam">
            <primary sortas="c-libpam">libpam.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect2>
</sect1>
