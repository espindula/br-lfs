<?xml version="1.0" encoding="ISO-8859-1"?>
<sect2>
<title>Configurer <application>Tripwire</application></title>

<sect3><title>Fichiers de configuration</title>
<para><filename class="directory">/etc/tripwire</filename></para>
</sect3>

<sect3><title>Informations de configuration</title>

<para><application>Tripwire</application> utilise un fichier de règles pour
déterminer quels sont les fichiers dont l'intégrité est vérifié. Le fichier de
règles par défaut (<filename>twpol.txt</filename> trouvé dans
<filename class="directory">/etc/tripwire/</filename>) est celui disponible lors de
l'installation de la RedHat 7.0 et est quelque peu ancien.</para>

<para>Les fichiers de règles sont aussi personnalisés et doivent être ajustés
à la distribution/installation de chacun. Quelques fichiers de règles
personnalisés peuvent être trouvés ci-dessous:</para>
<screen><ulink  url="http://home.iprimus.com.au/glombowski/blfs/twpol-all.txt"/>
Vérifie l'intégrité de tous les fichiers
<ulink url="http://home.iprimus.com.au/glombowski/blfs/twpol-lfs.txt"/>
Fichier de règles personnalisé pour un système de base LFS-3.0.
<ulink url="http://home.iprimus.com.au/glombowski/blfs/twpol-suse7.2.txt"/>
Fichier de règles personnalisé pour un système Suse-7.2.</screen>

<para>Téléchargez le fichier de règles personnalisé que vous souhaitez essayer,
copiez-le dans <filename class="directory">/etc/tripwire/</filename> et utilisez-le à la place de
<filename>twpol.txt</filename>. Il est néanmoins recommendé de créer votre
propre fichier de règles. Récupérez des idées des exemples ci-dessus et lisez
<filename>/usr/share/doc/tripwire/policyguide.txt</filename>.
<filename>twpol.txt</filename> est un bon fichier de règles pour les débutants
car il notera tout changement au système de fichiers et peut même être utilisé
comme moyen de garder traces d'installation/désinstallation de logiciels.</para>

<para>Une fois que vous avez transféré votre fichier de règles dans
<filename class="directory">/etc/tripwire/</filename>, vous pouvez commencer les étapes de
configuration:</para>

<screen><userinput><command>twadmin -m P /etc/tripwire/twpol.txt &amp;&amp;
tripwire -m i</command></userinput></screen>

<para>Lors de l'installation, <application>tripwire</application> va créer deux
clés&nbsp;: une clé pour le site et une clé locale qui seront stockées sous
<filename class="directory">/etc/tripwire/</filename>.</para>

</sect3>

<sect3><title>Informations sur l'utilisation</title>

<para>Pour utiliser tripwire après cela, lancez un rapport en lançant la
commande suivante:

<screen><userinput><command>tripwire -m c &gt; /etc/tripwire/report.txt</command></userinput></screen></para>

<para>Visualisez la sortie pour vérifier l'intégrité de vos fichiers. Un rapport
d'intégrité automatique peut être produit en utilisant l'outil cron pour
plannifier les lancements.</para>

<para>Merci de noter qu'après avoir lancé une vérification d'intégrité, vous
devez vérifier le rapport ou l'envoyer par courrier électronique et modifier
la base de données <application>Tripwire</application> avec les fichiers de votre
système pour que <application>Tripwire</application> ne continue pas à vous
indiquer que les fichiers que vous avez modifié volontairement représentent une
violation de sécurité. Pour cela, vous devez tout d'abord lancer
<command>ls -l /var/lib/tripwire/report/</command> et noter le nom du fichier le
plus récent commençant par <filename>linux-</filename> et finissant avec
<filename>.twr</filename>. Ce fichier crypté a été créé lors de la création du
dernier rapport et est nécessaire pour mettre à jour la base de données
<application>Tripwire</application> de votre système. Ensuite, tapez la commande
suivante en substituant de manière appropriée les '?'&nbsp;:</para>
<screen><userinput><command>tripwire -m u -r /var/lib/tripwire/report/linux-???????-??????.twr </command></userinput></screen>

<para>Vous serez amené dans vim avec une copie du rapport devant vous. Si tous
les changements sont bons, tapez simplement <command>:x</command> et après avoir
saisi votre clé locale, la base de données sera mise à jour. S'il existe des
fichiers pour lesquels vous souhaitez toujours être prévenu, merci de supprimer
le x devant le nom du fichier dans le rapport et tapez <command>:x</command>. </para>

</sect3>

<sect3><title>Changer le fichier de politique</title>

<para>Si vous n'êtes pas satisfait de votre fichier de politique et que vous
souhaitez le modifier ou en utiliser un nouveau, modifiez le fichier de politique
puis lancez les commandes suivantes&nbsp;:</para>
<screen><userinput><command>twadmin -m P /etc/tripwire/twpol.txt &amp;&amp;
tripwire -m i</command></userinput></screen>

</sect3>

</sect2>

