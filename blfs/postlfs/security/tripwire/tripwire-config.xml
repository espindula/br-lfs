<sect2>
<title>Configurer <application>Tripwire</application></title>

<sect3><title>Fichiers de configuration</title>
<para><filename class="directory">/etc/tripwire</filename></para>
</sect3>

<sect3><title>Informations de configuration</title>

<para><application>Tripwire</application> utilise un fichier de règles pour
déterminer quels sont les fichiers dont l'intégrité est vérifié. Le fichier de
règles par défaut (<filename>twpol.txt</filename> trouvé dans
<filename class="directory">/etc/tripwire/</filename>) est celui disponible lors de
l'installation de la RedHat 7.0 et est quelque peu ancien.</para>

<para>Les fichiers de règles sont aussi personnalisés et doivent être ajustés
à la distribution/installation de chacun. Quelques fichiers de règles
personnalisés peuvent être trouvés ci-dessous:</para>
<screen><ulink  url="http://home.iprimus.com.au/glombowski/blfs/twpol-all.txt"/>
Vérifie l'intégrité de tous les fichiers
<ulink url="http://home.iprimus.com.au/glombowski/blfs/twpol-lfs.txt"/>
Fichier de règles personnalisé pour un système de base LFS-3.0.
<ulink url="http://home.iprimus.com.au/glombowski/blfs/twpol-suse7.2.txt"/>
Fichier de règles personnalisé pour un système Suse-7.2.</screen>

<para>Téléchargez le fichier de règles personnalisé que vous souhaitez essayer,
copiez-le dans <filename class="directory">/etc/tripwire/</filename> et utilisez-le à la place de
<filename>twpol.txt</filename>. Il est néanmoins recommendé de créer votre
propre fichier de règles. Récupérez des idées des exemples ci-dessus et lisez
<filename>/usr/share/doc/tripwire/policyguide.txt</filename>.
<filename>twpol.txt</filename> est un bon fichier de règles pour les débutants
car il notera tout changement au système de fichiers et peut même être utilisé
comme moyen de garder traces d'installation/désinstallation de logiciels.</para>

<para>Une fois que vous avez transféré votre fichier de règles dans
<filename class="directory">/etc/tripwire/</filename>, vous pouvez commencer les étapes de
configuration:</para>

<screen><userinput><command>twadmin -m P /etc/tripwire/twpol.txt &amp;&amp;
tripwire -m i</command></userinput></screen>

<para>Lors de la configuration, <application>tripwire</application> va créer deux clés: une clé pour le
site et une clé locale qui seront stockées sous <filename
class="directory">/etc/tripwire/</filename>.</para>

</sect3>

<sect3><title>Informations sur l'utilisation</title>

<para>Pour utiliser tripwire après cela, lancez un rapport en lançant la
commande suivante:

<screen><userinput><command>tripwire -m c &gt; /etc/tripwire/report.txt</command></userinput></screen></para>

<para>View the output to check the integrity of your files. An automatic
integrity report can be produced by using a cron facility to schedule
the runs. </para>

<para>Please note that after you run an integrity check, you must check
the report or email and then modify the
<application>Tripwire</application> database of the files
on your system so that <application>Tripwire</application> will not continually notify you that
files you intentionally changed are a security violation. To do this you
must first <command>ls /var/lib/tripwire/report/</command> and note
the name of the newest file which starts with <filename>linux-</filename> and 
ends in <filename>.twr</filename>. This encrypted file was created during the 
last report creation and is needed to update the
<application>Tripwire</application> database of your 
system. Then, type in the following command making the appropriate 
substitutions for '?':</para>
<screen><userinput><command>tripwire -m u -r /var/lib/tripwire/report/linux-???????-??????.twr </command></userinput></screen>

<para>You will be placed into vim with a copy of the report in front of you. If 
all the changes were good, then just type <command>:x</command> and after 
entering your local key, the database will be updated. If there are files which 
you still want to be warned about, please remove the x before the filename in 
the report and type <command>:x</command>. </para>

</sect3>

<sect3><title>Changing the Policy File</title>

<para>If you are unhappy with your policy file and would like to modify it or 
use a new one, modify the policy file and then execute the following
commands:</para>
<screen><userinput><command>twadmin -m P /etc/tripwire/twpol.txt &amp;&amp;
tripwire -m i</command></userinput></screen>

</sect3>

</sect2>

