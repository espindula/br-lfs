<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

    <!-- Inserted as a reminder to do this. The mention of a test suite
         is usually right before the root user installation commands. Please
         delete these 12 (including one blank) lines after you are done.-->

    <!-- Use one of the two mentions below about a test suite,
         delete the line that is not applicable. Of course, if the
         test suite uses syntax other than "make check", revise the
         line to reflect the actual syntax to run the test suite -->

    <!-- <para>Ce paquet n'est pas fourni avec une suite de tests.</para> -->
    <!-- <para>Pour tester les résultats, lancez&nbsp;: <command>make check</command>.</para> -->

  <!ENTITY fam-download-http "http://gd.tuwien.ac.at/opsys/linux/gentoo/distfiles/fam-&fam-version;.tar.gz">
  <!ENTITY fam-download-ftp "ftp://oss.sgi.com/projects/fam/download/stable/fam-&fam-version;.tar.gz">
  <!ENTITY fam-md5sum "1bf3ae6c0c58d3201afc97c6a4834e39">
  <!ENTITY fam-size "301 Kio">
  <!ENTITY fam-buildsize "7.7 Mio">
  <!ENTITY fam-time "0.26 SBU">
]>

<sect1 id="fam" xreflabel="FAM-&fam-version;">
  <?dbhtml filename="fam.html"?>

  <sect1info>
    <othername>$LastChangedBy: randy $</othername>
    <date>$Date: 2007-04-04 21:42:53 +0200 (mer, 04 avr 2007) $</date>
  </sect1info>

  <title>FAM-&fam-version;</title>

  <indexterm zone="fam">
    <primary sortas="a-FAM">FAM</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à FAM</title>

    <para>Le paquet <application>FAM</application> contient un moniteur de modifications de fichiers
    (<foreignphrase>File Alteration Monitor</foreignphrase>) qui est utile pour notifier les applications de
    modifications du système de fichiers.</para>

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&fam-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&fam-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &fam-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &fam-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &fam-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &fam-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>
    <itemizedlist spacing='compact'>
      <listitem>
        <para>Correctif Dnotify (recommandé)&nbsp;:
        <ulink url="&patch-root;/fam-&fam-version;-dnotify-1.patch"/></para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de FAM</bridgehead>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required"><xref linkend="portmap"/></para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/fam"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de FAM</title>

    <para>Installez <application>FAM</application> en lançant
    les commandes suivantes&nbsp;:</para>

<screen><userinput>patch -Np1 -i ../fam-&fam-version;-dnotify-1.patch &amp;&amp;
chmod -v 755 configure &amp;&amp;
autoreconf -f -i &amp;&amp;
./configure --prefix=/usr --sysconfdir=/etc &amp;&amp;
make</userinput></screen>

    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>make install</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para><command>patch -Np1 -i ../fam-&fam-version;-dnotify-1.patch</command>&nbsp;:
    Ce correctif permet à <application>FAM</application> d'utiliser
    le mécanisme dnotify du noyau Linux pour informer le processus qui l'appelle des
    modifications d'un fichier plutôt que de demander au système de fichiers ses
    modifications.</para>

    <para><command>chmod -v 755 configure</command>&nbsp;: <command>configure</command> est
    paramétré en lecture seule et <command>autoreconf</command> échouera si les droits ne sont pas
    modifiés.</para>

    <para><command>autoreconf -f -i</command>&nbsp;: Autotools doit se reconstruire
    car le correctif dnotify modifie <filename>configure.ac</filename> et
    <filename>Makefile.am</filename>.</para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de FAM</title>

    <sect3 id='fam-config'>
      <title>Fichiers de configuration</title>

      <para><filename>/etc/rpc</filename>,
      <filename>/etc/fam.conf</filename>,
      <filename>/etc/inetd.conf</filename> or
      <filename>/etc/xinetd.conf</filename> or
      <filename>/etc/xinetd.d/fam</filename></para>

      <indexterm zone="fam fam-config">
        <primary sortas="e-etc-rpc">/etc/rpc</primary>
      </indexterm>

      <indexterm zone="fam fam-config">
        <primary sortas="e-etc-fam.conf">/etc/fam.conf</primary>
      </indexterm>

      <indexterm zone="fam fam-config">
        <primary sortas="e-etc-inetd.conf">/etc/inetd.conf</primary>
      </indexterm>

      <indexterm zone="fam fam-config">
        <primary sortas="e-etc-xinetd.conf">/etc/xinetd.conf</primary>
      </indexterm>

      <indexterm zone="fam fam-config">
        <primary sortas="e-etc-xinetd.d-sgi_fam">/etc/xinetd.d/sgi_fam</primary>
      </indexterm>

    </sect3>

    <sect3>
      <title>Informations de configuration</title>

      <para>Pour configurer le moniteur de modification de fichiers, effectuez les
      instructions suivantes en tant qu'utilisateur <systemitem class='username'>root</systemitem>.</para>

      <para>Si vous utilisez <command>inetd</command>, ajoutez l'entrée
      <application>FAM</application> à
      <filename>/etc/inetd.conf</filename> avec la commande suivante&nbsp;:</para>

<screen role="root"><userinput>echo "sgi_fam/1-2 stream  rpc/tcp wait root /usr/sbin/famd fam" \
    &gt;&gt; /etc/inetd.conf</userinput></screen>

      <para>Si vous utilisez <command>xinetd</command>, la commande suivante va créer le
      fichier <application>FAM</application> en tant que
      <filename>/etc/xinetd.d/sgi_fam</filename> (assurez-vous que le groupe
      <systemitem class="groupname">nogroup</systemitem> existe)&nbsp;:</para>

<screen role="root"><userinput>cat &gt;&gt; /etc/xinetd.d/sgi_fam &lt;&lt; "EOF"
<literal># Début de /etc/xinetd.d/sgi_fam

# description&nbsp;: FAM - file alteration monitor
    service sgi_fam
    {
        type            = RPC UNLISTED
        socket_type     = stream
        user            = root
        group           = nogroup
        server          = /usr/sbin/famd
        wait            = yes
        protocol        = tcp
        rpc_version     = 2
        rpc_number      = 391002
    }

# Fin de /etc/xinetd.d/sgi_fam</literal>
EOF</userinput></screen>

      <para id='fam-init'>Si vous n'avez pas installé de démon <command>inetd</command> et si
      vous ne souhaitez pas en installer un, vous pouvez aussi démarrer
      <command>famd</command> pendant l'amorçage du système en installant le script de démarrage
      <filename>/etc/rc.d/init.d/fam</filename> inclu dans le paquet
      <xref linkend="bootscripts"/>.</para>

<screen role="root"><userinput>make install-fam</userinput></screen>

      <indexterm zone="fam fam-init">
        <primary sortas="f-fam">fam</primary>
      </indexterm>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Installed Program</segtitle>
      <segtitle>Bibliothèque installée</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>famd</seg>
        <seg>libfam.{so,a}</seg>
        <seg>Aucun</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

    <varlistentry id="famd">
      <term><command>famd</command></term>
      <listitem>
        <para>est le démon du moniteur de modifications de fichiers.</para>
        <indexterm zone="fam famd">
          <primary sortas="b-famd">famd</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="libfam">
      <term><filename class='libraryfile'>libfam.{so,a}</filename></term>
      <listitem>
        <para>contient les fonctions qui supportent le moniteur d'affectation de fichiers.</para>
        <indexterm zone="fam libfam">
          <primary sortas="c-libfam">libfam.{so,a}</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    </variablelist>

  </sect2>

</sect1>
