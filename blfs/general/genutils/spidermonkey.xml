<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY SpiderMonkey-download-http
  "http://ftp.mozilla.org/pub/mozilla.org/js/js185-&spidermonkey-version;.tar.gz">
  <!ENTITY SpiderMonkey-download-ftp
  "ftp://ftp.mozilla.org/pub/mozilla.org/js/js185-&spidermonkey-version;.tar.gz">
  <!ENTITY SpiderMonkey-md5sum        "a4574365938222adca0a6bd33329cb32">
  <!ENTITY SpiderMonkey-size          "5.9 Mio">
  <!ENTITY SpiderMonkey-buildsize     "99 Mio">
  <!ENTITY SpiderMonkey-time          "1.1 SBU">
]>

<sect1 id="SpiderMonkey" xreflabel="SpiderMonkey-&spidermonkey-version;">
  <?dbhtml filename="SpiderMonkey.html"?>

  <sect1info>
    <othername>$LastChangedBy&nbsp;: ken $</othername>
    <date>$Date&nbsp;: 2012-06-20 21:22:59 +0200 (Wed, 20 Jun 2012) $</date>
  </sect1info>

  <title>SpiderMonkey-&spidermonkey-version;</title>

  <indexterm zone="SpiderMonkey">
    <primary sortas="a-SpiderMonkey">SpiderMonkey</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à SpiderMonkey</title>

    <para><application>SpiderMonkey</application> est le moteur JavaScript de
    Mozilla écrit en C/C++. La version la plus récente du code source implémente
    JavaScript 1.8.5.</para>

&lfs72_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&SpiderMonkey-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&SpiderMonkey-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &SpiderMonkey-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &SpiderMonkey-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &SpiderMonkey-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &SpiderMonkey-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de SpiderMonkey</bridgehead>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required"><xref linkend="nspr"/>,
    <xref linkend="python2"/> et
    <xref linkend="zip"/></para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/SpiderMonkey"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de SpiderMonkey</title>

    <para>Installez <application>SpiderMonkey</application> en lançant les commandes
    suivantes&nbsp;:</para>

<screen><userinput>cd js/src &amp;&amp;
sed -i 's#s \($(SHLIB_\(ABI\|EXACT\)_VER)\)#s $(notdir \1)#' Makefile.in &amp;&amp;
./configure --prefix=/usr --enable-threadsafe --with-system-nspr &amp;&amp;
make</userinput></screen>

    <para>Pour tester les résultats, lancez&nbsp;: <command>TZ=US/Pacific make check</command>.</para>

    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>make install</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explications des commandes</title>

    <para><command>sed -i 's#s \($(SHLIB_\(ABI\|EXACT\)_VER)\)#s $(notdir \1)#'
    Makefile.in</command>&nbsp;: Cette commande sed corrige 
    les liens symboliques de <filename>libmozjs185.so</filename> pour qu'ils soient relatifs et plus absolus.</para>

    <para>
      <command>TZ=US/Pacific make check</command>&nbsp;: Les tests de timezone ont été écrit pour être
      lancés dans la zone horaire Pacifique et suppose que le format de date est mm/dd/yyyy.
      La suite de tests fonctionne dans la zone horaire locale, 
      date format. The test suite runs in the local timezone, donc remplacer son environnement
      pour empêcher de nombreux échecs dans les tests de
      <command>check-date-format-tofte.js</command>.
    </para>
    
    <para>
      <option>--enable-threadsafe</option>&nbsp;: Ce paramètre
    active le support de plusieurs threads.</para>

    <para><option>--with-system-nspr</option>&nbsp;: Ce paramètre oblige
    le paquet à se lier à la version du système de <application>nspr</application>
    au lieu d'utiliser celle ancienne qu'il inclut.</para>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programme installé</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoire installé</segtitle>

      <seglistitem>
        <seg>js-config</seg>
        <seg>libmozjs185-1.0.a et libmozjs185.so</seg>
        <seg>/usr/include/js</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="js-config">
        <term><command>js-config</command></term>
        <listitem>
          <para>est utilisé pour trouver les drapeaux de compilation et de liens de <application>SpiderMonkey</application>.</para>
          <indexterm zone="SpiderMonkey js-config">
            <primary sortas="b-js-config">js-config</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libmozjs185">
        <term><filename class='libraryfile'>libmozjs185.so</filename></term>
        <listitem>
          <para>contient les fonctions de l'API de <application>Mozilla JavaScript</application>.</para>
          <indexterm zone="SpiderMonkey libmozjs185">
            <primary sortas="c-libmozjs185">libmozjs185.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
