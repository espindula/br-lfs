<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  <!ENTITY lua-download-http "http://www.lua.org/ftp/lua-&lua-version;.tar.gz">
  <!ENTITY lua-download-ftp  " ">
  <!ENTITY lua-md5sum        "dc7f94ec6ff15c985d2d6ad0f1b35654">
  <!ENTITY lua-size          "248 Ko">
  <!ENTITY lua-buildsize     "3.5 Mo">
  <!ENTITY lua-time          "Less than 0.1 SBU">
]>
<sect1 id="lua" xreflabel="Lua-&lua-version;">
  <?dbhtml filename="lua.html"?>
  <sect1info>
    <othername>$LastChangedBy: igor $</othername>
    <date>$Date: 2013-06-19 13:58:39 +0200 (mer. 19 juin 2013) $</date>
  </sect1info>
  <title>Lua-&lua-version;</title>
  <indexterm zone="lua">
    <primary sortas="a-Lua">Lua</primary>
  </indexterm>
  <sect2 role="package">
    <title>Introduction à Lua</title>
    <para>
      <application>Lua</application> est un langage de programmation puissant et
      assez léger conçu pour les applications d'extension. Il est aussi souvent utilisé
      de façon plus générale en langage utilisé seul. <application>Lua</application>
      est implémenté comme une petite bibliothèque de
      fonction C, écrite en C ANSI, et compilé sans modification sur toutes les plate-formes
      connus. Les buts de l'implémentation sont simplicité, efficience, portabilité, et coût
      d'embarquement faible. Le résultat est un moteur de langage rapide avec de petites
      empreinte, le rendant idéal pour les systèmes embarqués.
    </para>
    &lfs75_checked;
    <bridgehead renderas="sect3">Information sur le paquet </bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP) : <ulink url="&lua-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP) : <ulink url="&lua-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5 du téléchargement : &lua-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement : &lua-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis : &lua-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction : &lua-time;
        </para>
      </listitem>
    </itemizedlist>
    <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          correctif requis:
          <ulink url="&patch-root;/lua-&lua-version;-shared_library-1.patch"/>
        </para>
     </listitem>
    </itemizedlist>
    <para condition="html" role="usernotes">Notes utilisateur :
      <ulink url="&blfs-wiki;/lua"/>
    </para>
  </sect2>
  <sect2 role="installation">
    <title>Installation de Lua</title>
    <para>
      Installez <application>Lua</application> en lançant les commandes suivantes :
       
    </para>
<screen>
<userinput>patch -Np1 -i ../lua-&lua-version;-shared_library-1.patch &amp;&amp;
sed -i '/#define LUA_ROOT/s:/usr/local/:/usr/:' src/luaconf.h &amp;&amp;
make linux</userinput>
</screen>
    <para>
      Pour tester le résultat, tapez : <command>make test</command>.
    </para>
    <para>
      Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem> :
    </para>
<screen role="root">
<userinput>make INSTALL_TOP=/usr TO_LIB="liblua.so liblua.so.5.2 liblua.so.&lua-version;" \
     INSTALL_DATA="cp -d" INSTALL_MAN=/usr/share/man/man1 install &amp;&amp;
mkdir -pv /usr/share/doc/lua-&lua-version; &amp;&amp;
cp -v doc/*.{html,css,gif,png} /usr/share/doc/lua-&lua-version;</userinput>
</screen>
    <para>Quelques paquets vérifient le fichier <application>pkg-config</application> pour
    <application>Lua</application>. En tant qu'utilisateur
    <systemitem class="username">root</systemitem> :</para>
<screen role="root">
<userinput>cat &gt; /usr/lib/pkgconfig/lua.pc &lt;&lt; "EOF"
<literal>V=5.2
R=&lua-version;
prefix=/usr
INSTALL_BIN=${prefix}/bin
INSTALL_INC=${prefix}/include
INSTALL_LIB=${prefix}/lib
INSTALL_MAN=${prefix}/man/man1
INSTALL_LMOD=${prefix}/share/lua/${V}
INSTALL_CMOD=${prefix}/lib/lua/${V}
exec_prefix=${prefix}
libdir=${exec_prefix}/lib
includedir=${prefix}/include
Name: Lua
Description: An Extensible Extension Language
Version: ${R}
Requires: 
Libs: -L${libdir} -llua -lm
Cflags: -I${includedir}</literal>
EOF</userinput>
</screen>
  </sect2>
  <sect2 role="commands">
    <title>Explication des commandes</title>
    <para>
      <command>sed -i ...</command>: Cette commande modifie le chemin de recherche de 
      <application>Lua</application> pour correspondre au chemin d'installation.
    </para>
  </sect2>
  <sect2 role="content">
    <title>Contenu</title>
    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèque installée</segtitle>
      <segtitle>Répertoires installés</segtitle>
      <seglistitem>
        <seg>
          lua et luac
        </seg>
        <seg>
          liblua.so
        </seg>
        <seg>
          /usr/lib/lua,
          /usr/share/lua et
          /usr/share/doc/lua-&lua-version;
        </seg>
      </seglistitem>
    </segmentedlist>
    <variablelist>
      <bridgehead renderas="sect3">Description courte</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      <varlistentry id="lua-prog">
        <term><command>lua</command></term>
        <listitem>
          <para>
            est un interpréteur indépendant de Lua.
          </para>
          <indexterm zone="lua lua-prog">
            <primary sortas="b-lua">lua</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="luac">
        <term><command>luac</command></term>
        <listitem>
          <para>
            est le compilateur Lua.
          </para>
          <indexterm zone="lua luac">
            <primary sortas="b-luac">luac</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="liblua">
        <term><filename class="libraryfile">liblua.so</filename></term>
        <listitem>
          <para>
            contient les fonctions API de <application>Lua</application>.
          </para>
          <indexterm zone="lua liblua">
            <primary sortas="c-liblua">liblua.so</primary>
         </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect2>
</sect1>
