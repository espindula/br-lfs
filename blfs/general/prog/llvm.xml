<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY llvm-download-http "http://llvm.org/releases/&llvm-version;/llvm-&llvm-version;.tar.gz">
  <!ENTITY llvm-download-ftp " ">
  <!ENTITY llvm-md5sum "a8e5f5f1c1adebae7b4a654c376a6005">
  <!ENTITY llvm-size "9.9 MB">
  <!ENTITY llvm-buildsize "265 MB">
  <!ENTITY llvm-time "13.2 SBU">
]>

<sect1 id="llvm" xreflabel="llvm-&llvm-version;">
  <?dbhtml filename="llvm.html" ?>

  <sect1info>
    <othername>$LastChangedBy$</othername>
    <date>$Date$</date>
  </sect1info>

  <title>LLVM-&llvm-version;</title>

  <indexterm zone="llvm">
    <primary sortas="a-LLVM">LLVM</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à LLVM</title>

    <para>Le paquet <application>llvm</application> contient une collection de
    compilateur modulaire et réutilisable et des technologies de chaînes d'outils. Le coeur
    des bibliothèques LLVM fournit un optimiseur moderne de source- et cible- indépendant,ainsi
    que le support de génération de code pour beaucoup des processeurs populaires 
    (ainsi que quelques autres moins courants!) Ces bibliothèques sont construites autour 
    d'une représentation du code bien connu comme précise la représentation LLVM intermédiaire 
    ("LLVM IR").</para>

    &lfs70_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&llvm-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&llvm-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &llvm-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &llvm-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &llvm-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de LLVM</bridgehead>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
       <xref linkend="doxygen"/>,
       <xref linkend="graphviz"/>, et
       <xref linkend="libffi"/>
    </para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/llvm"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de LLVM</title>

    <para>Installez <application>llvm</application> en lançant les commandes
    suivantes&nbsp;:</para>

<screen><userinput>touch tools/edis/EnhancedDisassembly.exports               &amp;&amp;
./configure --prefix=/opt/llvm                             &amp;&amp;
find -name Makefile -exec                                  \
        sed -i -r -e '/^LIBRARYNAME/a SHARED_LIBRARY = 1'  \
                  -e 's#BUILD_ARCHIVE :*= 1#NO_&amp;#'         \
                  -e '/^USEDLIBS/s# ([A-Za-z]*).a# -l\1#g' \
                  -e 's#^USEDLIBS#LDFLAGS#' {} \;          &amp;&amp;
sed -i 's#BUILD_ARCHIVE = 1#NO_&amp;#' Makefile.rules          &amp;&amp;
sed -i 's#x)/docs#x)/share/doc#' Makefile.config           &amp;&amp;
make</userinput></screen>

    <para>Pour tester l'installation, tapez: <command>make check</command>.</para>

    <para>Maintenant, en tant qu'utilisateur  <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>make install                            &amp;&amp;
echo "/opt/llvm/lib" >> /etc/ld.so.conf &amp;&amp;
ldconfig                                &amp;&amp;
echo "pathappend /usr/share/man MANPATH"      &gt;&gt; /etc/profile.d/extrapaths.sh &amp;&amp;
echo "pathappend /opt/llvm/share/man MANPATH" &gt;&gt; /etc/profile.d/extrapaths.sh &amp;&amp;
echo "pathappend /opt/llvm/bin"               &gt;&gt; /etc/profile.d/extrapaths.sh &amp;&amp;
ln -svf /opt/llvm/share/doc /usr/share/doc/llvm-&llvm-version;</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para><parameter>--prefix=/opt/llvm</parameter>: Ce paquet a un grand nombre de bibliothèques
    et exécutables. Cette option les conserve séparé.</para>

    <para><userinput>find -name Makefile -exec sed ...</userinput>: Cette
    assure que les bibliothèques dynamiques sont construites.</para>

    <para><userinput>sed ... Makefile.rules</userinput>: Cette commande
    désactive la construction des bibliothèques statiques.</para>

    <para><userinput>echo "pathappend ..." &gt;&gt;
    /etc/profile.d/extrapaths.sh</userinput>: Mettre en place les chemins utilisateur afin de bien trouver
    les exécutables du programme et les pages de manuel </para>

  </sect2>

  <sect2 role="contenu">
    <title>Contents</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>de nombreux programmes sont installés dans /opt/llvm/bin</seg>
        <seg>de nombreuses bibliothèques sont installées dans /opt/llvm/lib</seg>
        <seg>/opt/llvm</seg>
      </seglistitem>
    </segmentedlist>
<!--
    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="rep">
        <term><command>rep</command></term>
        <listitem>
          <para>est l'interpreteur Lisp.</para>
          <indexterm zone="llvm rep">
            <primary sortas="b-rep">rep</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="llvm-lib">
        <term><filename class='libraryfile'>llvm.so</filename></term>
        <listitem>
          <para> contient les fonctions nécessaire pour l'interpreteur Lisp.</para>
          <indexterm zone="llvm llvm-lib">
            <primary sortas="c-llvm">llvm.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>
-->
  </sect2>

</sect1>
