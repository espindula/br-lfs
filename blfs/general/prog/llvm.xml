<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY llvm-download-http "http://llvm.org/releases/&llvm-version;/llvm-&llvm-version;.tar.gz">
  <!ENTITY llvm-download-ftp " ">
  <!ENTITY llvm-md5sum "a8e5f5f1c1adebae7b4a654c376a6005">
  <!ENTITY llvm-size "9.9 Mio">
  <!ENTITY llvm-buildsize "265 Mio">
  <!ENTITY llvm-time "13.2 SBU (et environ 7 SBU pour clang)">
]>

<sect1 id="llvm" xreflabel="llvm-&llvm-version;">
  <?dbhtml filename="llvm.html" ?>

  <sect1info>
    <othername>$LastChangedBy&nbsp;: bdubbs $</othername>
    <date>$Date&nbsp;: 2012-05-12 21:33:22 +0200 (Sat, 12 May 2012) $</date>
  </sect1info>

  <title>LLVM-&llvm-version;</title>

  <indexterm zone="llvm">
    <primary sortas="a-LLVM">LLVM</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à LLVM</title>

    <para>Le paquet <application>llvm</application> contient une collection de
    compilateur modulaire et réutilisable et des technologies de chaînes d'outils. Le c&oelig;ur
    des bibliothèques <foreignphrase>Low Level Virtual Machine</foreignphrase> 
    (LLVM) fournit un optimiseur moderne de source- et cible- indépendant,ainsi
    que le support de génération de code pour beaucoup des processeurs populaires 
    (ainsi que quelques autres moins courants!) Ces bibliothèques sont construites autour 
    d'une représentation du code bien connu comme précise la représentation LLVM intermédiaire 
    ("LLVM IR").</para>

    <para>Le paquet facultative <application>clang</application> fournit une
    nouvelle interface avec C, C++, C objet et C++ objet pour le compilateur
    LLVM.</para>

    &lfs71_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&llvm-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&llvm-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &llvm-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &llvm-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &llvm-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>
    <itemizedlist spacing='compact'>
      <listitem>
        <para>Paquet facultatif&nbsp;: 
          <ulink url="http://llvm.org/releases/&llvm-version;/clang-&llvm-version;.tar.gz"/>
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de LLVM</bridgehead>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
       <xref linkend="libffi"/>
    </para>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
       <xref linkend="doxygen"/> et
       <xref linkend="graphviz"/>, 
    </para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/llvm"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de LLVM</title>

 
    <para>Si vous avez téléchargé le paquet facultatif <application>clang</application>,
    installez-le dans l'arborescence des sources&nbsp;:</para>

<screen><userinput>tar -xf ../clang-3.0.tar.gz -C tools &amp;&amp;
mv tools/clang-3.0.src tools/clang</userinput></screen>

    <para>Installez <application>llvm</application> en lançant les commandes
    suivantes&nbsp;:</para>

<screen><userinput>touch tools/edis/EnhancedDisassembly.exports &amp;&amp;

CFLAGS="$CFLAGS -fno-tree-pre"               &amp;&amp;
CXXFLAGS="$CXXFLAGS -fno-tree-pre"           &amp;&amp;

sed -i -e 's:\$(PROJ_prefix)/etc/llvm:/etc/llvm:'                      \
       -e 's:\$(PROJ_prefix)/lib:$(PROJ_prefix)/lib/llvm:'             \
       -e 's:\$(PROJ_prefix)/docs/llvm:$(PROJ_prefix)/share/doc/llvm:' \
       Makefile.config.in  &amp;&amp;

sed -i 's:$(RPATH) -Wl,$(\(ToolDir\|LibDir\|ExmplDir\))::g' Makefile.rules &amp;&amp;

export CPPFLAGS="$CPPFLAGS $(pkg-config --cflags libffi)"                  &amp;&amp;

CC=gcc                                 \
CXX=g++                                \
./configure --prefix=/usr              \
            --libdir=/usr/lib/llvm     \
            --sysconfdir=/etc          \
            --enable-shared            \
            --enable-libffi            \
            --enable-targets=all       \
            --disable-expensive-checks \
            --disable-debug-runtime    \
            --disable-assertions       \
            --enable-optimized        &amp;&amp;
make</userinput></screen>

    <para>Pour tester l'installation, tapez: <command>make check</command>.</para>

    <para>Maintenant, en tant qu'utilisateur  <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>make install</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para><userinput>CFLAGS=... CXXFLAGS=...</userinput>&nbsp;:  Construit sans
    -ftree-pre pour contourner l'erreur de segmentation de clang sur des systèmes 
    x86_64.</para>

    <para><userinput>sed ... Makefile.config.in</userinput>&nbsp;: Ceci corrige
    les répertoires d'installation.</para>

    <para><userinput>sed ... Makefile.rules</userinput>&nbsp;: Ceci
    corrige un lpath non sécurisé pointant vers le répertoire de construction.</para>

  </sect2>

  <sect2 role="contenu">
    <title>Contents</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>clang, clang++ et numerous llvm-* build tools</seg>
        <seg>de nombreuses bibliothèques de personnalisation pour supporter
        des programmes llvm et clang</seg>
        <seg>/usr/lib/{clang,llvm}, /usr/share/doc/llvm</seg>
      </seglistitem>
    </segmentedlist>
<!--
    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="rep">
        <term><command>rep</command></term>
        <listitem>
          <para>est l'interpreteur Lisp.</para>
          <indexterm zone="llvm rep">
            <primary sortas="b-rep">rep</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="llvm-lib">
        <term><filename class='libraryfile'>llvm.so</filename></term>
        <listitem>
          <para> contient les fonctions nécessaire pour l'interpreteur Lisp.</para>
          <indexterm zone="llvm llvm-lib">
            <primary sortas="c-llvm">llvm.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>
-->
  </sect2>

</sect1>
