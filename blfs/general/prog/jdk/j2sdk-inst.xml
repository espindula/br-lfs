<sect2>
<title>Installation de j2sdk</title>

<para>Les deux versions seront installées en parallèle. Vous pouvez choisir
d'en garder une ou les deux.</para>

<para>Installez la version binaire du jdk en lançant les commandes suivantes:
</para>

<para><screen><userinput>VERSION=&j2sdk-bin-version; &amp;&amp;
MV=`echo $VERSION | cut -d "_" -f 1,1` &amp;&amp;
V=`echo ${VERSION} | sed -e "s/\./_/g"` &amp;&amp;
T=`grep -a tail j2sdk-${V}-linux-i?86.bin | cut -f 2 -d " "` &amp;&amp;
tail $T j2sdk-${V}-linux-i?86.bin > install.sfx.$$ &amp;&amp;
chmod +x install.sfx.$$ &amp;&amp;
./install.sfx.$$ &amp;&amp;
cd j2sdk${VERSION} &amp;&amp;
install -d /opt/j2sdk/j2sdk-precompiled-${MV} &amp;&amp;
mv * /opt/j2sdk/j2sdk-precompiled-${MV}</userinput></screen></para>

<para>La version binaire est maintenant installée.</para>

<para>Si vous ne voulez pas compiler les sources, passez directement à la
section de configuration.</para>

<para>Ajoutez le JDK tout juste compilé dans le chemin.</para>
<screen><userinput>export JAVA_HOME=/opt/j2sdk/j2sdk-precompiled-${MV} &amp;&amp;
export PATH=$PATH:${JAVA_HOME}/bin</userinput></screen>

<para>Décompressez et appliquez le correctif aux sources:</para>

<para><screen><userinput>VERSION=&j2sdk-src-version; &amp;&amp;
V=`echo $VERSION | sed -e "s/\./_/g"` &amp;&amp;
unzip j2sdk-${V}-src-scsl.zip &amp;&amp;
unzip j2sdk-${V}-mozilla_headers-unix.zip &amp;&amp;
patch -Np1 -i j2sdk-${VERSION}-fix-intl-files.patch &amp;&amp;
patch -Np1 -i j2sdk-${VERSION}-link-missing-libs.patch &amp;&amp;
patch -Np1 -i j2sdk-${VERSION}-remove-fixed-paths.patch &amp;&amp;
patch -Np1 -i j2sdk-${VERSION}-syntax-fixes.patch &amp;&amp;
patch -Np1 -i j2sdk-${VERSION}-use-included-motif.patch</userinput></screen></para>

<para>Mettez en place quelques variables qui modifieront la construction:</para>
<para><screen><userinput>export ALT_BOOTDIR="$JAVA_HOME" &amp;&amp;
unset JAVA_HOME &amp;&amp;
unset CLASSPATH
unset CFLAGS
unset CXXFLAGS
unset LDFLAGS
export ALT_DEVTOOLS_PATH="/usr/bin" &amp;&amp;
export BUILD_NUMBER="blfs-`date +%s`" &amp;&amp;
export DEV_ONLY=true &amp;&amp;
export ALT_MOZILLA_PATH=$PWD &amp;&amp;
export INSANE=true &amp;&amp;
export MAKE_VERBOSE=true &amp;&amp;
export ALT_CACERTS_FILE=${ALT_BOOTDIR}/jre/lib/security/cacerts</userinput></screen></para>

<para>Le programme motif inclus ne se construit pas correctement avec la
version actuelle de glibc/xfree86. Une solution possible est de construire la
bibliothèque motif avant de compiler j2sdk. Notez que la construction de motif
échoue la première fois à cause de certaines erreurs de syntaxe. La plus simple
solution est d'utiliser la force en relançant la commande make :)</para>

<para><screen><userinput>cd motif/lib/Xm &amp;&amp;
make || make &amp;&amp;
cd ../../..</userinput></screen></para>

<para>Lancez le make et installez j2sdk avec les commandes suivantes. Il y aura
un grand nombre de messages sur des fichiers manquants, ressemblant à des
erreurs. Tant que la construction continue, les messages sont sans gravité, donc
ignorez-les.</para>

<para><screen><userinput>cd control/make &amp;&amp;
make &amp;&amp;
cd ../.. &amp;&amp;
cd control/build/linux-i?86 &amp;&amp;
cp -a j2sdk-image /opt/j2sdk/j2sdk-&j2sdk-src-version;</userinput></screen></para>

</sect2>

