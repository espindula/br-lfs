<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
   "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY gcc2-download-http "http://ftp.gnu.org/gnu/gcc/gcc-&gcc2-version;.tar.gz">
  <!ENTITY gcc2-download-ftp  "ftp://ftp.gnu.org/gnu/gcc/gcc-&gcc2-version;.tar.gz">
  <!ENTITY gcc2-size          "9.4 MB">
  <!ENTITY gcc2-buildsize     "150 MB">
  <!ENTITY gcc2-time          "2.60 SBU">
]>

<sect1 id="gcc2" xreflabel="GCC-&gcc2-version;">
<sect1info>
<othername>$LastChangedBy: randy $</othername>
<date>$Date: 2005-07-29 07:17:28 $</date>
</sect1info>
<?dbhtml filename="gcc2.html" ?>
<title>GCC-&gcc2-version;</title>

<sect2>
<title>Introduction à <application><acronym>GCC</acronym></application>-&gcc2-version;</title>

<para>Il y a deux raisons pour installer
<acronym>GCC</acronym>-&gcc2-version;. La première est que les développeurs
du noyau ont certifié <acronym>GCC</acronym>-&gcc2-version; comme compilateur
préféré pour compiler le noyau. L'autre raison (encore plus importante) est 
que certains paquetages commerciaux fermés (comme Netscape
Navigator, Yahoo Pager) et les paquetages précompilés (comme Mozilla) sont
liés avec les bibliothèques <acronym>GCC</acronym>-&gcc2-version;.</para>

<sect3><title>Informations sur le paquetage</title>
<itemizedlist spacing='compact'>
<listitem><para>Téléchargement (HTTP)&nbsp;: <ulink
url="&gcc2-download-http;"/></para></listitem>
<listitem><para>Téléchargement (FTP)&nbsp;: <ulink
url="&gcc2-download-ftp;"/></para></listitem>
<listitem><para>Taille du téléchargement&nbsp;:&gcc2-size;</para></listitem>
<listitem><para>Estimation de l'espace disque requis&nbsp;:
&gcc2-buildsize;</para></listitem>
<listitem><para>Estimation du temps de construction&nbsp;:
&gcc2-time;</para></listitem></itemizedlist>
</sect3>

<sect3><title>Téléchargements supplémentaires</title>
<itemizedlist spacing='compact'>
<listitem><para>Correctif requis&nbsp;: <ulink 
url="&patch-root;/gcc-&gcc2-version;-2.patch"/></para></listitem>
<listitem><para>Correctif requis&nbsp;: <ulink 
url="&patch-root;/gcc-&gcc2-version;-no_fixinc-1.patch"/></para></listitem>
<listitem><para>Correctif requis&nbsp;: <ulink 
url="&patch-root;/gcc-&gcc2-version;-returntype_fix-1.patch"/></para></listitem>
</itemizedlist>
</sect3>

</sect2>

<sect2>
<title>Installation de <application><acronym>GCC</acronym></application></title>

<para>Appliquez les correctifs&nbsp;:</para>

<screen><userinput><command>patch -Np1 -i ../gcc-&gcc2-version;-2.patch &amp;&amp;
patch -Np1 -i ../gcc-&gcc2-version;-no_fixinc-1.patch &amp;&amp;
patch -Np1 -i ../gcc-&gcc2-version;-returntype_fix-1.patch</command></userinput></screen>

<para>L'équipe de développement de <acronym>GCC</acronym> recommande de
construire dans un répertoire séparé.</para>

<screen><userinput><command>mkdir ../gcc-build &amp;&amp;
cd ../gcc-build</command></userinput></screen>

<para>Configurez <acronym>GCC</acronym> pour construire les compilateurs
<application>C</application> et <application>C++</application> ainsi que pour
activer les options relatives à <application>C++</application>.</para>

<screen><userinput><command>../gcc-&gcc2-version;/configure \
    --prefix=/opt/gcc-&gcc2-version; \
    --enable-shared --enable-languages=c,c++ \
    --enable-threads=posix</command></userinput></screen>

<para>Compilez et installez <acronym>GCC</acronym>&nbsp;:</para>

<screen><userinput><command>make bootstrap &amp;&amp;
make install</command></userinput></screen>

<para>Notez la bibliothèque installée.</para>

<screen><userinput><command>L=`find /opt/gcc-&gcc2-version;/lib -name "*libstdc++*.so" -type f` &amp;&amp;
IL=`basename $L`</command></userinput></screen>

<para>Déplacez les bibliothèques <application>C++</application> dans le
répertoire standard des bibliothèques pour éviter d'avoir à ajouter
<userinput>/opt/gcc-&gcc2-version;/lib</userinput> dans
<filename>/etc/ld.so.conf</filename>.</para>

<screen><userinput><command>for i in /opt/gcc-&gcc2-version;/lib/*.so*; do mv -f $i /usr/lib;
ln -sf /usr/lib/`basename $i` /opt/gcc-&gcc2-version;/lib; done</command></userinput></screen>

<para>Créez les liens symboliques requis par les paquetages commerciaux ou
précompilés.</para>

<screen><userinput><command>ln -sf $IL /usr/lib/libstdc++-libc6.1-1.so.2 &amp;&amp;
ln -sf $IL /usr/lib/libstdc++-libc6.2-2.so.3 &amp;&amp;
ln -sf $IL /usr/lib/libstdc++-libc6.3-2.so.3</command></userinput></screen>

</sect2>

<sect2>
<title>Configurer <application><acronym>GCC</acronym></application></title>

<sect3><title>Informations de configuration</title>

<xi:include xmlns:xi="http://www.w3.org/2003/XInclude" href="../../lib-config.xml"/>  

<para>Les instructions données ci-dessus créent les liens symboliques de
compatibilité que les paquetages précompilés requièrent dans
<acronym>BLFS</acronym>. Vous pourriez avoir à créer des liens symboliques
supplémentaires suivant vos besoins.</para>

<para>Si vous avez seulement besoin des bibliothèques de GCC-&gcc2-version;,
vous pouvez supprimer <filename>/opt/gcc-&gcc2-version;</filename>.</para>

<para>À chaque fois que vous voulez utiliser GCC-&gcc2-version; à la place
du compilateur installé, ajoutez <filename
class="directory">/opt/gcc-&gcc2-version;/bin</filename> au début de votre
<envar>PATH</envar> ou (de préférence) configurez la variable d'environnement
<envar>CC</envar> avant de compiler le paquetage concerné.</para>

</sect3>

</sect2>

<sect2>
<title>Contenu</title>

<para>Le paquetage GCC-&gcc2-version; contient les compilateurs
<application>C</application> et <application>C++</application> de
<command>gcc</command>-&gcc2-version; ainsi que
<filename>libstdc++.so</filename> de GCC-&gcc2-version;, requis par
quelques paquetages commerciaux et/ou précompilés.</para>

</sect2>

</sect1>

