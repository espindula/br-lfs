<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
   "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY gcc3-download-http "http://ftp.gnu.org/gnu/gcc/gcc-&gcc3-version;/gcc-&gcc3-version;.tar.bz2">
  <!ENTITY gcc3-download-ftp  "ftp://ftp.gnu.org/gnu/gcc/gcc-&gcc3-version;/gcc-&gcc3-version;.tar.bz2">
  <!ENTITY gcc3-md5sum        "a1c267b34f05c8660b24251865614d8b">
  <!ENTITY gcc3-size          "23 MB">
  <!ENTITY gcc3-buildsize     "489 MB">
  <!ENTITY gcc3-time          "5.72 SBU (additional 12.54 SBU to run the test suite)">
]>

<sect1 id="gcc3" xreflabel="GCC-&gcc3-version;">
<sect1info>
<othername>$LastChangedBy: randy $</othername>
<date>$Date: 2005-07-29 07:17:28 $</date>
</sect1info>
<?dbhtml filename="gcc3.html" ?>
<title><application><acronym>GCC</acronym></application>-&gcc3-version;</title>
<indexterm zone="gcc3">
<primary sortas="a-GCC-3-3">GCC-&gcc3-version;</primary></indexterm>

<sect2>
<title>Introduction à 
<application><acronym>GCC</acronym></application>-&gcc3-version;</title>

<para>La raison pour installer
<application><acronym>GCC</acronym></application>-&gcc3-version; est que certains
paquetages <acronym>BLFS</acronym> (comme les paquetages compilés
<application>Java</application> et <application>OpenOffice</application>)
n'ont pas été mis à jour pour être compilables avec
<application><acronym>GCC</acronym></application>-&gcc-version;. De plus,
quelques paquetages pré-compilés pourraient nécessiter les bibliothèques
<application><acronym>GCC</acronym></application>-&gcc3-version;.</para>

<sect3><title>Informations sur le paquetage</title>
<itemizedlist spacing='compact'>
<listitem><para>Téléchargement (HTTP)&nbsp;: <ulink
url="&gcc3-download-http;"/></para></listitem>
<listitem><para>Téléchargement (FTP)&nbsp;: <ulink
url="&gcc3-download-ftp;"/></para></listitem>
<listitem><para>Téléchargement de la somme MD5&nbsp;: &gcc3-md5sum;</para></listitem>
<listitem><para>Taille du téléchargement&nbsp;:&gcc3-size;</para></listitem>
<listitem><para>Estimation de l'espace disque requis&nbsp;:
&gcc3-buildsize;</para></listitem>
<listitem><para>Estimation du temps de construction&nbsp;:
&gcc3-time;</para></listitem></itemizedlist>
</sect3>

<sect3><title>Téléchargements supplémentaires</title>
<itemizedlist spacing='compact'>
<listitem><para>Correctif requis&nbsp;: <ulink 
url="&patch-root;/gcc-&gcc3-version;-no_fixincludes-1.patch"/></para>
</listitem>
<listitem><para>Correctif requis&nbsp;: <ulink 
url="&patch-root;/gcc-&gcc3-version;-linkonce-1.patch"/></para>
</listitem>
</itemizedlist>
</sect3>

<sect3><title>Dépendances de <application><acronym>GCC</acronym>-3</application></title>
<sect4><title>Optionnel</title>
<para><xref linkend="dejagnu"/> (requis pour exécuter la suite de tests complète)</para>
</sect4>
</sect3>

</sect2>

<sect2>
<title>Installation de
<application><acronym>GCC</acronym>-3</application></title>

<screen><userinput><command>patch -Np1 -i ../gcc-&gcc3-version;-no_fixincludes-1.patch &amp;&amp;
patch -Np1 -i ../gcc-&gcc3-version;-linkonce-1.patch &amp;&amp;
mkdir ../gcc-build &amp;&amp;
cd ../gcc-build &amp;&amp;
../gcc-&gcc3-version;/configure \
    --prefix=/opt/gcc-&gcc3-version; \
    --enable-shared --enable-languages=c,c++ \
    --enable-threads=posix &amp;&amp;
make bootstrap</command></userinput></screen>

<para>Si désiré, exécutez la suite de tests en utilisant les commandes suivantes.
Les commandes <command>test_summary</command> créent des journaux de trace pouvant
être comparés à des résultats connus pour être satisfaisant situés dans <ulink 
url="http://linuxfromscratch.org/~randy/gcc-334-lfs-6.0-test_summary.log"/> 
et <ulink 
url="http://linuxfromscratch.org/~randy/gcc-334-lfs-6.0-test_summary_short.log"/>.
</para>

<screen><userinput><command>make -k check &amp;&amp;
../gcc-3.3.4/contrib/test_summary >test_summary.log 2>&amp;1 &amp;&amp;
../gcc-3.3.4/contrib/test_summary | \
    grep -A7 Summ >test_summary_short.log 2>&amp;1</command></userinput></screen>

<para>Maintenant, en tant qu'utilisateur root&nbsp;:</para>

<screen><userinput role='root'><command>make install &amp;&amp;
mv /opt/gcc-&gcc3-version;/lib/libstdc++.so.5* /usr/lib &amp;&amp;
ln -sf /usr/lib/libstdc++.so.5.0.6 /opt/gcc-&gcc3-version;/lib &amp;&amp;
ln -sf libstdc++.so.5.0.6 /opt/gcc-&gcc3-version;/lib/libstdc++.so.5 &amp;&amp;
chown -R root:root \
    /opt/gcc-&gcc3-version;/lib/gcc-lib/i686-pc-linux-gnu/&gcc3-version;/include</command></userinput></screen>

</sect2>

<sect2>
<title>Explications des commandes</title>

<para><command>mkdir ../gcc-build; cd ../gcc-build</command>&nbsp;: l'équipe
de développement de <application><acronym>GCC</acronym></application> recommande
de construire dans un répertoire séparé.</para>

<para><parameter>--enable-shared --enable-languages=c,c++ 
--enable-threads=posix</parameter>&nbsp;: configure
<application><acronym>GCC</acronym></application> pour qu'il construise les
compilateurs <application>C</application> et <application>C++</application> et
pour qu'il active les options relatives à <application>C++</application>.</para>

<para><command>mv /opt/gcc-&gcc3-version;/lib/libstdc++.so.5* 
/usr/lib</command>&nbsp;: déplace les bibliothèques <application>C++</application>
dans le répertoire standard des bibliothèques pour éviter d'avoir à ajouter
<userinput>/opt/gcc-&gcc3-version;/lib</userinput> à
<filename>/etc/ld.so.conf</filename>.</para>

</sect2>

<sect2>
<title>Configurer <application><acronym>GCC</acronym></application></title>

<sect3><title>Informations de configuration</title>

<xi:include xmlns:xi="http://www.w3.org/2003/XInclude" 
href="../../lib-config.xml"/>

<para>Si vous avez seulement besoin des bibliothèques GCC-&gcc3-version;, vous
pouvez supprimer <filename>/opt/gcc-&gcc3-version;</filename>.</para>

<para>À chaque fois que vous avez besoin d'utiliser GCC-&gcc3-version; au lieu
du compilateur de votre système, ajoutez
<filename class="directory">/opt/gcc-&gcc3-version;/bin</filename> au début de
votre <envar>PATH</envar> ou (de préférence) configurez la variable
d'environnement <envar>CC</envar> avant de compiler le paqutage concerné.</para>

</sect3>

</sect2>

<sect2>
<title>Contenu</title>

<segmentedlist>
<segtitle>Programmes installés</segtitle>
<segtitle>Bibliothèques installées</segtitle>
<segtitle>Répertoires installés</segtitle>
<seglistitem>
<seg>c++, cpp, g++, gcc, gccbug, gcov et les noms spécifiques à l'architecture
de ces programmes.</seg>
<seg>libgcc_s.so, libiberty.a, libstdc++.[a,so], libsupc++.a et d'autre
bibliothèques et fichiers de support.</seg>
<seg>/opt/gcc-&gcc3-version;</seg>
</seglistitem>
</segmentedlist>

<sect3><title>Descriptions courtes</title>
<para>Le paquetage GCC-&gcc3-version; contient les compilateurs
<application>C</application> et <application>C++</application> de
<command>gcc</command>-&gcc3-version; ainsi que
<filename>libstdc++.so</filename> de GCC-&gcc3-version; requis par quelques
paquetages commerciaux et pré-compilés.</para>
</sect3>

</sect2>

</sect1>
