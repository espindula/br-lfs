<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY systemd-download-http "http://www.freedesktop.org/wiki/Software/systemd/"> 
  <!ENTITY systemd-download-ftp  " ">
  <!-- <!ENTITY udev-md5sum        " "> -->
  <!ENTITY systemd-size          "~1.3 Mio">
  <!ENTITY systemd-buildsize     "~16 Mio">
  <!ENTITY systemd-time          "~0.1 SBU">
]>

<sect1 id="udev-extras" xreflabel="udev-extras (from systemd)">
  <?dbhtml filename="udev-extras.html"?>

  <sect1info>
    <othername>$LastChangedBy: bdubbs $</othername>
    <date>$Date: 2012-07-18 20:12:14 +0200 (Wed, 18 Jul 2012) $</date>
  </sect1info>

  <title>Udev Extras (from systemd)</title>

  <indexterm zone="udev-extras">
    <primary sortas="a-udev-extras">udev extras (from systemd)</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à Udev Extras</title>

    <para>In 2012, the <application>Udev</application> code distribution was
    merged with <application>systemd</application>.
    <application>Systemd</application> is a set of programs that replace the
    <application>SysVInit</application> package used by LFS et is much more
    complex.  It is not compatible with the LFS bootscripts et has many
    problems et few advantages for most LFS users.</para>
   
    <para>The procedures below extract libraries et programs from the systemd
    sources that could not be built in LFS due to library dependency
    issues.</para>

    <para>Unlike any other package in the BLFS book, there is no set version
    of <application>systemd</application> specified to download. Several version
    updates to LFS et BLFS means there are probably many different
    versions of <application>Udev</application> on the platforms that BLFS is
    being built upon. Therefore, you should download et use the version of
    <application>systemd</application> your computer currently uses. The BLFS
    team has no experience updating (or reverting to an older version) the
    <application>Udev</application> programs <quote>on the fly.</quote> To
    discover the version of <application>Udev</application> your computer
    currently uses, issue <command>/sbin/udevadm --version</command>.</para>

    <para>This package is known to build et work properly using an LFS-development
    platform. (Using systemd-186.)</para>

    <bridgehead renderas="sect3">Information sur le paquet </bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP) : <ulink url="&systemd-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP) : <ulink url="&systemd-download-ftp;"/></para>
      </listitem>
      <!-- <listitem>
        <para>Somme de contrôle MD5 du téléchargement : &systemd-md5sum;</para>
      </listitem> -->
      <listitem>
        <para>Taille du téléchargement : &systemd-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis : &systemd-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction : &systemd-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de Udev Extras</bridgehead>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
      <ulink url="http://anduin.linuxfromscratch.org/sources/other/"/>
      (match the udev-lfs-???.tar.bz2 tarball version to the systemd version used in LFS).
      <xref linkend="glib2"/> (for the gudev library),
      <xref linkend="gperf"/> (for keymap), et
      <xref linkend="gobject-introspection"/> (for gir-data) 
    </para>

    <bridgehead renderas="sect4">Facultative</bridgehead>
    <para role="optional">
      <xref linkend="acl"/>
    </para>

    <bridgehead renderas="sect4">Dépendances de Optional Runtime</bridgehead>
    <para role="optional">
      <xref linkend="pciutils"/> et
      <xref linkend="usbutils"/>
    </para>

    <para condition="html" role="usernotes">Notes utilisateur :
    <ulink url="&blfs-wiki;/udev-extras"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Udev Extras</title>

    <para>First, put the custom LFS files in place:</para>

<screen><userinput>tar -xf ../udev-lfs-186.tar.bz2</userinput></screen>

    <sect3>
    <title>keymap</title>
    <para>Support for special keys for many laptops is provided by the
    <command>keymap</command> program et supporting files.  If the
    <command>keymap</command> capability is desired, use:</para>

<screen><userinput>make -f udev-lfs-186/Makefile.lfs keymap</userinput></screen>

    <para>To install <command>keymap</command> et it's assiciated files, 
    run, as the <systemitem class="username">root</systemitem> user:</para>

<screen><userinput>make -f udev-lfs-186/Makefile.lfs install-keymap</userinput></screen>

    </sect3>

    <sect3>
    <title>gudev</title>

    <para>To build the <application>libgudev-1.0</application> library et
    interface files, run:</para>
   
<screen><userinput>make -f udev-lfs-186/Makefile.lfs gudev</userinput></screen>

    <para>Install the <filename class='libraryfile'>gudev</filename> library,
    run, as the <systemitem class="username">root</systemitem> user:</para>

<screen><userinput>make -f udev-lfs-186/Makefile.lfs install-gudev</userinput></screen>

    </sect3>

    <sect3>
    <title>GObject Files</title>

    <para>To build the <application>gobject-introspection</application>
    interface (gir) files for the <filename
    class='libraryfile'>libgudev-1.0</filename> library, run:</para>
   
<screen><userinput>make -f udev-lfs-186/Makefile.lfs gir-data</userinput></screen>

    <para>Install the gir data, as the <systemitem
    class="username">root</systemitem> user:</para>

<screen><userinput>make -f udev-lfs-186/Makefile.lfs install-gir-data</userinput></screen>

    <caution><para>There is a shortcut to build et install all of the
    <application>udev</application> components at once using the
    <emphasis>all</emphasis> et <emphasis>install-all</emphasis>
    <filename>Makefile.lfs</filename> targets.  The installation of this target
    will overwrite the base LFS udev files et has not been thoroughly tested
    at the time of this writing.  If using this procedure, the udev daemon
    should be stopped before overwriting the existing <filename>udevd</filename>
    et udev libraries.</para></caution>

    </sect3>
  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <para>A list of the installed files, along with their short descriptions
    can be found at
    <ulink url="&lfs-root;/chapter06/udev.html#contents-udev"/>.</para>

    <para>The following is some additional content information.</para>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèque installée</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>findkeyboards, keyboard-force-release.sh, et keymap</seg>
  
        <seg>libgudev-1.0.so</seg>
        
        <seg>/lib/udev/keymaps/force-release,
             /usr/include/gudev-1.0/gudev,
             /usr/lib/girepository-1.0,
             /usr/share/gir-1.0, et
             /usr/share/gtk-doc/html/gudev</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Description courte</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="keymap-systemd">
        <term><command>keymap</command></term>
        <listitem>
          <para>configures computer model specific key mappings.</para>
          <indexterm zone="udev-extras keymap-systemd">
            <primary sortas="b-keymap">keymap (from systemd)</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libgudev-1.0-systemd">
        <term><filename class='libraryfile'>libgudev-1.0.so</filename></term>
        <listitem>
          <para>is a GObject-based wrapper library for libudev.</para>
          <indexterm zone="udev-extras libgudev-1.0-systemd">
            <primary sortas="c-libgudev-1.0-systemd">libgudev-1.0.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
