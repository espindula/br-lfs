<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY acpid-download-http "&sourceforge-repo;/acpid2/acpid-&acpid-version;.tar.xz">
  <!ENTITY acpid-download-ftp  " ">
  <!ENTITY acpid-md5sum        "0b07a982e3e28cf37645f2c6269af72e">
  <!ENTITY acpid-size          "148 Ko">
  <!ENTITY acpid-buildsize     "2.3 Mo">
  <!ENTITY acpid-time          "0.1 SBU">
]>

<sect1 id="acpid" xreflabel="acpid-&acpid-version;">
  <?dbhtml filename="acpid.html"?>

  <sect1info>
    <othername>$LastChangedBy: igor $</othername>
    <date>$Date: 2013-07-11 00:04:20 +0200 (jeu. 11 juil. 2013) $</date>
  </sect1info>

  <title>acpid-&acpid-version;</title>

  <indexterm zone="acpid">
    <primary sortas="a-acpid">acpid</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à acpid</title>

    <para>
      The <application>acpid</application> (Advanced Configuration et Power
      Interface event daemon) is a completely flexible, totally extensible
      daemon for delivering ACPI events. It listens on netlink interface et
      when an event occurs, executes programs to handle the event. The programs
      it executes are configured through a set of configuration files, which can
      be dropped into place by packages or by the user.
    </para>

    &lfs73_checked;

    <bridgehead renderas="sect3">Information sur le paquet </bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP) : <ulink url="&acpid-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP) : <ulink url="&acpid-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5 du téléchargement : &acpid-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement : &acpid-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis : &acpid-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction : &acpid-time;
        </para>
      </listitem>
    </itemizedlist>

    <para condition="html" role="usernotes">Notes utilisateur :
      <ulink url="&blfs-wiki;/acpid"/>
    </para>
  </sect2>

  <sect2 role="installation">
    <title>Installation de acpid</title>

    <para>
      Install <application>acpid</application> by
      running the following  
    </para>

<screen><userinput>./configure --prefix=/usr --docdir=/usr/share/doc/acpid-&acpid-version; &amp;&amp;
make</userinput></screen>

    <para>
      This package does not come with a test suite.
    </para>

    <para>
      Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem> :
    </para>

<screen role="root"><userinput>make install &amp;&amp;
install -v -m755 -d /etc/acpi/events &amp;&amp;
cp -r samples /usr/share/doc/acpid-&acpid-version;</userinput></screen>

  </sect2>

  <sect2 role="configuration">
    <title>Configuring acpid</title>

    <para>
      <application>acpid</application> is configured by user defined events.
      Place event files under
      <filename class="directory">/etc/acpi/events</filename> directory. If an
      event occurs, <command>acpid</command> recurses through the event files in
      order to see if the regex defined after "event" matches. If they do,
      action is executed.
    </para>

    <para>
      The following brief example will suspend the system when the laptop lid
      is closed (it requires <xref linkend="pm-utils"/>):
    </para>

<screen role="root"><userinput>cat &gt; /etc/acpi/events/lid &lt;&lt; "EOF"
<literal>event=button/lid
action=/etc/acpi/lid.sh</literal>
EOF

cat &gt; /etc/acpi/lid.sh &lt;&lt; "EOF"
<literal>#!/bin/sh
/bin/grep -q open /proc/acpi/button/lid/LID/state &amp;&amp; exit 0
/usr/sbin/pm-suspend</literal>
EOF
chmod +x /etc/acpi/lid.sh</userinput></screen>

    <para>
      Unfortunately, not every computer labels ACPI events in the same way. To
      determine how your buttons are recognized, use the
      <command>acpi_listen</command> tool. Also, look in package documentation's
      samples directory for more examples.
    </para>

    <sect3  id="acpid-init">
      <title>Boot Script</title>

      <para>
        To automatically start <command>acpid</command> when the system is
        rebooted, install the <filename>/etc/rc.d/init.d/acpid</filename>
        boot script from the <xref linkend="bootscripts"/> package.
      </para>

      <indexterm zone="acpid acpid-init">
        <primary sortas="f-acpid">acpid</primary>
      </indexterm>

<screen role="root"><userinput>make install-acpid</userinput></screen>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoire installé</segtitle>

      <seglistitem>
        <seg>
          acpid, acpi_listen et kacpimon
        </seg>
        <seg>
          Aucun
        </seg>
        <seg>
          /usr/share/doc/acpid-&acpid-version;
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Description courte</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="acpid-prog">
        <term><command>acpid</command></term>
        <listitem>
          <para>
            is a program that listens for ACPI events et executes the rules
            that match the received event.
          </para>
          <indexterm zone="acpid acpid-prog">
            <primary sortas="b-acpid">acpid</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="acpi_listen">
        <term><command>acpi_listen</command></term>
        <listitem>
          <para>
            is a simple tool which connects to <command>acpid</command> et
            listens for events.
          </para>
          <indexterm zone="acpid acpi_listen">
            <primary sortas="b-acpi_listen">acpi_listen</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="kacpimon">
        <term><command>kacpimon</command></term>
        <listitem>
          <para>
            is a monitor program that connects to three sources of ACPI events
            (events file, netlink et input layer) et then reports on what it
            sees while it is connected.
          </para>
          <indexterm zone="acpid kacpimon">
            <primary sortas="b-kacpimon">kacpimon</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
