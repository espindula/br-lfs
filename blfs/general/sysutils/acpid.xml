<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  <!ENTITY acpid-download-http "&sourceforge-repo;/acpid2/acpid-&acpid-version;.tar.xz">
  <!ENTITY acpid-download-ftp  " ">
  <!ENTITY acpid-md5sum        "d7bcdcdefcd53b03730e50ba842554ea">
  <!ENTITY acpid-size          "156 Ko">
  <!ENTITY acpid-buildsize     "2.6 Mo">
  <!ENTITY acpid-time          "moins de 0.1 SBU">
]>
<sect1 id="acpid" xreflabel="acpid-&acpid-version;">
  <?dbhtml filename="acpid.html"?>
  <sect1info>
    <othername>$LastChangedBy: igor $</othername>
    <date>$Date: 2013-07-11 00:04:20 +0200 (jeu. 11 juil. 2013) $</date>
  </sect1info>
  <title>acpid-&acpid-version;</title>
  <indexterm zone="acpid">
    <primary sortas="a-acpid">acpid</primary>
  </indexterm>
  <sect2 role="package">
    <title>Introduction à acpid</title>
    <para>
      Le paquet <application>acpid</application> (Advanced Configuration and Power
      Interface event Daemon) est un démon complètement flexible, totallement
      extensible pour délivrer les évenements ACPI. Il écoute sur les interfaces
      et quand un évenement arrive, exécute des programmes pour gérer l'évenement. Les
      programmes qui sont éxécutés sont configurés au travers un collection de fichiers
      de configuration, ils peuvent être mis en place par les paquets ou par l'utilisateur.
    </para>
    &lfs77_checked;
    <bridgehead renderas="sect3">Information sur le paquet </bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP) : <ulink url="&acpid-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP) : <ulink url="&acpid-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5 du téléchargement : &acpid-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement : &acpid-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis : &acpid-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction : &acpid-time;
        </para>
      </listitem>
    </itemizedlist>
    <para condition="html" role="usernotes">Notes utilisateur :
      <ulink url="&blfs-wiki;/acpid"/>
    </para>
  </sect2>
  <sect2 role="installation">
    <title>Installation de acpid</title>
    <para>
      Installez <application>acpid</application> en lançant les commandes suivantes :
    </para>
<screen>
<userinput>./configure --prefix=/usr --docdir=/usr/share/doc/acpid-&acpid-version; &amp;&amp;
make</userinput>
</screen>
    <para>
      Ce paquet n'a pas de suite de tests.
    </para>
    <para>
      Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem> :
    </para>
<screen role="root">
<userinput>make install                         &amp;&amp;
install -v -m755 -d /etc/acpi/events &amp;&amp;
cp -r samples /usr/share/doc/acpid-&acpid-version;</userinput>
</screen>
  </sect2>
  <sect2 role="configuration">
    <title>Configuration d'acpid</title>
    <para>
      <application>acpid</application> est configuré par des évenements définis par l'utilisateur.
      Placez les fichiers évenement dans le répertoire
      <filename class="directory">/etc/acpi/events</filename>. Si un évenement arrive,
      <command>acpid</command> parcourt récursivement les fichiers d'événements
      dans l'ordre pour voir si la "regex" définie après "event" correspond. Si c'est le cas,
      l'action est éxécutée.
    </para>
    <para>
      Le bref exemple suivant va suspendre le système quand l'écran d'un portable est fermé
      (il requiert <xref linkend="pm-utils"/>):
    </para>
<screen role="root">
<userinput>cat &gt; /etc/acpi/events/lid &lt;&lt; "EOF"
<literal>event=button/lid
action=/etc/acpi/lid.sh</literal>
EOF
cat &gt; /etc/acpi/lid.sh &lt;&lt; "EOF"
<literal>#!/bin/sh
/bin/grep -q open /proc/acpi/button/lid/LID/state &amp;&amp; exit 0
/usr/sbin/pm-suspend</literal>
EOF
chmod +x /etc/acpi/lid.sh</userinput>
</screen>
    <para>
      Malheureusement, pas tous les ordinateurs appellent les évenements ACPI de la même façon.
      Pour déterminer comment votre bouton est reconnu, utilisez l'outil
      <command>acpi_listen</command>. Egalement, regardez dans les exemples simples de la documentation
      du paquets pour plus d'exemples.
    </para>
    <sect3  id="acpid-init">
      <title>Boot Script</title>
      <para>
        Pour automatiquement démarrer <command>acpid</command> quand le système est redémarré, installez
         le script de démarrage <filename>/etc/rc.d/init.d/acpid</filename> du paquet
         <xref linkend="bootscripts"/>.
      </para>
      <indexterm zone="acpid acpid-init">
        <primary sortas="f-acpid">acpid</primary>
      </indexterm>
<screen role="root">
<userinput>make install-acpid</userinput>
</screen>
    </sect3>
  </sect2>
  <sect2 role="content">
    <title>Contenu</title>
    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoire installé</segtitle>
      <seglistitem>
        <seg>
          acpid, acpi_listen et kacpimon
        </seg>
        <seg>
          Aucun
        </seg>
        <seg>
          /usr/share/doc/acpid-&acpid-version;
        </seg>
      </seglistitem>
    </segmentedlist>
    <variablelist>
      <bridgehead renderas="sect3">Description courte</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      <varlistentry id="acpid-prog">
        <term><command>acpid</command></term>
        <listitem>
          <para>
            est un programme qui écoute les évenements ACPI et éxecute les rêgles qui correspondent
            à l'évenement reçu.
          </para>
          <indexterm zone="acpid acpid-prog">
            <primary sortas="b-acpid">acpid</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="acpi_listen">
        <term><command>acpi_listen</command></term>
        <listitem>
          <para>
            est un simple outil qui se connecte à <command>acpid</command> et
            écoute les évenements.
          </para>
          <indexterm zone="acpid acpi_listen">
            <primary sortas="b-acpi_listen">acpi_listen</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="kacpimon">
        <term><command>kacpimon</command></term>
        <listitem>
          <para>
            est un programme de surveillance qui se connecte à 3 sources d'évenements ACPI
            (fichier événements, couche réseau et d'entrée) et qui montre ce qu'il voit tant qu'il est 
            connecté.
          </para>
          <indexterm zone="acpid kacpimon">
            <primary sortas="b-kacpimon">kacpimon</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect2>
</sect1>
