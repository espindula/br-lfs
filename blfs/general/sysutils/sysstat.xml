<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY sysstat-download-http "http://perso.wanadoo.fr/sebastien.godard/sysstat-&sysstat-version;.tar.bz2">
  <!ENTITY sysstat-download-ftp  "ftp://ibiblio.org/pub/linux/system/status/sysstat-&sysstat-version;.tar.bz2">
  <!ENTITY sysstat-md5sum        "0dc5c4baf4165658450dd60913aa75bc">
  <!ENTITY sysstat-size          "268 Kio">
  <!ENTITY sysstat-buildsize     "6 Mio">
  <!ENTITY sysstat-time          "moins de 0.1 SBU">
]>

<sect1 id="sysstat" xreflabel="Sysstat-&sysstat-version;">
  <?dbhtml filename="sysstat.html"?>

  <sect1info>
    <othername>$LastChangedBy: bdubbs $</othername>
    <date>$Date>&nbsp;: 2010-02-14 16:37:25 +0100 (dim 14 fév 2010) $</date>
  </sect1info>

  <title>Sysstat-&sysstat-version;</title>

  <indexterm zone="sysstat">
    <primary sortas="a-Sysstat">Sysstat</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à Sysstat</title>

    <para>Le paquet <application>Sysstat</application> contient des outils
    pour surveiller les performances du système et son activité. 
    <application>Sysstat</application> contient l'outil <command>sar</command>,
    habituel à beaucoup d'Unixes commerciaux, et des outils que vous pouvez 
    activer périodiquement pour récupérer et archiver des données d'activité et
    deperformances.</para>

    &lfs70_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&sysstat-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&sysstat-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &sysstat-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &sysstat-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &sysstat-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &sysstat-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de Sysstat</bridgehead>

    <!-- <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended"><xref linkend="fcron"/></para> -->

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/sysstat"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Sysstat</title>

    <para>Installez <application>Sysstat</application> en lançant les commandes
    suivantes&nbsp;:</para>

<!-- <screen><userinput>make config &amp;&amp;
make</userinput></screen> -->

<screen><userinput>sa_lib_dir=/usr/lib/sa    \
sa_dir=/var/log/sa        \
conf_dir=/etc/sysconfig   \
./configure --prefix=/usr \
            --disable-man-group &amp;&amp;
make</userinput></screen>

    <para>Ce paquet n'est pas fourni avec une suite de tests.</para>

    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>make install</userinput></screen>

<!-- install -v -m644 sysstat.sysconfig /etc/sysconfig/sysstat</userinput></screen> -->

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <!-- <para><command>make config</command>&nbsp;: Runs the interactive configuration
    process. The first question prompts you for an
    <quote><computeroutput>Installation directory</computeroutput></quote>.
    Reply with <filename class="directory">/usr</filename>, as this is
    equivalent to <application>Autoconf</application>'s
    <option>-prefix=/usr</option> parameter to <command>configure</command>.
    For all other prompts, you may press <keycap>Enter</keycap> to accept the
    (very sane) defaults. When prompted for <quote><computeroutput>Number of
    daily data files to keep: [7]</computeroutput></quote>, you may wish to
    keep a larger number of files.</para> -->

    <para><envar>sa_lib_dir</envar>&nbsp;: Cette variable d'environnement spécifie
    l'emplacement du répertoire de la bibliothèque spécifique au paquet.</para>

    <para><envar>sa_dir</envar>&nbsp;: Cette variable d'environnement spécifie
    l'emplacement du répertoire contenant les fichiers de données.</para>

    <para><envar>conf_dir</envar>&nbsp;: Cette variable d'environnement spécifie
    l'emplacement du répertoire de configuration système.</para>

    <para><parameter>--disable-man-group</parameter>&nbsp;: Ce paramètre
    fait ignrer à l'installation la variable du groupe man, d'où il résulte que
    les fichiers de man appartiennent à
    <systemitem class="username">root</systemitem>&nbsp;:<systemitem class="groupname">root</systemitem>.</para>

    <para>Lancez <command>./configure --help</command> pour voir les autres
    variables d'environnement influentes que vous pouvez passer à
    <command>configure</command>. Il se peut que vous vouliez utiliser
    les variables <envar>history</envar> et <envar>compressafter</envar> pour
    personnaliser la quantité de fichiers de données récupérée sur le szstème.</para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de Sysstat</title>

    <sect3>
     <title>Information de Cron</title>

      <para>Pour commencer à réunir des informations d'historiques de 
      <application>Sysstat</application>, vous devez ajouter ou créer le
      crontab d'un utilisateur privilégié. L'emplacement des données d'historique
      est 
      <filename class="directory">/var/log/sa</filename>. L'utilisateur qui
      exécute les outils <application>Sysstat</application> via cron doit
      avoir un accès en écriture à cet emplacement.</para>

      <para>Voici ci-dessous un exemple de ce qu'il faut installer dans la 
      crontab. Ajustez les paramètres pour qu'ils conviennent à vos besoins. 
      Utilisez <command>man sa1</command> et
      <command>man sa2</command> pour des information sur les commandes.</para>

<screen><literal># 8h-19h rapport d'activité toutes les 10 minutes en semaine
0 8-18 * * 1-5 /usr/lib/sa/sa1 600 6 &amp;

# 19h-8h rapport d'activité toutes les heures en semaine
0 19-7 * * 1-5 /usr/lib/sa/sa1 &amp;

# Rapports d'activité toutes les heures le samedi et le dimanche
0 * * * 0,6 /usr/lib/sa/sa1 &amp;

# Résumé quotidien préparé à 19:05
5 19 * * * /usr/lib/sa/sa2 -A &amp;</literal></screen>

    <para>Assurez-vous d'envoyer la crontab modifiée au démon cron.</para>

    </sect3>

    <sect3 id="sysstat-init">
      <title>Informations sur le démarrage du système</title>

      <indexterm zone="sysstat sysstat-init">
        <primary sortas="f-sysstat">sysstat</primary>
      </indexterm>

      <para>Au démarrage du système, il faut insérer un message LINUX RESTART 
      dans le fichier de données quotidiennes pour réinitialiser les compteurs
      du noyau. On peut automatiser cela en installant le script de démarrage
      <filename>/etc/rc.d/init.d/sysstat</filename> inclu avec le paquet
      <xref linkend="bootscripts"/>, en utilisant la commande suivante en tant
      qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>make install-sysstat</userinput></screen>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>cifsiostat, iostat, mpstat, nsfiostat, pidstat, sa1, sa2,
        sadc, sadf et sar</seg>
        <seg>Aucune</seg>
        <seg>/usr/lib/sa, /usr/share/doc/sysstat-&sysstat-version; et
        /var/log/sa</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>


      <varlistentry id="cifsiostat">
        <term><command>cifsiostat</command></term>
        <listitem>
          <para>affiche des statiques des opérations de lecture et d'écriture 
          sur des systèmes de fichiers CIFS.</para>
          <indexterm zone="sysstat cifsiostat">
            <primary sortas="b-cifsiostat">cifsiostat</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="iostat">
        <term><command>iostat</command></term>
        <listitem>
          <para>rapporte les statistiques du processeur et les statistiques
          d'entrée/sortie des périphériques et des partitions.</para>
          <indexterm zone="sysstat iostat">
            <primary sortas="b-iostat">iostat</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mpstat">
        <term><command>mpstat</command></term>
        <listitem>
          <para>écrit les activités de chaque processeur disponible.</para>
          <indexterm zone="sysstat mpstat">
            <primary sortas="b-mpstat">mpstat</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="nfsiostat">
        <term><command>nfsiostat</command></term>
        <listitem>
          <para>affiche des statiques des opérations de lecture et d'écriture 
          sur des systèmes de fichiers NFS.</para>
          <indexterm zone="sysstat nfsiostat">
            <primary sortas="b-nfsiostat">nfsiostat</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="pidstat">
        <term><command>pidstat</command></term>
        <listitem>
          <para>est utilisé pour surveiller des tâches individuelles gérées
          actuellement par le noyau Linux.</para>
          <indexterm zone="sysstat pidstat">
            <primary sortas="b-pidstat">pidstat</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="sa1">
        <term><command>sa1</command></term>
        <listitem>
          <para>récupère et stocke des données de binaire dans le fichier de
          données d'activité quotidien du système. C'est une interface avec
          <filename>sadc</filename> conçue pour être exécutée depuis
          cron.</para>
          <indexterm zone="sysstat sa1">
            <primary sortas="b-sa1">sa1</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="sa2">
        <term><command>sa2</command></term>
        <listitem>
          <para>écrit un rapport d'activité quotidien résumé. C'est une
          interface avec <command>sar</command> conçue pour être exécutée
          depuis cron.</para>
          <indexterm zone="sysstat sa2">
            <primary sortas="b-sa2">sa2</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="sadc">
        <term><command>sadc</command></term>
        <listitem>
          <para>est le rapatrieur des données d'activité du syst\me, utilisé 
          comme sous-bassement de 
          <command>sar</command>.</para>
          <indexterm zone="sysstat sadc">
            <primary sortas="b-sadc">sadc</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="sadf">
        <term><command>sadf</command></term>
        <listitem>
          <para>est utilisé pour afficher le contenu de fichiers de données
          créés par la commande <command>sar</command>. Mais peu probable que
          <command>sar</command>, <command>sadf</command> puisse écrire ses
          données dans beaucoup de formats différents.</para>
          <indexterm zone="sysstat sadf">
            <primary sortas="b-sadf">sadf</primary>
          </indexterm>
        </listitem>
      </varlistentry>
 
      <varlistentry id="sar">
        <term><command>sar</command></term>
        <listitem>
          <para>est utilisé pour afficher le contenu des compteurs d'activité 
          cumulée choisis du système d'exploitation.</para>
          <indexterm zone="sysstat sar">
            <primary sortas="b-sar">sar</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
