<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  <!ENTITY apache-ant-download-http "http://archive.apache.org/dist/ant/source/apache-ant-&apache-ant-version;-src.tar.bz2">
  <!ENTITY apache-ant-download-ftp  " ">
  <!ENTITY apache-ant-md5sum        "c474fa9d0c35a24037c23b6e476862c1">
  <!ENTITY apache-ant-size          "3.2 Mo">
  <!ENTITY apache-ant-buildsize     "66 Mo">
  <!ENTITY apache-ant-time          "0.4 SBU">
]>

<sect1 id="apache-ant" xreflabel="apache-ant-&apache-ant-version;">
  <?dbhtml filename="apache-ant.html"?>

  <sect1info>
    <othername>$LastChangedBy&nbsp;: dj $</othername>
    <date>$Date&nbsp;: 2012-06-07 06:40:05 +0200 (Thu, 07 Jun 2012) $</date>
  </sect1info>

  <title>apache-ant-&apache-ant-version;</title>

  <indexterm zone="apache-ant">
   <primary sortas="a-Apache-Ant">Apache Ant</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à Apache Ant</title>

    <para>Le paquet <application>Apache Ant</application> est un outil de
    compilation basé sur <application>Java</application>. En théorie, ça
    ressemble beaucoup à <command>make</command>, mais sans les inconvénients
    de <command>make</command>. <application>Ant</application>
    est différent. Au lieu d'un modèle où il serait étendu avec des commandes
    basées sur le shell, <application>Ant</application> s'étend en utilisant des
    classes <application>Java</application>. Plutôt que d'écrire des commandes shell,
    les fichiers de configuration sont basés sur XML, utilisant une arborescence
    cible où diverses tâches s'exécutent. Chaque tâche est exécutée par un
    objet qui implémente une interface de tâche spécifique.</para>

&lfs71_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&apache-ant-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&apache-ant-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &apache-ant-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &apache-ant-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &apache-ant-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &apache-ant-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances d'Apache Ant</bridgehead>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required"><xref linkend="openjdk"/> <!-- ou
    <xref linkend="jdk"/>--></para>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended"><xref linkend="junit"/></para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/apache-ant"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Apache Ant</title>

    <note>
      <para>Il se peut que vous ayez besoin de bibliothèques supplémentaires
      pour satisfaire les exigences de construction de divers paquets installés
      en utilisant 
      <application>Apache Ant</application>. Voyez le tableau sur
      <ulink url="http://ant.apache.org/manual/install.html#librarydependencies"/>
      pour les bibliothèques prérequises dont vous pourriez avoir besoin.</para>
    </note>

    <para>S'il n'est pas possible d'installer 
    <application>JUnit</application>, installez <application>Apache Ant</application> 
    en supprimant la référence aux instructions de test (remarquez que les tests
    ne seront pas effectués)&nbsp;:</para>

<screen><userinput>sed -i 's;jars,test-jar;jars;' build.xml</userinput></screen>

    <para>Installez <application>Apache Ant</application> en lançant les commandes
    suivantes&nbsp;:</para>

<screen><userinput>sed -i 's|${dist.dir}/etc|/etc/ant|'        build.xml &amp;&amp;
sed -i 's|/etc/ant.conf|/etc/ant/ant.conf|' src/script/ant &amp;&amp;
cp -v /usr/share/junit-&junit-version;/junit-&junit-version;.jar lib/optional/junit.jar</userinput></screen>

    <para>Les tests de régression de l'unité sont effectués au moment de la
    construction ci-dessous, sauf si vous n'avez pas installé
    <application>JUnit</application>. Maintenant, en tant qu'utilisateur 
    <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>./build.sh -Ddist.dir=/opt/ant-&apache-ant-version; dist &amp;&amp;
ln -v -sf /etc/ant /opt/ant-&apache-ant-version;/etc &amp;&amp;
ln -v -sf ant-&apache-ant-version; /opt/ant</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para><command>sed -i 's;jars...</command>&nbsp;: Si le paquet 
    <application>JUnit</application> n'est pas installé, vous ne pouvez pas 
    effectuer les tests de régression.</para>

    <para><command>sed ...</command>&nbsp;: Ces commandes modifient le répertoire de
    configuration en <filename class='directory'>/etc/ant</filename> pour
    respecter les instructions de la FHS.</para>

    <para><command>cp -v
    /usr/share/junit-&junit-version;/&junit-version;.jar ...</command>&nbsp;:
    Cette commande copie le fichier jar JUnit dans le répertoire où Apache Ant
    le cherchera.</para>

    <para><command>./build.sh -Ddist.dir=/opt/ant-&apache-ant-version;
    dist</command>&nbsp;: Cette commande fait tout. Elle construit, teste, 
    puis installe le paquet dans 
    <filename class='directory'>/opt/ant-&apache-ant-version;</filename>.</para>

    <para><command>ln -v -sf /etc/ant /opt/ant-&apache-ant-version;/etc</command>&nbsp;:
    Les commandes <command>sed</command> modifient le répertoire de configuration
    en <filename class='directory'>/etc/ant</filename> et cette commande crée
    un lien symbolique entre l'ancien répertoire de configuration et le
    répertoire d'installation, car un paquet s'attend à y trouver des fichiers.</para>

    <para><command>ln -v -sf ant-&apache-ant-version; /opt/ant</command>&nbsp;:
    Cette commande est facultative et crée un lien symbolique pratique.</para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de Apache Ant</title>

    <sect3 id="apache-ant-config">
      <title>Fichiers de configuration</title>

      <para><filename>/etc/ant/ant.conf</filename>,
      <filename>~/.ant/ant.conf</filename> et
      <filename>~/.antrc</filename></para>

      <indexterm zone="apache-ant apache-ant-config">
        <primary sortas="e-AA.ant-ant.conf">~/.ant/ant.conf</primary>
      </indexterm>

      <indexterm zone="apache-ant apache-ant-config">
        <primary sortas="e-AA.antrc">~/.antrc</primary>
      </indexterm>

      <indexterm zone="apache-ant apache-ant-config">
        <primary sortas="e-etc-ant-ant.conf">/etc/ant/ant.conf</primary>
      </indexterm>

    </sect3>

    <sect3>
      <title>Informations de configuration</title>

      <para>Certains paquets exigeront que <command>ant</command> soit dans le
      chemin de recherche et que la variable <envar>$ANT_HOME</envar> soit
      définie. Satisfaites ces exigences en ajoutant les lignes suivantes aux
      fichiers <filename>/etc/profile</filename> ou
      <filename>~/.profile</filename> personnel de l'utilisateur ou
      <filename>~/.bashrc</filename>&nbsp;:</para>

<screen><literal>export PATH=$PATH:/opt/ant/bin
export ANT_HOME=/opt/ant</literal></screen>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>ant, antRun, antRun.pl, complete-ant-cmd.pl, runant.pl, et runant.py</seg>
        <seg>ant.jar, ant-*.jar, xercesImpl.jar, et xml-apis.jar</seg>
        <seg>/etc/ant et /opt/ant-&apache-ant-version;</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="ant">
        <term><command>ant</command></term>
        <listitem>
          <para>est un outil de construction basé sur <application>Java</application> utilisé
          par de nombreux paquets à la place du programme <command>make</command>
          conventionnel.</para>
          <indexterm zone="apache-ant ant">
            <primary sortas="b-ant">ant</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="antRun">
        <term><command>antRun</command></term>
        <listitem>
          <para>est un script de support utilisé pour démarrer les scripts de
          construction de <command>ant</command> dans un répertoire donné.</para>
          <indexterm zone="apache-ant antRun">
            <primary sortas="b-antRun">antRun</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="antRun.pl">
        <term><command>antRun.pl</command></term>
        <listitem>
          <para>est un script <application>Perl</application> qui fournit
          les mêmes fonctionnalités qu'offre le script <command>antRun</command>.</para>
          <indexterm zone="apache-ant antRun.pl">
            <primary sortas="b-antRun.pl">antRun.pl</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="complete-ant-cmd.pl">
        <term><command>complete-ant-cmd.pl</command></term>
        <listitem>
          <para>est un script <application>Perl</application> qui permet
          à <application>Bash</application> de compléter une ligne de commande
          <command>ant</command>.</para>
          <indexterm zone="apache-ant complete-ant-cmd.pl">
            <primary sortas="b-complete-ant-cmd.pl">complete-ant-cmd.pl</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="runant.pl">
        <term><command>runant.pl</command></term>
        <listitem>
          <para>est un script enveloppe <application>Perl</application> 
          utilisé pour appeler <command>ant</command>.</para>
          <indexterm zone="apache-ant runant.pl">
            <primary sortas="b-runant.pl">runant.pl</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="runant.py">
        <term><command>runant.py</command></term>
        <listitem>
          <para>est un script enveloppe <application>Python</application> 
          utilisé pour appeler <command>ant</command>.</para>
          <indexterm zone="apache-ant runant.py">
            <primary sortas="b-runant.py">runant.py</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ant-star">
        <term><filename class='libraryfile'>ant-*.jar</filename></term>
        <listitem>
          <para>fichiers qui sont les bibliothèques <application>Apache Ant</application>
          de la classe <application>Java</application>.</para>
          <indexterm zone="apache-ant ant-star">
            <primary sortas="c-ant-star">ant-*.jar</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="xercesImpl">
        <term><filename class='libraryfile'>xercesImpl.jar</filename></term>
        <listitem>
          <para>est une bibliothèque de classe <application>Java</application> 
          utilisée par <application>Apache Ant</application> pour parser du
          XML.</para>
          <indexterm zone="apache-ant xercesImpl">
            <primary sortas="c-xercesImpl">xercesImpl.jar</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="xml-apis">
        <term><filename class='libraryfile'>xml-apis.jar</filename></term>
        <listitem>
          <para>contient les classes DOM de <application>Java</application> 
          exigées par le formateur XML
          <application>Apache Ant</application>.</para>
          <indexterm zone="apache-ant xml-apis">
            <primary sortas="c-xml-apis">xml-apis.jar</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
