<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY unzip-download-http "&sourceforge-repo;/infozip/unzip552.tar.gz">
  <!-- <!ENTITY unzip-download-http "http://www.mirrorservice.org/sites/ftp.info-zip.org/pub/infozip/src/unzip552.tar.gz"> -->
  <!-- <!ENTITY unzip-download-ftp  "ftp://ftp.info-zip.org/pub/infozip/src/unzip552.tar.gz"> -->
  <!ENTITY unzip-download-ftp  "ftp://tug.ctan.org/tex-archive/tools/zip/info-zip/src/unzip552.tar.gz">
  <!ENTITY unzip-md5sum        "9d23919999d6eac9217d1f41472034a9">
  <!ENTITY unzip-size          "1.1 Mio">
  <!ENTITY unzip-buildsize     "6.7 Mio">
  <!ENTITY unzip-time          "Less than 0.1 SBU">
]>

<sect1 id="unzip" xreflabel="UnZip-&unzip-version;">
  <?dbhtml filename="unzip.html"?>

  <sect1info>
    <othername>$LastChangedBy: randy $</othername>
    <date>$Date: 2008-10-13 16:49:44 +0200 (lun 13 oct 2008) $</date>
  </sect1info>

  <title>UnZip-&unzip-version;</title>

  <indexterm zone="unzip">
    <primary sortas="a-UnZip">UnZip</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à UnZip</title>

    <para>Le paquet <application>UnZip</application> contient des outils
    d'extraction <filename>ZIP</filename>. Ils sont utiles pour extraire des fichiers
    à partir d'archives <filename>ZIP</filename>. Les archives
    <filename>ZIP</filename> sont créées avec les outils
    <application>PKZIP</application> ou <application>Info-ZIP</application>,
    surtout dans un environnement DOS.</para>

    <caution>
      <para>Le paquet <application>UnZip</application> a certains problèmes
      avec des locales. Voir le thème ci-dessous dans
      <xref linkend="unzip-locale-issues"/>. Vous pouvez trouver une discussion
      plus générale sur ces problèmes dans la section
      <xref linkend="locale-assumed-encoding"/> du paquet
      <xref linkend="locale-issues"/>.</para>
    </caution>

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&unzip-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&unzip-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &unzip-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &unzip-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &unzip-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &unzip-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>
    <itemizedlist spacing='compact'>
      <listitem>
        <para>Correctif requis&nbsp;: <ulink
        url="&patch-root;/unzip-&unzip-version;-security_fix-1.patch"/></para>
      </listitem>
      <listitem>
        <para>Correctif requis&nbsp;: <ulink
        url="&patch-root;/unzip-&unzip-version;-security_fix-2.patch"/></para>
      </listitem>
      <listitem>
        <para>Correctif facultatif&nbsp;: <ulink
        url="&patch-root;/unzip-5.50-alt-iconv-v1.1.patch"/></para>
      </listitem>
    </itemizedlist>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/unzip"/></para>

  </sect2>

  <sect2 id="unzip-locale-issues">
    <title>UnZip Locale Issues</title>

    <note>
      <para>L'utilisation de <application>UnZip</application> dans l'installation
      de <application>JDK</application>, <application>Mozilla</application>,
      <application>DocBook</application> ou tout autre paquet BLFS n'est pas
      un problème vu que les instructions de BLFS n'tilisent jamais
      <application>UnZip</application> pour extraire un fichier ayant dans
      son nom des caractères non ASCII.</para>
    </note>

    <para>Le paquet <application>UnZip</application> suppose que les noms des
    fichiers stockés dans les archives ZIP créées sur des systèmes non Unix sont 
    encodés en CP850, et qu'ils devraient être convertis en 
    ISO-8859-1 lors de l'écriture des fichiers sur le système de fichiers.
    De telles suppositions ne sont pas toujours valides. En fait, dans l'archive
    ZIP, les noms de fichiers sont encodés en codepage du DOS utilisé dans le pays
    concerné et les noms de fichier sur le disque devraient être dans l'encodage
    de la locale. Dans MS Windows, la fonction C OemToChar() (de 
    <filename>User32.DLL</filename>) effectue la bonne conversion (qui est 
    effectivement la conversion de CP850 vers une couche d'ISO-8859-1 si MS
    Windows est paramétré pour utiliser la langue anglaise américaine), mais il 
    n'y a pas d'équivalent sur Linux.</para>

    <para>Lors de l'utilisation de <command>unzip</command> pour déballer 
    une archive ZIP contenant des noms de fichiers non ASCII, les noms de fichiers
    sont endommagés car <command>unzip</command> utilise une mauvaise conversion
    quand une de ses suppositions d'encodage n'est pas bonne. Par exemple, 
    dans la locale ru_RU.KOI8-R, la conversion des noms de fichiers de CP866 en
    KOI8-R est nécessaire, mais la conversion de CP850 en ISO-8859-1 se fait, ce qui
    donne des noms de fichiers composés de caractères indéchiffrables au lieu de 
    mots (l'exemple équivalent le plus parlant pour des utilisateurs anglophones
    est rot13). Il y a plusieurs manières de contourner cette limitation&nbsp;:</para>

    <para>1) Pour déballer des archives ZIP ayant des noms de fichiers contenant 
    des caract\res non ASCII, utilisez
    <ulink url="http://www.winzip.com/">WinZip</ulink> en lançant l'émulateur
    Windows <ulink url="http://www.winehq.com/">Wine</ulink>.</para>

    <para>2) Après avoir exécuté <command>unzip</command>, réparez les
    dommages sur les noms de fichiers en utilisant l'outil
    <command>convmv</command>
    (<ulink url="http://j3e.de/linux/convmv/"/>). Ce qui suit est un exemple
    pour la locale ru_RU.KOI8-R&nbsp;:</para>

    <blockquote>
      <para>Étape 1. Annulez la conversion effectuée par
      <command>unzip</command>&nbsp;:</para>

<screen><userinput>convmv -f iso-8859-1 -t cp850 -r --nosmart --notest \
    <replaceable>&lt;/chemin/vers/fichiers/dezippes&gt;</replaceable></userinput></screen>

      <para>Étape 2. Faites la bonne conversion&nbsp;:</para>

<screen><userinput>convmv -f cp866 -t koi8-r -r --nosmart --notest \
    <replaceable>&lt;/chemin/vers/fichiers/dezippes&gt;</replaceable></userinput></screen>
    </blockquote>

    <para>3) Appliquez le correctif
    <filename>unzip-5.50-alt-iconv-v1.1.patch</filename> facultatif à
    <application>UnZip</application>. Il s'appliquer avec certains offsets.</para>

    <para>Il permet de spécifier l'encodage supposé des noms des fichiers de
    l'archive ZIP en utilisant l'option <option>-O charset_name</option> et
    l'encodage du nom de fichier sur le disque en utilisant l'option
    <option>-I charset_name</option>. Par défaut&nbsp;: l'encodage nu nom des
    fichiers sur le disque est l'encodage de la locale, l'encodage de ceux
    dans l'archive ZIP se devine selon la table intégrée basée sur l'encodage
    de la locale. Pour les utilisateurs anglais américains, cela veut dire que
    unzip convertit par défaut de CP850 vers ISO-8859-1.</para>

    <para>Attention&nbsp;: cette méthode ne fonctionne qu'avec des encodages
    8 bits de locale, pas avec UTF-8. Si vous essayez d'utiliser une 
    <command>unzip</command> corrigée dans des locales UTF-8 pourrait aboutir à
    une erreur de segmentation et c'est probablement un risque de sécurité.</para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de UnZip</title>

    <para>Remarquez que si vous avez appliqué le correctif décrit ci-dessus pour
    les problèmes de locale, le premier correctif requis de sécurité aura quelques
    offsets. Installez maintenant 
    <application>UnZip</application> en lançant les commandes suivantes&nbsp;:</para>

<screen><userinput>patch -Np1 -i ../unzip-&unzip-version;-security_fix-1.patch &amp;&amp;
patch -Np1 -i ../unzip-&unzip-version;-security_fix-2.patch &amp;&amp;
make -f unix/Makefile LOCAL_UNZIP=-D_FILE_OFFSET_BITS=64 linux</userinput></screen>

    <para>Pour tester les résultats, lancez&nbsp;: <command>make check</command>.</para>

    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>make prefix=/usr install</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para><parameter>linux</parameter>&nbsp;: Cette cible dans
    <filename>Makefile</filename> fait des suppositions qui peuvent être utiles
    pour un système Linux lors de la compilation d'exécutables. Pour
    avoir des alternatives à cette cible, utilisez
    <command>make list</command></para>

    <para><parameter>LOCAL_UNZIP=...</parameter>&nbsp;: Ceci règle
    les drapeaux de compilation pour permettre à <application>UnZip</application>
    de gérer des fichiers jusqu'à 4 Gio.</para>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>funzip, unzip, unzipfsx, zipgrep, et zipinfo</seg>
        <seg>Aucune</seg>
        <seg>Aucun</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="funzip">
        <term><command>funzip</command></term>
        <listitem>
          <para>permet à la sortie des commandes <command>unzip</command> 
          d'être redirigées.</para>
          <indexterm zone="unzip funzip">
            <primary sortas="b-funzip">funzip</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="unzip-prog">
        <term><command>unzip</command></term>
        <listitem>
          <para>liste, teste ou extrait des fichiers d'une archive <filename>ZIP</filename>.</para>
          <indexterm zone="unzip unzip-prog">
            <primary sortas="b-unzip">unzip</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="unzipfsx">
        <term><command>unzipfsx</command></term>
        <listitem>
          <para>est un stub auto-extrait qui peut être envoyé vers
          <filename>ZIP</filename> archive. Des fichiers dans ce format 
          permettent au destinataire de décompresser l'archive sans installer
          <application>UnZip</application>.</para>
          <indexterm zone="unzip unzipfsx">
            <primary sortas="b-unzipfsx">unzipfsx</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="zipgrep">
        <term><command>zipgrep</command></term>
        <listitem>
          <para>cherche dans des fichiers d'une archive <filename>ZIP</filename> 
          des lignes correspondant à un modèle.</para>
          <indexterm zone="unzip zipgrep">
            <primary sortas="b-zipgrep">zipgrep</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="zipinfo">
        <term><command>zipinfo</command></term>
        <listitem>
          <para>produit des informations techniques sur des fichiers d'une
          archive <filename>ZIP</filename>, dont les droits d'accès au fichier,
          le statut du chiffrement, le type de compression, etc.</para>
          <indexterm zone="unzip zipinfo">
            <primary sortas="b-zipinfo">zipinfo</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libunzip">
        <term><filename class='libraryfile'>libunzip.so</filename></term>
        <listitem>
          <para>contient les fonctions de l'API exigées par les programmes
          <application>UnZip</application>.</para>
          <indexterm zone="unzip libunzip">
            <primary sortas="c-libunzip">libunzip.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
