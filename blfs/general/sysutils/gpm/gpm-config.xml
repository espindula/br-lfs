<sect2>
<title>Configurer gpm</title>

<sect3><title>Script gpm init.d</title>
<para>Le script gpm init.d peut être créé en utilisant les commandes suivantes:
(ceci suppose que vous ayez suivi LFS en initialisant votre variable $rc_base
à <filename class="directory">/etc/rc.d</filename>)</para>
<para><screen><userinput>cat &gt; /etc/rc.d/init.d/gpm &lt;&lt; "EOF"</userinput>
#!/bin/sh
# Début $rc_base/init.d/gpm

# Basé sur le script sysklogd de LFS-3.1 et précédents.
# Réécrit par Gerard Beekmans  - gerard@linuxfromscratch.org
# Parties spécifiques à GPM par Mark Hymers - markh@linuxfromscratch.org

source /etc/sysconfig/rc
source $rc_functions

if [ -f /etc/sysconfig/mouse ]
	then
        source /etc/sysconfig/mouse
fi

if [ -z "$MDEVICE" ] || [ -z "$PROTOCOL" ]
	then
	echo "Please create an /etc/sysconfig/mouse file containing"
	echo "MDEVICE and PROTOCOL values"
	exit 1;
fi

case "$1" in
        start)
                echo "Starting gpm..."
                loadproc gpm -m $MDEVICE -t $PROTOCOL
                ;;

        stop)
                echo "Stopping gpm..."
                killproc gpm
                ;;

        restart)
                $0 stop
                sleep 1
                $0 start
                ;;

        status)
                statusproc gpm
                ;;

        *)
                echo "Usage: $0 {start|stop|restart|status}"
                exit 1
                ;;
esac

# Fin $rc_base/init.d/gpm
<userinput>EOF
chmod 755 /etc/rc.d/init.d/gpm</userinput></screen></para>

<para>Vous avez alors besoin de créer les liens symboliques vers ce
fichier dans les bons répertoires rc.d. Par exemple:
<screen><userinput>cd /etc/rc.d/init.d &amp;&amp;
ln -sf ../init.d/gpm ../rc0.d/K10gpm &amp;&amp;
ln -sf ../init.d/gpm ../rc1.d/K10gpm &amp;&amp;
ln -sf ../init.d/gpm ../rc2.d/K10gpm &amp;&amp;
ln -sf ../init.d/gpm ../rc3.d/S70gpm &amp;&amp;
ln -sf ../init.d/gpm ../rc4.d/S70gpm &amp;&amp;
ln -sf ../init.d/gpm ../rc5.d/S70gpm &amp;&amp;
ln -sf ../init.d/gpm ../rc6.d/K10gpm</userinput></screen></para></sect3>

<sect3><title>Fichiers de configuration</title>
<para><filename>/etc/sysconfig/mouse</filename>
Ce fichier contient le nom du périphérique de votre souris et le protocole
qu'elle utilise. Pour créer ce fichier, lancez la commande suivante:</para>

<para><screen><userinput>cat &gt; /etc/sysconfig/mouse &lt;&lt; "EOF"</userinput> 
# Debut /etc/sysconfig/mouse
MDEVICE=yourdevice
PROTOCOL=yourprotocol
# Fin /etc/sysconfig/mouse
<userinput>EOF</userinput></screen></para>
</sect3>

<sect3><title>Informations de configuration</title>

<para>Des exemples de valeurs pour MDEVICE et PROTOCOL sont</para>

<para><screen>MDEVICE=/dev/psaux
PROTOCOL=imps2</screen></para>

<para>Une liste des protocoles connus est disponible en lançant
<userinput>gpm -t -help</userinput>.  La configuration de MDEVICE
dépend du type de souris dont vous disposez. Par exemple,
<filename>/dev/ttyS0</filename> pour une souris série (sous Windows, il
s'agit de COM1), <filename>/dev/input/mice</filename> est souvent utilisé
pour les souris USB et <filename>/dev/psaux</filename> pour les souris PS2.
Il est généralement admis que lier /dev/mouse au périphérique réel n'est pas
une bonne idée, et qu'il est préférable de le référencer directement.</para>

</sect3>

</sect2>

