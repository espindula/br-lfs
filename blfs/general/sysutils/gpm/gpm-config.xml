<sect2>
<title>Configurer <application><acronym>GPM</acronym></application></title>

<sect3><title>Script gpm init.d</title>
<para>Le script de démarrage <command>gpm</command> peut être créé en utilisant les commandes suivantes:
<!-- (ceci suppose que vous ayez suivi LFS en initialisant votre variable $rc_base
à <filename class="directory">/etc/rc.d</filename>)</para>-->
<screen><userinput><command>cat &gt; /etc/rc.d/init.d/gpm &lt;&lt; "EOF"</command>
#!/bin/sh
# Début $rc_base/init.d/gpm

# Basé sur le script sysklogd de LFS-3.1 et précédents.
# Réécrit par Gerard Beekmans  - gerard@linuxfromscratch.org
# Parties spécifiques à GPM par Mark Hymers - markh@linuxfromscratch.org

source /etc/sysconfig/rc
source $rc_functions

if [ -f /etc/sysconfig/mouse ]
	then
        source /etc/sysconfig/mouse
fi

if [ -z "$MDEVICE" ] || [ -z "$PROTOCOL" ]
	then
	echo "Please create an /etc/sysconfig/mouse file containing"
	echo "MDEVICE and PROTOCOL values"
	exit 1;
fi

case "$1" in
        start)
                echo "Starting gpm..."
                loadproc gpm -m $MDEVICE -t $PROTOCOL
                ;;

        stop)
                echo "Stopping gpm..."
                killproc gpm
                ;;

        restart)
                $0 stop
                sleep 1
                $0 start
                ;;

        status)
                statusproc gpm
                ;;

        *)
                echo "Usage: $0 {start|stop|restart|status}"
                exit 1
                ;;
esac

# Fin $rc_base/init.d/gpm
<command>EOF
chmod 755 /etc/rc.d/init.d/gpm</command></userinput></screen>

<para>Vous avez alors besoin de créer les liens symboliques vers ce
fichier dans les bons répertoires <filename>rc.d</filename>. Par exemple:
<screen><userinput><command>cd /etc/rc.d/init.d &amp;&amp;
ln -sf ../init.d/gpm ../rc0.d/K10gpm &amp;&amp;
ln -sf ../init.d/gpm ../rc1.d/K10gpm &amp;&amp;
ln -sf ../init.d/gpm ../rc2.d/K10gpm &amp;&amp;
ln -sf ../init.d/gpm ../rc3.d/S70gpm &amp;&amp;
ln -sf ../init.d/gpm ../rc4.d/S70gpm &amp;&amp;
ln -sf ../init.d/gpm ../rc5.d/S70gpm &amp;&amp;
ln -sf ../init.d/gpm ../rc6.d/K10gpm</command></userinput></screen>
</sect3>

<sect3><title>Fichiers de configuration</title>
<para><filename>/etc/sysconfig/mouse</filename>
Ce fichier contient le nom du périphérique de votre souris et le protocole
qu'elle utilise. Pour créer ce fichier, lancez la commande suivante:</para>

<screen><userinput><command>cat &gt; /etc/sysconfig/mouse &lt;&lt; "EOF"</command> 
# start /etc/sysconfig/mouse
MDEVICE=<replaceable>[yourdevice]</replaceable>
PROTOCOL=<replaceable>[yourprotocol]</replaceable>
# end /etc/sysconfig/mouse
<command>EOF</command></userinput></screen>
</sect3>

<sect3><title>Informations de configuration</title>

<para>Des exemples de valeurs pour <envar>MDEVICE</envar> et
<envar>PROTOCOL</envar> sont</para>

<screen><userinput>MDEVICE=/dev/psaux
PROTOCOL=imps2</userinput></screen>

<para>Une liste des protocoles connus est disponible en lançant
<command>gpm -t -help</command>.  La configuration de
<envar>MDEVICE</envar> dépend du type de souris dont vous disposez. Par exemple,
<filename>/dev/ttyS0</filename> pour une souris série (sous Windows, il
s'agit de COM1), <filename>/dev/input/mice</filename> est souvent utilisé
pour les souris <acronym>USB</acronym> et <filename>/dev/psaux</filename> pour
les souris PS2. Il est généralement admis que lier /dev/mouse au périphérique
réel n'est pas une bonne idée, et qu'il est préférable de le référencer
directement.</para>

</sect3>

</sect2>

