<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      Configuration de l'environnement JAVA
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-r10.1-1007+">
    <div class="navheader">
      <h4>
        Au-delà de Linux<sup>®</sup> From Scratch (édition <span class=
        "phrase">System V)</span> - Version r10.1-1007+
      </h4>
      <h3>
        Chapitre&nbsp;13.&nbsp;Programmation
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="openjdk.html" title=
          "OpenJDK-16.0.2">Précédent</a>
          <p>
            OpenJDK-16.0.2
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="apache-ant.html" title=
          "apache-ant-1.10.11">Suivant</a>
          <p>
            apache-ant-1.10.11
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="prog.html" title=
          "Chapitre&nbsp;13.&nbsp;Programmation">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition System V) - Version r10.1-1007+">
          Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="ojdk-conf" name="ojdk-conf"></a>Configuration de
        l'environnement JAVA
      </h1>
      <div class="sect2" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          <a id="java-profile" name="java-profile"></a>Configuration de
          l'environnement
        </h2>
        <p>
          Après que l'installation des paquets est terminée, l'étape suivante
          est d'être certain que le système peut trouver proprement les
          fichiers. Si vous initialisé vos scripts de login comme recommandé
          dans <a class="xref" href="../postlfs/profile.html" title=
          "Les fichiers de démarrage du shell Bash">Les fichiers de démarrage
          du shell Bash</a>, mettez à jour l'environnement en créant le
          script <code class="filename">openjdk.sh</code>, en tant
          qu'utilisateur <code class="systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">cat &gt; /etc/profile.d/openjdk.sh &lt;&lt; "EOF"
<code class="literal"># Begin /etc/profile.d/openjdk.sh

# Set JAVA_HOME directory
JAVA_HOME=/opt/jdk

# Adjust PATH
pathappend $JAVA_HOME/bin

# Add to MANPATH
pathappend $JAVA_HOME/man MANPATH

# Auto Java CLASSPATH: Copy jar files to, or create symlinks in, the
# /usr/share/java directory. Note that having gcj jars with OpenJDK 8
# may lead to errors.

AUTO_CLASSPATH_DIR=/usr/share/java

pathprepend . CLASSPATH

for dir in `find ${AUTO_CLASSPATH_DIR} -type d 2&gt;/dev/null`; do
    pathappend $dir CLASSPATH
done

for jar in `find ${AUTO_CLASSPATH_DIR} -name "*.jar" 2&gt;/dev/null`; do
    pathappend $jar CLASSPATH
done

export JAVA_HOME
unset AUTO_CLASSPATH_DIR dir jar

# End /etc/profile.d/openjdk.sh</code>
EOF</kbd></pre>
        <p>
          Si vous avez installé <a class="xref" href="../postlfs/sudo.html"
          title="Sudo-1.9.7p2">Sudo-1.9.7p2</a>, le super utilisateur devrait
          avoir accès aux variables sus-mentionnées. Exécutez les commandes
          suivantes en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">cat &gt; /etc/sudoers.d/java &lt;&lt; "EOF"
<code class="literal">Defaults env_keep += JAVA_HOME
Defaults env_keep += CLASSPATH</code>
EOF</kbd></pre>
        <p>
          Pour permettre à <span class=
          "command"><strong>mandb</strong></span> d'inclure les pages de
          manuel d'OpenJDK dans sa base de données, lancez en tant
          qu'utilisateur <code class="systemitem">root</code> &nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">cat &gt;&gt; /etc/man_db.conf &lt;&lt; "EOF" &amp;&amp;
<code class="literal"># Begin Java addition
MANDATORY_MANPATH     /opt/jdk/man
MANPATH_MAP           /opt/jdk/bin     /opt/jdk/man
MANDB_MAP             /opt/jdk/man     /var/cache/man/jdk
# End Java addition</code>
EOF

mkdir -p /var/cache/man &amp;&amp;
mandb -c /opt/jdk/man</kbd></pre>
      </div>
      <div class="sect2" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          <a id="ojdk-certs" name="ojdk-certs"></a>Configuration des
          certificats d'autorités de certification pour Java
        </h2>
        <p>
          <span class="application">OpenJDK</span> utilise son propre format
          pour les certificats de CA. Les modules de sécurité de Java
          utilisent <code class="envar">$JAVA_HOME</code><code class=
          "filename">/lib/security/cacerts</code> par défaut. Pour garder les
          certificats à un seul endroit, nous utilisons <code class=
          "filename">/etc/ssl/java/cacerts</code>. Les instruction de la page
          <a class="xref" href="../postlfs/make-ca.html" title=
          "make-ca-1.7">make-ca-1.7</a> ont créé le fichier situé dans
          <code class="filename">/etc/ssl/java</code>. Installez un lien
          symbolique à l'emplacement par défaut en tant qu'utilisateur
          <code class="systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">ln -sfv /etc/pki/tls/java/cacerts /opt/jdk/lib/security/cacerts</kbd></pre>
        <p>
          Utilisez les commandes suivantes pour vérifier si le fichier
          <code class="filename">cacerts</code> a bien été installé&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">/opt/jdk/bin/keytool -list -cacerts</kbd></pre>
        <p>
          Lorsqu'on vous demande <code class="computeroutput">Enter keystore
          password:</code>, entrez <strong class=
          "userinput"><code>changeit</code></strong> (la valeur par défaut)
          ou appuyez simplement sur <span class="quote">«&nbsp;<span class=
          "quote">entrée</span>&nbsp;»</span>. Si le fichier <code class=
          "filename">cacerts</code> est correctement installé, vous verrez
          une liste des certificats avec les informations relatives à chacun.
          Sinon, vous devez les réinstaller.
        </p>
        <p>
          Si vous installez plus tard une nouvelle JVM, vous devrez seulement
          créer le lien symbolique à l'emplacement par défaut pour pouvoir
          utiliser les cacerts.
        </p>
      </div>
      <p class="updated">
        Last updated on
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="openjdk.html" title=
          "OpenJDK-16.0.2">Précédent</a>
          <p>
            OpenJDK-16.0.2
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="apache-ant.html" title=
          "apache-ant-1.10.11">Suivant</a>
          <p>
            apache-ant-1.10.11
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="prog.html" title=
          "Chapitre&nbsp;13.&nbsp;Programmation">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition System V) - Version r10.1-1007+">
          Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
