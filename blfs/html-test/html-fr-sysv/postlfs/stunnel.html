<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      stunnel-5.60
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-r10.1-1007+">
    <div class="navheader">
      <h4>
        Au-delà de Linux<sup>®</sup> From Scratch (édition <span class=
        "phrase">System V)</span> - Version r10.1-1007+
      </h4>
      <h3>
        Chapitre&nbsp;4.&nbsp;Sécurité
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="ssh-askpass.html" title=
          "ssh-askpass-8.7p1">Précédent</a>
          <p>
            ssh-askpass-8.7p1
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="sudo.html" title="Sudo-1.9.7p2">Suivant</a>
          <p>
            Sudo-1.9.7p2
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="security.html" title=
          "Chapitre&nbsp;4.&nbsp;Sécurité">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition System V) - Version r10.1-1007+">
          Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="stunnel" name="stunnel"></a>stunnel-5.60
      </h1>
      <div class="package" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Introduction à stunnel
        </h2>
        <p>
          Le paquet <span class="application">Stunnel</span> contient un
          programme qui vous permet de chiffrer des connexions TCP de votre
          choix en SSL (Secure Sockets Layer) pour que vous puissiez
          communiquer facilement avec des clients par des canaux sécurisés.
          <span class="application">Stunnel</span> peut être utilisé pour
          ajouter la fonctionnalité SSL aux démons <span class=
          "application">Inetd</span> couramment utilisés comme les serveurs
          POP-2, POP-3, et IMAP, aussi bien qu'à des démons autonomes comme
          NNTP, SMTP et HTTP. <span class="application">Stunnel</span> peut
          aussi être utilisé pour les tunnels PPP par des sockets réseaux
          sans modifications du code source du paquet du serveur.
        </p>
        <p>
          This package is known to build and work properly using an LFS-11.0
          platform.
        </p>
        <h3>
          Informations sur le paquet
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Téléchargement (HTTP)&nbsp;: <a class="ulink" href=""></a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Téléchargement (FTP)&nbsp;: <a class="ulink" href=
                "ftp://ftp.stunnel.org/stunnel/archive/5.x/stunnel-5.60.tar.gz">
                ftp://ftp.stunnel.org/stunnel/archive/5.x/stunnel-5.60.tar.gz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Somme de contrôle MD5 du téléchargement&nbsp;:
                d68ef1c93a1e44df9455e1185d7b7742
              </p>
            </li>
            <li class="listitem">
              <p>
                Taille du téléchargement&nbsp;: 964 Ko
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation de l'espace disque requis&nbsp;: 7.2 Mo
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation du temps de construction&nbsp;: 0.1 SBU
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Dépendances de stunnel
        </h3>
        <h4>
          Facultatives
        </h4>
        <p class="optional">
          <a class="ulink" href="http://netcat.sourceforge.net/">netcat</a>
          (requis pour les tests), <a class="ulink" href=
          "ftp://ftp.porcupine.org/pub/security/">tcpwrappers</a> et
          <a class="ulink" href="https://dist.torproject.org/">TOR</a>
        </p>
        <p class="usernotes">
          Notes utilisateur&nbsp;: <a class="ulink" href=
          "https://wiki.linuxfromscratch.org/blfs/wiki/stunnel">https://wiki.linuxfromscratch.org/blfs/wiki/stunnel</a>
        </p>
      </div>
      <div class="installation" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Installation de stunnel
        </h2>
        <p>
          Le démon <span class="command"><strong>Stunnel</strong></span> sera
          lancé dans une cage <span class=
          "command"><strong>chroot</strong></span> par un utilisateur non
          privilégié. Créez le nouvel utilisateur et le nouveau groupe en
          utilisant les commandes suivantes en tant qu'utilisateur
          <code class="systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">groupadd -g 51 stunnel &amp;&amp;
useradd -c "stunnel Daemon" -d /var/lib/stunnel \
        -g stunnel -s /bin/false -u 51 stunnel</kbd></pre>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            Un certificat SSL signé et une clé privée sont nécessaires pour
            lancer le démon <span class=
            "command"><strong>stunnel</strong></span>. Après l'installation
            du paquet, il y a des instructions pour les générer. Cependant si
            vous possédez ou si vous avez déjà créé un certificat SSL signé
            que vous souhaitez l'utiliser, copiez-le dans <code class=
            "filename">/etc/stunnel/stunnel.pem</code> avant de commencer la
            construction (assurez-vous que seul <code class=
            "systemitem">root</code> a l'accès en lecture et écriture). Le
            fichier <code class="filename">.pem</code> doit être formaté
            comme décrit ci-dessous&nbsp;:
          </p>
          <pre class="screen"><code class=
          "literal">-----BEGIN PRIVATE KEY-----
<em class=
"replaceable"><code>&lt;many encrypted lines of private key&gt;</code></em>
-----END PRIVATE KEY-----
-----BEGIN CERTIFICATE-----
<em class=
"replaceable"><code>&lt;many encrypted lines of certificate&gt;</code></em>
-----END CERTIFICATE-----
-----BEGIN DH PARAMETERS-----
<em class="replaceable"><code>&lt;encrypted lines of dh parms&gt;</code></em>
-----END DH PARAMETERS-----</code></pre>
        </div>
        <p>
          Installez <span class="application">stunnel</span> en lançant les
          commandes suivantes&nbsp;:
        </p>
        <pre class="userinput">
<kbd class="command">./configure --prefix=/usr        \
            --sysconfdir=/etc    \
            --localstatedir=/var \
            --disable-systemd    &amp;&amp;
make</kbd></pre>
        <p>
          Si vous avez installé l'application netcat facultative, les tests
          de regression peuvent être lancés avec <span class=
          "command"><strong>make check</strong></span>.
        </p>
        <p>
          Maintenant, en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">make docdir=/usr/share/doc/stunnel-5.60 install</kbd></pre>
        <p>
          Si vous n'avez pas déjà un certificat SSL signé et une clé privée,
          créez le fichier <code class="filename">stunnel.pem</code> dans le
          répertoire <code class="filename">/etc/stunnel</code> en utilisant
          la commande suivante. Vous aurez une invite pour rentrer les
          informations nécessaires. Assurez-vous de répondre à
        </p>
        <pre class="screen"><code class=
        "prompt">Common Name (FQDN of your server) [localhost]:</code></pre>
        <p>
          avec le nom ou l'adresse IP que vous utiliserez pour accéder au(x)
          service(s).
        </p>
        <p>
          Pour générer un certificat, en tant qu'utilisateur <code class=
          "systemitem">root</code>, tapez&nbsp;:
        </p>
        <pre class="root"><kbd class="command">make cert</kbd></pre>
      </div>
      <div class="commands" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Explication des commandes
        </h2>
        <p>
          <em class="parameter"><code>--disable-systemd</code></em>&nbsp;: Ce
          paramètre désactive le support de l'activation de systemd, qui
          n'est pas disponible dans BLFS.
        </p>
        <p>
          <span class="command"><strong>make docdir=...
          install</strong></span>&nbsp;: Cette commande installe le paquet et
          modifie le répertoire d'installation de la documentation en un nom
          conforme aux conventions.
        </p>
      </div>
      <div class="configuration" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Configuration de Stunnel
        </h2>
        <div class="sect3">
          <h3 class="sect3">
            <a id="stunnel-config" name="stunnel-config"></a>Fichiers de
            configuration
          </h3>
          <p>
            <code class="filename">/etc/stunnel/stunnel.conf</code>
          </p>
        </div>
        <div class="sect3">
          <h3 class="sect3">
            Informations sur la configuration
          </h3>
          <p>
            En tant qu'utilisateur <code class="systemitem">root</code>,
            créez le répertoire utilisé pour le fichier <code class=
            "filename">.pid</code> créé quand le démon <span class=
            "application">Stunnel</span> démarre&nbsp;:
          </p>
          <pre class="root"><kbd class=
          "command">install -v -m750 -o stunnel -g stunnel -d /var/lib/stunnel/run &amp;&amp;
chown stunnel:stunnel /var/lib/stunnel</kbd></pre>
          <p>
            Ensuite, créez un fichier de configuration <code class=
            "filename">/etc/stunnel/stunnel.conf</code> de base en utilisant
            les commandes suivantes en tant qu'utilisateur <code class=
            "systemitem">root</code>&nbsp;:
          </p>
          <pre class="root"><kbd class=
          "command">cat &gt; /etc/stunnel/stunnel.conf &lt;&lt; "EOF" 
<code class="literal">; File: /etc/stunnel/stunnel.conf

; Note: The pid and output locations are relative to the chroot location.

pid    = /run/stunnel.pid
chroot = /var/lib/stunnel
client = no
setuid = stunnel
setgid = stunnel
cert   = /etc/stunnel/stunnel.pem

;debug = 7
;output = stunnel.log

;[https]
;accept  = 443
;connect = 80
;; "TIMEOUTclose = 0" is a workaround for a design flaw in Microsoft SSL
;; Microsoft implementations do not use SSL close-notify alert and thus
;; they are vulnerable to truncation attacks
;TIMEOUTclose = 0</code>

EOF</kbd></pre>
          <p>
            Enfin, ajoutez le(s) service(s) que vous souhaitez chiffrer au
            fichier de configuration. Le format ressemble à ce qui
            suit&nbsp;:
          </p>
          <pre class="screen"><code class="literal">[<em class=
          "replaceable"><code>&lt;service&gt;</code></em>]
accept  = <em class=
"replaceable"><code>&lt;hostname:portnumber&gt;</code></em>
connect = <em class=
"replaceable"><code>&lt;hostname:portnumber&gt;</code></em></code></pre>
          <p>
            Si vous utilisez <span class="application">Stunnel</span> pour
            chiffrer un démon lancé à partir de <span class=
            "command"><strong>[x]inetd</strong></span>, il se peut que vous
            deviez désactiver ce démon dans le fichier <code class=
            "filename">/etc/[x]inetd.conf</code> et activer un service
            <em class="replaceable"><code>&lt;service&gt;</code></em>_stunnel
            correspondant. Il se peut que vous deviez également ajouter une
            entrée adéquate dans <code class="filename">/etc/services</code>.
          </p>
          <p>
            Pour une explication complète des commandes et de leurs syntaxes,
            utilisées dans le fichier de configuration, lancez <span class=
            "command"><strong>man stunnel</strong></span>.
          </p>
        </div>
        <div class="sect3">
          <h3 class="sect3">
            <a id="stunnel-init" name="stunnel-init"></a>Script de démarrage
          </h3>
          <p>
            Pour démarrer automatiquement le démon <span class=
            "command"><strong>stunnel</strong></span> quand on démarre le
            système, installez le script de démarrage <code class=
            "filename">/etc/rc.d/init.d/stunnel</code> du paquet <a class=
            "xref" href="../introduction/bootscripts.html" title=
            "Scripts de démarrage BLFS">blfs-bootscripts-20210826</a>.
          </p>
          <pre class="root"><kbd class=
          "command">make install-stunnel</kbd></pre>
        </div>
      </div>
      <div class="content" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Contenu
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Programmes installés:</strong>
              <span class="segbody">stunnel et stunnel3</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Bibliothèque installée:</strong>
              <span class="segbody">libstunnel.so</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Répertoires installés:</strong>
              <span class="segbody">/{etc,usr/lib,var/lib}/stunnel and
              /usr/share/doc/stunnel-5.60</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Descriptions courtes
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="stunnel-prog" name="stunnel-prog"></a><span class=
                    "term"><span class=
                    "command"><strong>stunnel</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un programme conçu pour fonctionner en tant
                    qu'enveloppe SSL chiffrée entre des clients distants et
                    locaux (<span class=
                    "command"><strong>{x}inetd</strong></span>-startable) ou
                    des serveurs distants
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="stunnel3" name="stunnel3"></a><span class=
                    "term"><span class=
                    "command"><strong>stunnel3</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un script enveloppe <span class=
                    "application">Perl</span> pour utiliser la syntaxe
                    <span class="command"><strong>stunnel</strong></span> 3.x
                    avec <span class=
                    "command"><strong>stunnel</strong></span> &gt;=4.05
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="libstunnel" name="libstunnel"></a><span class=
                    "term"><code class="filename">libstunnel.so</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    contient les fonctions API exigées par <span class=
                    "application">Stunnel</span>
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="ssh-askpass.html" title=
          "ssh-askpass-8.7p1">Précédent</a>
          <p>
            ssh-askpass-8.7p1
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="sudo.html" title="Sudo-1.9.7p2">Suivant</a>
          <p>
            Sudo-1.9.7p2
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="security.html" title=
          "Chapitre&nbsp;4.&nbsp;Sécurité">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition System V) - Version r10.1-1007+">
          Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
