<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY gnucash-download-http  "http://www.gnucash.org/pub/gnucash/sources/stable/gnucash-&gnucash-version;.tar.bz2">
  <!ENTITY gnucash-download-ftp   "ftp://ftp.at.gnucash.org/pub/gnucash/sources/stable/2.2.4/gnucash-&gnucash-version;.tar.bz2">  <!ENTITY gnucash-src-md5sum     "f521cea858ee7223325114ec98de86ca">
  <!ENTITY gnucash-size           "6.8 Mio">
  <!ENTITY gnucash-buildsize      "163 Mio (additional 50 Mio if running test suite; additional 124 Mio for API docs)">
  <!ENTITY gnucash-time           "3.1 SBU (additional 1.8 SBU to run the test suite; additional 0.3 SBU for docs)">
  <!ENTITY gnucash-docs-version   "2.2.0">
  <!ENTITY gnucash-docs-download  "http://www.gnucash.org/pub/gnucash/sources/stable/gnucash-docs-&gnucash-docs-version;.tar.gz">
  <!ENTITY gnucash-docs-md5sum    "97a29e499baca1807a3944ae3c0ad61e">
  <!ENTITY gnucash-docs-size      "10.0 Mio">
  <!ENTITY gnucash-docs-buildsize "27 Mio (additional 41 Mio for html et pdf)">
  <!ENTITY gnucash-docs-time      "moins de 0.1 SBU (additional 0.4 SBU for html et pdf)">
]>

<sect1 id="gnucash" xreflabel="GnuCash-&gnucash-version;">
  <?dbhtml filename="gnucash.html" ?>

  <sect1info>
    <othername>$LastChangedBy&nbsp;: andy $</othername>
    <date>$Date&nbsp;: 2012-02-28 14:50:35 +0100 (mar. 28 févr. 2012) $</date>
  </sect1info>

  <title>GnuCash-&gnucash-version;</title>

  <indexterm zone="gnucash">
    <primary sortas="a-GnuCash">GnuCash</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à GnuCash</title>

    <para><application>GnuCash</application> est un gestionnaire de comptabilité
    personnelle.</para>

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&gnucash-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&gnucash-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &gnucash-src-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &gnucash-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &gnucash-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &gnucash-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>
    <itemizedlist spacing='compact'>
      <listitem>
        <para>Documentation d'aide&nbsp;: <ulink url="&gnucash-docs-download;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &gnucash-docs-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &gnucash-docs-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &gnucash-docs-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &gnucash-docs-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de GnuCash</bridgehead>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required"><xref linkend="guile"/>,
    <xref linkend="slib"/>,
    <xref linkend="goffice"/> et
    <xref linkend="gtkhtml"/></para>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional"><xref linkend="postgresql"/>,
    <ulink url="ftp://ftp.gnu.org/pub/gnu/guile/">Guile-www</ulink> et
    <ulink url="http://perens.com/FreeSoftware/">Electric Fence</ulink></para>

    <bridgehead renderas="sect4">Facultatives (Required for the Help System)</bridgehead>
    <para role="optional"><xref linkend="scrollkeeper"/> et
    <xref linkend="yelp"/> (run-time requirement to view the Help documents)</para>

    <bridgehead renderas="sect4">Facultatives (for On-Line Banking)</bridgehead>
    <para role="optional"><ulink
    url="http://libofx.sourceforge.net/">LibOFX</ulink>
    (exige <xref linkend="opensp"/> et <xref linkend="curl"/>),
    <ulink url="http://sourceforge.net/projects/ktoblzcheck">KtoBlzCheck</ulink>,
    et <ulink url="http://www.aquamaniac.de/aqbanking/">AqBanking</ulink>
    (exige <ulink
    url="http://gwenhywfar.sourceforge.net/">Gwenhywfar</ulink>
    et <ulink url="http://www.libchipcard.de/">libchipcard3</ulink>)</para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/gnucash"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de GnuCash</title>

    <para>Installez <application>GnuCash</application> en lançant les commandes
    suivantes&nbsp;:</para>

<screen><userinput>sed -i 's|xml::${sysconfdir}|xml::${GNOME_SYSCONFDIR}|' configure &amp;&amp;
  
./configure \
    --prefix=/usr \
    --sysconfdir=/etc \
    --libexecdir=/usr/lib \
    --with-gconf-schema-file-dir=$GNOME_SYSCONFDIR/gconf/schemas &amp;&amp;
make</userinput></screen>

    <para>Si vous souhaitez créer la documentation de l'API au format HTML,
    vous devez avoir installé <xref linkend="doxygen"/> et <xref linkend="graphviz"/>,
    puis lancer&nbsp;: <command>make doc</command>. Si vous souhaitez le guide 
    du concept de l'API (API Design Guide) dans plusieurs formats, vous devez
    avoir installé <!-- <xref linkend="tetex"/> ou --> <xref linkend="texlive"/>et lancer&nbsp;:
    <command>make -C src/doc/design html pdf ps</command>.</para>

    <para>Pour tester les résultats, taper&nbsp;: <command>make check</command>. Tous
    les tests devraient réussir. Une façon facile de voir les résultats des 
    tests est d'exécuter <command>grep -A1 ============== check.log</command> 
    (cela suppose que vous avez redirigé la sortie des tests vers le nom de
    fichier indiqué).</para>

    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role='root'><userinput>make install &amp;&amp;

mv -v /usr/share/gnucash/doc /usr/share/doc/gnucash-&gnucash-version; &amp;&amp;
ln -v -s ../doc/gnucash-&gnucash-version; /usr/share/gnucash/doc &amp;&amp;

for FILENAME in doc/{misc*,gnome*,generic*,build*}.txt \
                doc/{gtkrc*,TRANSLATION_HOWTO,README.translator.txt} \
                doc/README.{build-system,OFX,HBCI}
do
    install -v -m644 ${FILENAME} /usr/share/doc/gnucash-&gnucash-version;
done &amp;&amp;

install -v -m755 -d /usr/share/doc/gnucash-&gnucash-version;/api/engine &amp;&amp;
install -v -m644    src/doc/{TODO*,*.txt,*.html} \
                    /usr/share/doc/gnucash-&gnucash-version;/api &amp;&amp;
install -v -m644    src/engine/*.txt \
                    /usr/share/doc/gnucash-&gnucash-version;/api/engine</userinput></screen>

    <para>Si vous avez construit la documentation HTML de l'API ou le Guide du 
    concept, exécutez les commandes suivantes (modifiées comme nécessaire, selon
    les docs qui vont être installées) en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role='root'><userinput>install -v -m755 -d /usr/share/doc/gnucash-&gnucash-version;/{design,api}/html &amp;&amp;
install -v -m644    src/doc/design/gnucash-design.html/* \
                    /usr/share/doc/gnucash-&gnucash-version;/design/html &amp;&amp;
install -v -m644    src/doc/design/gnucash-design.{pdf,ps,dvi} \
                    /usr/share/doc/gnucash-&gnucash-version;/design &amp;&amp;
install -v -m644    src/doc/html/* \
                    /usr/share/doc/gnucash-&gnucash-version;/api/html</userinput></screen>

    <para>Si vous voulez installer le szstème de documentation d'aide, vous 
    devez avoir installé <xref linkend="scrollkeeper"/>. Puis déballez l'archive
    tar supplémentaire, allez dans le répertoire des sources
    <filename class='directory'>gnucash-docs-&gnucash-docs-version;</filename>,
    et exécutez les commandes suivantes en tant qu'utilisateur non privilégié&nbsp;:</para>

<screen><userinput>./configure --prefix=/usr \
            --localstatedir=/var/lib &amp;&amp;
make</userinput></screen>

    <para>Vous pouvez créer les HTML du manuel d'aide et du guide de 
    l'utilisateur si vous avez installé les outils DocBook XML
    (<xref linkend="libxslt"/>,
    <xref linkend="DocBook"/> et <xref linkend="docbook-xsl"/>). Vous pouvez
    créer une version PDF du guide des utilisateurs si vous avez installé
    <xref linkend="docbook-utils"/>
    et <xref linkend="jadetex"/>. Exécutez les commandes suivantes pour créer
    la documentation (modifiez comme il faut selon vos désirs)&nbsp;:</para>

<screen><userinput>make -C help  html &amp;&amp;
make -C guide html &amp;&amp;
make -C guide pdf</userinput></screen>

    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role='root'><userinput>make install</userinput></screen>

    <para>Si vous avez construit le manuel d'aide ou le guide des utilisateurs,
    installez-les en utilisant les commandes suivantes en tant qu'utilisateur 
    <systemitem class="username">root</systemitem>
    (modifiez comme nécessaire)&nbsp;:</para>

<screen role='root'><userinput>install -v -m755 -d /usr/share/doc/gnucash-&gnucash-docs-version;/{users_guide,help} &amp;&amp;
cp -v -R            help/C/gnucash-help/* \
                    /usr/share/doc/gnucash-&gnucash-docs-version;/help &amp;&amp;
cp -v -R            guide/C/gnucash-guide/* \
                    /usr/share/doc/gnucash-&gnucash-docs-version;/users_guide &amp;&amp;
install -v -m644    guide/C/gnucash-guide.pdf \
                    /usr/share/doc/gnucash-&gnucash-docs-version;</userinput></screen>

    <para>Remarquez que vous devez avoir installé <xref linkend="yelp"/> pour
    lire les documents d'aide en utilisant la méthode par défaut de
    <application>GnuCash</application>.</para>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para><command>sed -i 's|xml::${sysconfdir}|xml::${GNOME_SYSCONFDIR}|'
     configure</command>&nbsp;: Cette commande est utilisée car l'emplacement de
    la base de données des sources <application>GConf</application> est
    codé en dur dans le script <command>configure</command> en tant que
    <filename class='directory'><envar>$sysconfdir</envar>/gconf</filename>
    (ce qui rend le paramètre <option>--with-gconf-source</option> inutile).
    La modification garantit que la base de données <application>GConf</application> 
    est mise à jour correctement, tout en permettant aux fichiers de configuration 
    du paquet de s'installer dans
    <filename class='directory'>/etc/gnucash</filename>.</para>

    <para><parameter>--sysconfdir=/etc</parameter>&nbsp;: Ceci installse les
    fichiers de configuration dans <filename class='directory'>/etc/gnucash</filename> 
    plutôt que dans <filename class='directory'>/usr/etc/gnucash</filename>.</para>

    <para><parameter>--with-gconf-schema-file-dir=$GNOME_SYSCONFDIR/gconf/schemas</parameter>&nbsp;:
    Ce paramètre assure que les fichiers de schéma <application>GConf</application> 
    s'installent au bon endroit et pas dans 
    <filename class='directory'>/etc/gconf</filename>.</para>

    <para><command>mv -v /usr/share/gnucash/doc
    /usr/share/doc/gnucash-&gnucash-version;</command> et
    <command>ln -v -s ../doc/gnucash-&gnucash-version;
    /usr/share/gnucash/doc</command>&nbsp;: Ces commandes sont utilisées pour
    replacer les fichiers de documentation à l'endroit habituel et créer un 
    lien symbolique vers l'emplacement d'origine.</para>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../xincludes/scrollkeeper-dir.xml"/>

    <para><option>--enable-sql</option>&nbsp;: Ce paramètre est nécessaire si
    vous voulez construire en dur le support SQL en utilisant <application>PostgreSQL</application>.</para>

    <para><option>--enable-hbci</option>&nbsp;: Ce paramètre est nécessaire si
    vous voulez construire en dur le support de banque en ligne en utilisant 
    <application>AqBanking</application>. Voir
    <filename>doc/README.HBCI</filename> dans l'arborescence des sources de
    <application>GnuCash</application> pour des
    informations complètes.</para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de GnuCash</title>

    <sect3>
      <title>Informations de configuration</title>

      <para>Si vous souhaitez utiliser <application>GnuCash</application> pour
      récupérer les cours des titres, vous devrez installer les modules
      <application>Perl</application> suivants&nbsp;:
      <xref linkend="perl-lwp"/>,
      <xref linkend="perl-date-manip"/>,
      <xref linkend="perl-html-parser"/>,
      <xref linkend="perl-html-tableextract"/>,
      <xref linkend="perl-crypt-ssleay"/> et
      <xref linkend="perl-finance-quote"/>. Vous pouvez aussi lancer le script
      <command>/usr/bin/gnc-fq-update</command> en tant qu'utilisateur
      <systemitem class="username">root</systemitem>.</para>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>gnc-fq-check, gnc-fq-dump, gnc-fq-helper, gnc-fq-update,
        gnc-test-env, gnucash, gnucash-bin, gnucash-env, gnucash-make-guids,
        gnucash-valgrind, et update-gnucash-gconf</seg>
        <seg>libgnc-backend-file-utils.so, libgnc-backend-postgres.so,
        libgnc-business-ledger.so,libgnc-core-utils.so, libgnc-gnome.so,
        libgnc-module.so, libgnc-qof.so et numerous support libraries
        installed in
        <filename class='directory'>/usr/lib/gnucash</filename></seg>
        <seg>/etc/gnucash,
        /usr/include/gnucash,
        /usr/lib/gnucash,
        et the following subdirectories of /usr/share/:
        doc/gnucash-&gnucash-version;,
        gnome/help/gnucash,
        gnucash,
        omf/gnucash-docs, et
        /xml/gnucash</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="gnucash-prog">
        <term><command>gnucash</command></term>
        <listitem>
          <para>est un gestionnaire de comptabilité personnelle.</para>
          <indexterm zone="gnucash gnucash-prog">
            <primary sortas="b-gnucash">gnucash</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
