<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY libreoffice-core-download-http
  "http://download.documentfoundation.org/libreoffice/src/3.5.2/libreoffice-core-&libreoffice-version;.tar.xz">
  <!ENTITY libreoffice-core-download-ftp  " ">
  <!ENTITY libreoffice-core-md5sum        "a21156d5657b8619a523ffdc5cc0003e">
  <!ENTITY libreoffice-core-size          "99 Mio">

  <!ENTITY libreoffice-dictionaries-download-http
  "http://download.documentfoundation.org/libreoffice/src/3.5.2/libreoffice-dictionaries-&libreoffice-version;.tar.xz">
  <!ENTITY libreoffice-dictionaries-download-ftp  " ">
  <!ENTITY libreoffice-dictionaries-md5sum        "782d0cecfccc200f8ad0a07f0cb53f08">
  <!ENTITY libreoffice-dictionaries-size          "31 Mio">
  <!ENTITY libreoffice-help-download-http
  "http://download.documentfoundation.org/libreoffice/src/3.5.2/libreoffice-help-&libreoffice-version;.tar.xz">
  <!ENTITY libreoffice-help-download-ftp  " ">
  <!ENTITY libreoffice-help-md5sum        "3c064a24191274fcd8fd466ce9d5dc42">
  <!ENTITY libreoffice-help-size          "2 Mio">

  <!ENTITY libreoffice-translations-download-http
  "http://download.documentfoundation.org/libreoffice/src/3.5.2/libreoffice-translations-&libreoffice-version;.tar.xz">
  <!ENTITY libreoffice-translations-download-ftp  " ">
  <!ENTITY libreoffice-translations-md5sum        "17ebcd0d25e716d3905b1a905907fd67">
  <!ENTITY libreoffice-translations-size          "11.7 Mio">

  <!ENTITY libreoffice-buildsize     "6 GB (379 MB installed)">
  <!ENTITY libreoffice-time          "61 SBU">
]>

<sect1 id="libreoffice" xreflabel="Libre-Office-&libreoffice-version;">
  <?dbhtml filename="libreoffice.html"?>

  <sect1info>
    <othername>$LastChangedBy&nbsp;: andy $</othername>
    <date>$Date&nbsp;: 2012-04-12 22:09:25 +0200 (Thu, 12 Apr 2012) $</date>
  </sect1info>

  <title>Libre Office &libreoffice-version;</title>

  <indexterm zone="libreoffice">
    <primary sortas="a-libreoffice">libreoffice</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à Libre Office</title>

    <para>
      <application>Libre Office</application> est un ensemble de programmes pour
      créer et éditer des documents de bureautique. Il est largement compatible
      avec  <application>Microsoft Office</application> et
      <application>Open Office</application> on which it is based.
    </para>

    &lfs71_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement du c&oelig;ur (HTTP)&nbsp;: <ulink url="&libreoffice-core-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement du c&oelig;ur (FTP)&nbsp;: <ulink url="&libreoffice-core-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5 du téléchargement du c&oelig;ur&nbsp;: &libreoffice-core-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement du c&oelig;ur&nbsp;: &libreoffice-core-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement des dictionnaires (HTTP)&nbsp;:
          <ulink url="&libreoffice-dictionaries-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement des dictionnaires (FTP)&nbsp;:
          <ulink url="&libreoffice-dictionaries-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5 du téléchargement des dictionnaires&nbsp;: &libreoffice-dictionaries-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement des dictionnaires&nbsp;: &libreoffice-dictionaries-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement de l'aide (HTTP)&nbsp;: <ulink url="&libreoffice-help-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement de l'aide (FTP)&nbsp;: <ulink url="&libreoffice-help-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5 du téléchargement de l'aide&nbsp;: &libreoffice-help-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement de l'aide&nbsp;: &libreoffice-help-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement des traductions (HTTP)&nbsp;:
          <ulink url="&libreoffice-translations-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement des traductions (FTP)&nbsp;:
          <ulink url="&libreoffice-translations-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5 du téléchargement des traductions&nbsp;: &libreoffice-translations-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement des traductions&nbsp;: &libreoffice-translations-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &libreoffice-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &libreoffice-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de Libre Office</bridgehead>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
      <xref linkend="cups"/>,
      <xref linkend="curl"/> or <xref linkend="wget"/>,
      <xref linkend="gperf"/>,
      <xref linkend="gtk2"/> ou <xref linkend="gtk3"/>,
      <application>Perl Modules</application>
      <xref linkend="perl-archive-zip"/> et
      <xref linkend="perl-xml-parser"/>,
      <xref linkend="unzip"/>,
      <xref linkend="which"/> et
      <xref linkend="zip"/>.
    </para>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <note>
      <para>
        La plupart de ces paquets sont recommandés car s'ils ne sont pas installés, le
        processus de construction compilera et installera sa propre version
        (souvent ancienne). Si vous utilisez <application>GCC 4.7</application>
	quelques uns des ses anciens paquets feront échouer la compilation.
      </para>
    </note>

    <para role="recommended">
      <xref linkend="boost"/>,
      <xref linkend="db"/>,
      <xref linkend="expat"/>,
      <xref linkend="gst-plugins-base"/>
      <xref linkend="libjpeg"/>,
      <xref linkend="libgsf"/>,
      <xref linkend="libpng"/>,
      <xref linkend="librsvg"/>,
      <xref linkend="libxml2"/> et <xref linkend="libxslt"/>,
      <xref linkend="neon"/>,
      <xref linkend="nss"/>,
      <xref linkend="openssl"/>,
      <xref linkend="poppler"/>,
      <xref linkend="postgresql"/> et
      <xref linkend="redland"/>.
    </para>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      <ulink url="http://hunspell.sourceforge.net/">Hunspell</ulink>,
      <ulink url="http://sourceforge.net/projects/hunspell/files/MyThes/">MyThes</ulink>,
      <ulink url="http://sampleicc.sourceforge.net/">SampleICC</ulink>,
      <ulink url="http://hci.iwr.uni-heidelberg.de/vigra">Vigra</ulink> et
      <xref linkend="zenity"/>.
    </para>

    <para condition="html" role="usernotes">
      Notes utilisateur&nbsp;: <ulink url="&blfs-wiki;/libreoffice"/>
    </para>
  </sect2>

  <sect2 role="installation">
    <title>Installation de Libre Office</title>

    <warning>
      <para>
        Déballer l'archive tar de libreoffice-core-3.5.2.2 en tant qu'utilisateur
        <systemitem class="username">root</systemitem> a pour effet étrange de
        modifier l'appartenance du répertoire <emphasis>parent</emphasis> pour
        un utilisateur au numéro 11012 et ayant, lui seul, des droits lui 
	permettant de lire, écrire et exécuter&nbsp;:/ Si vous avez déballé
        en tant qu'utilisateur <systemitem class="username">root</systemitem>
        dans votre dossier home, vous pourriez être incapable de vous reconnecter
        Si vous l'avez déballée dans 
        <filename class="directory">/usr</filename>, votre compte utilisatekr
        serait incapable d'accéder à un fichier de
        <filename class="directory">/usr</filename>.
      </para>

      <para>
        Vous pouvez éviter cette mésaventure en 
        <emphasis>ne la déballant pas</emphasis> en tant qu'utilisateur
        <systemitem class="username">root</systemitem>. Si vous devez la déballer
        en tant que <systemitem class="username">root</systemitem>, passez 
        l'option <option>--no-overwrite-dir</option> à tar. C'est prévu par défaut
        quand vous déballez en tant qu'utilisateur, mais vous devez le passer en
        option lors d'un déballage en tant que
        <systemitem class="username">root</systemitem>&nbsp;:
      </para>
    </warning>

<screen role="root"><userinput>tar xf --no-overwrite-dir libreoffice-core-&libreoffice-version;.tar.xz &amp;&amp;
cd libreoffice-core-&libreoffice-version;</userinput></screen>

    <para>
      Installez <application>Libre Office</application> en lançant les commandes
      commands:
    </para>

<screen><userinput>tar -xf ../libreoffice-translations-&libreoffice-version;.tar.xz --strip-components=1 &amp;&amp;
tar -xf ../libreoffice-help-&libreoffice-version;.tar.xz         --strip-components=1 &amp;&amp;
tar -xf ../libreoffice-dictionaries-&libreoffice-version;.tar.xz --strip-components=1 &amp;&amp;
sed -i '/$Prepend/s:^[^#]:# &amp;:' \
  i18npool/source/breakiterator/data/char{,_in}.txt &amp;&amp;
./autogen.sh --prefix=/usr \
  --disable-binfilter      \
  --disable-gconf          \
  --disable-mozilla        \
  --disable-odk            \
  --with-system-boost      \
  --with-system-cairo      \
  --with-system-curl       \
  --with-system-db         \
  --with-system-expat      \
  --with-system-hunspell   \
  --with-system-icu        \
  --with-system-jpeg       \
  --with-system-libpng     \
  --with-system-libxml     \
  --with-system-neon       \
  --with-system-nss        \
  --with-system-openssl    \
  --with-system-poppler    \
  --with-system-postgresql \
  --with-system-redland    \
  --with-system-zlib       \
  --with-num-cpus=$(getconf _NPROCESSORS_ONLN) \
  --with-vendor="BLFS"     \
  --with-lang="pt-BR"      \
  --without-java           &amp;&amp;
./download                 &amp;&amp;
mkdir -p ../libre-office-downloads &amp;&amp;
cp -rf src/* ../libre-office-downloads &amp;&amp;
make</userinput></screen>

    <para>
      Ce paquet n'est pas fourni avec une suite de tests.
    </para>

    <para>
      Maintenant, en tant qu'utilisateur the <systemitem class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>make install &amp;&amp;
for program in base calc draw impress math writer
do
  echo "#!/bin/bash
  exec /usr/lib/libreoffice/program/soffice --nologo --${program} \"\${@}\"" \
    > /usr/bin/${program}
  chmod 755 /usr/bin/${program}
done &amp;&amp;
ln -s ../lib/libreoffice/program/spadmin /usr/bin/printeradmin &amp;&amp;
for res in 16 32 48 128 256
do
  mkdir -p /usr/share/icons/hicolor/${res}x${res}/{apps,mimetypes}
  cp sysui/desktop/icons/hicolor/${res}x${res}/apps/*.png \
    /usr/share/icons/hicolor/${res}x${res}/apps
  cp sysui/desktop/icons/hicolor/${res}x${res}/mimetypes/*.png \
    /usr/share/icons/hicolor/${res}x${res}/mimetypes
done &amp;&amp;
gtk-update-icon-cache /usr/share/icons/hicolor</userinput></screen>
  </sect2>

  <sect2 role="commands">
    <title>Explications des commandes</title>

    <para>
      <command>tar -xf ../libreoffice-translations-&libreoffice-version;.tar.xz
      --strip-components=1</command>&nbsp;: Ceci déballe les traductions dans
      les sources. L'option <option>--strip-components=1</option> supprime le
      répertoire associé au chemin des fichiers déballés. Sans cette option, il
      faudrait déplacer ou faire des liens symboliques vers le dossier
      <filename class="directory">translations</filename> dans la bonne
      position.
    </para>

    <para>
      <command>tar -xf ../libreoffice-help-&libreoffice-version;.tar.xz
      --strip-components=1</command>&nbsp;: Ceci déballe les fichiers d'aide
      des sources. L'option <option>--strip-components=1</option> supprime le
      répertoire associé au chemin des fichiers déballés. Sans cette option, il
      faudrait déplacer ou faire des liens symboliques vers le dossier
      <filename class="directory">helpcontent2</filename> dans la bonne
      position.
    </para>

    <para>
      <command>tar -xf ../libreoffice-dictionaries-&libreoffice-version;.tar.xz
      --strip-components=1</command>&nbsp;: Ceci déballe les fichiers de dictionnaires
      des sources. L'option <option>--strip-components=1</option> supprime le
      répertoire associé au chemin des fichiers déballés. Sans cette option, il
      faudrait déplacer ou faire des liens symboliques vers le dossier
      <filename class="directory">dictionaries</filename> dans la bonne
      position.
    </para>

    <para>
      <command>sed -i '/$Prepend/s:^[^#]:# &amp;:'
      i18npool/source/breakiterator/data/char{,_in}.txt</command>&nbsp;: Ce sed
      corrige la compilation avec <application>ICU 49</application> installé
      sur votre système.
    </para>

    <para>
      <option>--enable-gtk3</option>&nbsp;: ajoutez cette option si vous l'avez
      installé et si vous voulez utiliser <application>Gtk+-3</application>.
    </para>

    <para>
      <option>--disable-gstreamer</option>&nbsp;: ajoutez cette options si vous n'avez
      pas installé <xref linkend="gst-plugins-base"/>.
    </para>

    <para>
      <option>--disable-binfilter</option>&nbsp;: Ces "binfilters" permettent à
     <application>Libre Office</application> d'ouvrir des documents au format
      <application>Star Office</application> de base. La compilation de
      <application>binfilter</application> exige 
      <application>Java</application>.
    </para>

    <para>
      <option>--disable-gconf</option>&nbsp;: La compilation avec le support de
      <application>GConf</application> exige la
      <application>ORBit</application> obsolète.
    </para>

    <para>
      <option>--disable-mozilla</option>&nbsp;: Cette option arrête la tentative
      de <application>Libre Office</application> de compiler une ancienne version
      de <application>SeaMonkey</application>.
    </para>

    <para>
      <option>--disable-odk</option>&nbsp;: Ceci désactive l'installation du kit
      de développement de bureautique. Supprimez cette option si vous voulez 
      développer une application basée sur <application>Libre Office</application>.
    </para>

    <para>
      <option>--with-system- ...</option>&nbsp;: Ces options arrêtent la tentative
      de compiler ses propres versions des dépendances. Si vous n'avez pas
      installé certaines dépendances, supprimez l'option correspondante.
    </para>

    <para>
      <option>--with-num-cpus=$(getconf _NPROCESSORS_ONLN)</option>&nbsp;: Cette
      option lui dit d'utiliser tous vos processeurs pour compiler en parallèle
      et accélérer la construction.
    </para>

    <para>
      <option>--with-lang="pt-BR"</option>&nbsp;: Cette option définit les langues
      à supporter. en-US est toujours inclu par défaut. Pour une liste des 
      options&nbsp;: <command>ls translations/source</command>.
    </para>

    <para>
      <option>--without-java</option>&nbsp;: Cette option compile
      <application>Libre Office</application> sans le support
      <application>Java</application>.
    </para>

    <para>
      <command>./download</command>&nbsp;: Le script <command>download</command>
      télécharge les sources un ensemble d'éléments qui pourraient être nécessaires 
      pendant le processus de construction.
    </para>

    <para>
      <command>mkdir -p ../libre-office-downloads;
      cp -rf src/* ../libre-office-downloads</command>&nbsp;: Le script
      <command>download</command> télécharge environ 320Mio d'archives tar
      de code source, dont la plupart ne sont pas nécessaires car elles sont probablement déjà 
      installées sur votre système. Cette commande fait une copie de sauvegarde
      des fichiers téléchargés pour que vous ne deviez pas les retélécharger si
      vous décidez de recompiler <application>Libre Office</application>. Dans ce
      cas, commencez simplement avec <command>mkdir src; cp ../libre-office-downloads/* src</command>
    </para>

    <para>
      <command>for program in base calc draw impress math writer ...</command>&nbsp;:
      Ces commandes créent 6 scripts shell simples dans
      <filename class="directory">/usr/bin</filename> que vous pouvez utiliser 
      pour lancer 
      <application>Libre Office</application> dans ses différentes formes. Si vous
      préférez voir l'écran de démarrage de <application>Libre Office</application> , enlevez
      l'option "--nologo".
    </para>

    <para>
      <command>for res in 16 32 48 128 256 ...</command>&nbsp;: Ces commandes
      copient diverses icônes dans le thème d'icônes hicolor utilisé par
      <application>Gtk+</application>.
    </para>

    <para>
      <command>gtk-update-icon-cache /usr/share/icons/hicolor</command>&nbsp;:
      Ceci reconstruit <filename>/usr/share/icons/hicolor/icon-theme.cache</filename> 
      pour inclure les nouvelles icônes.
    </para>
  </sect2>

  <sect2 role="configuration">
    <title>Configuration de Libre Office</title>

    <para>
      Si vous utilisez un environnement de bureau comme <application>Gnome</application>
      ou <application>KDE</application> et si vous voulez que les programmes 
      apparaissent dans le menu du paneau, en tant qu'utilisateur
      <systemitem class="username">root</systemitem>, créez quelques fichiers de
      bureau simples&nbsp;:
    </para>

<screen role="root"><userinput>for program in base calc draw impress math writer
do echo "[Desktop Entry]
Encoding=UTF-8
Type=Application
Name=${program^}
Comment=Libre Office ${program^}
Icon=${program}
Exec=${program}
Categories=Office;Application;
StartupNotify=true
Terminal=false" > /usr/share/applications/${program}.desktop
done &amp;&amp;
echo "[Desktop Entry]
Encoding=UTF-8
Type=Application
Name=Printer Administration
Comment=Libre Office Printer Administration
Icon=printeradmin
Exec=printeradmin
Categories=Office;Printing;Application;
StartupNotify=true
Terminal=false" > /usr/share/applications/printeradmin.desktop</userinput></screen>
    </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoire installé</segtitle>

      <seglistitem>
        <seg>base, calc, draw, impress, math, printeradmin et writer.</seg>
        <seg>
          Des centaines de bibliothèques partagées dans
          <filename class="directory">/usr/lib/libreoffice</filename>.
        </seg>
        <seg>/usr/lib/libreoffice.</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="base">
        <term><command>base</command></term>
        <listitem>
          <para>
            est un gestionnaire de bases de données.
          </para>
          <indexterm zone="libreoffice base">
            <primary sortas="b-base">base</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="calc">
        <term><command>calc</command></term>
        <listitem>
          <para>
            est un programme de feuilles de calcul.
          </para>
          <indexterm zone="libreoffice calc">
            <primary sortas="b-calc">calc</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="draw">
        <term><command>draw</command></term>
        <listitem>
          <para>
            est un éditeur d'images vectorielles et un outil pour faire des
            diagrammes.
          </para>
          <indexterm zone="libreoffice draw">
            <primary sortas="b-draw">draw</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="impress">
        <term><command>impress</command></term>
        <listitem>
          <para>
            peut éditer et afficher des présentations powerpoint.
          </para>
          <indexterm zone="libreoffice impress">
            <primary sortas="b-impress">impress</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="math">
        <term><command>math</command></term>
        <listitem>
          <para>
            est un éditeur de formules mathématiques.
          </para>
          <indexterm zone="libreoffice math">
            <primary sortas="b-math">math</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="printeradmin">
        <term><command>printeradmin</command></term>
        <listitem>
          <para>
            est une interface graphique vous permettant de modifier vos préférences
            personnelles d'impression enregistrées dans
            <filename>~/.cups/lpoptions</filename>.
          </para>
          <indexterm zone="libreoffice printeradmin">
            <primary sortas="b-printeradmin">printeradmin</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="writer">
        <term><command>writer</command></term>
        <listitem>
          <para>
            est un traitement de texte.
          </para>
          <indexterm zone="libreoffice writer">
            <primary sortas="b-writer">writer</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect2>
</sect1>
