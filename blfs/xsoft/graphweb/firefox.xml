<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  <!ENTITY firefox-download-http
           "http://releases.mozilla.org/pub/mozilla.org/firefox/releases/&firefox-version;/source/firefox-&firefox-version;.source.tar.bz2">
  <!ENTITY firefox-download-ftp
           "ftp://ftp.mozilla.org/pub/mozilla.org/firefox/releases/&firefox-version;/source/firefox-&firefox-version;.source.tar.bz2">
  <!ENTITY firefox-md5sum        "06a4c0fe8d3a979aea2fce8d0fdbf328">
  <!ENTITY firefox-size          "115 Mo">
  <!ENTITY firefox-buildsize     "4.9 Go (48 Mo installed) (or 814 Mo and 4.6 Mo if using Xulrunner)">
  <!ENTITY firefox-time          "58 SBU (0.47 SBU if using Xulrunner)">
]>
<sect1 id="firefox" xreflabel="Firefox-&firefox-version;">
  <?dbhtml filename="firefox.html" ?>
  <sect1info>
    <othername>$LastChangedBy&nbsp;: krejzi $</othername>
    <date>$Date&nbsp;: 2013-04-06 00:01:58 +0200 (Sat, 06 Apr 2013) $</date>
  </sect1info>
  <title>Firefox-&firefox-version;</title>
  <indexterm zone="firefox">
    <primary sortas="a-Firefox">Firefox</primary>
  </indexterm>
  <sect2 role="package">
    <title>Introduction à Firefox</title>
    <para>
      <application>Firefox</application> est un navigateur autonome basé sur le code
      <application>Mozilla</application>.
    </para>
   &lfs74_checked;
    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&firefox-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&firefox-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &firefox-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &firefox-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &firefox-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &firefox-time;</para>
      </listitem>
    </itemizedlist>
    <bridgehead renderas="sect3">Téléchargement supplémentaire</bridgehead>
    <itemizedlist spacing='compact'>
      <listitem>
        <para>Correctif recommandé: <ulink
        url="&patch-root;/firefox-&firefox-version;-search_box_fix-1.patch"/></para>
      </listitem>
    </itemizedlist>
    <bridgehead renderas="sect3">Dépendances de Firefox</bridgehead>
    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
      <xref linkend="alsa-lib"/>,
      <xref linkend="gtk2"/>,
      <xref linkend="zip"/> et
      <xref linkend="unzip"/>.
    </para>
    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="libevent"/>,
      <xref linkend="libvpx"/>,
      <xref linkend="nspr"/>,
      <xref linkend="nss"/>,
      <xref linkend="sqlite"/> et
      <xref linkend="yasm"/>
    </para>
    <note>
      <para>
        Si vous n'installez pas les dépendances recommandées, alors les versions
        internes de ces paquets seront utilisés.
        Ils peuvent être testé pour fonctionner, mais ils peuvent être
        dépassé ou contenir des trous de sécurité.
      </para>
    </note>
    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      <xref linkend="curl"/>,
      <xref linkend="dbus-glib"/>,
      <xref linkend="doxygen"/>,
      <xref linkend="gst-plugins-base"/>,
      <ulink url="http://hunspell.sourceforge.net/">Hunspell</ulink>,
      <xref linkend="libnotify"/>,
      <xref linkend="startup-notification"/>,
      <xref linkend="wget"/>,
      <xref linkend="wireless_tools"/> et
      <xref linkend="xulrunner"/>
    </para>
    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/firefox"/></para>
  </sect2>
  <sect2 role="installation">
    <title>Installation de Firefox</title>
    <para>
      Il y a deux méthodes principales pour construire <application>Firefox</application>.
      Dans le cas standard, La suite complète des bibliothèques est construite et installée.
      Dans l'autre cas, beaucoup du système est construit en utilisant les procédures
      trouvées dans <xref linkend="xulrunner"/>.  C'est avantageux si vous prévoyez
      de construire d'autres paquets comme <xref linkend="icedtea-web"/>.  Avec chaque méthode
      de construction, vous devez lancer la procédure principale de construction
      en dessous avec les options appropriées dans le fichier <filename>mozconfig</filename>.
      Ensuite utilisez les instructions d'installation appropriées dépendantes de la méthode de construction
      choisie.
    </para>
    <para>La configuration de <application>Firefox</application> se
    fait en créant un fichier <filename>mozconfig</filename> contenant les options de configuration désirées. Un
    <filename>mozconfig</filename> par défaut est créé ci-dessous. Pour voir toute
    la liste des options de configuration disponibles, 
    (et une description abrégée de chacune), faites
    <command>./configure --help</command>. Il se peut que vous vouliez aussi 
    relire tout le fichier et décommentez les autres options souhaitées.
   Créez le fichier en tapant la commande suivante : </para>
<screen>
<userinput>cat &gt; mozconfig &lt;&lt; "EOF"
# If you have a multicore machine, firefox will now use all the cores by
# default. Exceptionally, you can reduce the number of cores, e.g. to 1,
# by uncommenting the next line and setting a valid number of CPU cores.
#mk_add_options MOZ_MAKE_FLAGS="-j1"
# If you have installed DBus-Glib comment out this line:
ac_add_options --disable-dbus
# If you have installed wireless-tools comment out this line:
ac_add_options --disable-necko-wifi
# If you have installed libnotify comment out this line:
ac_add_options --disable-libnotify
# Uncomment these lines if you have installed optional dependencies:
# GStreamer is necessary for H.264 video playback in HTML5 Video Player
#ac_add_options --enable-gstreamer
#ac_add_options --enable-system-hunspell
#ac_add_options --enable-startup-notification
# Uncomment this line if you compiled Cairo with --enable-tee switch and want
# to use it instead of the bundled one:
#ac_add_options --enable-system-cairo
# If you have not installed Yasm then uncomment this line:
#ac_add_options --disable-webm
# If you have installed xulrunner uncomment the next two ac_add_options lines
# and check that the sdk will be set by running pkg-config in a subshell
# and has not become hardcoded or empty when you created this file
#ac_add_options --with-system-libxul
#ac_add_options --with-libxul-sdk=$(pkg-config --variable=sdkdir libxul)
# Comment out following options if you have not installed
# recommended dependencies:
ac_add_options --enable-system-sqlite
ac_add_options --with-system-libevent
ac_add_options --with-system-libvpx
ac_add_options --with-system-nspr
ac_add_options --with-system-nss
# It is recommended not to touch anything below this line
ac_add_options --prefix=/usr
ac_add_options --enable-application=browser
ac_add_options --disable-crashreporter
ac_add_options --disable-installer
ac_add_options --disable-updater
ac_add_options --disable-debug
ac_add_options --disable-tests
ac_add_options --enable-optimize
ac_add_options --enable-strip
ac_add_options --enable-install-strip
ac_add_options --enable-gio
ac_add_options --enable-official-branding
ac_add_options --enable-safe-browsing
ac_add_options --enable-url-classifier
ac_add_options --enable-system-ffi
ac_add_options --enable-system-pixman
ac_add_options --with-pthreads
ac_add_options --with-system-bz2
ac_add_options --with-system-jpeg
ac_add_options --with-system-png
ac_add_options --with-system-zlib
mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/firefox-build-dir
EOF</userinput>
</screen>
     <para>
      Si vous avez construit contre une version déjà installée de <application>xulrunner</application>
      appliquez le correctif:
    </para>
<screen>
<userinput>patch -Np1 -i ../firefox-&firefox-version;-search_box_fix-1.patch</userinput>
</screen>
    <para>
  Compilez <application>Firefox</application> en lançant les commandes
    suivantes&nbsp;:</para>
<screen>
<userinput>sed -i 's@ ""@@' browser/base/Makefile.in &amp;&amp;
make -f client.mk</userinput>
</screen>
    <para>Ce paquet n'est pas fourni avec une suite de tests.</para>
    <para>
      Si vous n'avez <emphasis>PAS</emphasis> lié
      <application>Firefox</application> contre un
      <application>Xulrunner</application> installé:</para>
<screen>
<userinput>make -C firefox-build-dir/browser/installer</userinput>
</screen>
    <para>
      Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>, si vous n'avez
      <emphasis>PAS</emphasis> lié <application>Firefox</application>
      contre un <application>Xulrunner</application> installé, installez le paquet:
    </para>
<screen role="root">
<userinput>rm -rf /usr/lib/firefox-&firefox-version; &amp;&amp;
mkdir  /usr/lib/firefox-&firefox-version; &amp;&amp;
tar -xvf firefox-build-dir/dist/firefox-&firefox-version;.en-US.linux-$(uname -m).tar.bz2     -C /usr/lib/firefox-&firefox-version; --strip-components=1 &amp;&amp;
chown -R -v root:root /usr/lib/firefox-&firefox-version; &amp;&amp;
ln -sfv ../lib/firefox-&firefox-version;/firefox /usr/bin &amp;&amp;
mkdir -pv /usr/lib/mozilla/plugins &amp;&amp;
ln -sfv ../mozilla/plugins /usr/lib/firefox-&firefox-version;</userinput>
</screen>
    <para>
      Si vous <emphasis>AVEZ</emphasis> lié contre un 
      <application>Xulrunner</application> déjà installé, en tant qu'utilisateur
      <systemitem class="username">root</systemitem>&nbsp;:
    </para>
<screen role="root">
<userinput>make -C firefox-build-dir install &amp;&amp;
ln -sfv ../lib/firefox-&firefox-version;/firefox /usr/bin &amp;&amp;
ln -sfv ../xulrunner-&firefox-version; /usr/lib/firefox-&firefox-version;/xulrunner &amp;&amp;
mkdir -pv /usr/lib/mozilla/plugins &amp;&amp;
ln -sfv ../mozilla/plugins /usr/lib/firefox-&firefox-version;</userinput>
</screen>
     <bridgehead renderas="sect3" id="npapi-firefox" xreflabel="Firefox">
      Entête de NPAPI
    </bridgehead>
    <para>
      Les instructions ci dessus installent juste la partie dont vous avez besoin
      pour exécuter
      <application>Firefox</application>. Si vous voulez compiler
      <xref linkend="gnash"/>, la version open-source de Flash, copiez quelques entêtes
      nécessaire à Gnash dans /usr/include, en
      tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>
<screen role="root">
<userinput>rm -rf /usr/include/npapi &amp;&amp;
mkdir -v /usr/include/npapi &amp;&amp;
cp -v dom/plugins/base/*.h /usr/include/npapi</userinput>
</screen>
    <note>
      <para>
        Vous n'avez pas besoin d'installer les entêtes si vous avez construit
        <application>Firefox</application> contre
        <application>Xulrunner</application>.
      </para>
    </note>
  </sect2>
  <sect2 role="commands">
    <title>Explication des commandes</title>
    <para><command>sed -i 's@ ""@@' browser/base/Makefile.in</command>&nbsp;: Ce
    sed supprime un caractère de contrôle non imprimable de la barre de titre.</para>
    <para>
    <command>make -f client.mk ...</command>&nbsp;: Les produits Mozilla
    sont enpaquetés pour permettre l'utilisation d'un fichier de configuration qui peut
    être utilisé pour passer les paramètres de configuration à la
    commande <command>configure</command>. <command>make</command> utilise le
    fichier <filename>client.mk</filename> pour avoir la configuration initiale
    et régler les paramètres et la configuration de départ.</para>
    <para><command>make -C firefox-build-dir/browser/installer</command>&nbsp;: ceci
    crée une archive tar de <application>Firefox</application> identique à
    celle que vous pouvez télécharger chez Mozilla.</para>
    <para><command>tar -xfv firefox-build-dir/dist ...</command>&nbsp;: Ceci
    déballe <application>Firefox</application> dans /usr/lib. L'option
    <option>--strip-components=1</option> supprime le répertoire
    &apos;firefox&apos; des noms de fichier, ce qui nous permet de le déballer
    dans un répertoire versionné.</para>
    <para>
      <command>make -C firefox-build-dir install</command>&nbsp;: Cela lance
      <command>make install</command> dans firefox-build-dir.
    </para>
    <para><command>ln -sfv ... /usr/bin/firefox</command>&nbsp;: ceci met un
    lien symbolique vers l'exécutable <command>firefox</command> dans votre
    <envar>PATH</envar>.</para>
    <para><command>mkdir -p /usr/lib/mozilla/plugins</command>&nbsp;: ceci
    vérifie que <filename class="directory">/usr/lib/mozilla/plugins</filename>
    existe.</para>
    <para><command>ln -sv ... /usr/lib/firefox-&firefox-version;</command>&nbsp;:
    cette commande crée un lien symbolique vers <filename class="directory">/usr/lib/mozilla/plugins</filename>.
    Il n'est pas vraiment nécessaire, comme <application>Firefox</application> vérifie
    <filename class="directory">/usr/lib/mozilla/plugins</filename> par défaut,
      mais le lien symbolique est fait pour garder tous les greffons installés
      dans un seul dossier.</para>
    </sect2>
  <sect2 role="configuration">
    <title>Configuration de Firefox</title>
    <para>Si vous avez enlevé l'option <option>--disable-webm</option> de votre
    <filename>mozconfig</filename>, votre <application>Firefox</application>
    lira la plupart des vidéos YouTube sans le plugin flash. Pour activer ceci,
    allez sur <ulink
   url="http://www.youtube.com/html5"/>
    et cliquez sur &apos;Rejoindre le test HTML5&apos; (exige l'activation des
    cookies).</para>
    <para>Si vous utilisez un environnement de bureau comme
    <application>Gnome</application>
    ou <application>KDE</application> vous pourriez souhaiter créer un fichier
    <filename>firefox.desktop</filename> pour que <application>Firefox</application> apparaisse dans les
    menus du bureau. Si vous n'avez pas activé startup-notification (notification 
    de démarrage) dans votre mozconfig, modifiez la ligne StartupNotify en
    false. En tant qu'utilisateur
    <systemitem class="username">root</systemitem>&nbsp;:</para>
<screen role="root">
<userinput>mkdir -pv /usr/share/applications &amp;&amp;
mkdir -pv /usr/share/pixmaps &amp;&amp;
cat &gt; /usr/share/applications/firefox.desktop &lt;&lt; "EOF" &amp;&amp;
<literal>[Desktop Entry]
Encoding=UTF-8
Name=Firefox Web Browser
Comment=Browse the World Wide Web
GenericName=Web Browser
Exec=firefox %u
Terminal=false
Type=Application
Icon=firefox
Categories=GNOME;GTK;Network;WebBrowser;
MimeType=text/html;text/xml;application/xhtml+xml;application/vnd.mozilla.xul+xml;text/mml;x-scheme-handler/http;x-scheme-handler/https;
StartupNotify=true</literal>
EOF
ln -sfv /usr/lib/firefox-&firefox-version;/browser/icons/mozicon128.png         /usr/share/pixmaps/firefox.png</userinput>
</screen>
  </sect2>
  <sect2 role="content">
    <title>Contenu</title>
    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>
      <seglistitem>
         <seg>
            firefox
        </seg>
      <seg>De nombreuses bibliothèques, composants du navigateur, des plugins, des
        extensions et des modules d'aide installés dans
        <filename class='directory'>/usr/lib/firefox-&firefox-version;</filename>.</seg>
        <seg>
          /usr/include/npapi et
          /usr/lib/firefox-&firefox-version;.
        </seg>
      </seglistitem>
    </segmentedlist>
    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      <varlistentry id="firefox-prog">
        <term><command>firefox</command></term>
        <listitem>
          <para>est un navigateur internet <application>Gtk+ 2</application> qui utilise le moteur
          d'affichage Mozilla Gecko.</para>
          <indexterm zone="firefox firefox-prog">
            <primary sortas="b-firefox">firefox</primary>
          </indexterm>
        </listitem>
      </varlistentry>
   </variablelist>
  </sect2>
</sect1>
