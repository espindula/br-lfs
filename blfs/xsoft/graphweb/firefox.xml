<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  <!ENTITY firefox-download-http
           "&mozilla-http;/firefox/releases/&firefox-version;/source/firefox-&firefox-version;.source.tar.bz2">
  <!ENTITY firefox-download-ftp
           "&mozilla-ftp;/firefox/releases/&firefox-version;/source/firefox-&firefox-version;.source.tar.bz2">
  <!ENTITY firefox-md5sum        "74190b0302782a5d25532def423355a7">
  <!ENTITY firefox-size          "172 Mo">
  <!ENTITY firefox-buildsize     "3.3 Go (74 Mo installé, also requires up to 1.7GB of virtual memory for linking during the build)">
  <!ENTITY firefox-time          "25 SBU">
]>
<sect1 id="firefox" xreflabel="Firefox-&firefox-version;">
  <?dbhtml filename="firefox.html" ?>
  <sect1info>
    <othername>$LastChangedBy&nbsp;: krejzi $</othername>
    <date>$Date&nbsp;: 2013-04-06 00:01:58 +0200 (Sat, 06 Apr 2013) $</date>
  </sect1info>
  <title>Firefox-&firefox-version;</title>
  <indexterm zone="firefox">
    <primary sortas="a-Firefox">Firefox</primary>
  </indexterm>
  <sect2 role="package">
    <title>Introduction à Firefox</title>
    <para>
      <application>Firefox</application> est un navigateur autonome basé sur le code
      <application>Mozilla</application>.
    </para>
   &lfs77_checked;
    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&firefox-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&firefox-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &firefox-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &firefox-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &firefox-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &firefox-time;</para>
      </listitem>
    </itemizedlist>
    <bridgehead renderas="sect3">Dépendances de Firefox</bridgehead>
    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
      <xref linkend="alsa-lib"/>,
      <xref linkend="gtk2"/>,
      <xref linkend="zip"/>,
      <xref linkend="unzip"/> et
      <xref linkend="yasm"/>
    </para>
    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="icu"/>,
      <xref linkend="libevent"/>,
      <xref linkend="libvpx"/>,
      <xref linkend="nspr"/>,
      <xref linkend="nss"/> et
      <xref linkend="sqlite"/>
    </para>
    <note>
      <para>
        Si vous n'installez pas les dépendances recommandées, alors les versions
        internes de ces paquets seront utilisés.
        Ils peuvent être testé pour fonctionner, mais ils peuvent être
        dépassé ou contenir des trous de sécurité.
      </para>
    </note>
    <note>
      <para>
        Avec <application>firefox-31.0</application>et les versions supérieures, vous devez installer
        <application>openssl</application> avant
        <application>Python 2</application>, ou le système de construction échouera rapidement
        avec la sortie
        "ImportError: cannot import name
        HTTPSHandler". si vous avec un doute à propos de cela (e.g. mise à jour
        depuis une version ancienne de xulrunner), vérifiez si
        <filename>/usr/lib/python&python2-majorver;/lib-dynload/_ssl.so</filename> existe.
         S'il n'existe pas, réinstallez <xref linkend="python2"/> après
       avoir installé <xref linkend="openssl"/>. La dernière version de n'importe qu'elle version
        <emphasis>actuellement maintenue</emphasis> d'openssl doit être satisfaisant
        si elle est déjà installée.
      </para>
    </note>
    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      <xref linkend="curl"/>,
      <xref linkend="dbus-glib"/>,
      <xref linkend="doxygen"/>,
      <xref linkend="gst-plugins-base"/> (avec
      <xref linkend="gst-plugins-good"/> et
      <xref linkend="gst-ffmpeg"/> à l'éxécution), ou,
      <xref linkend="gst10-plugins-base"/> (avec
      <xref linkend="gst10-plugins-good"/> et
      <xref linkend="gst10-libav"/> à l'éxécution),
      <xref linkend="libnotify"/>,
      <ulink url="https://code.google.com/p/libproxy/">libproxy</ulink>,
      <xref linkend="openjdk"/>,
      <xref linkend="pulseaudio"/>,
      <xref linkend="startup-notification"/>,
      <xref linkend="valgrind"/>,
      <xref linkend="wget"/> 
      <xref linkend="wireless_tools"/> 
      <ulink url="http://hunspell.sourceforge.net/">Hunspell</ulink> et
      <ulink url="http://sourceforge.net/projects/liboauth/files/">liboauth</ulink>
    </para>
    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/firefox"/></para>
  </sect2>
  <sect2 role="installation">
    <title>Installation de Firefox</title>
    <para>La configuration de <application>Firefox</application> se
    fait en créant un fichier <filename>mozconfig</filename> contenant les options de configuration
     désirées. Un
    <filename>mozconfig</filename> par défaut est créé ci-dessous. Pour voir toute
    la liste des options de configuration disponibles, 
    (et une description abrégée de chacune), faites
    <command>./configure --help</command>. Il se peut que vous vouliez aussi 
    relire tout le fichier et décommentez les autres options souhaitées.
   Créez le fichier en tapant la commande suivante : </para>
<screen>
<userinput>cat &gt; mozconfig &lt;&lt; "EOF"
<literal># If you have a multicore machine, all cores will be used by default.
# If desired, you can reduce the number of cores used, e.g. to 1, by
# uncommenting the next line and setting a valid number of CPU cores.
#mk_add_options MOZ_MAKE_FLAGS="-j1"
# If you have installed DBus-Glib comment out this line:
ac_add_options --disable-dbus
# If you have installed dbus-glib, and you have installed (or will install)
# wireless-tools, and you wish to use geolocation web services, comment out
# this line
ac_add_options --disable-necko-wifi
# If you have installed libnotify comment out this line:
ac_add_options --disable-libnotify
# GStreamer is necessary for H.264 video playback in HTML5 Video Player;
# to be enabled, also remember to set "media.gstreamer.enabled" to "true"
# in about:config. If you have GStreamer 0.x.y, comment out this line:
ac_add_options --disable-gstreamer
# or uncomment this line, if you have GStreamer 1.x.y
#ac_add_options --enable-gstreamer=1.0
# Uncomment these lines if you have installed optional dependencies:
#ac_add_options --enable-system-hunspell
#ac_add_options --enable-startup-notification
# Comment out following option if you have PulseAudio installed
ac_add_options --disable-pulseaudio
# Comment out following options if you have not installed
# recommended dependencies:
ac_add_options --enable-system-sqlite
ac_add_options --with-system-libevent
ac_add_options --with-system-libvpx
ac_add_options --with-system-nspr
ac_add_options --with-system-nss
ac_add_options --with-system-icu
# The BLFS editors recommend not changing anything below this line:
ac_add_options --prefix=/usr
ac_add_options --enable-application=browser
ac_add_options --disable-crashreporter
ac_add_options --disable-updater
ac_add_options --disable-tests
ac_add_options --enable-optimize
ac_add_options --enable-strip
ac_add_options --enable-install-strip
ac_add_options --enable-gio
ac_add_options --enable-official-branding
ac_add_options --enable-safe-browsing
ac_add_options --enable-url-classifier
ac_add_options --enable-system-cairo
ac_add_options --enable-system-ffi
ac_add_options --enable-system-pixman
ac_add_options --with-pthreads
ac_add_options --with-system-bz2
ac_add_options --with-system-jpeg
ac_add_options --with-system-png
ac_add_options --with-system-zlib
mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/firefox-build-dir</literal>
EOF</userinput>
</screen>
    <para>
  Compilez <application>Firefox</application> en lançant les commandes
    suivantes&nbsp;:</para>
     <note><para>
      Si vous compilez <application>Firefox</application> en chroot, soyez certain d'avoir
      la variable d'environnement <envar>$SHELL</envar> initialiser ou passer
       <envar>SHELL=/bin/sh</envar>.
     </para></note>
 
<screen>
<userinput>make -f client.mk</userinput>
</screen>
    <para>Ce paquet n'est pas fourni avec une suite de tests.</para>
    <para>
      Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem> :
    </para>
<screen role="root">
<userinput>make -f client.mk install INSTALL_SDK= &amp;&amp;
chown -R 0:0 /usr/lib/firefox-&firefox-version;  &amp;&amp;
mkdir -pv /usr/lib/mozilla/plugins  &amp;&amp;
ln -sfv ../../mozilla/plugins /usr/lib/firefox-&firefox-version;/browser</userinput>
</screen>
  </sect2>
  <sect2 role="commands">
    <title>Explication des commandes</title>
    <para>
     <command>make -f client.mk ...</command>&nbsp;: Les produits Mozilla
    sont enpaquetés pour permettre l'utilisation d'un fichier de configuration qui peut
    être utilisé pour passer les paramètres de configuration à la
    commande <command>configure</command>. <command>make</command> utilise le
    fichier <filename>client.mk</filename> pour avoir la configuration initiale
    et régler les paramètres et la configuration de départ.</para>
    <para>
      <command>make -C firefox-build-dir install</command>&nbsp;: Cela lance
      <command>make install</command> dans firefox-build-dir.
    </para>
    <para><command>ln -sfv ... /usr/bin/firefox</command>&nbsp;: ceci met un
    lien symbolique vers l'exécutable <command>firefox</command> dans votre
    <envar>PATH</envar>.</para>
    <para><command>mkdir -p /usr/lib/mozilla/plugins</command>&nbsp;: ceci
    vérifie que <filename class="directory">/usr/lib/mozilla/plugins</filename>
    existe.</para>
    <para><command>ln -sv ... /usr/lib/firefox-&firefox-version;/browser</command>&nbsp;:
    cette commande crée un lien symbolique vers <filename class="directory">/usr/lib/mozilla/plugins</filename>.
    Il n'est pas vraiment nécessaire, comme <application>Firefox</application> vérifie
    <filename class="directory">/usr/lib/mozilla/plugins</filename> par défaut,
      mais le lien symbolique est fait pour garder tous les greffons installés
      dans un seul dossier.</para>
    </sect2>
  <sect2 role="configuration">
    <title>Configuration de Firefox</title>
    <para>Si vous avez enlevé l'option <option>--disable-webm</option> de votre
    <filename>mozconfig</filename>, votre <application>Firefox</application>
    lira la plupart des vidéos YouTube sans le plugin flash. Pour activer ceci,
    allez sur <ulink
   url="http://www.youtube.com/html5"/>
    et cliquez sur &apos;Rejoindre le test HTML5&apos; (exige l'activation des
    cookies).</para>
    <para>Si vous utilisez un environnement de bureau comme
    <application>Gnome</application>
    ou <application>KDE</application> vous pourriez souhaiter créer un fichier
    <filename>firefox.desktop</filename> pour que <application>Firefox</application> apparaisse dans les
    menus du bureau. Si vous n'avez pas activé startup-notification (notification 
    de démarrage) dans votre mozconfig, modifiez la ligne StartupNotify en
    false. En tant qu'utilisateur
    <systemitem class="username">root</systemitem>&nbsp;:</para>
<screen role="root">
<userinput>mkdir -pv /usr/share/applications &amp;&amp;
mkdir -pv /usr/share/pixmaps &amp;&amp;
cat &gt; /usr/share/applications/firefox.desktop &lt;&lt; "EOF" &amp;&amp;
<literal>[Desktop Entry]
Encoding=UTF-8
Name=Firefox Web Browser
Comment=Browse the World Wide Web
GenericName=Web Browser
Exec=firefox %u
Terminal=false
Type=Application
Icon=firefox
Categories=GNOME;GTK;Network;WebBrowser;
MimeType=text/html;text/xml;application/xhtml+xml;application/vnd.mozilla.xul+xml;text/mml;x-scheme-handler/http;x-scheme-handler/https;
StartupNotify=true</literal>
EOF
ln -sfv /usr/lib/firefox-&firefox-version;/browser/icons/mozicon128.png \
        /usr/share/pixmaps/firefox.png</userinput>
</screen>
  </sect2>
  <sect2 role="content">
    <title>Contenu</title>
    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoire installé</segtitle>
      <seglistitem>
         <seg>
            firefox
        </seg>
      <seg>De nombreuses bibliothèques, composants du navigateur, des plugins, des
        extensions et des modules d'aide installés dans
        <filename class='directory'>/usr/lib/firefox-&firefox-version;</filename>.</seg>
        <seg>
          /usr/lib/firefox-&firefox-version;.
        </seg>
      </seglistitem>
    </segmentedlist>
    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      <varlistentry id="firefox-prog">
        <term><command>firefox</command></term>
        <listitem>
          <para>est un navigateur internet <application>Gtk+ 2</application> qui utilise le moteur
          d'affichage Mozilla Gecko.</para>
          <indexterm zone="firefox firefox-prog">
            <primary sortas="b-firefox">firefox</primary>
          </indexterm>
        </listitem>
      </varlistentry>
   </variablelist>
  </sect2>
</sect1>
