<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY firefox-download-http "http://releases.mozilla.org/pub/mozilla.org/firefox/releases/&firefox-version;/source/firefox-&firefox-version;.source.tar.bz2">
  <!ENTITY firefox-download-ftp  "ftp://ftp.mozilla.org/pub/mozilla.org/firefox/releases/&firefox-version;/source/firefox-&firefox-version;.source.tar.bz2">
  <!ENTITY firefox-md5sum        "d7c90aed8209beefa74badf02e8eeae1">
  <!ENTITY firefox-size          "51 Mio">
  <!ENTITY firefox-buildsize     "780 MB (indépendant) ou 440 MB (sur Xulrunner)">
  <!ENTITY firefox-time          "19 SBU (indépendant) ou 0.3 SBU (sur Xulrunner)">
]>

<sect1 id="firefox" xreflabel="Firefox-&firefox-version;">
  <?dbhtml filename="firefox.html" ?>

  <sect1info>
    <othername>$LastChangedBy: randy $</othername>
    <date>$Date: 2011-01-09 17:51:09 +0100 (dim 09 jan 2011) $</date>
  </sect1info>

  <title>Firefox-&firefox-version;</title>

  <indexterm zone="firefox">
    <primary sortas="a-Firefox">Firefox</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à Firefox</title>

    <para><application>Firefox</application> est un navigateur autonome basé sur le code
    <application>Mozilla</application>.</para>

    <para>Avec l'arrivée de firefox-3-x, les fichiers <application>pkgconfig</application>
    pour le moteur Gecko (et pour <application>NSS</application> et
    <application>NSPR</application>) ne sont pas installés. Cela signifie que les applications comme
    <application>Yelp</application> ne peuvent plus se construire contre firefox
    et doivent être construits à la place contre xulrunner (qui, en fin de compte, est le même code
    mais construit d'une manière différente). Si vous voulez construire d'autres paquets
    qui utilisent Gecko (des applications de ce libre, probablement seulement les applications Gnome
    reconnaîtront cette version de Xulrunner), construisez d'abord
    <xref linkend="xulrunner"/>.</para>

   <tip>
    <para>Firefox est régulièrement mis à jour car de nouvelles vulnérabilités sont trouvées.
    Consultez 
    <ulink url="http://www.mozilla.org/security/known-vulnerabilities/">mozilla security</ulink>
    pour des détails de ce qui est corrigé dans les nouvelles versions. Les éditeurs ne peuvent pas deviner ce qui va changer
    dans les nouvelles versions&nbsp;: il serait facile de faire des mises à jour
    dans une même série (3.6), mais il est toujours possible que des versions plus récentes aient mis à jour
    les dépendances,  ou que quelque chose utilisant les bibliothèques nss ou gecko soit cassé.
    Si vous mettez à jour, commencez par mettre à jour 
    <application>xulrunner</application> si vous l'utilisez, puis mettez à jour
    firefox (en vous assurant que l'option libxul-sdk pointe vers la nouvelle version).</para>
   </tip>

    &lfs67_checked;
    <para>&lfssvn_checked;20101029&lfssvn_checked2;</para>

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&firefox-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&firefox-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &firefox-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &firefox-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &firefox-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &firefox-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Téléchargement supplémentaire</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>correctif optionnel>&nbsp;: <ulink
        url="&patch-root;/firefox-&firefox-version;-provide_system_nspr_nss-1.patch"/>
        (Requis pour l'utilisation des bibliothèques NSPR et NSS dans la version du systeme pour
        d'autres paquets)</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de Firefox</bridgehead>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended"><xref linkend="xulrunner"/> qui partage toutes ces
    dépendances, ou prur un firefox autonome, les dépendances requises et facultatives suivantes&nbsp;:</para>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required"><xref linkend="alsa-lib"/>,
    <xref linkend="gtk2"/>,
    <xref linkend="libidl"/>,
    <xref linkend="pango"/>,
    <xref linkend="python"/> et
    <xref linkend="zip"/></para>

    <para>Remarque&nbsp;: vous devriez avoir installé <application>libjpeg</application> 
    avant <application>GTK+</application> et elle devrait exister sur votre système. Si, pour
    une raison quelconque, vous n'avez pas installé <application>libjpeg</application>,
    vous devriez supprimer l'option <option>--with-system-jpeg</option> du fichier
    <filename>mozconfig</filename> créé ci-dessous.</para>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional"><xref linkend="dbus-glib"/>,
    <xref linkend="doxygen"/>,
    <xref linkend="curl"/> (only for crash-reporter),
    <xref linkend="gnome-vfs"/> et <xref linkend="libgnomeui"/> (pour l'intégration de gnome),
    <xref linkend="libnotify"/>,
    <xref linkend="libpng"/> (corrigé pour le support apng),
    <xref linkend="nss"/> (recommandé si vous construisez d'autres paquet de Mozilla.org),
    <xref linkend="startup-notification"/>,
    <xref linkend="sqlite"/>,
    <xref linkend="unzip"/>,
    <ulink url="http://sourceforge.net/projects/hunspell/">Hunspell</ulink>,
    <ulink url="http://www.valgrind.org/">Valgrind</ulink> (only for testing the jemalloc code), et
 
    <xref linkend="wget"/></para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/firefox"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Firefox</title>

    <para>La configuration de <application>Firefox</application> se
    fait en créant un fichier <filename>mozconfig</filename> contenant les options de configuration désirées. Un
    <filename>mozconfig</filename> par défaut est créé ci-dessous. Pour voir toute
    la liste des options de configuration disponibles, 
    (et une description abrégée de chacune), faites
    <command>./configure --help</command>. If you are not building against
    <application>Xulrunner</application> Vous pouvez commenter l'article 'Xulrunner'.
	Il se peut que vous souhaitiez revoir tout le fichier et décommenter tout autre
    option désirée. Si vous préférez télécharger le fichier plutôt que de le créer en tapant
    ou en faisant copier/coller, vous pouvez le trouver sur <ulink
    url="&files-anduin;/firefox-&firefox-version;-mozconfig"/>
    (vous devez installer le fichier dans la racine de l'arborescence du répertoire
    source <filename class='directory'>mozilla</filename>, et le 
    nommer <filename>mozconfig</filename> ou <filename>.mozconfig</filename>). Créez 
	le fichier en lançant la commande suivante&nbsp;:</para>

<screen><?dbfo keep-together="auto"?><userinput>cat &gt; mozconfig &lt;&lt; "EOF"
<literal># Ce fichier contient les options utilisé pour la construction de Firefox. Vous pouvez
# avoir besoin de spécifier des options supplémentaires pour des besoins spécifiques de construction.
# L'utilisation les informations fournies en lançant './configure --help'  peut vous aider
# à déterminer si vous avez besoin d'ajouter des options supplémentaires. Vous pouvez
# ajouter des options supplémentaires en décommentant les exemples de ce
# fichier ou en ajoutant des options en insérant une ligne contenant
# 'ac_add_options --une-option-dont-vous-avez-besoin'. Faite attention que quelques options acceptées,
# comme '--with-system-bz2', ne change pas la construction

# Spécifie que Firefox doit être construit. Notez que cette ligne est commentée car elle
# est redondante avec la ligne suivante
# ac_add_options --enable-application=browser

# Utiliser les paramètres par défaut spécifiés dans l'arborescence du source. Le
# --enable-application=browser est initialisé dans ce fichier
. $topsrcdir/browser/config/mozconfig

# Créer un répertoire objet et spécifier de construire le paquet
# dans ce répertoire. Si désiré, modifiez l'emplacement du répertoire objet
# vers un répertoire dans l'arborescence des sources en supprimant
# '../' dans la ligne ci-dessous.
mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/../firefox-build

# Spécifie le préfixe d'installation. Si vous préféreriez que Firefox
# s'installe dans un préfixe différent, modifiez la ligne ci-dessous
# pour l'adapter à vos besoins. 
ac_add_options --prefix=/usr

# Applique un niveau minimal d'optimisation
ac_add_options --enable-optimize

#ces options sont utilisées pour que les binaires de Firefox soient liées à
# la copie installée sur le système des bibliothèques au lieu de celle de l'arborescence
# du code qui peuvent ne pas être les versions les plus récentes.
# Avec comme exceptions libsqlite3, les bibliothèques sont liées statiquement

# (Les options pour utiliser les bibliothèques installées sur le système)
# L'utilisation de la version livrée de libsqlite3 a été reportée à cuase de problèmes
# avec d'autres applications qui utilisent sqlite3.
# Commenter seulement cette ligne si vous savez exacteement ce que vous faites!
ac_add_options --enable-system-sqlite

# commentez seulement cela si vous voulez utiliser une autre version corrigée de cairo que
# celle incluse dans l'arborescence de mozilla et les en-têtes du système
ac_add_options --enable-system-cairo

# commentez cela si vous n'avez pas installé lcms
ac_add_options --enable-system-lcms

# décommentez cela si vous avez installé Hunspell
#ac_add_options --enable-system-hunspell

# Décommentez cela si vous avez installé startup-notification
#ac_add_options --enable-startup-notification

# commentez cela si vous n'avez pas construit libjpeg avant gtk+-2
ac_add_options --with-system-jpeg

# Ces deux options activent le support pour la construction de Xulrunner avec
# les versions installées sur le système des bibliothèques du
# Network Security Services (NSS) et Netscape Portable Runtime (NSPR).
# Commentez les si vous souhaitez utiliser les copies incluses (pas recommandé)
ac_add_options --with-system-nspr
ac_add_options --with-system-nss

# commentez cela si vous n'avez pas construit png avec le correctif apng
ac_add_options --with-system-png

# L'option pthreads n'est utilisé que lors de la construction de nspr
# décommentez cela si vous avez consttrui  le nspr inclus
#ac_add_options --with-pthreads

# zlib est inclus dans LFS. Ne pas commenter cette ligne
ac_add_options --with-system-zlib

# (Options pour désactiver des bouts du paquet)
# Cette option est utilisée pour désactiver le support d'accessibilité dans les
# binaires de Xulrunner. Commentez cette option si vous voulez le support 
# d'accessibilité.
ac_add_options --disable-accessibility

# Décommentez cela si vous n'avez pas construit curl
#ac_add_options --disable-crashreporter

# Commentez cela si vous n'avez pas construit Dbus-Glib
ac_add_options --disable-dbus

# commentez cela si vous avez Gnome-VFS et libgnomeui, et si vous souhaitez
# intégrer Xulrunner sur votre bureau Gnome
ac_add_options --disable-gnomevfs

# Commentez cela si vous avez installé wireless-tools installed et souhaitez utiliser le nouveau new
# scanner Necko WiFi.
ac_add_options --disable-necko-wifi

# Commentez cela si vous avez installé libnotify.
ac_add_options --disable-libnotify

# Cette option est ajoutée pour que le programme d'installation de Mozilla 
# ne soit pas construit ou installé. Le programme n'est pas nécessaire pour une
# installation BLFS de Xulrunner.
ac_add_options --disable-installer

# Si vous activez javaxpcom, vous devez avoir installé un compilateur java.
ac_add_options --disable-javaxpcom

# Cette option est ajoutée pour que les bibliothèques et les programmes de test
# ne se construisent pas. Ils ne serviraient que pour du débogage.
ac_add_options --disable-tests

# Désactive le metteur à jour, qui n'est pas adapté si vous construisez à partir
# des sources 
ac_add_options --disable-updater

# Cette option fait que les bianires de Firefox installés ont le nom officiel Firefox
# embarqué en eux. A cause de restriction de la licence, vous ne 
# pouvez pas distribuer de binaires créés en utilisant cette option. Cela signifie
# que vous aurez un popup EULA quand vous lancerez la première fois une application
# fonctionnant sous Xulrunner.
ac_add_options --enable-official-branding

# Utilisez les mesures anti-phishing (une liste noire des sites)
ac_add_options --enable-safe-browsing

# Cette option est utilisé pour que les symboles de débogage soient supprimés
# des binaires installés lors du processus d'installation. Commentez cette
# option s'il se peut que vous ayez besoin de garder les symboles de débogage
# dans les binaires installés (les binaires qui en résultent seront alourdis
# d'environ 7Mio).
ac_add_options --enable-strip

# Décommentez cette option si vous désirez le support de l'affichage sur deux
# écrans en même temps en utilisant les bibliothèques Xinerama de X-Window.
#ac_add_options --enable-xinerama

# Cette option identifie le répertoire par défaut des binaires de l'installation
# de Xulrunner et utilisé pour localiser les fichiers installés de Xulrunner.
# Cette option n'est utilisée que pour du développement.
#ac_add_options --with-default-mozilla-five-home=/usr/lib/firefox-&firefox-version;

# Pointe vers les bibliothèques xulrunner - commentez ceci pour un navigateur 
# autonome.
ac_add_options --with-system-libxul
ac_add_options --with-libxul-sdk=/usr/lib/xulrunner-devel-&xulrunner-version;</literal>

EOF</userinput></screen>

    <para>Compilez <application>Firefox</application> en lançant les
    commandes suivantes&nbsp;:</para>

<screen><userinput>make -f client.mk build</userinput></screen>

    <para>Ce paquet n'est pas fourni avec une suite de tests.</para>

    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>,
    installez le paquet&nbsp;:</para>

<screen role="root"><userinput>make -f client.mk install &amp;&amp;

chown -R -v root:root /usr/share/idl/firefox-&firefox-version; \
                      /usr/include/firefox-&firefox-version;   \
                      destdir/usr/lib/firefox-devel-3.6.13/sdk/lib</userinput></screen>

    <para>Si vous construisez Firefox sur Xulrunner, en tant qu'utilisateur
    <systemitem class="username">root</systemitem>, entrez le lien
    symbolique suivant&nbsp;:</para>

<screen role="root"><userinput>ln -sv /usr/lib/xulrunner-&xulrunner-version;/plugins \
     /usr/lib/firefox-&firefox-version;</userinput></screen>
	 
  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para><command>make -f client.mk ...</command>&nbsp;: Les produits Mozilla
    sont enpaquetés pour permettre l'utilisation d'un fichier de configuration qui peut
    être utilisé pour passer les paramètres de configuration à la
    commande <command>configure</command>. <command>make</command> utilise le
    fichier <filename>client.mk</filename> pour avoir la configuration initiale
    et régler les paramètres, puis selon le paramètre cible (<parameter>build</parameter> ou
    <parameter>install</parameter>), soit il lance le script
    <command>configure</command> et il compile le paquet, soit il installe
    le paquet.</para>

     <para><command>ln -sv /usr/lib/xulrunner-&xulrunner-version;/plugins
    /usr/lib/firefox-&firefox-version;/plugins</command>&nbsp;:
    <application>Firefox</application> cherche les plugins dans son propre répertoire,
	mais lors d'une construction sur <application>Xulrunner</application>, les plugins 
	étaient installés par le paquet. Notez que les plugins dans <filename class="directory">
	/usr/lib/mozilla/plugins</filename> seront également trouvés.</para>

   <tip>
    <para>Si vous mettez à jour firefox, assurez-vous que tous les plugins 
    supplémentaires sont déplacés vers le répertoire plugin de la nouvelle
    version.</para>
   </tip>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de Firefox</title>

    <para>Aucune configuration spécifique n'est exigée tant que le script
    <command>firefox</command> est dans le chemin de l'utilisateur. Si 
    <application>Firefox</application> est installé dans un endroit non standard,
    créez un lien symbolique vers le script <command>firefox</command> dans
    le répertoire <filename class="directory">/usr/bin</filename> directory.</para>

    <para>Si votre gestionnaire de fenêtres ou votre bureau ne vous permet pas 
    de configurer un client de courrier par défaut, vous pouvez ajouter un 
    paramètre de configuration à 
    <application>Firefox</application> pour qu'un client de courrier démarre
    lorsque vous cliquez sur une URL 
    <systemitem role='url'>mailto:</systemitem>. Il y a deux paramètres que vous devez vérifier.
    La procédure pour vérifier et modifier les paramètres de configuration est très simple et
    vous pouvez utiliser les instructions ici pour voir ou modifier tous les 
    paramètres.</para>

    <para>D'abord, ouvrez la boîte de dialogue de monfiguration en tapant 
    <systemitem role='url'>about:config</systemitem> dans la barre d'adresse. Ceci affichera une liste
    des préférences de configuration et des 
    informations concernant chacune d'elles. Vous pouvez utiliser la barre
    <quote>Filter:</quote> pour taper des critères de recherche et faire défiler les objets affichés.
    La modification d'une préférence peut se faire en utilisant deux méthodes. Un, si la préférence a une valeur boléenne,
    (Vrai/Faux), druble-cliquez simplement sur la préférence pour faire basculer la valeur 
    et deux, pour les autres préférences, faites un simple clic droit sur la
    ligne désirée, choisissez <quote>Modifier</quote> à partir du menu et modifiez la valeur. La
    création de nouveaux objets de préférence se fait de la même manière
     sauf que vous choisissez 
    <quote>Nouveau</quote> dans le menu et fournissez les données désirées dans les champs qui s'affichent.</para>

    <para>Les deux objets de préférence de configuration que vous devez vérifier afin que
    <application>Firefox</application> utilise un client de courrier par défaut spécifié
    sont <parameter>network.protocol-handler.external.mailto</parameter> qui devrait être
    réglée sur <option>True</option> et
    <parameter>network.protocol-handler.app.mailto</parameter> qui devrait être réglée
    sur le chemin du client de courrier désiré, tel que 
    <option>/usr/bin/thunderbird</option>.</para>

    <tip>
      <para>Il y a beaucoup de paramètres de configuration que vous pouvez modifier
      pour personnaliser <application>Firefox</application>. Vous pouvez trouver
      une liste très importante et à jour de ces paramètres 
      sur <ulink
      url="http://preferential.mozdev.org/preferences.html"/>.</para>
    </tip>

    <para>Beaucoup d'applications anciennes cherchent <command>netscape</command> lorsqu'elles
	doivent ouvrir un navigateur. Vous pouvez désirer créer le lien symbolique suivant
    pour être plus à l'aise (en tant que utilisateur 
    <systemitem class="username">root</systemitem>).</para>

<screen role="root"><userinput>ln -v -sf firefox /usr/bin/netscape</userinput></screen>

    <para>Pour installer divers plugins <application>Firefox</application>,
    référez-vous à <ulink url="http://plugindoc.mozdev.org/linux.html">Mozdev's
    PluginDoc Project</ulink>. Si vous avez déjà installé le paquet <xref linkend="jdk"/>,
    créez le lien symbolique en tant qu'utilisateur 
    <systemitem class="username">root</systemitem>pour utiliser
    le plugin
    <application>Java</application> installé&nbsp;: </para>

<screen role="root"><userinput>ln -v -s $JAVA_HOME/jre/lib/i386/libnpjp2.so \
    /usr/lib/firefox-&firefox-version;/plugins</userinput></screen>

    <para>Si vous avez installé <xref linkend="icedtea6"/> contrairement à
    <xref linkend="jdk"/>, creer le lien suivant (de nouveau en tant que
    <systemitem class="username">root</systemitem>&nbsp;) pour utiliser le plugin
    <application>IcedTea6</application> >&nbsp;: </para>

<screen role="root"><userinput>ln -v -s $JAVA_HOME/jre/plugin/i386/IcedTeaPlugin.so \
    /usr/lib/firefox-&firefox-version;/plugins</userinput></screen>

    <para>Certains paquets installent des plugins Mozilla dans le répertoire du système par défaut
    <filename class='directory'>/usr/lib/mozilla/plugins</filename>. Si vous ne l'avez
    pas déjà fait pour <application>Xulrunner</application>, créez les liens
    symboliques dans le répertoire de plugins de <application>Firefox</application>
    <filename class='directory'>/usr/lib/firefox-&firefox-version;/plugins</filename>
    vers les fichiers dans le répertoire de plugins par défaut (vous devriez les lier aux
    fichiers finaux et pas à d'autres liens). Alternativement, vous pouvez déplacer ou copier les
    fichiers dans le répertoire des plugins par défaut vers le répertoire des plugins 
    de <application>Firefox</application>. On vous montre un exemple de création d'un lien
    symbolique ci-dessous. Créez les liens en tant qu'utilisateur
    <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>ln -v -s ../../mozilla/plugins/<replaceable>&lt;plugin.so&gt;</replaceable> \
    /usr/lib/firefox-&firefox-version;/plugins</userinput></screen>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>firefox</seg>
        <seg>De nombreuses bibliothèques, composants du navigateur, des plugins, des
        extensions et des modules d'aide installés dans 
        <filename class='directory'>/usr/lib/firefox-&firefox-version;</filename></seg>
        <seg>/usr/include/firefox-&firefox-version;,
        /usr/lib/firefox-&firefox-version;,
        /usr/lib/firefox-devel-&firefox-version;, et
        /usr/share/idl/firefox-&firefox-version;</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="firefox-prog">
        <term><command>firefox</command></term>
        <listitem>
          <para>dans une constrution autonome est un lien symbolique au script dans
          <filename class="directory">/usr/lib/firefox-&firefox-version;</filename>
          qui initialise l'environnement et appelle le binaire <filename>firefox-bin</filename>.
		  Avec une construction sur <application>Xulrunner</application>,
          <command>firefox</command> est un lien symbolique au binaire
          <command>firefox</command> dans
          <filename class="directory">/usr/lib/firefox-&firefox-version;</filename>.
          </para>
          <indexterm zone="firefox firefox-prog">
            <primary sortas="b-firefox">firefox</primary>
          </indexterm>
        </listitem>
      </varlistentry>
   </variablelist>

  </sect2>

</sect1>
