<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY firefox-download-http "http://releases.mozilla.org/pub/mozilla.org/firefox/releases/&firefox-version;/source/firefox-&firefox-version;-source.tar.bz2">
  <!ENTITY firefox-download-ftp  "ftp://ftp.mozilla.org/pub/mozilla.org/firefox/releases/&firefox-version;/source/firefox-&firefox-version;-source.tar.bz2">
  <!ENTITY firefox-md5sum        "9875c9237b532009df8e91c3785539a3">
  <!ENTITY firefox-size          "35.3 Mio">
  <!ENTITY firefox-buildsize     "674 Mio (stand-alone) or 408MB (on xulrunner)">
  <!ENTITY firefox-time          "13.4 SBU (stand-alone) or 0.3 SBU (on xulrunner)">
]>

<sect1 id="firefox" xreflabel="Firefox-&firefox-version;">
  <?dbhtml filename="firefox.html" ?>

  <sect1info>
    <othername>$LastChangedBy: gdalziel $</othername>
    <date>$Date: 2009-07-06 21:12:40 +0200 (lun 06 jui 2009) $</date>
  </sect1info>

  <title>Firefox-&firefox-version;</title>

  <indexterm zone="firefox">
    <primary sortas="a-Firefox">Firefox</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à Firefox</title>

    <para><application>Firefox</application> est un navigateur autonome basé sur le code
    <application>Mozilla</application>.</para>

    <para>Avec l'arrivée de firefox-3, les fichiers <application>pkgconfig</application>
    pour le moteur Gecko (et pour <application>nss</application> et
    <application>nspr</application>) ne sont pas installés. Cela signifie que les applications comme
    <application>Epiphany</application> ne peuvent plus se construire contre firefox
    et doivent être construits à la place contre xulrunner (qui, en fin de compte, est le même code
    mais construit d'une manière différente). Si vous voulez construire d'autres paquets
    qui utilisent Gecko (pour le moment, probablement seules les versions de gnome-2.24 ou supérieur
    reconnaîtront xulrunner), construisez d'abord
    <xref linkend="xulrunner"/>.</para>

   <tip>
    <para>Firefox est régulièrement mis à jour car de nouvelles vulnérabilités sont trouvées.
    Consultez 
    <ulink url="http://www.mozilla.org/security/known-vulnerabilities/">mozilla security</ulink>
    pour des détails de ce qui est corrigé dans les nouvelles versions. Les éditeurs ne peuvent pas deviner ce qui va changer
    dans les nouvelles versions&nbsp;: il serait facile de faire des mises à jour
    dans une même série (3.0), mais il est toujours possible que des versions plus récentes aient mis à jour
    les dépendances,  ou que quelque chose utilisant les bibliothèques nss ou gecko soit cassé.
    Si vous mettez à jour, commencez par mettre à jour 
    <application>xulrunner</application> si vous l'utilisez, puis mettez à jour
    firefox (en vous assurant que l'option libxul-sdk pointe vers la nouvelle version).</para>
   </tip>

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&firefox-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&firefox-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &firefox-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &firefox-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &firefox-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &firefox-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de Firefox</bridgehead>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="optional"><xref linkend="xulrunner"/> qui partage toutes ces
    dépendances, ou prur un firefox autonome, les dépendances requises et facultatives suivantes&nbsp;:</para>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required"><xref linkend="gtk2"/>,
    <xref linkend="libidl"/>
    <xref linkend="pango"/>
    <xref linkend="python"/> et
    <xref linkend="zip"/></para>

    <para>Remarque&nbsp;: vous devriez avoir installé <application>libjpeg</application> 
    avant <application>GTK+</application> et elle devrait exister sur votre système. Si, pour
    une raison quelconque, vous n'avez pas installé <application>libjpeg</application>,
    vous devriez supprimer l'option <option>--with-system-jpeg</option> du fichier
    <filename>.mozconfig</filename> créé ci-dessous.</para>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional"><xref linkend="dbus-glib"/>,
    <xref linkend="doxygen"/>,
    <xref linkend="curl"/> (only for crash-reporter),
    <xref linkend="gnome-vfs"/> et <xref linkend="libgnomeui"/>
    (pour l'intégration à gnome),
    <xref linkend="lcms"/>,
    <xref linkend="libpng"/> (patched for apng support),
    <ulink url="http://sqlite.org/">SQLite</ulink>,
    <xref linkend="startup-notification"/>.
    <xref linkend="unzip"/>,
    <ulink url="http://www.valgrind.org/">Valgrind</ulink> (seulement pour tester
    le code jemalloc), et
    <xref linkend="wget"/></para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/firefox"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Firefox</title>

    <para>La configuration de <application>Firefox</application> se
    fait en créant un fichier <filename>.mozconfig</filename> contenant les options de configuration désirées. Un
    <filename>.mozconfig</filename> par défaut est créé ci-dessous. Pour voir toute
    la liste des options de configuration disponibles, 
    (et une description abrégée de chacune), faites
    <command>./configure --help</command>. Si vous allez utiliser les versions
    installées du système des bibliothèques <application>NSS</application> et
    <application>NSPR</application>, assurez-vous de décommenter les deux
    lignes près de la fin du fichier. Si vous allez construire le paquet
    <application>OpenOffice</application> et si vous voulez utiliser cette
    installation de <application>Firefox</application> comme la source
    <application>Mozilla</application> par défaut, assurez-vous de décommenter
    l'option <option>--enable-ldap</option> option dans le fichier créé ci-dessous.
    Si vous construisez contre <application>Xulrunner</application> vous depez décommenter
    l'article 'xulrunner'. Il se peut que vous souhaitiez revoir tout le fichier et décommenter tout autre
    option désirée. Si vous préférez télécharger le fichier plutôt que de le créer en tapant
    ou en faisant copier/coller, vous pouvez le trouver sur <ulink
    url="&files-anduin;/firefox-&firefox-version;-mozconfig"/>
    (vous devez installer le fichier dans la racine de l'arborescence du répertoire
    source <filename class='directory'>mozilla</filename>, et le 
    nommer <filename>.mozconfig</filename>). Créez le fichier en lançant
    la commande suivante&nbsp;:</para>

<screen><?dbfo keep-together="auto"?><userinput>cat &gt; .mozconfig &lt;&lt; "EOF"
<literal># Ce fichier contient les options utilisées pour construire firefox 
# sur xulrunner. Si vous ne souhaitez pas construire xulrunner, faites
# les modifications notées pour un 'navigateur autonome'. 
# Il se peut que vous ayez besoin de spécifier des options
# supplémentaires pour vos besoins spécifiques de construction 
# (si vous construisez 'autonome') L'utilisation les informations fournies
# en lançant './configure --help'  peut vous aider à déterminer si vous avez
# besoin d'ajouter des options supplémentaires. Vous pouvez ajouter des
# options supplémentaires en décommentant les exemples de ce
# fichier ou en ajoutant des options en insérant une ligne contenant
# 'ac_add_options --une-option-dont-vous-avez-besoin'.

# construction du navigateur
ac_add_options --enable-application=browser

# Utiliser les paramètres par défaut spécifiés dans l'arborescence du source
. $topsrcdir/browser/config/mozconfig

# Créer un répertoire objet et spécifier de construire le paquet
# dans ce répertoire. Si désiré, modifiez l'emplacement du répertoire objet
# vers un répertoire dans l'arborescence des sources en supprimant
# '../' dans la ligne ci-dessous.
mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/../firefox-build

# Spécifie le préfixe d'installation. Si vous préféreriez que Firefox
# s'installe dans un préfixe différent, modifiez la ligne ci-dessous
# pour l'adapter à vos besoins. Il se peut que vous ayez besoin modifier
# certaines des instructions du livre BLFS pour pointer vers
# le préfixe désiré. 
ac_add_options --prefix=/usr

# Compilez avec un niveau minimal d'optimisation
ac_add_options --enable-optimize

# (les options --enable-system)
# commentez cela si vous voulez utiliser une version corrigée de
# cairo
# est dans l'arborescence mozilla archivée, avec les en-têtes système 
ac_add_options --enable-system-cairo

# commentez ceci si vous n'avez pas installé lcms - firefox utilisera sa
# propre copie
ac_add_options --enable-system-lcms

# commentez ceci si vous n'avez pas installé sqlite, firefox utilisera sa
# propre ancienne copie
ac_add_options --enable-system-sqlite

# (les options --with-system)
# commentez ceci si vous n'avez pas construit libjpeg avant gtk+-2
ac_add_options --with-system-jpeg

# Ces deux options activent le support pour construire Firefox avec des versions
# du systeème installées des bibliothèques <foreignphrase>Network Security 
# Services</foreignphrase> (NSS) et <foreignphrase>Netscape Portable Runtime</foreignphrase>
# (NSPR). Nous les construisons comme faisant partie de xulrunner,
# donc nous pouvons les utiliser ici. Pour un firefox autonome, vous
# pourriez vouloir commenter celles-ci.
ac_add_options --with-system-nspr
ac_add_options --with-system-nss

# commentez ceci si vous n'avez pas installé png avec le correctif apng
ac_add_options --with-system-png

# décommentez ceci si vous construisez nspr comme faisant partie de firefox
#ac_add_options --with-pthreads

# zlib est dans LFS
ac_add_options --with-system-zlib

# (options pour désactiver des parties du paquet)
# Cette option est utilisée pour désactiver le support pour a11y dans
# les binaires de Firefox. Commentez cette option si vous avez besoin du support
# a11y.
ac_add_options --disable-accessibility

# décommentez ceci si vous n'avez pas construit curl
#ac_add_options --disable-crashreporter

# commentez ceci si vous avez construit dbus-glib
ac_add_options --disable-dbus

# commentez ceci si vous avez gnome-vfs et libgnomeui et si vous souhaitez
# intégrer firefox à votre bureau gnome
ac_add_options --disable-gnomevfs

# Cette option est ajoutée afin que le programme d'installation de Mozilla ne
# soit pas construit ou installé. Le programme n'est pas requis pour une
# installation BLFS de Firefox.
ac_add_options --disable-installer

# Le mochitest est une option de test séparée et a provoqué des problèmes
# dans le passé.
ac_add_options --disable-mochitest

# Cette option est ajoutée afin que les bibliothèques et les programmes de test
# ne soient pas construits. Ils seraient uniquement nécessaires à des
# fins de débogage.
ac_add_options --disable-tests

# Le metteur à jour n'est pas utile si vous construisez à partir des sources.
ac_add_options --disable-updater

# (options pour ajouter des parties externes au paquet)
# Cette option est utilisée pour activer le support LDAP inclu dans 
# l'arborescence des sources dans les binaires de Firefox.
###################################################################
#
# REMARQUE&nbsp;: Vous devez décommenter cette option s'il y a une possibilité
# que vous compiliez le paquet OpenOffice à partir du code source en utilisant 
# cette copie de Firefox pour votre support Mozilla. Ceci N'A PAS été
# testé, on suppose que les versions actuelles d'OpenOffice ne se construisent 
# pas contre cette version de xulrunner&nbsp;!
#
###################################################################
#ac_add_options --enable-ldap

# Il résulte de cette option que les binaires installés ont le nom officiel
# Firefox en eux. Du fait de restrictions de licence, vous ne pouvez
# pas distribuer des binaires créés en utilisant cette option. Cela
# signifie aussi que vous obtiendrez un popup EULA quand vous lancerez
# firefox pour la première fois. Si vous désactivez cela, le navigateur 
# s'appellera lui-même Minefield.
ac_add_options --enable-official-branding

# utiliser la liste noire anti-phishing
ac_add_options --enable-safe-browsing

# Cette option est utilisée afin que les symboles de débogage soit supprimés
# des binaires installés lors de la procédure d'installation. Commentez
# cette option si vous avez besoin de conserver les symboles de débogage
# dans les binaires installés (les binaires qui en résultent pèseront environ 
# 7 Mio de plus).
ac_add_options --enable-strip

# Décommentez cette option si vous désirez le support de l'affichage de Firefox
# sur deux moniteurs en utilisant les bibliothèques Xinerama de X-Window.
#ac_add_options --enable-xinerama

# (options 'with')
# Cette option identifie le répertoire du binaire par défaut de l'installation 
# de Firefox et elle est utilisée pour localiser les fichiers d'installation 
# de Firefox. Cette option n'est pas requise pour la navigation de
# l'utilisateur final et n'est utilisée qu'à des finalités de
# développement.
#ac_add_options --with-default-mozilla-five-home=/usr/lib/firefox-&firefox-version;</literal>

# Pointe vers les bibliothèques xulrunner - commentez ceci pour un navigateur 
# autonome
ac_add_options --with-libxul-sdk=/usr/lib/xulrunner-devel-&xulrunner-version;

EOF</userinput></screen>

    <para>Compilez <application>Firefox</application> en lançant les
    commandes suivantes&nbsp;:</para>

<screen><userinput>make -f client.mk build</userinput></screen>

    <para>Ce paquet n'est pas fourni avec une suite de tests.</para>

    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>,
    installez le paquet&nbsp;:</para>

<screen role="root"><userinput>make -f client.mk install</userinput></screen>

    <para>Si vous construisez firefox sur xulrunner, en tant qu'utilisateur
    <systemitem class="username">root</systemitem>, entrez le lien
    symbolique suivant&nbsp;:</para>

<screen role="root"><userinput>ln -sv /usr/lib/xulrunner-&xulrunner-version;/plugins \
 /usr/lib/firefox-&firefox-version;/plugins</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para><command>make -f client.mk ...</command>&nbsp;: Les produits Mozilla
    sont enpaquetés pour permettre l'utilisation d'un fichier de configuration qui peut
    être utilisé pour passer les paramètres de configuration à la
    commande <command>configure</command>. <command>make</command> utilise le
    fichier <filename>client.mk</filename> pour avoir la configuration initiale
    et régler les paramètres, puis selon le paramètre cible (<parameter>build</parameter> ou
    <parameter>install</parameter>), soit il lance le script
    <command>configure</command> et il compile le paquet, soit il installe
    le paquet.</para>

    <!--<para><command>install -v -m755 -d .../chrome/icons/default</command> et
    <command>ln -v -s ../../../icons/default.xpm ...</command>: These two
    commands are used to create a symlink in the required directory so that
    the proper icon is displayed in the taskbar et when
    <application>Firefox</application> windows are minimized.</para> -->

    <para><command>ln -sv /usr/lib/xulrunner-&xulrunner-version;/plugins
    /usr/lib/firefox-&firefox-version;/plugins</command>&nbsp;:
    <application>Firefox</application> cherche les plugins dans son propre répertoire, mais lors d'une construction
    sur <application>xulrunner</application>, les plugins étaient installés par le paquet.</para>

   <tip>
    <para>Si vous mettez à jour firefox, assurez-vous que tous les plugins 
    supplémentaires sont déplacés vers le répertoire plugin de la nouvelle
    version.</para>
   </tip>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de Firefox</title>

    <para>Aucune configuration spécifique n'est exigée tant que le script
    <command>firefox</command> est dans le chemin de l'utilisateur. Si 
    <application>Firefox</application> est installé dans un endroit non standard,
    créez un lien symbolique vers le script <command>firefox</command> dans
    le répertoire <filename class="directory">/usr/bin</filename> directory.</para>

    <para>Si votre gestionnaire de fenêtres ou votre bureau ne vous permet pas 
    de configurer un client de courrier par défaut, vous pouvez ajouter un 
    paramètre de configuration à 
    <application>Firefox</application> pour qu'un client de courrier démarre
    lorsque vous cliquez sur une URL 
    <systemitem role='url'>mailto:</systemitem>. Il y a deux paramètres que vous devez vérifier.
    La procédure pour vérifier et modifier les paramètres de configuration est très simple et
    vous pouvez utiliser les instructions ici pour voir ou modifier tous les 
    paramètres.</para>

    <para>D'abord, ouvrez la boîte de dialogue de monfiguration en tapant 
    <systemitem role='url'>about:config</systemitem> dans la barre d'adresse. Ceci affichera une liste
    des préférences de configuration et des 
    informations concernant chacune d'elles. Vous pouvez utiliser la barre
    <quote>Filter:</quote> pour taper des critères de recherche et faire défiler les objets affichés.
    La modification d'une préférence peut se faire en utilisant deux méthodes. Un, si la préférence a une valeur boléenne,
    (Vrai/Faux), druble-cliquez simplement sur la préférence pour faire basculer la valeur 
    et deux, pour les autres préférences, faites un simple clic droit sur la
    ligne désirée, choisissez <quote>Modifier</quote> à partir du menu et modifiez la valeur. La
    création de nouveaux objets de préférence se fait de la même manière
     sauf que vous choisissez 
    <quote>Nouveau</quote> dans le menu et fournissez les données désirées dans les champs qui s'affichent.</para>

    <para>Les deux objets de préférence de configuration que vous devez vérifier afin que
    <application>Firefox</application> utilise un client de courrier par défaut spécifié
    sont <parameter>network.protocol-handler.external.mailto</parameter> qui devrait être
    réglée sur <option>True</option> et
    <parameter>network.protocol-handler.app.mailto</parameter> qui devrait être réglée
    sur le chemin du client de courrier désiré, tel que 
    <option>/usr/bin/thunderbird</option>.</para>

    <tip>
      <para>Il y a beaucoup de paramètres de configuration que vous pouvez modifier
      pour personnaliser <application>Firefox</application>. Vous pouvez trouver
      une liste très importante et à jour de ces paramètres 
      sur <ulink
      url="http://preferential.mozdev.org/preferences.html"/>.</para>
    </tip>

    <para>Beaucoup d'applications cherchent <command>netscape</command> lorsqu'elles doivent
    ouvrir un navigateur. Vous pouvez désirer créer le lien symbolique suivant
    pour être plus à l'aise (comme l'utilisateur 
    <systemitem class="username">root</systemitem>).</para>

<screen role="root"><userinput>ln -v -sf firefox /usr/bin/netscape</userinput></screen>

    <para>Pour installer divers plugins <application>Firefox</application>,
    référez-vous à <ulink url="http://plugindoc.mozdev.org/linux.html">Mozdev's
    PluginDoc Project</ulink>. Si vous avez déjà installé le paquet <xref linkend="jdk"/>,
    créez le lien symbolique en tant qu'utilisateur 
    <systemitem class="username">root</systemitem>pour utiliser
    le plugin
    <application>Java</application> installé&nbsp;: </para>

<screen role="root"><userinput>ln -v -s $JAVA_HOME/jre/plugin/i386/ns7/libjavaplugin_oji.so \
    /usr/lib/firefox-&firefox-version;/plugins</userinput></screen>

    <para>Certains paquets installent des plugins Mozilla dans le répertoire du système par défaut
    <filename class='directory'>/usr/lib/mozilla/plugins</filename>. Si vous ne l'avez
    pas déjà fait pour <application>Xulrunner</application>, créez les liens
    symboliques dans le répertoire de plugins de <application>Firefox</application>
    <filename class='directory'>/usr/lib/firefox-&firefox-version;/plugins</filename>
    vers les fichiers dans le répertoire de plugins par défaut (vous devriez les lier aux
    fichiers finaux et pas à d'autres liens). Alternativement, vous pouvez déplacer ou copier les
    fichiers dans le répertoire des plugins par défaut vers le répertoire des plugins 
    de <application>Firefox</application>. On vous montre un exemple de création d'un lien
    symbolique ci-dessous. Créez les liens en tant qu'utilisateur
    <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>ln -v -s ../../mozilla/plugins/<replaceable>&lt;plugin.so&gt;</replaceable> \
    /usr/lib/firefox-&firefox-version;/plugins</userinput></screen>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>firefox et firefox-config</seg>
        <seg>De nombreuses bibliothèques, composants du navigateur, des plugins, des
        extensions et des modules d'aide installés dans 
        <filename class='directory'>/usr/lib/firefox-&firefox-version;</filename></seg>
        <seg>/usr/include/firefox-&firefox-version;,
        /usr/lib/firefox-&firefox-version;, et
        /usr/share/idl/firefox-&firefox-version;</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="firefox-prog">
        <term><command>firefox</command></term>
        <listitem>
          <para>est un script shell qui paramètre l'environnement et qui 
          appelle le binaire <filename>firefox-bin</filename>.</para>
          <indexterm zone="firefox firefox-prog">
            <primary sortas="b-firefox">firefox</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="firefox-config">
        <term><command>firefox-config</command></term>
        <listitem>
          <para>détermine les drapeaux de compilation et de l'éditeur de liens qui devraient être
          utilisés pour compiler et lier les programmes qui utilisent les bibliothèques et les composants du navigateur de
          <application>Firefox</application>.</para>
          <indexterm zone="firefox firefox-config">
            <primary sortas="b-firefox-config">firefox-config</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
