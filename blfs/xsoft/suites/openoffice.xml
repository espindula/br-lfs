<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!-- <!ENTITY openoffice-download-http "http://download.openoffice.org/&openoffice-version;/source.html"> -->
  <!-- <!ENTITY openoffice-download-ftp  "ftp://ftp.ussg.iu.edu/pub/openoffice/stable/&openoffice-version;/OOo_&openoffice-version;_src.tar.gz"> -->
  <!ENTITY openoffice-core-download-http   "http://ftp.osuosl.org/pub/openoffice/stable/&openoffice-version;/OOo_&openoffice-version;_src_core.tar.bz2">
  <!ENTITY openoffice-core-download-ftp    "ftp://ftp.osuosl.org/pub/openoffice/stable/&openoffice-version;/OOo_&openoffice-version;_src_core.tar.bz2">
  <!ENTITY openoffice-core-md5sum          "9555a2d5fae9a25c788cc732921ef57a">
  <!ENTITY openoffice-core-size            "138 Mio">
  <!ENTITY openoffice-system-download-http "http://ftp.osuosl.org/pub/openoffice/stable/&openoffice-version;/OOo_&openoffice-version;_src_system.tar.bz2">
  <!ENTITY openoffice-system-download-ftp  "ftp://ftp.osuosl.org/pub/openoffice/stable/&openoffice-version;/OOo_&openoffice-version;_src_system.tar.bz2">
  <!ENTITY openoffice-system-md5sum        "1e20befe2fdb65c00be11f1f5d9ebdca">
  <!ENTITY openoffice-system-size          "36 Mio">
  <!ENTITY openoffice-buildsize            "4.2-4.8 GB (depending on configured options)">
  <!ENTITY openoffice-time                 "75-100 SBU (depending on configured options)">
]>

<sect1 id="openoffice" xreflabel="OpenOffice-&openoffice-version;">
  <?dbhtml filename="openoffice.html" ?>

  <sect1info>
    <othername>$LastChangedBy: randy $</othername>
    <date>$Date: 2008-05-09 15:00:42 +0200 (ven, 09 mai 2008) $</date>
  </sect1info>

  <title>OpenOffice-&openoffice-version;</title>

  <indexterm zone="openoffice">
    <primary sortas="a-OpenOffice">OpenOffice</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à OpenOffice</title>

    <para><application>OpenOffice</application> est une suite bureautique, le
    fils open source de <application>StarOffice</application>.</para>

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>OpenOffice Core Download (HTTP)&nbsp;: <ulink url="&openoffice-core-download-http;"/></para>
      </listitem>
      <listitem>
        <para>OpenOffice Core Download (FTP)&nbsp;: <ulink url="&openoffice-core-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>OpenOffice Core Download MD5 sum: &openoffice-core-md5sum;</para>
      </listitem>
      <listitem>
        <para>OpenOffice Core Download size: &openoffice-core-size;</para>
      </listitem>
      <listitem>
        <para>OpenOffice System Download (HTTP)&nbsp;: <ulink url="&openoffice-system-download-http;"/></para>
      </listitem>
      <listitem>
        <para>OpenOffice System Download (FTP)&nbsp;: <ulink url="&openoffice-system-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>OpenOffice System Download MD5 sum: &openoffice-system-md5sum;</para>
      </listitem>
      <listitem>
        <para>OpenOffice System Download size: &openoffice-system-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &openoffice-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &openoffice-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>
    <itemizedlist spacing='compact'>
      <listitem>
        <para>Correctif requis&nbsp;:
        <ulink url="&patch-root;/OOo_&openoffice-version;-use_bin_hsqldb-1.patch"/>
        </para>
      </listitem>
      <listitem>
        <para>Téléchargement facultatif si vous souhaitez construire le
        navigatekr <application>Mozilla</application> dans l'arborescence&nbsp;:
        <ulink url="ftp://ftp.mozilla.org/pub/mozilla.org/mozilla/releases/mozilla1.7.5/source/mozilla-source-1.7.5.tar.gz"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement facultatif si vous souhaitez construire le SDK
        <application>OpenOffice</application>&nbsp;:
        <ulink url="ftp://ftp.osuosl.org/pub/openoffice/stable/&openoffice-version;/OOo_&openoffice-version;_src_sdk.tar.bz2"/>
        qui exige aussi <ulink url="http://www.mingw.org/">MinGW</ulink>
        ou un <filename>unowinreg.dll</filename> précompilé pour les composants
        <application>Java</application> de plateforme croisée.</para>
      </listitem>
      <listitem>
        <para>Téléchargement facultatif si vous aimeriez localiser
        l'installation&nbsp;:
        <ulink url="ftp://ftp.osuosl.org/pub/openoffice/stable/&openoffice-version;/OOo_&openoffice-version;_src_l10n.tar.bz2"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement facultatif si vous devez supporter les anciens
        formats de fichier <application>StarOffice-5.x</application>&nbsp;:
        <ulink url="ftp://ftp.osuosl.org/pub/openoffice/stable/&openoffice-version;/OOo_&openoffice-version;_src_binfilter.tar.bz2"/></para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances d'OpenOffice</bridgehead>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required"><xref linkend="apache-ant"/>,
    <xref linkend="gtk2"/>,
    <xref linkend="libidl"/>,
    <application>Modules Perl</application>
    <xref linkend="perl-xml-parser"/> et
    <xref linkend="perl-archive-zip"/>,
    <xref linkend="unzip"/>,
    <xref linkend="which"/> et
    <xref linkend="zip"/></para>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended"><xref linkend="libart_lgpl"/> et
    <xref linkend="libxslt"/></para>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional"><ulink
    url="http://packages.debian.org/testing/libdevel/libaltlinuxhyph-dev">ALTLinuxhyph</ulink>,
    <ulink url="http://boost.sourceforge.net/">boost</ulink>,
    <xref linkend="cups"/>,
    <xref linkend="curl"/>,
    <xref linkend="db"/> (built with Java support),
    <xref linkend="desktop-file-utils"/>,
    <ulink url="http://www.easysw.com/epm/">EPM</ulink>,
    <xref linkend="evolution"/>,
    <xref linkend="gnome-vfs"/>,
    <ulink url="http://www.cs.man.ac.uk/~toby/alan/software/">GPC</ulink>,
    <xref linkend="kde"/>,
    <xref linkend="libjpeg"/>,
    <ulink url="http://www.mega-nerd.com/libsndfile/">libsndfile</ulink>,
    <xref linkend="libtiff"/>,
    <ulink url="http://freshmeat.net/projects/libwpd/">libwpd</ulink>,
    <xref linkend="linux-pam"/>,
    <xref linkend="firefox"/> (with ldap support),
    <ulink url="http://lingucomponent.openoffice.org/MySpell-3.zip">MySpell</ulink>,
    <ulink url="http://lingucomponent.openoffice.org/thesaurus.html">MyThes</ulink>,
    <xref linkend="nas"/>,
    <ulink url="http://www.webdav.org/neon/">neon</ulink>,
    <xref linkend="openldap"/>,
    <ulink url="http://www.portaudio.com/">PortAudio</ulink>,
    <xref linkend="python"/>,
    <ulink url="http://www.gingerall.com/charlie/ga/xml/p_sab.xml">Sablotron</ulink>,
    <xref linkend="sane"/>,
    <xref linkend="startup-notification"/>,
    <ulink url="http://sourceforge.net/projects/stlport/">STLPort</ulink> et
    <xref linkend="unixodbc"/></para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/openoffice"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation d'OpenOffice</title>

    <para>Le code source d'<application>OpenOffice</application> est distribué
    maintenant dans plusieurs archives tar. Vous devriez extraire chacun d'eux
    à partir du même niveau de répertoire avant d'entrer dans le répertoire de
    construction. Au minimum, vous aurez besoin d'extraire les archives tar du
    <quote>core</quote> (c&oelig;ur) et du <quote>system</quote>. Remarquez
    que le nom de répertoire des sources n'est pas cohérent avec le nom de 
    l'archive tar et il sera nommé 
    <filename class='directory'>OOG680_m9</filename>.</para>

    <para>Si vous souhaitez construire un <application>Mozilla</application>
    dans l'arborescence, plutôt que d'utiliser une installation globale, copiez
    l'archive tar des sources de <application>Mozilla</application> dans
    l'arborescence des sources&nbsp;:</para>

<screen><userinput>cp ../mozilla-source-1.7.5.tar.gz moz/download/</userinput></screen>

    <para>Si vous voulez optimiser la construction, éditez le Makefile adéquat 
    dans <filename>solenv/inc/</filename> et ajoutez les drapeaux d'optimisation
    désirés à la variable <envar>CFLAGSOPT</envar>. Les makefiles sont 
    spécifiques à l'architecture, par exemple, éditez <filename>solenv/inc/unxlngi6.mk</filename>
    pour i686. Certains utilisateurs ont signalé des problèmes avec
    <option>-fomit-frame-pointer</option>. La meilleure option est de ne pas
    utiliser d'optimisations personnalisées.</para>

    <note>
      <para>Du fait de la complexité du système de construction
      d'<application>OpenOffice</application>, il n'est pas possible de fournir
      des instructions de construction génériques pour tous les systèmes. 
      Vous devriez regarder la sortie de <command>config_office/configure --help</command> 
      et tirer parti des programmes et des bibliothèques disponibles installés 
      sur le système en utilisant les paramètres <parameter>--enable-*</parameter>, <parameter>--disable-*</parameter>,
      et <parameter>--with-system-*</parameter>.  En outre, si vous avez
      installé <application>KDE</application> dans le préfixe
      <filename class='directory'>/opt</filename> et si vous aimeriez 
      utiliser le paramètre <parameter>--enable-kde</parameter>, vous devez
      régler <command>KDEDIR=$KDE_PREFIX</command> avant de lancer
      <command>configure</command>.</para>
    </note>

    <para><application>OpenOffice</application> échoue pour se compiler si
    <command>umask</command> est paramétré de manière exotique. La construction
    peut aussi échouer si les variables d'environnement <envar>LANG</envar> ou
    <envar>LC_ALL</envar> sont réglées. Utilisez les commandes suivantes pour 
    modifier de façon adéquate votre environnement&nbsp;:</para>

<screen><userinput>umask 0022 &amp;&amp;
unset LANG LC_ALL</userinput></screen>

    <para>Installez <application>OpenOffice</application> en lançant les
    commandes suivantes&nbsp;:</para>

<screen><userinput>patch -Np1 -i ../OOo_&openoffice-version;-use_bin_hsqldb-1.patch &amp;&amp;

sed -i 's@..$/dist$/configure@uudecode="no" &amp;@' \
    berkeleydb/makefile.mk &amp;&amp;

pushd config_office &amp;&amp;
./configure --prefix=/opt/openoffice-&openoffice-version; \
            --enable-libart                \
            --disable-fontooo              \
            --disable-gnome-vfs            \
            --without-fonts                \
            --without-system-jars          \
            --without-pam                  \
            --with-system-stdlibs          \
            --with-system-freetype         \
            --with-system-expat            \
            --with-system-libxml           \
            --with-system-libxslt          \
            --with-system-zlib             \
            --enable-cairo                 \
            --enable-build-mozilla         \
            --with-build-version=BLFS      \
            --with-package-format=native   \
            --disable-binfilter            \
            --disable-odk                  \
            --disable-qadevooo             \
            --with-use-shell=bash &amp;&amp;
popd &amp;&amp;

./bootstrap &amp;&amp;
source LinuxX86Env.Set.sh &amp;&amp;
dmake</userinput></screen>

    <para>Ce paquet n'est pas fourni avec une suite de tests.</para>

    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>pushd instsetoo_native/unxlngi6.pro/OpenOffice/\
native/install/en-US/linux-2.6-intel/buildroot/opt &amp;&amp;
cp -r -v openoffice.org2.3 /opt/openoffice-&openoffice-version; &amp;&amp;
popd &amp;&amp;

for appl in sbase scalc sdraw simpress smath soffice spadmin swriter
do
    ln -v -sf /opt/openoffice-&openoffice-version;/program/$appl /usr/bin
done &amp;&amp;

pushd sysui/desktop/icons &amp;&amp;
install -v -m755 -d /usr/share/icons/{HighContrast,hicolor,locolor} &amp;&amp;
cp -r -v HighContrast/*x* /usr/share/icons/HighContrast &amp;&amp;
cp -r -v hicolor/*x*      /usr/share/icons/hicolor &amp;&amp;
cp -r -v locolor/*x*      /usr/share/icons/locolor &amp;&amp;
popd</userinput></screen>

    <para>Si vous avez installé <xref linkend="desktop-file-utils"/>, vous devriez
    copier les fichiers <filename class='extension'>*.desktop</filename> dans
    <filename class='directory'>/usr/share/applications</filename> en utilisant
    les commandes suivantes en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>install -v -d -m755 /usr/share/applications &amp;&amp;
pushd /opt/openoffice-&openoffice-version;/share/xdg/ &amp;&amp;
for appl in *.desktop
do
    sed -i '/Exec/d' $appl &amp;&amp;
    echo "Exec=/usr/bin/s`echo $appl | sed 's/.desktop//'`" >> $appl &amp;&amp;
    sed -i '/Icon/d' $appl &amp;&amp;
    echo "Icon=`echo $appl | sed 's/.desktop//'`" >> $appl
done &amp;&amp;
sed -i 's@bin/sprinteradmin@bin/spadmin@' printeradmin.desktop &amp;&amp;
cp -v *.desktop /usr/share/applications &amp;&amp;
update-desktop-database &amp;&amp;
popd</userinput></screen>

    <para>Enfin, si vous aimeriez éditer des documents <application>OpenOffice</application>
    directement à partir de <xref linkend="seamonkey"/> ou de
    <xref linkend="firefox"/>, créez un lien symbolique dans votre répertoire
    de plugins vers <filename
    class='libraryfile'>/opt/openoffice-&openoffice-version;/program/libnpsoplugin.so</filename>.
    Vous devez également activer le plugin depuis 
    <parameter>Options Internet</parameter> dans l'application
    <application>OpenOffice</application>.</para>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para><command>sed 's@..\$dist\$/configure@uudecode="no"...'</command>&nbsp;:
    Cette commande correige un échec de construction si un programme
    <command>uudecode</command> erronné fourni par le paquet <xref linkend="gmime"/>
    est installé.</para>

    <para><parameter>--enable-*</parameter>&nbsp;: Les paramètres listés dans
    l'exemple de commande <command>configure</command> ci-dessus obligent
    l'utilisation des bibliothèques installées sur le système qui sont connues 
    pour être disponibles sur un système BLFS qui a les dépendances requises
    et recommandées.</para>

    <para><parameter>--disable-fontooo</parameter>&nbsp;: Utilise 
    <application>Fontconfig</application> à la place de FontOOo.</para>

    <para><parameter>--disable-gnome-vfs</parameter>&nbsp;: Désactive
    l'utilisation des bibliothèques <application>Gnome Virtual File System</application>.
    Ne mettez pas cette option si vous avez installé Gnome.</para>

    <para><parameter>--without-fonts</parameter>&nbsp;: N'installe pas les
    polices Bitstream Vera car elles sont déjà incluses dans l'environnement
    du système <application>X</application>.</para>

    <para><parameter>--with{,out}-system-*</parameter>&nbsp;: Détermine s'il
    faut utiliser les bibliothèques et les programmes du système ou construire
    les paquets sources inclus dans l'arborescence de construction.</para>

    <para><parameter>--without-pam</parameter>&nbsp;: Désactive l'utilisation des
    fonctions <application>Linux-PAM</application>. Ne mettez pas ce paramètre 
    si <application>Linux-PAM</application> est installé.</para>

    <para><parameter>--enable-build-mozilla</parameter>&nbsp;: Construit la
    suite <application>Mozilla</application> dans l'arborescence.</para>

    <para><parameter>--with-build-version=BLFS</parameter>&nbsp;: Met
    <quote>BLFS</quote> à la fin de la chaîne de la version.</para>

    <para><parameter>--with-package-format=native</parameter>&nbsp;: Ce
    paramètre oblige la construction à passer le processus d'empaquetage,
    ce qui ne laisse que l'installation temporaire qu'on utiliserait pour 
    l'empaquetage. Cette installation temporaire est copiée plus tard directement
    vers sa destination finale.</para>

    <para><parameter>--disable-binfilter</parameter>&nbsp;: Ce paramètre
    désactive la construction des filtres d'importation <application>StarOffice-5</application> 
    de base. Ne mettez pas cette option si vous avez téléchargé le paquet
    <application>binfilter</application> ci-dessus. Attention&nbsp;: l'installation 
    des filtres d'importation de base augmente énormément le temps de 
    construction. Ne les installez que si vous avez ces anciens types de fichiers
    et si vous devez les éditer dans 
    <application>OpenOffice</application>.</para>

    <para><parameter>--disable-odk</parameter>&nbsp;: Ce paramètre désactile
    la construction du SDK <application>OpenOffice</application>. Ne mettez pas
    ce paramètre si vous avez téléchargé le paquet SDK ci-dessus (et les
    dépendances supplémentaires).</para>

    <para><parameter>--disable-qadevooo</parameter>&nbsp;: Ce paramètre passe
    la construction des outils d'assurance qualité utilisés par les équipes de
    développement d'<application>OpenOffice</application>.</para>

    <para>
    <parameter>--with-system-mozilla=<replaceable>&lt;type&gt;</replaceable>
    </parameter>&nbsp;: Active l'utilisation d'un moteur
    <application>gecko</application> ou <application>XULRunner</application>
    installé sur le système plutôt que de la suite complète de 
    <application>Mozilla</application>. Cela désactivera l'utilisation d'un
    carnet d'adresses <application>Thunderbird</application> comme source de
    données. Si vous ne mettez pas de type d'installation, 
    <command>configure</command> a un doute et cherche une installation 
    <application>XULRunner</application> qui fonctionne et échouera s'il n'en
    trouve pas.</para>

    <para><parameter>--disable-cups</parameter>&nbsp;: Désactive l'utilisation
    de 
    <application>CUPS</application> pour l'impression.</para>

    <para>
    <parameter>--with-lang=<replaceable>&lt;LANG&gt;</replaceable></parameter>&nbsp;:
    Permet l'utilisation de langues supplémentaires dans 
    <application>OpenOffice</application>. L'anglais américain (ENUS) est celle
    par défaut.</para>

    <para>
    <parameter>--with-dict=<replaceable>&lt;LANG&gt;</replaceable></parameter>&nbsp;:
    Permet l'utilisation d'autres dictionnaires dans
    <application>OpenOffice</application>. Celui anglais américain (ENUS) est
    par défaut.</para>

    <para><parameter>--with-use-shell=bash</parameter>&nbsp;: Dit au système
    de construction de <application>OpenOffice</application> bd'utiliser 
    <command>bash</command> plutôt que <command>tcsh</command>.</para>

    <para><command>./bootstrap</command>&nbsp;: Construit l'outil
    <command>dmake</command> exigé pour terminer la construction.</para>

    <para><command>dmake</command>&nbsp;: Compile le paquet.</para>

    <para><command>for appl in sbase scalc...</command>&nbsp;: Crée des liens
    symboliques pour les applications dans
    <filename class="directory">/usr/bin</filename>.</para>

    <para><command>for appl in *.desktop...</command>&nbsp;: Édite les fichiers
    <filename>*.desktop</filename> pour une utilisation avec un système BLFS 
    standard.</para>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoire installé</segtitle>

      <seglistitem>
        <seg>scalc, sdraw, simpress, smath, soffice, spadmin,
        et swriter.</seg>
        <seg><application>OpenOffice</application> libraries</seg>
        <seg>/opt/openoffice-&openoffice-version;</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="sbase">
        <term><command>sbase</command></term>
        <listitem>
          <para>est une application de base de données.</para>
          <indexterm zone="openoffice sbase">
            <primary sortas="b-sbase">sbase</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="scalc">
        <term><command>scalc</command></term>
        <listitem>
          <para>est une application tableur.</para>
          <indexterm zone="openoffice scalc">
            <primary sortas="b-scalc">scalc</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="sdraw">
        <term><command>sdraw</command></term>
        <listitem>
          <para>est une application de dessin.</para>
          <indexterm zone="openoffice sdraw">
            <primary sortas="b-sdraw">sdraw</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="simpress">
        <term><command>simpress</command></term>
        <listitem>
          <para>est une application de présentation.</para>
          <indexterm zone="openoffice simpress">
            <primary sortas="b-simpress">simpress</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="smath">
        <term><command>smath</command></term>
        <listitem>
          <para>est un éditeur de formules mathématiques.</para>
          <indexterm zone="openoffice smath">
            <primary sortas="b-smath">smath</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="soffice">
        <term><command>soffice</command></term>
        <listitem>
          <para>ouvre une fenêtre de base donnant accès à toutes les applications
          d'<application>OpenOffice</application>.</para>
          <indexterm zone="openoffice soffice">
            <primary sortas="b-soffice">soffice</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="spadmin">
        <term><command>spadmin</command></term>
        <listitem>
          <para>est l'outil de configuration d'imprimante d'<application>OpenOffice</application>.</para>
          <indexterm zone="openoffice spadmin">
            <primary sortas="b-spadmin">spadmin</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="swriter">
        <term><command>swriter</command></term>
        <listitem>
          <para>est une application de traitement de texte.</para>
          <indexterm zone="openoffice swriter">
            <primary sortas="b-swriter">swriter</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
