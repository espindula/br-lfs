<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
   "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY openoffice-download-http "http://download.openoffice.org/&openoffice-version;/source.html">
  <!ENTITY openoffice-download-ftp "ftp://ftp.ussg.iu.edu/pub/openoffice/stable/&openoffice-version;/OOo_&openoffice-version;_source.tar.gz">
  <!ENTITY openoffice-md5sum        "20c10db97865ae4c51dc827d668b8939">
  <!ENTITY openoffice-size          "214 MB">
  <!ENTITY openoffice-buildsize     "3.1 GB">
  <!ENTITY openoffice-time          "75 SBU">
]>

<sect1 id="openoffice" xreflabel="OpenOffice-&openoffice-version;">
<sect1info>

<othername>$LastChangedBy: bdubbs $</othername>
<date>$Date: 2005-06-24 06:16:18 $</date>

</sect1info>

<?dbhtml filename="openoffice.html" ?>
<title>OpenOffice-&openoffice-version;</title>

<sect2>
<title>Introduction à <application>OpenOffice</application></title>

<para><application>OpenOffice</application> est une suite office, la
contre-partie opensource de <application>StarOffice</application>.</para>

<sect3><title>Informations sur le paquetage</title>
<itemizedlist spacing='compact'>
<listitem><para>Miroirs de téléchargement (HTTP)&nbsp;: <ulink
url="&openoffice-download-http;"/></para></listitem>
<listitem><para>Téléchargement (FTP)&nbsp;: <ulink
url="&openoffice-download-ftp;"/></para></listitem>
<listitem><para>Téléchargement de la somme MD5&nbsp;: &openoffice-md5sum;</para></listitem>
<listitem><para>Taille du téléchargement&nbsp;:&openoffice-size; 
(11-13&nbsp;Mo pour les fichiers d'aide localisés)</para></listitem>
<listitem><para>Estimation de l'espace disque requis&nbsp;:
&openoffice-buildsize; (plus gros si vous utilisez l'aide localisé)</para></listitem>
<listitem><para>Estimation du temps de construction&nbsp;:
&openoffice-time; (plus long si vous utilisez l'aide localisé)</para></listitem>
</itemizedlist>
</sect3>

<sect3><title>Téléchargements supplémentaires</title>
<itemizedlist spacing='compact'>

<listitem><para>Correctif requis pour gcc-&gcc3-version;: <ulink
url="&patch-root;/OOo_&openoffice-version;-gcc33-1.patch"/></para>
</listitem>

<listitem><para>Correctif requis pour utiliser NPTL&nbsp;: <ulink
url="&patch-root;/OOo_&openoffice-version;-nptl-1.patch"/></para>
</listitem>

<listitem><para>Correctif requis si vous compilez avec
<acronym>J2SDK</acronym>-&j2sdk-src-version;&nbsp;: <ulink
url="&patch-root;/OOo_&openoffice-version;-jdk_&j2sdk-src-version;_fix-1.patch"/></para>
</listitem>

<listitem><para>Correctif requis patch (l'exécutable <command>test</command> est dans
<filename class="directory">/bin</filename>, pas dans
<filename class="directory">/usr/bin</filename>)&nbsp;: <ulink
url="&patch-root;/OOo_&openoffice-version;-test_bin_loc-1.patch"/></para>
</listitem>

<listitem><para>Correctif optionnel si vous souhaitez utiliser la bibliothèque
freetype du système&nbsp;:
<ulink
url="&patch-root;/OOo_&openoffice-version;-freetype-1.patch"/></para>
</listitem>

<listitem><para>Correctif optionnel si
Linux-<acronym>PAM</acronym>-&Linux_PAM-version; n'est pas installé&nbsp;:
<ulink
url="&patch-root;/OOo_&openoffice-version;-no_pam-1.patch"/></para>
</listitem>

<listitem><para>Bibliothèque <quote>General Polygon Clipper</uoqte> (optionnel
si libart_lgpl-&libart_lgpl-version; est utilisé)&nbsp;: <ulink
url="ftp://ftp.cs.man.ac.uk/pub/toby/gpc/gpc231.tar.Z"/></para>
</listitem>

<listitem><para>L'archive <acronym>TAR</acronym> des sources contient seulement
l'aide en anglais. Un fichier d'aide localisé peut être disponible sur&nbsp;: <ulink
url="http://ftp.services.openoffice.org/pub/OpenOffice.org/contrib/helpcontent/"/>.</para>
</listitem>

</itemizedlist>
</sect3>

<sect3><title>Dépendances d'<application>OpenOffice</application></title>
<sect4><title>Requis</title>
<para>X (<xref linkend="xfree86"/> ou <xref linkend="xorg"/>), 
<xref linkend="zip"/>, 
<xref linkend="unzip"/>, 
<xref linkend="tcsh"/>, 
<xref linkend="which"/> et
<xref linkend="gcc3"/>.</para>
</sect4>

<sect4><title>Recommandé</title>
<para><xref linkend="j2sdk"/>, 
<xref linkend="freetype2"/>, 
<xref linkend="pkgconfig"/>, 
<xref linkend="startup-notification"/> et
<xref linkend="desktop-file-utils"/>.</para>
</sect4>

<sect4><title>Optionnel</title>
<para><xref linkend="Linux_PAM"/>, 
<xref linkend="libart_lgpl"/>, 
<xref linkend="apache-ant"/> et
<xref linkend="curl"/>.</para>
</sect4>
</sect3>

</sect2>

<sect2>
<title>Installation de <application>OpenOffice</application></title>

<para><application>OpenOffice</application> ne crée pas un répertoire lorsque
vous déballez l'archive <acronym>TAR</acronym>. Créez un répertoire de
construction et extrayez les sources avec les commandes suivantes&nbsp;:</para>

<screen><userinput><command>mkdir OOo-build &amp;&amp;
cd OOo-build &amp;&amp;
tar -zxf ../OOo_&openoffice-version;_source.tar.gz</command></userinput></screen>

<para>En option, déballez et déplacez les fichiers gpc, puis appliquez les
correctifs téléchargés&nbsp;:</para>

<screen><userinput><command>tar -zxf ../gpc231.tar.Z &amp;&amp;
mv gpc231/* external/gpc &amp;&amp;
rmdir gpc231 &amp;&amp;
for patch in ../OOo_&openoffice-version;-*.patch
  do patch -Np1 -i $patch
  done</command></userinput></screen>

<para>STLport recherche les en-têtes c++ au mauvais endroit. Placez un lien
symbolique pour satisfaire STLport&nbsp;:</para>

<screen><userinput><command>ln -sf /opt/gcc-&gcc3-version;/include/c++/&gcc3-version; /usr/g++-v3</command></userinput></screen>

<para>La construction d'OpenOffice échoue avec gcc-3.4.1. Configurez votre chemin
pour inclure gcc-&gcc3-version;:</para>

<screen><userinput><command>export PATH_HOLD=$PATH &amp;&amp;
export PATH=/opt/gcc-&gcc3-version;/bin:$PATH</command></userinput></screen>

<para>Si vous voulez optimiser la construction, éditez
<filename>solenv/inc/unxlngi4.mk</filename> et ajoutez les options d'optimisation
désirées à la variable <envar>CFLAGSOPT</envar>. Quelques utilisateurs ont
rapporté des problèmes avec <parameter>-fomit-frame-pointer</parameter>. La
meilleure option est de ne pas utiliser d'optimisations personnalisées. La
commande suivante supprime une option <parameter>-mcpu</parameter> incorrecte
dans le fichier ci-dessus&nbsp;:</para>

<screen><userinput><command>sed -i "s:\-mcpu=pentiumpro::" \
    solenv/inc/unxlngi4.mk</command></userinput></screen>

<para>Configurez <application>OpenOffice</application> en utilisant les commandes
suivantes. Vous pouvez construire des ensembles d'installation pour les langues
spécifiques basées sur vos préférences. Fournissez une liste séparée avec des
virgules à l'option <envar>--with-lang=</envar>. Si un composant particulier
n'est pas disponible dans la langue de votre choix, la valeur par défaut sera
l'anglais US. Si vous avez besoin d'autres langues, assurez-vous d'ajouter
<parameter>ENUS</parameter> à la liste&nbsp;; sinon, la construction
échouera&nbsp;:</para>

<screen><userinput><command>cd config_office/ &amp;&amp;
./configure --with-lang=ENUS \
    --with-dict=ENUS --without-fonts \
    --enable-libsn --with-system-zlib \
    --with-system-freetype &amp;&amp;
cd ..</command></userinput></screen>

<para>La compilation d'<application>OpenOffice</application> échoue si
<command>umask</command> est configuré avec quelque chose d'exotique. La
construction peut aussi échouer si les variables d'environnement
<envar>LANG</envar> ou <envar>LC_ALL</envar> sont initialisées. Utilisez les
commandes suivantes pour modifier votre environnement en accord&nbsp;:</para>

<screen><userinput><command>umask 0022 &amp;&amp;
unset LANG LC_ALL</command></userinput></screen>

<para>Compilez <application>OpenOffice</application> en utilisant les commandes
suivantes&nbsp;:</para>

<screen><userinput><command>./bootstrap &amp;&amp;
bash -c "source LinuxIntelEnv.Set.sh; dmake"</command></userinput></screen>

<para>Si vous avez téléchargé des fichiers <filename>tgz</filename> pour une
aide localisée, vous aurez besoin de les déballer dans le répertoire approprié
comme indiqué ci-dessous, puis de recréer l'ensemble d'installation&nbsp;:</para>

<screen><userinput><command>for i in ../helpcontent_*_unix.tgz
  do tar -C solver/645/unxlngi4.pro/pck -zxf $i
  done &amp;&amp;
rm -rf instsetoo/unxlngi4.pro &amp;&amp;
bash -c "source LinuxIntelEnv.Set.sh ; dmake"</command></userinput></screen>

<para>Installez <application>OpenOffice</application> en utilisant les commandes
suivantes pour installer l'ensemble de langue anglaise. Pour installer une version
localisée, remplacez 01 avec le code téléphone international de votre
pays&nbsp;:</para>

<screen><userinput><command>cd instsetoo/unxlngi4.pro/01/normal &amp;&amp;
sed -i "s:^oo_home=.*:oo_home=openoffice:" install &amp;&amp;
./install --prefix=/opt &amp;&amp;
for appl in sagenda scalc sdraw sfax simpress slabel sletter \
    smaster smath smemo soffice spadmin svcard sweb swriter
  do ln -sf /opt/openoffice/program/$appl /usr/bin/$appl
  done</command></userinput></screen>

<para>Si vous avez installé <xref linkend="desktop-file-utils"/> et que vous
utilisez <application>KDE</application>, aucune configuration supplémentaire
n'est nécessaire. Si vous utilisez <application>Gnome</application>, vous devez
copier les fichiers <filename>*.desktop</filename> dans
<filename>/usr/share/applications</filename> avec les commandes suivantes&nbsp;:
</para>

<screen><userinput><command>install -d /usr/share/applications -m 755 &amp;&amp;
cp /opt/openoffice/share/gnome/net/ooo645*.desktop \
    /usr/share/applications/ &amp;&amp;
rename ooo645 ooo /usr/share/applications/ooo645*.desktop</command></userinput></screen>

<para>Enfin, replacez votre environnement dans son état original&nbsp;:</para>

<screen><userinput><command>export PATH=$PATH_HOLD &amp;&amp;
rm -f /usr/g++-v3</command></userinput></screen>

</sect2>

<sect2>
<title>Explications des commandes</title>

<para>
<command>mv ../gpc231/gpc.* external/gpc</command>&nbsp;: copie les fichiers
gpc dans le répertoire approprié.</para>

<para><parameter>--with-lang=ENUS</parameter>&nbsp;: option concernant la
langue.</para>

<para><parameter>--with-dict=ENUS</parameter>&nbsp;: installe les dictionnaires
pour la langue anglaise.</para>

<para><parameter>--enable-libart</parameter>&nbsp;: utilise libart au lieu de gpc
pour les ajouts de polygones.</para>

<para><parameter>--with-libsn</parameter>&nbsp;: utilise
<application>startup-notification</application>.</para>

<para><parameter>--disable-java</parameter>&nbsp;: ne construit pas les
composants qui ont besoin de java.</para>

<para><parameter>--without-gpc</parameter>&nbsp;: n'utilise pas gpc. Supprime la
capacité de créer des polygônes.</para>

<para><parameter>--without-fonts</parameter>&nbsp;: n'installe pas les polices
Bitstream Vera car elles font déjà partie de <application>X</application>.</para>

<para><parameter>--with-system-curl</parameter>&nbsp;: utilise la bibliothèque
curl installée sur le système.</para>

<para><command>./bootstrap</command>&nbsp;: crée des paquetages requis pour
recommencer la construction.</para>

<para><command>dmake</command>&nbsp;: compile le paquetage.</para>

<para><command>sed -i "s:^oo_home=...</command>&nbsp;: supprime le répertoire
d'installation spécifique à la version.</para>

<para><command>for appl in sagenda scalc sdraw sfax ...; 
do ...</command>&nbsp;: crée des liens pour que le paquetage puisse être exécuté
à partir de la ligne de commande sans modifications au chemin existant.</para>

</sect2>

<sect2>
<title>Contenu</title>

<para>The <application>OpenOffice</application> package contient
<command>sagenda</command>, <command>scalc</command>, 
<command>sdraw</command>, <command>sfax</command>, 
<command>simpress</command>, <command>slabel</command>, 
<command>sletter</command>, <command>smaster</command>, 
<command>smath</command>, <command>smemo</command>, 
<command>soffice</command>, <command>spadmin</command>, 
<command>svcard</command>, <command>sweb</command>,
<command>swriter</command>, les bibliothèques et les outils de support
d'<application>OpenOffice</application>.</para>

</sect2>

<sect2><title>Description</title>

<sect3><title>sagenda</title>
<para>Crée un modèle d'agenda et lance
<command>swriter</command>.</para></sect3>

<sect3><title>scalc</title>
<para>Tableur.</para></sect3>

<sect3><title>sdraw</title>
<para>Application de dessin.</para></sect3>

<sect3><title>sfax</title>
<para>Crée un modèle de fax et lance
<command>swriter</command>.</para></sect3>

<sect3><title>simpress</title>
<para>Application de présentation.</para></sect3>

<sect3><title>slabel</title>
<para>Crée un modèle label et lance
<command>swriter</command>.</para></sect3>

<sect3><title>sletter</title>
<para>Crée un modèle de lettre et lance
<command>swriter</command>.</para></sect3>

<sect3><title>smaster</title>
<para>Crée un nouveau document maître.</para></sect3>

<sect3><title>smath</title>
<para>Éditeur de formules mathématiques.</para></sect3>

<sect3><title>smemo</title>
<para>Crée un modèle de mémo et lance
<command>swriter</command>.</para></sect3>

<sect3><title>soffice</title>
<para>Ouvre une fenêtre de base ayant accès à toutes les applications
d'<application>OpenOffice</application>.</para></sect3>

<sect3><title>spadmin</title>
<para>Configuration des imprimantes d'<application>OpenOffice</application>.
Vous pouvez avoir besoin d'exécuter ceci si vous avez des problèmes
d'impression.</para></sect3>

<sect3><title>svcard</title>
<para>Application pour les cartes de travail.</para></sect3>

<sect3><title>sweb</title>
<para>Un éditeur<acronym>HTML</acronym>.</para></sect3>

<sect3><title>swriter</title>
<para>Traitement de texte.</para></sect3>

</sect2>

</sect1>

