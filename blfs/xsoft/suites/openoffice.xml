<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
   "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY openoffice-download-http "http://download.openoffice.org/&openoffice-version;/source.html">
  <!ENTITY openoffice-download-ftp "ftp://ftp.ussg.iu.edu/pub/openoffice/stable/&openoffice-version;/OOo_&openoffice-version;_source.tar.gz">
  <!ENTITY openoffice-md5sum        "20c10db97865ae4c51dc827d668b8939">
  <!ENTITY openoffice-size          "214 MB">
  <!ENTITY openoffice-buildsize     "3.1 GB">
  <!ENTITY openoffice-time          "75 SBU">
]>

<sect1 id="openoffice" xreflabel="OpenOffice-&openoffice-version;">
<sect1info>

<othername>$LastChangedBy: bdubbs $</othername>
<date>$Date: 2005-06-15 05:57:16 $</date>

</sect1info>

<?dbhtml filename="openoffice.html" ?>
<title>OpenOffice-&openoffice-version;</title>

<sect2>
<title>Introduction to <application>OpenOffice</application></title>

<para><application>OpenOffice</application> is an office suite, the 
open source sibling of <application>StarOffice</application>.</para>

<sect3><title>Package information</title>
<itemizedlist spacing='compact'>
<listitem><para>Download Mirrors (HTTP): <ulink
url="&openoffice-download-http;"/></para></listitem>
<listitem><para>Download (FTP): <ulink
url="&openoffice-download-ftp;"/></para></listitem>
<listitem><para>Download MD5 sum: &openoffice-md5sum;</para></listitem>
<listitem><para>Download size: &openoffice-size; 
(additional 11-13 MB for localized help content file)</para></listitem>
<listitem><para>Estimated disk space required:
&openoffice-buildsize; (more if using localized help content)</para></listitem>
<listitem><para>Estimated build time:
&openoffice-time; (longer if using localized help content)</para></listitem>
</itemizedlist>
</sect3>

<sect3><title>Additional downloads</title>
<itemizedlist spacing='compact'>

<listitem><para>Required patch for gcc-&gcc3-version;: <ulink
url="&patch-root;/OOo_&openoffice-version;-gcc33-1.patch"/></para>
</listitem>

<listitem><para>Required patch for use with NPTL: <ulink
url="&patch-root;/OOo_&openoffice-version;-nptl-1.patch"/></para>
</listitem>

<listitem><para>Required patch if compiling with 
<acronym>J2SDK</acronym>-&j2sdk-src-version;: <ulink
url="&patch-root;/OOo_&openoffice-version;-jdk_&j2sdk-src-version;_fix-1.patch"/></para>
</listitem>

<listitem><para>Required patch (Executable <command>test</command> is in
<filename class="directory">/bin</filename>,
not in <filename class="directory">/usr/bin</filename>): <ulink
url="&patch-root;/OOo_&openoffice-version;-test_bin_loc-1.patch"/></para>
</listitem>

<listitem><para>Optional patch if you wish to use the system freetype:
<ulink
url="&patch-root;/OOo_&openoffice-version;-freetype-1.patch"/></para>
</listitem>

<listitem><para>Optional patch if
Linux-<acronym>PAM</acronym>-&Linux_PAM-version; is not installed:
<ulink
url="&patch-root;/OOo_&openoffice-version;-no_pam-1.patch"/></para>
</listitem>

<listitem><para>General Polygon Clipper Library (Optional if 
libart_lgpl-&libart_lgpl-version; is used): <ulink
url="ftp://ftp.cs.man.ac.uk/pub/toby/gpc/gpc231.tar.Z"/></para>
</listitem>

<listitem><para>The source <acronym>TAR</acronym> ball only contains English 
language help. A localized help content file may be available at: <ulink
url="http://ftp.services.openoffice.org/pub/OpenOffice.org/contrib/helpcontent/"/>.</para>
</listitem>

</itemizedlist>
</sect3>

<sect3><title><application>OpenOffice</application> dependencies</title>
<sect4><title>Required</title>
<para>X (<xref linkend="xfree86"/> or <xref linkend="xorg"/>), 
<xref linkend="zip"/>, 
<xref linkend="unzip"/>, 
<xref linkend="tcsh"/>, 
<xref linkend="which"/> and 
<xref linkend="gcc3"/>.</para>
</sect4>

<sect4><title>Recommended</title>
<para><xref linkend="j2sdk"/>, 
<xref linkend="freetype2"/>, 
<xref linkend="pkgconfig"/>, 
<xref linkend="startup-notification"/> and 
<xref linkend="desktop-file-utils"/>.</para>
</sect4>

<sect4><title>Optional</title>
<para><xref linkend="Linux_PAM"/>, 
<xref linkend="libart_lgpl"/>, 
<xref linkend="apache-ant"/> and 
<xref linkend="curl"/>.</para>
</sect4>
</sect3>

</sect2>

<sect2>
<title>Installation of <application>OpenOffice</application></title>

<para><application>OpenOffice</application> does not create a directory
when you extract the <acronym>TAR</acronym> ball.  Create a build directory 
and extract the source with the following commands:</para>

<screen><userinput><command>mkdir OOo-build &amp;&amp;
cd OOo-build &amp;&amp;
tar -zxf ../OOo_&openoffice-version;_source.tar.gz</command></userinput></screen>

<para>Optionally, untar and move the gpc files, and apply the downloaded
patches:</para>

<screen><userinput><command>tar -zxf ../gpc231.tar.Z &amp;&amp;
mv gpc231/* external/gpc &amp;&amp;
rmdir gpc231 &amp;&amp;
for patch in ../OOo_&openoffice-version;-*.patch
  do patch -Np1 -i $patch
  done</command></userinput></screen>

<para>STLport looks for the c++ headers in the wrong location.  Put a
temporary symlink in place to satisfy STLport:</para>

<screen><userinput><command>ln -sf /opt/gcc-&gcc3-version;/include/c++/&gcc3-version; /usr/g++-v3</command></userinput></screen>

<para>OpenOffice fails to build with gcc-3.4.1.  Set your path to
include gcc-&gcc3-version;:</para>

<screen><userinput><command>export PATH_HOLD=$PATH &amp;&amp;
export PATH=/opt/gcc-&gcc3-version;/bin:$PATH</command></userinput></screen>

<para>If you want to optimize the build, edit
<filename>solenv/inc/unxlngi4.mk</filename> and add the desired optimization
flags to the <envar>CFLAGSOPT</envar> variable. Some users have reported 
problems with <parameter>-fomit-frame-pointer</parameter>. The best option is 
to not use any custom optimizations. The following command removes an incorrect 
<parameter>-mcpu</parameter> option in the above file:</para>

<screen><userinput><command>sed -i "s:\-mcpu=pentiumpro::" \
    solenv/inc/unxlngi4.mk</command></userinput></screen>

<para>Configure <application>OpenOffice</application> using the following 
commands. You may build install sets for specific languages based on your 
preferences. Supply a comma separated list to the <envar>--with-lang=</envar> 
switch.  If a particular component is not available in the language of your 
choice, the default will be US English. If you need other languages, be sure 
to add <parameter>ENUS</parameter> to the list; otherwise the build will 
fail:</para>

<screen><userinput><command>cd config_office/ &amp;&amp;
./configure --with-lang=ENUS \
    --with-dict=ENUS --without-fonts \
    --enable-libsn --with-system-zlib \
    --with-system-freetype &amp;&amp;
cd ..</command></userinput></screen>

<para><application>OpenOffice</application> fails to compile if 
<command>umask</command> is set to something exotic. The build can also
fail if the <envar>LANG</envar> or <envar>LC_ALL</envar> environment
variables are set.  Use the following commands to change your
environment accordingly:</para>

<screen><userinput><command>umask 0022 &amp;&amp;
unset LANG LC_ALL</command></userinput></screen>

<para>Compile <application>OpenOffice</application> using the following
commands:</para>

<screen><userinput><command>./bootstrap &amp;&amp;
bash -c "source LinuxIntelEnv.Set.sh; dmake"</command></userinput></screen>

<para>If you have downloaded localized help content <filename>tgz</filename> 
files, you will need to untar them to the appropriate directory as shown 
below and then recreate the installation set:</para>

<screen><userinput><command>for i in ../helpcontent_*_unix.tgz
  do tar -C solver/645/unxlngi4.pro/pck -zxf $i
  done &amp;&amp;
rm -rf instsetoo/unxlngi4.pro &amp;&amp;
bash -c "source LinuxIntelEnv.Set.sh ; dmake"</command></userinput></screen>

<para>Install <application>OpenOffice</application> using the following 
commands to install the US English language set. To install a localized 
version, replace the 01 with the international telephone country code for 
your country:</para>

<screen><userinput><command>cd instsetoo/unxlngi4.pro/01/normal &amp;&amp;
sed -i "s:^oo_home=.*:oo_home=openoffice:" install &amp;&amp;
./install --prefix=/opt &amp;&amp;
for appl in sagenda scalc sdraw sfax simpress slabel sletter \
    smaster smath smemo soffice spadmin svcard sweb swriter
  do ln -sf /opt/openoffice/program/$appl /usr/bin/$appl
  done</command></userinput></screen>

<para>If you have installed <xref linkend="desktop-file-utils"/> and use
<application>KDE</application>, there is no furthur configuration
necessary.  If you use <application>Gnome</application>, you should copy
the <filename>*.desktop</filename> files to
<filename>/usr/share/applications</filename> with the following
commands:</para>

<screen><userinput><command>install -d /usr/share/applications -m 755 &amp;&amp;
cp /opt/openoffice/share/gnome/net/ooo645*.desktop \
    /usr/share/applications/ &amp;&amp;
rename ooo645 ooo /usr/share/applications/ooo645*.desktop</command></userinput></screen>

<para>Finally, return your environment to it's original state:</para>

<screen><userinput><command>export PATH=$PATH_HOLD &amp;&amp;
rm -f /usr/g++-v3</command></userinput></screen>

</sect2>

<sect2>
<title>Command explanations</title>

<para>
<command>mv ../gpc231/gpc.* external/gpc</command>: Copy the gpc files to the 
appropriate location.</para>

<para><parameter>--with-lang=ENUS</parameter>: Make install set for the
US English language.</para>

<para><parameter>--with-dict=ENUS</parameter>: Install dictionaries for
the US English language.</para>

<para><parameter>--enable-libart</parameter>: Use libart instead of gpc for 
polygon clipping.</para>

<para><parameter>--with-libsn</parameter>: Use 
<application>startup-notification</application>.</para>

<para><parameter>--disable-java</parameter>: Do not build components that need 
java.</para>

<para><parameter>--without-gpc</parameter>: Do not use gpc. Removes polygon 
clipping capability.</para>

<para><parameter>--without-fonts</parameter>: Do not install Bitstream Vera 
fonts since they are already bundled with <application>X</application>.</para>

<para><parameter>--with-system-curl</parameter>: Use the system
installed curl.</para>

<para><command>./bootstrap</command>: Create packages required to bootstrap 
the build.</para>

<para><command>dmake</command>: Compile the package.</para>

<para><command>sed -i "s:^oo_home=...</command>: Remove version specific
installation directory.</para>

<para><command>for appl in sagenda scalc sdraw sfax ...; 
do ...</command>: Create links so that the package can be started from the 
command-line without changes to the existing path.</para>

</sect2>

<sect2>
<title>Contents</title>

<para>The <application>OpenOffice</application> package contains
<command>sagenda</command>, <command>scalc</command>, 
<command>sdraw</command>, <command>sfax</command>, 
<command>simpress</command>, <command>slabel</command>, 
<command>sletter</command>, <command>smaster</command>, 
<command>smath</command>, <command>smemo</command>, 
<command>soffice</command>, <command>spadmin</command>, 
<command>svcard</command>, <command>sweb</command>,
<command>swriter</command>, <application>OpenOffice</application> 
libraries and support utilities.</para>

</sect2>

<sect2><title>Description</title>

<sect3><title>sagenda</title>
<para>Create an agenda template and start 
<command>swriter</command>.</para></sect3>

<sect3><title>scalc</title>
<para>Spreadsheet application.</para></sect3>

<sect3><title>sdraw</title>
<para>Drawing application.</para></sect3>

<sect3><title>sfax</title>
<para>Create a fax template and start 
<command>swriter</command>.</para></sect3>

<sect3><title>simpress</title>
<para>Presentation application.</para></sect3>

<sect3><title>slabel</title>
<para>Create a label template and start
<command>swriter</command>.</para></sect3>

<sect3><title>sletter</title>
<para>Create a letter template and start
<command>swriter</command>.</para></sect3>

<sect3><title>smaster</title>
<para>Creates a new master document.</para></sect3>

<sect3><title>smath</title>
<para>Mathematical formula editor.</para></sect3>

<sect3><title>smemo</title>
<para>Create a memo template and start
<command>swriter</command>.</para></sect3>

<sect3><title>soffice</title>
<para>Opens a base window with access to all 
<application>OpenOffice</application> applications.</para></sect3>

<sect3><title>spadmin</title>
<para><application>OpenOffice</application> Printer Configuration. You may 
need to run this if you are having any printing problems.</para></sect3>

<sect3><title>svcard</title>
<para>Business card application.</para></sect3>

<sect3><title>sweb</title>
<para>An <acronym>HTML</acronym> editor.</para></sect3>

<sect3><title>swriter</title>
<para>Word processing application.</para></sect3>

</sect2>

</sect1>

