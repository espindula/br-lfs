<?xml version="1.0" encoding="ISO-8859-1"?>
<sect2>
<title>Installation de <application>OpenOffice</application></title>

<para>Appliquez les correctifs téléchargés et copiez les fichiers gpc.</para>

<screen><userinput><command>mv ../gpc231/* external/gpc &amp;&amp;
for p in ../openoffice-&openoffice-version;-*.patch
do patch -Np1 -i $p
done</command></userinput></screen>

<para>Si vous voulez optimiser la construction, éditez
<filename>solenv/inc/unxlngi4.mk</filename> et ajoutez les options
d'optimisation à la variable <envar>CFLAGSOPT</envar>. Quelques utilisateurs
ont rapporté avoir des problèmes avec -fomit-frame-pointer. Le meilleur choix
est de ne pas utiliser d'optimisation personnalisé. La commande suivante
supprime une option -mcpu incorrecte dans le fichier ci-dessus.</para>

<screen><userinput><command>sed -i "s:\-mcpu=pentiumpro::" \
solenv/inc/unxlngi4.mk</command></userinput></screen>

<para>Configurez openoffice en utilisant les commandes suivantes. Vous pouvez
ajouter des langages suivant vos préférences. Si un composant particulier n'est
pas disponible dans la langue de votre choix, il sera par défaut en anglais. Si
vous restreignez les langages, assurez-vous d'ajouter ENUS à la liste&nbsp;;
sinon la construction échoue. De même, la construction échoue quand la variable
d'environnement <envar>LANG</envar> est initialisée. Supprimez-la avant de
compiler.</para>

<screen><userinput><command>cd config_office/ &amp;&amp;
./configure --with-lang=ALL \
--with-dict=ALL --without-fonts \
--enable-libsn --with-system-zlib &amp;&amp;
cd ..</command></userinput></screen>

<para>Compilez <application>OpenOffice</application> en utilisant les commandes suivantes.</para>

<note><para>Openoffice échoue à la compilation si umask est initialisé sur
quelque chose d'exotique. Initialisez-le à 022 si vous l'initialisez
habituellement sur autre chose.</para></note>

<screen><userinput><command>./bootstrap &amp;&amp;
bash -c "source LinuxIntelEnv.Set.sh; dmake"</command></userinput></screen>

<para>Si vous avez téléchargé les fichiers compressés d'aide localisé, vous
aurez besoin de les décompresser dans le répertoire approprié comme
mentionné ci-dessous et de recréer l'ensemble d'installation.</para>

<screen><userinput><command>cd solver/645/unxlngi4.pro/pck &amp;&amp;
for i in $(ls ../../../../../helpcontent_*_unix.tgz)
do
tar -xvzf $i
done &amp;&amp;
cd ../../../../instsetoo &amp;&amp;
rm -rf unxlngi4.pro &amp;&amp;
cd .. &amp;&amp;
bash -c "source LinuxIntelEnv.Set.sh ; dmake"</command></userinput></screen>

<para>Installez <application>OpenOffice</application> en utilisant les
commandes suivantes pour disposer du nécessaire pour la
langue anglaise. Pour installer une version localisée, remplacez le 01 par le
code international téléphonique de votre pays. Notez qu'un affichage
<application>X</application> est nécessaire lors de l'installation bien
qu'aucune fenêtre <application>X</application> ne sera visible. Vous pouvez
utiliser <application>Xvfb</application> si vous compilez à partir de la console.</para>

<screen><userinput><command>cd instsetoo/unxlngi4.pro/01/normal &amp;&amp;
sed -i "s:^oo_home=.*:oo_home=openoffice:" install &amp;&amp;
./install --prefix=/opt &amp;&amp;
for appl in swriter scalc sdraw simpress smath soffice spadmin
do ln -sf /opt/openoffice/program/$appl /usr/bin/$appl
done</command></userinput></screen>

</sect2>
