<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY thunderbird-download-http     "http://releases.mozilla.org/pub/mozilla.org/thunderbird/releases/&thunderbird-version;/source/thunderbird-&thunderbird-version;.source.tar.bz2">
  <!ENTITY thunderbird-download-ftp      "ftp://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/&thunderbird-version;/source/thunderbird-&thunderbird-version;.source.tar.bz2">
  <!ENTITY thunderbird-md5sum            "be64630152a2d5a824a76752594e7596">
  <!ENTITY thunderbird-size              "65 MB">
  <!ENTITY thunderbird-buildsize         "915 MB">
  <!ENTITY thunderbird-time              "21">

  <!ENTITY thunderbird-enigmail-version  "1.1.2">

  <!ENTITY thunderbird-enigmail-download "http://www.mozilla-enigmail.org/download/source/enigmail-&thunderbird-enigmail-version;.tar.gz">
  <!ENTITY thunderbird-enigmail-md5sum   "7d329d5e8afbbb28214ca1995beb09c9">
  <!ENTITY thunderbird-enigmail-size     "1.2 MB">
]>

<sect1 id="thunderbird" xreflabel="Thunderbird-&thunderbird-version;">
  <?dbhtml filename="thunderbird.html" ?>

  <sect1info>
    <othername>$LastChangedBy: randy $</othername>
    <date>$Date: 2011-01-10 03:09:11 +0100 (lun 10 jan 2011) $</date>
  </sect1info>

  <title>Thunderbird-&thunderbird-version;</title>

  <indexterm zone="thunderbird">
    <primary sortas="a-Thunderbird">Thunderbird</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction to Thunderbird</title>

    <para><application>Thunderbird</application> is a stand-alone
    mail/news client based on the <application>Mozilla</application>
    codebase.</para>

    <bridgehead renderas="sect3">Package Information</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Download (HTTP): <ulink url="&thunderbird-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Download (FTP): <ulink url="&thunderbird-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum: &thunderbird-md5sum;</para>
      </listitem>
      <listitem>
        <para>Download size: &thunderbird-size;</para>
      </listitem>
      <listitem>
        <para>Estimated disk space required: &thunderbird-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimated build time: &thunderbird-time;</para>
      </listitem>
    </itemizedlist>

    <para>To enable the <application>Enigmail</application> extension to the
    <application>Thunderbird</application> mail client, you'll need to download
    the tarball shown below. The <application>Enigmail</application> extension
    allows users to access the authentication and encryption features provided
    by the <application>GnuPG</application> package. The Enigmail extension
    will not operate correctly unless you have <xref linkend="gnupg"/> or
    <xref linkend="gnupg2"/> installed.</para>

    <itemizedlist spacing='compact'>
      <listitem>
        <para><ulink url="&thunderbird-enigmail-download;"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum: &thunderbird-enigmail-md5sum;</para>
      </listitem>
      <listitem>
        <para>Download size: &thunderbird-enigmail-size;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Thunderbird Dependencies</bridgehead>

    <bridgehead renderas="sect4">Required</bridgehead>
    <para role="required"><xref linkend="alsa-lib"/>,
    <xref linkend="gtk2"/>,
    <xref linkend="libidl"/>,
    <xref linkend="pango"/>,
    <xref linkend="python"/>, and
    <xref linkend="zip"/></para>

    <para>Note: <application>libjpeg</application> should have been installed
    before <application>GTK+</application> and should exist on your system. If
    for some reason you haven't installed <application>libjpeg</application>,
    you should remove the <option>--with-system-jpeg</option> option from the
    <filename>mozconfig</filename> file created below.</para>

    <bridgehead renderas="sect4">Optional</bridgehead>
    <para role="optional"><xref linkend="dbus-glib"/>,
    <xref linkend="doxygen"/>,
    <xref linkend="curl"/> (only for crash-reporter),
    <xref linkend="gnome-vfs"/> and <xref linkend="libgnomeui"/>
    (for gnome integration),
    <xref linkend="libnotify"/>,
    <xref linkend="libpng"/> (patched for apng support),
    <xref linkend="nss"/> (recommended if you build any other Mozilla.org packages),
    <xref linkend="startup-notification"/>,
    <xref linkend="sqlite"/>,
    <xref linkend="unzip"/>,
    <ulink url="http://sourceforge.net/projects/hunspell/">Hunspell</ulink>,
    <ulink url="http://www.valgrind.org/">Valgrind</ulink> (only for testing the
    jemalloc code), and
    <xref linkend="wget"/></para>

    <para condition="html" role="usernotes">User Notes:
    <ulink url="&blfs-wiki;/Thunderbird"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation of Thunderbird</title>

    <para>The configuration of <application>Thunderbird</application> is
    accomplished by creating a <filename>mozconfig</filename> file containing
    the desired configuration options. A default <filename>mozconfig</filename>
    is created below. To see the entire list of available configuration options
    (and an abbreviated description of each one), issue
    <command>./configure --help</command>. If you would prefer to download the
    file instead of creating it by typing or cut-and-pasting, you can find it
    at <ulink url="&files-anduin;/thunderbird-&thunderbird-version;-mozconfig"/>
    (the file must be installed in the root of the source tree
    <filename class='directory'>comm-1.9.2</filename> directory, and named
    <filename>mozconfig</filename> or <filename>.mozconfig</filename>). Create
    the file by issuing the following command:</para>

<screen><?dbfo keep-together="auto"?><userinput>cat &gt; mozconfig &lt;&lt; "EOF"
<literal># This file contains the options used in the Thunderbird build. You may
# need to specify additional options for your specific build needs.
# Use the information provided by running './configure --help' to
# help you determine if you need to add any additional options.
# Some additional options can be added by uncommenting the examples
# in this file or adding options by inserting a line containing
# 'ac_add_options --some-option-you-need'.  Be aware that some accepted
# options, such as '--with-system-bz2', do not affect the build.

# Specify that Thunderbird should be built.
ac_add_options --enable-application=mail

# Use the default settings specified in the source tree. The
# --enable-application=mail is set in this file. This file does not exist in
# this version of Thunderbird.
#. $topsrcdir/mailnews/config/mozconfig

# Specify that the Lightning calendar extension should be built as per the
# Mozilla distributed Thunderbird.
ac_add_options --enable-calendar

# Create an object directory and specify to build the package in that
# directory. If desired, modify the location of the object directory
# to a directory inside the source tree by removing '../' from the
# line below.
mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/../thunderbird-build

# Specify the installation prefix. If you would prefer Thunderbird installed in a
# different prefix, modify the line below to fit your needs.
ac_add_options --prefix=/usr

# Apply a minimal level of optimization (-O).
ac_add_options --enable-optimize

# These options are used so that the Thunderbird binaries are linked to
# the system-installed copies of the specified libraries instead of
# the source tree code which may not be the most recent versions.
# With the exception of libsqlite3, the libraries are statically linked.

# (Options to use system installed libraries)
# Using the shipped version of libsqlite3 has been reported to cause
# problems with other applications which were using sqlite3.
# Only comment this line if you know exactly what you are doing!
ac_add_options --enable-system-sqlite

# Comment this only if you want to use whatever patched version of cairo
# is in the shipped mozilla tree, together with the system headers.
ac_add_options --enable-system-cairo

# Comment this if you have not installed lcms.
ac_add_options --enable-system-lcms

# Uncomment this if you have installed Hunspell
#ac_add_options --enable-system-hunspell

# Uncomment this if you have installed startup-notification
#ac_add_options --enable-startup-notification

# Comment this if you did not build libjpeg before GTK+-2.
ac_add_options --with-system-jpeg

# These two options enable support for building Thunderbird with
# system-installed versions of the Network Security Services (NSS)
# and Netscape Portable Runtime (NSPR) libraries. Comment them if
# you wish to use the included copies (not recommended).
ac_add_options --with-system-nspr
ac_add_options --with-system-nss

# Comment this if you have not built png with the apng patch.
ac_add_options --with-system-png

# The pthreads option is only used when building nspr
# Uncomment this if you build the included nspr.
#ac_add_options --with-pthreads

# Zlib is included in LFS. Do not comment this line.
ac_add_options --with-system-zlib

# (Options to disable parts of the package)
# This option is used to disable the a11y support in the Thunderbird
# binaries. Comment out this option if you require a11y support.
ac_add_options --disable-accessibility

# Uncomment this if you did not build cURL.
#ac_add_options --disable-crashreporter

# Comment this if you have built DBus-Glib.
ac_add_options --disable-dbus

# Comment this if you have Gnome-VFS and libgnomeui, and wish to
# integrate Thunderbird into your Gnome desktop.
ac_add_options --disable-gnomevfs

# Comment this if you have wireless-tools installed and wish to use the new
# Necko WiFi scanning.
ac_add_options --disable-necko-wifi

# Comment this if you have installed libnotify.
ac_add_options --disable-libnotify

# This option is added so that the Mozilla Installer program is not
# built or installed. The program is not required for a BLFS
# installation of Thunderbird.
ac_add_options --disable-installer

# If you enable javaxpcom, you must have a java compiler installed.
ac_add_options --disable-javaxpcom

# Enable the build of static internal libs (currently required).
ac_add_options --enable-static

# This option is added so that test libraries and programs are not
# built. These would only be required for debugging purposes.
ac_add_options --disable-tests

# Disable the updater, which is not appropriate if you build from source.
ac_add_options --disable-updater

# (options to add extra parts of the package)
# This option causes the installed Thunderbird binaries to have the official
# Thunderbird name embedded in them. Due to license restrictions, you
# may not distribute binaries created using this option.  It also
# means you get a popup EULA when you first run Thunderbird.
ac_add_options --enable-official-branding

# This option is used so that the debugging symbols are removed from
# the installed binaries during the installation process. Comment out
# this option if you may have a need to retain the debugging symbols
# in the installed binaries (the resulting binaries will be about 7MB
# bigger).
ac_add_options --enable-strip

# Uncomment this option if you desire support for dual-monitor
# display using the X-Window Xinerama libraries.
#ac_add_options --enable-xinerama

# Enable strong cryptography (This is explicitly required if you plan to use
# the Enigmail extension for Thunderbird).
ac_add_options --enable-crypto

# Point to the Xulrunner libraries - comment these for a standalone client
# DO NOT UNCOMMENT THESE - System XULRunner is broken until Thunderbird
# development catches up with XULRunner-1.9.2.
#ac_add_options --with-system-libxul
#ac_add_options --with-default-mozilla-five-home=/usr/lib/xulrunner-devel-&xulrunner-version;</literal>

EOF</userinput></screen>

    <para>Compile <application>Thunderbird</application> by
    issuing the following commands:</para>

<screen><userinput>make -f client.mk build</userinput></screen>

    <para>This package does not come with a test suite.</para>

    <para>If you're building the <application>Enigmail</application> extension,
    issue the following commands:</para>

<screen><userinput>tar -xf ../enigmail-&thunderbird-enigmail-version;.tar.gz -C mailnews/extensions &amp;&amp;
cp -v mozconfig .mozconfig &amp;&amp;
( cd mailnews/extensions/enigmail &amp;&amp; ./makemake -r ) &amp;&amp;

make -C ../thunderbird-build/mailnews/extensions/enigmail &amp;&amp;
make -C ../thunderbird-build/mailnews/extensions/enigmail \
        XPIFILE=enigmail-&thunderbird-enigmail-version;.xpi xpi</userinput></screen>

    <para>Install <application>Thunderbird</application> by running the
    following commands as the <systemitem class="username">root</systemitem>
    user:</para>

<screen role="root"><userinput>make -f client.mk install</userinput></screen>

    <para>If you built the <application>Enigmail</application> extension,
    issue the following command as the <systemitem
    class="username">root</systemitem> user to install the
    <filename>.xpi</filename> file in an accessible location:</para>

<screen role="root"><userinput>install -v -m644 -D \
    ../thunderbird-build/mozilla/dist/bin/enigmail-&thunderbird-enigmail-version;.xpi \
    /usr/lib/thunderbird-&thunderbird-version;/xpi_store/enigmail-&thunderbird-enigmail-version;.xpi</userinput></screen>

    <sect3 role="commands">
      <title>Enigmail Global Installation</title>

      <para>If you want to install <application>Enigmail</application> globally
      so that all users who run <application>Thunderbird</application> will have
      access to the extension, issue the command shown below. Note that this
      procedure starts an instance of <application>Thunderbird</application> and
      you must have an X server running. Issue the following commands as the
      <systemitem class="username">root</systemitem> user:</para>

<screen role="root"><userinput>cp -v /usr/lib/thunderbird-&thunderbird-version;/xpi_store/enigmail-&thunderbird-enigmail-version;.xpi \
    /usr/lib/thunderbird-&thunderbird-version;/extensions &amp;&amp;

/usr/bin/thunderbird</userinput></screen>

      <para>When <application>Thunderbird</application> starts it will display
      an installation dialog, asking <computeroutput>The following items were
      found in your Extensions folder. Do you want to install
      them?</computeroutput>. Follow the prompts, and then exit
      <application>Thunderbird</application>.</para>

      <para>Global installation of other extensions can be done using the same
      basic method as the <application>Enigmail</application> extension.</para>

    </sect3>

    <sect3 role="commands">
      <title>Enigmail Single User Installation</title>

      <para>To install the <application>Enigmail</application> extension for a
      single user (and does not require
      <systemitem class="username">root</systemitem> access), start
      <application>Thunderbird</application> and click on <quote>Tools</quote>
      ===&gt; <quote>Add-ons</quote> ===&gt; <quote>Extensions</quote>, and
      then click on <quote>Install</quote> at the bottom of the dialog box.
      Browse the filesystem and navigate to
      <filename class="directory">/usr/lib/thunderbird-&thunderbird-version;/xpi_store</filename>
      where you will find the <filename>enigmail-&thunderbird-enigmail-version;.xpi</filename>
      extension. Follow the prompts to install the extension.</para>

      <para>Single user installation of other extensions can be done using the
      same basic method as the <application>Enigmail</application> extension.
      You may have to download the extension file to a suitable folder before
      beginning the installation.</para>

    </sect3>

  </sect2>

  <sect2 role="commands">
    <title>Command Explanations</title>

    <para><command>make -f client.mk ...</command>: Mozilla products are
    packaged to allow the use of a configuration file which can be used to
    pass the configuration settings to the <command>configure</command>
    command. <command>make</command> uses the <filename>client.mk</filename>
    file to get initial configuration and setup parameters, then depending on
    the target parameter (<parameter>build</parameter> or
    <parameter>install</parameter>), either runs the
    <command>configure</command> script and compiles the package or installs
    the package.</para>

    <para><command>( cd mailnews/... &amp;&amp; ./makemake -r )</command>:
    This command is used to recursively create <filename>Makefile</filename>s
    in the <filename class='directory'>enigmail</filename> directory.</para>

    <para><command>make -C ... xpi</command>: This command builds the
    <application>Enigmail</application>
    <filename class='extension'>.xpi</filename> file which is used to install
    <application>Enigmail</application>.</para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuring Thunderbird</title>

    <sect3><title>Configuration Information</title>

      <para>No specific configuration is required as long as the
      <command>thunderbird</command> script is in the user's path. If
      <application>Thunderbird</application> is installed in a non-standard
      location, then make a symlink to the <command>thunderbird</command>
      script in the <filename class="directory">/usr/bin</filename>
      directory.</para>

      <para>If your Window or Desktop Manager does not allow you to configure
      a default browser, you can add a configuration parameter to
      <application>Thunderbird</application> so that a browser will start when
      when you click on an Internet/intranet/local URL. The procedure to check
      or modify any of the configuration parameters is quite simple and the
      instructions here can be used to view or modify any of the
      parameters.</para>

      <para>First, open the configuration dialog by opening the
      <quote>Edit</quote> drop-down menu. Choose <quote>Preferences</quote>
      and then click on the <quote>Advanced</quote> icon on the top menu
      bar. Choose the <quote>Advanced</quote> tab and click on the
      <quote>Config Editor</quote> button. This will display a list of the
      configuration preferences and information related to each one. You can
      use the <quote>Filter:</quote> bar to enter search criteria and narrow
      down the listed items. Changing a preference can be done using two
      methods. One, if the preference has a boolean value (True/False), simply
      double-click on the preference to toggle the value and two, for other
      preferences simply right-click on the desired line, choose
      <quote>Modify</quote> from the menu and change the value. Creating new
      preference items is accomplished in the same way, except choose
      <quote>New</quote> from the menu and provide the desired data into the
      fields when prompted.</para>

      <para>The configuration preference item you need to check so that
      <application>Thunderbird</application> uses a specified browser is the
      <parameter>network.protocol-handler.app.http</parameter> which should
      be set to the path of the desired browser, e.g.,
      <option>/usr/bin/firefox</option>.</para>

    <tip>
      <para>There is a multitude of configuration parameters you can tweak to
      customize <application>Thunderbird</application>. A very extensive, but
      not so up-to-date list of these parameters can be found at <ulink
      url="http://preferential.mozdev.org/preferences.html"/>.</para>
    </tip>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contents</title>

    <segmentedlist>
      <segtitle>Installed Programs</segtitle>
      <segtitle>Installed Libraries</segtitle>
      <segtitle>Installed Directories</segtitle>

      <seglistitem>
        <seg>thunderbird</seg>
        <seg>Numerous libraries, email/newsgroups components, plugins,
        extensions, and helper modules installed in <filename
        class='directory'>/usr/lib/thunderbird-&thunderbird-version;</filename>
        </seg>
        <seg>/usr/include/thunderbird-&thunderbird-version;,
        /usr/lib/thunderbird-&thunderbird-version;, and
        /usr/share/idl/thunderbird-&thunderbird-version;, and optionally
        /usr/share/mozilla/extensions</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Short Descriptions</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="thunderbird-prog">
        <term><command>thunderbird</command></term>
        <listitem>
          <para>is <application>Mozilla</application>'s next-generation
          email and newsgroup client.</para>
          <indexterm zone="thunderbird thunderbird-prog">
            <primary sortas="b-thunderbird">thunderbird</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
