<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
 <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY thunderbird-download-http     
  "http://releases.mozilla.org/pub/mozilla.org/thunderbird/releases/&thunderbird-version;/source/thunderbird-&thunderbird-version;.source.tar.bz2">
  <!ENTITY thunderbird-download-ftp      
  "ftp://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/&thunderbird-version;/source/thunderbird-&thunderbird-version;.source.tar.bz2">
  <!ENTITY thunderbird-md5sum            "1d7127a3282e62d95eb9b59d47291b70">
  <!ENTITY thunderbird-size              "97 Mio">
  <!ENTITY thunderbird-buildsize         "3 Gio (46 Mio installés)">
  <!ENTITY thunderbird-time              "26 SBU">

]>

<sect1 id="thunderbird" xreflabel="Thunderbird-&thunderbird-version;">
  <?dbhtml filename="thunderbird.html" ?>

  <sect1info>
    <othername>$LastChangedBy&nbsp;: andy $</othername>
    <date>$Date&nbsp;: 2012-03-14 22:29:26 +0100 (mer. 14 mars 2012) $</date>
  </sect1info>

  <title>Thunderbird-&thunderbird-version;</title>

  <indexterm zone="thunderbird">
    <primary sortas="a-Thunderbird">Thunderbird</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à Thunderbird</title>

    <para>
      <application>Thunderbird</application> est un client autonome de
    mail/news basésur le code source de <application>Mozilla</application>.
    </para>

    &lfs71_checked;

    <bridgehead renderas="sect3">Information sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP): <ulink url="&thunderbird-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP): <ulink url="&thunderbird-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement: &thunderbird-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement: &thunderbird-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis: &thunderbird-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction: &thunderbird-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Correctif requis&nbsp;&nbsp;:
          <ulink url="&patch-root;/thunderbird-&thunderbird-version;_gcc-4.7-1.patch"/>
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de Thunderbird</bridgehead>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
      <xref linkend="alsa-lib"/>,
      <xref linkend="gtk2"/>,
      <xref linkend="zip"/> et
      <xref linkend="unzip"/>
    </para>


    <para>Remarque&nbsp;: <application>libjpeg</application> et <application>libpng</application> 
    (corrigé pour le support apng) devraient avoir été installés avant
    <application>gdk-pixbuf</application> et devraient exister sur votre système. Si
    pour une raison bizarre, vous ne les avez pas installées,
    vous devriez supprimer les options <option>--with-system-jpeg</option> et
    <option>--with-system-png</option> du fichier
    <filename>mozconfig</filename> créé ci dessous.</para>

    <bridgehead renderas="sect4">Supplémentaire</bridgehead>
    <para role="optional">
      <xref linkend="dbus-glib"/>,
      <xref linkend="doxygen"/>,
      <xref linkend="gnome-vfs"/> et <xref linkend="libgnomeui"/>
      (pour l'intégration avec l'ancienne version de <application>Gnome</application>),
      <xref linkend="libnotify"/>,
      <xref linkend="nss"/>,
      <xref linkend="nspr"/>,
      <xref linkend="startup-notification"/>,
      <xref linkend="sqlite"/>,
      <xref linkend="yasm"/> (ou <xref linkend="libvpx"/>),
      <ulink url="http://hunspell.sourceforge.net/">Hunspell</ulink>,
      <ulink url="http://libevent.org/">Libevent</ulink>,
      <ulink url="http://www.valgrind.org/">Valgrind</ulink> (seulement pour tester 
      le code jemalloc) et
      <xref linkend="wget"/>
    </para>

    <para condition="html" role="usernotes">Notes Utilisateur:
    <ulink url="&blfs-wiki;/Thunderbird"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Thunderbird</title>

    <para>La configuration de <application>Thunderbird</application> est
    réalisée en créant un fichier <filename>mozconfig</filename> contenant
    les options de configurations désirées. Un <filename>mozconfig</filename> par défaut
    est créé çi-dessous. Pour voir la liste complète des options de configuration disponibles
    (un une brève description de chacune d'elles), taper
    <command>./configure --help</command>. Créez le fichier en lançant la
    commande suivante&nbsp;:</para>

<screen><userinput>cat &gt; mozconfig &lt;&lt; "EOF"
# Si vous avez une machine multicoeurs, vous pouvez accélérer la
# construction en lançant plusieurs tâches en même temps, mais vous n'avez qu'un
# coeur, effacez cette ligne&nbsp;:
mk_add_options MOZ_MAKE_FLAGS="-j4"

# Si vous avez installé Yasm effacez cette option&nbsp;:
ac_add_options --disable-webm

# Si vous avez installé DBus-Glib effacez cette option&nbsp;:
ac_add_options --disable-dbus

# Si vous avez installé wireless-tools effacez cette option&nbsp;:
ac_add_options --disable-necko-wifi

# Si vous avez installé libnotify effacez cette option&nbsp;:
ac_add_options --disable-libnotify

# Décommentez ceci si vous les avez installés&nbsp;:
# ac_add_options --with-system-nspr
# ac_add_options --with-system-nss
# ac_add_options --enable-system-sqlite
# ac_add_options --with-system-libvpx
# ac_add_options --enable-startup-notification
# ac_add_options --enable-system-hunspell
# ac_add_options --with-system-libevent


mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/thunderbuild
ac_add_options --with-pthreads
ac_add_options --enable-system-ffi
ac_add_options --with-system-jpeg
ac_add_options --with-system-png
ac_add_options --enable-system-cairo
ac_add_options --with-system-zlib
ac_add_options --enable-shared
ac_add_options --disable-static
ac_add_options --disable-debug
ac_add_options --disable-crashreporter
ac_add_options --disable-installer
ac_add_options --disable-updater
ac_add_options --disable-tests
EOF</userinput></screen>

    <para>Compiler <application>Thunderbird</application> en tapant les commandes suivantes:</para>

<screen><userinput>patch -p1 &lt; ../thunderbird-&thunderbird-version;_gcc-4.7-1.patch &amp;&amp;
sed -i 's#VPX_CODEC_USE_INPUT_PARTITION#VPX_CODEC_USE_INPUT_FRAGMENTS#' \
  mozilla/configure &amp;&amp;
make -f client.mk &amp;&amp;
make -C thunderbuild/mail/installer</userinput></screen>

    <para>Ce paquet n'est pas livré avec une suite de tests.</para>

    <para>Installez <application>Thunderbird</application> en exécutant les commantes
    suivantes en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>mkdir -p /usr/lib/thunderbird-&thunderbird-version; &amp;&amp;
tar xf thunderbuild/mozilla/dist/thunderbird-*.tar.bz2 -C /usr/lib/thunderbird-&thunderbird-version; --strip-components=1 &amp;&amp;
ln -s ../lib/thunderbird-&thunderbird-version;/thunderbird /usr/bin/thunderbird</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para><command>sed -i 's#VPX_CODEC_USE_INPUT_PARTITION ...</command>&nbsp;: Ceci corrige le
    script <command>configure</command> de mozilla pour détecter correctement
    <xref linkend="libvpx"/>. Ce sed n'est pas utile si vous avez installé libvpx-v0.9.7 ou
    supérieur ou si vous n'avez pas installé <application>Libvpx</application>.</para>

    <para><command>make -f client.mk</command>&nbsp;: Les produits Mozilla sont
    empaquetés pour permettre d'utiliser un fichier de configuration qui peut
    être utilisé pour passer les paramètres de configuration à la commande
    <command>configure</command>.
    <command>make</command> utilise le fichier <filename>client.mk</filename>
    pour récupérer la configuration de départ et régler les paramètres.</para>

    <para><command>make -C thunderbuild/mail/installer</command>&nbsp;: Ceci lance
    make dans le dossier <filename class="directory">thunderbuild/mail/installer</filename>.
    Ceci rassemble tous les composants de <application>Thunderbird</application>
    et les compresse dans une archive tar.</para>

   <para><command>tar -xfv thunderbuild/mozilla/dist ...</command>&nbsp;: Ceci
   déballe <application>Thunderbird</application>, l'option <option>-C</option>
    décompresse les fichiers dans <filename class="directory">/usr/lib/thunderbird-&thunderbird-version;</filename>.
    L'option <option>--strip-components=1</option> supprime le répertoire
    &apos;thunderbird&apos; demeurant dans les noms de fichiers, ce qui nous 
    permet de le déballer dans un répertoire versionné.</para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de Thunderbird</title>

    <sect3><title>Information de configuration</title>

      <para>Si votre gestionnaire de fenètres ou de bureau n'autorise pas la configuration
      d'un navigateur par défaut, vous pouvez ajouter un paramètre de configuration à
      <application>Thunderbird</application> pour qu'un navigateur démarre quand
      vous cliquez sur une URL Internet/intranet/local. La procédure pour vérifier
      ou modifier tous les paramètres de configuration est simple et les
      instructions alors peuvent être utilisées pour voir ou modifier tout les
      parametres.</para>

      <para>En premier, ouvrir la fenètre de configuration en ouvrant le menu
      déroulant <quote>Edition</quote>. Choisir <quote>Préférences</quote>
      et ensuite cliquer sur l'icône <quote>Général</quote> dans la barre de menus
  supérieur. Choisissez l'onglet <quote>Avancé</quote> et cliquez sur le bouton
      <quote>Editeur de configuration</quote>. Cela affichera une liste des préférences de
      configuration et des informations relatives à chacunes d'elles. Vous pouvez
      utiliser la barre <quote>Filter:</quote> pour entrer un critère de recherche et restreindre
      la liste des objets. Le changement d'une préférence peut être fait en utilisant deux
      méthodes. La première, si la préférence est une valeur booléenne (True/False), simplement
      double-click sur la préférence pour basculer la valeur et la seconde, pour les autres
      préférences simplement faire un click droit sur la ligne désirée, choisir
      <quote>Modifier</quote> dans le menu et changer la valeur. La création de nouvelles préférences
      est réalisées de la même manière, excepté choisir
      <quote>Nouveau</quote> dans le menu et fournir les données désirées dans le champ sélectionné.</para>

      <para>L'objet des préférences de configuration que vous devez vérifier pour que
      <application>Thunderbird</application> utilise un navigateur spécifié est
      <parameter>network.protocol-handler.app.http</parameter> qui doit être initialisé
      avec le chemin du navigateur désiré, par exemple,
      <option>/usr/bin/firefox</option>.</para>

    <tip>
      <para>Il y a une multitude de paramètres de configuration parameters que vous pouvez modifier pour
      customiser <application>Thunderbird</application>. Une très vaste, mais pas à jour, liste de ces
      paramètres peut être trouvée à l'adresse <ulink
    url="http://preferential.mozdev.org/preferences.html"/>.</para>
    </tip>


    <para>Si vous utilisez un environnement de bureau comme
    <application>Gnome</application>
    ou <application>KDE</application> vous pourriez souhaiter créer un fichier
    <filename>thunderbird.desktop</filename> pour que <application>Firefox</application> apparaisse dans les
    menus du bureau. Si vous n'avez pas activé startup-notification (notification 
    de démarrage) dans votre mozconfig, modifiez la ligne StartupNotify en
    false. En tant qu'utilisateur
    <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>cat &gt; /usr/share/applications/firefox.desktop &lt;&lt; "EOF"
[Desktop Entry]
Encoding=UTF-8
Type=Application
Name=Firefox
Comment=Browse The Web
Icon=firefox
Exec=firefox
Categories=Network;GTK;Application;Email;News;
StartupNotify=true
Terminal=false
EOF
ln -sv -f /usr/lib/thunderbird-&thunderbird-version;/chrome/icons/default/default256.png \
  /usr/share/pixmaps/thunderbird.png</userinput></screen>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>thunderbird</seg>
        <seg>De nombreuses bibliothèques, des composants de messagerie/nouvelles,
        des plugins, des extensions et des modules d'aide installés dans
        <filename class='directory'>/usr/lib/thunderbird-&thunderbird-version;</filename>
        </seg>
        <seg>/usr/lib/thunderbird-&thunderbird-version;</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Courtes descriptions</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="thunderbird-prog">
        <term><command>thunderbird</command></term>
        <listitem>
          <para>est la prochaine génération du client emails et newsgroups de <application>Mozilla</application>.</para>
          <indexterm zone="thunderbird thunderbird-prog">
            <primary sortas="b-thunderbird">thunderbird</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
  
