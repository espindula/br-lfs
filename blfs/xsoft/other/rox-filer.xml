<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  <!ENTITY rox-filer-download-http
    "&sourceforge-repo;/rox/rox-filer-&rox-filer-version;.tar.bz2">
  <!ENTITY rox-filer-download-ftp  " ">
  <!ENTITY rox-filer-md5sum        "0eebf05a67f7932367750ebf9faf215d">
  <!ENTITY rox-filer-size          "1.8 Mo">
  <!ENTITY rox-filer-buildsize     "19 Mo">
  <!ENTITY rox-filer-time          "0.3 SBU">
]>
<sect1 id="rox-filer" xreflabel="Rox-Filer-&rox-filer-version;">
  <?dbhtml filename="rox-filer.html"?>
  <sect1info>
    <othername>$LastChangedBy$</othername>
    <date> </date>
  </sect1info>
  <title>Rox-Filer-&rox-filer-version;</title>
  <indexterm zone="rox-filer">
    <primary sortas="a-rox-filer">rox-filer</primary>
  </indexterm>
  <sect2 role="package">
    <title>Introduction à rox-filer</title>
    <para><application>rox-filler</application> est un gestionnaire de fichier gtk2 rapide et léger.</para>
       &lfs77_checked;lfs77_checked;
    <bridgehead renderas="sect3">Information sur le paquet </bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&rox-filer-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&rox-filer-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &rox-filer-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &rox-filer-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &rox-filer-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &rox-filer-time;</para>
      </listitem>
    </itemizedlist>
    <bridgehead renderas="sect3">Dépendances de rox-filer</bridgehead>
    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
       <xref linkend="libglade"/> et
       <xref linkend="shared-mime-info"/></para>
       
    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/rox-filer"/></para>
  </sect2>
  <sect2 role="kernel" id="rox-filer-kernel">
    <title>Kernel Configuration</title>
      <para>Si vous souhaitez que <application>rox-filer</application> puisse mettre à jour le contenu
      d'un répertoire quand des changements sont faits dans les fichiers par d'autres applications
      (par example, si un script est lancé) vous devez activer le support dnotify dans votre noyau.
      Dans <command>make menuconfig</command>&nbsp;:</para>
<screen>
<literal>File systems ---&gt;
  [*] Dnotify support   [CONFIG_DNOTIFY]</literal>
</screen>
    <para>Sauvegardez le nouveau <filename>.config</filename> et ensuite compiler le noyau.</para>
    <indexterm zone="rox-filer rox-filer-kernel">
      <primary sortas="d-rox-filer">rox-filer</primary>
    </indexterm>
  </sect2>
  <sect2 role="installation">
    <title>Installation de rox-filer</title>
    <para>Compile <application>rox-filer</application> avec les commandes suivantes
    </para>
<screen>
<userinput>cd ROX-Filer                                                        &amp;&amp;
sed -i 's:g_strdup(getenv("APP_DIR")):"/usr/share/rox":' src/main.c &amp;&amp;
mkdir build                        &amp;&amp;
pushd build                        &amp;&amp;
  ../src/configure LIBS="-lm -ldl" &amp;&amp;
  make                             &amp;&amp;
popd</userinput>
</screen>
    <para>Maintenant installez le en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>
<screen role="root">
<userinput>mkdir -p /usr/share/rox                              &amp;&amp;
cp -av Help Messages Options.xml ROX images style.css .DirIcon /usr/share/rox &amp;&amp;
cp -av ../rox.1 /usr/share/man/man1                  &amp;&amp;
cp -v  ROX-Filer /usr/bin/rox                        &amp;&amp;
chown -Rv root:root /usr/bin/rox /usr/share/rox      &amp;&amp;
cd /usr/share/rox/ROX/MIME                           &amp;&amp;
ln -sv text-x-{diff,patch}.png                       &amp;&amp;
ln -sv application-x-font-{afm,type1}.png            &amp;&amp;
ln -sv application-xml{,-dtd}.png                    &amp;&amp;
ln -sv application-xml{,-external-parsed-entity}.png &amp;&amp;
ln -sv application-{,rdf+}xml.png                    &amp;&amp;
ln -sv application-x{ml,-xbel}.png                   &amp;&amp;
ln -sv application-{x-shell,java}script.png          &amp;&amp;
ln -sv application-x-{bzip,xz}-compressed-tar.png    &amp;&amp;
ln -sv application-x-{bzip,lzma}-compressed-tar.png  &amp;&amp;
ln -sv application-x-{bzip-compressed-tar,lzo}.png   &amp;&amp;
ln -sv application-x-{bzip,xz}.png                   &amp;&amp;
ln -sv application-x-{gzip,lzma}.png                 &amp;&amp;
ln -sv application-{msword,rtf}.png</userinput>
</screen>
  </sect2>
  <sect2 role="commands">
    <title>Explications des commandes</title>
    <para><command>sed -i 's:g_strdup(getenv("APP_DIR")):"/usr/share/rox":'
    src/main.c</command>&nbsp;: Cette commande code en dur /usr/share/rox comme le répertoire 
    pour les fichiers privés de <application>rox-filer</application>. Sans cela
    sed rox a besoin de la variable d'environnement ${APP_DIR} pour être initialisé.</para>
    <para><command>ln -sv application-...</command>&nbsp;: Ces commandes recopient
    les icônes pour quelques types mime connus. Sans ces liens
    <application>rox-filer</application> affichera seulement l'icône par défaut "une goutte binaire inconnu".</para>
  </sect2>
  <sect2 role="configuration">
    <title>Configuration de rox-filer</title>
    <sect3><title>Information de configuration</title>
      <para>La plus grande partie de la configuration de <application>rox-filer</application> est
      réalisée en faisant des clics droits sur une fenêtre <application>rox-filer</application>
      et en choisissant "Options" dans le menu. Cela enregistrera les paramètres initialisés dans <filename
      class="directory">~/.config/rox.sourceforge.net</filename>.</para>
      <para>Une possibilité de <application>rox-filer</application> est que si il y a une fichier exécutable appelé
      <filename>AppRun</filename> dans un répertoire
      <application>rox-filer</application> lancera en premier <command>AppRun</command>
      avant d'ouvrir le dossier.</para>
      <para>Par exemple cela peut servir a, si vous avez un accès
      ssh vers un autre ordinateur (peut être un autre ordinateur
         de votre réseau local) avec ssh
      configuré pour un accès sans mot de passe et que vous avez installé
      <xref linkend="sshfs-fuse"/>, vous pouvez 
      utiliser AppRun pour monter l'ordinateur distant dans un
         dossier local en utilisant <command>sshfs</command>. Pour cet exemple, le script AppRun fonctionne
         si le dossier à le même nom que le nom d'hôte de l'ordinateur distant:</para>
<screen>
<userinput>cat &gt; /path/to/hostname/AppRun &lt;&lt; "HERE_DOC"
#!/bin/bash
MOUNT_PATH="${0%/*}"
HOST=${MOUNT_PATH##*/}
export MOUNT_PATH HOST
sshfs -o nonempty ${HOST}:/ ${MOUNT_PATH}
rox -x ${MOUNT_PATH}
HERE_DOC
chmod 755 /path/to/hostname/AppRun</userinput>
</screen>
       <para>
        Cela fonctionne correctement pour le montage, mais pour le démontage la commande
        <command>fusermount -u ${MOUNTPOINT}</command> est lancé. Vous pouvez l'initialiser
        comme votre commande de démontage par défaut dans vos préférences de rox, mais vous ne pourrez
        plus démonter des points de montage normaux (qui utilise
       umount). Un script est utilisé pour démonter les points de montage Fuse
        avec <command>fusermount -u ${MOUNTPOINT}</command> et le reste avec 
        <command>umount</command>. En tant qu'utilisateur 
        <systemitem class="username">root</systemitem>&nbsp;:
      </para>
<screen role="root">
<userinput>cat &gt; /usr/bin/myumount &lt;&lt; "HERE_DOC" &amp;&amp;
#!/bin/bash
sync
if mount | grep "${@}" | grep -q fuse
then fusermount -u "${@}"
else umount "${@}"
fi
HERE_DOC
chmod 755 /usr/bin/myumount</userinput>
</screen>
      <para>
        Maintenant, pour faire que Rox utilise ce script simple, ouvrez une fenêtre Rox, clic droit sur elle et
        choisissez Options dans le menu. Dans la liste de choix prenez
        "Action windows" et ensuite dans le coté droit, ou il est dit
        "Unmount command" changez <command>umount</command> par
        <command>myumount</command>.
      </para>
      <para>Si vous utilisez un environnement de bureau comme
      <application>Gnome</application> ou <application>KDE</application> vous devez créer
      un fichier <filename>rox.desktop</filename> pour que
      <application>rox-filer</application> apparaissent dans les panneaux de menu. En tant
      qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>
<screen role="root">
<userinput>ln -s ../rox/.DirIcon /usr/share/pixmaps/rox.png &amp;&amp;
mkdir -p /usr/share/applications &amp;&amp;
cat &gt; /usr/share/applications/rox.desktop &lt;&lt; "HERE_DOC"
[Desktop Entry]
Encoding=UTF-8
Type=Application
Name=Rox
Comment=The Rox File Manager
Icon=rox
Exec=rox
Categories=GTK;Utility;Application;System;Core;
StartupNotify=true
Terminal=false
HERE_DOC</userinput>
</screen>
    </sect3>
  </sect2>
  <sect2 role="content">
    <title>Contenu</title>
    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèque installée</segtitle>
      <segtitle>Répertoires installés</segtitle>
      <seglistitem>
        <seg>rox</seg>
	<seg>Aucune</seg>
        <seg>/usr/share/rox</seg>
      </seglistitem>
    </segmentedlist>
    <variablelist>
      <bridgehead renderas="sect3">Description courte</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      <varlistentry id="rox-filer-prog">
        <term><command>rox</command></term>
        <listitem>
          <para>est le gestionnaire de fichiers rox.</para>
          <indexterm zone="rox-filer rox-filer-prog">
            <primary sortas="b-rox-filer">rox-filer</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect2>
</sect1>
