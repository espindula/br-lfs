<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      BlueZ-5.60
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-r10.1-914+">
    <div class="navheader">
      <h4>
        Au-delà de Linux<sup>®</sup> From Scratch (édition <span class=
        "phrase">System V)</span> - Version r10.1-914+
      </h4>
      <h3>
        Chapitre&nbsp;12.&nbsp;Outils systèmes
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="autofs.html" title=
          "autofs-5.1.7">Précédent</a>
          <p>
            autofs-5.1.7
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="bubblewrap.html" title=
          "Bubblewrap-0.5.0">Suivant</a>
          <p>
            Bubblewrap-0.5.0
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="sysutils.html" title=
          "Chapitre&nbsp;12.&nbsp;Outils systèmes">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition System V) - Version r10.1-914+">
          Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="bluez" name="bluez"></a>BlueZ-5.60
      </h1>
      <div class="package" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Introduction à BlueZ
        </h2>
        <p>
          Le paquet <span class="application">BlueZ</span> contient la pile
          de protocole Bluetooth pour Linux.
        </p>
        <p>
          This package still needs to be checked.
        </p>
        <h3>
          Informations sur le paquet
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Téléchargement (HTTP)&nbsp;: <a class="ulink" href=
                "https://www.kernel.org/pub/linux/bluetooth/bluez-5.60.tar.xz">
                https://www.kernel.org/pub/linux/bluetooth/bluez-5.60.tar.xz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Téléchargement (FTP)&nbsp;: <a class="ulink" href=""></a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Somme de contrôle MD5 du téléchargement&nbsp;:
                4e1a35c08410354cf4969a46a8f5d4fd
              </p>
            </li>
            <li class="listitem">
              <p>
                Taille du téléchargement&nbsp;: 2.0&nbsp;Mo
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation de l'espace disque requis&nbsp;: 64&nbsp;Mo (plus
                76&nbsp;Mo pour les tests)
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation du temps de construction&nbsp;: 0,1 SBU (avec
                parallélisme = 4&nbsp;; plus 0,3 SBU pour les tests)
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Téléchargements supplémentaires
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Correctif requis&nbsp;: <a class="ulink" href=
                "https://www.linuxfromscratch.org/patches/blfs/svn/bluez-5.60-obexd_without_systemd-1.patch">
                https://www.linuxfromscratch.org/patches/blfs/svn/bluez-5.60-obexd_without_systemd-1.patch</a>
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Dépendances de BlueZ
        </h3>
        <h4>
          Requises
        </h4>
        <p class="required">
          <a class="xref" href="dbus.html" title=
          "dbus-1.12.20">dbus-1.12.20</a>, <a class="xref" href="glib2.html"
          title="GLib-2.68.4">GLib-2.68.4</a> et <a class="xref" href=
          "libical.html" title="libical-3.0.10">libical-3.0.10</a>
        </p>
        <h4>
          Facultatives
        </h4>
        <p class="optional">
          <a class="xref" href="python-modules.html#docutils" title=
          "docutils-0.17.1">docutils-0.17.1</a> (pour générer les pages de
          manuel)
        </p>
        <p class="usernotes">
          Notes utilisateur&nbsp;: <a class="ulink" href=
          "https://wiki.linuxfromscratch.org/blfs/wiki/bluez">https://wiki.linuxfromscratch.org/blfs/wiki/bluez</a>
        </p>
      </div>
      <div class="kernel" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          <a id="bluez-kernel" name="bluez-kernel"></a>Configuration du noyau
        </h2>
        <p>
          Si vous construisez ce paquet pour utiliser des appareils bluetooth
          (plutôt qu'en tant que dépendance), activez les options suivantes
          dans la configuration du noyau, ainsi que les options sous le
          paragraphe suivant si vous lancerez les tests, et recompilez le
          noyau si nécessaire&nbsp;:
        </p>
        <pre class="screen"><code class="literal">General Setup ---&gt;
  [*] Configure standard kernel features (expert users)               [CONFIG_EXPERT]
    [*] Enable timerfd() system call               [CONFIG_TIMERFD]
    [*] Enable eventfd() system call               [CONFIG_EVENTFD]

[*] Networking support ---&gt;                [CONFIG_NET]
  &lt;*/M&gt; Bluetooth subsystem support ---&gt;    [CONFIG_BT]
    &lt;*/M&gt; RFCOMM protocol support          [CONFIG_BT_RFCOMM]
    [*]   RFCOMM TTY support               [CONFIG_BT_RFCOMM_TTY]
    &lt;*/M&gt; BNEP protocol support            [CONFIG_BT_BNEP]
    [*]   Multicast filter support         [CONFIG_BT_BNEP_MC_FILTER]
    [*]   Protocol filter support          [CONFIG_BT_BNEP_PROTO_FILTER]
    &lt;*/M&gt; HIDP protocol support            [CONFIG_BT_HIDP]
        Bluetooth device drivers ---&gt;
          (Select the appropriate drivers for your Bluetooth hardware)

   &lt;*/M&gt; RF switch subsystem support ----   [CONFIG_RFKILL]

-*- Cryptographic API ---&gt;
   &lt;*/M*&gt; User-space cryptographic algorithm configuration         [CONFIG_CRYPTO_USER]
   &lt;*/M*&gt; User-space interface for hash algorithms                 [CONFIG_CRYPTO_USER_API_HASH]
   &lt;*/M*&gt; User-space interface for symmetric key cipher algorithms [CONFIG_CRYPTO_USER_API_SKCIPHER]
   &lt;*/M*&gt; MD5 digest algorithm                                     [CONFIG_CRYPTO_MD5]
   &lt;*/M*&gt; SHA1 digest algorithm                                    [CONFIG_CRYPTO_SHA1]

Security Options ---&gt;
  &lt;*/M*&gt; Diffie-Hellman operations on retained keys [CONFIG_KEY_DH_OPERATIONS]</code></pre>
      </div>
      <div class="installation" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Installation de BlueZ
        </h2>
        <p>
          Tout d'abord, corrigez un problème de construction du paquet avec
          Glibc-2.34 et supérieur&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">sed 's/pause(/bluez_&amp;/' -i profiles/audio/media.c</kbd></pre>
        <p>
          Maintenant, effectuez quelques changements requis pour les systèmes
          SystemV&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">patch -Npi -i ../bluez-5.60-obexd_without_systemd-1.patch</kbd></pre>
        <p>
          Installez <span class="application">BlueZ</span> en lançant les
          commandes suivantes&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">./configure --prefix=/usr         \
            --sysconfdir=/etc     \
            --localstatedir=/var  \
            --enable-library      \
            --disable-manpages    \
            --disable-systemd     &amp;&amp;
make</kbd></pre>
        <p>
          Pour tester les résultats, tapez&nbsp;: <strong class=
          "userinput"><code>make check</code></strong>.
        </p>
        <p>
          Maintenant, en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class="command">make install &amp;&amp;
ln -svf ../libexec/bluetooth/bluetoothd /usr/sbin</kbd></pre>
        <p>
          Installez le fichier principal de configuration en tant
          qu'utilisateur <code class="systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">install -v -dm755 /etc/bluetooth &amp;&amp;
install -v -m644 src/main.conf /etc/bluetooth/main.conf</kbd></pre>
        <p>
          Si vous le souhaitez, installez la documentation de l'API en tant
          qu'utilisateur <code class="systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">install -v -dm755 /usr/share/doc/bluez-5.60 &amp;&amp;
install -v -m644 doc/*.txt /usr/share/doc/bluez-5.60</kbd></pre>
      </div>
      <div class="commands" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Explication des commandes
        </h2>
        <p>
          <em class="parameter"><code>--disable-manpages</code></em>&nbsp;:
          ce paramètre désactive la génération des pages de manuel à cause de
          la dépendance à «&nbsp;rst2man&nbsp;» de docutils. Supprimez ce
          paramètre si vous avez installé <a class="xref" href=
          "python-modules.html#docutils" title=
          "docutils-0.17.1">docutils-0.17.1</a> et souhaitez générer les
          pages de manuel.
        </p>
        <p>
          <em class="parameter"><code>--enable-library</code></em>&nbsp;:: Ce
          paramètre active la construction de la bibliothèque de
          compatibilité <span class="application">BlueZ</span> 4 qui est
          requises par certaines applications.
        </p>
        <p>
          <em class="parameter"><code>--disable-systemd</code></em>&nbsp;: Ce
          paramètre est nécessaire car <span class=
          "application">systemd</span> ne fait pas partie de LFS/BLFS. Si
          vous utilisez systemd, enlevez ce paramètre.
        </p>
        <p>
          <span class="command"><strong>ln -svf
          ../libexec/bluetooth/bluetoothd /usr/sbin</strong></span>&nbsp;:
          Cette commande donne accès au démon bluetooth de façon plus
          cohérente.
        </p>
      </div>
      <div class="configuration" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Configuration de BlueZ
        </h2>
        <div class="sect3">
          <h3 class="sect3">
            <a id="bluez-config" name="bluez-config"></a>Fichiers de
            configuration
          </h3>
          <p>
            <code class="filename">/etc/bluetooth/main.conf</code> est
            installé automatiquement pendant l'installation. En supplément,
            il y a trois fichiers de configuration en plus.
            /etc/sysconfig/bluetooth est installé comme une partie des
            scripts de démarrage. De plus, vous pouvez éventuellement
            installer la suite en tant qu'utilisateur <code class=
            "systemitem">root</code>&nbsp;:
          </p>
          <pre class="root"><kbd class=
          "command">cat &gt; /etc/bluetooth/rfcomm.conf &lt;&lt; "EOF"</kbd>
<code class="literal"># Start rfcomm.conf
# Set up the RFCOMM configuration of the Bluetooth subsystem in the Linux kernel.
# Use one line per command
# See the rfcomm man page for options


# End of rfcomm.conf</code>
EOF</pre>
          <pre class="root"><kbd class=
          "command">cat &gt; /etc/bluetooth/uart.conf &lt;&lt; "EOF"</kbd>
<code class="literal"># Start uart.conf
# Attach serial devices via UART HCI to BlueZ stack
# Use one line per device
# See the hciattach man page for options

# End of uart.conf</code>
EOF</pre>
        </div>
        <div class="sect3">
          <h3 class="sect3">
            <a id="bluez-init" name="bluez-init"></a>Scripts de démarrage
          </h3>
          <p>
            Pour démarrer automatiquement le démon <span class=
            "command"><strong>bluetoothd</strong></span> quand le système est
            redémarré, installez le script de démarrage <code class=
            "filename">/etc/rc.d/init.d/bluetooth</code> depuis le paquet
            <a class="xref" href="../introduction/bootscripts.html" title=
            "Scripts de démarrage BLFS">blfs-bootscripts-20210810</a>.
          </p>
          <pre class="root"><kbd class=
          "command">make install-bluetooth</kbd></pre>
        </div>
      </div>
      <div class="content" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Contenu
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Programmes installés:</strong>
              <span class="segbody">bluemoon, bluetoothctl, bluetoothd (lien
              symbolique), btattach, btmon, hex2hcd, l2ping, l2test,
              mpris-proxy et rctest</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Bibliothèque installée:</strong>
              <span class="segbody">libbluetooth.so</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Répertoires installés:</strong>
              <span class="segbody">/etc/bluetooth,
              /usr/{include,libexec}/bluetooth et
              /usr/share/doc/bluez-5.60</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Descriptions courtes
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="bluemoon" name="bluemoon"></a><span class=
                    "term"><span class=
                    "command"><strong>bluemoon</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un utilitaire de configuration de Bluemoon
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="bluetoothctl" name="bluetoothctl"></a><span class=
                    "term"><span class=
                    "command"><strong>bluetoothctl</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est le programme de contrôle interactif de Bluetooth
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="bluetoothd" name="bluetoothd"></a><span class=
                    "term"><span class=
                    "command"><strong>bluetoothd</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est le démon Bluetooth
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="btmon" name="btmon"></a><span class=
                    "term"><span class=
                    "command"><strong>btmon</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    fournit l'accès à l'infrastructure de surveillance de
                    Bluetooth pour lire les traces HCI
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="hex2hcd" name="hex2hcd"></a><span class=
                    "term"><span class=
                    "command"><strong>hex2hcd</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est utilisé pour convertir un fichier utilisé par les
                    périphériques Broadcom au format hcd (Broadcom bluetooth
                    firmware)
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="l2ping" name="l2ping"></a><span class=
                    "term"><span class=
                    "command"><strong>l2ping</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est utilisé pour envoyer des demandes d'écho L2CAP à
                    l'adresse MAC Bluetooth donné en notation hexadécimale
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="l2test" name="l2test"></a><span class=
                    "term"><span class=
                    "command"><strong>l2test</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est le programme de tests de L2CAP
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="rctest" name="rctest"></a><span class=
                    "term"><span class=
                    "command"><strong>rctest</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est utilisé pour tester les communications RFCOMM de la
                    pile Bluetooth
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="libbluetooth" name="libbluetooth"></a><span class=
                    "term"><code class=
                    "filename">libbluetooth.so</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    contient les fonctions de l'API de <span class=
                    "application">BlueZ</span> 4
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="autofs.html" title=
          "autofs-5.1.7">Précédent</a>
          <p>
            autofs-5.1.7
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="bubblewrap.html" title=
          "Bubblewrap-0.5.0">Suivant</a>
          <p>
            Bubblewrap-0.5.0
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="sysutils.html" title=
          "Chapitre&nbsp;12.&nbsp;Outils systèmes">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition System V) - Version r10.1-914+">
          Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
