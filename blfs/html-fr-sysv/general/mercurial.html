<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      Mercurial-5.8.1
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-r10.1-914+">
    <div class="navheader">
      <h4>
        Au-delà de Linux<sup>®</sup> From Scratch (édition <span class=
        "phrase">System V)</span> - Version r10.1-914+
      </h4>
      <h3>
        Chapitre&nbsp;13.&nbsp;Programmation
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="lua52.html" title="Lua-5.2.4">Précédent</a>
          <p>
            Lua-5.2.4
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="nasm.html" title="NASM-2.15.05">Suivant</a>
          <p>
            NASM-2.15.05
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="prog.html" title=
          "Chapitre&nbsp;13.&nbsp;Programmation">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition System V) - Version r10.1-914+">
          Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="mercurial" name="mercurial"></a>Mercurial-5.8.1
      </h1>
      <div class="package" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Introduction à Mercurial
        </h2>
        <p>
          <span class="application">Mercurial</span> est un outil de gestion
          de contrôle des sources distribuée similaire à <span class=
          "application">Git</span> et <span class=
          "application">Bazaar</span>. <span class=
          "application">Mercurial</span> est écrit en <span class=
          "application">Python</span> et il est utilisé par des projets tels
          que Mozilla pour Firefox et Thunderbird.
        </p>
        <p>
          This package still needs to be checked.
        </p>
        <h3>
          Informations sur le paquet
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Téléchargement (HTTP)&nbsp;: <a class="ulink" href=
                "https://www.mercurial-scm.org/release/mercurial-5.8.1.tar.gz">
                https://www.mercurial-scm.org/release/mercurial-5.8.1.tar.gz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Téléchargement (FTP)&nbsp;: <a class="ulink" href=""></a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Somme de contrôle MD5 du téléchargement&nbsp;:
                5c7785c9697fb9928df4dc354dbab458
              </p>
            </li>
            <li class="listitem">
              <p>
                Taille du téléchargement&nbsp;: 7.6&nbsp;Mo
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation de l'espace disque requis&nbsp;: 105 Mo (avec la
                doc, plus 1,5 Go pour les tests)
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation du temps de construction&nbsp;: 0,4 SBU (avec la
                doc, plus 20 SBU pour les tests avec -j4)
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Dépendances de Mercurial
        </h3>
        <h4>
          Facultatives
        </h4>
        <p class="optional">
          <a class="xref" href="python-modules.html#docutils" title=
          "docutils-0.17.1">docutils-0.17.1</a> (requis pour construire la
          documentation), <a class="xref" href="git.html" title=
          "Git-2.33.0">git-2.33.0</a>, <a class="xref" href=
          "../postlfs/gnupg.html" title="GnuPG-2.2.29">GnuPG-2.2.29</a>
          (<span class="command"><strong>gpg2</strong></span> avec les
          liaisons Python), <a class="xref" href="../postlfs/openssh.html"
          title="OpenSSH-8.7p1">OpenSSH-8.7p1</a> (exécution, pour accéder
          aux dépôts ssh://...), <a class="xref" href=
          "python-modules.html#pygments" title=
          "Pygments-2.10.0">Pygments-2.10.0</a>, <a class="xref" href=
          "rust.html" title="Rustc-1.52.0">rustc-1.52.0</a>, <a class="xref"
          href="subversion.html" title=
          "Subversion-1.14.1">Subversion-1.14.1</a> (avec les liaisons
          Python), <a class="ulink" href=
          "https://launchpad.net/bzr">Bazaar</a>, <a class="ulink" href=
          "http://www.nongnu.org/cvs/">CVS</a>, <a class="ulink" href=
          "https://pypi.python.org/pypi/pyflakes">pyflakes</a> et <a class=
          "ulink" href="https://www.pyopenssl.org/en/stable/">pyOpenSSL</a>
        </p>
        <p class="usernotes">
          Notes utilisateur&nbsp;: <a class="ulink" href=
          "https://wiki.linuxfromscratch.org/blfs/wiki/mercurial">https://wiki.linuxfromscratch.org/blfs/wiki/mercurial</a>
        </p>
      </div>
      <div class="installation" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Installation de Mercurial
        </h2>
        <p>
          Commencez par forcer le système de construction à utiliser Python
          3&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">export PYTHON=python3</kbd></pre>
        <p>
          Construisez <span class="application">Mercurial</span> en lançant
          la commande suivante&nbsp;:
        </p>
        <pre class="userinput"><kbd class="command">make build</kbd></pre>
        <p>
          Pour construire la documentation (exige <a class="xref" href=
          "python-modules.html#docutils" title=
          "docutils-0.17.1">docutils-0.17.1</a>), lancez&nbsp;:
        </p>
        <pre class="userinput"><kbd class="command">make doc</kbd></pre>
        <p>
          Pour lancer la suite de tests, lancez&nbsp;:
        </p>
        <pre class="userinput"><kbd class="command">TESTFLAGS="-j<em class=
        "replaceable"><code>&lt;N&gt;</code></em> --tmpdir tmp --blacklist blacklists/fsmonitor --blacklist blacklists/linux-vfat" make check</kbd></pre>
        <p>
          où <em class="replaceable"><code>&lt;N&gt;</code></em> est un
          nombre entier entre un et le nombre de (cœurs × threads) inclus.
          Afin de pouvoir investiguer un test échouant en particulier,
          utilisez le script <span class=
          "command"><strong>run-tests.py</strong></span>. Pour voir les
          presque quarante options, dont certaines très utiles, lancez
          <span class="command"><strong>tests/run-tests.py
          --help</strong></span>. Avec la commande suivante, vous exécuterez
          seulement les tests précédemment échoués&nbsp;:
        </p>
        <pre class="userinput"><kbd class="command">pushd tests  &amp;&amp;
  rm -rf tmp &amp;&amp;
  ./run-tests.py --tmpdir tmp test-gpg.t
popd</kbd></pre>
        <p>
          Normalement les échecs précédents seront confirmés. Cependant, si
          vous ajoutez l'option <code class="option">--debug</code> avant
          <code class="option">--tmpdir</code>, et que vous lancez de
          nouveau, certains échecs disparaissent, ce qui semble être un
          problème avec la suite de tests. Si cela arrive, normalement, à
          partir d'ici, il n'y aura plus de tels échecs que vous utilisiez
          l'option debug ou non.
        </p>
        <p>
          Une option intéressante est <code class="option">--time</code>, qui
          génère à la fin de l'exécution de la suite de tests un tableau avec
          tous les tests exécutés et leur temps respectifs de début, fin,
          utilisateur, système et réel. Remarquez que les options peuvent
          être utilisés avec <span class="command"><strong>make
          check</strong></span>, en les ajoutant à la variable
          d'environnement <code class="envar">TESTFLAGS</code>.
        </p>
        <p>
          Installez <span class="application">Mercurial</span> en lançant les
          commandes suivantes (en tant qu'utilisateur <code class=
          "systemitem">root</code>)&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">make PREFIX=/usr install-bin</kbd></pre>
        <p>
          Si vous avez construit la documentation, installez-la en lançant la
          commande suivante (en tant qu'utilisateur <code class=
          "systemitem">root</code>)&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">make PREFIX=/usr install-doc</kbd></pre>
        <p>
          Ensuite, nettoyez la variable d'environnement précédemment
          initialisée&nbsp;:
        </p>
        <pre class="userinput"><kbd class="command">unset PYTHON</kbd></pre>
        <p>
          Après l'installation, vous devriez pouvoir correctement lancer deux
          tests très rapides et simples. Le premier demande un peu de
          configuration&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">cat &gt;&gt; ~/.hgrc &lt;&lt; "EOF"
<code class="literal">[ui]
username = <em class=
"replaceable"><code>&lt;user_name&gt; &lt;user@mail&gt;</code></em></code>
EOF</kbd></pre>
        <p>
          où vous devez remplacer &lt;user_name&gt; et &lt;your@mail&gt;
          (mail est facultatif et peut être omis). Une fois l'identité de
          l'utilisateur définie, lancez <span class="command"><strong>hg
          debuginstall</strong></span> et quelques lignes seront affichées,
          la dernière affichant «&nbsp;no problems detected&nbsp;». Un autre
          test rapide et simple est juste <span class=
          "command"><strong>hg</strong></span>, qui doit afficher les
          commandes basiques qui peuvent être utilisée avec <span class=
          "command"><strong>hg</strong></span>.
        </p>
      </div>
      <div class="configuration" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Configuration de Mercurial
        </h2>
        <div class="sect3">
          <h3 class="sect3">
            <a id="mercurial-config" name="mercurial-config"></a>Fichiers de
            configuration
          </h3>
          <p>
            <code class="filename">/etc/mercurial/hgrc</code> et <code class=
            "filename">~/.hgrc</code>
          </p>
          <p>
            La grande majorité des extensions est désactivée par défaut.
            Lancez <span class="command"><strong>hg help
            extensions</strong></span> si vous souhaitez en activer une, par
            exemple lorsque vous investiguez des tests échoués. Vous
            obtiendrez la liste des extensions activées et désactivées, et
            plus d'information, comme comment les activer ou les désactiver
            avec les fichiers de configuration.
          </p>
          <p>
            Si vous avez installé les <a class="xref" href=
            "../postlfs/make-ca.html" title="make-ca-1.7">make-ca-1.7</a> et
            que vous souhaitez que <span class="application">Mercurial</span>
            les utilise, lancez, en tant qu'utilisateur <code class=
            "systemitem">root</code>&nbsp;:
          </p>
          <pre class="root"><kbd class=
          "command">install -v -d -m755 /etc/mercurial &amp;&amp;
cat &gt; /etc/mercurial/hgrc &lt;&lt; "EOF"
<code class="literal">[web]
cacerts = /etc/pki/tls/certs/ca-bundle.crt</code>
EOF</kbd></pre>
        </div>
      </div>
      <div class="content" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Contenu
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Programmes installés:</strong>
              <span class="segbody">hg</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Bibliothèques installées:</strong>
              <span class="segbody">plusieurs modules internes dans
              /usr/lib/python3.9/site-packages/mercurial</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Répertoires installés:</strong>
              <span class="segbody">/etc/mercurial et
              /usr/lib/python3.9/site-packages/{hgdemandimport,hgext,hgext3rd,mercurial}</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Descriptions courtes
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="hg" name="hg"></a><span class="term"><span class=
                    "command"><strong>hg</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est le système de contrôle de version mercurial
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="lua52.html" title="Lua-5.2.4">Précédent</a>
          <p>
            Lua-5.2.4
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="nasm.html" title="NASM-2.15.05">Suivant</a>
          <p>
            NASM-2.15.05
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="prog.html" title=
          "Chapitre&nbsp;13.&nbsp;Programmation">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition System V) - Version r10.1-914+">
          Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
