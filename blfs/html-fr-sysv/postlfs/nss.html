<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      NSS-3.69
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-r10.1-914+">
    <div class="navheader">
      <h4>
        Au-delà de Linux<sup>®</sup> From Scratch (édition <span class=
        "phrase">System V)</span> - Version r10.1-914+
      </h4>
      <h3>
        Chapitre&nbsp;4.&nbsp;Sécurité
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="nettle.html" title=
          "Nettle-3.7.3">Précédent</a>
          <p>
            Nettle-3.7.3
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="openssh.html" title=
          "OpenSSH-8.7p1">Suivant</a>
          <p>
            OpenSSH-8.7p1
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="security.html" title=
          "Chapitre&nbsp;4.&nbsp;Sécurité">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition System V) - Version r10.1-914+">
          Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="nss" name="nss"></a>NSS-3.69
      </h1>
      <div class="package" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Introduction à NSS
        </h2>
        <p>
          Le paquet Network Security Services (services de sécurité réseau)
          (<span class="application">NSS</span>) est un ensemble de
          bibliothèques conçues pour supporter le développement en
          plate-forme croisée d'applications et de serveurs sécurisés. Les
          applications construites avec NSS peuvent supporter SSL v2 et v3,
          TLS, les certificats PKCS #5, PKCS #7, PKCS #11, PKCS #12, S/MIME,
          X.509 v3 et d'autres standards de sécurité. C'est utile pour
          implémenter SSL et S/MIME ou d'autres standards de sécurité sur
          Internet dans une application.
        </p>
        <p>
          This package still needs to be checked.
        </p>
        <h3>
          Informations sur le paquet
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Téléchargement (HTTP)&nbsp;: <a class="ulink" href=
                "https://archive.mozilla.org/pub/security/nss/releases/NSS_3_69_RTM/src/nss-3.69.tar.gz">
                https://archive.mozilla.org/pub/security/nss/releases/NSS_3_69_RTM/src/nss-3.69.tar.gz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Téléchargement (FTP)&nbsp;: <a class="ulink" href=""></a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Somme de contrôle MD5 du téléchargement&nbsp;:
                df451e99d09589da6c3d4f103de877bc
              </p>
            </li>
            <li class="listitem">
              <p>
                Taille du téléchargement&nbsp;: 79&nbsp;Mo
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation de l'espace disque requis&nbsp;: 305&nbsp;Mo (plus
                122&nbsp;Mo pour les tests)
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation du temps de construction&nbsp;: 5,8&nbsp;SBU (avec
                parallélisme = 4, plus 17&nbsp;SBU pour les tests)
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Téléchargements supplémentaires
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Correctif requis&nbsp;: <a class="ulink" href=
                "https://www.linuxfromscratch.org/patches/blfs/svn/nss-3.69-standalone-1.patch">
                https://www.linuxfromscratch.org/patches/blfs/svn/nss-3.69-standalone-1.patch</a>
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Dépendances de NSS
        </h3>
        <h4>
          Requises
        </h4>
        <p class="required">
          <a class="xref" href="../general/nspr.html" title=
          "NSPR-4.32">NSPR-4.32</a>
        </p>
        <h4>
          Recommandées
        </h4>
        <p class="recommended">
          <a class="xref" href="../server/sqlite.html" title=
          "SQLite-3.36.0">SQLite-3.36.0</a> et <a class="xref" href=
          "p11-kit.html" title="p11-kit-0.24.0">p11-kit-0.24.0</a>
          (exécution)
        </p>
        <p class="usernotes">
          Notes utilisateur&nbsp;: <a class="ulink" href=
          "https://wiki.linuxfromscratch.org/blfs/wiki/nss">https://wiki.linuxfromscratch.org/blfs/wiki/nss</a>
        </p>
      </div>
      <div class="installation" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Installation de NSS
        </h2>
        <p>
          Installez <span class="application">NSS</span> en lançant les
          commandes suivantes&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">patch -Np1 -i ../nss-3.69-standalone-1.patch &amp;&amp;

cd nss &amp;&amp;

make BUILD_OPT=1                  \
  NSPR_INCLUDE_DIR=/usr/include/nspr  \
  USE_SYSTEM_ZLIB=1                   \
  ZLIB_LIBS=-lz                       \
  NSS_ENABLE_WERROR=0                 \
  $([ $(uname -m) = x86_64 ] &amp;&amp; echo USE_64=1) \
  $([ -f /usr/include/sqlite3.h ] &amp;&amp; echo NSS_USE_SYSTEM_SQLITE=1)</kbd></pre>
        <p>
          Pour lancer les tests, exécutez les commandes suivantes (1 test est
          connu pour échouer)&nbsp;:
        </p>
        <pre class="userinput"><kbd class="command">cd tests &amp;&amp;
HOST=localhost DOMSUF=localdomain ./all.sh
cd ../</kbd></pre>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            Quelques informations sur les tests&nbsp;:
          </p>
          <div class="itemizedlist">
            <ul class="compact">
              <li class="listitem">
                <p>
                  HOST=localhost et DOMSUF=localdomain sont requis. Sans ces
                  variables, un nom de domaine pleinement qualifié doit être
                  spécifié et cette manière générique de faire devrait
                  fonctionner pour tout le monde.
                </p>
              </li>
              <li class="listitem">
                <p>
                  Les tests prennent énormément de temps pour terminer. Si
                  vous le souhaitez, il y a des information dans le script
                  all.sh pour lancer des sous-ensembles de la suite de tests
                  complète.
                </p>
              </li>
              <li class="listitem">
                <p>
                  Lorsque vous interrompez les tests, la suite de tests
                  n'arrive pas à arrêter les serveurs de tests qu'elle a
                  lancés. Cela conduit à une boucle infinie dans les tests où
                  la suite de tests essaye de tuer un serveur qui n'existe
                  plus parce qu'elle récupère le mauvais PID.
                </p>
              </li>
              <li class="listitem">
                <p>
                  Les résultats de la suite de test (au format HTML !) se
                  trouvent dans
                  ../../test_results/security/localhost.1/results.html
                </p>
              </li>
            </ul>
          </div>
        </div>
        <p>
          Maintenant, en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">cd ../dist                                                          &amp;&amp;

install -v -m755 Linux*/lib/*.so              /usr/lib              &amp;&amp;
install -v -m644 Linux*/lib/{*.chk,libcrmf.a} /usr/lib              &amp;&amp;

install -v -m755 -d                           /usr/include/nss      &amp;&amp;
cp -v -RL {public,private}/nss/*              /usr/include/nss      &amp;&amp;
chmod -v 644                                  /usr/include/nss/*    &amp;&amp;

install -v -m755 Linux*/bin/{certutil,nss-config,pk12util} /usr/bin &amp;&amp;

install -v -m644 Linux*/lib/pkgconfig/nss.pc  /usr/lib/pkgconfig</kbd></pre>
      </div>
      <div class="commands" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Explication des commandes
        </h2>
        <p>
          <em class="parameter"><code>BUILD_OPT=1</code></em>&nbsp;: Cette
          variable est passée à <span class=
          "command"><strong>make</strong></span> pour que la construction
          s'effectue sans les symboles de débogage intégré dans les binaires
          et que les optimisations du compilateur par défaut soient
          utilisées.
        </p>
        <p>
          <em class=
          "parameter"><code>NSPR_INCLUDE_DIR=/usr/include/nspr</code></em>&nbsp;:
          Cette commande initialise l'emplacement des entêtes de nspr.
        </p>
        <p>
          <em class="parameter"><code>USE_SYSTEM_ZLIB=1</code></em>&nbsp;:
          Cette option est passée à <span class=
          "command"><strong>make</strong></span> pour garantir que la
          bibliothèque <code class="filename">libssl3.so</code> est liée au
          <span class="application">zlib</span> du système au lieu de la
          version incluse dans l'arborescence.
        </p>
        <p>
          <em class="parameter"><code>ZLIB_LIBS=-lz</code></em>&nbsp;: Cette
          commande fournit le drapeau nécessaire pour lier au système
          <span class="application">zlib</span>.
        </p>
        <p>
          <span class="command"><strong>$([ $(uname -m) = x86_64 ] &amp;&amp;
          echo USE_64=1)</strong></span>&nbsp;: L'option <em class=
          "parameter"><code>USE_64=1</code></em> est <span class=
          "emphasis"><em>exigée sur un x86_64</em></span>, sans quoi
          <span class="command"><strong>make</strong></span> essaiera de
          créer des objets 32 bits (et échouera). Le test [ $(uname -m) =
          x86_64 ] garantit que cela n'aura pas d'effet sur un système 32
          bits.
        </p>
        <p>
          <span class="command"><strong>([ -f /usr/include/sqlite3.h ]
          &amp;&amp; echo NSS_USE_SYSTEM_SQLITE=1)</strong></span>&nbsp;:
          Ceci teste si <span class="application">sqlite</span> est installé
          et, si tel est le cas, il passe (<span class=
          "command"><strong>echo</strong></span>) l'option
          NSS_USE_SYSTEM_SQLITE=1 à <span class=
          "command"><strong>make</strong></span> pour que <code class=
          "filename">libsoftokn3.so</code> se lie à la version installée sur
          le système de sqlite.
        </p>
        <p>
          <code class="option">NSS_DISABLE_GTESTS=1</code>&nbsp;: si vous
          n'avez pas besoin de lancer la suite de tests NSS, ajoutez cette
          option à la commande <span class=
          "command"><strong>make</strong></span>, pour éviter la compilation
          des tests et gagner du temps de construction.
        </p>
      </div>
      <div class="configuration" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Configuration de NSS
        </h2>
        <p>
          Si <a class="xref" href="p11-kit.html" title=
          "p11-kit-0.24.0">p11-kit-0.24.0</a> est installé, le module de
          confiance <span class="application">p11-kit</span> (<code class=
          "filename">/usr/lib/libp11-kit.so</code>) peut être utilisé comme
          remplaçant de <code class="filename">/usr/lib/libnssckbi.so</code>
          pour rendre les CA du système disponibles de manière transparente
          pour les applications conscientes de <span class=
          "application">NSS</span>, plutôt qu'une liste statique fournie par
          <code class="filename">/usr/lib/libnssckbi.so</code>. En tant
          qu'utilisateur <code class="systemitem">root</code>, exécutez les
          commandes suivantes&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">ln -sfv ./pkcs11/p11-kit-trust.so /usr/lib/libnssckbi.so</kbd></pre>
        <p>
          De plus, pour les applications dépendantes qui n'utilisent pas la
          base interne (<code class=
          "filename">/usr/lib/libnssckbi.so</code>), le script <code class=
          "filename">/usr/sbin/make-ca</code> inclus dans la page <a class=
          "xref" href="make-ca.html" title="make-ca-1.7">make-ca-1.7</a>,
          générera une base de données NSS pour le système entier avec le
          paramètre <em class="parameter"><code>-n</code></em>, ou en
          modifiant le fichier <code class=
          "filename">/etc/make-ca.conf</code>.
        </p>
      </div>
      <div class="content" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Contenu
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Programmes installés:</strong>
              <span class="segbody">certutil, nss-config et pk12util</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Bibliothèques installées:</strong>
              <span class="segbody">libcrmf.a, libfreebl3.so,
              libfreeblpriv3.so, libnss3.so, libnssckbi.so,
              libnssckbi-testlib.so, libnssdbm3.so, libnsssysinit.so,
              libnssutil3.so, libpkcs11testmodule.so, libsmime3.so,
              libsoftokn3.so et libssl3.so</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Répertoires installés:</strong>
              <span class="segbody">/usr/include/nss</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Descriptions courtes
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="certutil" name="certutil"></a><span class=
                    "term"><span class=
                    "command"><strong>certutil</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est l'outil de base de données de certificats de Mozilla.
                    C'est un outil en ligne de commande qui peut modifier les
                    fichiers de base de données cert8.db et key3.db de
                    Netscape Communicator. Il peut aussi lister, générer,
                    modifier ou effacer les certificats d'un fichier cert8.db
                    et créer ou modifier le mot de passe, générer de nouveaux
                    trousseaux de clés publiques et privées, afficher le
                    contenu de la base de données des clés ou effacer des
                    trousseaux de clés du fichier key3.db
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="nss-config" name="nss-config"></a><span class=
                    "term"><span class=
                    "command"><strong>nss-config</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est utilisé pour déterminer les réglages de la
                    bibliothèque NSS de la version installée
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="pk12util" name="pk12util"></a><span class=
                    "term"><span class=
                    "command"><strong>pk12util</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un outil pour importer des certificats et des clés
                    depuis des fichiers pkcs #12 en NSS ou pour les exporter.
                    Il peut aussi lister les certificats et les clés dans de
                    tels fichiers
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="nettle.html" title=
          "Nettle-3.7.3">Précédent</a>
          <p>
            Nettle-3.7.3
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="openssh.html" title=
          "OpenSSH-8.7p1">Suivant</a>
          <p>
            OpenSSH-8.7p1
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="security.html" title=
          "Chapitre&nbsp;4.&nbsp;Sécurité">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition System V) - Version r10.1-914+">
          Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
