<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      Linux-PAM-1.5.1
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-r10.1-914+">
    <div class="navheader">
      <h4>
        Au-delà de Linux<sup>®</sup> From Scratch (édition <span class=
        "phrase">System V)</span> - Version r10.1-914+
      </h4>
      <h3>
        Chapitre&nbsp;4.&nbsp;Sécurité
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="libcap.html" title=
          "libcap-2.53 avec PAM">Précédent</a>
          <p>
            libcap-2.53 avec PAM
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="liboauth.html" title=
          "liboauth-1.0.3">Suivant</a>
          <p>
            liboauth-1.0.3
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="security.html" title=
          "Chapitre&nbsp;4.&nbsp;Sécurité">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition System V) - Version r10.1-914+">
          Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="linux-pam" name="linux-pam"></a>Linux-PAM-1.5.1
      </h1>
      <div class="package" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Introduction à Linux PAM
        </h2>
        <p>
          Le paquet <span class="application">Linux-PAM</span> contient des
          Pluggable Authentication Modules (modules d'authentification
          connectables). C'est utile pour permettre à l'administrateur
          système local de choisir la façon dont s'authentifient les
          utilisateurs des applications.
        </p>
        <p>
          This package still needs to be checked.
        </p>
        <h3>
          Informations sur le paquet
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Téléchargement (HTTP)&nbsp;: <a class="ulink" href=
                "https://github.com/linux-pam/linux-pam/releases/download/v1.5.1/Linux-PAM-1.5.1.tar.xz">
                https://github.com/linux-pam/linux-pam/releases/download/v1.5.1/Linux-PAM-1.5.1.tar.xz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Téléchargement (FTP)&nbsp;: <a class="ulink" href=""></a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Somme de contrôle MD5 du téléchargement&nbsp;:
                155f2a31d07077b2c63a1f135876c31b
              </p>
            </li>
            <li class="listitem">
              <p>
                Taille du téléchargement&nbsp;: 952&nbsp;Ko
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation de l'espace disque requis&nbsp;: 37&nbsp;Mo (avec
                les tests)
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation du temps de construction&nbsp;: 0.4&nbsp;SBU (avec
                les tests)
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Téléchargements supplémentaires
        </h3>
        <div class="itemizedlist">
          <p class="title">
            <strong>Documentation facultative</strong>
          </p>
          <ul class="compact">
            <li class="listitem">
              <p>
                Téléchargement (HTTP)&nbsp;: <a class="ulink" href=
                "https://github.com/linux-pam/linux-pam/releases/download/v1.5.1/Linux-PAM-1.5.1-docs.tar.xz">
                https://github.com/linux-pam/linux-pam/releases/download/v1.5.1/Linux-PAM-1.5.1-docs.tar.xz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Somme de contrôle MD5 du téléchargement&nbsp;:
                eb03b8191fc886780411054115866ee2
              </p>
            </li>
            <li class="listitem">
              <p>
                Taille du téléchargement 432&nbsp;Ko
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Dépendances de Linux PAM
        </h3>
        <h4>
          Facultatives
        </h4>
        <p class="optional">
          <a class="xref" href="../server/db.html" title=
          "Berkeley DB-5.3.28">Berkeley DB-5.3.28</a>, <a class="xref" href=
          "../basicnet/libnsl.html" title="libnsl-1.3.0">libnsl-1.3.0</a>,
          <a class="xref" href="../basicnet/libtirpc.html" title=
          "libtirpc-1.3.2">libtirpc-1.3.2</a>, <a class="ulink" href=
          "https://github.com/linux-audit/audit-userspace">libaudit</a> et
          <a class="ulink" href="http://www.prelude-siem.org">Prelude</a>
        </p>
        <h4>
          Facultatifs (pour reconstruire la documentation)
        </h4>
        <p class="optional">
          <a class="xref" href="../pst/docbook.html" title=
          "docbook-xml-4.5">docbook-xml-4.5</a>, <a class="xref" href=
          "../pst/docbook-xsl.html" title=
          "docbook-xsl-nons-1.79.2">docbook-xsl-1.79.2</a>, <a class="xref"
          href="../pst/fop.html" title="fop-2.6">fop-2.6</a>, <a class="xref"
          href="../general/libxslt.html" title=
          "libxslt-1.1.34">libxslt-1.1.34</a> et soit <a class="xref" href=
          "../basicnet/lynx.html" title=
          "Lynx-2.8.9rel.1">Lynx-2.8.9rel.1</a>, soit <a class="ulink" href=
          "http://w3m.sourceforge.net/">W3m</a>
        </p>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p class="required">
            <a class="xref" href="shadow.html" title=
            "Shadow-4.9">Shadow-4.9</a> <span class="phrase">doit être
            réinstallé</span> après avoir installé et configuré <span class=
            "application">Linux PAM</span>.
          </p>
          <p class="recommended">
            Avec Linux-PAM-1.4.0 et supérieur, le module pam_cracklib n'est
            pas installé par défaut. Pour assurer des mots de passe forts, il
            est recommandé d'utiliser <a class="xref" href=
            "libpwquality.html" title=
            "libpwquality-1.4.4">libpwquality-1.4.4</a>.
          </p>
        </div>
        <p class="usernotes">
          Notes utilisateur&nbsp;: <a class="ulink" href=
          "https://wiki.linuxfromscratch.org/blfs/wiki/linux-pam">https://wiki.linuxfromscratch.org/blfs/wiki/linux-pam</a>
        </p>
      </div>
      <div class="installation" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Installation de Linux PAM
        </h2>
        <p>
          Commencez par éviter l'installation d'un fichier systemd
          inutile&nbsp;:
        </p>
        <pre class="userinput"><kbd class="command">sed -e /service_DATA/d \
    -i modules/pam_namespace/Makefile.am &amp;&amp;
autoreconf</kbd></pre>
        <p>
          Si vous avez téléchargé la documentation, déballez l'archive tar en
          exécutant la commande suivante.
        </p>
        <pre class="userinput"><kbd class=
        "command">tar -xf ../Linux-PAM-1.5.1-docs.tar.xz --strip-components=1</kbd></pre>
        <p>
          Si vous voulez plutôt regénérer la documentation, corrigez le
          script <span class="command"><strong>configure</strong></span> pour
          qu'il détecte lynx s'il est installé&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">sed -e 's/dummy elinks/dummy lynx/'                                    \
    -e 's/-no-numbering -no-references/-force-html -nonumbers -stdin/' \
    -i configure</kbd></pre>
        <p>
          Installez <span class="application">Linux PAM</span> en lançant les
          commandes suivantes&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">./configure --prefix=/usr                        \
            --sysconfdir=/etc                     \
            --libdir=/usr/lib                      \
            --enable-securedir=/usr/lib/security    \
            --docdir=/usr/share/doc/Linux-PAM-1.5.1 &amp;&amp;
make</kbd></pre>
        <p>
          Pour tester les résultats, le fichier de configuration suivant
          <code class="filename">/etc/pam.d/other</code> doit exister.
        </p>
        <div class="admon caution">
          <img alt="[Attention]" src="../images/caution.png" />
          <h3>
            Réinstallation ou mise à jour de Linux PAM
          </h3>
          <p>
            Si vous avez un système avec Linux PAM installé et en
            fonctionnement, soyez attentif quand vous modifiez les fichiers
            dans <code class="filename">/etc/pam.d</code>, car votre système
            peut devenir totalement inutilisable. Si vous souhaitez lancer
            les tests, vous n'avez pas besoin de créer un autre fichier
            <code class="filename">/etc/pam.d/other</code>. Le fichier
            installé peut être utilisé pour cela.
          </p>
          <p>
            Vous devez aussi être conscient que <span class=
            "command"><strong>make install</strong></span> écrase les
            fichiers de configuration dans <code class=
            "filename">/etc/security</code> ainsi que dans <code class=
            "filename">/etc/environment</code>. Dans le cas où vous avez
            modifié ces fichiers, soyez certain de les avoir sauvegardés.
          </p>
        </div>
        <p>
          Pour une première installation, créez le fichier de configuration
          en tapant les commandes suivantes en tant qu'utilisateur
          <code class="systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">install -v -m755 -d /etc/pam.d &amp;&amp;

cat &gt; /etc/pam.d/other &lt;&lt; "EOF"
<code class="literal">auth     required       pam_deny.so
account  required       pam_deny.so
password required       pam_deny.so
session  required       pam_deny.so</code>
EOF</kbd></pre>
        <p>
          Maintenant lancez les tests en exécutant <span class=
          "command"><strong>make check</strong></span>. Assurez-vous qu’il
          n’y a pas d'erreurs produites par les tests avant de continuer
          l'installation. Notez que les tests sont très longs. Il peut être
          utile de rediriger la sortie vers un fichier de log pour pouvoir
          l'inspecter consciencieusement.
        </p>
        <p>
          Seulement dans le cas d'une première installation, supprimez le
          fichier de configuration créé plus haut en lançant la commande
          suivante en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">rm -fv /etc/pam.d/other</kbd></pre>
        <p>
          Maintenant, en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class="command">make install &amp;&amp;
chmod -v 4755 /usr/sbin/unix_chkpwd</kbd></pre>
      </div>
      <div class="commands" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Explication des commandes
        </h2>
        <p>
          <em class=
          "parameter"><code>--enable-securedir=/usr/lib/security</code></em>&nbsp;:
          ce paramètre initialise l'emplacement pour les modules <span class=
          "application">PAM</span>.
        </p>
        <p>
          <code class="option">--disable-regenerate-docu</code>&nbsp;: Si les
          dépendances requises (<a class="xref" href="../pst/docbook.html"
          title="docbook-xml-4.5">docbook-xml-4.5</a>, <a class="xref" href=
          "../pst/docbook-xsl.html" title=
          "docbook-xsl-nons-1.79.2">docbook-xsl-1.79.2</a>, <a class="xref"
          href="../general/libxslt.html" title=
          "libxslt-1.1.34">libxslt-1.1.34</a> et <a class="xref" href=
          "../basicnet/lynx.html" title="Lynx-2.8.9rel.1">Lynx-2.8.9rel.1</a>
          ou <a class="ulink" href="http://w3m.sourceforge.net/">W3m</a>)
          sont installés, les pages de manuel et la documentation html et
          textuelle est régénérée et installée. En plus, si <a class="xref"
          href="../pst/fop.html" title="fop-2.6">fop-2.6</a> est installé, la
          documentation PDF est générée et installée. Utilisez ce paramètre
          si vous ne voulez pas reconstruire la documentation.
        </p>
        <p>
          <span class="command"><strong>chmod -v 4755
          /usr/sbin/unix_chkpwd</strong></span>&nbsp;: Le programme d'aide
          <span class="command"><strong>unix_chkpwd</strong></span> doit être
          setuid afin que les processus non-<code class=
          "systemitem">root</code> puissent accéder au fichier shadow.
        </p>
      </div>
      <div class="configuration" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Configuration de Linux-PAM
        </h2>
        <div class="sect3">
          <h3 class="sect3">
            <a id="pam-config" name="pam-config"></a>Fichiers de
            configuration
          </h3>
          <p>
            <code class="filename">/etc/security/*</code> et <code class=
            "filename">/etc/pam.d/*</code>
          </p>
        </div>
        <div class="sect3">
          <h3 class="sect3">
            Informations de configuration
          </h3>
          <p>
            Les informations de configuration se trouvent dans <code class=
            "filename">/etc/pam.d/</code>. Voici ci-dessous un fichier
            exemple&nbsp;:
          </p>
          <pre class="screen"><code class="literal"># Begin /etc/pam.d/other

auth            required        pam_unix.so     nullok
account         required        pam_unix.so
session         required        pam_unix.so
password        required        pam_unix.so     nullok

# End /etc/pam.d/other</code></pre>
          <p>
            Maintenant, mettez en place des fichiers génériques. En tant
            qu'utilisateur <code class="systemitem">root</code>&nbsp;:
          </p>
          <pre class="root"><kbd class=
          "command">install -vdm755 /etc/pam.d &amp;&amp;
cat &gt; /etc/pam.d/system-account &lt;&lt; "EOF" &amp;&amp;
<code class="literal"># Begin /etc/pam.d/system-account

account   required    pam_unix.so

# End /etc/pam.d/system-account</code>
EOF

cat &gt; /etc/pam.d/system-auth &lt;&lt; "EOF" &amp;&amp;
<code class="literal"># Begin /etc/pam.d/system-auth

auth      required    pam_unix.so

# End /etc/pam.d/system-auth</code>
EOF

cat &gt; /etc/pam.d/system-session &lt;&lt; "EOF"
<code class="literal"># Begin /etc/pam.d/system-session

session   required    pam_unix.so

# End /etc/pam.d/system-session</code>
EOF
cat &gt; /etc/pam.d/system-password &lt;&lt; "EOF"
<code class="literal"># Begin /etc/pam.d/system-password

# use sha512 hash for encryption, use shadow, and try to use any previously
# defined authentication token (chosen password) set by any prior module
password  required    pam_unix.so       sha512 shadow try_first_pass

# End /etc/pam.d/system-password</code>
EOF
</kbd></pre>
          <p>
            Si vous voulez activer la prise en charge des mots de passe
            forts, installez <a class="xref" href="libpwquality.html" title=
            "libpwquality-1.4.4">libpwquality-1.4.4</a> et suivez les
            instructions de cette page pour configurer le module PAM
            pam_pwquality avec la prise en charge des mots de passe forts.
          </p>
          <p>
            Maintenant ajoutez un fichier de configuration <code class=
            "filename">/etc/pam.d/other</code> restrictif. Avec ce fichier,
            les programmes qui ne sont pas sous PAM ne pourront pas se lancer
            sans qu'un fichier de configuration spécifique pour l'application
            ne soit créé.
          </p>
          <pre class="root"><kbd class=
          "command">cat &gt; /etc/pam.d/other &lt;&lt; "EOF"
<code class="literal"># Begin /etc/pam.d/other

auth        required        pam_warn.so
auth        required        pam_deny.so
account     required        pam_warn.so
account     required        pam_deny.so
password    required        pam_warn.so
password    required        pam_deny.so
session     required        pam_warn.so
session     required        pam_deny.so

# End /etc/pam.d/other</code>
EOF</kbd></pre>
          <p>
            La page de manuel de <span class="application">PAM</span>
            (<span class="command"><strong>man pam</strong></span>) offre un
            bon point de départ pour des descriptions des champs et des
            entrées autorisées. Le <a class="ulink" href=
            "http://www.linux-pam.org/Linux-PAM-html/Linux-PAM_SAG.html">Linux-PAM
            System Administrators' Guide (guide de l'administrateur système
            Linux-PAM)</a> est recommandé pour des informations
            supplémentaires.
          </p>
          <div class="admon important">
            <img alt="[Important]" src="../images/important.png" />
            <h3>
              Important
            </h3>
            <p>
              Vous devriez maintenant réinstaller <span class="phrase">le
              paquet</span> <a class="xref" href="shadow.html" title=
              "Shadow-4.9">Shadow-4.9</a>.
            </p>
          </div>
        </div>
      </div>
      <div class="content" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Contenu
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Programme installé:</strong>
              <span class="segbody">faillock, mkhomedir_helper,
              pam_namespace_helper, pam_timestamp_check, pwhistory_helper,
              unix_chkpwd et unix_update</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Bibliothèques installées:</strong>
              <span class="segbody">libpam.so, libpamc.so et
              libpam_misc.so</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Répertoires installés:</strong>
              <span class="segbody">/etc/security, /lib/security,
              /usr/include/security et /usr/share/doc/Linux-PAM-1.5.1</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Descriptions courtes
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="faillock" name="faillock"></a><span class=
                    "term"><span class=
                    "command"><strong>faillock</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    affiche et modifie les fichiers d'enregistrement des
                    échecs d'authentification
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="mkhomedir_helper" name=
                    "mkhomedir_helper"></a><span class="term"><span class=
                    "command"><strong>mkhomedir_helper</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un assistant binaire qui crée des répertoires home
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="pam_namespace_helper" name=
                    "pam_namespace_helper"></a><span class=
                    "term"><span class="command"><strong>pam_namespace_helper</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un programme d'aide utilisé pour configurer un espace
                    de noms privé pour une session utilisateur
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="pwhistory_helper" name=
                    "pwhistory_helper"></a><span class="term"><span class=
                    "command"><strong>pwhistory_helper</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un programme d'aide qui transfère les hash de mots de
                    passes de passwd ou shadow à opasswd
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="pam_timestamp_check" name=
                    "pam_timestamp_check"></a><span class="term"><span class=
                    "command"><strong>pam_timestamp_check</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est utilisé pour vérifier si l'horodatage par défaut est
                    valide.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="unix_chkpwd" name="unix_chkpwd"></a><span class=
                    "term"><span class=
                    "command"><strong>unix_chkpwd</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un assistant binaire qui vérifie le mot de passe de
                    l'actuel utilisateur
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="unix_update" name="unix_update"></a><span class=
                    "term"><span class=
                    "command"><strong>unix_update</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un assistant binaire qui met à jour le mot de passe
                    d'un utilisateur donné
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="libpam" name="libpam"></a><span class=
                    "term"><code class="filename">libpam.so</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    fournit les interfaces entre les applications et les
                    modules PAM
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="libcap.html" title=
          "libcap-2.53 avec PAM">Précédent</a>
          <p>
            libcap-2.53 avec PAM
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="liboauth.html" title=
          "liboauth-1.0.3">Suivant</a>
          <p>
            liboauth-1.0.3
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="security.html" title=
          "Chapitre&nbsp;4.&nbsp;Sécurité">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition System V) - Version r10.1-914+">
          Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
