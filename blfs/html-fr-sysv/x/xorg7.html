<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      Introduction à Xorg-7
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-r10.1-914+">
    <div class="navheader">
      <h4>
        Au-delà de Linux<sup>®</sup> From Scratch (édition <span class=
        "phrase">System V)</span> - Version r10.1-914+
      </h4>
      <h3>
        Chapitre&nbsp;24.&nbsp;Environnement X Window System
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="installing.html" title=
          "Environnement X Window System">Précédent</a>
          <p>
            Environnement X Window System
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="util-macros.html" title=
          "util-macros-1.19.3">Suivant</a>
          <p>
            util-macros-1.19.3
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="installing.html" title=
          "Chapitre&nbsp;24.&nbsp;Environnement X Window System">Niveau
          supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition System V) - Version r10.1-914+">
          Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="xorg7" name="xorg7"></a>Introduction à Xorg-7
      </h1>
      <p>
        <span class="application">Xorg</span> est une implémentation
        librement distribuable et open source du système de fenêtrage
        <span class="application">X</span>. Ce système offre une interface
        client/serveur entre le matériel d'affichage (la souris, le clavier
        et les afficheurs graphiques) et l'environnement de bureau, tout en
        fournissant aussi à la fois l'infrastructure de fenêtres et une
        interface d'applications standardisée (API).
      </p>
      <p class="usernotes">
        Notes utilisateur&nbsp;: <a class="ulink" href=
        "https://wiki.linuxfromscratch.org/blfs/wiki/Xorg7">https://wiki.linuxfromscratch.org/blfs/wiki/Xorg7</a>
      </p>
      <h3>
        Instructions de téléchargement et installation de Xorg
      </h3>
      <p>
        Xorg-7.0 a introduit un système de construction utilisant
        complètement les auto-tools et modulaire. Avec le nouveau système de
        construction modulaire, il n'est plus possible de télécharger tout le
        paquet dans un seul fichier. En fait, il peut y avoir plus de 1000
        paquets à récupérer sur le lieu du téléchargement. Pour vous aider
        pour une tâche si importante, l'installation de <a class="xref" href=
        "../basicnet/wget.html" title="Wget-1.21.1">Wget-1.21.1</a> est
        fortement recommandée pour télécharger les fichiers nécessaires. On
        fournit une liste complète des fichiers <span class=
        "application">wget</span> pour chaque page incluant plusieurs
        paquets.
      </p>
      <p>
        Étant donné le nombre de paquets disponibles, la décision des paquets
        à installer selon votre configuration particulière peut paraître de
        prime abord écrasante. Jetez un œil sur <a class="ulink" href=
        "http://wiki.x.org/wiki/ModuleDescriptions">cette page</a> et
        <a class="ulink" href=
        "http://lists.x.org/archives/xorg-modular/2005-November/000801.html">ce
        fil</a> pour vous faire une idée de ce dont vous aurez besoin. Si
        vous n'êtes pas sûr, vous devriez installer tous les paquets, au prix
        d'un espace disque supplémentaire.
      </p>
      <div class="admon note">
        <img alt="[Note]" src="../images/note.png" />
        <h3>
          Note
        </h3>
        <p>
          Même si vous ne voulez télécharger que les paquets nécessaires,
          vous devriez télécharger les listes de fichiers wget. La liste des
          fichiers est rangée par dépendances et les versions des paquets
          listés dans les fichiers sont connues pour bien fonctionner
          ensembles. En outre, les listes de fichiers wget contiennent des
          commentaires pour des paquets spécifiques obsolètes ou dont on ne
          recommande pas l'installation. Les paquets plus récents sont
          probablement prévus pour la prochaine version de <span class=
          "application">Xorg</span> et ils ont déjà prouvé leur
          incompatibilité avec les versions actuelles des logiciels installés
          dans BLFS. La taille du <span class="application">Xorg</span>
          installé peut être réduite considérablement en n'installant que les
          paquets dont vous avez besoin et que vous utiliserez, mais le livre
          BLFS ne peut pas tenir compte de toutes les dépendances et de
          toutes les options de construction des paquets <span class=
          "application">Xorg</span> individuels. Les instructions supposent
          que tous les paquets ont été construits. Une page <a class="ulink"
          href="https://wiki.linuxfromscratch.org/blfs/wiki/Xorg7">wiki</a>
          contenant des informations de dépendances est en développement. On
          vous encourage à compléter ces pages si vous trouvez des
          informations supplémentaires qui peuvent aider les autres
          utilisateurs qui installent de manière sélective les paquets
          individuels.
        </p>
      </div>
      <p>
        De plus, du fait du grand nombre de commandes répétitives, on vous
        invite à automatiser partiellement la construction. On vous donne ici
        des instructions qui utilisent le paquet <a class="xref" href=
        "../postlfs/sudo.html" title="Sudo-1.9.7p2">Sudo-1.9.7p2</a>. Il est
        recommandé à l'utilisateur qui va construire les paquets de xorg
        d'utiliser l'option de configuration <em class=
        "parameter"><code>:NOPASSWD</code></em>.
      </p>
      <div class="sect2" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          <a id="xorg-env" name="xorg-env"></a>Paramétrer l'environnement de
          construction de Xorg
        </h2>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            Les instructions suivantes considèrent que les fichiers de
            démarrage du shell sont configurés comme décrit dans <a class=
            "xref" href="../postlfs/profile.html" title=
            "Les fichiers de démarrage du shell Bash">Les fichiers de
            démarrage du shell Bash</a>.
          </p>
        </div>
        <p>
          Comme avec les versions précédentes du système X Window, il peut
          être souhaitable d'installer <span class="application">Xorg</span>
          dans un préfixe alternatif. Ce n'est plus une pratique courante
          dans les distributions Linux. Le préfixe d'installation habituelle
          de <span class="application">Xorg</span> sur Linux est <code class=
          "filename">/usr</code>. Il n'y a pas de préfixe alternatif
          standard, ni d'exception dans la révision actuelle du standard de
          hiérarchie des systèmes de fichiers (FHS) pour la version 7 du
          système X Window. Alan Coopersmith de Sun Microsystems, a déclaré
          récemment «&nbsp;Chez Sun, nous utilisions <code class=
          "filename">/usr/X11</code> et nous envisageons de continuer comme
          ça&nbsp;». Seul le préfixe <code class="filename">/opt/*</code> ou
          le préfixe <code class="filename">/usr</code> correspondent aux
          lignes directrices actuelles du FHS.
        </p>
        <p>
          Choisissez votre préfixe d'installation et réglez la variable
          <code class="envar">XORG_PREFIX</code> avec la commande
          suivante&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">export XORG_PREFIX="<em class=
        "replaceable"><code>&lt;PREFIX&gt;</code></em>"</kbd></pre>
        <p>
          Tout au long de ces instructions, vous utiliserez les paramètres
          <span class="command"><strong>configure</strong></span> suivants
          pour tous les paquets. Créez la variable <code class=
          "envar">XORG_CONFIG</code> à utiliser en remplacement de ce
          paramètre&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">export XORG_CONFIG="--prefix=$XORG_PREFIX --sysconfdir=/etc \
    --localstatedir=/var --disable-static"</kbd></pre>
        <p>
          Créez un fichier de configuration <code class=
          "filename">/etc/profile.d/xorg.sh</code> contenant ces variables en
          tant que <code class="systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">cat &gt; /etc/profile.d/xorg.sh &lt;&lt; EOF
<code class="literal">XORG_PREFIX="$XORG_PREFIX"
XORG_CONFIG="--prefix=\$XORG_PREFIX --sysconfdir=/etc --localstatedir=/var --disable-static"
export XORG_PREFIX XORG_CONFIG</code>
EOF
chmod 644 /etc/profile.d/xorg.sh</kbd></pre>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            Il y a beaucoup de confusion sur le document en ligne ci-dessus.
            L'antislash devant le signe dollar est correct. Bash le
            supprimera en créant /etc/profile.d/xorg.sh. Cependant, si vous
            créez le fichier avec un éditeur, une copier-coller ne supprimera
            par l'antislash. Il doit être supprimé manuellement.
          </p>
        </div>
        <p>
          Si vous avez installé <a class="xref" href="../postlfs/sudo.html"
          title="Sudo-1.9.7p2">Sudo-1.9.7p2</a>, assurez-vous que
          <code class="envar">XORG_PREFIX</code> et <code class=
          "envar">XORG_CONFIG</code> sont disponibles dans l'environnement
          <span class="application">sudo</span>. En tant qu'utilisateur
          <code class="systemitem">root</code>, lancez la commande
          suivante&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">cat &gt; /etc/sudoers.d/xorg &lt;&lt; EOF
<code class="literal">Defaults env_keep += XORG_PREFIX
Defaults env_keep += XORG_CONFIG</code>
EOF</kbd></pre>
        <div class="admon warning">
          <img alt="[Avertissement]" src="../images/warning.png" />
          <h3>
            Avertissement
          </h3>
          <p>
            Si vous décidez d'utiliser le préfixe standard <code class=
            "filename">/usr</code>, vous pouvez omettre le reste de cette
            page et continuer avec <a class="xref" href="util-macros.html"
            title="util-macros-1.19.3">util-macros-1.19.3</a>.
          </p>
        </div>
        <p>
          Si vous décidez de <span class="emphasis"><em>ne pas</em></span>
          utiliser le préfixe standard, soyez certain d'ajouter <code class=
          "filename">$XORG_PREFIX/bin</code> à votre variable d'environnement
          <code class="envar">PATH</code> et <code class=
          "filename">$XORG_PREFIX/lib/pkgconfig</code> et <code class=
          "filename">$XORG_PREFIX/share/pkgconfig</code> à votre variable
          <code class="envar">PKG_CONFIG_PATH</code>. Il est également utile
          de spécifier un répertoire de recherche supplémentaire pour
          <span class="command"><strong>gcc</strong></span> et un répertoire
          d'"include" pour le programme <span class=
          "command"><strong>aclocal</strong></span>. Tapez les commandes
          suivantes en tant que <code class="systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">cat &gt;&gt; /etc/profile.d/xorg.sh &lt;&lt; "EOF"
<code class="literal">
pathappend $XORG_PREFIX/bin             PATH
pathappend $XORG_PREFIX/lib/pkgconfig   PKG_CONFIG_PATH
pathappend $XORG_PREFIX/share/pkgconfig PKG_CONFIG_PATH

pathappend $XORG_PREFIX/lib             LIBRARY_PATH
pathappend $XORG_PREFIX/include         C_INCLUDE_PATH
pathappend $XORG_PREFIX/include         CPLUS_INCLUDE_PATH

ACLOCAL="aclocal -I $XORG_PREFIX/share/aclocal"

export PATH PKG_CONFIG_PATH ACLOCAL LIBRARY_PATH C_INCLUDE_PATH CPLUS_INCLUDE_PATH</code>
EOF</kbd></pre>
        <p>
          Le script ci-dessus doit être activé. Normalement cela est fait
          automatiquement à la connexion, mais pour l'activer maintenant en
          tant qu'utilisateur normal, lancez&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">source /etc/profile.d/xorg.sh</kbd></pre>
        <p>
          Vous pouvez aussi ajouter <code class=
          "filename">$XORG_PREFIX/lib</code> dans le fichier <code class=
          "filename">/etc/ld.so.conf</code>. De nouveau, en tant que
          <code class="systemitem">root</code>&nbsp;, tapez la commande
          suivante&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">echo "$XORG_PREFIX/lib" &gt;&gt; /etc/ld.so.conf</kbd></pre>
        <p>
          Vous pouvez aussi modifier <code class=
          "filename">/etc/man_db.conf</code>, en ajoutant les entrées
          appropriées MANDATORY_MANPATH, MANPATH_MAP, et MANDB_MAP comme le
          montrent les exemples de <code class="filename">/usr/X11R6</code>.
          Tapez la commande suivante en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class="command">sed "s@<em class=
        "replaceable"><code>/usr/X11R6</code></em>@$XORG_PREFIX@g" -i /etc/man_db.conf</kbd></pre>
        <p>
          Quelques applications cherchent les fichiers partagés dans
          <code class="filename">/usr/share/X11</code>. Créez un lien
          symbolique vers le bon endroit en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">ln -svf $XORG_PREFIX/share/X11 /usr/share/X11</kbd></pre>
        <p>
          Si vous construisez KDE, certains fichiers cmake cherchent Xorg à
          des endroits autres que $XORG_PREFIX. Permettez à cmake de trouver
          Xorg avec&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">ln -svf $XORG_PREFIX /usr/X11R6</kbd></pre>
      </div>
      <p class="updated">
        Last updated on
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="installing.html" title=
          "Environnement X Window System">Précédent</a>
          <p>
            Environnement X Window System
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="util-macros.html" title=
          "util-macros-1.19.3">Suivant</a>
          <p>
            util-macros-1.19.3
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="installing.html" title=
          "Chapitre&nbsp;24.&nbsp;Environnement X Window System">Niveau
          supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition System V) - Version r10.1-914+">
          Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
