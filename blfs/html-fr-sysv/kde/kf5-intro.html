<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      Configuration de pré-installation de KDE Frameworks 5
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-r10.1-914+">
    <div class="navheader">
      <h4>
        Au-delà de Linux<sup>®</sup> From Scratch (édition <span class=
        "phrase">System V)</span> - Version r10.1-914+
      </h4>
      <h3>
        Chapitre&nbsp;30.&nbsp;KDE Frameworks 5
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="kf5.html" title=
          "KDE Frameworks 5">Précédent</a>
          <p>
            KDE Frameworks 5
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="frameworks5.html" title=
          "Constructions de KDE Frameworks 5 (KF5)">Suivant</a>
          <p>
            Constructions de KDE Frameworks 5 (KF5)
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="kf5.html" title=
          "Chapitre&nbsp;30.&nbsp;KDE Frameworks 5">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition System V) - Version r10.1-914+">
          Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="kf5-intro" name="kf5-intro"></a>Configuration de
        pré-installation de KDE Frameworks 5
      </h1>
      <p>
        KF5 peut être installé dans <code class="filename">/usr</code> ou
        <code class="filename">/opt/kf5</code>. Les éditeurs de BLFS
        recommandent la dernière dans un environnement BLFS.
      </p>
      <div class="sect2" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Installation dans /usr
        </h2>
        <p>
          Une option est d'installer <span class="application">KDE Frameworks
          5</span> dans la hiérarchie <code class="filename">/usr</code>.
          Cela crée une installation simple mais rend plus difficile
          d'essayer des versions différentes de <span class="application">KDE
          Frameworks</span>.
        </p>
        <pre class="userinput"><kbd class=
        "command">export KF5_PREFIX=/usr</kbd></pre>
        <p>
          C'est une bonne idée d'ajouter les variables suivantes à votre
          système ou à votre profil personnel&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">cat &gt;&gt; /etc/profile.d/qt5.sh &lt;&lt; "EOF"
<code class="literal"># Begin kf5 extension for /etc/profile.d/qt5.sh

pathappend /usr/lib/qt5/plugins    QT_PLUGIN_PATH
pathappend $QT5DIR/lib/plugins     QT_PLUGIN_PATH

pathappend /usr/lib/qt5/qml        QML2_IMPORT_PATH
pathappend $QT5DIR/lib/qml         QML2_IMPORT_PATH

# End extension for /etc/profile.d/qt5.sh</code>
EOF

cat &gt; /etc/profile.d/kf5.sh &lt;&lt; "EOF"
<code class="literal"># Begin /etc/profile.d/kf5.sh

export KF5_PREFIX=/usr

# End /etc/profile.d/kf5.sh</code>
EOF</kbd></pre>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            Si <span class="application">qt5</span> est installé dans
            <code class="filename">/usr</code>, la partie <code class=
            "filename">$QT5DIR/lib/</code> des chemins précédents doit être
            changée en <code class="filename">$QT5DIR/lib/qt5/</code>.
          </p>
        </div>
        <p>
          En plus, si <a class="xref" href="../postlfs/sudo.html" title=
          "Sudo-1.9.7p2">Sudo-1.9.7p2</a> est installé, ces variables
          devraient être disponibles pour le super utilisateur. Exécutez les
          commandes suivantes en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">cat &gt;&gt; /etc/sudoers.d/qt &lt;&lt; "EOF"
<code class="literal">Defaults env_keep += QT_PLUGIN_PATH
Defaults env_keep += QML2_IMPORT_PATH</code>
EOF

cat &gt;&gt; /etc/sudoers.d/kde &lt;&lt; "EOF"
<code class="literal">Defaults env_keep += KF5_PREFIX</code>
EOF</kbd></pre>
      </div>
      <div class="sect2" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Installation dans /opt
        </h2>
        <p>
          Une méthode pour installer plusieurs versions de <span class=
          "application">KDE Frameworks 5</span> est de construire dans la
          hiérarchie <code class="filename">/opt</code>&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">export KF5_PREFIX=/opt/kf5</kbd></pre>
        <p>
          Si vous n'avez pas installé <span class="application">KDE
          Frameworks 5</span> dans <code class="filename">/usr</code>, vous
          devrez faire des modifications de configurations supplémentaires.
          La meilleure pratique est d'ajouter cela à votre profil système ou
          personnel&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">cat &gt; /etc/profile.d/kf5.sh &lt;&lt; "EOF"
<code class="literal"># Begin /etc/profile.d/kf5.sh

export KF5_PREFIX=/opt/kf5

pathappend $KF5_PREFIX/bin              PATH
pathappend $KF5_PREFIX/lib/pkgconfig    PKG_CONFIG_PATH

pathappend $KF5_PREFIX/etc/xdg          XDG_CONFIG_DIRS
pathappend $KF5_PREFIX/share            XDG_DATA_DIRS

pathappend $KF5_PREFIX/lib/plugins      QT_PLUGIN_PATH
pathappend $KF5_PREFIX/lib/plugins/kcms QT_PLUGIN_PATH

pathappend $KF5_PREFIX/lib/qml          QML2_IMPORT_PATH

pathappend $KF5_PREFIX/lib/python3.9/site-packages PYTHONPATH

pathappend $KF5_PREFIX/share/man        MANPATH
# End /etc/profile.d/kf5.sh</code>
EOF

cat &gt;&gt; /etc/profile.d/qt5.sh &lt;&lt; "EOF"
<code class="literal"># Begin Qt5 changes for KF5

pathappend $QT5DIR/plugins             QT_PLUGIN_PATH
pathappend $QT5DIR/qml                 QML2_IMPORT_PATH

# End Qt5 changes for KF5</code>
EOF</kbd></pre>
        <p>
          Complétez votre fichier <code class=
          "filename">/etc/ld.so.conf</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">cat &gt;&gt; /etc/ld.so.conf &lt;&lt; "EOF"
<code class="literal"># Begin KF5 addition

/opt/kf5/lib

# End KF5 addition</code>
EOF</kbd></pre>
        <p>
          Plusieurs paquets de <span class="application">KDE Frameworks
          5</span> installent des fichiers dans les répertoires <span class=
          "application">D-Bus</span>. Quand on installe <span class=
          "application">KDE Frameworks 5</span> dans un endroit autre que
          <code class="filename">/usr</code>, <span class=
          "application">D-Bus</span> doit pouvoir trouver ces fichiers. La
          façon la plus simple de faire est de créer le lien symbolique
          suivant (en tant qu'utilisateur <code class=
          "systemitem">root</code>)&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">install -v -dm755           $KF5_PREFIX/{etc,share} &amp;&amp;
ln -sfv /etc/dbus-1         $KF5_PREFIX/etc         &amp;&amp;
ln -sfv /usr/share/dbus-1   $KF5_PREFIX/share</kbd></pre>
        <p>
          Certains paquets peuvent aussi installer des icônes dans l'ensemble
          "hicolor". Comme cet ensemble d'icônes est utilisé par plusieurs
          paquets, c'est une bonne idée de créer un lien symbolique vers
          celui dans <code class="filename">/usr/share</code> pour éviter
          d'avoir des installations multiples de <a class="xref" href=
          "../x/hicolor-icon-theme.html" title=
          "hicolor-icon-theme-0.17">hicolor-icon-theme-0.17</a>. Lancez les
          commandes suivantes en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">install -v -dm755                $KF5_PREFIX/share/icons &amp;&amp;
ln -sfv /usr/share/icons/hicolor $KF5_PREFIX/share/icons</kbd></pre>
        <div class="admon tip">
          <img alt="[Astuce]" src="../images/tip.png" />
          <h3>
            Astuce
          </h3>
          <p>
            Parfois, les chemins d'installation sont codés en durs dans les
            fichiers installés. C'est pourquoi <code class=
            "filename">/opt/kf5</code> est utilisé comme préfixe
            d'installation à la place de <code class=
            "filename">/opt/kf5-5.85.0</code>. Après l'installation de
            <span class="application">KDE Frameworks</span>, vous pouvez
            renommer le répertoire et créer un lien symbolique&nbsp;:
          </p>
          <pre class="root"><kbd class="command">mv /opt/kf5{,-5.85.0}
ln -sfv kf5-5.85.0 /opt/kf5</kbd></pre>
          <p>
            Plus tard, vous pourriez vouloir installer d'autres versions de
            <span class="application">KDE Frameworks 5</span>. Pour cela,
            supprimez simplement le lien symbolique et utilisez <code class=
            "filename">/opt/kf5</code> de nouveau comme préfixe. La version
            de <span class="application">KDE Frameworks 5</span> que vous
            utilisez dépend seulement du répertoire pointé par le lien
            symbolique. Aucune autre reconfiguration ne sera nécessaire.
          </p>
        </div>
      </div>
      <p class="updated">
        Last updated on
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="kf5.html" title=
          "KDE Frameworks 5">Précédent</a>
          <p>
            KDE Frameworks 5
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="frameworks5.html" title=
          "Constructions de KDE Frameworks 5 (KF5)">Suivant</a>
          <p>
            Constructions de KDE Frameworks 5 (KF5)
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="kf5.html" title=
          "Chapitre&nbsp;30.&nbsp;KDE Frameworks 5">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition System V) - Version r10.1-914+">
          Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
