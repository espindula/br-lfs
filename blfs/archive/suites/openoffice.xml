<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  
  
  <!ENTITY openoffice-core-download-http   "http://ftp.osuosl.org/pub/openoffice/stable/&openoffice-version;/OOo_&openoffice-version;_src_core.tar.bz2">
  <!ENTITY openoffice-core-download-ftp    "ftp://ftp.osuosl.org/pub/openoffice/stable/&openoffice-version;/OOo_&openoffice-version;_src_core.tar.bz2">
  <!ENTITY openoffice-core-md5sum          "4fa713fb796bc57e5eb9dfb0758adda0">
  <!ENTITY openoffice-core-size            "205 Mo">
  <!ENTITY openoffice-system-download-http "http://ftp.osuosl.org/pub/openoffice/stable/&openoffice-version;/OOo_&openoffice-version;_src_system.tar.bz2">
  <!ENTITY openoffice-system-download-ftp  "ftp://ftp.osuosl.org/pub/openoffice/stable/&openoffice-version;/OOo_&openoffice-version;_src_system.tar.bz2">
  <!ENTITY openoffice-system-md5sum        "e6405c8108bdcf4cc2bf066d88aa5ae1">
  <!ENTITY openoffice-system-size          "59 Mo">
  <!ENTITY openoffice-buildsize            "4.9-7.3 Go (depend des otpions configurées)">
  <!ENTITY openoffice-time                 "96-109 SBU (depend des otpions configurées)">
]>
<sect1 id="openoffice" xreflabel="OpenOffice-&openoffice-version;">
  <?dbhtml filename="openoffice.html" ?>
  <sect1info>
    <othername>$LastChangedBy&nbsp;: bdubbs $</othername>
    <date>$Date&nbsp;: 2012-03-26 04:34:52 +0200 (Mon, 26 Mar 2012) $</date>
  </sect1info>
  <title>OpenOffice-&openoffice-version;</title>
  <indexterm zone="openoffice">
    <primary sortas="a-OpenOffice">OpenOffice</primary>
  </indexterm>
  <sect2 role="package">
    <title>Introduction à OpenOffice</title>
    <para><application>OpenOffice</application> est une suite bureautique, le
    fils open source de <application>StarOffice</application>.</para>
    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement du coeur d'OpenOffice (HTTP)&nbsp;: <ulink url="&openoffice-core-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement du coeur d'OpenOffice (FTP)&nbsp;: <ulink url="&openoffice-core-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement du coeur d'OpenOffice&nbsp;: &openoffice-core-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement du coeur d'OpenOffice&nbsp;: &openoffice-core-size;</para>
      </listitem>
      <listitem>
        <para>Téléchargement du système OpenOffice (HTTP)&nbsp;: <ulink url="&openoffice-system-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement du système OpenOffice (FTP)&nbsp;: <ulink url="&openoffice-system-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement du système OpenOffice&nbsp;: &openoffice-system-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement du système OpenOffice&nbsp;: &openoffice-system-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &openoffice-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &openoffice-time;</para>
      </listitem>
    </itemizedlist>
    <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>
    <itemizedlist spacing='compact'>
      <listitem>
        <para>Correctif requis&nbsp;:
        <ulink url="&patch-root;/OOo_&openoffice-version;-build_with_db5-1.patch"/>
        </para>
      </listitem>
      <listitem>
        <para>Téléchargement requis:
        <ulink url="ftp://ftp.mozilla.org/pub/mozilla.org/seamonkey/releases/1.1.14/seamonkey-1.1.14.source.tar.bz2"/></para>
 
      </listitem>
      <listitem>
        <para>Téléchargement facultatif si vous aimeriez localiser
        l'installation&nbsp;:
        <ulink url="ftp://ftp.osuosl.org/pub/openoffice/stable/&openoffice-version;/OOo_&openoffice-version;_src_l10n.tar.bz2"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement facultatif si vous devez supporter les anciens
        formats de fichier <application>StarOffice-5.2</application>&nbsp;:
        <ulink url="ftp://ftp.osuosl.org/pub/openoffice/stable/&openoffice-version;/OOo_&openoffice-version;_src_binfilter.tar.bz2"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement facultatif si vous voulez construire des extentions supplémentaires
        pour <application>OpenOffice</application>&nbsp;:
        <ulink url="ftp://ftp.osuosl.org/pub/openoffice/stable/&openoffice-version;/OOo_&openoffice-version;_src_extensions.tar.bz2"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement facultatif si vous voulez contruire le kit de developpement Office
        (exigence de la plate-forme croisée n'est pas facultatif):
        <ulink url="http://tools.openoffice.org/unowinreg_prebuild/680/unowinreg.dll"/></para>
      </listitem>
    </itemizedlist>
    <bridgehead renderas="sect3">Dépendances d'OpenOffice</bridgehead>
    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required"><xref linkend="apache-ant"/>,
    <xref linkend="gtk2"/>,
    <xref linkend="libidl"/>,
    <application>Modules Perl</application>
    <xref linkend="perl-xml-parser"/> et
    <xref linkend="perl-archive-zip"/>,
    <xref linkend="unzip"/>,
    <xref linkend="which"/> et
    <xref linkend="zip"/></para>
    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional"><ulink
    url="http://packages.debian.org/testing/libdevel/libaltlinuxhyph-dev">ALTLinuxhyph</ulink>,
    <xref linkend="boost"/>,
    <xref linkend="cups"/>,
    <xref linkend="curl"/>,
    <xref linkend="db"/> (built with Java support),
    <xref linkend="desktop-file-utils"/>,
    <ulink url="http://www.easysw.com/epm/">EPM</ulink>,
    <xref linkend="evolution"/>,
    
      
    <xref linkend="libjpeg"/>,
    <ulink url="http://www.mega-nerd.com/libsndfile/">libsndfile</ulink>,
    <xref linkend="libtiff"/>,
    <ulink url="http://freshmeat.net/projects/libwpd/">libwpd</ulink>,
    <xref linkend="libxslt"/>,
    <xref linkend="libxml2"/>,
    <xref linkend="linux-pam"/>,
    <ulink url="http://lingucomponent.openoffice.org/MySpell-3.zip">MySpell</ulink>,
    <ulink url="http://lingucomponent.openoffice.org/thesaurus.html">MyThes</ulink>,
    <xref linkend="neon"/>,
    <xref linkend="openldap"/>,
    <xref linkend="python2"/>,
    <xref linkend="sane"/>,
    <xref linkend="startup-notification"/>, et
    <xref linkend="unixodbc"/></para>
    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/openoffice"/></para>
  </sect2>
  <sect2 role="installation">
    <title>Installation d'OpenOffice</title>
    <para>Le code source d'<application>OpenOffice</application> est distribué
    dans plusieurs archives tar. Vous devriez extraire chacun d'eux
    à partir du même niveau de répertoire avant d'entrer dans le répertoire de
    construction. Au minimum, vous aurez besoin d'extraire les archives tar du
    <quote>core</quote> (c&oelig;ur) et du <quote>system</quote>. Remarquez
    que le nom de répertoire des sources n'est pas cohérent avec le nom de 
    l'archive tar et il sera nommé 
    <filename class='directory'>OOO320_m19</filename>.</para>
    <para>Il est possible de construire avec un <application>Mozilla</application>
	intallé sur le système, cependant, elle nécessite un correctif très intrusif,
	et est spécifique à la version.  En supplément, vous aurez besoin de construire contre
    <xref linkend="seamonkey"/> ou <xref linkend="thunderbird"/> pour un LDAP complet
    et les fonctions de carnet d'adresses.  A la place, utiliser la constrution incluse de
    <application>Seamonkey</application>.  Copiez l'archive dans l'arborescence
    des souces avec la commande suivante:</para>
<screen>
<userinput>cp ../seamonkey-1.1.14-source.tar.bz2 moz/download/</userinput>
</screen>
 
    <para>Si vous voulez optimiser la construction, éditez le Makefile adéquat 
    dans <filename>solenv/inc/</filename> et ajoutez les drapeaux d'optimisations désirés
    pour la variable <envar>CFLAGSOPT</envar>. Le Makefile est spécifique à l'architecture,
    par exemple, éditez <filename>unxlngi6.mk</filename> pour i686, <filename>unxlngx6.mk</filename> for x86_64.
	Certains utilisateurs ont signalé des problèmes avec
    <option>-fomit-frame-pointer</option>. La meilleure option est de ne pas
    utiliser d'optimisations personnalisées.</para>
    <note>
      <para>Du fait de la complexité du système de construction
      d'<application>OpenOffice</application>, il n'est pas possible de fournir
      des instructions de construction génériques pour tous les systèmes. 
      Vous devriez regarder la sortie de <command>configure --help</command> 
      et tirer parti des programmes et des bibliothèques disponibles installés 
      sur le système en utilisant les paramètres <parameter>--enable-*</parameter>, <parameter>--disable-*</parameter>,
      et <parameter>--with-system-*</parameter>, et fournir toutes les varibales
	  d'environnement supplémentaires nécessaire.</para>
    </note>
    <para><application>OpenOffice</application> échoue pour se compiler si
    <command>umask</command> est paramétré de manière exotique. La construction
    peut aussi échouer si les variables d'environnement <envar>LANG</envar> ou
    <envar>LC_ALL</envar> sont réglées. Utilisez les commandes suivantes pour 
    modifier de façon adéquate votre environnement&nbsp;:</para>
<screen>
<userinput>umask 0022 &amp;&amp;
unset LANG LC_ALL</userinput>
</screen>
    <para>Installez <application>OpenOffice</application> en lançant les
    commandes suivantes&nbsp;:</para>
<screen>
<userinput>patch -Np1 -i ../OOo_&openoffice-version;-with-system-db5-1.patch &amp;&amp;
autoreconf &amp;&amp;
PKG_CONFIG=/usr/bin/pkg-config ./configure \
            --disable-binfilter            \
            --disable-fontooo              \
            --disable-gnome-vfs            \
            --disable-odk                  \
            --disable-qadevooo             \
            --enable-cairo                 \
            --without-afms                 \
            --without-fonts                \
            --without-ppds                 \
            --without-pam                  \
            --with-system-stdlibs          \
            --with-system-cairo            \
            --with-system-expat            \
            --with-system-zlib             \
            --with-package-format=native   \
            --with-vendor="BLFS"           \
            --with-use-shell=bash &amp;&amp;
source LinuxX86Env.Set.sh &amp;&amp;
./bootstrap &amp;&amp;
make</userinput>
</screen>
    <para>Ce paquet n'est pas fourni avec une suite de tests.</para>
    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>
<screen role="root">
<userinput>pushd instsetoo_native/unxlng?6.pro/OpenOffice/\
native/install/en-US/linux-2.6-*/buildroot/opt &amp;&amp;
cp -r -v openoffice.org3 /opt/openoffice-&openoffice-version; &amp;&amp;
cp -r -v openoffice.org/* /opt/openoffice-&openoffice-version; &amp;&amp;
ln -sf basis3.2 /opt/openoffice-&openoffice-version;/basis-link &amp;&amp;
popd &amp;&amp;
for appl in sbase scalc sdraw simpress smath soffice spadmin swriter
do
    ln -v -sf /opt/openoffice-&openoffice-version;/program/$appl /usr/bin
done &amp;&amp;
pushd sysui/desktop/icons &amp;&amp;
install -v -m755 -d /usr/share/icons/{hicolor,locolor} &amp;&amp;
cp -r -v hicolor/* /usr/share/icons/hicolor &amp;&amp;
cp -r -v locolor/* /usr/share/icons/locolor &amp;&amp;
popd</userinput>
</screen>
<para>Si vous avez installé <xref linkend="desktop-file-utils"/>, vous devez
    copier les fichiers <filename class='extension'>*.desktop</filename> dans
    <filename class='directory'>/usr/share/applications</filename> en utilisant la commande
    suivante en tant qu'utilisateur <systemitem class="username">root</systemitem>
    &nbsp;:</para>
<screen role="root">
<userinput>install -v -d -m755 /usr/share/applications &amp;&amp;
pushd /opt/openoffice-&openoffice-version;/share/xdg/ &amp;&amp;
for appl in *.desktop
do
    sed -i '/Exec/d' $appl &amp;&amp;
    echo "Exec=/usr/bin/s`echo $appl | sed 's/.desktop//'`" >> $appl &amp;&amp;
    sed -i '/Icon/d' $appl &amp;&amp;
    echo "Icon=`echo "ooo-${appl}3.2" | sed 's/\.desktop//'`" >> $appl
done &amp;&amp;
sed -i 's@bin/sprinteradmin@bin/spadmin@' printeradmin.desktop &amp;&amp;
cp -v *.desktop /usr/share/applications &amp;&amp;
update-desktop-database &amp;&amp;
popd</userinput>
</screen>
    <para>Si vous avez choisi de construire des dictionnaires supplémentaires ou une des
    extensions, vous aurez besoin de les copier dans le repertoire d'installation.  Exécuter
    la commande suivante en tant que 
    <systemitem class="username">root</systemitem>&nbsp;:</para>
    <note><para>Les deux blocs de commands suivants ne sortiront pas avec une valeur à 0,
	et le second vous demandera de presser 'y' avant l'installation.
    Pesez-y si vous voulez automatiser la construction.</para></note>
<screen role="root">
<userinput>cp -v dictionaries/unxlngi6.pro/bin/dict-*.oxt \
    sdext/unxlngi6.pro/bin/*.oxt \
    reportbuilder/unxlngi6.pro/bin/report-builder.oxt \
    swext/unxlngi6.pro/bin/wiki-publisher.oxt \
    /opt/openoffice-3.2.1/share/extension/install</userinput>
</screen>
    <para>Maintenant, en continuant avec l'utilisateur <systemitem class="username">root</systemitem>,
	ajouter le tout dans l'installation partagée:</para>
<screen role="root">
<userinput>for ext in /opt/openoffice-3.2.1/share/extension/install/*.oxt
do
    /opt/openoffice-3.2.1/program/unopkg add --shared --verbose $ext
done</userinput>
</screen>
    <note><para>Les outils linguistiques par defaut d'<application>OpenOffice</application>
    ne fonctionne pas à la sortie de la boite.  Vous aurez à sélectionner explicitement les
	paramètres de langue appropriée au sein de l'un des programmes installés en allant dans
	le menu Outils et sélectionnez Options. Sous les paramètres linguistiques, langues,
	sélectionnez la langue souhaitée pour tous les réglages. Ne laissez pas "par défaut"
	dans tout le menu déroulant ici.</para></note>
    <para>Enfin, si vous aimeriez éditer des documents <application>OpenOffice</application>
    directement à partir de <xref linkend="seamonkey"/> ou de
    <xref linkend="firefox"/>, créez un lien symbolique dans votre répertoire
    de plugins vers <filename
    class='libraryfile'>/opt/openoffice-&openoffice-version;/program/libnpsoplugin.so</filename>.
    Vous devez également activer le plugin depuis 
    <parameter>Options Internet</parameter> dans l'application
    <application>OpenOffice</application>.</para>
  </sect2>
  <sect2 role="commands">
    <title>Explication des commandes</title>
    <para><envar>PKG_CONFIG=/usr/bin/pkg-config</envar>&nbsp;:
    Cette variable doit être initialisée avec la version, la vérification dans
    <filename>configure</filename> est cassée.</para>
    <para><parameter>--disable-binfilter</parameter>&nbsp;: Ce paramètre
    désactive la construction des filtres d'importation <application>StarOffice-5</application> 
    de base. Ne mettez pas cette option si vous avez téléchargé le paquet
    <application>binfilter</application> ci-dessus. Attention&nbsp;: l'installation 
    des filtres d'importation de base augmente énormément le temps de 
    construction. Ne les installez que si vous avez ces anciens types de fichiers
    et si vous devez les éditer dans 
    <application>OpenOffice</application>.</para>
    <para><parameter>--disable-fontooo</parameter>&nbsp;: utiliser
    <application>Fontconfig</application> au lieu de FontOOo.</para>
    <para><parameter>--disable-gnome-vfs</parameter>&nbsp;: Désactive l'utilisation des
    bibliothèques <application>Gnome Virtual File System</application>.  Omettre ce
    paramètre seulement si gio n'est pas disponible.</para>
    <para><parameter>--disable-odk</parameter>&nbsp;: Ce paramètre désactile
    la construction du SDK <application>OpenOffice</application>. Ne mettez pas
    ce paramètre si vous avez téléchargé le paquet SDK ci-dessus (et les
    dépendances supplémentaires).</para>
    <para><parameter>--disable-qadevooo</parameter>&nbsp;: Ce paramètre passe
    la construction des outils d'assurance qualité utilisés par les équipes de
    développement d'<application>OpenOffice</application>.</para>
    <para><parameter>--enable-cairo</parameter>&nbsp;: Ce paramètre listé dans la commande
    <command>configure</command> en exemple ci-dessous force l'utilisation de cairo
	installé sur le système.</para>
    <para><parameter>--without-afms</parameter>&nbsp;: N'installez pas les fonts afm 
    que si les fonts TrueType sur le systeme installé sont déja disponibles.</para>
    <para><parameter>--without-fonts</parameter>&nbsp;: N'installez pas les fonts Bitstream
    Vera fonts puisqu'elles sont déja incluses dans l'environnement
    <application>X</application>.</para>
    <para><parameter>--without-ppds</parameter>&nbsp;: N'installez par les fichiers de 
    description des imprimantes car ils doivent être gérés par votre système d'impression.</para>
    <para><parameter>--without-pam</parameter>&nbsp;: Désactive l'utilisation des fonction
    <application>Linux-PAM</application> .  Omettre ce paramètre si 
    <application>Linux-PAM</application> est installé.</para>
    <para><parameter>--with{,out}-system-*</parameter>&nbsp;: Determine
    s'il faut utiliser les bibliothèques systèmes et les programs oo construire
    les paquets sources inclus dans l'arborescende de construction.</para>
    <para><parameter>--with-build-version="3.2.1-1"</parameter>&nbsp;: Change la version de
	construction en ajoutant "-1" à la chaine de version par défaut.</para>
    <para><parameter>--with-vendor="BLFS"</parameter>&nbsp;: Change la chaine vendeur
    par "BLFS" dans la boite de dialogue help->about.</para>
    <para><parameter>--with-use-shell=bash</parameter>&nbsp;: Demande si le système de
	construction de <application>OpenOffice</application> doit utiliser
    <command>bash</command> aulieu de <command>tcsh</command>.</para>
    <para><command>./bootstrap</command>&nbsp;: Construit l'outil
    <command>dmake</command> éxigé pour terminer la construction.</para>
    <para>
    <parameter>--with-lang=<replaceable>&lt;LANG&gt;</replaceable></parameter>&nbsp;:
    Permet l'utilisation de langues supplémentaires dans 
    <application>OpenOffice</application>. L'anglais américain (ENUS) est celle
    par défaut.</para>
    
    <para>
    <parameter>--with-dict=<replaceable>&lt;LANG&gt;</replaceable></parameter>&nbsp;:
    Permet l'utilisation d'un dictionnaire supplémentaire dans
    <application>OpenOffice</application>. L'anglais américain (ENUS) est celui 
    par défaut.</para>
    <para><command>for appl in sbase scalc...</command>&nbsp;: Crée des liens
    symboliques pour les applications dans
    <filename class="directory">/usr/bin</filename>.</para>
    <para><command>for appl in *.desktop...</command>&nbsp;: Édite les fichiers
    <filename>*.desktop</filename> pour une utilisation avec un système BLFS 
    standard.</para>
  </sect2>
  <sect2 role="content">
    <title>Contenu</title>
    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoire installé</segtitle>
      <seglistitem>
        <seg>sbase, scalc, sdraw, simpress, smath, soffice, spadmin,
        et swriter</seg>
        <seg><application>OpenOffice</application> libraries</seg>
        <seg>/opt/openoffice-&openoffice-version;</seg>
      </seglistitem>
    </segmentedlist>
    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      <varlistentry id="sbase">
        <term><command>sbase</command></term>
        <listitem>
          <para>est une application de base de données.</para>
          <indexterm zone="openoffice sbase">
            <primary sortas="b-sbase">sbase</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="scalc">
        <term><command>scalc</command></term>
        <listitem>
          <para>est une application tableur.</para>
          <indexterm zone="openoffice scalc">
            <primary sortas="b-scalc">scalc</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="sdraw">
        <term><command>sdraw</command></term>
        <listitem>
          <para>est une application de dessin.</para>
          <indexterm zone="openoffice sdraw">
            <primary sortas="b-sdraw">sdraw</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="simpress">
        <term><command>simpress</command></term>
        <listitem>
          <para>est une application de présentation.</para>
          <indexterm zone="openoffice simpress">
            <primary sortas="b-simpress">simpress</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="smath">
        <term><command>smath</command></term>
        <listitem>
          <para>est un éditeur de formules mathématiques.</para>
          <indexterm zone="openoffice smath">
            <primary sortas="b-smath">smath</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="soffice">
        <term><command>soffice</command></term>
        <listitem>
          <para>ouvre une fenêtre de base donnant accès à toutes les applications
          d'<application>OpenOffice</application>.</para>
          <indexterm zone="openoffice soffice">
            <primary sortas="b-soffice">soffice</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="spadmin">
        <term><command>spadmin</command></term>
        <listitem>
          <para>est l'outil de configuration d'imprimante d'<application>OpenOffice</application>.</para>
          <indexterm zone="openoffice spadmin">
            <primary sortas="b-spadmin">spadmin</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="swriter">
        <term><command>swriter</command></term>
        <listitem>
          <para>est une application de traitement de texte.</para>
          <indexterm zone="openoffice swriter">
            <primary sortas="b-swriter">swriter</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect2>
</sect1>
