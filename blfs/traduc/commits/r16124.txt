Révision 16124

fichiers modifiés :
M       scripts/blfs-chapter20.php
M       scripts/blfs-chapter10.php
M       scripts/blfs-chapter13.php

Log :
Script tweaks for freetype, bind, and cmake

Le robot a traité 0 % du commit anglais
Index: scripts/blfs-chapter10.php
===================================================================
--- scripts/blfs-chapter10.php	(révision 16123)
+++ scripts/blfs-chapter10.php	(révision 16124)
@@ -11,11 +11,11 @@
 $renames = array();
 $ignores = array();
 
-//$current="aalib";   // For debugging
+//$current="freetype";   // For debugging
 
 $regex = array();
 $regex[ 'aalib'         ] = "/^.*Download aalib-([\d\.]+rc\d).tar.*$/";
-$regex[ 'freetype'      ] = "/^.*Download freetype-(\d[\d\.]*\d).tar.*/";
+//$regex[ 'freetype'      ] = "/^.*Download freetype-(\d[\d\.]*\d).tar.*/";
 $regex[ 'jasper'        ] = "/^.*JasPer version (\d[\d\.]+\d) source.*current.*$/";
 $regex[ 'libexif'       ] = "/^.*Download libexif-(\d[\d\.]+\d).*$/";
 $regex[ 'graphite2'     ] = "/^.*Download graphite2-(\d[\d\.]+\d).tgz.*$/";
@@ -41,7 +41,7 @@
 
  array( 'pkg'     => 'freetype',
         'match'   => '^.*$', 
-'replace' => "http://$sf/projects/freetype/files/freetype2" ),
+        'replace' => "http://sourceforge.net/projects/freetype/files/freetype2" ),
 
  array( 'pkg'     => 'freetype-doc',
         'match'   => '^.*$', 
@@ -205,7 +205,8 @@
      return 0;  // This is an error
   }
 
-if ( $book_index == "freetype-doc" )
+  if ( $book_index == "freetype"     ||
+       $book_index == "freetype-doc" )
   {
     $dir   = find_max( $lines, '/\d\./', '/^\s*([\d\.]+)\s*$/' );
     $lines = http_get_file( "$dirpath/$dir" );

Index: scripts/blfs-chapter13.php
===================================================================
--- scripts/blfs-chapter13.php	(révision 16123)
+++ scripts/blfs-chapter13.php	(révision 16124)
@@ -527,7 +527,7 @@
     if ( $max == 0 )
       $max = find_max( $lines, "/$package/", 
                                "/^.*$package-(\d[\d\.]*\d-rc\d).*$/" );
-return $max;
+    return ( $max != 0 ) ? $max : "pending";
   }
 
   if ( $book_index == "pygobject1" ||

Index: scripts/blfs-chapter20.php
===================================================================
--- scripts/blfs-chapter20.php	(révision 16123)
+++ scripts/blfs-chapter20.php	(révision 16124)
@@ -112,7 +112,7 @@
   if ( preg_match( "/^ftp/", $dirpath ) ) 
   { 
     // bind
-if ( $book_index == "bind1" )
+    if ( $book_index == "bind" )
     {
       // Get the max directory and adjust the directory path
       $dirpath  = rtrim  ( $dirpath, "/" );    // Trim any trailing slash

