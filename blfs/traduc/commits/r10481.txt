Révision 10481

fichiers modifiés :
   introduction/welcome/changelog.xml
   general.ent
   x/installing/x7proto.xml
   x/installing/x7font.xml
   x/installing/x7lib.xml
   x/installing/x7app.xml

Log :
Added AS_ROOT variable to Xorg installation loops.

Le robot a traité 14 % du commit anglais
Index: general.ent
===================================================================
--- general.ent	(revision 10480)
+++ general.ent	(revision 10481)
@@ -109,6 +109,35 @@
 <!ENTITY lfssvn_built2        " platform but has not been tested.">
 <!-- End special entities about LFS compatibility -->
 
+<!ENTITY as_root              "<note><para>When installing multiple packages in
+                              a script, the installation needs to be done as
+                              the root user. There are three general options
+                              that can be used to do this:</para>
+                              <orderedlist>
+                              <listitem><para>Run the entire script as the root
+                              user (not recommended).</para></listitem>
+                              <listitem><para>Use the '<command>sudo</command>'
+                              command from the <xref linkend='sudo'/>
+                              package.</para></listitem>
+                              <listitem><para>Use '<command>su -c</command>'
+                              which will ask for the root password for every
+                              iteration of the loop.</para></listitem>
+                              </orderedlist>
+                              <para>Select a preferred method and export a
+                              variable <parameter>AS_ROOT</parameter> with the
+                              following command replacing
+                              <parameter>&lt;as_root&gt;</parameter> with the
+                              selected command (unset or use an empty variable
+                              if you intend to run the entire loop as the
+                              root user):</para>
+                              <screen><userinput>export AS_ROOT='<replaceable>&lt;as_root&gt;</replaceable>'</userinput></screen>
+                              </note>">
 <!ENTITY not-katamari         "<para>This package is not a part of the Xorg
                               katamari and is provided only as a dependency to
                               other packages or for testing the completed Xorg

Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(revision 10480)
+++ introduction/welcome/changelog.xml	(revision 10481)
@@ -44,6 +44,16 @@
 
 -->
     <listitem>
+      <para>July 30th, 2012</para>
+      <itemizedlist>
+        <listitem>
+          <para>[dj] - Added "AS_ROOT" variable to Xorg installation
+          loops.</para>
+        </listitem>
+      </itemizedlist>
+    </listitem>
+    <listitem>
       <para>July 29th, 2012</para>
       <itemizedlist>
         <listitem>

Index: x/installing/x7app.xml
===================================================================
--- x/installing/x7app.xml	(revision 10480)
+++ x/installing/x7app.xml	(revision 10481)
@@ -242,8 +242,10 @@
   <sect2 role="installation">
     <title>Installation of Xorg Applications</title>
 
-    <para>First, start a sub-shell that will exit on error:</para>
+&as_root;
 
+    <para>First, start a subshell that will exit on error:</para>
 <screen><userinput>bash -e</userinput></screen>
 
     <para>Install all of the applications by running the following
@@ -253,11 +255,11 @@
 do
   packagedir=${package%.tar.bz2}
   tar -xf $package
-  cd $packagedir
+  pushd $packagedir
   ./configure $XORG_CONFIG
   make
-  sudo make install
-  cd ..
+  $AS_ROOT make install
+  popd
   rm -r $packagedir
 done</userinput></screen>
 

Index: x/installing/x7font.xml
===================================================================
--- x/installing/x7font.xml	(revision 10480)
+++ x/installing/x7font.xml	(revision 10481)
@@ -233,6 +233,8 @@
   <sect2 role="installation">
     <title>Installation of Xorg Fonts</title>
 
+&as_root;
     <para>First, start a subshell that will exit on error:</para>
 
 <screen><userinput>bash -e</userinput></screen>
@@ -244,11 +246,11 @@
 do
   packagedir=${package%.tar.bz2}
   tar -xf $package
-  cd $packagedir
+  pushd $packagedir
   ./configure $XORG_CONFIG
   make
-  sudo make install
-  cd ..
+  $AS_ROOT make install
+  popd
   rm -r $packagedir
 done</userinput></screen>
 

Index: x/installing/x7lib.xml
===================================================================
--- x/installing/x7lib.xml	(revision 10480)
+++ x/installing/x7lib.xml	(revision 10481)
@@ -229,6 +229,8 @@
   <sect2 role="installation">
     <title>Installation of Xorg Libraries</title>
 
+&as_root;
     <para>First, start a subshell that will exit on error:</para>
 
 <screen><userinput>bash -e</userinput></screen>
@@ -240,7 +242,7 @@
 do
   packagedir=${package%.tar.bz2}
   tar -xf $package
-  cd $packagedir
+  pushd $packagedir
   case $packagedir in
     libXfont-[0-9]* )
       ./configure $XORG_CONFIG --disable-devel-docs
@@ -254,8 +256,8 @@
     ;;
   esac
   make
-  sudo make install
-  cd ..
+  $AS_ROOT make install
+  popd
   rm -r $packagedir
   sudo /sbin/ldconfig
 done</userinput></screen>

Index: x/installing/x7proto.xml
===================================================================
--- x/installing/x7proto.xml	(revision 10480)
+++ x/installing/x7proto.xml	(revision 10481)
@@ -209,6 +209,8 @@
   <sect2 role="installation">
     <title>Installation of Xorg Protocol Headers</title>
 
+    &as_root;
     <para>First, start a subshell that will exit on error:</para>
 
 <screen><userinput>bash -e</userinput></screen>
@@ -220,10 +222,10 @@
 do
   packagedir=${package%.tar.bz2}
   tar -xf $package
-  cd $packagedir
+  pushd $packagedir
   ./configure $XORG_CONFIG
-  sudo make install
-  cd ..
+  $AS_ROOT make install
+  popd
   rm -r $packagedir
 done</userinput></screen>
 

