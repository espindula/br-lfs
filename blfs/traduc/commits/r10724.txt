Révision 10724

fichiers modifiés :
   introduction/welcome/changelog.xml
   general.ent
   x/installing/mesalib.xml
   general/genlib/libdrm.xml

Log :
libdrm 2.4.39 and MesaLib 9.0.

Le robot a traité 18 % du commit anglais
Index: general/genlib/libdrm.xml
===================================================================
--- general/genlib/libdrm.xml	(revision 10723)
+++ general/genlib/libdrm.xml	(revision 10724)
@@ -91,31 +91,18 @@
   <sect2 role="installation">
     <title>Installation of libdrm</title>
 
-    <warning>
-      <para>
-        You may notice that there are several newer version of
-        <application>libdrm</application> available upstream.
-        However, we do not recommend using any later version than
-        this one if you are going to build
-        <xref linkend="mesalib"/> using BLFS instructions.
-      </para>
-    </warning>
     <para>
       Install <application>libdrm</application> by running the following
       commands:
     </para>
 
-<screen><userinput>./configure --prefix=$XORG_PREFIX            \
-            --enable-udev                    \
-            --enable-vmwgfx-experimental-api \
-            --enable-nouveau-experimental-api &amp;&amp;
+<screen><userinput>./configure --prefix=/usr \
+            --enable-udev \
+            --enable-vmwgfx-experimental-api &amp;&amp;
 make</userinput></screen>
 
     <para>
@@ -130,23 +117,23 @@
     <title>Command Explanations</title>
 
     <para>
-      <option>--enable-nouveau-experimental-api</option>: This parameter
-      enables building of Nouveau (Open Source NVidia drivers) DRM interface
-      library as well as corresponding headers.
-    </para>
-    <para>
       <option>--enable-vmwgfx-experimental-api</option>: This parameter
      enables use of VMWGFX experimental kernel API used by the
       VMware 3D Gallium driver.
@@     @@
      of system-on-chips (SoCs) developed by Texas Instruments.
     </para>
 
+    <para>
+      <option>--enable-exynos-experimental-api</option>: This option
+      enables use of Exynos experimental kernel API. Exynos is a
+      series  of system-on-chips (SoCs) developed by Samsung.
+    </para>
   </sect2>
 
   <sect2 role="content">
@@ -158,11 +145,15 @@
 
       <seglistitem>
         <seg>
-          libdrm.so, libdrm_intel.so, libdrm_nouveau.so, libdrm_omap.so
+          libdrm.so, libdrm_exynos.so, libdrm_intel.so,
+          libdrm_nouveau.so, libdrm_omap.so,
           libdrm_radeon.so and libkms.so
         </seg>
         <seg>
-          <envar>$XORG_PREFIX</envar>/include/{libdrm,libkms,nouveau,omap}
+          /usr/include/exynos,
+          /usr/include/libdrm,
+          /usr/include/libkms and
+          /usr/include/omap
         </seg>
       </seglistitem>
     </segmentedlist>
@@ -173,26 +164,89 @@
       <?dbhtml list-presentation="table"?>
 
       <varlistentry id="libdrm-lib">
-        <term><filename class='libraryfile'>libdrm{,_intel,_nouveau,_omap,_radeon}.so</filename></term>
+        <term><filename class="libraryfile">libdrm.so</filename></term>
         <listitem>
           <para>
-            contains the Direct Rendering Manager library functions, and
-            additional vendor specific functions for Intel, nVidia, Omap
-            and Radeon devices.
+            contains the Direct Rendering Manager API functions.
           </para>
           <indexterm zone="libdrm libdrm-lib">
-            <primary sortas="c-libdrm">libdrm{,_intel,_nouveau,_omap,_radeon}.so</primary>
+            <primary sortas="c-libdrm">libdrm.so</primary>
           </indexterm>
         </listitem>
       </varlistentry>
 
-      <varlistentry id="libkms-lib">
-        <term><filename class='libraryfile'>libkms.so</filename></term>
+      <varlistentry id="libdrm_exynos">
+        <term><filename class="libraryfile">libdrm_exynos.so</filename></term>
         <listitem>
           <para>
-            contains functions necessary for kernel modesetting.
+            contains the Samsung Exynos specific Direct Rendering
+            Manager functions.
           </para>
-          <indexterm zone="libdrm libkms-lib">
+          <indexterm zone="libdrm libdrm_exynos">
+            <primary sortas="c-libdrm_exynos">libdrm_exynos.so</primary>
+          </indexterm>
+        </listitem>
+      </varlistentry>
+      <varlistentry id="libdrm_intel">
+        <term><filename class="libraryfile">libdrm_intel.so</filename></term>
+        <listitem>
+          <para>
+            contains the Intel specific Direct Rendering Manager
+            functions.
+          </para>
+          <indexterm zone="libdrm libdrm_intel">
+            <primary sortas="c-libdrm_intel">libdrm_intel.so</primary>
+          </indexterm>
+        </listitem>
+      </varlistentry>
+      <varlistentry id="libdrm_nouveau">
+        <term><filename class="libraryfile">libdrm_nouveau.so</filename></term>
+        <listitem>
+          <para>
+            contains the open source nVidia (Nouveau) specific Direct
+            Rendering Manager functions.
+          </para>
+          <indexterm zone="libdrm libdrm_nouveau">
+            <primary sortas="c-libdrm_nouveau">libdrm_nouveau.so</primary>
+          </indexterm>
+        </listitem>
+      </varlistentry>
+      <varlistentry id="libdrm_omap">
+        <term><filename class="libraryfile">libdrm_omap.so</filename></term>
+        <listitem>
+          <para>
+            contains the TI Omap specific Direct Rendering Manager
+            functions.
+          </para>
+          <indexterm zone="libdrm libdrm_omap">
+            <primary sortas="c-libdrm_omap">libdrm_omap.so</primary>
+          </indexterm>
+        </listitem>
+      </varlistentry>
+      <varlistentry id="libdrm_radeon">
+        <term><filename class="libraryfile">libdrm_radeon.so</filename></term>
+        <listitem>
+          <para>
+            contains the AMD Radeon specific Direct Rendering Manager
+            functions.
+          </para>
+          <indexterm zone="libdrm libdrm_radeon">
+            <primary sortas="c-libdrm_radeon">libdrm_radeon.so</primary>
+          </indexterm>
+        </listitem>
+      </varlistentry>
+      <varlistentry id="libkms">
+        <term><filename class="libraryfile">libkms.so</filename></term>
+        <listitem>
+          <para>
+            contains API functions necessary for kernel modesetting.
+          </para>
+          <indexterm zone="libdrm libkms">
             <primary sortas="c-libkms">libkms.so</primary>
           </indexterm>
         </listitem>

Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(revision 10723)
+++ introduction/welcome/changelog.xml	(revision 10724)
@@ -49,6 +49,12 @@
         <listitem>
           <para>[krejzi] - Cairo 1.12.4.</para>
         </listitem>
+        <listitem>
+          <para>[krejzi] - libdrm 2.4.39.</para>
+        </listitem>
+        <listitem>
+          <para>[krejzi] - MesaLib 9.0.</para>
+        </listitem>
       </itemizedlist>
     </listitem>
 

Index: x/installing/mesalib.xml
===================================================================
--- x/installing/mesalib.xml	(revision 10723)
+++ x/installing/mesalib.xml	(revision 10724)
@@ -74,13 +81,43 @@
     <itemizedlist spacing="compact">
       <listitem>
         <para>
-          Required patch:
-          <ulink url="&patch-root;/MesaLib-&mesalib-version;-llvm-3.1-fixes-1.patch"/>
+          GLU Download (HTTP): <ulink url="&glu-download-http;"/>
         </para>
+      </listitem>
+      <listitem>
         <para>
+          GLU Download (FTP): <ulink url="&glu-download-ftp;"/>
+        </para>
+      </listitem>
+      <listitem>
+        <para>
+          GLU Download MD5 sum: &glu-md5sum;
+        </para>
+      </listitem>
+      <listitem>
+        <para>
+          GLU Download size: &glu-size;
+        </para>
+      </listitem>
+      <listitem>
+        <para>
+          Estimated GLU disk space required: &glu-buildsize;
+        </para>
+      </listitem>
+      <listitem>
+        <para>
+          Estimated GLU build time: &glu-time;
+        </para>
+      </listitem>
+    </itemizedlist>
+    <bridgehead renderas="sect3">Additional Patches</bridgehead>
+    <itemizedlist spacing="compact">
+      <listitem>
+        <para>
           Recommended patch:
-          <ulink url="&patch-root;/MesaLib-&mesalib-version;-add_xdemos-3.patch"/>
-          (Needed if testing the Xorg installation per BLFS instructions)
+          <ulink url="&patch-root;/MesaLib-&mesalib-version;-add_xdemos-4.patch"/>
+          (Needed if testing the Xorg installation per BLFS instructions).
         </para>
       </listitem>
     </itemizedlist>
@@ -92,14 +129,15 @@
       <xref linkend="expat"/>,
       <xref linkend="libdrm"/>,
       <xref linkend="libxml2"/>,
+      <xref linkend="llvm"/>,
       <xref linkend="makedepend"/> and
       <xref linkend="xorg7-lib"/>
     </para>
 
-    <bridgehead renderas="sect4">Recommended</bridgehead>
+<!--    <bridgehead renderas="sect4">Recommended</bridgehead>
     <para role="recommended">
       <xref linkend="llvm"/>
    </para> -->
@@ -129,25 +167,42 @@
     </note>
 
     <para>
+      If you have downloaded recommended patch, apply it by running the
+      following command:
+    </para>
+<screen><userinput>patch -Np1 -i ../MesaLib-&mesalib-version;-add_xdemos-4.patch</userinput></screen>
+    <para>
       Install <application>MesaLib</application> by running the following
       commands:
     </para>
 
-<screen><userinput>sed 's@FLAGS=\"-g@FLAGS=\"@' -i configure                &amp;&amp;
-patch -Np1 -i ../MesaLib-&mesalib-version;-add_xdemos-3.patch        &amp;&amp;
-patch -Np1 -i ../MesaLib-&mesalib-version;-llvm-3.1-fixes-1.patch    &amp;&amp;
-./configure --prefix=$XORG_PREFIX   \
-            --enable-texture-float  \
-            --enable-gles1          \
-            --enable-gles2          \
-            --enable-xa             \
-            --enable-shared-glapi   \
-            --enable-shared-dricore \
-            --enable-glx-tls        \
-            --with-gallium-drivers="nouveau,r300,r600,svga,swrast" &amp;&amp;
+<screen><userinput>autoreconf -fi &amp;&amp;
+./configure --prefix=/usr                  \
+            --sysconfdir=/etc              \
+            --enable-texture-float         \
+            --enable-gles1                 \
+            --enable-gles2                 \
+            --enable-openvg                \
+            --enable-xa                    \
+            --enable-gbm                   \
+            --enable-gallium-egl           \
+            --enable-gallium-gbm           \
+            --enable-r600-llvm-compiler    \
+            --enable-glx-tls               \
+            --with-egl-platforms="drm,x11" \
+            --with-gallium-drivers="nouveau,r300,r600,radeonsi,svga,swrast" &amp;&amp;
 make</userinput></screen>
 
     <para>
+      If you have applied recommended patch, build the demo programs by
+      running the following command:
+    </para>
+<screen><userinput>make -c xdemos DEMOS_PREFIX=/usr</userinput></screen>
+    <para>
       This package does not come with a test suite.
     </para>
 
@@ -155,37 +210,66 @@
       Now, as the <systemitem class="username">root</systemitem> user:
     </para>
 
-<screen role="root"><userinput>make install &amp;&amp;
-mkdir -pv ${XORG_PREFIX}/share/doc/MesaLib-&mesalib-version; &amp;&amp;
-cp -rfv docs/* ${XORG_PREFIX}/share/doc/MesaLib-&mesalib-version;</userinput></screen>
+<screen role="root"><userinput>make install</userinput></screen>
 
     <para>
-      Finally, if installing to any prefix other than
-      <filename class="directory">/usr</filename>, you should create symlinks
-      to the GL headers in <filename class="directory">/usr/include</filename>.
-      Execute the following command as the
+      If you have built demo programs, install them by running the
+      following command as the
       <systemitem class="username">root</systemitem> user:
     </para>
 
-<screen role="root"><userinput>for GLHEADER in EGL GL GLES GLES2 KHR xa_composite.h xa_context.h xa_tracker.h
-do
-  ln -sfv ${XORG_PREFIX}/include/${GLHEADER} /usr/include/${GLHEADER}
-done</userinput></screen>
+<screen role="root"><userinput>make -C xdemos DEMOS_PREFIX=/usr install</userinput></screen>
 
+    <para>
+      If you would like to save some space, strip the installed libraries
+      by running the following commands as the
+      <systemitem class="username">root</systemitem> user:
+    </para>
+<screen role="root"><userinput>strip --strip-unneeded /usr/lib/{dri,egl,gbm}/*.so   &amp;&amp;
+strip --strip-unneeded /usr/lib/libdricore9.0.0.so.* &amp;&amp;
+strip --strip-unneeded /usr/lib/libxatracker.so.*</userinput></screen>
+    <para>
+      If desired, install the optional documentation by running
+      the following commands as the
+      <systemitem class="username">root</systemitem> user:
+    </para>
+<screen role="root"><userinput>install -v -dm755 /usr/share/doc/MesaLib-&mesalib-version; &amp;&amp; 
+cp -rfv docs/* /usr/share/doc/MesaLib-&mesalib-version;</userinput></screen>
   </sect2>
 
-  <sect2 role="commands">
-    <title>Command Explanations</title>
+  <sect2 role="installation">
+    <title>Installation of GLU</title>
 
     <para>
-      <command>sed 's@FLAGS=\"-g@FLAGS=\"@' -i configure</command>: by default,
-      Mesa builds with debugging symbols. Remove the -g switch from both
-      <envar>CFLAGS</envar> and <envar>CXXFLAGS</envar> with this command.
+      Install <application>GLU</application> by running the following
+      commands:
     </para>
 
+<screen><userinput>./configure --prefix=/usr --disable-static &amp;&amp;
+make</userinput></screen>
     <para>
+      This package does not come with a test suite.
+    </para>
+    <para>
+      Now, as the <systemitem class="username">root</systemitem> user:
+    </para>
+<screen role="root"><userinput>make install</userinput></screen>
+  </sect2>
+  <sect2 role="commands">
+    <title>Command Explanations</title>
+    <para>
       <option>--enable-texture-float</option>: This switch enables
      floating-point textures and render buffers. Please consult
       <filename>docs/patents.txt</filename> to see if there are
@@ -201,33 +285,55 @@
     </para>
 
     <para>
+      <option>--enable-openvg</option>: This switch enables support for
+      OpenVG API.
+    </para>
+    <para>
       <option>--enable-xa</option>: This switch enables building of the
       XA X Acceleration API (Required for VMware 3D Driver).
     </para>
 
     <para>
-      <option>--enable-shared-glapi</option>: This switch enables building
-      of the shared glapi library.
+      <option>--enable-gbm</option>: This switch enables building of the
+      <application>Mesa</application> Graphics Buffer Manager library.
     </para>
 
     <para>
-      <option>--enable-shared-dricore</option>: This switch enables linking
-      of the DRI modules with shared core DRI routines.
+      <option>--enable-gallium-egl</option>: This switch enables optional
+      EGL state tracker for Gallium.
     </para>
 
     <para>
+      <option>--enable-gallium-gbm</option>: This switch enables optional
+      GBM state tracker for Gallium.
+    </para>
+    <para>
+      <option>--enable-r600-llvm-compiler</option>: This switch enables
+      experimental LLVM backend for graphics shaders.
+    </para>
+    <para>
       <option>--enable-glx-tls</option>: This switch enables TLS support
       in GLX.
     </para>
 
     <para>
+      <parameter>--with-egl-platforms="..."</parameter>: This parameter
+      controls for which platforms EGL should be built. Available
+      platforms are drm, x11 and wayland.
+    </para>
+    <para>
       <parameter>--with-gallium-drivers="..."</parameter>: This parameter
-      controls which Gallium drivers should be built. Available drivers are:
-      i915, nouveau, r300, r600, swrast and svga. Note that you will need to
-      remove r300 and r600 from the list if you haven't installed
-      <xref linkend="llvm"/>.
+      controls which Gallium drivers should be built. Available drivers
+      are: i915, nouveau, r300, r600, radeonsi, svga and swrast.
     </para>
 
+    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
+      href="../../xincludes/static-libraries.xml"/>
   </sect2>
 
   <sect2 role="content">
@@ -243,13 +349,18 @@
           glxgears and glxinfo
         </seg>
         <seg>
-          libEGL.so, libglapi.so, libGLESv1_CM.so, libGLESv2.so,
-          libGL.so, libGLU.so and libxatracker.so
+          libdricore9.0.0.so, libEGL.so, libgbm.so, libglapi.so,
+          libGLESv1_CM.so, libGLESv2.so, libGL.so, libGLU.so,
+          libOpenVG.so and libxatracker.so
         </seg>
         <seg>
-          <envar>$XORG_PREFIX</envar>/include/{EGL,GL,GLES,GLES2,KHR},
-          <envar>$XORG_PREFIX</envar>/lib/dri, and
-          <envar>$XORG_PREFIX</envar>/share/doc/MesaLib-&mesalib-version;
+          /usr/include/EGL,
+          /usr/include/GL,
+          /usr/include/GLES,
+          /usr/include/GLES2,
+          /usr/include/KHR,
+          /usr/include/VG and
+          /usr/lib/dri
         </seg>
       </seglistitem>
     </segmentedlist>
@@ -285,12 +396,25 @@
         </listitem>
       </varlistentry>
 
+      <varlistentry id="libdricore">
+        <term><filename class="libraryfile">libdricore9.0.0.so</filename></term>
+        <listitem>
+          <para>
+            contains common DRI routines used by <application>Mesa</application>
+            DRI drivers.
+          </para>
+          <indexterm zone="mesalib libdricore">
+            <primary sortas="c-libdricore">libdricore9.0.0.so</primary>
+          </indexterm>
+        </listitem>
+      </varlistentry>
       <varlistentry id="libEGL">
-        <term><filename class='libraryfile'>libEGL.so</filename></term>
+        <term><filename class="libraryfile">libEGL.so</filename></term>
         <listitem>
           <para>
            provides a native platform graphics interface as
@@ -298,11 +422,48 @@
         </listitem>
       </varlistentry>
 
+      <varlistentry id="libgbm">
+        <term><filename class="libraryfile">libgbm.so</filename></term>
+        <listitem>
+          <para>
+            is the <application>Mesa</application> Graphics Buffer
+            Manager library.            
+          </para>
+          <indexterm zone="mesalib libgbm">
+            <primary sortas="c-libgbm">libgbm.so</primary>
+          </indexterm>
+        </listitem>
+      </varlistentry>
+      <varlistentry id="libGLESv1_CM">
+        <term><filename class="libraryfile">libGLESv1_CM.so</filename></term>
+        <listitem>
+          <para>
+            is the <application>Mesa</application> OpenGL ES 1.1 library.
+          </para>
+          <indexterm zone="mesalib libGLESv1_CM">
+            <primary sortas="c-libGLESv1_CM">libGLESv1_CM.so</primary>
+          </indexterm>
+        </listitem>
+      </varlistentry>
+      <varlistentry id="libGLES2">
+        <term><filename class="libraryfile">libGLES2.so</filename></term>
+        <listitem>
+          <para>
+            is the <application>Mesa</application> OpenGL ES 2.0 library.
+          </para>
+          <indexterm zone="mesalib libGLES2">
+            <primary sortas="c-libGLES2">libGLES2.so</primary>
+          </indexterm>
+        </listitem>
+      </varlistentry>
       <varlistentry id="libGL">
-        <term><filename class='libraryfile'>libGL.so</filename></term>
+        <term><filename class="libraryfile">libGL.so</filename></term>
         <listitem>
           <para>
-            is the main OpenGL library.
+            is the main <application>Mesa</application> OpenGL library.
           </para>
           <indexterm zone="mesalib libGL">
             <primary sortas="c-libGL">libGL.so</primary>
@@ -311,10 +472,11 @@
       </varlistentry>
 
       <varlistentry id="libGLU">
-        <term><filename class='libraryfile'>libGLU.so</filename></term>
+        <term><filename class="libraryfile">libGLU.so</filename></term>
         <listitem>
           <para>
-            is the OpenGL Utility library.
+            is the <application>Mesa</application> OpenGL
+            Utility library.
           </para>
           <indexterm zone="mesalib libGLU">
             <primary sortas="c-libGLU">libGLU.so</primary>
@@ -322,11 +484,23 @@
         </listitem>
       </varlistentry>
 
+      <varlistentry id="libOpenVG">
+        <term><filename class="libraryfile">libOpenVG.so</filename></term>
+        <listitem>
+          <para>
+            is the <application>Mesa</application> OpenVG 1.0 library.
+          </para>
+          <indexterm zone="mesalib libOpenVG">
+            <primary sortas="c-libOpenVG">libOpenVG.so</primary>
+          </indexterm>
+        </listitem>
+      </varlistentry>
       <varlistentry id="libxatracker">
-        <term><filename class='libraryfile'>libxatracker.so</filename></term>
+        <term><filename class="libraryfile">libxatracker.so</filename></term>
         <listitem>
           <para>
-            is the library that provides XA X Acceleration API.
+            is the Xorg Gallium3D acceleration library.
           </para>
           <indexterm zone="mesalib libxatracker">
             <primary sortas="c-libxatracker">libxatracker.so</primary>

