
fichiers modifiés :
   x/lib/xulrunner.xml
   introduction/welcome/changelog.xml

Log :
Xulrunner-30.0: fix build with ac_add_options --enable-shared-js.

Le robot a traité 1 % du commit anglais
Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 13486)
+++ introduction/welcome/changelog.xml	(révision 13487)
@@ -48,6 +48,10 @@
       <para>July 19th, 2014</para>
       <itemizedlist>
         <listitem>
+          <para>[fernando] - Xulrunner-30.0: fix build with
+          <command>ac_add_options --enable-shared-js</command>.</para>
+        </listitem>
+        <listitem>
           <para>[fernando] - Update to MesaLib-10.2.4. Fixes
           <ulink url="&blfs-ticket-root;5281">#5281</ulink>.</para>
         </listitem>

Index: x/lib/xulrunner.xml
===================================================================
--- x/lib/xulrunner.xml	(révision 13486)
+++ x/lib/xulrunner.xml	(révision 13487)
@@ -205,8 +205,7 @@
 ac_add_options --enable-system-ffi
 ac_add_options --enable-system-pixman
 
-# shared-js broken by WeakMapPtr visibility
-#ac_add_options --enable-shared-js
+ac_add_options --enable-shared-js
 ac_add_options --with-pthreads
 
 ac_add_options --with-system-bz2
@@ -234,7 +233,9 @@
       prepend <envar>SHELL=/bin/bash</envar> to the first make command below.
     </para></note>
 
-<screen><userinput>make -f client.mk</userinput></screen>
+<screen><userinput>sed -i '/^template class/s/JS::WeakMapPtr/JS_PUBLIC_API(&amp;)/' \
+       js/src/vm/WeakMapPtr.cpp &amp;&amp;
+make -f client.mk</userinput></screen>
 
     <para>
       This package does not come with a test suite.
@@ -275,6 +276,11 @@
     </para>
 
     <para>
+      <command>sed -i ... js/src/vm/WeakMapPtr.cpp</command>: Fixes build with
+      <command>ac_add_options --enable-shared-js</command>.
+    </para>
+    <para>
       <command>make -f client.mk ...</command>: Mozilla products are packaged to
       allow the use of a configuration file which can be used to pass the
       configuration settings to the <command>configure</command> command.

