Révision 11745

fichiers modifiés :
   introduction/welcome/changelog.xml
   general.ent
   xsoft/office/libreoffice.xml

Log :
Update to LibreOffice-4.1.1. Instructions to optionally build in opt are restored

Le robot a traité 36 % du commit anglais
Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 11744)
+++ introduction/welcome/changelog.xml	(révision 11745)
@@ -48,6 +48,11 @@
       <para>September 2nd, 2013</para>
       <itemizedlist>
         <listitem>
+          <para>[fernando] - Update to LibreOffice-4.1.1. Instructions to
+          optionally build in /opt are restored. Fixes
+          <ulink url="&blfs-ticket-root;4016">#4016</ulink>.</para>
+        </listitem>
+        <listitem>
           <para>[igor] - Update to giflib-5.0.5.  Fixes
           <ulink url="&blfs-ticket-root;4020">#4020</ulink>.</para>
         </listitem>

Index: xsoft/office/libreoffice.xml
===================================================================
--- xsoft/office/libreoffice.xml	(révision 11744)
+++ xsoft/office/libreoffice.xml	(révision 11745)
@@ -134,12 +134,6 @@
       <listitem>
         <para>
           Required patch:
-<ulink url="&patch-root;/libreoffice-&libreoffice-dlversion;-system_poppler-1.patch"/>
-</para>
-</listitem>
-<listitem>
-<para>
-Required patch:
           <ulink url="&patch-root;/libreoffice-&libreoffice-dlversion;-system_neon-1.patch"/>
         </para>
       </listitem>
@@ -289,9 +283,15 @@
     <para>
       In the rest of the page, locales "en-US" and "pt-BR" are examples; the
       user will change them to suit his needs - you might want to read the
-"Command Explanations", further below, before proceeding. Prepare
-<application>LibreOffice</application> for compilation by running the
-following commands:
+      "Command Explanations", further below, before proceeding. Due to the
+      large size of the package, the user may prefer to install in
+      <filename class="directory">/opt</filename>, instead of
+      <filename class="directory">/usr</filename>. In order to do that, replace
+      <filename class="directory">/usr</filename> by
+      <filename class="directory">/opt/libreoffice-&libreoffice-dlversion;</filename>
+      in the rest of the page, except in the commands fixing the menu icons.
+      Prepare <application>LibreOffice</application> for compilation by running
+      the following commands:
     </para>
 
 <screen><userinput>sed -e "/gzip -f/d"   \
@@ -306,7 +306,6 @@
     -i bin/unpack-sources &amp;&amp;
 
 patch -Np1 -i ../libreoffice-&libreoffice-dlversion;-system_neon-1.patch    &amp;&amp;
-patch -Np1 -i ../libreoffice-&libreoffice-dlversion;-system_poppler-1.patch &amp;&amp;
 ./autogen.sh --prefix=/usr              \
              --sysconfdir=/etc          \
              --with-vendor="BLFS"       \
@@ -368,6 +367,25 @@
 mkdir -pv /usr/lib/libreoffice/share/extensions/dict-pt-BR                   &amp;&amp;
 cp -vR dictionaries/pt_BR/* /usr/lib/libreoffice/share/extensions/dict-pt-BR</userinput></screen>
 
+    <para>
+       In the following, do not replace
+       <filename class="directory">/usr</filename> by
+       <filename class="directory">/opt/libreoffice-&libreoffice-dlversion;</filename>.
+       If the prefix used is <filename class="directory">/opt</filename> and
+       there are no icons in the new items of the desktop menu, optionally run
+       the following commands, as <systemitem class="username">root</systemitem>
+       user (it may be necessary to logout the session, before the
+       icons appear):
+    </para>
+<screen role="root"><userinput>mkdir -pv /usr/share/pixmaps &amp;&amp;
+for i in writer base calc draw impress math startcenter writer
+do
+  ln -svf /opt/libreoffice-&libreoffice-dlversion;/share/icons/hicolor/32x32/apps/libreoffice-$i.png \
+          /usr/share/pixmaps/
+done
+unset i</userinput></screen>
   </sect2>
 
   <sect2 role="commands">

