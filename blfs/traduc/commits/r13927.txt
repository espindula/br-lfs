Révision 13927

fichiers modifiés :
   introduction/welcome/changelog.xml
   networking/netprogs/samba.xml
   postlfs/filesystems/parted.xml
   postlfs/security/mitkrb.xml
   packages.ent
   server/databases/sqlite.xml
   general/prog/git.xml

Log :
Parted-3.2 fails to build with --disable-device-mapper. Reported and fixed by Ken M. Update to SQLite-3.8.6. Update to git-2.1.0. Modified docs and man instructions. MIT Kerberos V5-1.12.2: update gpg2, fix configure, install instructions and other parts. Samba-4.1.11: promote libxslt-1.1.28 to Recommended.

Le robot a traité 22 % du commit anglais
Index: general/prog/git.xml
===================================================================
--- general/prog/git.xml	(révision 13926)
+++ general/prog/git.xml	(révision 13927)
@@ -8,11 +8,10 @@
 
   <!ENTITY git-download-http "&git-root;/git-&git-version;.tar.xz">
   <!ENTITY git-download-ftp  "ftp://ftp.kernel.org/pub/software/scm/git/git-&git-version;.tar.xz">
-">
 ]>
 
 <sect1 id="git" xreflabel="git-&git-version;">
@@ -144,6 +143,12 @@
 make</userinput></screen>
 
     <para>
+      You can build the man pages and/or html docs, or
+      use downloaded ones. If you choose to build them, use next two following
+      instructions.
+    </para>
+    <para>
       If you have installed <ulink
       url="http://www.methods.co.nz/asciidoc/">AsciiDoc</ulink> you can
       create the html version of the man pages and other docs:
@@ -173,31 +178,28 @@
 
 <screen role="root"><userinput>make install</userinput></screen>
 
+<!-- ==== Method 1 for docs ====== -->
+    <bridgehead renderas="sect3">If you created the man pages and/or html docs</bridgehead>
     <para>
-If you created the man pages, install them as the
+      Install the man pages as
       <systemitem class="username">root</systemitem> user:
     </para>
 
 <screen role="root"><userinput>make install-man</userinput></screen>
 
     <para>
-If you created the html docs, install them as the
+      Install the html docs as
       <systemitem class="username">root</systemitem> user:
     </para>
 
-<screen role="root"><userinput>make htmldir=/usr/share/doc/git-&git-version; install-html              &amp;&amp;
-mkdir -p /usr/share/doc/git-&git-version;/man-pages/{html,text}         &amp;&amp;
-mv       /usr/share/doc/git-&git-version;/{git*.txt,man-pages/text}     &amp;&amp;
-mv       /usr/share/doc/git-&git-version;/{git*.,index.,man-pages/}html &amp;&amp;
-mkdir    /usr/share/doc/git-&git-version;/technical/{html,text}         &amp;&amp;
-mv       /usr/share/doc/git-&git-version;/technical/{*.txt,text}        &amp;&amp;
-mv       /usr/share/doc/git-&git-version;/technical/{*.,}html           &amp;&amp;
-mkdir    /usr/share/doc/git-&git-version;/howto/{html,text}             &amp;&amp;
-mv       /usr/share/doc/git-&git-version;/howto/{*.txt,text}            &amp;&amp;
-mv       /usr/share/doc/git-&git-version;/howto/{*.,}html</userinput></screen>
+<screen role="root"><userinput>make htmldir=/usr/share/doc/git-&git-version; install-html</userinput></screen>
 
+<!-- ==== Method 2 for docs ====== -->
+    <bridgehead renderas="sect3">If you downloaded the man pages and/or html docs</bridgehead>
     <para>
-Alternatively, If you downloaded the man pages untar them as the
+      If you downloaded the man pages untar them as the
       <systemitem class="username">root</systemitem> user:
     </para>
 
@@ -214,9 +216,17 @@
     -C   /usr/share/doc/git-&git-version; --no-same-owner --no-overwrite-dir &amp;&amp;
 
 find /usr/share/doc/git-&git-version; -type d -exec chmod 755 {} \;     &amp;&amp;
-find /usr/share/doc/git-&git-version; -type f -exec chmod 644 {} \;     &amp;&amp;
+find /usr/share/doc/git-&git-version; -type f -exec chmod 644 {} \;</userinput></screen>
 
-mv       /usr/share/doc/git-&git-version;/{git*.txt,man-pages/text}     &amp;&amp;
+<!-- ==== Reorganize docs ====== -->
+    <bridgehead renderas="sect3">Reorganize man pages and/or html docs (both methods)</bridgehead>
+    <para>
+      For both methods, reorganize the files, as
+      <systemitem class="username">root</systemitem> user:
+    </para>
+<screen role="root"><userinput>mv       /usr/share/doc/git-&git-version;/{git*.txt,man-pages/text}     &amp;&amp;
 mv       /usr/share/doc/git-&git-version;/{git*.,index.,man-pages/}html &amp;&amp;
 mkdir    /usr/share/doc/git-&git-version;/technical/{html,text}         &amp;&amp;
 mv       /usr/share/doc/git-&git-version;/technical/{*.txt,text}        &amp;&amp;
@@ -270,12 +280,6 @@
       permissions in the shipped documentation tar file.
     </para>
 
-<para><option>--libexecdir=/usr/lib</option>: This option puts the
-<filename class="directory">git-core</filename> directory in
-<filename class="directory">/usr/lib</filename> instead of
-<filename class="directory">/usr/libexec</filename> in accordance
-with the old version of the FHS used before LFS-7.5.</para>
   </sect2>
 
   <sect2 role="configuration">

Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 13926)
+++ introduction/welcome/changelog.xml	(révision 13927)
@@ -48,6 +48,30 @@
       <para>August 16th, 2014</para>
       <itemizedlist>
         <listitem>
+          <para>[fernando] - Samba-4.1.11: promote libxslt-1.1.28 to
+          Recommended. Fixes
+          <ulink url="&blfs-ticket-root;5392">#5392</ulink>.</para>
+        </listitem>
+        <listitem>
+          <para>[fernando] - MIT Kerberos V5-1.12.2: update gpg2, fix
+          configure, install instructions and other parts. Fixes
+          <ulink url="&blfs-ticket-root;5390">#5390</ulink>.</para>
+        </listitem>
+        <listitem>
+          <para>[fernando] - Update to git-2.1.0. Modified docs and man
+          instructions. Fixes
+          <ulink url="&blfs-ticket-root;5388">#5388</ulink>.</para>
+        </listitem>
+        <listitem>
+          <para>[fernando] - Update to SQLite-3.8.6. Fixes
+          <ulink url="&blfs-ticket-root;5387">#5387</ulink>.</para>
+        </listitem>
+        <listitem>
+          <para>[fernando] - Parted-3.2 fails to build with
+          --disable-device-mapper. Reported and fixed by Ken M. Fixes
+          <ulink url="&blfs-ticket-root;5386">#5386</ulink>.</para>
+        </listitem>
+        <listitem>
           <para>[igor] - Update to mariadb-10.0.13. Fixes
           <ulink url="&blfs-ticket-root;5355">#5355</ulink>.</para>
         </listitem>

Index: networking/netprogs/samba.xml
===================================================================
--- networking/netprogs/samba.xml	(révision 13926)
+++ networking/netprogs/samba.xml	(révision 13927)
@@ -67,12 +67,16 @@
       <xref linkend="python2"/>
     </para>
 
+    <bridgehead renderas="sect4">Recommended</bridgehead>
+    <para role="required">
+      <xref linkend="libxslt"/> (for documentation)
+    </para>
     <bridgehead renderas="sect4">Optional</bridgehead>
     <para role="optional">
       <xref linkend="avahi"/>,
       <xref linkend="cups"/>,
       <xref linkend="libcap-pam"/>,
-<xref linkend="libxslt"/> (used only for documentation),
       <xref linkend="linux-pam"/>,
       <xref linkend="mitkrb"/>,
       <xref linkend="openldap"/>,

Index: postlfs/filesystems/parted.xml
===================================================================
--- postlfs/filesystems/parted.xml	(révision 13926)
+++ postlfs/filesystems/parted.xml	(révision 13927)
@@ -59,6 +59,16 @@
       </listitem>
     </itemizedlist>
 
+      <bridgehead renderas="sect3">Additional Downloads</bridgehead>
+      <itemizedlist spacing="compact">
+        <listitem>
+          <para>
+             Optional, to fix build without device mapper support:
+            <ulink url="&patch-root;/parted-&parted-version;-devmapper-1.patch"/>
+          </para>
+        </listitem>
+      </itemizedlist>
     <bridgehead renderas="sect3">Parted Dependencies</bridgehead>
 
     <bridgehead renderas="sect4">Recommended</bridgehead>
@@ -79,7 +89,13 @@
 
   <sect2 role="installation">
     <title>Installation of parted</title>
+            
+    <para>
+      If you want to build without device mapper support, a fix is necessary:
+    </para>
 
+<screen><userinput>patch -Np1 -i ../parted-&parted-version;-devmapper-1.patch</userinput></screen>
     <para>
       Install <application>Parted</application> by running the following
       commands:

Index: postlfs/security/mitkrb.xml
===================================================================
--- postlfs/security/mitkrb.xml	(révision 13926)
+++ postlfs/security/mitkrb.xml	(révision 13927)
@@ -118,7 +118,7 @@
       <filename>krb5-&mitkrb-version;.tar.gz.asc</filename>.
     </para>
 
-<screen><userinput>gpg --verify krb5-&mitkrb-version;.tar.gz.asc krb5-&mitkrb-version;.tar.gz</userinput></screen>
+<screen><userinput>gpg2 --verify krb5-&mitkrb-version;.tar.gz.asc krb5-&mitkrb-version;.tar.gz</userinput></screen>
 
     <para>You will probably see output similar to:</para>
 
@@ -129,7 +129,7 @@
       You can import the public key with:
     </para>
 
-<screen><userinput>gpg --keyserver pgp.mit.edu --recv-keys 0xF376813D</userinput></screen>
+<screen><userinput>gpg2 --keyserver pgp.mit.edu --recv-keys 0xF376813D</userinput></screen>
 
     <para>
       Now re-verify the package with the first command above.  You should  get a
@@ -155,6 +155,7 @@
             --localstatedir=/var/lib \
             --with-system-et         \
             --with-system-ss         \
+            --with-system-verto=no   \
             --enable-dns-for-realm &amp;&amp;
 make</userinput></screen>
 
@@ -176,7 +177,7 @@
 
 for LIBRARY in gssapi_krb5 gssrpc k5crypto kadm5clnt kadm5srv \
                kdb5 kdb_ldap krad krb5 krb5support verto ; do
-[ -e  /usr/lib/lib$LIBRARY.so ] &amp;&amp; chmod -v 755 /usr/lib/lib$LIBRARY.so
+    chmod -v 755 /usr/lib/lib$LIBRARY.so
 done &amp;&amp;
 
 mv -v /usr/lib/libkrb5.so.3*        /lib &amp;&amp;
@@ -228,6 +229,14 @@
     </para>
 
     <para>
+      <parameter>--with-system-verto=no</parameter>: This switch fixes a bug in
+      the package: it does not recognize its own verto library installed
+      previously. This is not a problem, if reinstalling the same version,
+      but if you are updating, the old library is used as system's one,
+      instead of installing the new version.
+    </para>
+    <para>
       <parameter>--enable-dns-for-realm</parameter>: This switch allows
       realms to be resolved using the DNS server.
     </para>
@@ -490,7 +499,7 @@
           libgssapi_krb5.so, libgssrpc.so, libk5crypto.so, libkadm5clnt_mit.so,
           libkadm5clnt.so, libkadm5srv_mit.so, libkadm5srv.so, libkdb_ldap.so
           (optional), libkdb5.so, libkrad.so, libkrb5.so, libkrb5support.so,
-and some plugins under the /usr/lib/krb5 tree
+          libverto.so, and some plugins under the /usr/lib/krb5 tree
         </seg>
         <seg>
           /usr/include/gssapi,
@@ -499,7 +508,8 @@
           /usr/include/krb5,
           /usr/lib/krb5,
           /usr/share/doc/krb5-&mitkrb-version;,
-/usr/share/examples/krb5 and
+          /usr/share/examples/krb5,
+          /usr/share/gnats/, and
           /var/lib/krb5kdc
         </seg>
       </seglistitem>

