Révision 15694

fichiers modifiés :
   introduction/welcome/changelog.xml
   networking/netutils/wireshark.xml
   networking/netlibs/libpcap.xml
   packages.ent

Log :
Update to lipcap-1.7.2 and wireshark-1.12.4

Le robot a traité 38 % du commit anglais
Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 15693)
+++ introduction/welcome/changelog.xml	(révision 15694)
@@ -48,6 +48,14 @@
       <para>March 23rd, 2015</para>
       <itemizedlist>
         <listitem>
+          <para>[pierre] - Update to Wireshark-1.12.4. Fixes
+          <ulink url="&blfs-ticket-root;6204">#6204</ulink>.</para>
+        </listitem>
+        <listitem>
+          <para>[pierre] - Update to Libpcap-1.7.2. Fixes
+          <ulink url="&blfs-ticket-root;6242">#6242</ulink>.</para>
+        </listitem>
+        <listitem>
           <para>[bdubbs] - Update to libva-1.5.1 / libva-intel-driver-1.5.1. Fixes
           <ulink url="&blfs-ticket-root;6293">#6293</ulink>.</para>
         </listitem>

Index: networking/netlibs/libpcap.xml
===================================================================
--- networking/netlibs/libpcap.xml	(révision 15693)
+++ networking/netlibs/libpcap.xml	(révision 15694)
@@ -153,7 +153,7 @@
           pcap-config
         </seg>
         <seg>
-libpcap.{a,so}
+          libpcap.so, libpcap.a (optional)
         </seg>
         <seg>
           /usr/include/pcap

Index: networking/netutils/wireshark.xml
===================================================================
--- networking/netutils/wireshark.xml	(révision 15693)
+++ networking/netutils/wireshark.xml	(révision 15694)
@@ -29,15 +29,20 @@
   <sect2 role="package">
     <title>Introduction to Wireshark</title>
 
-<para>The <application>Wireshark</application> package contains a network
-protocol analyzer, also known as a <quote>sniffer</quote>. This is useful
-for analyzing data captured <quote>off the wire</quote> from a live network
-connection, or data read from a capture file.
-<application>Wireshark</application> provides both a graphical and a TTY-mode
-front-end for examining captured network packets from over 500 protocols,
-as well as the capability to read capture files from many other popular
-network analyzers.</para>
+    <para>
+      The <application>Wireshark</application> package contains a network
+      protocol analyzer, also known as a <quote>sniffer</quote>. This is useful
+      for analyzing data captured <quote>off the wire</quote> from a live
+      network connection, or data read from a capture file.
+    </para>
 
+    <para>
+      <application>Wireshark</application> provides both a graphical and a
+      TTY-mode front-end for examining captured network packets from over 500
+      protocols, as well as the capability to read capture files from many
+      other popular network analyzers.
+    </para>
     &lfs77_checked;
 
     <bridgehead renderas="sect3">Package Information</bridgehead>
@@ -66,33 +71,30 @@
     <itemizedlist spacing="compact">
       <listitem>
         <para>
-Required patch:
-<ulink url="&patch-root;/wireshark-&wireshark-version;-lua_5_3_0-1.patch"/>
+          Optional patch:
+          <ulink url=
+              "&patch-root;/wireshark-&wireshark-version;-lua_5_3_0-1.patch"/>
+          (allows to build the LUA bindings if <xref linkend="lua"/> is
+          installed and LUA is not disabled by passing <option>--without-lua
+          </option> to <command>configure</command>)
         </para>
       </listitem>
       <listitem>
@@     @@
       </listitem>
     </itemizedlist>
 
-<para>From this page you can download many different docs in a variety
-of formats.</para>
     <bridgehead renderas="sect3">Wireshark dependencies</bridgehead>
 
     <bridgehead renderas="sect4">Required</bridgehead>
@@     @@
      <xref linkend="glib2"/>
     </para>
 
-<para>Note that you need <application>Gtk+</application> or
-<application>Qt4</application> installed, otherwise, pass
-<option>--disable-wireshark</option> to the
-<command>configure</command> command. SBU and disk space required are larger
-for the Qt GUI.</para>
     <bridgehead renderas="sect4">Recommended</bridgehead>
     <para role="recommended">
       <xref linkend="gtk3"/> (to build the <application>Gtk+3</application>
@@ -112,99 +114,135 @@
       <ulink url="http://www.portaudio.com/download.html">PortAudio</ulink>
     </para>
 
-<bridgehead renderas="sect4">Optional (to build the GUI front-end)</bridgehead>
+    <bridgehead renderas="sect4">Optional (to build more GUI front-ends)
+    </bridgehead>
     <para role="optional">
       <xref linkend="gtk2"/>,
       <xref linkend="qt4"/>, or 
       <xref linkend="qt5"/>
     </para>
 
-<para condition="html" role="usernotes">User Notes:
-<ulink url="&blfs-wiki;/wireshark"/></para>
+    <note>
+      <para>
+        The <application>GTK+</application> GUI needs one of <xref linkend=
+        "gtk2"/> or <xref linkend="gtk3"/>. If both are installed, GTK+3
+        is used by default.
+      </para>
 
+      <para>
+        The <application>Qt</application> GUI needs one of <xref linkend=
+        "qt4"/> or <xref linkend="qt5"/>. If both are installed, Qt5
+        is used by default.
+      </para>
+      <para>
+        Both GTK+ and Qt GUI can be built at the same time. If you want to
+        override the defaults, some configure switches have to be set
+        (see <quote>Command Explanations</quote>) or some special instructions
+        have to be issued (see below) when both Qt4 and Qt5 are installed and
+        you want to use Qt4.  SBU and disk space required are larger for the
+        Qt GUI. The instructions below suppose you only want to build the
+        GTK+3 GUI.
+      </para>
+    </note>
+    <para condition="html" role="usernotes">
+      User Notes: <ulink url="&blfs-wiki;/wireshark"/>
+    </para>
   </sect2>
 
   <sect2 role="kernel" id="wireshark-kernel">
@@     @@
   <sect2 role="installation">
     <title>Installation of Wireshark</title>
 
-<para>Optionally, fix the description of the program in the title.
-The first change overwrites the default "SVN Unknown" in the title
-and the second overwrites a utility script that resets the version
-to "unknown".</para>
+    <para>
+      Optionally, fix the description of the program in the title.
+      The first change overwrites the default <quote>SVN Unknown</quote> in
+      the title and the second overwrites a utility script that resets the
+      version to <quote>unknown</quote>.
+    </para>
 
<screen><userinput>cat > svnversion.h &lt;&lt; "EOF" &amp;&amp;
 #define SVNVERSION "BLFS"
@@     @@
 EOF
 
 cat > make-version.pl &lt;&lt; "EOF"
-#!/usr/bin/perl
+<literal>#!/usr/bin/perl</literal>
 EOF</userinput></screen>
 
    <para>
@@     @@
 
 <screen role="root"><userinput>groupadd -g 62 wireshark</userinput></screen>
 
-<para>If you have <application>GTK+2</application> and 3, and
-<application>Qt4</application> and 5, one GUI linked to
-<application>GTK+3</application> and another one linked to
-<application>Qt5</application> are built, by default. Instead, we chose to
-only build the <application>GTK+3</application> GUI, as the BLFS default.
-If you prefer otherwise, some modifications are mecessary. For
-modifications in the <command>configure</command> switches, see
-"Command Explanations".</para>
+    <para>
+      If you want to build a Qt GUI and have both <application>Qt4
+      </application> and 5 installed, issue either:
+    </para>
 
-<para>If you want to build a Qt GUI and have both
-<application>Qt4</application> and 5 installed, issue either:</para>
 <screen><userinput>source setqt5</userinput></screen>
 
    <para>
@@     @@
 <screen><userinput>patch -Np1 -i ../wireshark-&wireshark-version;-lua_5_3_0-1.patch  &amp;&amp;
 
 ./configure --prefix=/usr     \
---with-gtk3=yes   \
---with-qt=no      \
+            --with-gtk3       \
+            --without-qt      \
             --sysconfdir=/etc &amp;&amp;
 make</userinput></screen>
 
@@ -219,6 +257,7 @@
       ln -s -v -f $FILENAME .
    done &amp;&amp;
 popd &amp;&amp;
+unset FILENAME
 
 install -v -m644 -D wireshark.desktop \
                     /usr/share/applications/wireshark.desktop &amp;&amp;
@@ -229,20 +268,28 @@
 <screen role="root"><userinput>chown -v root:wireshark /usr/bin/{tshark,dumpcap} &amp;&amp;
 chmod -v 6550 /usr/bin/{tshark,dumpcap}</userinput></screen>
 
-<para>Finally, add any users to the wireshark group (as root user):</para>
+    <para>
+      Finally, add any users to the wireshark group (as <systemitem class=
+      "username">root</systemitem> user):
+    </para>
 
 <screen role="root"><userinput>usermod -a -G wireshark &lt;username&gt;</userinput></screen>
 
@@ -251,27 +298,40 @@
      and <command>make</command> does not complete.
    </para>
 
-<para><option>--disable-wireshark</option>: This option is required if you
-have <application>GTK+</application> installed but do not want to build
-the GTK+ and Qt GUIs.</para>
+    <para>
+      <parameter>--with-gtk3</parameter>: By default, the build machinery
+      will build a GUI for both Qt and GTK+, if those libraries are found.
+      If Qt is installed and you do not want the GUI for it to be built,
+      you need to pass <parameter>--without-qt</parameter> to the configure
+      script. That overrides the default, so that you must specify
+      <parameter>--with-gtk3</parameter>  or <parameter>--with-gtk2</parameter>
+      in order to have the GTK+ GUI built.
+    </para>
 
-<para><parameter>--with-gtk3=yes</parameter>: This switch is required
-to use <application>GTK+3</application> for the GUI, if you are using
-<parameter>--with-qt=no</parameter>. Change gtk3 by gtk2,to use
-<application>GTK+3</application> for the GUI.</para>
+    <para>
+      <parameter>--without-qt</parameter>: disables building of the Qt GUI.
+    </para>
 
-<para><parameter>--with-qt=no</parameter>: This switch disables build of
-the Qt GUI. Replace "no" by "yes", if you want it to be built.</para>
+    <para>
+      <option>--disable-wireshark</option>: Use this switch if you
+      have <application>GTK+</application> installed but do not want to build
+      any of the GUIs.
+    </para>
 
-<para><option>--with-gtk2=yes</option>: This option is required if you want
-to use <application>GTK+</application>2, instead of 3, for the GUI. Notice
-that the GUI for only one GTK+ version (either 2 or 3) can be built.</para>
+    <para>
+      <option>--with-gtk2</option>: Use this option if you want
+      the <application>GTK+2</application> GUI.
+      Notice that the GUI for only one GTK+ version (either 2 or 3) can be
+      built.
+    </para>
 
   </sect2>
 
@@ -352,7 +412,7 @@
       <seglistitem>
         <seg>capinfos, captype, dftest, dumpcap, editcap, mergecap, randpkt,
         rawshark, reordercap, text2pcap, tshark,
-wireshark and wireshark-qt</seg>
+        wireshark, and optionally wireshark-qt</seg>
         <seg>libfiletap.so, libwireshark.so, libwiretap.so, libwsutil.so, and
         numerous modules under /usr/lib/wireshark/plugins</seg>
         <seg>/usr/lib/wireshark, /usr/share/doc/wireshark-&wireshark-version;,

