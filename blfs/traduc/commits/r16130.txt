Révision 16130

fichiers modifiés :
   introduction/welcome/changelog.xml
   xsoft/graphweb/firefox.xml
   xsoft/graphweb/seamonkey.xml
   xsoft/other/thunderbird.xml

Log :
Firefox-38.0.5, SeaMonkey-2.33.1 and Thunderbird-38.0.1 fixes to build with FreeType-2.6.

Le robot a traité 13 % du commit anglais
Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 16129)
+++ introduction/welcome/changelog.xml	(révision 16130)
@@ -48,6 +48,11 @@
       <para>June 15th, 2015</para>
       <itemizedlist>
         <listitem>
+          <para>[fernando] - Firefox-38.0.5, SeaMonkey-2.33.1 and
+          Thunderbird-38.0.1 fixes to build with FreeType-2.6.  Fixes
+          <ulink url="&blfs-ticket-root;6611">#6611</ulink>.</para>
+        </listitem>
+        <listitem>
           <para>[fernando] - Update to fontforge-20150612.  Fixes
           <ulink url="&blfs-ticket-root;6607">#6607</ulink>.</para>
         </listitem>

Index: xsoft/graphweb/firefox.xml
===================================================================
--- xsoft/graphweb/firefox.xml	(révision 16129)
+++ xsoft/graphweb/firefox.xml	(révision 16130)
@@ -233,19 +233,11 @@
 mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/firefox-build-dir</literal>
 EOF</userinput></screen>
 
+    <para>
+      First, fix building with system freetype-2.6 or later:
     </para>
 
-<screen><userinput>test $(uname -m) = "i686" &amp;&amp; sed -i 's/enable-optimize/&amp;=-O2/' mozconfig || true</userinput></screen>
-</note>-->
+<screen><userinput>sed -i '/^ftglyph.h/ i ftfntfmt.h' config/system-headers</userinput></screen>
 
     <para>
       Compile <application>Firefox</application> by issuing the following

Index: xsoft/graphweb/seamonkey.xml
===================================================================
--- xsoft/graphweb/seamonkey.xml	(révision 16129)
+++ xsoft/graphweb/seamonkey.xml	(révision 16130)
@@ -241,18 +241,11 @@
 mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/moz-build-dir</literal>
 EOF</userinput></screen>
 
-<note><para>
-There is a problem on i686 systems when building
-<application>SeaMonkey</application> with <application>gcc</application>
-versions ranging from 4.8 to 4.9.1 and using the switch
-<quote>--enable-optimize</quote>. There are two alternatives. The best
-one is to upgrade <application>gcc</application> to version 4.9.2 or later
-because it will give better perfomance and smaller binaries.  However, if
-you do not wish to upgrade gcc, reduce the level of optimization with:
+    <para>
+      First, fix building with system freetype-2.6 or later:
     </para>
 
-<screen><userinput>test $(uname -m) = "i686" &amp;&amp; sed -i 's/enable-optimize/&amp;=-O2/' mozconfig || true</userinput></screen>
-</note>
+<screen><userinput>sed -i '/^ftglyph.h/ i ftfntfmt.h' mozilla/config/system-headers</userinput></screen>
 
     <note><para>
       If you are compiling <application>SeaMonkey</application> in chroot, make

Index: xsoft/other/thunderbird.xml
===================================================================
--- xsoft/other/thunderbird.xml	(révision 16129)
+++ xsoft/other/thunderbird.xml	(révision 16130)
@@ -242,20 +242,16 @@
ac_add_options --with-system-zlib</literal>
EOF</userinput></screen>
 
-# Build broken with system freetype-2.6
-ac_add_options --enable-tree-freetype</literal>
-EOF</userinput></screen>
-<!--
     <para>
-First, a bug needs to be fixed. Notice that thunderbuild needs to match
-the value used in mozconfig (above) for the object directory (MOZ_OBJDIR):
+      First, fix building with system freetype-2.6 or later:
     </para>
 
-<!-\- might be necessary
-test $(uname -m) = "i686" && sed -i 's/enable-optimize/disable-optimize/' mozconfig || true &&-\->
-<screen><userinput>mkdir -vp mozilla/thunderbuild</userinput></screen>-->
+<!-- might be necessary
+test $(uname -m) = "i686" && sed -i 's/enable-optimize/disable-optimize/' mozconfig || true &&-->
+<screen><userinput>sed -i '/^ftglyph.h/ i ftfntfmt.h' mozilla/config/system-headers</userinput></screen>
 
     <para>
       Compile <application>Thunderbird</application> by issuing the following

