Révision 16664

fichiers modifiés :
   pst/typesetting/asymptote.xml
   introduction/welcome/changelog.xml

Log :
asymptote: remove the workaround for current libgsl, replace it by a conditional sed to implement the upstream fix.

Le robot a traité 10 % du commit anglais
Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 16663)
+++ introduction/welcome/changelog.xml	(révision 16664)
@@ -43,11 +43,15 @@
       <para>November 16th, 2015</para>
       <itemizedlist>
         <listitem>
+          <para>[ken] - Fix a build failure in asymptote-2.35 with
+          current libgsl. Fixes
+          <ulink url="&blfs-ticket-root;7104">#7104</ulink>.</para>
+        </listitem>
+        <listitem>
           <para>[bdubbs] - Add a modification from upstream to xmlto to fix a
           regression when cleaning up.</para>
         </listitem>

Index: pst/typesetting/asymptote.xml
===================================================================
--- pst/typesetting/asymptote.xml	(révision 16663)
+++ pst/typesetting/asymptote.xml	(révision 16664)
@@ -71,8 +71,6 @@
       </listitem>
     </itemizedlist>
 
-<bridgehead renderas="sect3">Asymptote Dependencies</bridgehead>
     <bridgehead renderas="sect4">Required</bridgehead>
     <para role="required">
       <xref linkend="gs"/>,
@@ -88,10 +86,7 @@
     <bridgehead renderas="sect4">Optional</bridgehead>
     <para role="optional">
       <ulink url="http://www.fftw.org/">FFTW</ulink>,
-<!-- link to an external version until asymptote is altered
-to build with libgsl-2
-<xref linkend="gsl"/> -->
-<ulink url="http://ftp.gnu.org/pub/gnu/gsl/">libgsl</ulink> (versions &lt; 2.0)
+      <xref linkend="gsl"/>
     </para>
 
     <bridgehead renderas="sect4">Optional (at runtime, to use xasy)</bridgehead>
@@ -115,6 +110,13 @@
     <title>Installation of asymptote</title>
 
     <para>
+      If you have installed version 2 of libgsl, fix a build failure:
+    </para>
+<screen><userinput>sed -i -e '/ellint_D/s/3/2/' \
+sed    -e '/ellint_D/s/.SYM(n)//' gsl.cc</userinput></screen>
+    <para>
       Install <application>asymptote</application> by running the following
       commands:
     </para>
@@ -128,8 +130,7 @@
  --mandir=/opt/texlive/&texlive-year;/texmf-dist/doc/man \
  --enable-gc=system \
  --with-latex=/opt/texlive/&texlive-year;/texmf-dist/tex/latex \
---with-context=/opt/texlive/&texlive-year;/texmf-dist/tex/context/third \
---disable-gsl &amp;&amp;
+ --with-context=/opt/texlive/&texlive-year;/texmf-dist/tex/context/third &amp;&amp;
 make</userinput></screen>
 
     <para>
@@ -160,6 +161,10 @@
       <emphasis>will</emphasis> be found by <command>info</command>.
     </para>
 
+    <para><parameter>sed ...</parameter>: change the reference to
+    <literal>gsl_sf_ellint_D</literal> to use addGSLDOUBLE2Func and to therefore
+    omit the last parameter, for gsl major version 2.</para>
     <para><parameter>--libdir=/opt/texlive/&texlive-year;/texmf-dist;</parameter>:
     This parameter ensures that the <filename class="directory">asymptote</filename>
     directory will similarly overwrite any files installed by install-tl-unx.</para>
@@ -173,14 +178,6 @@
     <application>texlive</application> directories instead of creating a
     <filename class="directory">texmf-local</filename> directory for them.</para>
 
-<para><parameter>--disable-gsl</parameter>: if a current version of libgsl has
-been installed, the configure script will attempt to use it and the build will
-fail because of changes in that library. Remove this switch if you have installed
-an older version of libgsl instead of the current version. It is believed that
-few people need to link asymptote to libgsl: if you are one of those people,
-please consider updating the user notes to explain what libgsl brings to
-asymptote.</para>
   </sect2>
 
   <sect2 role="content">

