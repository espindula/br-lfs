Révision 12729

fichiers modifiés :
   general/prog/gcc.xml
   general/prog/pygobject2.xml
   general/prog/dbus-python.xml
   general/prog/py2cairo.xml
   general/graphlib/freetype2.xml
   general/genlib/gobject-introspection.xml
   general/genlib/js.xml
   general/genlib/nspr.xml
   general/genlib/libgpg-error.xml
   general/genlib/libgcrypt.xml
   general/genlib/dbus-glib.xml
   networking/connect/dhcp.xml
   postlfs/security/shadow.xml
   postlfs/security/polkit.xml
   postlfs/security/linux-pam.xml
   postlfs/security/cracklib.xml
   postlfs/editors/nano.xml
   pst/xml/docbook-xsl.xml
   pst/xml/docbook.xml
   x/lib/cairo.xml

Log :
Fixes and tags. Thanks Armin K.

Le robot a traité 16 % du commit anglais
Index: general/genlib/dbus-glib.xml
===================================================================
--- general/genlib/dbus-glib.xml	(révision 12728)
+++ general/genlib/dbus-glib.xml	(révision 12729)
@@ -35,7 +35,7 @@
       <application>D-Bus</application> API.
     </para>
 
-&lfs74_checked;
+    &lfs75_checked;
 
     <bridgehead renderas="sect3">Package Information</bridgehead>
     <itemizedlist spacing="compact">

Index: general/genlib/gobject-introspection.xml
===================================================================
--- general/genlib/gobject-introspection.xml	(révision 12728)
+++ general/genlib/gobject-introspection.xml	(révision 12729)
@@ -37,7 +37,7 @@
       machine readable format.
     </para>
 
-&lfs74_checked;
+    &lfs75_checked;
 
     <bridgehead renderas="sect3">Package Information</bridgehead>
     <itemizedlist spacing="compact">

Index: general/genlib/js.xml
===================================================================
--- general/genlib/js.xml	(révision 12728)
+++ general/genlib/js.xml	(révision 12729)
@@ -36,7 +36,7 @@
       written in C/C++.
     </para>
 
-&lfs74_checked;
+    &lfs75_checked;
 
     <bridgehead renderas="sect3">Package Information</bridgehead>
     <itemizedlist spacing="compact">

Index: general/genlib/libgcrypt.xml
===================================================================
--- general/genlib/libgcrypt.xml	(révision 12728)
+++ general/genlib/libgcrypt.xml	(révision 12729)
@@ -38,7 +38,7 @@
       API.
     </para>
 
-&lfs74_checked;
+    &lfs75_checked;
 
     <bridgehead renderas="sect3">Package Information</bridgehead>
     <itemizedlist spacing="compact">

Index: general/genlib/libgpg-error.xml
===================================================================
--- general/genlib/libgpg-error.xml	(révision 12728)
+++ general/genlib/libgpg-error.xml	(révision 12729)
@@ -35,7 +35,7 @@
       <application>GnuPG</application> components.
     .</para>
 
-&lfs74_checked;
+    &lfs75_checked;
 
     <bridgehead renderas="sect3">Package Information</bridgehead>
     <itemizedlist spacing="compact">

Index: general/genlib/nspr.xml
===================================================================
--- general/genlib/nspr.xml	(révision 12728)
+++ general/genlib/nspr.xml	(révision 12729)
@@ -36,7 +36,7 @@
       platform-neutral API for system level and libc like functions.
     </para>
 
-&lfs74_checked;
+    &lfs75_checked;
 
     <bridgehead renderas="sect3">Package Information</bridgehead>
     <itemizedlist spacing="compact">

Index: general/prog/dbus-python.xml
===================================================================
--- general/prog/dbus-python.xml	(révision 12728)
+++ general/prog/dbus-python.xml	(révision 12729)
@@ -29,7 +29,7 @@
         <application>D-Bus</application>.
       </para>
 
-&lfs74_checked;
+      &lfs75_checked;
 
       <bridgehead renderas="sect4">Package Information</bridgehead>
       <itemizedlist spacing="compact">
@@ -107,8 +107,7 @@
 <screen><userinput>mkdir python2 &amp;&amp;
 pushd python2 &amp;&amp;
 PYTHON=/usr/bin/python     \
-../configure --prefix=/usr \
---docdir=/usr/share/doc/dbus-python-&dbus-python-version; &amp;&amp;
+../configure --prefix=/usr --docdir=/usr/share/doc/dbus-python-&dbus-python-version; &amp;&amp;
 make &amp;&amp;
 popd</userinput></screen>
 
@@ -125,8 +124,7 @@
 <screen><userinput>mkdir python3 &amp;&amp;
 pushd python3 &amp;&amp;
 PYTHON=/usr/bin/python3    \
-../configure --prefix=/usr \
---docdir=/usr/share/doc/dbus-python-&dbus-python-version; &amp;&amp;
+../configure --prefix=/usr --docdir=/usr/share/doc/dbus-python-&dbus-python-version; &amp;&amp;
 make &amp;&amp;
 popd</userinput></screen>
 

Index: general/prog/gcc.xml
===================================================================
--- general/prog/gcc.xml	(révision 12728)
+++ general/prog/gcc.xml	(révision 12729)
@@ -44,7 +44,7 @@
     Many consider the Iced Tea version to be a more robust Java environment
     than the one provided by <application>GCC</application>.</para>
 
-&lfs74_checked;
+    &lfs75_checked;
 
     <caution>
       <para>If you are upgrading <application>GCC</application> from any other
@@ -85,9 +85,6 @@
 
     <bridgehead renderas="sect3">GCC Dependencies</bridgehead>
 
-<bridgehead renderas="sect4">Recommended</bridgehead>
-<para role="recommended"><xref linkend="dejagnu"/></para>
     <bridgehead renderas="sect4">Required if building java</bridgehead>
     <para role="required">
       <xref linkend="zip"/>,
@@ -95,6 +92,11 @@
       <xref linkend="which"/>
     </para>
 
+    <bridgehead renderas="sect4">Recommended</bridgehead>
+    <para role="recommended">
+      <xref linkend="dejagnu"/>
+    </para>
     <note>
       <para>If you plan to compile Ada, you will need to install
       <application>GNAT</application> temporarily to satisfy the circular
@@ -163,11 +164,7 @@
   <sect2 role="installation">
     <title>Installation of GCC</title>
 
-<para>Install <application>GCC</application> by running the
-following commands:</para>
     <important>
       <para>The installation process may overwrite your existing
       <application>GCC</application> <command>gcc</command> and
@@ -183,50 +180,51 @@
       url="&lfs-root;/chapter06/gcc.html"/>).</para>
     </important>
 
-<para>The instructions below let the build machinery perform a
-<quote>bootstrap</quote> intentionally. This is necessary if you
-install the <application>Ada</application> compiler anyway. Even
-if you don't, a bootstrap is recommended for robustness.</para>
+    <para>The instructions below will make sure that <quote>bootstrap</quote>
+    is preformed intentionally. This is necessary if the
+    <application>Ada</application> compiler is being built anyway. Even if it
+    isn't, a bootstrap is recommended for robustness. To disable bootstrap
+    anyways, pass <parameter>--disable-bootstrap</parameter> to the
+    <command>./configure</command> options below.</para>
 
+    <para>Install <application>GCC</application> by running the
+    following commands:</para>
 <screen><userinput>sed -i 's/\(install.*:\) install-.*recursive/\1/' libffi/Makefile.in         &amp;&amp;
 sed -i 's/\(install-data-am:\).*/\1/'             libffi/include/Makefile.in &amp;&amp;
-sed -i 's/install_to_$(INSTALL_DEST) //'          libiberty/Makefile.in      &amp;&amp;
-sed -i 's@\./fixinc\.sh@-c true@'                 gcc/Makefile.in            &amp;&amp;
 
 case `uname -m` in
       i?86) sed -i 's/^T_CFLAGS =$/&amp; -fomit-frame-pointer/' gcc/Makefile.in ;;
 esac &amp;&amp;
 
+sed -i -e /autogen/d -e /check.sh/d fixincludes/Makefile.in 
+mv -v libmudflap/testsuite/libmudflap.c++/pass41-frag.cxx{,.disable}
 mkdir ../gcc-build &amp;&amp;
 cd    ../gcc-build &amp;&amp;
 
 ../gcc-&gcc-version;/configure          \
     --prefix=/usr               \
     --libdir=/usr/lib           \
---libexecdir=/usr/lib       \
     --enable-shared             \
     --enable-threads=posix      \
     --enable-__cxa_atexit       \
+    --enable-clocale=gnu        \
     --disable-multilib          \
---disable-bootstrap         \
---disable-install-libiberty \
     --with-system-zlib          \
---enable-clocale=gnu        \
     --enable-lto                \
     --enable-languages=c,c++,fortran,ada,go,java,objc,obj-c++ &amp;&amp;
make</userinput></screen>
 
-<para>If you have installed additional packages such as valgrind and gdb,
-the gcc part of the testsuite will run more tests than in LFS. 
-Some of those will report FAIL and others XPASS (pass when expected
-to FAIL).  To run the checks:</para>
+    <para>If you have installed additional packages such as
+    <application>Valgrind</application> and <application>GDB</application>,
+    the <application>GCC</application> part of the testsuite will run more
+    tests than in LFS. Some of those will report FAIL and others XPASS
+    (pass when expected to FAIL). To run the tests, issue:</para>
 
<screen><userinput>ulimit -s 32768 &amp;&amp;
 make -k check   &amp;&amp;
@@ -238,18 +236,13 @@
 ln -v -sf ../usr/bin/cpp /lib &amp;&amp;
 ln -v -sf gcc /usr/bin/cc     &amp;&amp;
 
+mkdir -pv /usr/share/gdb/auto-load/usr/lib              &amp;&amp;
+mv -v /usr/lib/*gdb.py /usr/share/gdb/auto-load/usr/lib &amp;&amp;
 chown -v -R root:root \
     /usr/lib/gcc/*linux-gnu/&gcc-version;/include{,-fixed} \
     /usr/lib/gcc/*linux-gnu/&gcc-version;/ada{lib,include}</userinput></screen>
 
-<screen role="root"><userinput>ln -v -sf `find /usr/lib/gcc -name ffitarget.h` /usr/include</userinput></screen>-->
     <para>You should now remove the <application>GNAT</application>
     installation and perform other cleanups:</para>
 
@@ -265,8 +258,8 @@
     <para>The first two <command>sed</command> commands prevent the
     installation of the <application>libffi</application> library bundled
     with <application>GCC</application>, since it is outdated compared to
-<xref linkend="libffi"/>. The three other <command>sed</command> commands
-are the same ones used during the build of LFS.</para>
+    <xref linkend="libffi"/>. The following three commands are the same
+    ones used during the build of LFS.</para>
 
     <para><command>mkdir ../gcc-build; cd ../gcc-build</command>: The
     <application>GCC</application> documentation recommends
@@ -276,23 +269,18 @@
     --enable-__cxa_atexit</parameter>: These parameters are required to build
     the <application>C++</application> libraries to published standards.</para>
 
-<para><parameter>--disable-multilib</parameter>: This parameter ensures
-that files are created for the specific architecture of your computer.</para>
-<!-- Double dashes are forbidden in comments, so use "- -". Change it to
-double dash if you ever remove this comment!
-<para><parameter>- -enable-bootstrap</parameter>: This parameter is used
-so that a bootstrap installation is performed.</para>
--->
     <para><parameter>--enable-clocale=gnu</parameter>: This parameter is a
     failsafe for incomplete locale data.</para>
 
+    <para><parameter>--disable-multilib</parameter>: This parameter ensures
+    that files are created for the specific architecture of your computer.</para>
     <para><parameter>--enable-lto</parameter>: Setting this parameter allows
    to build a compiler which is able to perform <quote>Link Time
    Optimization (LTO)</quote>.</para>
 
     <para>
-<parameter>--enable-languages=c,c++,fortran,java,objc,obj-c++,ada,go</parameter>:
+    <parameter>--enable-languages=c,c++,fortran,ada,go,java,objc,obj-c++</parameter>:
     This command identifies which languages to build. You may modify
     this command to remove undesired languages.</para>
 
@@ -310,7 +298,7 @@
 
     <para><command>ln -v -sf ../usr/bin/cpp /lib</command>: This command
     creates a link to the C PreProcessor as some packages expect it to be
-installed in the <filename class='directory'>/lib</filename>
+    installed in the <filename class="directory">/lib</filename>
     directory.</para>
 
     <para><command>ln -v -sf gcc /usr/bin/cc</command>: This link is created as
@@ -319,8 +307,8 @@
     <para><command>chown -v -R root:root
     /usr/lib/gcc/*linux-gnu/...</command>:
     If the package is built by a user other than root, the ownership of the
-installed <filename class='directory'>include</filename> and
-<filename class='directory'>adalib</filename> directories (and their
+    installed <filename class="directory">include</filename> and
+    <filename class="directory">adalib</filename> directories (and their
     contents) will be incorrect. These commands change the ownership to the
     <systemitem class="username">root</systemitem> user and group . Omit the
     command changing the Ada directories if you did not include Ada as one of
@@ -337,21 +325,27 @@
       <segtitle>Installed Directories</segtitle>
 
       <seglistitem>
-<seg>aot-compile, gappletviewer, gc-analyze, gccgo, gcj, gcj-dbtool,
-gcjh, gfortran, gij, gjar, gjarsigner, gjavah, gkeytool,
-gnat, gnatbind, gnatchop, gnatclean, gnatfind, gnative2ascii, gnatkr,
-gnatlink, gnatls, gnatmake, gnatname, gnatprep, gnatxref, gorbd,
-grmic, grmid, grmiregistry, gserialver, gtnameserv, jcf-dump,
-jv-convert, rebuild-gcj-db, and architecture specific names</seg>
-<seg>libgcj_bc.so, libgcj.so, libgcj-tools.so, libgfortran.{so,a},
-libgij.so, libgo.{so,a}, libgobegin.a, libobjc.{so,a} and numerous other
-run-time libraries and executables in /usr/lib/gcc</seg>
-<seg>/usr/include/c++/&gcc-version;/{gcj,gnu,java,javax,org,sun},
-/usr/lib/gcc/&lt;arch-model&gt;-linux-gnu/&gcc-version;/ada{include,lib},
-/usr/lib/gcj-&gcc-version;-13,
-/usr/lib/go,
-/usr/lib/security,
-and /usr/share/java</seg>
+        <seg>
+          aot-compile, gappletviewer, gc-analyze, gccgo, gcj, gcj-dbtool,
+          gcjh, gfortran, gij, gjar, gjarsigner, gjavah, gkeytool,
+          gnat, gnatbind, gnatchop, gnatclean, gnatfind, gnative2ascii, gnatkr,
+          gnatlink, gnatls, gnatmake, gnatname, gnatprep, gnatxref, gorbd,
+          grmic, grmid, grmiregistry, gserialver, gtnameserv, jcf-dump,
+          jv-convert, rebuild-gcj-db, and architecture specific names
+        </seg>
+        <seg>
+          libgcj_bc.so, libgcj.so, libgcj-tools.so, libgfortran.{so,a},
+          libgij.so, libgo.{so,a}, libgobegin.a, libobjc.{so,a} and numerous other
+          run-time libraries and executables in /usr/lib/gcc and /usr/libexec/gcc
+        </seg>
+        <seg>
+          /usr/include/c++/&gcc-version;/{gcj,gnu,java,javax,org,sun},
+          /usr/lib/gcc/&lt;arch-model&gt;-linux-gnu/&gcc-version;/ada{include,lib},
+          /usr/lib/gcj-&gcc-version;-13,
+          /usr/lib/go,
+          /usr/lib/security, and
+          /usr/share/java
+        </seg>
       </seglistitem>
     </segmentedlist>
 

Index: general/prog/py2cairo.xml
===================================================================
--- general/prog/py2cairo.xml	(révision 12728)
+++ general/prog/py2cairo.xml	(révision 12729)
@@ -30,7 +30,7 @@
         <application>Cairo</application>.
       </para>
 
-&lfs74_checked;
+      &lfs75_checked;
 
       <bridgehead renderas="sect4">Package Information</bridgehead>
       <itemizedlist spacing="compact">

Index: general/prog/pygobject2.xml
===================================================================
--- general/prog/pygobject2.xml	(révision 12728)
+++ general/prog/pygobject2.xml	(révision 12729)
@@ -32,7 +32,7 @@
         <application>GLib</application>.
       </para>
 
-&lfs74_checked;
+      &lfs75_checked;
 
       <bridgehead renderas="sect4">Package Information</bridgehead>
       <itemizedlist spacing="compact">

Index: networking/connect/dhcp.xml
===================================================================
--- networking/connect/dhcp.xml	(révision 12728)
+++ networking/connect/dhcp.xml	(révision 12729)
@@ -37,7 +37,7 @@
       network addresses on private networks.
     </para>
 
-&lfs74_checked;
+    &lfs75_checked;
 
     <bridgehead renderas="sect3">Package Information</bridgehead>
     <itemizedlist spacing="compact">

Index: postlfs/editors/nano.xml
===================================================================
--- postlfs/editors/nano.xml	(révision 12728)
+++ postlfs/editors/nano.xml	(révision 12729)
@@ -35,7 +35,7 @@
       the default editor in the <application>Pine</application> package.
     </para>
 
-&lfs74_checked;
+    &lfs75_checked;
 
     <bridgehead renderas="sect3">Package Information</bridgehead>
     <itemizedlist spacing="compact">

Index: postlfs/security/cracklib.xml
===================================================================
--- postlfs/security/cracklib.xml	(révision 12728)
+++ postlfs/security/cracklib.xml	(révision 12729)
@@ -122,8 +122,8 @@
     <para>Now, as the <systemitem class="username">root</systemitem> user:</para>
 
 <screen role="root"><userinput>make install &amp;&amp;
-mv -v /usr/lib/libcrack.so.2* /lib &amp;&amp;
-ln -v -sf ../../lib/libcrack.so.2.9.0 /usr/lib/libcrack.so</userinput></screen>
+mv -v /usr/lib/libcrack.so.* /lib &amp;&amp;
+ln -sfv ../../lib/$(readlink /usr/lib/libcrack.so) /usr/lib/libcrack.so</userinput></screen>
 
     <para>Issue the following commands as the
     <systemitem class="username">root</systemitem> user to install the

Index: postlfs/security/linux-pam.xml
===================================================================
--- postlfs/security/linux-pam.xml	(révision 12728)
+++ postlfs/security/linux-pam.xml	(révision 12729)
@@ -41,7 +41,7 @@
       users.
     </para>
 
-&lfs74_checked;
+    &lfs75_checked;
 
     <bridgehead renderas="sect3">Package Information</bridgehead>
     <itemizedlist spacing="compact">
@@ -140,8 +140,7 @@
             --sysconfdir=/etc \
             --libdir=/usr/lib \
             --enable-securedir=/lib/security \
---docdir=/usr/share/doc/Linux-PAM-&linux-pam-version; \
---disable-nis &amp;&amp;
+            --docdir=/usr/share/doc/Linux-PAM-&linux-pam-version; &amp;&amp;
 make</userinput></screen>
 
     <para>
@@ -224,13 +223,6 @@
     </para>
 
     <para>
-<option>--disable-nis</option>: This switch disables building
-of the Network Information Service/Yellow Pages support in
-pam_unix and pam_access modules. Remove it if you have installed
-<xref linkend="libtirpc"/>.
-</para>
-<para>
       <command>chmod -v 4755 /sbin/unix_chkpwd</command>:
       The <command>unix_chkpwd</command> helper program must be setuid
       so that non-<systemitem class="username">root</systemitem>

Index: postlfs/security/polkit.xml
===================================================================
--- postlfs/security/polkit.xml	(révision 12728)
+++ postlfs/security/polkit.xml	(révision 12729)
@@ -36,7 +36,7 @@
       communicate with privileged processes.
     </para>
 
-&lfs74_checked;
+    &lfs75_checked;
 
     <bridgehead renderas="sect3">Package Information</bridgehead>
     <itemizedlist spacing="compact">
@@ -132,10 +132,8 @@
 <screen><userinput>./configure --prefix=/usr        \
             --sysconfdir=/etc    \
             --localstatedir=/var \
---with-authfw=shadow \
             --disable-static     \
---libexecdir=/usr/lib/polkit-1 &amp;&amp;
+            --with-authfw=shadow &amp;&amp;
 make</userinput></screen>
 
     <para>

Index: postlfs/security/shadow.xml
===================================================================
--- postlfs/security/shadow.xml	(révision 12728)
+++ postlfs/security/shadow.xml	(révision 12729)
@@ -41,7 +41,7 @@
       <command>login</command> and <command>su</command> to utilize PAM.
     </para>
 
-&lfs74_checked;
+    &lfs75_checked;
 
     <bridgehead renderas="sect3">Package Information</bridgehead>
     <itemizedlist spacing="compact">

Index: pst/xml/docbook.xml
===================================================================
--- pst/xml/docbook.xml	(révision 12728)
+++ pst/xml/docbook.xml	(révision 12729)
@@ -35,7 +35,7 @@
     and software documentation to a standard allowing you to utilize
     transformations already written for that standard.</para>
 
-&lfs74_checked;
+    &lfs75_checked;
 
     <bridgehead renderas="sect3">Package Information</bridgehead>
     <itemizedlist spacing="compact">

Index: x/lib/cairo.xml
===================================================================
--- x/lib/cairo.xml	(révision 12728)
+++ x/lib/cairo.xml	(révision 12729)
@@ -47,7 +47,7 @@
       transformation</ulink> (scale, rotation, shear, etc.).
     </para>
 
-&lfs74_checked;
+    &lfs75_checked;
 
     <bridgehead renderas="sect3">Package Information</bridgehead>
     <itemizedlist spacing="compact">

