Révision 16790

fichiers modifiés :
M       scripts/blfs-chapter32.php

Log :
Fix KF5 script

Le robot a traité 4 % du commit anglais
Index: scripts/blfs-chapter32.php
===================================================================
--- scripts/blfs-chapter32.php	(révision 16789)
+++ scripts/blfs-chapter32.php	(révision 16790)
@@ -6,6 +6,9 @@
 $CHAPTER       = '32';
 $CHAPTERS      = 'Chapters 32-34';
 
+$renames = array();
+$ignores = array();
 //$current="libkcddb";
 
 function get_packages( $package, $dirpath )
@@ -19,25 +22,26 @@
   return find_max( $lines, "/\d\./", "/^.*;(\d[\d\.]*)\/.*$/" );
 }
 
-$file        = "$WGET_DIR/kde/krameworks5.html";
-$line        = exec( "grep 'frameworks.*http' $file" );
-$kf5_version = preg_replace( '/^.*(\d\.\d+).*$/', "$1", $line );
+$d = getenv( 'BLFS_DIR' );
+$BLFS_DIR = ($d) ? $d : '.';
 
+$file        = "$BLFS_DIR/general.ent";
+$line        = exec( "grep 'kf5-short-version' $file" );
+$kf5_version = preg_replace( '/^.*"(\d[\.\d]+)".*$/', "$1", $line );
 $book[ 'kf5'      ] = array( 'basename' => 'kf5',
                              'url'      => 'http://download.kde.org/stable/frameworks',
                              'version'  => $kf5_version );
 
-$file             = "$WGET_DIR/kde/kf5-apps.html";
-$line             = exec( "grep 'konsole' $file" );
-$kf5_apps_version = preg_replace( '/^.*-(\d[\.\d]+).*$/', "$1", $line );
+$line             = exec( "grep 'kf5apps-version ' $file" );
+$kf5_apps_version = preg_replace( '/^.*"(\d[\.\d]+)".*$/', "$1", $line );
 
 $book[ 'kf5-apps' ] = array( 'basename' => 'kf5-apps',
                              'url'      => 'http://download.kde.org/stable/applications',
                              'version'  => $kf5_apps_version );
 
-$file           = "$WGET_DIR/kde/plasma-all.html";
-$line           = exec( "grep 'plasma.*http' $file" );
-$plasma_version = preg_replace( '/^.*\/(\d[\.\d]+)".*$/', "$1", $line );
+$line           = exec( "grep 'plasma5-version' $file" );
+$plasma_version = preg_replace( '/^.*"(\d[\.\d]+)".*$/', "$1", $line );
 
 $book[ 'plasma5'  ] = array( 'basename' => 'plasma5',
                              'url'      => 'http://download.kde.org/stable/plasma',

