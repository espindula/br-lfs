Révision 14207

fichiers modifiés :
   xsoft/graphweb/firefox.xml

Log :
Forgot to fix firefox-32.0 for i686 builds.

Le robot a traité 6 % du commit anglais
Index: xsoft/graphweb/firefox.xml
===================================================================
--- xsoft/graphweb/firefox.xml	(révision 14206)
+++ xsoft/graphweb/firefox.xml	(révision 14207)
@@ -242,9 +242,10 @@
       If you are compiling <application>Firefox</application> in chroot, prepend
       <envar>SHELL=/bin/sh</envar> to the first make command below.
     </para></note>
-
-<screen><userinput>make -f client.mk</userinput></screen>
 
+<screen><userinput>test $(uname -m) = "i686" &amp;&amp; sed -i 's/enable-optimize/disable-optimize/' mozconfig || true &amp;&amp;
+make -f client.mk</userinput></screen>
     <para>
       This package does not come with a test suite.
     </para>
@@ -264,6 +265,13 @@
     <title>Command Explanations</title>
 
     <para>
+      <command>test $(uname -m) = "i686" &amp;&amp; sed ...</command>:
+      On this version of firefox, an old bug has reappeared in 32-bit builds.
+      With optimization, the install fails with a Python error.  This
+      command will fix i686 builds and preserve the optimization on x86_64.
+    </para>
+    <para>
       <command>make -f client.mk ...</command>: Mozilla products are packaged to
       allow the use of a configuration file which can be used to pass the
       configuration settings to the <command>configure</command> command.

