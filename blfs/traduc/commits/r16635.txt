Révision 16635

fichiers modifiés :
   packages.ent
   pst/typesetting/biber.xml
   general/prog/perl-modules.xml
   introduction/welcome/changelog.xml

Log :
Fix up the biber perl module dependencies. When I added that page, I convinced myself that List::MoreUtils and LWP::Protocol::https were always pulled in by other modules, which was wrong. I have now added some comments in the biber deps, ready for the next time it changes.

Le robot a traité 16 % du commit anglais
Index: general/prog/perl-modules.xml
===================================================================
--- general/prog/perl-modules.xml	(révision 16634)
+++ general/prog/perl-modules.xml	(révision 16635)
@@ -124,7 +130,7 @@
  into /usr/bin/, please document it at the end of the page.  'perldoc' is
  sometimes a good place to start, then for scripts look at any comments in the
  script, and if you get a package like Text::BibTeX with compiled progs and
-library, loook at the comments in the code -->
+ library, look at the comments in the code -->
 <sect1 id="perl-modules" xreflabel="Perl modules">
   <?dbhtml filename="perl-modules.html" ?>
 
@@ -782,32 +788,8 @@
     </itemizedlist>
 
     <para>After the LWP installation, if you want HTTPS protocol support,
-install the following (application and modules):</para>
+    install <xref linkend="perl-lwp-protocol-https"/></para>
 
-<itemizedlist>
-<listitem>
-<para>
-<xref linkend="openssl"/>
-</para>
-</listitem>
-<listitem><literallayout><ulink url="http://search.cpan.org/~gaas/LWP-Protocol-https/">LWP::Protocol::https</ulink>
-(http://search.cpan.org/~gaas/LWP-Protocol-https/)</literallayout>
-<itemizedlist>
-<listitem><literallayout><ulink url="http://search.cpan.org/~behroozi/IO-Socket-SSL/">IO::Socket::SSL</ulink>
-(http://search.cpan.org/~behroozi/IO-Socket-SSL/)</literallayout>
-<itemizedlist>
-<listitem><literallayout><ulink url="http://search.cpan.org/dist/Net-SSLeay/">Net::SSLeay</ulink>
-(http://search.cpan.org/dist/Net-SSLeay/)</literallayout>
-</listitem>
-</itemizedlist>
-</listitem>
-<listitem><literallayout><ulink url="http://search.cpan.org/~abh/Mozilla-CA/">Mozilla::CA</ulink>
-(http://search.cpan.org/~abh/Mozilla-CA/)</literallayout>
-</listitem>
-</itemizedlist>
-</listitem>
-</itemizedlist>
     <!-- List::AllUtils -->
     <bridgehead renderas="sect3" id="perl-list-allutils"
     xreflabel="List::AllUtils-&List-AllUtils-version;">
@@ -845,13 +827,8 @@
 <literallayout>&List-AllUtils-download-http;
 MD5 sum: &List-AllUtils-md5sum;</literallayout>
         <itemizedlist>
-<listitem> <literallayout><ulink url="http://search.cpan.org/dist/List-MoreUtils/">List::MoreUtils</ulink>
-(http://search.cpan.org/dist/List::MoreUtils/) (for the testsuite)</literallayout>
-<itemizedlist>
-<listitem> <literallayout><ulink url="http://search.cpan.org/dist/Exporter-Tiny/">Exporter::Tiny</ulink>
-(http://search.cpan.org/dist/Exporter::Tiny/) (for the testsuite)</literallayout>
-</listitem>
-</itemizedlist>
+         <listitem>
+           <para><xref linkend="perl-list-moreutils"/></para>
           </listitem>
           <listitem> <literallayout><ulink url="http://search.cpan.org/dist/Number-Compare/">Number::Compare</ulink>
 (http://search.cpan.org/dist/Number::Compare/)</literallayout>
@@ -894,6 +871,40 @@
       </listitem>
     </itemizedlist>
 
+    <!-- List::MoreUtils -->
+    <bridgehead renderas="sect3" id="perl-list-moreutils"
+    xreflabel="List::MoreUtils-&List-MoreUtils-version;">
+    List::MoreUtils-&List-MoreUtils-version;</bridgehead>
+    <indexterm zone="perl-modules perl-list-moreutils">
+      <primary sortas="a-List-MoreUtils">List::MoreUtils</primary>
+    </indexterm>
+    <para>List::MoreUtils provides the stuff missing in List::Util. This
+    module uses the standard <xref linkend="perl-standard-install"/>.</para>
+    &lfs78_checked;
+    <itemizedlist>
+      <listitem>
+        <para>
+          <ulink url="&List-MoreUtils-download-http;">List-MoreUtils-&List-MoreUtils-version;</ulink>
+        </para>
+      </listitem>
+      <listitem>
+<literallayout>&List-MoreUtils-download-http;
+MD5 sum: &List-MoreUtils-md5sum;</literallayout>
+      </listitem>
+      <listitem>
+        <itemizedlist>
+          <listitem> <literallayout><ulink url="http://search.cpan.org/dist/Exporter-Tiny/">Exporter::Tiny</ulink>
+(http://search.cpan.org/dist/Exporter::Tiny/) (for the testsuite)</literallayout>
+          </listitem>
+        </itemizedlist>
+      </listitem>
+    </itemizedlist>
     <!-- Log::Log4perl -->
     <bridgehead renderas="sect3" id="perl-log-log4perl"
     xreflabel="Log::Log4perl-&Log-Log4perl-version;">
@@ -921,6 +932,58 @@
       </listitem>
     </itemizedlist>
 
+    <!-- LWP::Protocol::https -->
+    <bridgehead renderas="sect3" id="perl-lwp-protocol-https"
+    xreflabel="LWP::Protocol::https-&LWP-Protocol-https-version;">
+    LWP-Protocol-https-&LWP-Protocol-https-version;</bridgehead>
+    <indexterm zone="perl-modules perl-lwp-protocol-https">
+      <primary sortas="a-LWP-Protocol-https">LWP::Protocol::https</primary>
+    </indexterm>
+    <para>LWP::Protocol::https provides https support for
+    LWP::UserAgent (i.e. for LWP). This module uses the
+    standard <xref linkend="perl-standard-install"/>.</para>
+    &lfs78_checked;
+    <itemizedlist>
+      <listitem>
+        <para>
+          <ulink url="&LWP-Protocol-https-download-http;">LWP-Protocol-https-&LWP-Protocol-https-version;</ulink>
+        </para>
+      </listitem>
+      <listitem>
+<literallayout>&LWP-Protocol-https-download-http;
+MD5 sum: &LWP-Protocol-https-md5sum;</literallayout>
+      </listitem>
+      <listitem>
+        <itemizedlist>
+          <listitem>
+            <para><xref linkend="openssl"/></para>
+          </listitem>
+          <listitem>
+            <para><xref linkend="perl-lwp"/></para>
+          </listitem>
+          <listitem>
+            <itemizedlist>
+              <listitem><literallayout><ulink url="http://search.cpan.org/~behroozi/IO-Socket-SSL/">IO::Socket::SSL</ulink>
+(http://search.cpan.org/~behroozi/IO-Socket-SSL/)</literallayout>
+                <itemizedlist>
+                  <listitem><literallayout><ulink url="http://search.cpan.org/dist/Net-SSLeay/">Net::SSLeay</ulink>
+(http://search.cpan.org/dist/Net-SSLeay/)</literallayout>
+                  </listitem>
+                </itemizedlist>
+              </listitem>
+              <listitem><literallayout><ulink url="http://search.cpan.org/~abh/Mozilla-CA/">Mozilla::CA</ulink>
+(http://search.cpan.org/~abh/Mozilla-CA/)</literallayout>
+              </listitem>
+            </itemizedlist>
+          </listitem>
+        </itemizedlist>
+      </listitem>
+    </itemizedlist>
     <!-- Module::Build -->
     <bridgehead renderas="sect3" id="perl-module-build"
     xreflabel="Module-Build-&Module-Build-version;">

Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 16634)
+++ introduction/welcome/changelog.xml	(révision 16635)
@@ -48,6 +48,16 @@
       <para>November 11th, 2015</para>
       <itemizedlist>
         <listitem>
+          <para>[ken] - Promote perl modules List::MoreUtils-0.413 and
+          LWP::Protocol-https-6.06 to full membership of the book. They
+          have always been required for biblatex-biber, but when I added
+          that page I persuaded myself they were always pulled in by other
+          modules (LWP::Protocol::https is not necessarily pulled in by
+          anything else, List::MoreUtils is only pulled in by List::AllUtils
+          if you run the testsuites at each level). As a consequence,
+          rewrite the https comments at the end of the LWP module.</para>
+        </listitem>
+        <listitem>
           <para>[ken] - asymptote: work around build failure with
           libgsl-2.0 by disabling it (most users of asymptote probably
           do not need to link it to libgsl). Fixes

Index: pst/typesetting/biber.xml
===================================================================
--- pst/typesetting/biber.xml	(révision 16634)
+++ pst/typesetting/biber.xml	(révision 16635)
@@ -90,6 +90,12 @@
 
     <bridgehead renderas="sect4">Required</bridgehead>
     <para role="required">
+      <!-- KFM: because I always get confused by these deps, I've decided
+      to add some comments.
+      Both Config::AutoConf and ExtUtils::LibBuilder are listed as build
+      requirements in Build.PL, the rest are just requirements, but the
+      difference seems moot.  Those two are needed to build Text::BibTeX
+      so not listed separately. -->
       <xref linkend="perl-autovivification"/>
       <xref linkend="perl-business-isbn"/>
       <xref linkend="perl-business-ismn"/>
@@ -101,14 +107,22 @@
       <xref linkend="perl-encode-hanextra"/>
       <xref linkend="perl-encode-jis2k"/>
       <xref linkend="perl-file-slurp"/>
+      <!-- IPC::Cmd is a part of core perl -->
       <xref linkend="perl-ipc-run3"/>
+      <!-- LWP::Simple is part of libwww-perl,
+      that is pulled in by LWP::Protocol::https -->
+      <xref linkend="perl-list-allutils"/>
+      <!-- List::MoreUtils was pulled in for the testsuite of List::AllUtils,
+      but it needs to be present even if people do not run the tests -->
+      <xref linkend="perl-list-moreutils"/>
       <xref linkend="perl-log-log4perl"/>
-<xref linkend="perl-lwp"/>
-<xref linkend="perl-list-allutils"/>
-<!-- this is pulled in by perl-text-bibtex, but mention it explicitly
-so that the note on automatically installing missing dependencies makes
-more sense -->
+      <!-- I initially misread LWP-Protocol-https as part of libwww-perl
+      when I was preparing this list.  In fact, it depends on that -->
+      <xref linkend="perl-lwp-protocol-https"/>
+      <!-- Module::Build is pulled in by perl-text-bibtex, but mention it explicitly
+      so that the note on automatically installing missing dependencies can be run -->
       <xref linkend="perl-module-build"/>
+      <!-- Mozilla::CA is a dependency of LWP-Protocol-https -->
       <xref linkend="perl-regexp-common"/>
       <xref linkend="perl-text-bibtex"/>
       <xref linkend="perl-text-roman"/>
@@ -117,6 +131,7 @@
       same version.  In fact, the version in perl-5.20.2 is indeed too old for
       biber-2.0 -->
       <xref linkend="perl-unicode-collate"/>
+      <!-- Unicode::GCstring is part of Unicode::LineBreak -->
       <xref linkend="perl-unicode-linebreak"/>
       <xref linkend="perl-xml-libxml-simple"/>
       <xref linkend="perl-xml-libxslt"/>

