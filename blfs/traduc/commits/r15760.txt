Révision 15760

fichiers modifiés :
   introduction/welcome/changelog.xml
   x/lib/webkitgtk26.xml
   x/lib/webkitgtk2.xml

Log :
Update both gtkwebkit sections to build with glib-2.44 and later.

Le robot a traité 8 % du commit anglais
Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 15759)
+++ introduction/welcome/changelog.xml	(révision 15760)
@@ -48,6 +48,10 @@
       <para>March 31st, 2015</para>
       <itemizedlist>
         <listitem>
+          <para>[bdubbs] - Update both gtkwebkit sections to build with
+          glib-2.44 and later.</para>
+        </listitem>
+        <listitem>
           <para>[fernando] - Update to yelp-3.16.0. Partially fixes
           <ulink url="&blfs-ticket-root;6311">#6311</ulink>.</para>
         </listitem>

Index: x/lib/webkitgtk26.xml
===================================================================
--- x/lib/webkitgtk26.xml	(révision 15759)
+++ x/lib/webkitgtk26.xml	(révision 15760)
@@ -119,6 +119,17 @@
     <bridgehead renderas="sect3">Installation of
     <application>WebKitGTK+</application></bridgehead>
 
+    <para>First, fix some code when building with glib-2.44 and later:</para>
+<screen><userinput>pushd Source/WebCore/platform/graphics/gstreamer &amp;&amp;
+  sed -i 's/GMutexLocker&lt;/WTF::&amp;/'            \
+          MediaPlayerPrivateGStreamerBase.cpp \
+          VideoSinkGStreamer.cpp              \
+          WebKitWebSourceGStreamer.cpp        &amp;&amp;
+popd &amp;&amp;
+sed -i '/using/d' Source/WTF/wtf/gobject/GMutexLocker.h</userinput></screen>
     <para>
       Install <application>WebKitGTK+</application> by running the
       following commands:

Index: x/lib/webkitgtk2.xml
===================================================================
--- x/lib/webkitgtk2.xml	(révision 15759)
+++ x/lib/webkitgtk2.xml	(révision 15760)
@@ -127,9 +127,15 @@
       cause <command>make install</command> to fail:
     </para>
 
-<screen><userinput>sed -i '/generate-gtkdoc --rebase/s:^:# :' \
-GNUmakefile.in</userinput></screen>
+<screen><userinput>sed -i '/generate-gtkdoc --rebase/s:^:# :' GNUmakefile.in</userinput></screen>
 
+    <para>Fix some code when building with glib-2.44 and later:</para>
+<screen><userinput>pushd Source/WebCore/platform/graphics/gstreamer &amp;&amp;
+  sed -i 's/GMutexLocker /WebCore::&amp;/' \
+          VideoSinkGStreamer.cpp WebKitWebSourceGStreamer.cpp &amp;&amp;
+popd</userinput></screen>
     <para>
       Upstream standard now is to link this package against <application>GTK+
       3</application>. However, for backward compatibility, manu users need

