Révision 16401

fichiers modifiés :
   introduction/welcome/changelog.xml
   packages.ent
   general/prog/java.xml
   general/prog/openjdk.xml

Log :
Update to OpenJDK-1.8.0.60

Le robot a traité 43 % du commit anglais
Index: general/prog/openjdk.xml
===================================================================
--- general/prog/openjdk.xml	(révision 16400)
+++ general/prog/openjdk.xml	(révision 16401)
@@ -80,7 +61,7 @@
       runtime environment to run <application>Java</application> programs.
     </para>
 
-&lfs77_checked;&gcc5_checked;
+    &lfs78_checked;
 
     <note>
       <para>
@@ -150,84 +131,14 @@
           </simplelist>
         </para>
       </listitem>
-</itemizedlist>
-<para>
-The following files may be downladed from the OpenJDK mercurial
-repository using the addresses <ulink
-url="&ojdk-repo;/&lt;component&gt;/archive/&ojdk-tarball;"/>,
-where &lt;component&gt; is the name of the JVM component (corba,
-hostspot, and so on), but that involves renaming the downloaded files,
-and renaming the extracted directories.
-For convenience, the BLFS editors have made the files available in an LFS
-website.
-</para>
-<itemizedlist spacing="compact">
       <listitem>
-<para>Corba Source
-<simplelist>
-<member>Download: <ulink url="&corba-download;"/></member>
-<member>Download MD5 sum: &corba-md5sum;</member>
-<member>Download Size: &corba-size;</member>
-</simplelist>
+        <para>
+          In addition to the root package, the instructions below first
+          download seven subproject tarballs,
+          whose total size is &total-download-size;.
         </para>
       </listitem>
       <listitem>
-<para>Hotspot Source
-<simplelist>
-<member>Download: <ulink url="&hotspot-download;"/></member>
-<member>Download MD5 sum: &hotspot-md5sum;</member>
-<member>Download Size: &hotspot-size;</member>
-</simplelist>
-</para>
-</listitem>
-<listitem>
-<para>JAXP Source
-<simplelist>
-<member>Download: <ulink url="&jaxp-download;"/></member>
-<member>Download MD5 sum: &jaxp-md5sum;</member>
-<member>Download Size: &jaxp-size;</member>
-</simplelist>
-</para>
-</listitem>
-<listitem>
-<para>JAXWS Source
-<simplelist>
-<member>Download: <ulink url="&jaxws-download;"/></member>
-<member>Download MD5 sum: &jaxws-md5sum;</member>
-<member>Download Size: &jaxws-size;</member>
-</simplelist>
-</para>
-</listitem>
-<listitem>
-<para>Langtools Source
-<simplelist>
-<member>Download: <ulink url="&langtools-download;"/></member>
-<member>Download MD5 sum: &langtools-md5sum;</member>
-<member>Download Size: &langtools-size;</member>
-</simplelist>
-</para>
-</listitem>
-<listitem>
-<para>JDK Source
-<simplelist>
-<member>Download: <ulink url="&jdk-download;"/></member>
-<member>Download MD5 sum: &jdk-md5sum;</member>
-<member>Download Size: &jdk-size;</member>
-</simplelist>
-</para>
-</listitem>
-<listitem>
-<para>Nashorn Source
-<simplelist>
-<member>Download: <ulink url="&nashorn-download;"/></member>
-<member>Download MD5 sum: &nashorn-md5sum;</member>
-<member>Download Size: &nashorn-size;</member>
-</simplelist>
-</para>
-</listitem>
-<listitem>
         <para>Estimated disk space required: &ojdk-buildsize;</para>
       </listitem>
       <listitem>
@@ -269,8 +180,9 @@
 
     <bridgehead renderas="sect4">Recommended</bridgehead>
     <para role="recommended">
-<xref linkend="cacerts"/> and
-<xref linkend="giflib"/>
+      <xref linkend="cacerts"/>,
+      <xref linkend="giflib"/>, and
+      <xref linkend="wget"/>
     </para>
 
     <bridgehead renderas="sect4">Optional</bridgehead>
@@ -295,41 +207,37 @@
       instructions:
     </para>
 
-<screen><userinput>tar -xf ../corba.tar.xz      &amp;&amp;
-tar -xf ../hotspot.tar.xz    &amp;&amp;
-tar -xf ../jaxp.tar.xz       &amp;&amp;
-tar -xf ../jaxws.tar.xz      &amp;&amp;
-tar -xf ../jdk.tar.xz        &amp;&amp;
-tar -xf ../langtools.tar.xz  &amp;&amp;
-tar -xf ../nashorn.tar.xz</userinput></screen>
+<screen><userinput>cat &gt; subprojects.md5 &lt;&lt; EOF &amp;&amp;
+&corba-md5sum;  corba.tar.bz2
+&hotspot-md5sum;  hotspot.tar.bz2
+&jaxp-md5sum;  jaxp.tar.bz2
+&jaxws-md5sum;  jaxws.tar.bz2
+&langtools-md5sum;  langtools.tar.bz2
+&jdk-md5sum;  jdk.tar.bz2
+&nashorn-md5sum;  nashorn.tar.bz2
+EOF
 
+for subproject in corba hotspot jaxp jaxws langtools jdk nashorn; do
+  wget -c &ojdk-repo;/${subproject}/archive/&ojdk-tarball; \
+       -O ${subproject}.tar.bz2
+done &amp;&amp;
+md5sum -c subprojects.md5 &amp;&amp;
+for subproject in corba hotspot jaxp jaxws langtools jdk nashorn; do
+  mkdir -pv ${subproject} &amp;&amp;
+  tar -xf ${subproject}.tar.bz2 --strip-components=1 -C ${subproject}
+done</userinput></screen>
     <para>
       If you have downloaded the recommended test harness, unpack it too:
     </para>
 
-<screen><userinput>tar -xf ../jtreg&jtreg-version;.tar.xz</userinput></screen>
+<screen><userinput>tar -xf ../jtreg-&jtreg-version;.tar.gz</userinput></screen>
 
 <!--TODO: it might be better to add instructions for the cacerts file at
 this place and to use the switch "with-cacerts-file" -->
 
-<para>
-Fix an issue with the new (since 5.1.0) giflib API:
-</para>
-<screen><userinput>sed -e 's/DGifCloseFile(gif/&amp;, NULL/' \
--e '/DGifOpen/s/c)/c, NULL)/'     \
--i jdk/src/share/native/sun/awt/splashscreen/splashscreen_gif.c</userinput></screen>
-<para>
-One file in hotspot needs a change, since it relies on a non-normative
-compiler behavior, which has changed with GCC version 5. Note that the change
-works also with previous versions.
-</para>
-<screen><userinput>sed -e 's/(hi - lo)/ hi - lo /' \
--e 's/(lo - hi)/ lo - hi /' \
--i hotspot/src/share/vm/opto/type.cpp</userinput></screen>
     <note>
       <para>
         Before proceeding, you should ensure that your environment
@@ -358,9 +268,7 @@
    --enable-unlimited-crypto  \
    --with-zlib=system         \
    --with-giflib=system       &amp;&amp;
-make DEBUG_BINARIES=true                 \
-DISABLE_HOTSPOT_OS_VERSION_CHECK=ok \
-all  &amp;&amp;
+make DEBUG_BINARIES=true all  &amp;&amp;
 find build/*/images/j2sdk-image -iname \*.diz -delete
 </userinput></screen>
 
@@ -586,11 +494,8 @@
     </para>
 
     <para>
-<command>make DEBUG_BINARIES=true
-DISABLE_HOTSPOT_OS_VERSION_CHECK=ok all</command>: The build fails on
-32 bit machines if DEBUG_BINARIES is not set to true. Furthermore, OS
-version checking in hotspot's Makefile does not account for Linux version
-4.x. Disabling the test is harmless and allows building.
+      <command>make DEBUG_BINARIES=true all</command>: The build fails on
+      32 bit machines if DEBUG_BINARIES is not set to true.
     </para>
 
     <para>
@@ -625,10 +534,10 @@
 
       <para>
         <application>OpenJDK</application> uses its own format for the
-CA certificates. Those certificates are located in a file named <filename>
-/opt/jdk/jre/lib/security/cacerts</filename>. That file may be generated
-from the one installed using the instructions on the <xref
-linkend="cacerts"/> page, using the following procedure.
+        CA certificates. Those certificates are located in a file named
+        <filename>/opt/jdk/jre/lib/security/cacerts</filename>. That file
+        may be generated from the one installed using the instructions on the
+        <xref linkend="cacerts"/> page, with the following procedure.
         First, generate the <command>mkcacerts</command> script
         as the <systemitem class="username">root</systemitem> user:
       </para>

Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 16400)
+++ introduction/welcome/changelog.xml	(révision 16401)
@@ -48,6 +48,10 @@
       <para>September 13th, 2015</para>
       <itemizedlist>
         <listitem>
+          <para>[pierre] - Update to OpenJDK-1.8.0.60. Fixes
+           <ulink url="&blfs-ticket-root;6903">#6903</ulink>.</para>
+        </listitem>
+        <listitem>
           <para>[fernando] - Update to zsh-5.1.1. Fixes
           <ulink url="&blfs-ticket-root;6925">#6925</ulink>.</para>
         </listitem>

