Révision 16554

fichiers modifiés :
   general.ent
   xsoft/graphweb/seamonkey.xml
   xsoft/graphweb/firefox.xml
   xsoft/other/thunderbird.xml
   pst/scanning/sane.xml
   introduction/welcome/changelog.xml

Log :
Fix issues in mozilla apps with freetype-2.6.1 and gconf dependencies.

Le robot a traité 34 % du commit anglais
Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 16553)
+++ introduction/welcome/changelog.xml	(révision 16554)
@@ -45,6 +45,17 @@
 -->
 
     <listitem>
+      <para>October 21st, 2015</para>
+      <itemizedlist>
+        <listitem>
+          <para>[bdubbs] - Fix issues in mozilla apps with
+          freetype-2.6.1 and gconf dependencies. Fixes
+          <ulink url="&blfs-ticket-root;6998">#6998</ulink>.</para>
+        </listitem>
+      </itemizedlist>
+    </listitem>
+    <listitem>
       <para>October 19th, 2015</para>
       <itemizedlist>
         <listitem>

Index: xsoft/graphweb/firefox.xml
===================================================================
--- xsoft/graphweb/firefox.xml	(révision 16553)
+++ xsoft/graphweb/firefox.xml	(révision 16554)
@@ -171,9 +171,6 @@
 # this line
 ac_add_options --disable-necko-wifi
 
-# If you have installed GConf, comment out this line
-ac_add_options --disable-gconf
 # GStreamer is necessary for H.264 video playback in HTML5 Video Player;
 # to be enabled, also remember to set "media.gstreamer.enabled" to "true"
 # in about:config. If you have GStreamer 1.x.y, comment out this line and
@@ -187,10 +184,10 @@
 
 # Comment out following option if you have PulseAudio installed
 ac_add_options --disable-pulseaudio
+# If you have installed GConf, comment out this line
+ac_add_options --disable-gconf
 # Comment out following options if you have not installed
 # recommended dependencies:
 ac_add_options --enable-system-sqlite
@@ -234,6 +231,12 @@
 EOF</userinput></screen>
 
     <para>
+      First, fix building with system freetype-2.6.1 or later:
+    </para>
+<screen><userinput>sed -i '/^freetype\/ftcache.h/a freetype\/ftfntfmt.h' config/system-headers</userinput></screen>
+    <para>
       Compile <application>Firefox</application> by issuing the following
       commands:
     </para>
@@ -255,12 +258,10 @@
     </para>
 
 <screen role="root"><userinput>make -f client.mk install INSTALL_SDK= &amp;&amp;
+chown -R 0:0 /usr/lib/firefox-&firefox-version;   &amp;&amp;
 
-chown -R 0:0 /usr/lib/firefox-&firefox-version;     &amp;&amp;
 mkdir -pv    /usr/lib/mozilla/plugins  &amp;&amp;
-ln    -sfv   ../../mozilla/plugins \
-/usr/lib/firefox-&firefox-version;/browser</userinput></screen>
+ln    -sfv   ../../mozilla/plugins /usr/lib/firefox-&firefox-version;/browser</userinput></screen>
 
   </sect2>
 

Index: xsoft/graphweb/seamonkey.xml
===================================================================
--- xsoft/graphweb/seamonkey.xml	(révision 16553)
+++ xsoft/graphweb/seamonkey.xml	(révision 16554)
@@ -130,6 +130,7 @@
       <xref linkend="curl"/>,
       <xref linkend="dbus-glib"/>,
       <xref linkend="doxygen"/>,
+      <xref linkend="GConf"/>,
       <xref linkend="gst10-plugins-base"/> (with
       <xref linkend="gst10-plugins-good"/> and
       <xref linkend="gst10-libav"/> at runtime),
@@ -191,10 +192,10 @@
 
 # Comment out following option if you have PulseAudio installed
 ac_add_options --disable-pulseaudio
+# Comment out following option if you have gconf installed
+ac_add_options --disable-gconf
 # Comment out following options if you have not installed
 # recommended dependencies:
 ac_add_options --enable-system-sqlite
@@ -241,7 +242,9 @@
       First, fix building with system freetype-2.6 or later:
     </para>
 
-<screen><userinput>sed -i '/^ftglyph.h/ i ftfntfmt.h' mozilla/config/system-headers</userinput></screen>
+<screen><userinput>sed -e '/^ftglyph.h/i ftfntfmt.h'                     \
+    -e '/^freetype\/ftcache.h/a freetype\/ftfntfmt.h' \
+    -i mozilla/config/system-headers</userinput></screen>
 
     <note><para>
       If you are compiling <application>SeaMonkey</application> in chroot, make

Index: xsoft/other/thunderbird.xml
===================================================================
--- xsoft/other/thunderbird.xml	(révision 16553)
+++ xsoft/other/thunderbird.xml	(révision 16554)
@@ -135,6 +135,7 @@
       <xref linkend="cyrus-sasl"/>,
       <xref linkend="dbus-glib"/>,
       <xref linkend="doxygen"/>,
+      <xref linkend="GConf"/>,
       <xref linkend="gst10-plugins-base"/> (with
       <xref linkend="gst10-plugins-good"/> and
       <xref linkend="gst10-libav"/> at runtime),
@@ -194,6 +195,9 @@
 
 # Comment out following option if you have PulseAudio installed
 ac_add_options --disable-pulseaudio
+# Comment out following option if you have gconf installed
+ac_add_options --disable-gconf
 <!-- Uncommenting does not work
 # If you have not installed Yasm then uncomment this line:
 #ac_add_options - -disable-webm
@@ -249,7 +253,9 @@
 
 <!-- might be necessary
 test $(uname -m) = "i686" && sed -i 's/enable-optimize/disable-optimize/' mozconfig || true &&-->
-<screen><userinput>sed -i '/^ftglyph.h/ i ftfntfmt.h' mozilla/config/system-headers</userinput></screen>
+<screen><userinput>sed -e '/^ftglyph.h/i ftfntfmt.h'                     \
+    -e '/^freetype\/ftcache.h/a freetype\/ftfntfmt.h' \
+    -i mozilla/config/system-headers</userinput></screen>
 
     <para>
       Compile <application>Thunderbird</application> by issuing the following

