Révision 13336

fichiers ajoutés :
   xincludes/texprogs.xml

fichiers modifiés :
   general.ent
   pst/typesetting/texlive.xml
   pst/typesetting/tl-installer.xml
   introduction/welcome/changelog.xml

Log :
TeX Live 20140525 and current binary installer. Various changes to deps and text, moved the progs text to an xincludes.

Le robot a traité 23 % du commit anglais

ATTENTION : il faut relire les fichiers suivants qui sont ajoutés
Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 13335)
+++ introduction/welcome/changelog.xml	(révision 13336)
@@ -48,6 +48,11 @@
       <para>July 2nd, 2014</para>
       <itemizedlist>
         <listitem>
+          <para>[ken] - Update to texlive-20140525 and current (20140628)
+          version of install-tl-unx.
+          Fixes <ulink url="&blfs-ticket-root;5170">#5170</ulink>.</para>
+        </listitem>
+        <listitem>
           <para>[igor] - Update to git-2.0.1. Fixes
           <ulink url="&blfs-ticket-root;5209">#5209</ulink>.</para>
         </listitem>

Index: pst/typesetting/texlive.xml
===================================================================
--- pst/typesetting/texlive.xml	(révision 13335)
+++ pst/typesetting/texlive.xml	(révision 13336)
@@ -6,11 +6,13 @@
   <!ENTITY texlive-source-download-http " ">
   <!ENTITY texlive-source-download-ftp  "ftp://tug.org/texlive/historic/&texlive-year;/texlive-&texlive-version;-source.tar.xz">
 
+  <!-- buildsize is the source dir, plus the kpathsea files installed to /usr.
+   The progs in bin/ARCH/ seem slightly smaller (shared libs) -->
 ]>
 
 <sect1 id="texlive" xreflabel="texlive-&texlive-version;">
@@ -58,28 +60,19 @@
       </listitem>
     </itemizedlist>
 
-<bridgehead renderas="sect3">Additional Downloads</bridgehead>
-<itemizedlist spacing="compact">
-<listitem>
-<para>
-Required patch:
-<ulink url="&patch-root;/texlive-&texlive-version;-source-fix_asymptote-1.patch"/>
-</para>
-</listitem>
-<listitem>
-<para>
-Required patch:
-<ulink url="&patch-root;/texlive-&texlive-version;-source-poppler26-1.patch"/>
-</para>
-</listitem>
-</itemizedlist>
     <bridgehead renderas="sect3">TeX Live Dependencies</bridgehead>
 
+    <bridgehead renderas="sect4">Required</bridgehead>
+    <para role="required">
+      <xref linkend="tl-installer"/> or a previous version of TeX Live
+      (untested, you would need to alter the configure switches which refer
+      to &texlive-year; so that it overwrites your existing installation, or
+      else copy everything to the location for the current year).
+    </para>
     <bridgehead renderas="sect4">Recommended</bridgehead>
     <para role="recommended">
-<xref linkend="freeglut"/> (for asy),
-<xref linkend="gs"/>,
+      <xref linkend="gs"/> (for dvisvgm, which is used by asy),
       <xref linkend="x-window-system"/>
     </para>
     <para>
@@ -100,6 +93,10 @@
     <para role="optional">
       <ulink url="http://www.fftw.org/">FFTW</ulink> can be used by asy.
     </para>
+    <para role="optional">
+      <ulink url="http://www.gnu.org/software/clisp/">clisp</ulink> is a build-time
+      dependency for xindy, see <filename>utils/xindy/README-clisp</filename>.
+    </para>
     <para>
       The source ships with its own versions of several libraries which are either
       not under active development, or only used for limited functionality.  If
@@ -108,14 +105,13 @@
       <ulink url="http://libgd.bitbucket.org">GD</ulink>,
       <ulink url="http://fossies.org/linux/misc/t1lib-5.1.2.tar.gz/">t1lib</ulink>,
       <ulink url="http://sourceforge.net/projects/zziplib/">ZZIPlib</ulink>,
-<ulink url="http://www.gnu.org/software/clisp/">CLISP</ulink>,
       <ulink url="http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&amp;id=TECkitDownloads">TECkit</ulink>
     </para>
 
     <bridgehead renderas="sect4">Runtime dependencies</bridgehead>
     <para role="recommended">
       Some (re-installed) scripts will use
-<xref linkend="ruby"/> and <xref linkend="tk"/> is used by epspdftk.
+      <xref linkend="python2"/> or <xref linkend="ruby"/>.
     </para>
 
     <para condition="html" role="usernotes">User Notes:
@@ -145,26 +141,26 @@
     what was originally installed.</para>
 
     <para>At the moment, these instructions do not rebuild
-<application>xindy</application> which was installed by the binary installer,
-due to a problem with the tarball's install procedure.  Asy and the rest of
-asymptote is by default not rebuilt, so we have to separately run
-<command>configure</command> and <command>make</command> in its directory.
+    <application>biber</application> or <application>xindy</application> which were
+    installed by the binary installer.  See the "Special considerations for ..."
+    paragraphs of
+    <ulink url="http://tug.org/texlive/build.html">Building TeX Live</ulink>.
+    Asy and the rest of asymptote is by default not rebuilt, so we have to
+    separately run <command>configure</command> and <command>make</command> in its
+    directory.
     </para>
 
-<screen><userinput>patch -Np1 -i ../texlive-&texlive-version;-source-fix_asymptote-1.patch &amp;&amp;
-patch -Np1 -i ../texlive-&texlive-version;-source-poppler26-1.patch &amp;&amp;
-mkdir texlive-build &amp;&amp;
+<screen><userinput>mkdir texlive-build &amp;&amp;
 cd texlive-build    &amp;&amp;
 
 ../configure                                        \
---prefix=/opt/texlive/2013                      \
---bindir=/opt/texlive/2013/bin/x86_64-linux     \
---datarootdir=/opt/texlive/2013                 \
+    --prefix=/opt/texlive/&texlive-year;                      \
+    --bindir=/opt/texlive/&texlive-year;/bin/x86_64-linux     \
+    --datarootdir=/opt/texlive/&texlive-year;                 \
     --includedir=/usr/include                       \
---infodir=/opt/texlive/2013/texmf-dist/doc/info \
+    --infodir=/opt/texlive/&texlive-year;/texmf-dist/doc/info \
     --libdir=/usr/lib                               \
---mandir=/opt/texlive/2013/texmf-dist/doc/man   \
+    --mandir=/opt/texlive/&texlive-year;/texmf-dist/doc/man   \
     --disable-native-texlive-build                  \
     --disable-static --enable-shared                \
     --with-system-libgs                             \
@@ -187,12 +183,12 @@
     echo "ac_cv_lib_z_deflate=yes" >>config.cache &amp;&amp;
 
 ./configure LIBS="-ltirpc "                         \
---prefix=/opt/texlive/2013/                     \
---bindir=/opt/texlive/2013/bin/x86_64-linux     \
+    --prefix=/opt/texlive/&texlive-year;/                     \
+    --bindir=/opt/texlive/&texlive-year;/bin/x86_64-linux     \
     --enable-texlive-build                          \
---datarootdir=/opt/texlive/2013/texmf-dist      \
---infodir=/opt/texlive/2013/texmf-dist/doc/info \
---mandir=/opt/texlive/2013/texmf-dist/doc/man   \
+    --datarootdir=/opt/texlive/&texlive-year;/texmf-dist      \
+    --infodir=/opt/texlive/&texlive-year;/texmf-dist/doc/info \
+    --mandir=/opt/texlive/&texlive-year;/texmf-dist/doc/man   \
     --cache-file=config.cache &amp;&amp;
 popd &amp;&amp;
 
@@ -214,11 +210,6 @@
     <title>Command Explanations</title>
 
     <para>
-<parameter>patch -Np1 -i ../texlive-&texlive-version;-source-poppler26-1.patch</parameter>:
-this allows luatex to build against poppler &gt;=0.26. Omit this if you
-have not installed <application>poppler</application>.
-</para>
-<para>
       <parameter>--prefix=, --bindir=, --datarootdir=, --infodir=, --mandir= ...
       </parameter>: these switches ensure that the files installed from source
       will overwrite the corresponding files previously installed by
@@ -295,10 +286,8 @@
       <varlistentry id="texlive-programs">
         <term><command>TeX&nbsp;programs</command></term>
         <listitem>
-<para>included in the <application>TeX Live</application> package are
-too numerous to individually list. Please refer to the individual
-program man and html pages in the installation directory's 2011/index.html
-directory.</para>
+          <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
+          href="../../xincludes/texprogs.xml"/>
           <indexterm zone="texlive texlive-programs">
             <primary sortas="b-texlive-programs">TeX Live programs</primary>
           </indexterm>

Index: pst/typesetting/tl-installer.xml
===================================================================
--- pst/typesetting/tl-installer.xml	(révision 13335)
+++ pst/typesetting/tl-installer.xml	(révision 13336)
@@ -32,14 +33,14 @@
 
     <para>It is necessary to use a binary installer for the first install.
     This will provide the programs, the scripts, and a lot of supporting files
-and documentation.  After that, you can rebuild the programs from source
+    and documentation.  After that, you can rebuild most of the programs from source
     by following the instructions for <xref linkend="texlive"/>.  The installer
     is updated frequently, so its md5sum will change if it is newer than what
     is shown below.  Newer versions of the installer are expected to work with
@@ -57,7 +58,7 @@
         <para>Download (FTP): <ulink url="&tl-installer-download-ftp;"/></para>
       </listitem>
       <listitem>
-<para>Download MD5 sum: &tl-installer-md5sum; (at 20140213)</para>
+        <para>Download MD5 sum: &tl-installer-md5sum; (at &tl-installer-date;)</para>
       </listitem>
       <listitem>
         <para>Download size: &tl-installer-size;</para>
@@ -74,31 +75,32 @@
     <para role="recommended">
       The binaries are mostly linked to static libraries such as
       <filename class="libraryfile">libc.a</filename>, but a few of the programs
-and several scripts will fail if the following packages are not present -
-there may be other libraries which are dynamically loaded.
+      and several scripts will fail if the following packages are not present.
     </para>
     <para>
-<xref linkend="gs"/> is dynamically loaded by (at least) asy.
+      <xref linkend="gs"/> is dynamically loaded by dvisvgm, which is used by
+     <application>asy</application>.
     </para>
     <para>
-<xref linkend="libdrm"/>,
-<xref linkend="freeglut"/> and
-<xref linkend="glu"/> are needed for asy.
-</para>
-<para>
       <xref linkend="xorg7-lib"/> and
       <xref linkend="libxcb"/> are needed for asy, inimf, mf, pdfclose, pdfopen
      and xdvixaw. But if you are using <application>TeX</application> to create
@@     @@
      PDF viewer of your choice, for example <xref linkend="epdfview"/>.
     </para>
     <para>
-the optional non-wide-character ncurses libraries (for "some binary-only
+      the optional non-wide-character ncurses library (for "some binary-only
       application") from the bottom of the <application>Ncurses</application>
-page in LFS are needed for asy and xindy.run.
+      page in LFS is needed for xindy.run which is used by
+      <application>xindy</application>
     </para>
     <para>
-<xref linkend="ruby"/> is used by many scripts,
-<xref linkend="tk"/> is used by epspdftk
+      <xref linkend="python2"/> is used by many scripts.
     </para>
+    <para>
+      <xref linkend="ruby"/> is used by some scripts, mostly within mtx_context
+      which is part of <application>conTeXt</application>.
+    </para>
 
     <para condition="html" role="usernotes">User Notes:
     <ulink url="&blfs-wiki;/tl-installer"/></para>
@@ -145,7 +147,7 @@
     <filename>extrapaths.sh</filename> script. The programs are always
     installed in an &lt;ARCH&gt;-linux subdirectory.
     <emphasis>Always</emphasis> replace &lt;ARCH&gt; by x86_64, for 64bit,
-or by i386, for 32bit, respectivelly, depending on the architecture that
+    or by i386, for 32bit, respectively, depending on the architecture that
     you are using in your actual installation location.</para>
 
 <screen><userinput role="root">cat &gt;&gt; /etc/profile.d/extrapaths.sh &lt;&lt; "EOF"
@@ -191,11 +193,8 @@
       <varlistentry id="tl-installer-programs">
         <term><command>TeX&nbsp;programs</command></term>
         <listitem>
-<para>included in the <application>TeX Live</application> package are
-too numerous to individually list. Please refer to the individual
-program man and html pages in the installation directory's 2011/index.html
-directory, or the various PDF files within the subdirectories of texmf-dist.
-</para>
+          <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
+          href="../../xincludes/texprogs.xml"/>
           <indexterm zone="tl-installer tl-installer-programs">
             <primary sortas="b-tl-installer-programs">TeX Live programs</primary>
           </indexterm>

