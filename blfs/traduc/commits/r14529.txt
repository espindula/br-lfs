Révision 14529

fichiers modifiés :
   general.ent
   pst/printing/cups.xml
   general/genutils/xscreensaver.xml
   introduction/welcome/changelog.xml
   postlfs/security/consolekit.xml

Log :
Several modifications in CUPS-2.0.0. Thanks Armin. XScreenSaver-5.30 and ConsoleKit-0.4.6: tweaks.

Le robot a traité 22 % du commit anglais
Index: general/genutils/xscreensaver.xml
===================================================================
--- general/genutils/xscreensaver.xml	(révision 14528)
+++ general/genutils/xscreensaver.xml	(révision 14529)
@@ -166,15 +166,16 @@
       <title>Linux PAM Configuration</title>
 
       <para>
-If you have built <application>XScreenSaver</application> with
-<application>Linux PAM</application> support, you need to create
-<application>PAM</application> configuration file to get
-<application>XScreenSaver</application> to work correctly with BLFS.
+        If <application>XScreenSaver</application> has been built with
+        <application>Linux PAM</application> support, you need to create a
+        <application>PAM</application> configuration file, to get it working
+        correctly with BLFS.
       </para>
 
       <para>

Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 14528)
+++ introduction/welcome/changelog.xml	(révision 14529)
@@ -45,6 +45,16 @@
 -->
 
     <listitem>
+      <para>October 7th, 2014</para>
+      <itemizedlist>
+        <listitem>
+          <para>[fernando] - Several modifications in CUPS-2.0.0.
+          Thanks Armin.</para>
+        </listitem>
+      </itemizedlist>
+    </listitem>
+    <listitem>
       <para>October 6th, 2014</para>
       <itemizedlist>
         <listitem>

Index: postlfs/security/consolekit.xml
===================================================================
--- postlfs/security/consolekit.xml	(révision 14528)
+++ postlfs/security/consolekit.xml	(révision 14529)
@@ -179,21 +179,20 @@
       <title>PAM Module Configuration</title>
 
       <para>
-If you use <application>Linux PAM</application> you need to
-configure <application>Linux PAM</application> to activate
-<application>ConsoleKit</application> upon user login.
-This can be achieved by editing the
-<filename>/etc/pam.d/system-session</filename> file as the
-<systemitem class="username">root</systemitem> user:
+        If you use <application>Linux PAM</application>, it needs to be
+        configured to activate <application>ConsoleKit</application> upon user
+        login.  This can be achieved by editing the
+        <filename>/etc/pam.d/system-session</filename> file as the <systemitem
+        class="username">root</systemitem> user:
       </para>
 
 <screen role="root"><userinput>cat &gt;&gt; /etc/pam.d/system-session &lt;&lt; "EOF"
-# Begin ConsoleKit addition
+<literal># Begin ConsoleKit addition
 
 session   optional    pam_loginuid.so
 session   optional    pam_ck_connector.so nox11

Index: pst/printing/cups.xml
===================================================================
--- pst/printing/cups.xml	(révision 14528)
+++ pst/printing/cups.xml	(révision 14529)
@@ -209,47 +208,32 @@
 
 <screen><userinput>patch -Np1 -i ../cups-&cups-version;-content_type-1.patch</userinput></screen>-->
 
-<para>
-PAM module needs to be modified for BLFS:
-</para>
     <!-- docdir is also document root for cups administration interface, so
-let's just put it in /usr/share/cups/doc and create symlink in
-/usr/share/doc - I have modified this, inverting the logic; if it is
-disliked, please revert my modification (fernando)
+    let's just put it in /usr/share/cups/doc-&cups-version; and create symlink
+    in /usr/share/doc/cups-&cups-version;
 
     When not using libdir switch, CUPS will install libraries into /usr/lib64
     on a 64 bit system, and since /usr/lib64 is symlink to /usr/lib it might
     introduce some difficulties with packaging -->
 
-<screen><userinput>cat &gt; conf/pam.std.in  &lt;&lt; "EOF"
-<literal># Begin /etc/pam.d/cups
-auth    include system-auth
-account include system-account
-session include system-session
-# End /etc/pam.d/cups</literal>
-EOF</userinput></screen>
     <para>
       Install <application>Cups</application> by running the
       following commands:
     </para>
 
+<screen><userinput>sed -i 's:555:755:g;s:444:644:g' Makedefs.in           &amp;&amp;
+sed -i '/MAN.*.EXT/s:.gz::g' \
+       configure config-scripts/cups-manpages.m4       &amp;&amp;
+sed -i '/LIBGCRYPTCONFIG/d' config-scripts/cups-ssl.m4 &amp;&amp;
 
-<screen><userinput>sed -i '/MAN.*.EXT/s:.gz::g' \
-configure config-scripts/cups-manpages.m4 &amp;&amp;
-sed -i 's:555:755:g;s:444:644:g' Makedefs.in     &amp;&amp;
 aclocal  -I config-scripts &amp;&amp;
 autoconf -I config-scripts &amp;&amp;
 
-CC=gcc \
 ./configure --libdir=/usr/lib            \
             --disable-systemd            \
             --with-rcdir=/tmp/cupsinit   \
             --with-system-groups=lpadmin \
---with-docdir=/usr/share/doc/cups-&cups-version; &amp;&amp;
+            --with-docdir=/usr/share/cups/doc-&cups-version; &amp;&amp;
 make</userinput></screen>
 
    <para>
@@ -267,7 +251,7 @@
 
 <screen role="root"><userinput>make install &amp;&amp;
 rm -rf /tmp/cupsinit &amp;&amp;
-ln -svnf ../doc/cups-&cups-version; /usr/share/cups/doc</userinput></screen>
+ln -svnf ../cups/doc-&cups-version; /usr/share/doc/cups-&cups-version;</userinput></screen>
 
     <para>
       Create a basic <application>Cups</application> client configuration file
@@ -302,18 +286,21 @@
     <title>Command Explanations</title>
 
     <para>
-<command>sed ... cups-manpages.m4</command>: In BLFS, uncompressed man
-pages are preferred.
+      <command>sed ... Makedefs.in</command>: Fix files and directories
+      permissions.
     </para>
 
     <para>
-<command>sed ... Makedefs.in</command>: Fix files and directories
-permissions.
+      <command>sed ... cups-manpages.m4</command>: This sed prevents
+      compression of the man pages by default.
     </para>
 
     <para>
-<envar>CC=gcc</envar>: This environment variable ensures that gcc
-is used if clang is installed.  The build fails with the clang compiler.
+      <command>sed ... cups-ssl.m4</command>: Prevent
+      <command>configure</command> script from searching
+      <command>libgcrypt-config</command>, because
+      <application>libgcrypt</application> is not used anywere else in the
+      package.
     </para>
 
     <para>
@@ -387,6 +374,34 @@
 
     </sect3>
 
+    <sect3>
+      <title>Linux PAM Configuration</title>
+      <para>
+        If <application>CUPS</application> has been built with
+        <application>Linux PAM</application> support, you need to create a
+        <application>PAM</application> configuration file, to get it working
+        correctly with BLFS.
+      </para>
+      <para>
+        Issue the following command as the <systemitem
+        class="username">root</systemitem> user to create the configuration
+        file for <application>Linux PAM</application>:
+      </para>
+<screen><userinput>cat &gt; /etc/pam.d/cups &lt;&lt; "EOF"
+<literal># Begin /etc/pam.d/cups
+auth    include system-auth
+account include system-account
+session include system-session
+# End /etc/pam.d/cups</literal>
+EOF</userinput></screen>
+    </sect3>
     <sect3 id="cups-init">
       <title>Boot Script</title>
 

