Révision 16233

fichiers modifiés :
   x/installing/x7driver-vmmouse.xml
   introduction/welcome/changelog.xml

Log :
Update to Xorg VMMouse Driver 13.1.0

Le robot a traité 16 % du commit anglais
Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 16232)
+++ introduction/welcome/changelog.xml	(révision 16233)
@@ -45,6 +45,16 @@
 -->
 
     <listitem>
+      <para>July 11th, 2015</para>
+      <itemizedlist>
+        <listitem>
+          <para>[pierre] -  Update to Xorg VMMouse Driver-13.1.0.  Fixes
+          <ulink url="&blfs-ticket-root;6653">#6653</ulink>.</para>
+        </listitem>
+      </itemizedlist>
+    </listitem>
+    <listitem>
       <para>July 10th, 2015</para>
       <itemizedlist>
         <listitem>

Index: x/installing/x7driver-vmmouse.xml
===================================================================
--- x/installing/x7driver-vmmouse.xml	(révision 16232)
+++ x/installing/x7driver-vmmouse.xml	(révision 16233)
@@ -39,8 +39,19 @@
         with <application>Qemu</application>, too.
       </para>
 
-&lfs77_checked; &gcc5_built;
+      <note>
+        <para>
+          Starting with version 4.1, the linux kernel supports the VMMouse protocol
+          so that this driver is not needed anymore. Furthermore, kernel support
+          conflicts with earlier versions of this driver (before 13.1), so it is
+          advisable to either remove this driver if you plan to always use kernels
+          with versions greater or equal to 4.1, or update this driver to 13.1
+          or above if you want to be able to use both old and recent kernels.
+        </para>
+      </note>
 
+      &lfs77_checked; &gcc5_checked;
       <bridgehead renderas="sect4">Package Information</bridgehead>
       <itemizedlist spacing="compact">
         <listitem>
@@ -75,16 +86,6 @@
         </listitem>
       </itemizedlist>
 
-<bridgehead renderas="sect4">Additional Downloads</bridgehead>
-<itemizedlist spacing="compact">
-<listitem>
-<para>
-Required patch:
-<ulink url="&patch-root;/xf86-input-vmmouse-&xorg-vmmouse-driver-version;-build_fix-1.patch"/>
-</para>
-</listitem>
-</itemizedlist>
       <bridgehead renderas="sect4">Xorg VMMouse Driver Dependencies</bridgehead>
 
       <bridgehead renderas="sect5">Required</bridgehead>
@@ -97,6 +98,24 @@
       </para>
     </sect3>
 
+    <sect3 role="kernel" id="vmmouse-kernel">
+      <title>Kernel Configuration</title>
+    <para>
+      To get kernel support for the VMMouse, enable the following options in the
+      kernel configuration and recompile the kernel if necessary:
+    </para>
+<screen><literal>Processor type and features ---&gt;
+  [*] Symmetric multi-processing support          [CONFIG_SMP]
+  [*] Support for extended (non-PC) x86 platforms [CONFIG_X86_EXTENDED_PLATFORM]
+  [*] ScaleMP vSMP                                [CONFIG_X86_VSMP]
+Device Drivers ---&gt;
+  Input device support ---&gt;
+    [*] Mice ---&gt;                                 [CONFIG_INPUT_MOUSE]
+      &lt;*/M&gt; PS/2 mouse                            [CONFIG_MOUSE_PS2]
+      [*] Virtual mouse (vmmouse)                 [CONFIG_MOUSE_PS2_VMMOUSE]</literal></screen>
+    </sect3>
     <sect3 role="installation">
       <title>Installation of Xorg VMMouse Driver</title>
 
@@ -105,10 +124,7 @@
         following commands:
       </para>
 
-<screen><userinput>patch -Np1 -i ../xf86-input-vmmouse-&xorg-vmmouse-driver-version;-build_fix-1.patch &amp;&amp;
-sed -i -e '/__i386__/a iopl(3);' tools/vmmouse_detect.c      &amp;&amp;
-./configure $XORG_CONFIG               \
+<screen><userinput>./configure $XORG_CONFIG               \
             --without-hal-fdi-dir      \
             --without-hal-callouts-dir \
             --with-udev-rules-dir=/lib/udev/rules.d &amp;&amp;
@@ -129,18 +145,12 @@
       <title>Command Explanations</title>
 
       <para>
-<command>sed -i -e '/__i386__/a iopl(3);' ...</command>: This command
-allows <command>vmmouse_detect</command> to detect the VMMouse protocol
-in a <application>Qemu</application> virtual machine.
-</para>
-<para>
         <parameter>--with-udev-rules-dir=/lib/udev/rules.d</parameter>:
         This switch specifies where udev rules should be installed.
       </para>
 
       <para>
-<option>--without-hal-*-dir</option>: These switches disable
+        <parameter>--without-hal-*-dir</parameter>: These switches disable
         installation of the <application>HAL</application> components
         which are not needed on Linux.
       </para>

