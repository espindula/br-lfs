Révision 12551

fichiers modifiés :
   general.ent
   introduction/welcome/changelog.xml
   postlfs/security/libcap.xml

Log :
Update to libcap-2.24 and correct PAM module install location reported by Randy McMurphy.

Le robot a traité 35 % du commit anglais
Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 12550)
+++ introduction/welcome/changelog.xml	(révision 12551)
@@ -44,6 +44,18 @@
 
 -->
     <listitem>
+      <para>January 10th, 2014</para>
+      <itemizedlist>
+        <listitem>
+          <para>[igor] - Update to libcap-2.24 and correct PAM module install
+          location reported by Randy McMurphy. Fixes <ulink
+          url="&blfs-ticket-root;4539">#4539</ulink> and <ulink
+          url="&blfs-ticket-root;4523">#4523</ulink>.</para>
+        </listitem>
+      </itemizedlist>
+    </listitem>
+    <listitem>
       <para>January 9th, 2014</para>
       <itemizedlist>
         <listitem>

Index: postlfs/security/libcap.xml
===================================================================
--- postlfs/security/libcap.xml	(révision 12550)
+++ postlfs/security/libcap.xml	(révision 12551)
@@ -58,16 +58,6 @@
       </listitem>
     </itemizedlist>
 
-<bridgehead renderas="sect3">Additional Downloads</bridgehead>
-<itemizedlist spacing="compact">
-<listitem>
-<para>
-Required patch:
-<ulink url="&patch-root;/libcap-&libcap-version;-uapi-1.patch"/>
-</para>
-</listitem>
-</itemizedlist>
     <bridgehead renderas="sect3">libcap Dependencies</bridgehead>
 
     <bridgehead renderas="sect4">Required</bridgehead>
@@ -87,7 +77,7 @@
     <para>Install <application>libcap</application> by running the following
     commands:</para>
 
-<screen><userinput>patch -Np1 -i ../libcap-&libcap-version;-uapi-1.patch &amp;&amp;
+<screen><userinput>sed -i 's:LIBDIR:PAM_&amp;:g' pam_cap/Makefile &amp;&amp;
 make</userinput></screen>
 
     <para>This package does not come with a test suite.</para>
@@ -100,10 +90,13 @@
 
     <para>Now, as the <systemitem class="username">root</systemitem> user:</para>
 
-<screen role="root"><userinput>make RAISE_SETFCAP=no \
-prefix=/usr      \
-SBINDIR=/sbin install</userinput></screen>
+<!-- dev note: make DESTDIR=<DESTDIR> prefix=/usr SBINDIR=<DESTDIR>/sbin PAM_LIBDIR=<DESTDIR>/lib RAISE_SETFCAP=no -->
 
+<screen role="root"><userinput>make prefix=/usr \
+     SBINDIR=/sbin \
+     PAM_LIBDIR=/lib \
+     RAISE_SETFCAP=no install</userinput></screen>
    <para>
      Still as the <systemitem class="username">root</systemitem> user, 
      clean up some library locations and permissions:
@@ -118,6 +111,11 @@
   <sect2 role="commands">
     <title>Command Explanations</title>
 
+    <para>
+      <command>sed -i '...'</command>, <parameter>PAM_LIBDIR=/lib</parameter>:
+      These correct PAM module install location.
+    </para>
     <para><parameter>RAISE_SETFCAP=no</parameter>: This parameter skips trying
     to use <application>setcap</application> on itself.  This avoids an installation
     error if the kernel or file system do not support extended capabilities.</para>

