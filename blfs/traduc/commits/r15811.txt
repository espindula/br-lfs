Révision 15811

fichiers modifiés :
   general/sysutils/unzip.xml
   introduction/welcome/changelog.xml

Log :
unzip: Use the generic target (new in unzip60, apparently) : this fixes unzipping to files larger than 2GiB - e.g. raspberry pi images - on i686.It also mean we do the same for i686 and x86_64. The previous commented option might have also worked, but I guess nobody used to have any reason to unzip such large files.

Le robot a traité 2 % du commit anglais
Index: general/sysutils/unzip.xml
===================================================================
--- general/sysutils/unzip.xml	(révision 15810)
+++ general/sysutils/unzip.xml	(révision 15811)
@@ -181,42 +181,26 @@
     the first required security patch will have some offsets.  Now install
     <application>UnZip</application> by running the following commands:</para> -->
 
-<screen><userinput>case `uname -m` in
-i?86)
-sed -i -e 's/DASM_CRC"/DASM_CRC -DNO_LCHMOD"/' unix/Makefile
-make -f unix/Makefile linux
-;;
-*)
-sed -i -e 's/CFLAGS="-O -Wall/&amp; -DNO_LCHMOD/' unix/Makefile
-make -f unix/Makefile linux_noasm
-;;
-esac</userinput></screen>
+<screen><userinput>make -f unix/Makefile generic</userinput></screen>
 
     <para>To test the results, issue: <command>make check</command>.</para>
 
     <para>Now, as the <systemitem class="username">root</systemitem> user:</para>
 
-<screen role="root"><userinput>make prefix=/usr MANDIR=/usr/share/man/man1 install</userinput></screen>
+<screen role="root"><userinput>make prefix=/usr MANDIR=/usr/share/man/man1 \
+ -f unix/Makefile install</userinput></screen>
 
   </sect2>
 
   <sect2 role="commands">
     <title>Command Explanations</title>
 
-<para><command>sed ...</command>: This command ensures an obsolete
-system call is not made.</para>
+    <para><parameter>make -f unix/Makefile generic</parameter>:
+    This target begins by running a configure script (unlike the older targets
+    such as linux and linux_noasm) which creates a flags file that is then used
+    in the build. This ensures that the 32-bit x86 build receives the right
+    flags to unzip files which which are larger than 2GB when extracted.</para>
 
-<para><parameter>linux, linux_noasm</parameter>:
-The linux target in the <filename>Makefile</filename> makes assumptions
-that are useful for a Linux system when compiling the executables, but
-also uses some 32-bit x86 assembler code. The linux_noasm target will
-build on all linux hosts. To obtain alternatives to these targets, use
-<command>make -f unix/Makefile list</command></para>
-<!-- <para><parameter>LOCAL_UNZIP=...</parameter>:
-This sets the compilation flags to allow <application>UnZip</application>
-to handle files up to 4 GB.</para> -->
   </sect2>
 
   <sect2 role="content">

Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 15810)
+++ introduction/welcome/changelog.xml	(révision 15811)
@@ -48,6 +48,10 @@
       <para>April 8th, 2015</para>
       <itemizedlist>
         <listitem>
+          <para>[ken] - Use the generic target in unzip, this fixes unzipping
+          files larger than 2GB on i686.</para>
+        </listitem>
+        <listitem>
           <para>[fernando] - Archive Totem-3.16.0, Grilo-0.2.12 and
           Grilo-Plugins-0.2.14. Fixes
           <ulink url="&blfs-ticket-root;6378">#6378</ulink>.</para>

