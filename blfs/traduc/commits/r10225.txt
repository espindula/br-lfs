Révision 10225

fichiers modifiés :
   introduction/welcome/changelog.xml
   networking/netprogs/wpa_supplicant.xml

Log :
Add instructions for installing WPA Supplicant D-Bus interface.

Le robot a traité 44 % du commit anglais
Index: networking/netprogs/wpa_supplicant.xml
===================================================================
--- networking/netprogs/wpa_supplicant.xml	(revision 10224)
+++ networking/netprogs/wpa_supplicant.xml	(revision 10225)
@@ -27,71 +28,92 @@
        </para>
       </listitem>
       <listitem>
-        <para>Download MD5 sum: &wpa_supplicant-md5sum;</para>
+        <para>
+          Download (FTP): <ulink url="&wpa_supplicant-download-ftp;"/>
+        </para>
       </listitem>
       <listitem>
-        <para>Download size: &wpa_supplicant-size;</para>
+        <para>
+          Download MD5 sum: &wpa_supplicant-md5sum;
+        </para>
       </listitem>
       <listitem>
-        <para>Estimated disk space required: &wpa_supplicant-buildsize;</para>
+        <para>
+          Download size: &wpa_supplicant-size;
+        </para>
       </listitem>
       <listitem>
-        <para>Estimated build time: &wpa_supplicant-time;</para>
+        <para>
+          Estimated disk space required: &wpa_supplicant-buildsize;
+        </para>
       </listitem>
       <listitem>
-        <para>Required patch: <ulink
-        url="&patch-root;/wpa_supplicant-&wpa_supplicant-version;-libnl-3-fixes-1.patch"/></para>
+        <para>
+          Estimated build time: &wpa_supplicant-time;
+        </para>
       </listitem>
     </itemizedlist>
 
@@     @@
    </para>
     <bridgehead renderas="sect4">Optional</bridgehead>
     <para role="optional">
-    <xref linkend="openssl"/>,
-    <xref linkend="libnl"/> (required to use the nl80211 kernel interface),
-    <!-- using CONFIG_TLS=gnutls fails as
-    src/crypto/tls_gnutls.c uses functions like gnutls_session_get_client_random
-    and gnutls_session_get_server_random which have been removed from current
-    <xref linkend="gnutls"/> -->
-    <xref linkend="dbus"/>,
-    <ulink url="http://libtom.org/">libtommath</ulink>,
-    <xref linkend="libpcap"/> and
-    <ulink url="http://libdnet.sourceforge.net/">libdnet</ulink>.
+      <xref linkend="dbus"/> and
+      <xref linkend="libxml2"/>
+      <!-- D-Bus and libxml2 are required for D-Bus Interface which
+      NetworkManager uses.
+      WPA Supplicant uses internal Linux specific implemenation
+      for L2_PACKET, libpcap or libdnet are only there for portability
+      with other OS'es. See README if you don't believe me. -->
     </para>
 
    <!-- TODO: Write instructions for building wpa_gui -->
@@ -114,82 +138,99 @@
   <sect2 role="installation">
    <title>Installation of WPA Supplicant</title>
 
-    <para>Install <application>wpa_supplicant</application> by running the
-    following commands:</para>
+    <para>
+      First you will need to create an initial configuration file for the
+      build process. You can read <filename>wpa_supplicant/README</filename>
+      and <filename>wpa_supplicant/defconfig</filename> for the explanation
+      of the following options as well as other options that can be used.
+      Create a build configuration file that should work for standard WiFi
+      setups by running the following command:
+    </para>
 
-<screen><userinput>cd wpa_supplicant &amp;&amp;
-cat &gt; .config &lt;&lt; "HERE_DOC"
+<screen><userinput>cat &gt; wpa_supplicant/.config &lt;&lt; "EOF"
+CONFIG_BACKEND=file
+CONFIG_CTRL_IFACE=y
+CONFIG_DRIVER_NL80211=y
 CONFIG_DRIVER_WEXT=y
-CONFIG_EAP_GPSK=y
-CONFIG_EAP_GPSK_SHA256=y
+CONFIG_DRIVER_WIRED=y
 CONFIG_EAP_GTC=y
 CONFIG_EAP_LEAP=y
 CONFIG_EAP_MD5=y
@@     @@
 CONFIG_PEERKEY=y
 CONFIG_PKCS12=y
 CONFIG_READLINE=y
-CONFIG_IPV6=y
-CONFIG_LIBNL32=y
-CFLAGS += -I/usr/include/libnl3
+CONFIG_SMARTCARD=y
+CONFIG_WPS=y
+EOF</userinput></screen>
 
-# If you have not installed openssl, uncomment the next line:
-# CONFIG_TLS=internal
+    <para>
+      If you wish to use <application>WPA Supplicant</application> with
+      <xref linkend="NetworkManager"/>, make sure that you have installed
+      <xref linkend="dbus"/> and <xref linkend="libxml2"/>, then add
+      following options to the <application>WPA Supplicant</application>
+      build configuration file by running the following command:
+    </para>
 
-# If you want to use the internal TLS and have
-# not installed libtommath, uncomment the next line:
-# CONFIG_INTERNAL_LIBTOMMATH=y
+<screen><userinput>cat &gt;&gt; wpa_supplicant/.config &lt;&lt; "EOF"
+CONFIG_CTRL_IFACE_DBUS=y
+CONFIG_CTRL_IFACE_DBUS_NEW=y
+CONFIG_CTRL_IFACE_DBUS_INTRO=y
+EOF</userinput></screen>
 
-# Uncomment the next line if you want to build the nl80211 driver:
-# CONFIG_DRIVER_NL80211=y
+    <para>
+      Install <application>WPA Supplicant</application> by running the
+      following commands:
+    </para>
 
-# Uncomment the next line if you have a ralink chipset:
-# CONFIG_DRIVER_RALINK=y
+<screen><userinput>cd wpa_supplicant &amp;&amp;
+make BINDIR=/sbin LIBDIR=/lib</userinput></screen>
 
-# Uncomment the next line if you have an Agere Hermes chipset:
-# CONFIG_DRIVER_HERMES=y
+    <para>
+      This package does not come with a test suite.
+    </para>
 
-# Uncomment the next line if you have an Atmel chipset:
-# CONFIG_DRIVER_ATMEL=y
+    <para>
+      Now, as the <systemitem class="username">root</systemitem>
+      user:
+    </para>
 
-# Uncomment the next line if you've installed dbus:
-# CONFIG_CTRL_IFACE_DBUS_NEW=y
+<screen role="root"><userinput>install -v -m755 wpa_{cli,passphrase,supplicant} /sbin &amp;&amp;
+install -v -m644 doc/docbook/wpa_supplicant.conf.5 /usr/share/man/man5 &amp;&amp;
+install -v -m644 doc/docbook/wpa_{cli,passphrase,supplicant}.8 /usr/share/man/man8</userinput></screen>
 
-# Uncomment the next line if you've installed libpcap and libdnet:
-# CONFIG_L2_PACKET=pcap
-HERE_DOC
-make</userinput></screen>
+    <para>
+      If you have built <application>WPA Supplicant</application> with
+      <application>D-Bus</application> support, you will need to install
+      <application>D-Bus</application> configuration files. Install them
+      by running the following commands as the
+      <systemitem class="username">root</systemitem> user:
+    </para>
 
-    <para>This package does not come with a test suite.</para>
+<screen role="root"><userinput>install -v -m644 dbus/fi.{epitest.hostap.WPASupplicant,w1.wpa_supplicant1}.service \
+                 /usr/share/dbus-1/system-services &amp;&amp;
+install -v -m644 dbus/dbus-wpa_supplicant.conf /etc/dbus-1/system.d/wpa_supplicant.conf
+</userinput></screen>
 
-    <para>Now, as the <systemitem class="username">root</systemitem>
-    user:</para>
+    <note>
+      <para>
+        You will need to restart system <application>D-Bus</application> daemon before you
+        can use <application>WPA Supplicant</application> <application>D-Bus</application>
+        interface.
+      </para>
+    </note>
 
   </sect2>
 
@@ -206,37 +247,48 @@
 
 <screen role="root"><userinput>wpa_passphrase <replaceable>SSID</replaceable> <replaceable>SECRET_PASSWORD</replaceable> &gt; /etc/wpa_supplicant.conf</userinput></screen>
 
-      <para>/etc/wpa_supplicant.conf can hold the details of several access
-      points. When you run wpa_supplicant it will scan for the SSIDs it can see
-      and choose the appropriate password to connect.</para>
+      <para>
+        <filename>/etc/wpa_supplicant.conf</filename> can hold the details of
+        several access points. When you run <command>wpa_supplicant</command>
+        it will scan for the SSIDs it can see and choose the appropriate
+        password to connect.
+        </para>
 
      <para>
        If you want to connect to an access point that isn't password
@@     @@
   key_mgmt=NONE
 }</screen>
 
-      <para>There are many options that you could use to tweak how you connect
-      to each access point. They are described in some detail in the
-      <filename>wpa_supplicant/wpa_supplicant.conf</filename> file in the
-      source.</para>
+      <para>
+        There are many options that you could use to tweak how you connect
+        to each access point. They are described in some detail in the
+        <filename>wpa_supplicant/wpa_supplicant.conf</filename> file in the
+        source tree.
+      </para>
 
-      <para>To use <command>wpa_cli</command> to control the running
-      wpa_supplicant daemon, add a control interface to
-      <filename>/etc/wpa_supplicant.conf</filename>. As the
-      <systemitem class="username">root</systemitem> user:</para>
+      <para>
+        To use <command>wpa_cli</command> to control the running
+        <command>>wpa_supplicant</command> daemon, add a control interface to
+        <filename>/etc/wpa_supplicant.conf</filename> as the
+        <systemitem class="username">root</systemitem> user:
+      </para>
 
 <screen role="root"><userinput>echo ctrl_interface=/run/wpa_supplicant &gt;&gt; /etc/wpa_supplicant.conf</userinput></screen>
     </sect3>
@@ -244,20 +296,24 @@
 sleep 2 # let it settle
 dhcpcd</userinput></screen>
 
-      <para>Alternatively, you can use static addresses on your local network.
-      This has the advantage that you can put the hostnames in
-      <filename>/etc/hosts</filename>. Replace 192.168.1.6 with the static
-      address you've chosen. Replace 192.168.1.1 with the local IP address of
-      the access point/router. As the
-      <systemitem class="username">root</systemitem> user:</para>
+      <para>
+        Alternatively, you can use static addresses on your local network.
+        This has the advantage that you can put the hostnames in
+        <filename>/etc/hosts</filename>. Replace 192.168.1.6 with the static
+        address you've chosen. Replace 192.168.1.1 with the local IP address of
+        the access point/router. Run the following commands as the
+        <systemitem class="username">root</systemitem> user:
+      </para>
 
 <screen role="root"><userinput>ip addr add 192.168.1.6 dev wlan0
 ip link set wlan0 up
@@ -314,13 +374,18 @@
       <varlistentry id="wpa_cli">
         <term><command>wpa_cli</command></term>
         <listitem>
-          <para>is a command line interface to control a running wpa_supplicant
-          daemon.</para>
+          <para>
+            is a command line interface used to control a running
+            <command>wpa_supplicant</command> daemon.
+          </para>
           <indexterm zone="wpa_supplicant wpa_cli">
             <primary sortas="b-wpa_cli">wpa_cli</primary>
           </indexterm>

