Révision 11362

fichiers modifiés :
   general.ent
   xsoft/graphweb/firefox.xml
   x/lib/xulrunner.xml
   introduction/welcome/changelog.xml

Log :
firefox-22.0. Using a sourceforge variant for http download, updated mozconfig - all cores now used by default, at least on 2 and 4 core machines, removed the escaped dollar : I can no longer replicate the problem and the escape could break the mozconfig.

Le robot a traité 27 % du commit anglais
Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 11361)
+++ introduction/welcome/changelog.xml	(révision 11362)
@@ -44,6 +44,15 @@
 
 -->
     <listitem>
+      <para>July 6th, 2013</para>
+      <itemizedlist>
+        <listitem>
+          <para>[ken] - firefox- and xulrunner-22.0.</para>
+        </listitem>
+      </itemizedlist>
+    </listitem>
+    <listitem>
       <para>July 5th, 2013</para>
       <itemizedlist>
         <listitem>

Index: x/lib/xulrunner.xml
===================================================================
--- x/lib/xulrunner.xml	(révision 11361)
+++ x/lib/xulrunner.xml	(révision 11362)
@@ -5,13 +5,13 @@
   %general-entities;
 
   <!ENTITY xulrunner-download-http
-"http://releases.mozilla.org/pub/mozilla.org/firefox/releases/&firefox-version;/source/firefox-&firefox-version;.source.tar.bz2">
+           "http://www.sourceforge.net/projects/portableapps/files/Source/Firefox/firefox-&firefox-version;.source.tar.bz2">
   <!ENTITY xulrunner-download-ftp
            "ftp://ftp.mozilla.org/pub/mozilla.org/firefox/releases/&firefox-version;/source/firefox-&firefox-version;.source.tar.bz2">
 ]>
@@ -138,10 +138,10 @@
     </para>
 
 <screen><userinput>cat &gt; mozconfig &lt;&lt; "EOF"
-# If you have a multicore machine you can speed up the build by running
-# several jobs at once by uncommenting the following line and setting the
-# value to number of CPU cores:
-#mk_add_options MOZ_MAKE_FLAGS="-j4"
+# If you have a multicore machine, firefox will now use all the cores by
+# default. Exceptionally, you can reduce the number of cores, e.g. to 1,
+# by uncommenting the next line and setting a valid number of CPU cores.
+#mk_add_options MOZ_MAKE_FLAGS="-j1"
 
 # If you have installed DBus-Glib comment out this line:
 ac_add_options --disable-dbus
@@ -217,10 +217,9 @@
 rm -rf /usr/lib/xulrunner-&xulrunner-version;/plugins &amp;&amp;
 ln -sv ../mozilla/plugins /usr/lib/xulrunner-&xulrunner-version; &amp;&amp;
 
-chmod -v 755 /usr/lib/xulrunner-&xulrunner-version;/libxpcom.so \
-/usr/lib/xulrunner-devel-&xulrunner-version;/sdk/bin/xpcshell &amp;&amp;
+chmod -v 755 /usr/lib/xulrunner-devel-&xulrunner-version;/sdk/bin/xpcshell &amp;&amp;
 
-for library in libmozalloc.so libmozjs.so libxpcom.so libxul.so; do
+for library in libmozalloc.so libmozjs.so libxul.so; do
     ln -sfv ../../../xulrunner-&xulrunner-version;/$library \
             /usr/lib/xulrunner-devel-&xulrunner-version;/sdk/lib/$library
     ln -sfv xulrunner-&xulrunner-version;/$library /usr/lib/$library
@@ -253,7 +252,7 @@
     </para>
 
     <para>
-<command>for library in libmozalloc.so libmozjs.so libxpcom.so libxul.so ...
+      <command>for library in libmozalloc.so libmozjs.so libxul.so ...
       </command>: The libraries shipped with this package are installed into
       <filename class="directory">/usr/lib/xulrunner-&xulrunner-version;</filename>
       which means they will not be found at runtime. These commands make

Index: xsoft/graphweb/firefox.xml
===================================================================
--- xsoft/graphweb/firefox.xml	(révision 11361)
+++ xsoft/graphweb/firefox.xml	(révision 11362)
@@ -5,13 +5,13 @@
   %general-entities;
 
   <!ENTITY firefox-download-http
-"http://releases.mozilla.org/pub/mozilla.org/firefox/releases/&firefox-version;/source/firefox-&firefox-version;.source.tar.bz2">
+           "http://www.sourceforge.net/projects/portableapps/files/Source/Firefox/firefox-&firefox-version;.source.tar.bz2">
   <!ENTITY firefox-download-ftp
            "ftp://ftp.mozilla.org/pub/mozilla.org/firefox/releases/&firefox-version;/source/firefox-&firefox-version;.source.tar.bz2">
 ]>
@@ -144,18 +144,15 @@
       below. To see the entire list of available configuration options (and an
       abbreviated description of each one), issue <command>./configure
       --help</command>. You may also wish to review the entire file and
-uncomment any other desired options. The commented line for
-<literal>--with-libxul-sdk</literal> has an escaped dollar sign - if you
-have chosed to paste the entries into a <filename>mozconfig</filename> file
-in your editor, you do not need the escape, it is only necessary when invoking
-a subshell in a HERE document. Create the file by issuing the following command:
+      uncomment any other desired options.
+      Create the file by issuing the following command:
     </para>
 
 <screen><userinput>cat &gt; mozconfig &lt;&lt; "EOF"
-# If you have a multicore machine you can speed up the build by running
-# several jobs at once by uncommenting the following line and setting the
-# value to number of CPU cores:
-#mk_add_options MOZ_MAKE_FLAGS="-j4"
+# If you have a multicore machine, firefox will now use all the cores by
+# default. Exceptionally, you can reduce the number of cores, e.g. to 1,
+# by uncommenting the next line and setting a valid number of CPU cores.
+#mk_add_options MOZ_MAKE_FLAGS="-j1"
 
 # If you have installed DBus-Glib comment out this line:
 ac_add_options --disable-dbus
@@ -173,9 +170,11 @@
 # If you have not installed Yasm then uncomment this line:
 #ac_add_options --disable-webm
 
-# If you have installed xulrunner uncomment following two lines:
+# If you have installed xulrunner uncomment the next two ac_add_options lines
+# and check that the sdk will be set by running pkg-config in a subshell
+# and has not become hardcoded or empty when you created this file
 #ac_add_options --with-system-libxul
-#ac_add_options --with-libxul-sdk=\$(pkg-config --variable=sdkdir libxul)
+#ac_add_options --with-libxul-sdk=$(pkg-config --variable=sdkdir libxul)
 
 # Comment out following options if you have not installed
 # recommended dependencies:
@@ -251,7 +250,6 @@
 tar -xvf firefox-build-dir/dist/firefox-&firefox-version;.en-US.linux-$(uname -m).tar.bz2 \
     -C /usr/lib/firefox-&firefox-version; --strip-components=1 &amp;&amp;
 chown -R -v root:root /usr/lib/firefox-&firefox-version; &amp;&amp;
-chmod -v 755 /usr/lib/firefox-&firefox-version;/libxpcom.so &amp;&amp;
 
 ln -sfv ../lib/firefox-&firefox-version;/firefox /usr/bin &amp;&amp;
 

