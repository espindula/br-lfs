Révision 10946

fichiers modifiés :
   introduction/welcome/changelog.xml
   general.ent
   server/databases/sqlite.xml
   general/prog/tcl.xml
   general/prog/python2.xml
   general/prog/python3.xml
   general/prog/ruby.xml
   general/prog/tk.xml
   general/genutils/graphviz.xml

Log :
Package updates and some modifications. See changelog.xml for details.

Le robot a traité 31 % du commit anglais
Index: general/genutils/graphviz.xml
===================================================================
--- general/genutils/graphviz.xml	(revision 10945)
+++ general/genutils/graphviz.xml	(revision 10946)
@@ -74,16 +74,6 @@
       </listitem>
     </itemizedlist>
 
-    <bridgehead renderas="sect3">Additional Downloads</bridgehead>
-    <itemizedlist spacing="compact">
-      <listitem>
-        <para>
-          Required patch:
-          <ulink url="&patch-root;/graphviz-&graphviz-version;-fix-guile-detection-1.patch"/>
-        </para>
-      </listitem>
-    </itemizedlist>
     <bridgehead renderas="sect3">Graphviz Dependencies</bridgehead>
 
     <bridgehead renderas="sect4">Recommended</bridgehead>
@@ -122,7 +112,7 @@
       <ulink url="http://www.iolanguage.com/about/">Io</ulink>,
       <ulink url="http://www.lua.org/">Lua</ulink>,
       <ulink url="http://www.mono-project.com/Main_Page">Mono</ulink>,
-      <ulink url="http://caml.inria.fr/ocaml/index.en.html">Objective Caml</ulink>,
+      <ulink url="http://ocaml.org/">OCaml</ulink>,
       <xref linkend="php"/>,
       <xref linkend="python2"/>,
       <ulink url="http://www.r-project.org/">R</ulink>,
@@ -144,11 +134,8 @@
       commands:
     </para>
 
-<screen><userinput>patch -Np1 -i ../graphviz-&graphviz-version;-fix-guile-detection-1.patch &amp;&amp;
-sed -e '/"archdir"/s:$:+" '"$(echo -I/usr/include/ruby-1.9.1/{`uname -m`-linux,ruby/backward,})"'":' \
-    -e '/CONFIG/s:site:vendor:' \
-    -i config/config_ruby.rb &amp;&amp;
-./configure --prefix=/usr CXXFLAGS="-fpermissive" &amp;&amp;
+<screen><userinput>sed -e "s/\"guile >=/\"guile-2.0 >=/g" -i configure &amp;&amp;
+./configure --prefix=/usr --disable-static CXXFLAGS="-fpermissive" &amp;&amp;
 make</userinput></screen>
 
     <para>
@@ -164,7 +151,7 @@
     <para>
       If desired, create a symbolic link in the system documents directory
       to the documentation installed in
-      <filename class='directory'>/usr/share/graphviz/doc</filename> using the
+      <filename class="directory">/usr/share/graphviz/doc</filename> using the
       following command as the <systemitem class="username">root</systemitem>
       user:
     </para>
@@ -174,6 +161,20 @@
 
   </sect2>
 
+  <sect2 role="commands">
+    <title>Command Explanations</title>
+    <para>
+      <command>sed -e "s/\"guile >=/\"guile-2.0 >=/g" -i configure</command>:
+      This sed fixes detection of the <application>Guile</application>
+      library.
+    </para>
+    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
+      href="../../xincludes/static-libraries.xml"/>
+  </sect2>
   <sect2 role="configuration">
     <title>Configuring Graphviz</title>
 
@@ -199,7 +200,7 @@
         <command>dot -c</command> (as the
         <systemitem class="username">root</systemitem> user) to update the
         <filename>config</filename> file in
-        <filename class='directory'>/usr/lib/graphviz</filename>.
+        <filename class="directory">/usr/lib/graphviz</filename>.
       </para>
 
     </sect3>

Index: general/prog/python2.xml
===================================================================
--- general/prog/python2.xml	(revision 10945)
+++ general/prog/python2.xml	(revision 10946)
@@ -29,7 +29,7 @@
   <title>Python-&python2-version;</title>
 
   <indexterm zone="python2">
-    <primary sortas="a-Python2">Python</primary>
+    <primary sortas="a-Python2">Python2</primary>
   </indexterm>
 
   <sect2 role="package">
@@ -37,7 +37,7 @@
 
     <para>
       The <application>Python 2</application> package contains the
-      <application>Python</application> development environment. This is useful
+      <application>Python</application> development environment. It is useful
       for object-oriented programming, writing scripts, prototyping large
       programs or developing entire applications. This version is for backward
       compatibility with other dependent packages.
@@ -100,30 +100,37 @@
       </listitem>
     </itemizedlist>
 
+    <bridgehead renderas="sect3">Additional Patches</bridgehead>
+    <itemizedlist spacing="compact">
+      <listitem>
+        <para>
+          Required patch:
+          <ulink url="&patch-root;/Python-&python2-version;-bsddb_fix-1.patch"/>
+        </para>
+      </listitem>
+    </itemizedlist>
     <bridgehead renderas="sect3">Python Dependencies</bridgehead>
 
+    <bridgehead renderas="sect4">Recommended</bridgehead>
+    <para role="recommended">
+      <xref linkend="expat"/>,
+      <xref linkend="libffi"/> and
+      <xref linkend="pkgconfig"/>
+    </para>
     <bridgehead renderas="sect4">Optional</bridgehead>
     <para role="optional">
-      <!-- <xref linkend="pth"/> can only be used if you've overwritten glibc's
-      libpthread. -->
-      <xref linkend="libffi"/> and <xref linkend="pkgconfig"/>
-      (<command>configure</command> uses <command>pkgconfig</command> to find
-      <application>libffi</application>. There is a circular dependency here:
-      <application>Pkgconfig</application> requires
-      <application>Glib</application> which requires
-      <application>Python 2</application>),
-      <!-- gcc's libffi does not install a pkgconfig file -->
-      <ulink url="http://sphinx.pocoo.org/">Sphinx</ulink> (to create the docs),
-      <xref linkend="bluez"/>,
+      <xref linkend="bluez"/> and
+      <ulink url="http://sphinx.pocoo.org/">Sphinx</ulink>
+    </para>
+    <bridgehead renderas="sect4">Optional (For Additional Modules)</bridgehead>
+    <para role="optional">
+      <xref linkend="db"/>,
       <xref linkend="openssl"/>,
-      <xref linkend="tk"/> (there is a circular dependency with the
-      <application>Tk</application> package as it requires Xorg to be installed
-      but parts of Xorg depend on <application>Python</application>),
-      <!--<xref linkend="db"/> and-->
-      <ulink
-      url="http://www.oracle.com/technetwork/products/berkeleydb/downloads/">BerkeleyDB</ulink>
-      (only versions up to 4.8), and
-      <xref linkend="sqlite"/>.
+      <xref linkend="sqlite"/> and
+      <xref linkend="tk"/>
     </para>
 
     <para condition="html" role="usernotes">
@@ -140,7 +147,12 @@
     </para>
 
 <screen><userinput>sed -i "s/ndbm_libs = \[\]/ndbm_libs = ['gdbm', 'gdbm_compat']/" setup.py &amp;&amp;
-./configure --prefix=/usr --enable-shared &amp;&amp;
+patch -Np1 -i ../Python-&python2-version;-bsddb_fix-1.patch &amp;&amp;
+./configure --prefix=/usr       \
+            --enable-shared     \
+            --with-system-expat \
+            --with-system-ffi   \
+            --enable-unicode=ucs4 &amp;&amp;
 make</userinput></screen>
 
     <para>
@@ -193,25 +205,40 @@
     <title>Command Explanations</title>
 
     <para>
-      <option>--with-system-ffi</option>: If you have installed
-      <application>Libffi</application> and
-      <application>Pkgconfig</application>, add this option to compile
-      <application>Python</application>'s _ctypes module using the system
-      installed <application>Libffi</application>. Otherwise
-      <application>Python</application> will compile its own copy of
-      <application>Libffi</application>.
-    </para>
-    <para>
       <command>sed -i "s/ndbm_libs = ..." setup.py</command>: This command is
       used to fix a build problem with the <application>GDBM</application>
       library.
     </para>
 
     <para>
+      <option>--with-system-expat</option>: This switch enables linking against
+      system version of <application>Expat</application>. Remove if you have
+      not installed recommended dependency <xref linkend="expat"/>.
+    </para>
+    <para>
+      <option>--with-system-ffi</option>: This switch enables linking against
+      system version of <application>libffi</application>. Remove if you have
+      not installed recommended dependency <xref linkend="libffi"/>.
+    </para>
+    <para>
+      <parameter>--enable-unicode=ucs4</parameter>: This switch enables
+      32bit Unicode support in <application>Python</application>.
+    </para>
+    <para>
+      <parameter>--with-dbmliborder=bdb:gdbm:ndbm</parameter>: Use this switch
+      if you want to build <application>Python</application> DBM Module 
+      against <application>Berkeley DB</application> instead of
+      <application>GDBM</application>.
+    </para>
+    <para>
       <command>chmod ...</command>: Fix permissions for libraries to be 
       consistent with other libraries.
     </para>

Index: general/prog/python3.xml
===================================================================
--- general/prog/python3.xml	(revision 10945)
+++ general/prog/python3.xml	(revision 10946)
@@ -101,8 +102,9 @@
 
     <bridgehead renderas="sect4">Recommended</bridgehead>
     <para role="recommended">
-      <xref linkend="expat"/> and
-      <xref linkend="libffi"/>
+      <xref linkend="expat"/>,
+      <xref linkend="libffi"/> and
+      <xref linkend="pkgconfig"/>
     </para>
 
     <bridgehead renderas="sect4">Optional</bridgehead>
@@ -188,7 +190,7 @@
     </para>
 
     <para>
-      <option>--with-sytem-expat</option>: This switch enables linking against
+      <option>--with-system-expat</option>: This switch enables linking against
       system version of <application>Expat</application>. Remove if you have
       not installed recommended dependency <xref linkend="expat"/>.
     </para>
@@ -200,6 +202,13 @@
     </para>
 
     <para>
+      <parameter>--with-dbmliborder=bdb:gdbm:ndbm</parameter>: Use this switch
+      if you want to build <application>Python</application> DBM Module
+      against <application>Berkeley DB</application> instead of
+      <application>GDBM</application>.
+    </para>
+    <para>
       <command>chmod ...</command>: Fix permissions for shared libraries to be 
       consistent with other libraries.
     </para>

Index: general/prog/ruby.xml
===================================================================
--- general/prog/ruby.xml	(revision 10945)
+++ general/prog/ruby.xml	(revision 10946)
@@ -75,9 +75,9 @@
 
     <bridgehead renderas="sect4">Optional</bridgehead>
     <para role="optional">
+      <xref linkend="db"/>,
       <xref linkend="doxygen"/>,
       <xref linkend="graphviz"/>,
-      <ulink url="http://pyyaml.org/wiki/LibYAML">libyaml</ulink>,
       <xref linkend="openssl"/> and
       <xref linkend="tk"/>
     </para>
@@ -95,9 +95,7 @@
       commands:
     </para>
 
-<screen><userinput>./configure --prefix=/usr    \
-            --enable-shared  \
-            --enable-pthread &amp;&amp;
+<screen><userinput>./configure --prefix=/usr --enable-shared &amp;&amp;
 make</userinput></screen>
 
     <para>
@@ -120,11 +118,6 @@
       the <filename class="libraryfile">libruby</filename> shared library.
     </para>
 
-    <para>
-      <option>--enable-pthread</option>: This switch enables linking of the
-      threading library into the <application>Ruby</application> build.
-    </para>
   </sect2>
 
   <sect2 role="content">

Index: general/prog/tcl.xml
===================================================================
--- general/prog/tcl.xml	(revision 10945)
+++ general/prog/tcl.xml	(revision 10946)
@@ -6,19 +6,17 @@
   <!ENTITY tcl-doc-download  "&sourceforge-repo;/tcl/tcl&tcl-version;-html.tar.gz">
   <!ENTITY tcl-doc-size      "913 KB">
 
+  <!-- Ensure this is updated when Tcl moves from the 8.6.x branch -->
 ]>
 
 <sect1 id="tcl" xreflabel="Tcl-&tcl-version;">
@@ -127,8 +125,8 @@
 
 <screen><userinput>cd unix &amp;&amp;
 ./configure --prefix=/usr \
-            --enable-threads \
-            --mandir=/usr/share/man &amp;&amp;
+            --mandir=/usr/share/man \
+            $([ $(uname -m) = x86_64 ] &amp;&amp; echo --enable-64bit) &amp;&amp;
 make &amp;&amp;
 
 sed -e "s@^\(TCL_SRC_DIR='\).*@\1/usr/include'@" \
@@ -163,8 +161,10 @@
     <title>Command Explanations</title>
 
     <para>
-      <option>--enable-threads</option>: This switch forces the package
-      to build with threads support.
+      <option>$([ $(uname -m) = x86_64 ] &amp;&amp; echo
+      --enable-64bit)</option>: This switch is used to enable 64 bit
+      support in <application>Tcl</application> on 64 bit operating
+      systems.
     </para>
 
     <para>
@@ -208,8 +208,15 @@
         </seg>
         <seg>
           /usr/lib/tcl8,
+          /usr/lib/thread2.7.0,
+          /usr/lib/tdbcodbc1.0.0,
+          /usr/lib/tdbc1.0.0,
+          /usr/lib/sqlite3.7.15.1,
+          /usr/lib/tdbcpostgres1.0.0,
           /usr/lib/tcl&tcl-ver;,
-          /usr/share/man/mann and optionally
+          /usr/lib/tdbcmysql1.0.0,
+          /usr/lib/itcl4.0.0,
+          /usr/share/man/mann and optionaly
           /usr/share/doc/&tcl-version;
         </seg>
       </seglistitem>
@@ -246,7 +253,7 @@
       </varlistentry>
 
       <varlistentry id="libtcl">
-        <term><filename role="library">libtcl&tcl-ver;.so</filename></term>
+        <term><filename class="libraryfile">libtcl&tcl-ver;.so</filename></term>
         <listitem>
           <para>
             contains the API functions required by 

Index: general/prog/tk.xml
===================================================================
--- general/prog/tk.xml	(revision 10945)
+++ general/prog/tk.xml	(revision 10946)
@@ -6,15 +6,13 @@
   <!ENTITY tk-download-ftp  " ">
   <!ENTITY tk-time          "0.3 SBU">
 
+  <!-- Ensure this is updated when Tk moves from the 8.6.x branch -->
 ]>
 
 <sect1 id="tk" xreflabel="Tk-&tk-version;">
@@ -98,9 +96,11 @@
 
 <screen><userinput>cd unix &amp;&amp;
 ./configure --prefix=/usr \
-            --enable-threads \
-            --mandir=/usr/share/man &amp;&amp;
+            --mandir=/usr/share/man \
+            $([ $(uname -m) = x86_64 ] &amp;&amp; echo --enable-64bit) &amp;&amp;
 make &amp;&amp;
 sed -e "s@^\(TK_SRC_DIR='\).*@\1/usr/include'@" \
     -e "/TK_B/s@='\(-L\)\?.*unix@='\1/usr/lib@" \
@@ -127,8 +127,10 @@
     <title>Command Explanations</title>
 
     <para>
-      <option>--enable-threads</option>: This switch forces the
-      package to build with thread support.
+      <option>$([ $(uname -m) = x86_64 ] &amp;&amp; echo
+      --enable-64bit)</option>: This switch is used to enable 64 bit
+      support in <application>Tk</application> on 64 bit operating
+      systems.
     </para>
 
     <para>
@@ -208,7 +210,7 @@
       </varlistentry>
 
       <varlistentry id="libtk">
-        <term><filename role="library">libtk&tk-ver;.so</filename></term>
+        <term><filename class="libraryfile">libtk&tk-ver;.so</filename></term>
         <listitem>
           <para>
             contains the API functions required

Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(revision 10945)
+++ introduction/welcome/changelog.xml	(revision 10946)
@@ -43,11 +43,30 @@
       <para>January 18th, 2013</para>
       <itemizedlist>
         <listitem>
+          <para>[krejzi] - Graphviz 2.30.0.</para>
+        </listitem>
+        <listitem>
+          <para>[krejzi] - Ruby 1.9.3-p374.</para>
+        </listitem>
+        <listitem>
+          <para>[krejzi] - Tcl 8.6.0.</para>
+        </listitem>
+        <listitem>
+          <para>[krejzi] - Tk 8.6.0.</para>
+        </listitem>
+        <listitem>
+          <para>[krejzi] - Removed Tcl extension build instructions
+          from SQLite page as it is now part of Tcl 8.6.0.</para>
+        </listitem>
+        <listitem>
+          <para>[krejzi] - Fixed Python 2 bsddb module build against 
+          newer Berkeley DB.</para>
+        </listitem>
+        <listitem>
           <para>[randy] - Added DESTDIR instructions to packages that update
           '/usr/share/glib-2.0/schemas'.</para>
         </listitem>

Index: server/databases/sqlite.xml
===================================================================
--- server/databases/sqlite.xml	(revision 10945)
+++ server/databases/sqlite.xml	(revision 10946)
@@ -104,7 +104,6 @@
 
     <bridgehead renderas="sect4">Optional</bridgehead>
     <para role="optional">
-      <xref linkend="tcl"/> and
       <xref linkend="unzip"/> (required to unzip the documentation).
     </para>
 
@@ -136,17 +135,6 @@
 make</userinput></screen>
 
     <para>
-      If you have installed <xref linkend="tcl"/> and wish to build
-      <application>SQLite</application> <application>TCL</application>
-      extension, issue the following commands:
-    </para>
-<screen><userinput>pushd tea &amp;&amp;
-./configure --prefix=/usr &amp;&amp;
-make &amp;&amp;
-popd</userinput></screen>
-    <para>
       This package does not come with a test suite.
     </para>
 
@@ -157,14 +145,6 @@
 <screen role="root"><userinput>make install</userinput></screen>
 
     <para>
-      If you have built <xref linkend="tcl"/> extension, install it by
-      running the following command as the
-      <systemitem class="username">root</systemitem> user:
-    </para>
-<screen role="root"><userinput>make -C tea install</userinput></screen>
-    <para>
       If you downloaded the optional documentation, issue the following commands
       as the <systemitem class="username">root</systemitem> user to install it:
     </para>
@@ -200,7 +180,7 @@
     <segmentedlist>
       <segtitle>Installed Program</segtitle>
       <segtitle>Installed Library</segtitle>
-      <segtitle>Installed Directories</segtitle>
+      <segtitle>Installed Directory</segtitle>
 
       <seglistitem>
         <seg>
@@ -210,7 +190,6 @@
           libsqlite3.so
         </seg>
         <seg>
-          /usr/lib/sqlite&sqlite-version; and
           /usr/share/doc/sqlite-&sqlite-version;
         </seg>
       </seglistitem>

