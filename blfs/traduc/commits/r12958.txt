Révision 12958

fichiers modifiés :
   introduction/welcome/changelog.xml
   postlfs/security/stunnel.xml
   general.ent

Log :
Update to stunnel-5.00

Le robot a traité 40 % du commit anglais
Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 12957)
+++ introduction/welcome/changelog.xml	(révision 12958)
@@ -48,6 +48,10 @@
       <para>April 15th, 2014</para>
       <itemizedlist>
        <listitem>
+          <para>[bdubbs] - stunnel-5.00. Fixes
+          <ulink url="&blfs-ticket-root;4770">#4770</ulink>.</para>
+        </listitem>
+       <listitem>
           <para>[fernando] - xvid-1.3.3. Fixes
           <ulink url="&blfs-ticket-root;4948">#4948</ulink>.</para>
         </listitem>

Index: postlfs/security/stunnel.xml
===================================================================
--- postlfs/security/stunnel.xml	(révision 12957)
+++ postlfs/security/stunnel.xml	(révision 12958)
@@ -62,19 +62,18 @@
      <xref linkend="openssl"/>
    </para>
 
+    <bridgehead renderas="sect4">Optional</bridgehead>
+    <para role="optional">
+      <ulink url="ftp://ftp.porcupine.org/pub/security/">tcpwrappers</ulink>
+    </para>
     <para condition="html" role="usernotes">User Notes:
     <ulink url="&blfs-wiki;/stunnel"/></para>
 
@@ -93,15 +92,13 @@
      signed SSL Certificate you wish to use, copy it to
       <filename>/etc/stunnel/stunnel.pem</filename> before starting the build
       (ensure only <systemitem class="username">root</systemitem> has read and
-write access), otherwise you will be
-prompted to create one during the installation process. The
-<filename class="extension">.pem</filename> file must be formatted as
-shown below:</para>
+      write access).  The <filename class="extension">.pem</filename> file must
+      be formatted as shown below:</para>
 
 <screen><literal>-----BEGIN PRIVATE KEY-----
 <replaceable>&lt;many encrypted lines of private key&gt;</replaceable>
@@ -119,8 +116,7 @@
 
 <screen><userinput>./configure --prefix=/usr \
             --sysconfdir=/etc \
---localstatedir=/var \
---disable-fips &amp;&amp;
+            --localstatedir=/var &amp;&amp;
 make</userinput></screen>
 
     <para>This package does not come with a test suite.</para>
@@ -129,27 +125,30 @@
 
 <screen role="root"><userinput>make docdir=/usr/share/doc/stunnel-&stunnel-version; install</userinput></screen>
 
+    <para>To create the <filename>stunnel.pem</filename> in the
+    <filename class="directory">/etc/stunnel</filename> directory, 
+    you need to create one.   The following command prompts you
+    for the necessary information. Ensure you reply to the</para>
+    
+<screen><prompt>Common Name (FQDN of your server) [localhost]:</prompt></screen>
+    <para>prompt with the name or IP address you will be using
+    to access the service(s).</para>
+    <para>To generate a certificate, as the 
+    <systemitem class="username">root</systemitem> user, run:</para>
+<screen role="root"><userinput>make cert</userinput></screen>
   </sect2>
 
   <sect2 role="commands">
     <title>Command Explanations</title>
 
-<para><parameter>--disable-fips</parameter>: This switch disables FIPS support
-which will cause <application>Stunnel</application> to fail to start if
-it is enabled.</para>
     <para><command>make docdir=... install</command>: This command installs the
     package, changes the documentation installation directory to standard
-naming conventions and, if you did not copy an
-<filename>stunnel.pem</filename> file to the
-<filename class="directory">/etc/stunnel</filename> directory, prompts you
-for the necessary information to create one. Ensure you reply to the</para>
+    naming conventions.</para>
 
-<screen><prompt>Common Name (FQDN of your server) [localhost]:</prompt></screen>
-<para>prompt with the name or IP address you will be using
-to access the service(s).</para>
   </sect2>
 
   <sect2 role="configuration">
@@ -184,13 +183,26 @@
 <screen role="root"><userinput>cat &gt;/etc/stunnel/stunnel.conf &lt;&lt; "EOF" &amp;&amp;
 <literal>; File: /etc/stunnel/stunnel.conf
 
+; Note: The pid and output locations are relative to the chroot location.
 pid    = /run/stunnel.pid
 chroot = /var/lib/stunnel
 client = no
@@     @@
 setgid = stunnel
cert   = /etc/stunnel/stunnel.pem
 
+;debug = 7
+;output = stunnel.log
+;[https]
+;accept  = 443
+;connect = 80
+;; "TIMEOUTclose = 0" is a workaround for a design flaw in Microsoft SSL
+;; Microsoft implementations do not use SSL close-notify alert and thus
+;; they are vulnerable to truncation attacks
+;TIMEOUTclose = 0</literal>
 EOF
 chmod -v 644 /etc/stunnel/stunnel.conf</userinput></screen>
 

