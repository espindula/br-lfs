Révision 16560

fichiers modifiés :
   postlfs/security/gnutls.xml
   postlfs/security/nss.xml
   multimedia/libdriv/libquicktime.xml
   multimedia/libdriv/faac.xml
   multimedia/libdriv/audiofile.xml
   multimedia/libdriv/libmpeg2.xml
   multimedia/libdriv/libogg.xml
   multimedia/libdriv/libcanberra.xml
   multimedia/libdriv/faad2.xml
   general.ent
   packages.ent
   pst/printing/gs.xml
   general/genutils/graphviz.xml
   general/genlib/nspr.xml
   general/prog/python3.xml
   introduction/welcome/changelog.xml
   networking/netprogs/ntp.xml

Log :
• Update to ntp-4.2.8p4 - Security update. • graphviz-2.38.0 fails to build with ghostscript-9.18. • audiofile-0.3.6: tests DO pass with --disable-static. • Update to gnutls-3.4.6. • Update to nss-3.20.1. • Update to nspr-4.10.10. • libmpeg2-0.5.1: install only shared libraries. • libquicktime-1.2.4: rephase one paragrah about doxygen. • libcanberra-0.30: include some "Command Explanations and fix one directory. • Python-3.4.3: replace PYTHONDOCS by unversioned value, no need to remember to fix profile for user or glogal one. • ghostscript-9.16: fix instruction for symlink to docs, for eventual reinstal. • libogg-1.3.2: reformat. • FAAD2-2.7: reformat. • faac-1.28: reformat.

Le robot a traité 46 % du commit anglais
Index: general/genutils/graphviz.xml
===================================================================
--- general/genutils/graphviz.xml	(révision 16559)
+++ general/genutils/graphviz.xml	(révision 16560)
@@ -134,8 +134,12 @@
       commands:
     </para>
 
-<screen><userinput>sed "s:ruby-1.9:ruby-2.2:g" -i configure &amp;&amp;
-./configure --prefix=/usr &amp;&amp;
+<screen><userinput>sed -e "s:ruby-1.9:ruby-2.2:g" \
+    -i configure                  &amp;&amp;
+sed -e 's/ e_/ gs_error_/' \
+    -i plugin/gs/gvloadimage_gs.c &amp;&amp;
+./configure --prefix=/usr         &amp;&amp;
 make</userinput></screen>
 
     <para>
@@ -166,11 +170,19 @@
     <title>Command Explanations</title>
 
     <para>
-<command>sed "s:ruby-1.9:ruby-2.2:g" -i configure</command>: Use this
-command, if ruby-2.2.0 is installed and you wish
+      <command>sed -e "s:ruby-1.9:ruby-2.2:g" -i configure</command>:
+      Use this command, if ruby-2.2.0 is installed and you wish
       <application>Graphviz</application> built with support for it.
     </para>
 
+    <para>
+      <command>sed -e 's/ e_/ gs_error_/' ...</command>: Use this
+      command, if ghostscript-9.18 or later is installed and you wish
+      <application>Graphviz</application> built with support for it, or
+      else the build fails because some identifiers have been renamed in
+      ghostscript-9.18's headers.
+    </para>
   </sect2>
 
   <sect2 role="configuration">

Index: general/prog/python3.xml
===================================================================
--- general/prog/python3.xml	(révision 16559)
+++ general/prog/python3.xml	(révision 16560)
@@ -214,11 +214,13 @@
 
     <para>
       In order for <command>python3</command> to find the installed
-documentation, you must add the following environment variable to
-individual user's or the system's profile:
+      documentation, define the following environment version
+      independent variable and add to the individual user's or system's
+      profile:
     </para>
 
-<screen role="root"><userinput>export PYTHONDOCS=/usr/share/doc/python-&python3-version;/html</userinput></screen>
+<screen role="root"><userinput>ln -svfn python--&python3-version; /usr/share/doc/python-3 &amp;&amp;
+export PYTHONDOCS=/usr/share/doc/python-3/html</userinput></screen>
 
   </sect2>
 

Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 16559)
+++ introduction/welcome/changelog.xml	(révision 16560)
@@ -45,6 +45,42 @@
 -->
 
     <listitem>
+      <para>October 24th, 2015</para>
+      <itemizedlist>
+        <listitem>
+          <para>[fernando] - libmpeg2-0.5.1: install only shared libraries.
+          Fixes <ulink url="&blfs-ticket-root;7045">#7045</ulink>.</para>
+        </listitem>
+        <listitem>
+          <para>[fernando] - Update nspr-4.10.10. Fixes
+          <ulink url="&blfs-ticket-root;7041">#7041</ulink>.</para>
+        </listitem>
+        <listitem>
+          <para>[fernando] - Update to nss-3.20.1. Fixes
+          <ulink url="&blfs-ticket-root;7040">#7040</ulink>.</para>
+        </listitem>
+        <listitem>
+          <para>[fernando] - Update to gnutls-3.4.6. Fixes
+          <ulink url="&blfs-ticket-root;7039">#7039</ulink>.</para>
+        </listitem>
+        <listitem>
+          <para>[fernando] - audiofile-0.3.6: tests DO pass with
+          --disable-static. Fixes
+          <ulink url="&blfs-ticket-root;7038">#7038</ulink>.</para>
+        </listitem>
+        <listitem>
+          <para>[fernando] - graphviz-2.38.0 fails to build with
+          ghostscript-9.18. Fixes
+          <ulink url="&blfs-ticket-root;7037">#7037</ulink>.</para>
+        </listitem>
+        <listitem>
+          <para>[fernando] - Update to ntp-4.2.8p4 - Security update. Fixes
+          <ulink url="&blfs-ticket-root;7042">#7042</ulink>.</para>
+        </listitem>
+      </itemizedlist>
+    </listitem>
+    <listitem>
       <para>October 23rd, 2015</para>
       <itemizedlist>
         <listitem>

Index: multimedia/libdriv/audiofile.xml
===================================================================
--- multimedia/libdriv/audiofile.xml	(révision 16559)
+++ multimedia/libdriv/audiofile.xml	(révision 16560)
@@ -102,21 +102,39 @@
       commands:
     </para>
 
-<screen><userinput>./configure --prefix=/usr &amp;&amp;
+<screen><userinput>./configure --prefix=/usr --disable-static &amp;&amp;
 make</userinput></screen>
 
     <para>
-To test the results, issue: <command>make check</command>. 
+      Now, as the <systemitem class="username">root</systemitem> user:
+    </para>
+<screen role="root"><userinput>make install</userinput></screen>
+    <para>
+      To test the results, issue: <command>make check</command>.
       Note that the tests will fail if the --disable-static
-option is used.
+      option is used and tests are executed before
+      <command>make install</command>. You have three options:
     </para>
 
     <para>
-Now, as the <systemitem class="username">root</systemitem> user:
+     (a) configure without --disable-static, run the tests, but do not
+     install, then start a fresh build using --disable-static just for
+     installing the package.
     </para>
 
-<screen role="root"><userinput>make install</userinput></screen>
+    <para>
+     (b) configure with --disable-static, but only run the tests after the
+     package is installed.
+    </para>
 
+    <para>
+     (b) configure with --disable-static, but only run the tests after a
+     DESTDIR install.
+    </para>
   </sect2>
 
   <sect2 role="commands">

Index: multimedia/libdriv/libcanberra.xml
===================================================================
--- multimedia/libdriv/libcanberra.xml	(révision 16559)
+++ multimedia/libdriv/libcanberra.xml	(révision 16560)
@@ -125,6 +125,14 @@
   <sect2 role="commands">
     <title>Command Explanations</title>
 
+    <para><parameter>--disable-oss</parameter>: disable optional deprecated OSS
+    support</para>
+    <para><option>--disable-gtk</option>: disable optional GTK+ 2 support</para>
+    <para><option>--disable-gtk3</option>: disable optional GTK+ 3
+    support</para>
     <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
       href="../../xincludes/gtk-doc-rebuild.xml"/>
 
@@ -148,7 +156,7 @@
         </seg>
         <seg>
           /usr/lib/libcanberra-&libcanberra-version;,
-/usr/share/doc/libcanberra and
+          /usr/share/doc/libcanberra-&libcanberra-version; and
           /usr/share/gtk-doc/html/libcanberra
         </seg>
       </seglistitem>

Index: multimedia/libdriv/libmpeg2.xml
===================================================================
--- multimedia/libdriv/libmpeg2.xml	(révision 16559)
+++ multimedia/libdriv/libmpeg2.xml	(révision 16560)
@@ -78,7 +78,10 @@
     commands:</para>
 
 <screen><userinput>sed -i 's/static const/static/' libmpeg2/idct_mmx.c &amp;&amp;
-./configure --prefix=/usr                           &amp;&amp;
+./configure --prefix=/usr    \
+            --enable-shared  \
+            --disable-static &amp;&amp;
 make</userinput></screen>
 
     <para>To test the results, issue: <command>make check</command>. To
@@ -99,6 +103,10 @@
 
     <para><command>sed -i ...</command>: This <command>sed</command> fixes
     problems with recent GCC compilers.</para>
+    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
+      href="../../xincludes/static-libraries.xml"/>
   </sect2>
 
   <sect2 role="content">
@@ -111,9 +119,11 @@
 
       <seglistitem>
         <seg>corrupt_mpeg2, extract_mpeg2 and mpeg2dec</seg>
-<seg>libmpeg2.{so,a} and libmpeg2convert.{so,a}</seg>
-<seg>/usr/include/mpeg2dec and
-/usr/share/doc/mpeg2dec-&libmpeg2-version;</seg>
+        <seg>libmpeg2.so and libmpeg2convert.so</seg>
+        <seg>
+          /usr/include/mpeg2dec and
+          /usr/share/doc/mpeg2dec-&libmpeg2-version;
+        </seg>
       </seglistitem>
     </segmentedlist>
 

Index: multimedia/libdriv/libogg.xml
===================================================================
--- multimedia/libdriv/libogg.xml	(révision 16559)
+++ multimedia/libdriv/libogg.xml	(révision 16560)
@@ -68,7 +68,9 @@
     <para>Install <application>libogg</application> by running the following
     commands:</para>
 
-<screen><userinput>./configure --prefix=/usr --docdir=/usr/share/doc/libogg-&libogg-version; --disable-static &amp;&amp;
+<screen><userinput>./configure --prefix=/usr    \
+            --disable-static \
+            --docdir=/usr/share/doc/libogg-&libogg-version; &amp;&amp;
 make</userinput></screen>
 
     <para>To test the results, issue: <command>make check</command>.</para>

Index: multimedia/libdriv/libquicktime.xml
===================================================================
--- multimedia/libdriv/libquicktime.xml	(révision 16559)
+++ multimedia/libdriv/libquicktime.xml	(révision 16560)
@@ -150,8 +151,9 @@
     </para>
 
     <para>
-<parameter>--without-doxygen</parameter>: This is necessary if you do
-not have <application>Doxygen</application>, omit this if installed.
+      <parameter>--without-doxygen</parameter>: This is necessary if you do not
+      have <application>Doxygen</application>, omit this if it is installed and
+      you wish the API documentation installed.
     </para>
 
     <para>

Index: packages.ent
===================================================================
--- packages.ent	(révision 16559)
+++ packages.ent	(révision 16560)
@@ -24,11 +24,11 @@
 <!ENTITY mitkrb-version               "&mitkrb-major-version;.2">
 <!ENTITY nettle-version               "3.1.1">
 <!ENTITY nss-minor-version            "20">
+<!-- normal -->
+<!-- major and minor only
 <!ENTITY openssh-version              "7.1p1">
 <!ENTITY openssl-version              "1.0.2d">
 <!ENTITY p11-kit-version              "0.23.1">    <!-- Even minors only -->

Index: pst/printing/gs.xml
===================================================================
--- pst/printing/gs.xml	(révision 16559)
+++ pst/printing/gs.xml	(révision 16560)
@@ -217,7 +217,7 @@
 
     <para>Now make the documentation accessible from the normal place:</para>
 
-<screen role="root"><userinput>ln -sfv ../ghostscript/&gs-version;/doc /usr/share/doc/ghostscript-&gs-version;</userinput></screen>
+<screen role="root"><userinput>ln -sfvn ../ghostscript/&gs-version;/doc /usr/share/doc/ghostscript-&gs-version;</userinput></screen>
 
     <para>
       If you have downloaded any fonts, unpack them to

