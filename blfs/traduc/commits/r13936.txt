Révision 13936

fichiers modifiés :
   x/installing/xorg7.xml
   postlfs/config/profile.xml

Log :
Reference bash startup section in xorg intro

Le robot a traité 31 % du commit anglais
Index: postlfs/config/profile.xml
===================================================================
--- postlfs/config/profile.xml	(révision 13935)
+++ postlfs/config/profile.xml	(révision 13936)
@@ -161,6 +161,8 @@
         fi
 done
 
+uset script RED GREEN NORMAL
 # End /etc/profile</literal>
 EOF</userinput></screen>
 
@@ -213,12 +215,9 @@
         <primary sortas="e-etc-profile.d-extrapaths.sh">/etc/profile.d/extrapaths.sh</primary>
       </indexterm>
 
-<para>This script adds several useful paths to the <envar>PATH</envar> and
-<envar>PKG_CONFIG_PATH</envar> environment variables.  If you want, you
-can uncomment the last section to put a dot at the end of your path. This will
-allow executables in the current working directory to be executed without
-specifying a ./, however you are warned that this is generally considered a
-security hazard.</para>
+      <para>This script adds some useful paths to the <envar>PATH</envar> and
+      can be used to customize other PATH related environment variables
+      (e.g. LD_LIBRARY_PATH, etc) that may be needed for all users.</para> 
 
 <screen role="root"><userinput>cat &gt; /etc/profile.d/extrapaths.sh &lt;&lt; "EOF"
 <literal>if [ -d /usr/local/lib/pkgconfig ] ; then
@@ -229,14 +228,7 @@
 fi
 if [ -d /usr/local/sbin -a $EUID -eq 0 ]; then
         pathprepend /usr/local/sbin
-fi
-if [ -d ~/bin ]; then
-pathprepend ~/bin
-fi
-#if [ $EUID -gt 99 ]; then
-#        pathappend .
-#fi</literal>
+fi</literal>
 EOF</userinput></screen>
 
     </sect3>
@@ -380,6 +372,8 @@
   PS1="$GREEN\u [ $NORMAL\w$GREEN ]\$ $NORMAL"
 fi
 
+unset RED GREEN NORMAL
 # End /etc/bashrc</literal>
 EOF</userinput></screen>
 
@@ -412,29 +406,18 @@
 # environment variables and startup programs are in /etc/profile.
 # System wide aliases and functions are in /etc/bashrc.
 
-append () {
-# First remove the directory
-local IFS=':'
-local NEWPATH
-for DIR in $PATH; do
-if [ "$DIR" != "$1" ]; then
-NEWPATH=${NEWPATH:+$NEWPATH:}$DIR
-fi
-done
-# Then append the directory
-export PATH=$NEWPATH:$1
-}
 if [ -f "$HOME/.bashrc" ] ; then
   source $HOME/.bashrc
 fi
 
 if [ -d "$HOME/bin" ] ; then
-append $HOME/bin
+  pathprepend $HOME/bin
 fi
 
-unset append
+# Having . in the PATH is dangerous
+#if [ $EUID -gt 99 ]; then
+#  pathappend .
+#fi
 
 # End ~/.bash_profile</literal>
 EOF</userinput></screen>

Index: x/installing/xorg7.xml
===================================================================
--- x/installing/xorg7.xml	(révision 13935)
+++ x/installing/xorg7.xml	(révision 13936)
@@ -78,45 +78,14 @@
   <sect2 id="xorg-env" xreflabel="Xorg build environment">
     <title>Setting up the Xorg Build Environment</title>
 
+    <note><para>The following instructions assume that the shell
+    startup files have been set up as described in 
+    <xref linkend="postlfs-config-profile" />.
+    </para></note>
     <para>First, you'll need to create a working directory:</para>
 
 <screen><userinput>mkdir xc &amp;&amp;

