Révision 16830

fichiers modifiés :
   pst/printing/cups-filters.xml
   general/graphlib/libpng.xml
   introduction/welcome/changelog.xml
   multimedia/videoutils/vlc.xml
   multimedia/libdriv/pulseaudio.xml
   general.ent
   packages.ent

Log :
• Update to libpng-1.6.21. Replaced apng patch. • Update to pulseaudio-8.0. • VLC-2.2.1: several fixes and disable building with opencv-3.1.0. • Update to cups-filters-1.8.1.

Le robot a traité 30 % du commit anglais
Index: general/graphlib/libpng.xml
===================================================================
--- general/graphlib/libpng.xml	(révision 16829)
+++ general/graphlib/libpng.xml	(révision 16830)
@@ -6,15 +6,17 @@
 
   <!ENTITY apng-version "&libpng-version;">
 
+           "&sourceforge-repo;/libpng-apng/libpng-&apng-version;-apng.patch.gz">-->
   <!ENTITY apng-patch
-"&sourceforge-repo;/libpng-apng/libpng-&apng-version;-apng.patch.gz">
+           "&sourceforge-repo;/project/apng/libpng/libpng16/libpng-&apng-version;-apng.patch.gz">
 ]>
 
 <sect1 id="libpng" xreflabel="libpng-&libpng-version;">
@@ -103,7 +105,8 @@
       If you want to patch libpng to support apng files, apply the patch:
     </para>
 
-<screen><userinput>gzip -cd ../libpng-&apng-version;-apng.patch.gz | patch -p1</userinput></screen>
+<!--<screen><userinput>gzip -cd ../libpng-&apng-version;-apng.patch.gz | patch -p1</userinput></screen>-->
+<screen><userinput>gzip -cd ../libpng-&apng-version;-apng.patch.gz | patch -p0</userinput></screen>
 
     <para>
       Install <application>libpng</application> by running the following

Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 16829)
+++ introduction/welcome/changelog.xml	(révision 16830)
@@ -45,6 +45,28 @@
 -->
 
     <listitem>
+      <para>January 22nd, 2016</para>
+      <itemizedlist>
+        <listitem>
+          <para>[fernando] - Update to cups-filters-1.8.1. Fixes
+          <ulink url="&blfs-ticket-root;7388">#7388</ulink>.</para>
+        </listitem>
+        <listitem>
+          <para>[fernando] - Update to libpng-1.6.21. Replaced apng patch. Fixes
+          <ulink url="&blfs-ticket-root;7369">#7369</ulink>.</para>
+        </listitem>
+        <listitem>
+          <para>[fernando] - VLC-2.2.1: several fixes and disable building
+          with opencv-3.1.0.</para>
+        </listitem>
+        <listitem>
+          <para>[fernando] - Update to pulseaudio-8.0. Fixes
+          <ulink url="&blfs-ticket-root;7302">#7302</ulink>.</para>
+        </listitem>
+      </itemizedlist>
+    </listitem>
+    <listitem>
       <para>January 21th, 2016</para>
       <itemizedlist>
         <listitem>

Index: multimedia/libdriv/pulseaudio.xml
===================================================================
--- multimedia/libdriv/pulseaudio.xml	(révision 16829)
+++ multimedia/libdriv/pulseaudio.xml	(révision 16830)
@@ -109,11 +109,11 @@
       <ulink url="http://www.jackaudio.org/">JACK</ulink>,
       <ulink url="http://0pointer.de/lennart/projects/libasyncns/">libasyncns</ulink>,
       <ulink url="http://www.lirc.org/">LIRC</ulink>,
-<ulink url="http://code.entropywave.com/projects/orc/">ORC</ulink>,
+      <ulink url="http://gstreamer.freedesktop.org/src/orc/">ORC</ulink>,
       <ulink url="http://tdb.samba.org/">TDB</ulink>,
       <ulink url="http://freedesktop.org/software/pulseaudio/webrtc-audio-processing/">
       WebRTC AudioProcessing</ulink> and
-<ulink url="http://www.xen.org/">XEN</ulink>
+      <ulink url="http://www.xenproject.org/">XEN</ulink>
     </para>
 
     <para condition="html" role="usernotes">User Notes:
@@ -256,18 +256,15 @@
           start-pulseaudio-x11
         </seg>
         <seg>
-libpulse.so,
-libpulsecommon-&pulseaudio-major-version;.so,
-libpulsedsp.so,
           libpulse-mainloop-glib.so,
-libpulse-simple.so, and
-libpulsecore-&pulseaudio-major-version;.so
+          libpulse-simple.so and
+          libpulse.so
         </seg>
         <seg>
           /etc/pulse,
           /usr/include/pulse,
+          /usr/lib/cmake/PulseAudio,
           /usr/lib/{pulseaudio,pulse-&pulseaudio-major-version;},
-/usr/lib/cmake/PulseAudio,
           /usr/libexec/pulse, and
           /usr/share/pulseaudio
         </seg>

Index: multimedia/videoutils/vlc.xml
===================================================================
--- multimedia/videoutils/vlc.xml	(révision 16829)
+++ multimedia/videoutils/vlc.xml	(révision 16830)
@@ -100,14 +100,14 @@
       <xref linkend="libdvdcss"/>,
       <xref linkend="libdvdread"/>,
       <xref linkend="libdvdnav"/>,
+      <xref linkend="opencv"/>,
       <xref linkend="samba"/>,
       <xref linkend="v4l-utils"/>,
       <ulink url="http://www.videolan.org/developers/libbluray.html">libbluray</ulink>,
       <ulink url="http://sourceforge.net/projects/libdc1394/">libdc1394</ulink>,
       <ulink url="http://sourceforge.net/projects/libcddb/">libcddb</ulink>,
       <ulink url="http://code.google.com/p/libproxy/">libproxy</ulink>,
-<ulink url="http://www.live555.com/">Live555</ulink>,
-<ulink url="http://sourceforge.net/projects/opencvlibrary/">OpenCV</ulink>, and
+      <ulink url="http://www.live555.com/">Live555</ulink>, and
       <ulink url="http://www.gnu.org/software/vcdimager/">VCDImager</ulink>
       (requires <xref linkend="libcdio"/>)
     </para>
@@ -216,15 +216,15 @@
 <screen><userinput>sed -e 's:libsmbclient.h:samba-4.0/&amp;:' \
     -i modules/access/smb.c &amp;&amp;
 
+sed -e '/LUA_C/ i #define LUA_COMPAT_APIINTCASTS' \
+    -i modules/lua/vlc.h    &amp;&amp;
 ./bootstrap &amp;&amp;
 
-./configure --prefix=/usr &amp;&amp;
+./configure --prefix=/usr --enable-opencv=no &amp;&amp;
 
-sed -e 's/luaL_optint/(int)&amp;eger/' \
--i modules/lua/libs/{net,osd,volume}.c &amp;&amp;
-sed -e 's/luaL_checkint(/(int)luaL_checkinteger(/' \
--i modules/lua/{demux,libs/{configuration,net,osd,playlist}}.c \
-modules/lua/{demux,libs/{stream,variables,volume}}.c &amp;&amp;
+sed -e '/seems to be moved/s/^/#/' \
+    -i.orig autotools/ltmain.sh libtool &amp;&amp;
 
 make</userinput></screen>
 
@@ -261,18 +261,25 @@
     </para>
 
     <para>
+      <command>sed -e ... -i modules/lua/vlc.h</command> This sed fixes
+      compilation with <application>lua</application> 5.3.
+    </para>
+    <para>
       <command>./bootstrap</command>: This command calls autoreconf to generate
       m4 macros and prepare Makefiles.
     </para>
 
     <para>
-<command>sed -i ... {net,osd,volume}.c</command> This sed fixes
-compilation with <application>lua</application> 5.3.
+      <command>sed -e ... -i.orig autotools/ltmain.sh libtool</command>: This
+      optional sed removes a lot of invalid build warnings.
+      If desired, remove it.
     </para>
 
     <para>
-<command>sed -i ... variables,volume}}.c</command>: This sed fixes
-compilation with <application>lua</application> 5.3.
+      <parameter>--enable-opencv=no</parameter>: This switch disables
+      <application>opencv</application> suport, because build is broken with
+      opencv-3.1.
     </para>
 
     <para>

Index: pst/printing/cups-filters.xml
===================================================================
--- pst/printing/cups-filters.xml	(révision 16829)
+++ pst/printing/cups-filters.xml	(révision 16830)
@@ -106,8 +106,9 @@
     <para role="optional">
       <xref linkend="avahi"/>,
       <xref linkend="openldap"/>,
-<xref linkend="php"/> (use of this might be broken), and
-<ulink url="http://liblouis.org/">Liblouis (Braille)</ulink>
+      <xref linkend="php"/> (use of this might be broken),
+      <ulink url="http://liblouis.org/">Liblouis (Braille)</ulink>, and
+      <ulink url="http://liblouis.org/">Liblouisutdml (Braille)</ulink>
     </para>
 
     <bridgehead renderas="sect4">Required (Runtime)</bridgehead>
@@ -213,7 +214,7 @@
         </seg>
         <seg>
           /usr/include/{cupsfilters,fontembed},
-/usr/share/cups/charsets,
+          /usr/share/cups/{braille,charsets},
           /usr/share/doc/cups-filters-&cups-filters-version; and
           /usr/share/ppd/cupsfilters
         </seg>

