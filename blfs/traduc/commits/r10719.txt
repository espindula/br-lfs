Révision 10719

fichiers modifiés :
   introduction/welcome/changelog.xml
   multimedia/videoutils/ffmpeg.xml
   multimedia/libdriv/audiofile.xml
   multimedia/libdriv/esound.xml
   general.ent
   general/prog/slang.xml
   general/graphlib/aalib.xml

Log :
Update to ffmpeg-1.0. Tag some packages for 7.2.

Le robot a traité 36 % du commit anglais
Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(revision 10718)
+++ introduction/welcome/changelog.xml	(revision 10719)
@@ -47,6 +47,10 @@
       <para>October 7th, 2012</para>
       <itemizedlist>
         <listitem>
+          <para>[bdubbs] - Update to ffmpeg-1.0. Fixes
+          <ulink url="&blfs-ticket-root;3583">#3583</ulink>.</para>
+        </listitem>
+        <listitem>
           <para>[krejzi] - Empathy 3.6.0.1.</para>
         </listitem>
         <listitem>

Index: multimedia/libdriv/esound.xml
===================================================================
--- multimedia/libdriv/esound.xml	(revision 10718)
+++ multimedia/libdriv/esound.xml	(revision 10719)
@@ -77,7 +77,7 @@
     <para>Install <application>EsounD</application> by running the following
     commands:</para>
 
-<screen><userinput>./configure --prefix=/usr --sysconfdir=/etc &amp;&amp;
+<screen><userinput>LIBS=-lm ./configure --prefix=/usr --sysconfdir=/etc &amp;&amp;
 make</userinput></screen>
 
     <para>This package does not come with a test suite.</para>
@@ -96,6 +96,9 @@
   <sect2 role="commands">
     <title>Command Explanations</title>
 
+    <para><parameter>LIBS=-lm</parameter>: Make sure the linker uses the math
+    library.</para>
     <para><parameter>--sysconfdir=/etc</parameter>: This switch puts
     configuration files in <filename class="directory">/etc</filename> instead
     of <filename class="directory">/usr/etc</filename>.</para>

Index: multimedia/videoutils/ffmpeg.xml
===================================================================
--- multimedia/videoutils/ffmpeg.xml	(revision 10718)
+++ multimedia/videoutils/ffmpeg.xml	(revision 10719)
@@ -70,48 +70,41 @@
 
     <bridgehead renderas="sect4">Recommended</bridgehead>
     <para role="recommended">
+      <xref linkend="faac"/>,
+      <xref linkend="freetype2"/>,
+      <xref linkend="lame"/>,
+      <xref linkend="libtheora"/>,
+      <xref linkend="libvorbis"/>,
+      <xref linkend="libvpx"/>,
+      <xref linkend="openjpeg"/>,
+      <xref linkend="openssl"/>,
+      <xref linkend="sdl"/>,
+      <xref linkend="speex"/>,
+      <xref linkend="xorg7-lib"/>,
+      <xref linkend="xvid"/>, and
       <xref linkend="yasm"/>
     </para>
 
     <bridgehead renderas="sect4">Optional</bridgehead>
     <para role="optional">
-      <xref linkend="faad2"/>,
-      <xref linkend="lame"/>,
-      <xref linkend="libtheora"/>,
-      <xref linkend="libvorbis"/>,
-      <xref linkend="libvpx"/>,
-      <xref linkend="xorg7-lib"/>,
-      <ulink url="http://www.videolan.org/developers/x264.html">x264</ulink>
-      <xref linkend="xvid"/>,
+      <xref linkend="gnutls"/>,
+      <ulink url="http://www.videolan.org/developers/x264.html">x264</ulink>,
       <ulink url="http://sourceforge.net/projects/opencore-amr">OpenCore AMR</ulink>,
-      <xref linkend="faac"/>,
-      <xref linkend="freetype2"/>,
       <ulink url="http://libgsm.sourcearchive.com/">GSM</ulink>,
       <ulink url="http://sourceforge.net/projects/libdc1394">libdc1394</ulink>,
      <ulink url="http://svn.mplayerhq.hu/nut/src/trunk/">libnut</ulink> (SVN checkout),
@@     @@
       <ulink url="http://ftp.gnu.org/pub/gnu/libcdio/">libcdio</ulink>,
      <ulink url="http://sourceforge.net/projects/opencvlibrary/">libopencv</ulink>,
       <ulink url="http://sourceforge.net/projects/libdc1394/">libdc1394</ulink>,
-      <ulink url="http://linuxtv.org/downloads/v4l-utils/">libv4l2</ulink>,
-      <xref linkend="openjpeg"/>
-        (<application>FFmpeg</application> includes code for its own jpeg2000
-        encoder and decoder, which is enabled by default),
-      <xref linkend="speex"/>,
-      <xref linkend="gnutls"/>,
-      <xref linkend="openssl"/>,
-      <xref linkend="sdl"/> and
+      <ulink url="http://linuxtv.org/downloads/v4l-utils/">libv4l2</ulink>, and
       <ulink url="http://www.nongnu.org/texi2html">texi2html</ulink>
         (to build HTML documentation).</para>
 
@@ -133,42 +126,66 @@
   <sect2 role="installation">
     <title>Installation of FFmpeg</title>
 
+    <para>If you have not installed <application>Xorg</application> in
+    <filename class='directory'>/usr</filename>, tell <filename>configure</filename> 
+    where to find it:</para>
+<screen><userinput>export LIBRARY_PATH=$XORG_PREFIX/lib</userinput></screen>
     <para>
       Install <application>FFmpeg</application> by running the following
       commands:
     </para>
 
-<screen><userinput>./configure --prefix=/usr   \
-            --enable-gpl    \
-            --enable-shared \
-            --disable-static &amp;&amp;
+<screen><userinput>./configure --prefix=/usr        \
+            --disable-debug      \
+            --enable-shared      \
+            --disable-static     \
+            --enable-gpl         \
+            --enable-x11grab     \
+            --enable-postproc    \
+            --enable-version3    \
+            --enable-nonfree     \
+            --enable-libfaac     \
+            --enable-libfreetype \
+            --enable-libmp3lame  \
+            --enable-libopenjpeg \
+            --enable-libspeex    \
+            --enable-libtheora   \
+            --enable-libvorbis   \
+            --enable-libvpx      \
+            --enable-libxvid     \
+            --enable-libpulse    \
+            --enable-openssl     &amp;&amp;
 make</userinput></screen>
 
+<!--
     <para>To convert the docs to html use the following commands:</para>
 
 <screen><userinput>sed -i '/@top/d;/ignore$/d'    doc/*.texi                   &amp;&amp;
@@     @@
 for DOC in doc/*.texi; do
   makeinfo - -html - -no-split -o ${DOC%texi}html ${DOC}
 done</userinput></screen>
+-->
 
     <para>
       If you have <xref linkend="doxygen"/> installed and wish to create the API
-      documentation (takes about 150 MB of space), issue the command
+      documentation (takes about 444 MB of space, 26 SBU), issue the command
       <command>doxygen</command>.
     </para>
 
-    <para>This package does not come with a test suite.</para>
     <para>Now, as the <systemitem class="username">root</systemitem>
     user:</para>
 
-<screen role="root"><userinput>make install     &amp;&amp;
-make install-man &amp;&amp;
-mkdir -p                  /usr/share/doc/ffmpeg-&ffmpeg-version; &amp;&amp;
-cp    -v doc/*.{html,txt} /usr/share/doc/ffmpeg-&ffmpeg-version;</userinput></screen>
+<screen role="root"><userinput>make install                                 &amp;&amp;
+mkdir -p           /usr/share/doc/ffmpeg-&ffmpeg-version; &amp;&amp;
+cp    -v doc/*.txt /usr/share/doc/ffmpeg-&ffmpeg-version;</userinput></screen>
 
+    <para>The tests, if desired, need to be run after installation.  
+    To test the package, run <command>make check</command>.</para>
     <para>
       The <application>FFmpeg</application> source contains a tool called
       <command>qt-faststart</command> that can modify QuickTime formatted movies
@@ -188,8 +205,8 @@
       <systemitem class="username">root</systemitem> user:
     </para>
 
-<screen role="root"><userinput>mkdir -p        /usr/share/doc/ffmpeg-&ffmpeg-version;/api &amp;&amp;
-cp    -v doxy/* /usr/share/doc/ffmpeg-&ffmpeg-version;/api</userinput></screen>
+<screen role="root"><userinput>mkdir -p         /usr/share/doc/ffmpeg-&ffmpeg-version;/api &amp;&amp;
+cp    -av doxy/* /usr/share/doc/ffmpeg-&ffmpeg-version;/api</userinput></screen>
   </sect2>
 
   <sect2 role="commands">
@@ -222,16 +239,6 @@
       from linking FFmpeg to another library.
     </para>
 
-    <para>
-      <command>sed -i '/@top/d;/ignore$/d' *.texi</command> and
-      <command>sed -i '/@include avoptions/d' avtools-common-opts.texi</command>:
-      these seds work around problems with the .texi files.
-    </para>
-    <para>
-      <command>makeinfo --html --no-split -o ${DOC%texi}html ${DOC}</command>:
-      this converts the .texi files into html.
-    </para>
   </sect2>
 
   <sect2 role="configuration">

