Révision 10761

fichiers modifiés :
   introduction/welcome/changelog.xml
   general.ent
   pst/xml/docbook-xsl.xml
   general/prog/openjdk.xml
   general/graphlib/aalib.xml

Log :
Update to OpenJDJ-1.7.0.9/IcedTea-2.3.3. Fix minor problem in aalib m4 file. Fix minor problem when installing docbook xsl docs.

Le robot a traité 36 % du commit anglais
Index: general/graphlib/aalib.xml
===================================================================
--- general/graphlib/aalib.xml	(revision 10760)
+++ general/graphlib/aalib.xml	(revision 10761)
@@ -71,6 +71,10 @@
   <sect2 role="installation">
     <title>Installation of AAlib</title>
 
+    <para>Fix a minor problem with the included m4 file:</para>
+<screen><userinput>sed -i -e '/AM_PATH_AALIB,/s/AM_PATH_AALIB/[&amp;]/' aalib.m4</userinput></screen>
     <para>Install <application>AAlib</application> by running the following
     commands:</para>
 

Index: general/prog/openjdk.xml
===================================================================
--- general/prog/openjdk.xml	(revision 10760)
+++ general/prog/openjdk.xml	(revision 10761)
@@ -75,7 +75,7 @@
     <title>Introduction to OpenJDK and IcedTea</title>
 
     <para><application>IcedTea</application> provides a build harness for the
-    <application>OpenJDK</application> package, Oracle's recently open-sourced
+    <application>OpenJDK</application> package, Oracle's open-sourced
     <application>Java</application> development environment.  In order to
     provide a completely free runtime environment, similar to Oracle's closed
     distribution, the <application>IcedTea</application> build harness also
@@ -140,6 +140,12 @@
           </simplelist>
         </para>
       </listitem>
+    </itemizedlist>
+    <para>The following may be downladed separately or be done as a 
+    part of the <userinput>make</userinput> process.</para>
+    <itemizedlist spacing="compact">
       <listitem>
         <para>Corba Source
           <simplelist>
@@ -282,10 +288,9 @@
       <xref linkend="cups"/>,
       <xref linkend="gtk3"/>,
       <xref linkend="giflib"/>,
-      <xref linkend="libXp"/>,
       <xref linkend="pulseaudio"/>,
       <xref linkend="xorg7-lib"/> and
-      <xref linkend="xulrunner"/>.
+      <xref linkend="nspr"/>.
     </para>
 
     <bridgehead renderas="sect4">Additional Requirements
@@ -294,6 +299,7 @@
     <xref linkend="apache-ant"/>,
     <xref linkend="cpio"/>,
     <xref linkend="unzip"/>,
+    <xref linkend="wget"/>,
     <xref linkend="which"/>, and
     <xref linkend="zip"/></para>
 
@@ -322,10 +328,8 @@
     <para>Configure the temporary <application>OpenJDK</application> 
     installation with the following commands:</para>
 
-<screen><userinput>export PATH_HOLD="${PATH}"                  &amp;&amp;
-export JAVA_HOME="/opt/OpenJDK-&openjdk-version;-bin" &amp;&amp;
-export CLASSPATH=".:/usr/share/java"        &amp;&amp;
-export PATH="${PATH}:${JAVA_HOME}/bin"</userinput></screen>
+<screen><userinput>export CLASSPATH=.:/usr/share/java &amp;&amp;
+export PATH="PATH:/opt/OpenJDK-&openjdk-version;-bin/bin</userinput></screen>
 
     <para>The binary version is now installed. If you don't want to compile the
     sources, skip ahead to the configuration section.</para>
@@ -333,7 +337,7 @@
     <bridgehead renderas="sect3">OpenJDK Source Installation</bridgehead>
     <note><para>The source build of OpenJDK requires
     <xref linkend="apache-ant"/>.  You'll need to build that first to satisfy
-    the reciprocal dependency, and return to this section to continue building
+    the circular dependency, and return to this section to continue building
     OpenJDK.</para></note>
 
     <para>Unlike other packages in BLFS, the <application>OpenJDK</application>
@@ -355,8 +359,8 @@
     <para>As mentioned previously, <application>OpenJDK</application> is
     composed of several individual projects of the proprietary
     <application>JDK</application> that have been relicensed under an open
-    source license.  Put all of the individual components into the source tree
-    with the following commands:</para>
+    source license.  If you have already downoaded all of the individual 
+    components, place them into the source tree with the following commands:</para>
 
 <screen><userinput>cp -v ../corba.tar.gz     . &amp;&amp;
 cp -v ../hotspot.tar.gz   . &amp;&amp;
@@ -390,27 +394,31 @@
             --enable-pulse-java &amp;&amp;
 make</userinput></screen>
 
+    <note><para>If you have not installed the tarballs specified above, 
+    they will be automatically downloaded here.</para></note>
     <para>To test the results, issue: <command>make jtregcheck</command>. The
     included version of <application>jtreg</application> is old, and the test
     suite is also very dependent on the host system and the environment that it
-    is run in. You should expect to see anywhere between a clean set of tests
-    and up to 160 failures in jdk with up to 17 errors in the tests themselves.
-    The majority of the 6000+ tests should pass. The reason for the
-    greatly varying results is due to how stringent the testing environment
-    must be. Varying architectures, different versions of dependent
-    libraries, unexpected X Window environment and window managers, the CA
-    certificates used to generate the <filename>cacerts</filename> file, and
-    even any user input or power management or screen saver interruptions during
-    the testing can lead to various failures. While the known broken tests have
-    been removed, with the fix_tests patch above, the graphics tests failures
-    cannot be pre-determined (short of removing them all). Best bet for a
-    completely clean result is to run the test suite in a framebuffer on a
-    different screen (Xvfb). Even still, Disk I/O can cause failures.</para>
+    is run in. You should expect to see anywhere between 40 and 100 failures in
+    jdk with up to 10 errors in the tests themselves.  The majority of the
+    6000+ tests should pass. The reason for the greatly varying results is due
+    to how stringent the testing environment must be. Varying architectures,
+    different versions of dependent libraries, unexpected X Window environment
+    and window managers, the CA certificates used to generate the
+    <filename>cacerts</filename> file, and even any user input or power
+    management or screen saver interruptions during the testing can lead to
+    various failures. While the known broken tests have been removed, with the
+    fix_tests patch above, the graphics tests failures cannot be pre-determined
+    (short of removing them all). The best bet for the minimal number of
+    failures is to run the test suite in a framebuffer on a different screen
+    (Xvfb). Even still, Disk I/O can cause failures.</para>
 
     <para>Install the package with the following commands as the
     <systemitem class="username">root</systemitem> user:</para>
 
-<screen role="root"><userinput>cp -R openjdk.build/j2sdk-image /opt/OpenJDK-&openjdk-version; &amp;&amp;
+<screen role="root"><userinput>chmod 0644 openjdk.build/j2sdk-image/lib/sa-jdi.jar  &amp;&amp;
+cp -R openjdk.build/j2sdk-image /opt/OpenJDK-&openjdk-version; &amp;&amp;
 chown -R root:root /opt/OpenJDK-&openjdk-version;</userinput></screen>
 
   </sect2>
@@ -425,15 +433,14 @@
     <para><parameter>--with-jdk-home</parameter>: This switch provides the
     location of the temporary <application>JDK</application>.</para>
 
-    <para><parameter>--enable-nss</parameter>: This switch enables the 
-    build to utilize additional cryptography supplied by the nss
-    libraries.</para>
     <para><parameter>--enable-pulse-java</parameter>: This switch enables
     building of the pulseaudio libraries (needed to provide a complete
     implementation that is reasonably compatible with the proprietary
     JDK).</para>
 
+    <para><command>chmod -v 0644 ...sa-jdi.jar</command>: Fix permissions
+    in a generated file so all users can access it.</para>
   </sect2>
 
   <sect2 role="configuration">
@@ -448,42 +455,45 @@
       the precompiled <application>OpenJDK</application>, do the following as
       the <systemitem class="username">root</systemitem> user:</para>
 
-<screen role="root"><userinput>ln -v -nsf OpenJDK-&openjdk-version;-bin /opt/OpenJDK</userinput></screen>
+<screen role="root"><userinput>ln -v -nsf OpenJDK-&openjdk-version;-bin /opt/jdk</userinput></screen>
 
      <para>The information below assumes your system is set up using the
      instructions found in <quote><xref
@@     @@
 <literal># Begin /etc/profile.d/openjdk.sh
 
 # Set JAVA_HOME directory
-JAVA_HOME=/opt/OpenJDK
+JAVA_HOME=/opt/jdk
 
 # Adjust PATH
-pathappend ${JAVA_HOME}/bin PATH
+pathappend $JAVA_HOME/bin PATH
 
 # Auto Java CLASSPATH
 # Copy jar files to, or create symlinks in this directory
@@     @@
 done
 
 export JAVA_HOME CLASSPATH
-unset AUTO_CLASSPATH_DIR
-unset dir
-unset jar
+unset AUTO_CLASSPATH_DIR dir jar
 
 # End /etc/profile.d/openjdk.sh</literal>
 EOF</userinput></screen>
@@ -493,9 +503,9 @@
     user:</para>
 
 <screen><userinput>cat &gt;&gt; /etc/man_db.conf &lt;&lt; "EOF" &amp;&amp;
-<literal>MANDATORY_MANPATH     /opt/OpenJDK/man
-MANPATH_MAP           /opt/OpenJDK/bin     /opt/OpenJDK/man
-MANDB_MAP             /opt/OpenJDK/man     /var/cache/man/OpenJDK</literal>
+<literal>MANDATORY_MANPATH     /opt/jdk/man
+MANPATH_MAP           /opt/jdk/bin     /opt/jdk/man
+MANDB_MAP             /opt/jdk/man     /var/cache/man/jdk</literal>
 EOF
 mandb -c /opt/OpenJDK/man</userinput></screen>
 

Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(revision 10760)
+++ introduction/welcome/changelog.xml	(revision 10761)
@@ -43,10 +43,15 @@
       <para>October 22nd, 2012</para>
       <itemizedlist>
         <listitem>
+          <para>[bdubbs] - Update to OpenJDJ-1.7.0.9/IcedTea-2.3.3. Fixes
+          <ulink url="&blfs-ticket-root;3619">#3619</ulink>.</para>
+        </listitem>
+        <listitem>
           <para>[krejzi] - Xorg Intel Driver 2.20.12.</para>
         </listitem>
       </itemizedlist>

Index: pst/xml/docbook-xsl.xml
===================================================================
--- pst/xml/docbook-xsl.xml	(revision 10760)
+++ pst/xml/docbook-xsl.xml	(revision 10761)
@@ -117,7 +117,7 @@
 ln -s VERSION /usr/share/xml/docbook/xsl-stylesheets-&docbook-xsl-version;/VERSION.xsl &amp;&amp;
 
 install -v -m644 -D README \
-                    /usr/share/doc/docbook-xsl-&docbook-xsl-version; &amp;&amp;
+                    /usr/share/doc/docbook-xsl-&docbook-xsl-version;/README.txt &amp;&amp;
 install -v -m755    RELEASE-NOTES* NEWS* \
                     /usr/share/doc/docbook-xsl-&docbook-xsl-version;</userinput></screen>
 

