Révision 15698

fichiers modifiés :
   server/other/openldap.xml
   introduction/welcome/changelog.xml

Log :
Update openldap instructions. Disable incompatible use of Berkeley DB.

Le robot a traité 13 % du commit anglais
Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 15697)
+++ introduction/welcome/changelog.xml	(révision 15698)
@@ -48,6 +48,10 @@
       <para>March 23rd, 2015</para>
       <itemizedlist>
         <listitem>
+          <para>[bdubbs] - Update openldap instructions.  Disable
+          incompatible use of Berkeley DB.</para>
+        </listitem>
+        <listitem>
           <para>[fernando] - Update to seamonkey-2.33.1. Fixes
           <ulink url="&blfs-ticket-root;6305">#6305</ulink>.</para>
         </listitem>

Index: server/other/openldap.xml
===================================================================
--- server/other/openldap.xml	(révision 15697)
+++ server/other/openldap.xml	(révision 15698)
@@ -90,8 +90,7 @@
 
     <bridgehead renderas="sect4">Recommended</bridgehead>
     <para role="recommended">
-<xref linkend="db"/> (only if building server),
-<xref linkend="cyrus-sasl"/>, and
+      <xref linkend="cyrus-sasl"/> and
       <xref linkend="openssl"/>
     </para>
 
@@ -104,19 +103,9 @@
         <xref linkend="postgresql"/> or 
         <ulink url="http://www.mysql.com/">MySQL</ulink>, 
       <ulink url="http://www.openslp.org/">OpenSLP</ulink>, and
-<ulink url="http://symas.com/mdb/">LMDB</ulink>
+      <xref linkend="db"/> (not recommended by the developers)
     </para>
 
-<note>
-<para>
-There are some potential licensing issues when integrating 
-<xref linkend="db"/> with <application>OpenLDAP</application>.  The 
-OpenLDAP foundation recommends using <application>LMDB</application>
-for the database back end.
-</para>
-<para>See <ulink url="http://lwn.net/Articles/557820/"/> for more information.</para>
-</note>
     <para condition="html" role="usernotes">User Notes:
       <ulink url="&blfs-wiki;/openldap"/>
     </para>
@@ -137,8 +126,6 @@
 patch -Np1 -i ../openldap-&openldap-version;-symbol_versions-1.patch &amp;&amp;
 autoconf &amp;&amp;
 
-sed -i '/6.0.20/ a\\t__db_version_compat' configure &amp;&amp;
 ./configure --prefix=/usr     \
             --sysconfdir=/etc \
             --disable-static  \
@@ -172,27 +159,31 @@
       running the following commands:
     </para>
 
-<screen><userinput>patch -Np1 -i ../openldap-&openldap-version;-blfs_paths-1.patch &amp;&amp;
+<screen><userinput>patch -Np1 -i ../openldap-&openldap-version;-blfs_paths-2.patch &amp;&amp;
 patch -Np1 -i ../openldap-&openldap-version;-symbol_versions-1.patch &amp;&amp;
 autoconf &amp;&amp;
 
-sed -i '/6.0.20/ a\\t__db_version_compat' configure &amp;&amp;
 ./configure --prefix=/usr         \
             --sysconfdir=/etc     \
             --localstatedir=/var  \
             --libexecdir=/usr/lib \
             --disable-static      \
             --disable-debug       \
+            --with-tls=openssl    \
+            --with-cyrus-sasl     \
             --enable-dynamic      \
             --enable-crypt        \
             --enable-spasswd      \
+            --enable-slapd        \
             --enable-modules      \
---enable-rlookups     \
             --enable-backends=mod \
+            --disable-ndb         \
+            --disable-sql         \
+            --disable-shell       \ 
+            --disable-bdb         \ 
+            --disable-hdb         \ 
             --enable-overlays=mod \
---disable-ndb         \
---disable-sql &amp;&amp;
 make depend &amp;&amp;
 make</userinput></screen>
 
@@ -232,12 +223,6 @@
   <sect2 role="commands">
     <title>Command Explanations</title>
 
-<para>
-<command>sed ... configure</command>: Fix  <command>configure</command>
-script for building with <application>Berkeley DB-6.0.20</application> or
-later.
-</para>
     <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
       href="../../xincludes/static-libraries.xml"/>
 

