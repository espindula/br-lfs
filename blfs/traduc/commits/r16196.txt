Révision 16196

fichiers modifiés :
   introduction/welcome/changelog.xml
   multimedia/libdriv/gst-plugins-bad.xml
   multimedia/libdriv/gst10-plugins-bad.xml

Log :
gst-plugins-bad (both): fixes for crashes when using youtube.

Le robot a traité 7 % du commit anglais
Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 16195)
+++ introduction/welcome/changelog.xml	(révision 16196)
@@ -48,6 +48,11 @@
       <para>June 30th, 2015</para>
       <itemizedlist>
         <listitem>
+          <para>[ken] - gst-plugins-bad (both series): fix the browser segfaults
+          in youtube when compiled with gcc-5. Thanks to Bruce for cleaning up
+          the sed.</para>
+        </listitem>
+        <listitem>
           <para>[ken] - Update to released version of blblatex-biber-2.1. Fixes
           <ulink url="&blfs-ticket-root;6610">#6610</ulink>.</para>
         </listitem>

Index: multimedia/libdriv/gst10-plugins-bad.xml
===================================================================
--- multimedia/libdriv/gst10-plugins-bad.xml	(révision 16195)
+++ multimedia/libdriv/gst10-plugins-bad.xml	(révision 16196)
@@ -165,23 +165,25 @@
       patch:
     </para>
 
-<screen><userinput>patch -Np1 -i ../gst-plugins-bad-&gst10-plugins-bad-version;-openjpeg21-1.patch</userinput></screen>
+<screen><userinput>patch -Np1 -i ../gst-plugins-bad-&gst10-plugins-bad-version;-openjpeg21-1.patch &amp;&amp;</userinput></screen>
 
+    <para>Prevent a miscompilation caused by a change in the output from
+    <application>cpp in gcc-5</application> which leads to crashes.</para>
+<screen><userinput>sed -i -e 's/ GST_CHECK_FAAD_VERSION / /' \
+       -e '/"GST_CHECK_FAAD_VERSION/{
+           s/GST_CHECK_FAAD_VERSION //
+           s/""/"$"/ }' configure</userinput></screen>
     <para>
       Install <application>GStreamer Bad Plug-ins</application> by running the
       following commands:
     </para>
 
-<note><para>
-This package is known to cause video problems when building with gcc-5.
-Until a new version is released, using <userinput>clang</userinput> from
-LLVM is known to avoid these problems.
-</para></note>
 <screen><userinput>./configure --prefix=/usr \
             --with-package-name="GStreamer Bad Plugins &gst10-plugins-bad-version; BLFS" \
             --with-package-origin="http://www.linuxfromscratch.org/blfs/view/svn/" &amp;&amp;
-CC=clang make</userinput></screen>
+make</userinput></screen>
 
     <para>
       To test the results, issue: <command>make check</command>. One test

Index: multimedia/libdriv/gst-plugins-bad.xml
===================================================================
--- multimedia/libdriv/gst-plugins-bad.xml	(révision 16195)
+++ multimedia/libdriv/gst-plugins-bad.xml	(révision 16196)
@@ -159,20 +159,21 @@
     -e '/const char/ i*/'            \
     -i  ext/vp8/gstvp8utils.h</userinput></screen>
 
+    <para>Prevent a miscompilation caused by a change in the output from
+    <application>cpp in gcc-5</application> which leads to crashes.</para>
+<screen><userinput>sed -i -e 's/ GST_CHECK_FAAD_VERSION / /' \
+       -e '/"GST_CHECK_FAAD_VERSION/{
+           s/GST_CHECK_FAAD_VERSION //
+           s/""/"$"/ }' configure</userinput></screen>
     <para>
       Install <application>Gstreamer Bad Plug-ins</application> by running the following
       commands:
     </para>
 
-<note><para>
-This package is known to cause video problems when building with gcc-5.
-Until a new version is released, using <userinput>clang</userinput> from
-LLVM is known to avoid these problems.
-</para></note>
 <screen><userinput>./configure --prefix=/usr --with-gtk=3.0 --disable-examples &amp;&amp;
-CC=clang make</userinput></screen>
+make</userinput></screen>
 
     <para>
       To test the results, issue: <command>make check</command>. Note that

