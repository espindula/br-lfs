Révision 11178

fichiers modifiés :
   general.ent
   xsoft/graphweb/firefox.xml
   xsoft/other/thunderbird.xml
   x/installing/x7driver.xml
   x/lib/xulrunner.xml
   general/sysutils/colord.xml
   general/genlib/json-c.xml
   general/genlib/libical.xml
   general/genlib/libdrm.xml
   general/prog/python2.xml
   general/prog/python3.xml
   general/prog/cmake.xml
   general/prog/ruby.xml
   introduction/welcome/changelog.xml
   xfce/apps/midori.xml
   postlfs/security/polkit.xml
   multimedia/audioutils/amarok.xml
   multimedia/libdriv/pulseaudio.xml

Log :
updates and fixes

Le robot a traité 45 % du commit anglais
Index: general/genlib/json-c.xml
===================================================================
--- general/genlib/json-c.xml	(révision 11177)
+++ general/genlib/json-c.xml	(révision 11178)
@@ -36,7 +36,7 @@
       back into the C representation of JSON objects.
     </para>
 
-&lfs72_checked;
+    &lfs73_checked;
 
     <bridgehead renderas="sect3">Package Information</bridgehead>
     <itemizedlist spacing="compact">
@@ -85,11 +85,7 @@
       commands:
     </para>
 
-<screen><userinput>sed -e 's/json_object.c/json_object.c json_object_iterator.c/'    \
--e 's/json_object.h/json_object.h json_object_iterator.h/'    \
--e 's/json_object.lo/json_object.lo json_object_iterator.lo/' \
--i Makefile.in &amp;&amp;
-./configure --prefix=/usr --disable-static &amp;&amp;
+<screen><userinput>./configure --prefix=/usr --disable-static &amp;&amp;
 make</userinput></screen>
 
     <para>
@@ -106,11 +102,6 @@
   <sect2 role="commands">
     <title>Command Explanations</title>
 
-<para>
-<command>sed -e 's/json_object...</command>: This <command>sed</command>
-make sure that all the necessary headers are installed correctly.
-</para>
     <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
       href="../../xincludes/static-libraries.xml"/>
 
@@ -121,18 +112,19 @@
 
     <segmentedlist>
       <segtitle>Installed Programs</segtitle>
-<segtitle>Installed Library</segtitle>
-<segtitle>Installed Directory</segtitle>
+      <segtitle>Installed Libraries</segtitle>
+      <segtitle>Installed Directories</segtitle>
 
       <seglistitem>
         <seg>
           None
         </seg>
         <seg>
-libjson.so
+          libjson-c.so and libjson.so
         </seg>
         <seg>
          /usr/include/json and
@@ -146,7 +138,7 @@
         <term><filename class="libraryfile">libjson.so</filename></term>
         <listitem>
           <para>
-contains <application>JSON-C</application> API functions.
+            contains the <application>JSON-C</application> API functions.
           </para>
           <indexterm zone="json-c libjson">
             <primary sortas="c-libjson">libjson.so</primary>
@@ -154,6 +146,18 @@
         </listitem>
       </varlistentry>
 
+      <varlistentry id="libjson-c">
+        <term><filename class="libraryfile">libjson-c.so</filename></term>
+        <listitem>
+          <para>
+            contains the <application>JSON-C</application> API functions.
+          </para>
+          <indexterm zone="json-c libjson-c">
+            <primary sortas="c-libjson-c">libjson-c.so</primary>
+          </indexterm>
+        </listitem>
+      </varlistentry>
     </variablelist>
 
   </sect2>

Index: general/genlib/libical.xml
===================================================================
--- general/genlib/libical.xml	(révision 11177)
+++ general/genlib/libical.xml	(révision 11178)
@@ -29,78 +29,114 @@
   <sect2 role="package">
     <title>Introduction to libical</title>
 
-<para>The <application>libical</application> package is an implementation of
-iCalendar protocols and data formats.</para>
+    <para>
+      The <application>libical</application> package contains an implementation
+      of the iCalendar protocols and data formats.
+    </para>
 
-&lfs72_checked;
+    &lfs73_checked;
 
     <bridgehead renderas="sect3">Package Information</bridgehead>
     <itemizedlist spacing="compact">
@@     @@
 
     <bridgehead renderas="sect3">libical Dependencies</bridgehead>
 
+    <!-- Upstream recommends to use CMake since autotools
+    doesn't bump soname for 0.48 -> 1.0 incompatibility -->
+    <bridgehead renderas="sect4">Required</bridgehead>
+    <para role="required">
+      <xref linkend="cmake"/>
+    </para>
+    <!-- Can't be built using CMake
     <bridgehead renderas="sect4">Optional</bridgehead>
+    <para role="optional">
+      <xref linkend="openjdk"/> and
+      <xref linkend="python2"/> (must have
+      <ulink url="http://www.swig.org/">SWIG</ulink> also)
+    </para> -->
 
     <para condition="html" role="usernotes">User Notes:
      <ulink url="&blfs-wiki;/libical"/>
@@     @@
      following commands:
    </para>
 
-<screen><userinput>./configure --prefix=/usr --enable-cxx &amp;&amp;
+<screen><userinput>mkdir build &amp;&amp;
+cd build &amp;&amp;
+cmake -DCMAKE_INSTALL_PREFIX=/usr \
+      -DCMAKE_BUILD_TYPE=Release  \
+      .. &amp;&amp;
 make</userinput></screen>
 
-<para>To test the results, issue: <command>make check</command>.</para>
+    <para>
+      To test the results, issue: <command>make test</command>.
+    </para>
 
    <para>
      Now, as the <systemitem class="username">root</systemitem> user:
    </para>
 
-<screen role="root"><userinput>make install &amp;&amp;
-install -v -m755 -d /usr/share/doc/libical-&libical-version; &amp;&amp;
-install -v -m644    README doc/{Adding,Using}*.txt \
-/usr/share/doc/libical-&libical-version;</userinput></screen>
+<screen role="root"><userinput>make install</userinput></screen>
 
   </sect2>
 
   <sect2 role="commands">
     <title>Command Explanations</title>
 
+    <para>
+      <parameter>-DCMAKE_BUILD_TYPE=Release</parameter>: This switch is used
+      to apply higher level of the compiler optimizations.
+    </para>
 
-<para><parameter>--enable-cxx</parameter>: This parameter builds C++
-<application>libical</application> library bindings.</para>
+    <!-- No CMake equivalents
+    <para>
+      <parameter>- -enable-cxx</parameter>: This switch enables
+      <application>libical</application> C++ library.
+    </para>
 
-<para><option>--enable-python</option>: This option builds Python
-<application>libical</application> bindings.</para>
+    <para>
+      <option>- -enable-python</option>: This switch enables
+      <application>libical</application> Python bindings.
+    </para> -->
 
   </sect2>
 
@@ -110,13 +146,18 @@
     <segmentedlist>
       <segtitle>Installed Programs</segtitle>
       <segtitle>Installed Libraries</segtitle>
-<segtitle>Installed Directories</segtitle>
+      <segtitle>Installed Directory</segtitle>
 
       <seglistitem>
-<seg>None</seg>
-<seg>libical{,_cxx}.{so,a}, libicalss{,_cxx}.{so,a}, libicalvcal.{so,a},
-and (optionally) the Python _LibicalWrap.{so,a} modules</seg>
-<seg>/usr/include/libical and /usr/share/doc/libical-&libical-version;</seg>
+        <seg>
+          None
+        </seg>
+        <seg>
+          libical.{so,a}, libicalss.{so,a} and libicalvcal.{so,a}
+        </seg>
+        <seg>
+          /usr/include/libical
+        </seg>
       </seglistitem>
     </segmentedlist>
 
@@ -126,10 +167,12 @@
       <?dbhtml list-presentation="table"?>
 
       <varlistentry id="libical-lib">
-<term><filename class='libraryfile'>libical.{so,a}</filename></term>
+        <term><filename class="libraryfile">libical.{so,a}</filename></term>
         <listitem>
          <para>
            contains the <application>libical</application> API
@@ -137,10 +180,12 @@
       </varlistentry>
 
       <varlistentry id="libicalss">
-<term><filename class='libraryfile'>libicalss.{so,a}</filename></term>
+        <term><filename class="libraryfile">libicalss.{so,a}</filename></term>
         <listitem>
          <para>
            is a libary that allows you to store iCal component data
@@ -148,9 +193,11 @@
       </varlistentry>
 
       <varlistentry id="libicalvcal">
-<term><filename class='libraryfile'>libicalvcal.{so,a}</filename></term>
+        <term><filename class="libraryfile">libicalvcal.{so,a}</filename></term>
         <listitem>
          <para>
            is a vCard/vCalendar C interface.

Index: general/prog/cmake.xml
===================================================================
--- general/prog/cmake.xml	(révision 11177)
+++ general/prog/cmake.xml	(révision 11178)
@@ -38,7 +38,7 @@
       since version 4.
     </para>
 
-&lfs72_checked;
+    &lfs73_checked;
 
     <bridgehead renderas="sect3">Package Information</bridgehead>
     <itemizedlist spacing="compact">

Index: general/prog/python2.xml
===================================================================
--- general/prog/python2.xml	(révision 11177)
+++ general/prog/python2.xml	(révision 11178)
@@ -159,7 +159,7 @@
       as the <systemitem class="username">root</systemitem> user:
     </para>
 
-<screen role="root"><userinput>install -v -m755 -d /usr/share/doc/python-&python2-version; &amp;&amp;
+<screen role="root"><userinput>install -v -dm755 /usr/share/doc/python-&python2-version; &amp;&amp;
 tar --strip-components=1 -C /usr/share/doc/python-&python2-version; \
     -xvf ../python-&python2-version;-docs-html.tar.bz2                      &amp;&amp;
 find /usr/share/doc/python-&python2-version; -type d -exec chmod 0755 {} \; &amp;&amp;

Index: general/prog/python3.xml
===================================================================
--- general/prog/python3.xml	(révision 11177)
+++ general/prog/python3.xml	(révision 11178)
@@ -133,8 +133,7 @@
       commands:
     </para>
 
-<screen><userinput>sed "s@\"\$CFLAGS -Werror\"@\"\$CFLAGS -Werror -Wformat\"@g" -i configure &amp;&amp;
-./configure --prefix=/usr       \
+<screen><userinput>./configure --prefix=/usr       \
             --enable-shared     \
             --with-system-expat \
             --with-system-ffi &amp;&amp;
@@ -158,7 +157,7 @@
       as the <systemitem class="username">root</systemitem> user:
     </para>
 
-<screen role="root"><userinput>install -v -m755 -d /usr/share/doc/python-&python3-version;/html &amp;&amp;
+<screen role="root"><userinput>install -v -dm755 /usr/share/doc/python-&python3-version;/html &amp;&amp;
 tar --strip-components=1 \
     --no-same-owner \
     --no-same-permissions \
@@ -171,12 +170,6 @@
     <title>Command Explanations</title>
 
     <para>
-<command>sed "s@\"\$CFLAGS -Werror\"@\"\$CFLAGS -Werror -Wformat\"@g"
--i configure</command>: Fixes building with
-<application>GCC</application> 4.8.
-</para>
-<para>
       <option>--with-system-expat</option>: This switch enables linking against
       system version of <application>Expat</application>. Remove if you have
       not installed recommended dependency <xref linkend="expat"/>.

Index: general/prog/ruby.xml
===================================================================
--- general/prog/ruby.xml	(révision 11177)
+++ general/prog/ruby.xml	(révision 11178)
@@ -35,7 +35,7 @@
       is useful for object-oriented scripting.
     </para>
 
-&lfs72_checked;
+    &lfs73_checked;
 
     <bridgehead renderas="sect3">Package Information</bridgehead>
     <itemizedlist spacing="compact">

Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 11177)
+++ introduction/welcome/changelog.xml	(révision 11178)
@@ -44,6 +44,48 @@
 
 -->
     <listitem>
+      <para>May 17th, 2013</para>
+      <itemizedlist>
+        <listitem>
+          <para>[krejzi] - Amarok 2.7.1.</para>
+        </listitem>
+        <listitem>
+          <para>[krejzi] - CMake 2.8.11.</para>
+        </listitem>
+        <listitem>
+          <para>[krejzi] - Colord 1.0.0.</para>
+        </listitem>
+        <listitem>
+          <para>[krejzi] - Firefox/Xulrunner 21.0.</para>
+        </listitem>
+        <listitem>
+          <para>[krejzi] - JSON-C 0.11.</para>
+        </listitem>
+        <listitem>
+          <para>[krejzi] - libdrm 2.4.45.</para>
+        </listitem>
+        <listitem>
+          <para>[krejzi] - libical 1.0.</para>
+        </listitem>
+        <listitem>
+          <para>[krejzi] - Midori 0.5.1.</para>
+        </listitem>
+        <listitem>
+          <para>[krejzi] - Python 3.3.2.</para>
+        </listitem>
+        <listitem>
+          <para>[krejzi] - Ruby 1.9.3-p429.</para>
+        </listitem>
+        <listitem>
+          <para>[krejzi] - Thunderbird 17.0.6.</para>
+        </listitem>
+        <listitem>
+          <para>[krejzi] - Xorg Synaptics Driver 1.7.1.</para>
+        </listitem>
+      </itemizedlist>
+    </listitem>
+    <listitem>
       <para>May 12th, 2013</para>
       <itemizedlist>
         <listitem>

Index: multimedia/libdriv/pulseaudio.xml
===================================================================
--- multimedia/libdriv/pulseaudio.xml	(révision 11177)
+++ multimedia/libdriv/pulseaudio.xml	(révision 11178)
@@ -38,7 +38,7 @@
       one are easily achieved using a sound server.
     </para>
 
-&lfs72_checked;
+    &lfs73_checked;
 
     <bridgehead renderas="sect3">Package Information</bridgehead>
     <itemizedlist spacing="compact">
@@ -144,6 +144,7 @@
     </para>
 
 <screen><userinput>find . -name "Makefile.in" | xargs sed -i "s|(libdir)/@PACKAGE@|(libdir)/pulse|" &amp;&amp;
+sed -i "s@json >= 0.9@json-c >= 0.11@g" configure &amp;&amp;
 ./configure --prefix=/usr \
             --sysconfdir=/etc \
             --localstatedir=/var \
@@ -167,7 +168,7 @@
     <title>Command Explanations</title>
 
     <para>
-<command>find . -name Makefile.in ...</command>: This command changes
+      <command>find . -name Makefile.in ...</command>: This sed changes
       the build system to install <application>PulseAudio</application>
       private libraries into
       <filename class="directory">/usr/lib/pulse</filename> instead of
@@ -175,6 +176,11 @@
     </para>
 
     <para>
+      <command>sed -i "s@json >= 0.9@json-c >= 0.11@g" configure</command>:
+      This sed fixes building with <application>JSON-C</application> 0.11.
+    </para>
+    <para>
       <parameter>--with-module-dir=/usr/lib/pulse/modules</parameter>:
       This parameter ensures that <application>PulseAudio</application>
       modules are installed in <filename class="directory">/usr/lib/pulse/modules

Index: postlfs/security/polkit.xml
===================================================================
--- postlfs/security/polkit.xml	(révision 11177)
+++ postlfs/security/polkit.xml	(révision 11178)
@@ -76,8 +76,9 @@
 
     <bridgehead renderas="sect4">Required</bridgehead>
     <para role="required">
-<xref linkend="glib2"/> and
-<xref linkend="intltool"/>
+      <xref linkend="glib2"/>,
+      <xref linkend="intltool"/> and
+      <xref linkend="SpiderMonkey"/>
     </para>
 
     <bridgehead renderas="sect4">Optional (Required if building GNOME)</bridgehead>
@@ -94,11 +95,6 @@
       <xref linkend="linux-pam"/>
     </para>
 
-<bridgehead renderas="sect4">Required (Runtime)</bridgehead>
-<para role="required">
-<xref linkend="SpiderMonkey"/>
-</para>
     <note>
       <para>
         If <xref linkend="libxslt"/> is installed, then <xref linkend="DocBook"/>

Index: x/lib/xulrunner.xml
===================================================================
--- x/lib/xulrunner.xml	(révision 11177)
+++ x/lib/xulrunner.xml	(révision 11178)
@@ -39,7 +39,7 @@
       can find and use it.
     </para>
 
-&lfs72_checked;
+    &lfs73_checked;
 
     <bridgehead renderas="sect3">Package Information</bridgehead>
     <itemizedlist spacing="compact">
@@ -107,6 +107,7 @@
 
     <bridgehead renderas="sect4">Optional</bridgehead>
     <para role="optional">
+      <xref linkend="curl"/>,
       <xref linkend="dbus-glib"/>,
       <xref linkend="doxygen"/>,
       <xref linkend="gnome-vfs"/> and <xref linkend="libgnomeui"/>

Index: xsoft/graphweb/firefox.xml
===================================================================
--- xsoft/graphweb/firefox.xml	(révision 11177)
+++ xsoft/graphweb/firefox.xml	(révision 11178)
@@ -222,7 +222,8 @@
       commands:
     </para>
 
-<screen><userinput>sed -i 's# ""##' browser/base/Makefile.in &amp;&amp;
+<screen><userinput>sed -i 's@ ""@@' browser/base/Makefile.in &amp;&amp;
+sed -i "/gre_path/s@DIST'\]@&amp; + '/bin'@" toolkit/mozapps/installer/packager.py &amp;&amp;
 make -f client.mk</userinput></screen>
 
     <para>
@@ -300,11 +301,16 @@
     <title>Command Explanations</title>
 
     <para>
-<command>sed -i 's# ""##' browser/base/Makefile.in</command>: This sed
+      <command>sed -i 's@ ""@@' browser/base/Makefile.in</command>: This sed
       removes an unprintable control character from the title bar.
     </para>
 
     <para>
+      <command>sed -i "/gre_path/s@DIST'\]@&amp; + '/bin'@" ...</command>: This
+      sed fixes build with <application>Xulrunner</application>.
+    </para>
+    <para>
       <command>make -f client.mk ...</command>: Mozilla products are packaged to
       allow the use of a configuration file which can be used to pass the
       configuration settings to the <command>configure</command> command.

Index: xsoft/other/thunderbird.xml
===================================================================
--- xsoft/other/thunderbird.xml	(révision 11177)
+++ xsoft/other/thunderbird.xml	(révision 11178)
@@ -106,6 +106,7 @@
     <bridgehead renderas="sect4">Optional</bridgehead>
     <para role="optional">
       <xref linkend="curl"/>,
+      <xref linkend="cyrus-sasl"/>,
       <xref linkend="dbus-glib"/>,
       <xref linkend="doxygen"/>,
       <xref linkend="gnome-vfs"/> and <xref linkend="libgnomeui"/>

