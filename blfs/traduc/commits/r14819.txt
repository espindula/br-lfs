Révision 14819

fichiers modifiés :
   introduction/welcome/changelog.xml
   xsoft/office/libreoffice.xml
   packages.ent

Log :
Update to LibreOffice-4.3.3.2. Thanks Armin for many suggestions. Some modifications from branches/krejzi.

Le robot a traité 38 % du commit anglais
Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 14818)
+++ introduction/welcome/changelog.xml	(révision 14819)
@@ -48,6 +48,11 @@
       <para>October 31th, 2014</para>
       <itemizedlist>
         <listitem>
+          <para>[fernando] - Update to LibreOffice-4.3.3.2. Thanks Armin for
+          many suggestions. Some modifications from branches/krejzi. Fixes
+          <ulink url="&blfs-ticket-root;5753">#5753</ulink>.</para>
+        </listitem>
+        <listitem>
           <para>[fernando] - Update to gdb-7.8.1.  Fixes 
           <ulink url="&blfs-ticket-root;5751">#5751</ulink>.</para>
         </listitem>

Index: xsoft/office/libreoffice.xml
===================================================================
--- xsoft/office/libreoffice.xml	(révision 14818)
+++ xsoft/office/libreoffice.xml	(révision 14819)
@@ -151,7 +151,7 @@
       </listitem>
       <listitem>
         <para>
-Required patch for i686 systems, in order to fix a problem inroduced
+          Required patch for i686 systems, in order to fix a problem introduced
           by <application>&gcc-490;</application>:
           <ulink url="&patch-root;/libreoffice-&libreoffice-dlversion;-gcc_4_9_0-1.patch"/>
         </para>
@@ -291,9 +291,7 @@
 
     <note>
       <para>
-Building this package in a graphical environment is recommended.
-There have been reports of build failures, when using
-<command>chroot</command> or <command>ssh</command>.
+       Build this package in a graphical environment.
       </para>
     </note>
 
@@ -310,16 +308,14 @@
 cd libreoffice-&libreoffice-dlversion;</userinput></screen>
 
     <para>
-Unpack the dictionaries file and create symlinks to tarballs from the
-source directory so they won't get downloaded again.  It is not necessary
-to unpack the help nor the translations tarballs:
+      Create symlinks to tarballs from the source directory so they won't
+      get downloaded again:
     </para>
 
 <screen><userinput>install -dm755 external/tarballs &amp;&amp;
+<!-- Not necessary for this version
 tar -xf ../libreoffice-dictionaries-&libreoffice-dlversion;.tar.xz \
---no-overwrite-dir --strip-components=1    &amp;&amp;
-<!-- Not necessary for this version
+        -/-no-overwrite-dir -/-strip-components=1    &amp;&amp;
 tar -xf ../libreoffice-help-&libreoffice-dlversion;.tar.xz -\-no-overwrite-dir -\-strip-components=1 &amp;&amp;
 -->
 
@@ -350,12 +346,6 @@
     </note>
 
     <para>
-In the rest of the page, locales "en-US" and "pt-BR" are examples; you
-can change them to suit your needs - you might want to read the
-"Command Explanations", further below, before proceeding.
-</para>
-<para>
       Due to the large size of the package, you may prefer to install it in
       <filename class="directory">/opt</filename>, instead of
       <filename class="directory">/usr</filename>. Depending on your choice,
@@ -367,12 +357,19 @@
 <screen><userinput>export LO_PREFIX=<replaceable>&lt;PREFIX&gt;</replaceable></userinput></screen>
 
     <para>
-For i686 systems, fix a problem inroduced by <application>&gcc-490;</application>:
+     For i686 systems, fix a problem introduced by
+     <application>&gcc-490;</application>:
     </para>
 
 <screen><userinput>patch -Np1 -i ../libreoffice-&libreoffice-dlversion;-gcc_4_9_0-1.patch &amp;&amp;</userinput></screen>
 
     <para>
+      Locales "en-US" and "pt-BR", you will find below, are just examples; you
+      should change them to suit your needs - you might want to read the
+      "Command Explanations", further below, before proceeding.
+    </para>
+    <para>
       Prepare <application>LibreOffice</application> for compilation by running
       the following commands:
     </para>
@@ -381,24 +378,21 @@
 
chmod -v +x bin/unpack-sources &amp;&amp;
 
-sed -e "s/target\.mk/langlist\.mk/"                \
--e "s/tar -xf/tar -x --strip-components=1 -f/" \
--e "/tar -x/s/lo_src_dir/start_dir/"           \
--i bin/unpack-sources                            &amp;&amp;
 ./autogen.sh --prefix=$LO_PREFIX         \
              --sysconfdir=/etc           \
              --with-vendor="BLFS"        \
              --with-lang="en-US pt-BR"   \
              --with-help                 \
+             --with-myspell-dicts        \
              --with-alloc=system         \
              --without-java              \
+             --without-system-dicts      \
              --disable-gconf             \
              --disable-odk               \
              --disable-postgresql-sdbc   \
@@ -435,7 +429,8 @@
     </para>
 
     <para>
-Build the package:
+      Build the package (remember that it must be done in a graphical
+      environment):
     </para>
 
 <screen><userinput>make build</userinput></screen>
@@ -450,17 +445,6 @@
                     $LO_PREFIX/share/appdata</userinput></screen>
 
     <para>
-If the dictionaries have been built, again as
-<systemitem class="username">root</systemitem> user:
-</para>
-<screen role="root"><userinput>chown -cR 0:0 dictionaries/                                                        &amp;&amp;
-mkdir -pv $LO_PREFIX/lib/libreoffice/share/extensions/dict-en                      &amp;&amp;
-cp -vR dictionaries/en/*    $LO_PREFIX/lib/libreoffice/share/extensions/dict-en    &amp;&amp;
-mkdir -pv $LO_PREFIX/lib/libreoffice/share/extensions/dict-pt-BR                   &amp;&amp;
-cp -vR dictionaries/pt_BR/* $LO_PREFIX/lib/libreoffice/share/extensions/dict-pt-BR</userinput></screen>
-<para>
        If installed in <filename class="directory">/opt/libreoffice-&libreoffice-dlversion;</filename>
        and the icons in the new items of the desktop menu are not properly displayed,
        optionally run the following commands, as
@@ -484,8 +468,7 @@
 
     <para>
       <command>sed -e ...</command>: The first sed prevents compression of the
-manual pages, the second one prevents install from failing, and
-the third one fixes the unpack script.
+      manual pages and the second one prevents install from failing.
     </para>
 
     <para>
@@ -512,12 +495,14 @@
       <parameter>--with-lang=ALL</parameter>.
     </para>
 
-<note><para>
-For a list of the 117 available languages, you can look at the 
-translations tarball: <command>tar -tf
-../libreoffice-translations-&libreoffice-dlversion;.tar.xz |
-grep translations/source| cut -d/ -f4 | uniq</command>.
-</para></note>
+    <note>
+      <para>
+        For a list of the available languages, you can look at the translations
+        tarball: <command>tar -tf
+        ../libreoffice-translations-&libreoffice-dlversion;.tar.xz | grep
+        translations/source| cut -d/ -f4 | uniq</command>.
+      </para>
+    </note>
 
     <para>
       <parameter>--with-help</parameter>: Without this switch, the help files
@@ -525,12 +510,24 @@
     </para>
 
     <para>
+      <parameter>--with-myspell-dicts</parameter>: This switch adds myspell
+      dictionaries to the <application>LibreOffice</application> installation
+      set.
+    </para>
+    <para>
       <parameter>--with-alloc=system</parameter>: This switch tells
       <application>LibreOffice</application> to use system allocator
       instead of the internal one.
     </para>
 
     <para>
+      <parameter>--without-system-dicts</parameter>: This switch disables use
+      of  dictionaries from system paths, so the ones installed by this package
+      are used.
+    </para>
+    <para>
       <parameter>--without-java</parameter>: This switch disables
       <application>Java</application> support in
       <application>LibreOffice</application>.
@@ -594,27 +591,32 @@
     </para>
 
     <para>
-<option>--disable-gstreamer-0-10</option>: Use this switch if you've
+      <option>--disable-gstreamer-0-10</option>: Use this switch if you have
       not installed <xref linkend="gst-plugins-base"/>.
     </para>
 
@@     @@
     </para>
 
     <para>
-<option>--enable-kde4</option>: Use this switch if you want to
-build the <application>KDE</application> integration module.
+      <option>--enable-gtk3</option>: Use this switch if you want to build the
+      <application>GTK+ 3</application> integration module.
     </para>
 
+    <para>
+      <option>--enable-kde4</option>: Use this switch if you want to build the
+      <application>KDE</application> integration module.
+    </para>
   </sect2>
 
   <sect2 role="content">

