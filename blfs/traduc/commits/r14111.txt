Révision 14111

fichiers supprimés :
   x/lib/webkitgtk.xml

fichiers déplacés (avec ou sans changements) :
webkitgtk.xml

fichiers modifiés :
   general/prog/tk.xml
   introduction/welcome/changelog.xml
   xfce/apps/midori.xml
   packages.ent
   xsoft/office/libreoffice.xml
   xsoft/other/gimp.xml
   x/lib/lib.xml
   x/lib/webkitgtk2.xml

Log :
Update to webkitgtk-2.4.5. Remove WebKitGTK+1.10.x, consequently, fix Midori-0.5.8 and Gimp-2.8.14 (remove broken ftp link from the latter). Fix Tk-8.6.2 md5sum that changed overnight. Thanks Wayne B. LibreOffice-4.3.0 - fix broken symbolic links. Thanks Wayne B.

Le robot a traité 60 % du commit anglais
Index: archive/webkitgtk.xml
===================================================================
--- x/lib/webkitgtk.xml	2014-09-02 14:29:34.330750549 +0200
+++ x/lib/webkitgtk.xml	2014-09-02 14:29:34.350749760 +0200
@@ -258,3 +258,9 @@
   </sect2>
 
 </sect1>
+Modification de propriétés sur archive/webkitgtk.xml
+___________________________________________________________________
+Added: svn:keywords
+## -0,0 +1 ##
+LastChangedBy Date
+\ No newline at end of property

Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 14110)
+++ introduction/welcome/changelog.xml	(révision 14111)
@@ -48,6 +48,23 @@
       <para>August 28th, 2014</para>
       <itemizedlist>
         <listitem>
+          <para>[fernando] - LibreOffice-4.3.0 - fix broken symbolic links.
+          Thanks Wayne B.</para>
+        </listitem>
+        <listitem>
+          <para>[fernando] - Fix Tk-8.6.2 md5sum that changed overnight.
+          Thanks Wayne B.</para>
+        </listitem>
+        <listitem>
+          <para>[fernando] - Remove WebKitGTK+1.10.x, consequently, fix
+          Midori-0.5.8 and Gimp-2.8.14 (remove broken ftp link from the latter).
+          Fixes <ulink url="&blfs-ticket-root;5434">#5434</ulink>.</para>
+        </listitem>
+        <listitem>
+          <para>[fernando] - Update to webkitgtk-2.4.5. Fixes
+          <ulink url="&blfs-ticket-root;5426">#5426</ulink>.</para>
+        </listitem>
+        <listitem>
           <para>[ken] - Added libpaper-1.1.24+nmu3. Fixes
           <ulink url="&blfs-ticket-root;5440">#5440</ulink>.</para>
         </listitem>

Index: xfce/apps/midori.xml
===================================================================
--- xfce/apps/midori.xml	(révision 14110)
+++ xfce/apps/midori.xml	(révision 14111)
@@ -78,7 +78,6 @@
     <para role="required">
       <xref linkend="cmake"/>,
       <xref linkend="libnotify"/>,
-<xref linkend="webkitgtk"/> or
       <xref linkend="webkitgtk2"/> (see "Command Explanations"), and
       <xref linkend="vala"/>
     </para>
@@ -137,9 +136,12 @@
     <title>Command Explanations</title>
 
     <para>
-<option>--enable-gtk3</option>: Use this switch if you want
-to build <application>Midori</application> with
-<application>WebKitGTK+ 2</application> dependencies.
+      <option>--enable-gtk3</option>: Use this switch if you want to build
+      <application>Midori</application> with
+      <application>WebKitGTK+</application> built against <application>GTK+
+      3</application>, because by default it chooses
+      <application>WebKitGTK+</application> built against <application>GTK+
+      2</application>.
     </para>
 
     <para>

Index: x/lib/webkitgtk2.xml
===================================================================
--- x/lib/webkitgtk2.xml	(révision 14110)
+++ x/lib/webkitgtk2.xml	(révision 14111)
@@ -30,9 +30,10 @@
     <title>Introduction to WebKitGTK+</title>
 
     <para>
-The <application>WebKitGTK+</application> is the port of the portable
-web rendering engine <application>WebKit</application> to the
-<application>GTK+ 3</application> platform.
+      The <application>WebKitGTK+</application> is the port of the portable web
+      rendering engine <application>WebKit</application> to the
+      <application>GTK+ 3</application> and/or <application>GTK+
+      2</application> platforms.
     </para>
 
     &lfs75_checked;
@@ -76,6 +77,7 @@
     <bridgehead renderas="sect4">Required</bridgehead>
     <para role="required">
       <xref linkend="gst10-plugins-base"/>,
+      <xref linkend="gtk2"/> or
       <xref linkend="gtk3"/>,
       <xref linkend="icu"/>,
       <xref linkend="libsecret"/>,
@@ -88,12 +90,17 @@
       <xref linkend="which"/>
     </para>
 
+    <note><para>
+      WebKit2 links against GTK+ 2 (even if GTK+ 3 is being used), in order to
+      be able to use NPAPI plugins such as Adobe Flash.
+    </para></note>
     <bridgehead renderas="sect4">Recommended</bridgehead>
     <para role="recommended">
       <xref linkend="enchant"/>,
       <xref linkend="geoclue"/>,
       <xref linkend="gobject-introspection"/>,
-<xref linkend="gtk2"/> and
       <xref linkend="hicolor-icon-theme"/>
     </para>
 
@@ -114,36 +121,43 @@
   <sect2 role="installation">
     <title>Installation of WebKitGTK+</title>
 
-<warning>
-<para>
-If you are building <application>WebKitGTK+</application>
-with <command>make</command> 3.82, make sure that you have built
-it with the following
-<ulink url="&patch-downloads;/make/make-3.82-upstream_fixes-3.patch">
-patch</ulink> applied or <application>WebKitGTK+</application>
-build may fail.
-</para>
-</warning>
     <para>
       If you have not installed <xref linkend="gtk-doc"/>, fix a bug that will
       cause <command>make install</command> to fail:
     </para>
 
-<screen><userinput>sed -i '/generate-gtkdoc --rebase/s:^:# :' GNUmakefile.in</userinput></screen>
+<screen><userinput>sed -i '/generate-gtkdoc --rebase/s:^:# :' \
+                           GNUmakefile.in</userinput></screen>
 
     <para>
+      Upstream standard now is to link this package against GTK+ 3. However,
+      for backward compatibility, manu users need also another instance, linked
+      to GTK+ 2. Both can be installed in the same system, without problem.
+      However, some packages can alternatively be linked to either one. Here,
+      both build methods are presented and recommended to be built, but if you
+      know which one you need, just jump to the respective part. 
+    </para>
+<!-- ==== WebKitGTK+ against GTK+ 3 ====== -->
+    <bridgehead renderas="sect3">Build and install WebKitGTK+ against
+      GTK+ 3</bridgehead>
+    <para>
       Install <application>WebKitGTK+</application> by running the
       following commands:
     </para>
 
-<screen><userinput>./configure --prefix=/usr          \
---enable-introspection &amp;&amp;
+<screen><userinput>mkdir -vp build-3           &amp;&amp;
+cp -a Documentation build-3 &amp;&amp;
+cd build-3                  &amp;&amp;
+../configure --prefix=/usr --enable-introspection &amp;&amp;
 make</userinput></screen>
 
     <para>
       This package does not have a working testsuite. However, there are two
-useable basic graphical web browsers in the source directory,
+      useable basic graphical web browsers in the build directory,
       <application>Programs/GtkLauncher</application> and
       <application>Programs/MiniBrowser</application>. If launching any one
       fails, there is a problem with the build.
@@ -161,21 +175,76 @@
       Now, as the <systemitem class="username">root</systemitem> user:
     </para>
 
-<screen role="root"><userinput>make install                                    &amp;&amp;
-rm -rf /usr/share/gtk-doc/html/webkitgtk-2.0    &amp;&amp;
-mv -vi /usr/share/gtk-doc/html/webkitgtk{,-2.0}</userinput></screen>
+<screen role="root"><userinput>make install</userinput></screen>
+    <para>
+      Finally, leave the buid directory:
+    </para>
+<screen><userinput>cd ..</userinput></screen>
+<!-- ==== WebKitGTK+ against GTK+ 2 ====== -->
+    <bridgehead renderas="sect3">Build and install WebKitGTK+ against
+      GTK+ 2</bridgehead>
+    <para>
+      Install <application>WebKitGTK+</application> by running the
+      following commands:
+    </para>
+<screen><userinput>mkdir -vp build-1</userinput></screen>
+    <para>
+      If you have built and installed the package against GTK+ 3, skip the
+      following command, because the previous docummentation also applies here:
+    </para>
+<screen><userinput>cp -a Documentation build-1</userinput></screen>
+    <para>
+      Now, change into the build directory and effectively start the build and
+      install:
+    </para>
+<screen><userinput>cd build-1 &amp;&amp;
+../configure --prefix=/usr --with-gtk=2.0 --disable-webkit2 &amp;&amp;
+make</userinput></screen>
+    <para>
+      This package does not have a working testsuite. However, there is one
+      useable basic graphical web browser in the build directory,
+      <application>Programs/GtkLauncher</application>. If launching it
+      fails, there is a problem with the build.
+    </para>
+    <note><para>
+      When installing, the Makefile does some additional compiling and linking.
+      If you do not have Xorg in /usr, the LIBRARY_PATH and PKG_CONFIG_PATH
+      variables need to be defined for the root user.  If using sudo to assume
+      root, use the -E option to pass your current environment variables for the
+      install process.
+    </para></note>
+    <para>
+      Now, as the <systemitem class="username">root</systemitem> user:
+    </para>
+<screen role="root"><userinput>make install</userinput></screen>
+    <para>
+      Finally, leave the buid directory:
+    </para>
+<screen><userinput>cd ..</userinput></screen>
   </sect2>
 
   <sect2 role="commands">
     <title>Command Explanations</title>
 
     <para>
-<command>mv -vi /usr/share/gtk-doc/html/webkitgtk{,-2.0}</command>:
-There is a conflict with the directory installed with same name by
-<xref linkend="webkitgtk"/>.
-</para>
-<para>
       <option>--enable-introspection</option>: This switch enables support for
       <application>Gobject Introspection</application> and is required for a
       <application>GNOME</application> Desktop. Remove if you don't have
@@ -192,38 +261,36 @@
     <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
       href="../../xincludes/gtk-doc-rebuild.xml"/>
 
-<para><option>--libexecdir=/usr/lib/webkitgtk3</option>: This option
-puts the package's private programs into
-<filename class="directory">/usr/lib/webkitgtk3</filename> instead of
-<filename class="directory">/usr/libexec</filename> in accordance with
-the old version of the FHS used before LFS-7.5.</para>
   </sect2>
 
   <sect2 role="content">
     <title>Contents</title>
 
     <segmentedlist>
-<segtitle>Installed Program</segtitle>
+      <segtitle>Installed Programs</segtitle>
       <segtitle>Installed Libraries</segtitle>
       <segtitle>Installed Directories</segtitle>
 
       <seglistitem>
         <seg>
-jsc-3
+          jsc-1, and jsc-3
         </seg>
         <seg>
+          libjavascriptcoregtk-1.0.so,
           libjavascriptcoregtk-3.0.so,
           libwebkit2gtk-3.0.so,
-libwebkitgtk-3.0.so and
-/usr/lib/webkit2gtk-3.0/injected-bundle/libwebkit2gtkinjectedbundle.so
+          libwebkitgtk-1.0.so,
+          libwebkitgtk-3.0.so, and
+          webkit2gtk-3.0/injected-bundle/libwebkit2gtkinjectedbundle.so
         </seg>
         <seg>
+          /usr/include/webkitgtk-1.0,
           /usr/include/webkitgtk-3.0,
           /usr/lib/webkit2gtk-3.0,
-/usr/share/gtk-doc/html/webkitgtk-2.0,
+          /usr/share/gtk-doc/html/webkit2gtk,
           /usr/share/gtk-doc/html/webkitdomgtk,
-/usr/share/gtk-doc/html/webkit2gtk, and
+          /usr/share/gtk-doc/html/webkitgtk,
+          /usr/share/webkitgtk-1.0, and
           /usr/share/webkitgtk-3.0
         </seg>
       </seglistitem>
@@ -234,6 +301,19 @@
       <?dbfo list-presentation="list"?>
       <?dbhtml list-presentation="table"?>
 
+      <varlistentry id="jsc-1">
+        <term><command>jsc-1</command></term>
+        <listitem>
+          <para>
+            is a command-line utility that allows you to run JavaScript programs
+            outside of the context of a web browser.
+          </para>
+          <indexterm zone="webkitgtk2 jsc-1">
+            <primary sortas="b-jsc-1">jsc-1</primary>
+          </indexterm>
+        </listitem>
+      </varlistentry>
       <varlistentry id="jsc-3">
         <term><command>jsc-3</command></term>
         <listitem>
@@ -247,6 +327,20 @@
         </listitem>
       </varlistentry>
 
+      <varlistentry id="libjavascriptcoregtk-1">
+        <term><filename
+        class="libraryfile">libjavascriptcoregtk-1.0.so</filename></term>
+        <listitem>
+          <para>
+            contains core JavaScript API functions used by <command>jsc-1</command>
+            and <filename class="libraryfile">libwebkitgtk-1.0.so</filename>.
+          </para>
+          <indexterm zone="webkitgtk2 libjavascriptcoregtk-1">
+            <primary sortas="c-libjavascriptcoregtk-1">libjavascriptcoregtk-1.0.so</primary>
+          </indexterm>
+        </listitem>
+      </varlistentry>
       <varlistentry id="libjavascriptcoregtk-3">
         <term><filename
         class="libraryfile">libjavascriptcoregtk-3.0.so</filename></term>
@@ -255,25 +349,24 @@
             contains core JavaScript API functions used by <command>jsc-3</command>
             and <filename class="libraryfile">libwebkitgtk-3.0.so</filename>.
           </para>
-<indexterm zone="webkitgtk libjavascriptcoregtk-3">
+          <indexterm zone="webkitgtk2 libjavascriptcoregtk-3">
             <primary sortas="c-libjavascriptcoregtk-3">libjavascriptcoregtk-3.0.so</primary>
           </indexterm>
         </listitem>
       </varlistentry>
+      <varlistentry id="libwebkitgtk-1">
+        <term><filename class="libraryfile">libwebkitgtk-1.0.so</filename></term>
         <listitem>
           <para>
             contains the <application>WebKitGTK+</application> API functions for
-the Injected Bundle support.
+            <application>GTK+ 2</application>.
           </para>
-<indexterm zone="webkitgtk libwebkit2gtkinjectedbundle">
-<primary sortas="c-libwebkit2gtkinjectedbundle">libwebkit2gtkinjectedbundle.so</primary>
+          <indexterm zone="webkitgtk2 libwebkitgtk-1">
+            <primary sortas="c-libwebkitgtk-1">libwebkitgtk-1.0.so</primary>
           </indexterm>
         </listitem>
       </varlistentry>
--->
 
       <varlistentry id="libwebkitgtk-3">
         <term><filename class="libraryfile">libwebkitgtk-3.0.so</filename></term>
@@ -282,7 +375,7 @@
             contains the <application>WebKitGTK+</application> API functions for
             <application>GTK+ 3</application>.
           </para>
-<indexterm zone="webkitgtk libwebkitgtk-3">
+          <indexterm zone="webkitgtk2 libwebkitgtk-3">
             <primary sortas="c-libwebkitgtk-3">libwebkitgtk-3.0.so</primary>
           </indexterm>
         </listitem>
@@ -294,7 +387,7 @@
           <para>
             contains the <application>WebKit2</application> API functions.
           </para>
-<indexterm zone="webkitgtk libwebkit2gtk-3">
+          <indexterm zone="webkitgtk2 libwebkit2gtk-3">
             <primary sortas="c-libwebkit2gtk-3">libwebkit2gtk-3.0.so</primary>
           </indexterm>
         </listitem>

Index: xsoft/office/libreoffice.xml
===================================================================
--- xsoft/office/libreoffice.xml	(révision 14110)
+++ xsoft/office/libreoffice.xml	(révision 14111)
@@ -288,9 +288,12 @@
 <!-- Not necessary for this version
 tar -xf ../libreoffice-help-&libreoffice-dlversion;.tar.xz -\-no-overwrite-dir -\-strip-components=1 &amp;&amp;
 -->
-ln -sv ../../libreoffice-dictionaries-&libreoffice-dlversion;.tar.xz external/tarballs/ &amp;&amp;
-ln -sv ../../libreoffice-help-&libreoffice-dlversion;.tar.xz external/tarballs/</userinput></screen>
 
+ln -sv ../../../libreoffice-dictionaries-&libreoffice-dlversion;.tar.xz \
+       external/tarballs/ &amp;&amp;
+ln -sv ../../../libreoffice-help-&libreoffice-dlversion;.tar.xz \
+       external/tarballs/</userinput></screen>
 <!-- Not necessary for this version
     <para>
       If you have downloaded the translations tarball, unpack it:

Index: xsoft/other/gimp.xml
===================================================================
--- xsoft/other/gimp.xml	(révision 14110)
+++ xsoft/other/gimp.xml	(révision 14111)
@@ -149,7 +150,7 @@
       an <xref linkend="server-mail"/> (that provides a
       <command>sendmail</command> program),
       <xref linkend="udev-extras"/> (for GUdev),
-<xref linkend="webkitgtk"/> (required for the help-plugin) and
+      <xref linkend="webkitgtk2"/> (required for the help-plugin) and
       <xref linkend="gtk-doc"/>
     </para>
 

