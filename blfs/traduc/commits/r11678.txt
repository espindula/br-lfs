Révision 11678

fichiers modifiés :
   general.ent
   x/lib/qt5.xml
   general/graphlib/libmng.xml
   introduction/welcome/changelog.xml

Log :
libmng 2.0.2

Le robot a traité 22 % du commit anglais
Index: general/graphlib/libmng.xml
===================================================================
--- general/graphlib/libmng.xml	(révision 11677)
+++ general/graphlib/libmng.xml	(révision 11678)
@@ -60,8 +60,10 @@
     <bridgehead renderas="sect3">libmng Dependencies</bridgehead>
 
     <bridgehead renderas="sect4">Required</bridgehead>
-<para role="required"><xref linkend="libjpeg"/> and
-<xref linkend="lcms"/></para>
+    <para role="required">
+      <xref linkend="libjpeg"/> and
+      <xref linkend="lcms2"/>
+    </para>
 
     <para condition="html" role="usernotes">User Notes:
     <ulink url="&blfs-wiki;/libmng"/></para>
@@ -74,39 +76,32 @@
     <para>Install <application>libmng</application> by running the following
     commands:</para>
 
-<screen><userinput>cp makefiles/makefile.linux Makefile         &amp;&amp;
-sed -i -e 's/unroll-loops/&amp; -fPIC/' Makefile &amp;&amp;
+<screen><userinput>sed -i "s:#include &lt;jpeg:#include &lt;stdio.h&gt;\n&amp;:" libmng_types.h &amp;&amp;
+./configure --prefix=/usr --disable-static &amp;&amp;
 make</userinput></screen>
 
     <para>This package does not come with a test suite.</para>
 
     <para>Now, as the <systemitem class="username">root</systemitem> user:</para>
 
-<screen role="root"><userinput>sed -i '/^install\|cp.*libmng.a/ s/libmng.a//' Makefile &amp;&amp;
-make prefix=/usr install &amp;&amp;
-install -v -m644 doc/man/*.3 /usr/share/man/man3 &amp;&amp;
-install -v -m644 doc/man/*.5 /usr/share/man/man5 &amp;&amp;
+<screen role="root"><userinput>make install &amp;&amp;
 install -v -m755 -d /usr/share/doc/libmng-&libmng-version; &amp;&amp;
-install -v -m644 doc/*.{png,txt} /usr/share/doc/libmng-&libmng-version;</userinput></screen>
+install -v -m644 doc/*.txt /usr/share/doc/libmng-&libmng-version;</userinput></screen>
 
   </sect2>
 
   <sect2 role="commands">
     <title>Command Explanations</title>
 
-<para><command>cp makefiles/makefile.linux Makefile</command>: There are no
-autotools shipped with this package. The Linux <filename>Makefile</filename>
-is copied to the root of the source tree, facilitating the installation.</para>
+    <para>
+      <command>sed -i "..." libmng_types.h</command>: This command adds a
+      missing header which would cause other apps that link to this
+      package fail to compile.
+    </para>
 
-<para><command>sed -i -e 's/unroll-loops/&amp; -fPIC/' Makefile</command>:
-Add a gcc option to make the build compatible with x86_64 systems.</para>
+    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
+      href="../../xincludes/static-libraries.xml"/>
 
-<para><command>sed -i '/^install\|cp.*libmng.a/ s/libmng.a//' Makefile</command>
-This command disables installing the static library.</para>
-<para><command>install ...</command>: The documentation files are not
-installed by the installation procedure, so they are copied manually.</para>
   </sect2>
 
   <sect2 role="content">

Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 11677)
+++ introduction/welcome/changelog.xml	(révision 11678)
@@ -47,8 +47,13 @@
          note to alternatively use editor; cacerts: change wget to
          recommended and cut-and-pasting to copy-and-pasting.</para>
         </listitem>
+        <listitem>
+          <para>[krejzi] - libmng 2.0.2.</para>
+        </listitem>
       </itemizedlist>
     </listitem>
 

Index: x/lib/qt5.xml
===================================================================
--- x/lib/qt5.xml	(révision 11677)
+++ x/lib/qt5.xml	(révision 11678)
@@ -77,16 +77,6 @@
       </listitem>
     </itemizedlist>
 
-<bridgehead renderas="sect3">Additional Downloads</bridgehead>
-<itemizedlist spacing="compact">
-<listitem>
-<para>
-Required patch:
-<ulink url="&patch-root;/qt-&qt5-version;-bison_fixes-1.patch"/>
-</para>
-</listitem>
-</itemizedlist>
     <bridgehead renderas="sect3">Qt Dependencies</bridgehead>
 
     <bridgehead renderas="sect4">Required</bridgehead>
@@ -149,8 +139,12 @@
       following commands:
     </para>
 
-<screen><userinput>patch -Np1 -i ../qt-&qt5-version;-bison_fixes-1.patch &amp;&amp;
+<screen><userinput>sed -i "s:Context\* context}:&amp;\n%lex-param {YYLEX_PARAM}:" \
+     qtwebkit/Source/ThirdParty/ANGLE/src/compiler/glslang.y &amp;&amp;
 
+sed -i -e "/#if/d" -e "/#error/d" -e "/#endif/d" \
+     qtimageformats/config.tests/libmng/libmng.cpp &amp;&amp;
 ./configure -prefix /usr                \
             -sysconfdir /etc/xdg        \
             -bindir /usr/lib/qt5/bin    \
@@ -165,7 +159,6 @@
             -dbus-linked       \
             -openssl-linked    \
             -system-sqlite     \
--plugin-sql-sqlite \
             -no-nis            \
             -nomake examples   \
             -opengl es2        \
@@ -310,6 +303,13 @@
     <title>Command Explanations</title>
 
     <para>
+      <command>sed -i "..." ...</command>: First command fixes
+      building with <application>Bison</application> 3.0 and
+      second command fixes detection of
+      <application>libmng</application> 2.0.
+    </para>
+    <para>
       <parameter>-confirm-license</parameter>: Accept license
       without prompting user during configuration.
     </para>
@@ -352,13 +352,6 @@
     </para>
 
     <para>
-<parameter>-plugin-sql-<replaceable>&lt;driver&gt;</replaceable></parameter>:
-These switches enable SQL support in the
-<application>Qt</application> libraries. Available drivers are:
-ibase, mysql, psql, sqlite and odbc.
-</para>
-<para>
       <parameter>-opengl es2</parameter>: This switch enables OpenGL ES2
       support in <application>Qt</application>.
     </para>

