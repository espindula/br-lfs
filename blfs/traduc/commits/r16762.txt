Révision 16762

fichiers modifiés :
   introduction/welcome/changelog.xml
   general.ent
   xsoft/other/tigervnc.xml
   packages.ent

Log :
• Update to tigervnc-1.6.0.

Le robot a traité 28 % du commit anglais
Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 16761)
+++ introduction/welcome/changelog.xml	(révision 16762)
@@ -45,6 +45,16 @@
 -->
 
     <listitem>
+      <para>December 26th, 2015</para>
+      <itemizedlist>
+        <listitem>
+          <para>[fernando] - Update to tigervnc-1.6.0. Fixes
+          <ulink url="&blfs-ticket-root;7177">#7177</ulink>.</para>
+        </listitem>
+      </itemizedlist>
+    </listitem>
+    <listitem>
       <para>December 25th, 2015</para>
       <itemizedlist>
         <listitem>

Index: xsoft/other/tigervnc.xml
===================================================================
--- xsoft/other/tigervnc.xml	(révision 16761)
+++ xsoft/other/tigervnc.xml	(révision 16762)
@@ -71,6 +71,12 @@
       <listitem>
         <para>
           Required patch:
+          <ulink url="&patch-root;/tigervnc-&tigervnc-version;-xorg118-1.patch"/>
+        </para>
+      </listitem>
+      <listitem>
+        <para>
+          Required patch:
           <ulink url="&patch-root;/tigervnc-&tigervnc-version;-gethomedir-1.patch"/>
         </para>
       </listitem>
@@ -110,18 +116,28 @@
     <para>Install <application>tigervnc</application> by running the following
     commands:</para>
 
-<screen><userinput>tar -xf ../xorg-server-&tigervnc-xorg-version;.tar.bz2 -C unix/xserver --strip-components=1 &amp;&amp;
+<screen><userinput>patch -Np1 -i ../tigervnc-&tigervnc-version;-xorg118-1.patch    &amp;&amp;
+patch -Np1 -i ../tigervnc-&tigervnc-version;-gethomedir-1.patch &amp;&amp;<!--
+sed -i 's/iconic/nowin/' unix/vncserver            &amp;&amp;-->
 
-patch -Np1 -i ../tigervnc-&tigervnc-version;-gethomedir-1.patch &amp;&amp;
-sed -i 's/iconic/nowin/' unix/vncserver            &amp;&amp;
+mkdir -vp build &amp;&amp;
+cd        build &amp;&amp;
 
-cmake -G "Unix Makefiles" -DCMAKE_INSTALL_PREFIX=/usr &amp;&amp;
+# Build viewer
+cmake -G "Unix Makefiles"         \
+      -DCMAKE_INSTALL_PREFIX=/usr \
+      -DCMAKE_BUILD_TYPE=Release  \
+      -Wno-dev .. &amp;&amp;
 make &amp;&amp;
 
-pushd unix/xserver                  &amp;&amp;
-patch -Np1 -i ../xserver116.patch &amp;&amp;
-autoreconf -fiv                   &amp;&amp;
+# Build server
+cp -vR ../unix/xserver unix/ &amp;&amp;
+tar -xf ../xorg-server-&tigervnc-xorg-version;.tar.bz2 -C unix/xserver --strip-components=1         &amp;&amp;
 
+pushd unix/xserver &amp;&amp;
+  patch -Np1 -i ../../../unix/xserver117.patch &amp;&amp;
+  autoreconf -fi   &amp;&amp;
   ./configure $XORG_CONFIG \
       --disable-xwayland    --disable-dri        --disable-dmx         \
       --disable-xorg        --disable-xnest      --disable-xvfb        \
@@ -130,18 +146,21 @@
       --disable-unit-tests  --disable-selective-werror                 \
       --disable-static      --enable-dri3                              \
       --without-dtrace      --enable-dri2        --enable-glx          \
---enable-glx-tls      --with-pic  &amp;&amp;
-make    &amp;&amp;
+      --with-pic &amp;&amp;
+  make TIGERVNC_SRCDIR=`pwd`/../../../ &amp;&amp;
 popd</userinput></screen>
 
     <para>This package does not come with a test suite.</para>
 
     <para>Now, as the <systemitem class="username">root</systemitem> user:</para>
 
-<screen role="root"><userinput>make install &amp;&amp;
+<screen role="root"><userinput>#Install viewer
+make install &amp;&amp;
 
-cd unix/xserver/hw/vnc &amp;&amp;
-make install           &amp;&amp;
+#Install server
+pushd unix/xserver/hw/vnc &amp;&amp;
+  make install &amp;&amp;
+popd &amp;&amp;
 
 [ -e /usr/bin/Xvnc ] || ln -svf $XORG_PREFIX/bin/Xvnc /usr/bin/Xvnc</userinput></screen>
 
@@ -158,19 +177,22 @@
 Categories=Network;RemoteAccess;</literal>
EOF
 
+install -vm644 ../media/icons/tigervnc_24.png /usr/share/pixmaps &amp;&amp;
+ln -sfv tigervnc_24.png /usr/share/pixmaps/tigervnc.png</userinput></screen>
   </sect2>
 
   <sect2 role="commands">
     <title>Command Explanations</title>
 
+    <para><command>patch ...</command>: This set of patches modifies the standard
+    Xorg server so that the Xvnc command can be built.</para>
     <para><command>tar -xf .. xorg-server...</command>: This command extracts the
     standard Xorg packages into the tree in a location needed for modification.</para>
 
-<para><command>patch ...</command>: This set of patches modifies the standard
-Xorg server so that the Xvnc command can be built.</para>
     <para><option>--disable ...</option>: Most options that are usually needed for
     the standard Xorg server are not needed fror the Xvnc instance being built.</para>
 
@@ -217,7 +239,7 @@
              x0vncserver</seg>
 
         <seg>libvnc.so</seg>
-<seg>None</seg>
+        <seg>/usr/share/doc/tigervnc-&tigervnc-version;</seg>
       </seglistitem>
     </segmentedlist>
 
@@ -283,7 +305,7 @@
       <varlistentry id="x0vncserver">
         <term><command>x0vncserver</command></term>
         <listitem>
-<para>is a program to make an X display onm a physical
+          <para>is a program to make an X display on a physical
           terminal accessible via TigerVNC or compatible viewers.</para>
           <indexterm zone="tigervnc x0vncserver">
             <primary sortas="b-x0vncserver">x0vncserver</primary>

