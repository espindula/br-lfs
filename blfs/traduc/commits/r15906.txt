Révision 15906

fichiers modifiés :
   introduction/welcome/changelog.xml
   x/installing/x7app.xml

Log :
fix sessreg for gcc5

Le robot a traité 26 % du commit anglais
Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 15905)
+++ introduction/welcome/changelog.xml	(révision 15906)
@@ -48,6 +48,11 @@
       <para>April 30th, 2015</para>
       <itemizedlist>
         <listitem>
+          <para>[ken] - add a sed to sessreg (Xorg Applications)
+          to allow it to build with the changed cpp behaviour introduced with
+          gcc-5.</para>
+        </listitem>
+        <listitem>
           <para>[fernando] - Update to apr-1.5.2. Fixes
           <ulink url="&blfs-ticket-root;6445">#6445</ulink>.</para>
         </listitem>

Index: x/installing/x7app.xml
===================================================================
--- x/installing/x7app.xml	(révision 15905)
+++ x/installing/x7app.xml	(révision 15906)
@@ -267,10 +267,13 @@
       sed -i -e "s@#ifdef HAVE_CONFIG_H@$line1\n$line2\n$line3\n$line4\n\n&amp;@" sys.c
       unset line1 line2 line3 line4
     ;;
+    sessreg-* )
+      sed -e 's/\$(CPP) \$(DEFS)/$(CPP) -P $(DEFS)/' -i man/Makefile.in
+    ;;
   esac
   ./configure $XORG_CONFIG
   make
@@ -285,6 +288,19 @@
 
   </sect2>
 
+  <sect2 role="commands">
+    <title>Command Explanations</title>
+    <para>
+      <parameter>sed -e 's/\$(CPP) \$(DEFS)/$(CPP) -P $(DEFS)/' -i
+      man/Makefile.in</parameter>: with <application>gcc-5</application> the
+      behaviour of <command>cpp</command> was changed to emit line numbers.
+      That breaks the content of <filename>filenames.sed</filename>. Adding
+      <literal>-P</literal> restores the old behaviour.
+    </para>
+  </sect2>
   <sect2 role="content">
     <title>Contents</title>
 

