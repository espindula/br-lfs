Révision 16038

fichiers modifiés :
M       scripts/blfs-chapter13.php

Log :
Don't detect git-manpages and git-htmldocs. They are released alongside git, so do what's being done for nasm-doc - just ignore the check. Fix and hopefully simplify python and python docs detection. Add more perl modules that were recently added.

Le robot a traité 5 % du commit anglais
Index: scripts/blfs-chapter13.php
===================================================================
--- scripts/blfs-chapter13.php	(révision 16037)
+++ scripts/blfs-chapter13.php	(révision 16038)
@@ -20,16 +20,18 @@
 $renames[ 'junit4_'    ] = 'junit';
 
 $ignores = array();
-$ignores[ 'cfe'         ] = '';
-$ignores[ 'clang'       ] = '';
-$ignores[ 'compiler-rt' ] = '';
-$ignores[ 'nasm1'       ] = '';
-$ignores[ 'tcl1'        ] = '';
-$ignores[ 'gcc1'        ] = '';
-$ignores[ 'gcc11'       ] = '';
-$ignores[ 'OpenJDK1'    ] = '';
-$ignores[ 'hamcrest'    ] = '';
-$ignores[ 'apache-ant1' ] = '';
+$ignores[ 'cfe'          ] = '';
+$ignores[ 'clang'        ] = '';
+$ignores[ 'compiler-rt'  ] = '';
+$ignores[ 'git-htmldocs' ] = '';
+$ignores[ 'git-manpages' ] = '';
+$ignores[ 'nasm1'        ] = '';
+$ignores[ 'tcl1'         ] = '';
+$ignores[ 'gcc1'         ] = '';
+$ignores[ 'gcc11'        ] = '';
+$ignores[ 'OpenJDK1'     ] = '';
+$ignores[ 'hamcrest'     ] = '';
+$ignores[ 'apache-ant1'  ] = '';
 
 //$current="junit4_";
 
@@ -41,7 +43,8 @@
 $regex[ 'scons'   ] = "/^.*Download scons-(\d[\d\.]+\d).*$/";
 $regex[ 'tcl'     ] = "/^.*Download tcl(\d[\d\.]+\d).*$/";
 $regex[ 'swig'    ] = "/^.*Download swig-(\d[\d\.]+\d).*$/";
-$regex[ 'Python1' ] = "/^.*Download Python (3[\d\.]+\d).*$/";
+$regex[ 'Python'  ] = "/^.*Latest Python 2.*Python (2[\d\.]+\d).*$/";
+$regex[ 'Python1' ] = "/^.*Latest Python 3.*Python (3[\d\.]+\d).*$/";
 $regex[ 'Mako'    ] = "/^.*version is (\d[\d\.]+\d).*$/";
 $regex[ 'php'     ] = "/^.*php-(\d[\d\.]+\d).tar.*$/";
 $regex[ 'ruby'    ] = "/^.*stable version is (\d[\d\.]+\d).*$/";
@@ -56,6 +59,7 @@
 $regex[ 'Business-ISMN'     ] = "/^.*Business-ISMN-(\d[\d\.]+\d).*$/";
 $regex[ 'Business-ISSN'     ] = "/^.*Business-ISSN-(\d[\d\.]+\d).*$/";
 $regex[ 'Data-Compare'      ] = "/^.*Data-Compare-(\d[\d\.]+\d).*$/";
+$regex[ 'Data-Dump'         ] = "/^.*Data-Dump-(\d[\d\.]+\d).*$/";
 $regex[ 'Date-Simple'       ] = "/^.*Date-Simple-(\d[\d\.]+\d).*$/";
 $regex[ 'Encode-EUCJPASCII' ] = "/^.*Encode-EUCJPASCII-(\d[\d\.]+\d).*$/";
 $regex[ 'Encode-HanExtra'   ] = "/^.*Encode-HanExtra-(\d[\d\.]+\d).*$/";
@@ -70,7 +74,12 @@
 $regex[ 'Net-DNS'           ] = "/^.*Net-DNS-(\d[\d\.]+\d).*$/";
 $regex[ 'Readonly-XS'       ] = "/^.*Readonly-XS-(\d[\d\.]+\d).*$/";
 $regex[ 'Regexp-Common'     ] = "/^.*Regexp-Common-(\d[\d\.]+\d).*$/";
+$regex[ 'Test-Command'      ] = "/^.*Test-Command-(\d[\d\.]+\d).*$/";
+$regex[ 'Test-Differences'  ] = "/^.*Test-Differences-(\d[\d\.]+\d).*$/";
+$regex[ 'Test-Pod'          ] = "/^.*Test-Pod-(\d[\d\.]+\d).*$/";
+$regex[ 'Test-Pod-Coverage' ] = "/^.*Test-Pod-Coverage-(\d[\d\.]+\d).*$/";
 $regex[ 'Text-BibTeX'       ] = "/^.*Text-BibTeX-(\d[\d\.]+\d).*$/";
+$regex[ 'Text-Roman'        ] = "/^.*Text-Roman-(\d[\d\.]+\d).*$/";
 $regex[ 'Unicode-Collate'   ] = "/^.*Unicode-Collate-(\d[\d\.]+\d).*$/";
 $regex[ 'Unicode-LineBreak' ] = "/^.*Unicode-LineBreak-(\d[\d\.]+\d).*$/";
 $regex[ 'URI'               ] = "/^.*URI-(\d[\d\.]+\d).*$/";
@@ -109,6 +118,10 @@
           'match'   => '^.*$', 
           'replace' => "http://www.nasm.us/pub/nasm/releasebuilds" ),
 
+   array( 'pkg'     => 'python2',
+          'match'   => '^.*$', 
+          'replace' => "https://docs.python.org/2/archives" ),
    array( 'pkg'     => 'python1',
           'match'   => '^.*$', 
           'replace' => "https://docs.python.org/3/archives" ),
@@ -157,6 +170,10 @@
           'match'   => '^.*$', 
           'replace' => "http://search.cpan.org/dist/Data-Compare/" ),
 
+   array( 'pkg'     => 'Data-Dump',
+          'match'   => '^.*$', 
+          'replace' => "http://search.cpan.org/dist/Data-Dump/" ),
    array( 'pkg'     => 'Date-Simple',
           'match'   => '^.*$', 
           'replace' => "http://search.cpan.org/dist/Date-Simple/" ),
@@ -217,10 +234,29 @@
           'match'   => '^.*$', 
           'replace' => "http://search.cpan.org/dist/Regexp-Common/" ),
 
+   array( 'pkg'     => 'Test-Command',
+          'match'   => '^.*$', 
+          'replace' => "http://search.cpan.org/dist/Test-Command/" ),
+   array( 'pkg'     => 'Test-Differences',
+          'match'   => '^.*$', 
+          'replace' => "http://search.cpan.org/dist/Test-Differences/" ),
+   array( 'pkg'     => 'Test-Pod',
+          'match'   => '^.*$', 
+          'replace' => "http://search.cpan.org/dist/Test-Pod/" ),
+   array( 'pkg'     => 'Test-Pod-Coverage',
+          'match'   => '^.*$', 
+          'replace' => "http://search.cpan.org/dist/Test-Pod-Coverage/" ),
    array( 'pkg'     => 'Text-BibTeX',
           'match'   => '^.*$', 
           'replace' => "http://search.cpan.org/dist/Text-BibTeX/" ),
 
+   array( 'pkg'     => 'Text-Roman',
+          'match'   => '^.*$', 
+          'replace' => "http://search.cpan.org/dist/Text-Roman/" ),
    array( 'pkg'     => 'Unicode-Collate',
           'match'   => '^.*$', 
           'replace' => "http://search.cpan.org/dist/Unicode-Collate/" ),
@@ -249,9 +285,13 @@
           'match'   => '^.*$', 
           'replace' => "http://search.cpan.org/dist/XML-Writer/" ),
 
+   array( 'pkg'     => 'Python',
+          'match'   => '^.*$', 
+          'replace' => "https://www.python.org/downloads/source/" ),
    array( 'pkg'     => 'Python1',
           'match'   => '^.*$', 
-'replace' => "https://www.python.org/downloads" ),
+          'replace' => "https://www.python.org/downloads/source/" ),
 
    array( 'pkg'     => 'setuptools',
           'match'   => '^.*$', 
@@ -474,24 +514,8 @@
   if ( $book_index == "nasm" )
     return find_max( $lines, '/^\d/', '/^(\d[\d\.]+\d)\/.*$/' );
 
-if ( $book_index == "Python" )
+  if ( $book_index == "python" || $book_index == "python1" )  // python docs
   {
-$dir   = max_parent( $dirpath, "2" );
-$lines = http_get_file( "$dir" );
-$ver   = find_max( $lines, "/^Python/", "/^Python-(\d[\d\.]*\d).tar.*$/" );
-return ( $ver == "0" ) ? "pending" : $ver;
-}
-if ( $book_index == "python" )  // python2
-{
-$dir = max_parent( $dirpath, "2" );
-$lines = http_get_file( "$dir" );
-return find_max( $lines, "/^python-\d[\d\.]*\d/", 
-"/^python-(\d[\d\.]*\d)-docs.*$/" );
-}
-if ( $book_index == "python1" )  // python3 docs
-{
     return find_max( $lines, "/python-\d/", 
                              "/^python-(\d[\d\.]*\d)-docs.*$/" );
   }

