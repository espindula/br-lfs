Révision 16349

fichiers modifiés :
   introduction/welcome/changelog.xml
   lxqt/apps/lximage-qt.xml
   lxqt/desktop/lxqt-notificationd.xml
   lxqt/desktop/lxqt-globalkeys.xml
   lxqt/desktop/lxqt-panel.xml
   lxqt/desktop/post-install.xml
   lxqt/desktop/lxqt-qtplugin.xml
   lxqt/desktop/pre-install.xml
   lxqt/desktop/lxqt-config.xml
   lxqt/desktop/lxqt-policykit.xml
   lxqt/desktop/lxqt-runner.xml
   lxqt/desktop/lxqt-about.xml
   lxqt/desktop/libsysstat.xml
   lxqt/desktop/pcmanfm-qt.xml
   lxqt/desktop/lxqt-session.xml
   lxqt/desktop/libqtxdg.xml
   lxqt/desktop/lxqt-common.xml
   lxqt/desktop/liblxqt-mount.xml
   lxqt/desktop/liblxqt.xml
   lxqt/desktop/lxqt-powermanagement.xml

Log :
Use $LXQT_PREFIX (can be /usr) in lxqt instead of forcing /opt/lxqt. I am not pleased by my ugly changes to the Final configuration part of the Post-Install instructions, but I think they will work and not do any harm.

Le robot a traité 1 % du commit anglais
Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 16348)
+++ introduction/welcome/changelog.xml	(révision 16349)
@@ -48,6 +48,10 @@
         <para>August 17th, 2015</para>
         <itemizedlist>
           <listitem>
+            <para>[ken] - use a variable to support building lxqt in
+            /usr as an alternative to building in /opt/lxqt.</para>
+          </listitem>
+          <listitem>
             <para>[fernando] - Update to gedit-3.16.3.  Fixes
             <ulink url="&blfs-ticket-root;6829">#6829</ulink>.</para>
           </listitem>

Index: lxqt/apps/lximage-qt.xml
===================================================================
--- lxqt/apps/lximage-qt.xml	(révision 16348)
+++ lxqt/apps/lximage-qt.xml	(révision 16349)
@@ -98,11 +98,11 @@
 mkdir -v build &amp;&amp;
 cd       build &amp;&amp;
 
-cmake -DCMAKE_BUILD_TYPE=Release       \
--DCMAKE_INSTALL_PREFIX=/opt/lxqt \
+cmake -DCMAKE_BUILD_TYPE=Release          \
+      -DCMAKE_INSTALL_PREFIX=$LXQT_PREFIX \
       ..       &amp;&amp;
 
-LIBRARY_PATH=/opt/qt5/lib:/opt/lxqt/lib make</userinput></screen>
+LIBRARY_PATH=/opt/qt5/lib:$LXQT_PREFIX/lib make</userinput></screen>
 
     <para>
       This package does not come with a test suite.
@@ -114,10 +114,10 @@
 
 <screen role="root"><userinput>make install &amp;&amp;
 
-ln -svf /opt/lxqt/share/applications/lximage-qt.desktop \
+ln -svf $LXQT_PREFIX/share/applications/lximage-qt.desktop \
         /usr/share/applications &amp;&amp;
 
-ln -svf /opt/lxqt/share/applications/lximage-qt-screenshot.desktop \
+ln -svf $LXQT_PREFIX/share/applications/lximage-qt-screenshot.desktop \
         /usr/share/applications</userinput></screen>
 
     <para>
@@ -143,7 +143,7 @@
     </para>
 
     <para>
-<envar>LIBRARY_PATH=/opt/qt5/lib:/opt/lxqt/lib</envar>: Fixes for the
+      <envar>LIBRARY_PATH=/opt/qt5/lib:$LXQT_PREFIX/lib</envar>: Fixes for the
       linker to find three libraries.
     </para>
 
@@ -165,7 +165,7 @@
           None
         </seg>
         <seg>
-/opt/lxqt/share/lximage-qt
+          $LXQT_PREFIX/share/lximage-qt
         </seg>
       </seglistitem>
     </segmentedlist>

Index: lxqt/desktop/liblxqt-mount.xml
===================================================================
--- lxqt/desktop/liblxqt-mount.xml	(révision 16348)
+++ lxqt/desktop/liblxqt-mount.xml	(révision 16349)
@@ -94,9 +94,9 @@
 <screen><userinput>mkdir -v build &amp;&amp;
 cd       build &amp;&amp;
 
-cmake -DCMAKE_BUILD_TYPE=Release       \
--DCMAKE_INSTALL_PREFIX=/opt/lxqt \
--DCMAKE_INSTALL_LIBDIR=lib       \
+cmake -DCMAKE_BUILD_TYPE=Release          \
+      -DCMAKE_INSTALL_PREFIX=$LXQT_PREFIX \
+      -DCMAKE_INSTALL_LIBDIR=lib          \
       ..       &amp;&amp;
 
 make</userinput></screen>
@@ -129,7 +129,7 @@
           liblxqtmount.so
         </seg>
         <seg>
-/opt/lxqt/{include,lib/cmake}/lxqtmount
+          $LXQT_PREFIX/{include,lib/cmake}/lxqtmount
         </seg>
       </seglistitem>
     </segmentedlist>

Index: lxqt/desktop/liblxqt.xml
===================================================================
--- lxqt/desktop/liblxqt.xml	(révision 16348)
+++ lxqt/desktop/liblxqt.xml	(révision 16349)
@@ -104,9 +104,9 @@
 mkdir -v build &amp;&amp;
 cd       build &amp;&amp;
 
-cmake -DCMAKE_BUILD_TYPE=Release       \
--DCMAKE_INSTALL_PREFIX=/opt/lxqt \
--DCMAKE_INSTALL_LIBDIR=lib       \
+cmake -DCMAKE_BUILD_TYPE=Release          \
+      -DCMAKE_INSTALL_PREFIX=$LXQT_PREFIX \
+      -DCMAKE_INSTALL_LIBDIR=lib          \
       ..       &amp;&amp;
 
 make</userinput></screen>
@@ -149,7 +149,7 @@
           liblxqt.so
         </seg>
         <seg>
-/opt/lxqt/{include,share{,/cmake}/lxqt}
+          $LXQT_PREFIX/{include,share{,/cmake}/lxqt}
         </seg>
       </seglistitem>
     </segmentedlist>

Index: lxqt/desktop/libqtxdg.xml
===================================================================
--- lxqt/desktop/libqtxdg.xml	(révision 16348)
+++ lxqt/desktop/libqtxdg.xml	(révision 16349)
@@ -101,9 +101,9 @@
 mkdir -v build &amp;&amp;
 cd       build &amp;&amp;
 
-cmake -DCMAKE_BUILD_TYPE=Release       \
--DCMAKE_INSTALL_PREFIX=/opt/lxqt \
--DCMAKE_INSTALL_LIBDIR=lib       \
+cmake -DCMAKE_BUILD_TYPE=Release          \
+      -DCMAKE_INSTALL_PREFIX=$LXQT_PREFIX \
+      -DCMAKE_INSTALL_LIBDIR=lib          \
       ..       &amp;&amp;
 
 make</userinput></screen>
@@ -136,7 +136,7 @@
           libQt5Xdg.so
         </seg>
         <seg>
-/opt/lxqt/{include,share}/qt5xdg
+          $LXQT_PREFIX/{include,share}/qt5xdg
         </seg>
       </seglistitem>
     </segmentedlist>

Index: lxqt/desktop/libsysstat.xml
===================================================================
--- lxqt/desktop/libsysstat.xml	(révision 16348)
+++ lxqt/desktop/libsysstat.xml	(révision 16349)
@@ -94,8 +94,8 @@
 <screen><userinput>mkdir -v build &amp;&amp;
 cd       build &amp;&amp;
 
-cmake -DCMAKE_BUILD_TYPE=Release       \
--DCMAKE_INSTALL_PREFIX=/opt/lxqt \
+cmake -DCMAKE_BUILD_TYPE=Release          \
+      -DCMAKE_INSTALL_PREFIX=$LXQT_PREFIX \
       ..       &amp;&amp;
 
 make</userinput></screen>
@@ -128,7 +128,7 @@
           libsysstat-qt5.so
         </seg>
         <seg>
-/opt/lxqt/{include,share/cmake}/sysstat-qt5
+          $LXQT_PREFIX/{include,share/cmake}/sysstat-qt5
         </seg>
       </seglistitem>
     </segmentedlist>

Index: lxqt/desktop/lxqt-about.xml
===================================================================
--- lxqt/desktop/lxqt-about.xml	(révision 16348)
+++ lxqt/desktop/lxqt-about.xml	(révision 16349)
@@ -93,8 +93,8 @@
 <screen><userinput>mkdir -v build &amp;&amp;
 cd       build &amp;&amp;
 
-cmake -DCMAKE_BUILD_TYPE=Release       \
--DCMAKE_INSTALL_PREFIX=/opt/lxqt \
+cmake -DCMAKE_BUILD_TYPE=Release          \
+      -DCMAKE_INSTALL_PREFIX=$LXQT_PREFIX \
       ..       &amp;&amp;
 
 make</userinput></screen>
@@ -127,7 +127,7 @@
           None
         </seg>
         <seg>
-/opt/lxqt/share/lxqt/lxqt-about
+          $LXQT_PREFIX/share/lxqt/lxqt-about
         </seg>
       </seglistitem>
     </segmentedlist>

Index: lxqt/desktop/lxqt-common.xml
===================================================================
--- lxqt/desktop/lxqt-common.xml	(révision 16348)
+++ lxqt/desktop/lxqt-common.xml	(révision 16349)
@@ -108,8 +108,8 @@
 <screen><userinput>mkdir -v build &amp;&amp;
 cd       build &amp;&amp;
 
-cmake -DCMAKE_BUILD_TYPE=Release       \
--DCMAKE_INSTALL_PREFIX=/opt/lxqt \
+cmake -DCMAKE_BUILD_TYPE=Release          \
+      -DCMAKE_INSTALL_PREFIX=$LXQT_PREFIX \
       ..       &amp;&amp;
 
 make</userinput></screen>
@@ -151,7 +151,7 @@
         </seg>
         <seg>
           /etc/xdg/pcmanfm-qt/lxqt and
-/opt/lxqt/share/{desktop-directories,lxqt/{graphics,openbox,themes}}
+          $LXQT_PREFIX/share/{desktop-directories,lxqt/{graphics,openbox,themes}}
         </seg>
       </seglistitem>
     </segmentedlist>

Index: lxqt/desktop/lxqt-config.xml
===================================================================
--- lxqt/desktop/lxqt-config.xml	(révision 16348)
+++ lxqt/desktop/lxqt-config.xml	(révision 16349)
@@ -95,8 +95,8 @@
 mkdir -v build &amp;&amp;
 cd       build &amp;&amp;
 
-cmake -DCMAKE_BUILD_TYPE=Release       \
--DCMAKE_INSTALL_PREFIX=/opt/lxqt \
+cmake -DCMAKE_BUILD_TYPE=Release          \
+      -DCMAKE_INSTALL_PREFIX=$LXQT_PREFIX \
       ..       &amp;&amp;
 
 make</userinput></screen>
@@ -139,7 +139,7 @@
           liblxqt-config-cursor.so
         </seg>
         <seg>
-/opt/lxqt/share/lxqt/translations/lxqt-config{,-appearance,-cursor,-file-associations,-input,-monitor}
+          $LXQT_PREFIX/share/lxqt/translations/lxqt-config{,-appearance,-cursor,-file-associations,-input,-monitor}
         </seg>
       </seglistitem>
     </segmentedlist>

Index: lxqt/desktop/lxqt-globalkeys.xml
===================================================================
--- lxqt/desktop/lxqt-globalkeys.xml	(révision 16348)
+++ lxqt/desktop/lxqt-globalkeys.xml	(révision 16349)
@@ -93,9 +93,9 @@
 <screen><userinput>mkdir -v build &amp;&amp;
 cd       build &amp;&amp;
 
-cmake -DCMAKE_BUILD_TYPE=Release       \
--DCMAKE_INSTALL_PREFIX=/opt/lxqt \
--DCMAKE_INSTALL_LIBDIR=lib       \
+cmake -DCMAKE_BUILD_TYPE=Release          \
+      -DCMAKE_INSTALL_PREFIX=$LXQT_PREFIX \
+      -DCMAKE_INSTALL_LIBDIR=lib          \
       ..       &amp;&amp;
 
 make</userinput></screen>
@@ -128,9 +128,9 @@
           liblxqt-globalkeys.so and liblxqt-globalkeys-ui.so
         </seg>
         <seg>
-/opt/lxqt/include/lxqt-globalkeys,
-/opt/lxqt/share/lxqt/translations/lxqt-config-globalkeyshortcuts and
-/opt/lxqt/lib/cmake/lxqt-globalkeys{,-ui}
+          $LXQT_PREFIX/include/lxqt-globalkeys,
+          $LXQT_PREFIX/share/lxqt/translations/lxqt-config-globalkeyshortcuts and
+          $LXQT_PREFIX/lib/cmake/lxqt-globalkeys{,-ui}
         </seg>
       </seglistitem>
     </segmentedlist>

Index: lxqt/desktop/lxqt-notificationd.xml
===================================================================
--- lxqt/desktop/lxqt-notificationd.xml	(révision 16348)
+++ lxqt/desktop/lxqt-notificationd.xml	(révision 16349)
@@ -101,8 +101,8 @@
 mkdir -v build &amp;&amp;
 cd       build &amp;&amp;
 
-cmake -DCMAKE_BUILD_TYPE=Release       \
--DCMAKE_INSTALL_PREFIX=/opt/lxqt \
+cmake -DCMAKE_BUILD_TYPE=Release          \
+      -DCMAKE_INSTALL_PREFIX=$LXQT_PREFIX \
       ..       &amp;&amp;
 
 make</userinput></screen>
@@ -149,7 +149,7 @@
           None
         </seg>
         <seg>
-/opt/lxqt/share/lxqt/translations/lxqt-{config-,}notificationd
+          $LXQT_PREFIX/share/lxqt/translations/lxqt-{config-,}notificationd
         </seg>
       </seglistitem>
     </segmentedlist>

Index: lxqt/desktop/lxqt-panel.xml
===================================================================
--- lxqt/desktop/lxqt-panel.xml	(révision 16348)
+++ lxqt/desktop/lxqt-panel.xml	(révision 16349)
@@ -127,9 +127,9 @@
 mkdir -v build &amp;&amp;
 cd       build &amp;&amp;
 
-cmake -DCMAKE_BUILD_TYPE=Release       \
--DCMAKE_INSTALL_PREFIX=/opt/lxqt \
--DCMAKE_INSTALL_LIBDIR=lib       \
+cmake -DCMAKE_BUILD_TYPE=Release          \
+      -DCMAKE_INSTALL_PREFIX=$LXQT_PREFIX \
+      -DCMAKE_INSTALL_LIBDIR=lib          \
       ..       &amp;&amp;
 
 make</userinput></screen>
@@ -168,12 +168,12 @@
           lxqt-panel
         </seg>
         <seg>
-several plugins under /opt/lxqt/lib/lxqt-panel
+          several plugins under $LXQT_PREFIX/lib/lxqt-panel
         </seg>
         <seg>
           /etc/xdg/lxqt,
-/opt/lxqt/share/lxqt/{,translations/}lxqt-panel and
-/opt/lxqt/lib/lxqt-panel
+          $LXQT_PREFIX/share/lxqt/{,translations/}lxqt-panel and
+          $LXQT_PREFIX/lib/lxqt-panel
         </seg>
       </seglistitem>
     </segmentedlist>

Index: lxqt/desktop/lxqt-policykit.xml
===================================================================
--- lxqt/desktop/lxqt-policykit.xml	(révision 16348)
+++ lxqt/desktop/lxqt-policykit.xml	(révision 16349)
@@ -102,8 +102,8 @@
 <screen><userinput>mkdir -v build &amp;&amp;
 cd       build &amp;&amp;
 
-cmake -DCMAKE_BUILD_TYPE=Release       \
--DCMAKE_INSTALL_PREFIX=/opt/lxqt \
+cmake -DCMAKE_BUILD_TYPE=Release          \
+      -DCMAKE_INSTALL_PREFIX=$LXQT_PREFIX \
       ..       &amp;&amp;
 
 make</userinput></screen>
@@ -136,7 +136,7 @@
           None
         </seg>
         <seg>
-/opt/lxqt/share/lxqt/translations/lxqt-policykit-agent
+          $LXQT_PREFIX/share/lxqt/translations/lxqt-policykit-agent
         </seg>
       </seglistitem>
     </segmentedlist>

Index: lxqt/desktop/lxqt-powermanagement.xml
===================================================================
--- lxqt/desktop/lxqt-powermanagement.xml	(révision 16348)
+++ lxqt/desktop/lxqt-powermanagement.xml	(révision 16349)
@@ -97,8 +97,8 @@
 <screen><userinput>mkdir -v build &amp;&amp;
 cd       build &amp;&amp;
 
-cmake -DCMAKE_BUILD_TYPE=Release       \
--DCMAKE_INSTALL_PREFIX=/opt/lxqt \
+cmake -DCMAKE_BUILD_TYPE=Release          \
+      -DCMAKE_INSTALL_PREFIX=$LXQT_PREFIX \
       ..       &amp;&amp;
 
 make</userinput></screen>
@@ -131,7 +131,7 @@
           None
         </seg>
         <seg>
-/opt/lxqt/share/lxqt/translations/lxqt-{config-,}powermanagement
+          $LXQT_PREFIX/share/lxqt/translations/lxqt-{config-,}powermanagement
         </seg>
       </seglistitem>
     </segmentedlist>

Index: lxqt/desktop/lxqt-qtplugin.xml
===================================================================
--- lxqt/desktop/lxqt-qtplugin.xml	(révision 16348)
+++ lxqt/desktop/lxqt-qtplugin.xml	(révision 16349)
@@ -94,8 +94,8 @@
 <screen><userinput>mkdir -v build &amp;&amp;
 cd       build &amp;&amp;
 
-cmake -DCMAKE_BUILD_TYPE=Release       \
--DCMAKE_INSTALL_PREFIX=/opt/lxqt \
+cmake -DCMAKE_BUILD_TYPE=Release          \
+      -DCMAKE_INSTALL_PREFIX=$LXQT_PREFIX \
       ..       &amp;&amp;
 
 make</userinput></screen>

Index: lxqt/desktop/lxqt-runner.xml
===================================================================
--- lxqt/desktop/lxqt-runner.xml	(révision 16348)
+++ lxqt/desktop/lxqt-runner.xml	(révision 16349)
@@ -98,8 +98,8 @@
 mkdir -v build &amp;&amp;
 cd       build &amp;&amp;
 
-cmake -DCMAKE_BUILD_TYPE=Release       \
--DCMAKE_INSTALL_PREFIX=/opt/lxqt \
+cmake -DCMAKE_BUILD_TYPE=Release          \
+      -DCMAKE_INSTALL_PREFIX=$LXQT_PREFIX \
       ..       &amp;&amp;
 
 make</userinput></screen>
@@ -153,7 +153,7 @@
           None
         </seg>
         <seg>
-/opt/lxqt/share/lxqt/{,translations/}lxqt-runner
+          $LXQT_PREFIX/share/lxqt/{,translations/}lxqt-runner
         </seg>
       </seglistitem>
     </segmentedlist>

Index: lxqt/desktop/lxqt-session.xml
===================================================================
--- lxqt/desktop/lxqt-session.xml	(révision 16348)
+++ lxqt/desktop/lxqt-session.xml	(révision 16349)
@@ -97,8 +97,8 @@
 mkdir -v build &amp;&amp;
 cd       build &amp;&amp;
 
-cmake -DCMAKE_BUILD_TYPE=Release       \
--DCMAKE_INSTALL_PREFIX=/opt/lxqt \
+cmake -DCMAKE_BUILD_TYPE=Release          \
+      -DCMAKE_INSTALL_PREFIX=$LXQT_PREFIX \
       ..       &amp;&amp;
 
 make</userinput></screen>
@@ -171,7 +171,7 @@
           None
         </seg>
         <seg>
-/opt/lxqt/share/lxqt/translations/lxqt{,-config}-session
+          $LXQT_PREFIX/share/lxqt/translations/lxqt{,-config}-session
         </seg>
       </seglistitem>
     </segmentedlist>

Index: lxqt/desktop/pcmanfm-qt.xml
===================================================================
--- lxqt/desktop/pcmanfm-qt.xml	(révision 16348)
+++ lxqt/desktop/pcmanfm-qt.xml	(révision 16349)
@@ -102,9 +102,9 @@
 <screen><userinput>mkdir -v build &amp;&amp;
 cd       build &amp;&amp;
 
-cmake -DCMAKE_BUILD_TYPE=Release       \
--DCMAKE_INSTALL_PREFIX=/opt/lxqt \
--DCMAKE_INSTALL_LIBDIR=lib       \
+cmake -DCMAKE_BUILD_TYPE=Release          \
+      -DCMAKE_INSTALL_PREFIX=$LXQT_PREFIX \
+      -DCMAKE_INSTALL_LIBDIR=lib          \
       ..       &amp;&amp;
 
 make</userinput></screen>
@@ -137,7 +137,7 @@
           libfm-qt5.so
         </seg>
         <seg>
-/opt/lxqt/include/libfm-qt and /opt/lxqt/share/{libfm-qt,pcmanfm-qt}
+          $LXQT_PREFIX/include/libfm-qt and $LXQT_PREFIX/lxqt/share/{libfm-qt,pcmanfm-qt}
         </seg>
       </seglistitem>
     </segmentedlist>

Index: lxqt/desktop/post-install.xml
===================================================================
--- lxqt/desktop/post-install.xml	(révision 16348)
+++ lxqt/desktop/post-install.xml	(révision 16349)
@@ -30,9 +30,9 @@
 
     <bridgehead renderas="sect4">Required</bridgehead>
     <para role="required">
-<xref linkend="openbox"/> (runtime - reputedly, it may be replaced by
-another WM, e.g.  <xref linkend="xfwm4"/>, but this has not been tested
-for BLFS)
+      <xref linkend="openbox"/> (runtime) - this may be replaced by
+      another WM, see the Configuring instructions in <xref
+      linkend="lxqt-session"/>.
     </para>
 
     <bridgehead renderas="sect4">Recommended</bridgehead>
@@ -58,9 +58,12 @@
       the <systemitem class="username">root</systemitem> user:
     </para>
 
-<screen role="root"><userinput>ln -svfn /opt/lxqt/share/lxqt /usr/share/lxqt &amp;&amp;
+<screen role="root"><userinput>test -n "$LXQT_PREFIX" || exit
+test $LXQT_PREFIX = /usr ||
+ln -svfn $LXQT_PREFIX/share/lxqt /usr/share/lxqt &amp;&amp;
 
-for i in /opt/lxqt/share/applications/*
+test $LXQT_PREFIX = /usr ||
+for i in $LXQT_PREFIX/share/applications/*
 do
   ln -svf $i /usr/share/applications/
 done

Index: lxqt/desktop/pre-install.xml
===================================================================
--- lxqt/desktop/pre-install.xml	(révision 16348)
+++ lxqt/desktop/pre-install.xml	(révision 16349)
@@ -15,13 +15,47 @@
 
   <title>LXQt Desktop Pre-Install Instructions</title>
 
+    <para>
+      LXQt can be installed in /usr or /opt/lxqt.
+    </para>
+  <sect2><title>Installing in /usr</title>
+    <para>
+      Installing in <filename class="directory">/usr</filename> creates
+      a simpler setup.  Run:</para>
+<screen><userinput>export LXQT_PREFIX=/usr</userinput></screen>
+    <para>
+      Either add that to your own <filename>.bash_profile</filename>
+      so that it will still be set if you build the packages over a
+      period of time, or else add it to the system profile as the
+      <systemitem class="username">root</systemitem> user:
+    </para>
+<screen role="root"><userinput>cat &gt;&gt; /etc/profile.d/lxqt.sh &lt;&lt; "EOF"
+<literal>
+# Begin LXQt addition
+export LXQT_PREFIX=/usr
+# End LXQt addition
+</literal>
+EOF</userinput></screen>
+    <para>
+      The rest of this page is for people who wish to use the alternative prefix.
+    </para>
+  </sect2>
   <sect2>
     <title>Installing in /opt/lxqt</title>
 
     <para>
-LXQt can be installed in /usr or /opt/lxqt.  The BLFS editors recommend
-the latter in the BLFS environment. The former has not been tested in
-BLFS.
+      Installing in <filename class="directory">/opt/lxqt</filename> may simplify
+      upgrading to a later version of LXQT.
     </para>
 
     <para>
@@ -31,10 +65,12 @@
 
 <screen role="root"><userinput>install -vdm755 /opt/lxqt/{bin,lib,share/man}</userinput></screen>
 
-<screen role="root"><userinput>cat &gt;&gt; /etc/profile.d/extrapaths.sh &lt;&lt; "EOF"
+<screen role="root"><userinput>cat &gt;&gt; /etc/profile.d/lxqt.sh &lt;&lt; "EOF"
 <literal>
 # Begin LXQt addition
 
+export LXQT_PREFIX=/opt/lxqt
 pathappend /opt/lxqt/bin           PATH
 pathappend /opt/lxqt/share/man/    MANPATH
 pathappend /opt/lxqt/lib/pkgconfig PKG_CONFIG_PATH
@@ -73,8 +109,9 @@
       <systemitem class="username">root</systemitem> user:
     </para>
 
-<screen role="root"><userinput>install -v -dm755                /opt/lxqt/share/icons &amp;&amp;
-ln -sfv /usr/share/icons/hicolor /opt/lxqt/share/icons</userinput></screen>
+<screen role="root"><userinput>source /etc/profile                                       &amp;&amp;
+install -v -dm755                $LXQT_PREFIX/share/icons &amp;&amp;
+ln -sfv /usr/share/icons/hicolor $LXQT_PREFIX/share/icons</userinput></screen>
 
 
     <tip>

