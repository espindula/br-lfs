Révision 16388

fichiers modifiés :
   general/prog/valgrind.xml

Log :
Fix Valgrind configure script so that it builds with glibc-2.2x, x>0

Le robot a traité 4 % du commit anglais
Index: general/prog/valgrind.xml
===================================================================
--- general/prog/valgrind.xml	(révision 16387)
+++ general/prog/valgrind.xml	(révision 16388)
@@ -37,7 +37,7 @@
       tools. 
     </para>
 
-&lfs77_checked; &gcc5_checked;
+    &lfs78_checked;
 
     <bridgehead renderas="sect3">Package Information</bridgehead>
     <itemizedlist spacing="compact">
@@ -73,7 +73,8 @@
       </listitem>
     </itemizedlist>
 
-<bridgehead renderas="sect3">Additional Downloads</bridgehead>
+<!-- Replaced by a sed
+   <bridgehead renderas="sect3">Additional Downloads</bridgehead>
     <itemizedlist spacing="compact">
       <listitem>
         <para>
@@ -83,7 +84,7 @@
         </para>
       </listitem>
     </itemizedlist>
+-->
     <bridgehead renderas="sect3">Valgrind Dependencies</bridgehead>
 
     <bridgehead renderas="sect4">Optional</bridgehead>
@@ -108,22 +109,23 @@
   <sect2 role="installation">
     <title>Installation of Valgrind</title>
 
+<!--
     <para>
       First apply the following patch for allowing the
       <command>configure</command> script to use glibc-2.21:
     </para>
 
 <screen><userinput>patch -Np1 -i ../valgrind-&valgrind-version;-glibc_2.21-1.patch</userinput></screen>
+-->
     <para>
       Install <application>Valgrind</application> by running the following
       commands:
     </para>
 
-<screen><userinput>sed -e 's#|3.\*#&amp;|4.\*#' \
--e 's/-mt//g'        \
--i configure         &amp;&amp;
+<screen><userinput>sed -e 's#|3.\*#&amp;|4.\*#'     \
+    -e 's/-mt//g'            \
+    -e 's/2\.20)/2.2[0-9])/' \
+    -i configure             &amp;&amp;
 sed -i 's|/doc/valgrind||' docs/Makefile.in &amp;&amp;
 
 ./configure --prefix=/usr \
@@ -155,8 +157,9 @@
     <para>
       <command>sed -e ... configure</command>: The first expression fixes an 
       issue that prevents Valgrind from compiling on systems with a linux-4.x 
-based kernel, and the second expression fixes the configure script to 
-find newer versions of Boost.
+      based kernel, the second expression fixes the configure script to
+      find newer versions of Boost, and the last one fixes an issue that
+      prevents compilation with glibc versions greater than 2.20.
     </para>
 
     <para>

