Révision 15607

fichiers ajoutés :
   general/prog/ojdk-conf.xml

fichiers modifiés :
   introduction/welcome/changelog.xml
   general/prog/java.xml
   general/prog/apache-ant.xml
   general/prog/junit.xml
   general/prog/openjdk.xml
   general/prog/prog.xml

Log :
Split JAVA configuration from the other pages, and rearrange order

Le robot a traité 39 % du commit anglais

ATTENTION : il faut relire les fichiers suivants qui sont ajoutés
Index: general/prog/apache-ant.xml
===================================================================
--- general/prog/apache-ant.xml	(révision 15606)
+++ general/prog/apache-ant.xml	(révision 15607)
@@ -207,14 +207,20 @@
       <title>Configuration Information</title>
 
       <para>Some packages will require <command>ant</command> to be in the
-search path and the <envar>$ANT_HOME</envar> environment variable
-defined. Satisfy these requirements by adding the following lines to
-<filename>/etc/profile</filename> or to individual user's
-<filename>~/.profile</filename> or <filename>~/.bashrc</filename> files:</para>
+      search path and the <envar>ANT_HOME</envar> environment variable
+      defined. Satisfy these requirements by issuing, as the <systemitem
+      class="username">root</systemitem> user:</para>
 
-<screen><literal>export PATH=$PATH:/opt/ant/bin
-export ANT_HOME=/opt/ant</literal></screen>
+<screen role="root"><userinput>cat &gt;&gt; /etc/profile.d/extrapaths.sh &lt;&lt; EOF
+<literal># Begin Apache-ant addition
+pathappend /opt/ant/bin
+export ANT_HOME=/opt/ant
+# End Apache-ant addition</literal>
+EOF</userinput></screen>
 
+      <para>The above instrutions assume you have configured your system as
+      described in <xref linkend="postlfs-config-profile"/>.</para>
     </sect3>
 
   </sect2>

Index: general/prog/java.xml
===================================================================
--- general/prog/java.xml	(révision 15606)
+++ general/prog/java.xml	(révision 15607)
@@ -136,6 +136,7 @@
 mv -v * /opt/OpenJDK-&openjdk-version;-bin         &amp;&amp;
 chown -R root:root /opt/OpenJDK-&openjdk-version;-bin</userinput></screen>
 
+<!--
     <para>Configure the temporary <application>OpenJDK</application>
     installation by issuing the following commands (note that if you logout
     and login back before having definitely configured
@@ -149,12 +150,27 @@
     class="directory">/etc/profile.d</filename> directory. Do not forget to
     logout and login back, or to source the profile file after
     modification.</para>
+-->
 
+    <para>
+      The binary version is now installed. You may create a symlink to that
+      version by issuing, as the <systemitem class="username">root</systemitem>
+      user:
+    </para>
 
-<para>The binary version is now installed. If you don't want to compile the
-sources, skip ahead to the <xref linkend='openjdk-config'/> section.
+<screen role="root"><userinput>ln -sf OpenJDK-&openjdk-version;-bin /opt/jdk</userinput></screen>
+    <para>
+      You may now proceed to <xref linkend="ojdk-conf"/>, where the
+      instructions assume that the above link exists.
+    </para>
+<!--
+If you don't want to compile the
+      sources, skip ahead to the <xref linkend='openjdk-config'/> section.
     Otherwise, continue to the <xref linkend='apache-ant'/>,
     <xref linkend='junit'/>, and <xref linkend='openjdk'/> sections.</para>
+-->
     
   </sect2>
 

Index: general/prog/junit.xml
===================================================================
--- general/prog/junit.xml	(révision 15606)
+++ general/prog/junit.xml	(révision 15607)
@@ -125,10 +125,11 @@
 cp -v hamcrest-&hamcrest-version;/hamcrest-core*.jar /usr/share/java/junit-&junit-version;</userinput></screen>
     
     <para>
-Finally, update the <envar>CLASSPATH</envar> variable:
+      If you have followed the instructions in <xref linkend="ojdk-conf"/>,
+      there is nothing more to do: the <envar>CLASSPATH</envar> variable
+      whould be automatically updated.
     </para>
 
-<screen><userinput>export CLASSPATH=$CLASSPATH:/usr/share/java/junit-&junit-version;</userinput></screen>
   </sect2>
 
   <sect2 role="content">

Index: general/prog/openjdk.xml
===================================================================
--- general/prog/openjdk.xml	(révision 15606)
+++ general/prog/openjdk.xml	(révision 15607)
@@ -453,6 +453,17 @@
 cp -R build/*/images/j2sdk-image /opt/OpenJDK-&openjdk-version; &amp;&amp;
 chown -R root:root /opt/OpenJDK-&openjdk-version;</userinput></screen>
 
+    <para>
+      There are now two <application>OpenJDK</application> SDKs installed
+      in <filename class="directory">/opt</filename>. You should decide on
+      which one you would like to use as the default. Normally, you would opt
+      for the just installed <application>OpenJDK</application>. If so, do
+      the following as the <systemitem class="username">root</systemitem>
+      user:
+    </para>
+<screen role="root"><userinput>ln -v -nsf OpenJDK-&openjdk-version; /opt/jdk</userinput></screen>
     <para>If desired, you may install a .desktop file corresponding to an entry
     in a desktop menu for <command>policytool</command>. First, you need to
     obtain an icon from <xref linkend="icedtea-web"/>:</para>
@@ -574,91 +585,18 @@
     <sect3>
       <title>Configuration Information</title>
 
-<para>
-There are now two <application>OpenJDK</application> SDKs installed
-in <filename class="directory">/opt</filename>. You should decide on
-which one you would like to use as the default. For example if you
-decide to use the precompiled <application>OpenJDK</application>, do
-the following as the <systemitem class="username">root</systemitem>
-user:
-</para>
+    <para>Normally, the JAVA environment has been configured after installing
+    the binary version, and can be used with the just built package as well.
+    Review <xref linkend="ojdk-conf"/> in case you want to modify
+    something.</para>
 
-<screen role="root"><userinput>ln -v -nsf OpenJDK-&openjdk-version;-bin /opt/jdk</userinput></screen>
-<para>The information below assumes your system is set up using the
-instructions found in <quote><xref
-linkend="postlfs-config-profile"/></quote>. You may need to extract the
-relevant information below and incorporate it into your system's startup
-files if your system is set up differently.</para>
-<para>Add the following <filename>openjdk.sh</filename> shell startup
-file to the <filename>/etc/profile.d</filename> directory with the
-following commands as the <systemitem class="username">root</systemitem>
-user:</para>
-<screen role="root"><userinput>cat &gt; /etc/profile.d/openjdk.sh &lt;&lt; "EOF"
-<literal># Begin /etc/profile.d/openjdk.sh
-# Set JAVA_HOME directory
-JAVA_HOME=/opt/jdk
-# Set ANT_HOME directory
-ANT_HOME=/opt/ant
-# Adjust PATH
-pathappend $JAVA_HOME/bin PATH
-pathappend $ANT_HOME/bin PATH
-# Auto Java CLASSPATH
-# Copy jar files to, or create symlinks in this directory
-AUTO_CLASSPATH_DIR=/usr/share/java
-pathprepend . CLASSPATH
-for dir in `find ${AUTO_CLASSPATH_DIR} -type d 2>/dev/null`; do
-pathappend $dir CLASSPATH
-done
-for jar in `find ${AUTO_CLASSPATH_DIR} -name "*.jar" 2>/dev/null`; do
-pathappend $jar CLASSPATH
-done
-export JAVA_HOME ANT_HOME CLASSPATH
-unset AUTO_CLASSPATH_DIR dir jar
-# End /etc/profile.d/openjdk.sh</literal>
-EOF</userinput></screen>
-<para>Finally, add the man pages to <application>man_db</application>'s
-configuration. As the <systemitem class="username">root</systemitem>
-user:</para>
-<screen role="root"><userinput>cat >> /etc/profile.d/extrapaths.sh &lt;&lt; "EOF" &amp;&amp;
-<literal># Begin Java addition
-pathappend /opt/jdk/man       MANPATH
-# End Java addition</literal>
-EOF
-cat &gt;&gt; /etc/man_db.conf &lt;&lt; "EOF" &amp;&amp;
-<literal># Begin Java addition
-MANDATORY_MANPATH     /opt/jdk/man
-MANPATH_MAP           /opt/jdk/bin     /opt/jdk/man
-MANDB_MAP             /opt/jdk/man     /var/cache/man/jdk
-# End Java addition</literal>
-EOF
-mkdir -p /var/cache/man
-mandb -c /opt/jdk/man</userinput></screen>
     <para>To test if the man pages are correctly installed, issue
     <command>source /etc/profile</command> and <command>man java</command> to
     display the respective man page.</para>
 
     </sect3>
 
-<sect3 id='ojdk-certs'>
+    <sect3 id='ojdk-certs' xreflabel='JRE Certificate Authorithy Certificates'>
       <title>Install or update the JRE Certificate Authority Certificates
       (cacerts) file</title>
 

Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 15606)
+++ introduction/welcome/changelog.xml	(révision 15607)
@@ -48,6 +48,11 @@
       <para>March 4th, 2015</para>
       <itemizedlist>
         <listitem>
+          <para>[pierre] - Split the JAVA environment configuration from
+          the other pages. Put the Apache-ant and JUnit pages
+          after OpenJDK, since they are not needed anymore for OpenJDK.</para>
+        </listitem>
+        <listitem>
           <para>[fernando] - Fix Xorg-Server-1.17.1: do not build
           systemd-logind support.</para>
         </listitem>

