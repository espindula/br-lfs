Révision 13698

fichiers modifiés :
   postlfs/filesystems/lvm2.xml
   packages.ent
   xsoft/graphweb/firefox.xml
   xsoft/other/thunderbird.xml
   gnome/applications/gucharmap.xml
   server/mail/exim.xml
   server/databases/postgresql.xml
   general/prog/php.xml
   general/prog/python2.xml
   general/prog/vala.xml
   introduction/welcome/changelog.xml

Log :
Fix vala-0.24.0 (for at least Gucharmap-3.12.1). Update to exim-4.83. Update to LVM2.2.02.108. Update to php-5.5.15. Update to postgresql-9.3.5. Thunderbird 31.0 and Python-2.7.8: Python2 needs to be built after openssl for this version of thunderbird.

Le robot a traité 33 % du commit anglais
Index: general/prog/php.xml
===================================================================
--- general/prog/php.xml	(révision 13697)
+++ general/prog/php.xml	(révision 13698)
@@ -175,8 +175,7 @@
     <para>Install <application>PHP</application> by
     running the following commands:</para>
 
-<screen><userinput>sed -i -e 's/2.6.5 2.7/&amp; 3.0/' configure &amp;&amp;
-./configure --prefix=/usr                \
+<screen><userinput>./configure --prefix=/usr                \
             --sysconfdir=/etc            \
             --localstatedir=/var         \
             --datadir=/usr/share/php     \
@@ -244,10 +243,6 @@
   <sect2 role="commands">
       <title>Command Explanations</title>
 
-<para><command>sed -i -e 's/2.6.5 2.7/&amp; 3.0/' configure</command>: Make
-<filename>configure</filename> accept the version 3.0 of 
-<application>Bison</application> as a valid version.</para>
-
       <para><parameter>--with-datadir=/usr/share/php</parameter>: This works
       around a bug in the build machinery, which installs some data to a
       wrong location.</para>

Index: general/prog/python2.xml
===================================================================
--- general/prog/python2.xml	(révision 13697)
+++ general/prog/python2.xml	(révision 13698)
@@ -133,9 +133,9 @@
       <para>
 	<!-- new for ff31.  Any reasonable version of openssl will do,
 	even old maintained versions, so do not xref openssl here -->
-If you are building <xref linkend="firefox"/> or
-<xref linkend="xulrunner"/>, you must install
-<application>openssl</application> before you build
+        If you are building <xref linkend="thunderbird"/>,
+        <xref linkend="firefox"/> or <xref linkend="xulrunner"/>,
+        you must install <application>openssl</application> before you build
         <application>Python 2</application>.
       </para>
     </note>

Index: general/prog/vala.xml
===================================================================
--- general/prog/vala.xml	(révision 13697)
+++ general/prog/vala.xml	(révision 13698)
@@ -73,6 +73,16 @@
       </listitem>
     </itemizedlist>
 
+    <bridgehead renderas="sect3">Additional Downloads</bridgehead>
+    <itemizedlist spacing="compact">
+      <listitem>
+        <para>
+          Required patch:
+          <ulink url="&patch-root;/vala-&vala-version;-upstream_fixes-1.patch"/>
+        </para>
+      </listitem>
+    </itemizedlist>
     <bridgehead renderas="sect3">Vala Dependencies</bridgehead>
 
     <bridgehead renderas="sect4">Required</bridgehead>
@@ -97,7 +107,8 @@
     <para>Install <application>Vala</application> by running the following
     commands:</para>
 
-<screen><userinput>./configure --prefix=/usr &amp;&amp;
+<screen><userinput>patch -Np1 -i ../vala-&vala-version;-upstream_fixes-1.patch &amp;&amp;
+./configure --prefix=/usr &amp;&amp;
 make</userinput></screen>
 
     <para>

Index: gnome/applications/gucharmap.xml
===================================================================
--- gnome/applications/gucharmap.xml	(révision 13697)
+++ gnome/applications/gucharmap.xml	(révision 13698)
@@ -109,9 +109,7 @@
       commands:
     </para>
 
-<!--<screen><userinput>./configure -prefix=/usr -enable-vala &amp;&amp;
-make</userinput></screen>-->
-<screen><userinput>./configure --prefix=/usr &amp;&amp;
+<screen><userinput>./configure -prefix=/usr --enable-vala &amp;&amp;
 make</userinput></screen>
 
     <para>

Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 13697)
+++ introduction/welcome/changelog.xml	(révision 13698)
@@ -48,6 +48,30 @@
       <para>July 27th, 2014</para>
       <itemizedlist>
         <listitem>
+          <para>[fernando] - Thunderbird 31.0 and Python-2.7.8: Python2 needs
+          to be built after openssl for this version of thunderbird.</para>
+        </listitem>
+        <listitem>
+          <para>[fernando] - Update to postgresql-9.3.5. Fixes
+          <ulink url="&blfs-ticket-root;5299">#5299</ulink>.</para>
+        </listitem>
+        <listitem>
+          <para>[fernando] - Update to php-5.5.15. Fixes
+          <ulink url="&blfs-ticket-root;5298">#5298</ulink>.</para>
+        </listitem>
+        <listitem>
+          <para>[fernando] - Update to LVM2.2.02.108. Fixes
+          <ulink url="&blfs-ticket-root;5297">#5297</ulink>.</para>
+        </listitem>
+        <listitem>
+          <para>[fernando] - Update to exim-4.83. Fixes
+          <ulink url="&blfs-ticket-root;5293">#5293</ulink>.</para>
+        </listitem>
+        <listitem>
+          <para>[fernando] - Fix vala-0.24.0 (for at least Gucharmap-3.12.1).
+          <ulink url="&blfs-ticket-root;5301">#5301</ulink>.</para>
+        </listitem>
+        <listitem>
           <para>[bdubbs] - Separate libvdpau-va-gl to its own section. Fixes
           <ulink url="&blfs-ticket-root;5290">#5290</ulink>.</para>
         </listitem>

Index: postlfs/filesystems/lvm2.xml
===================================================================
--- postlfs/filesystems/lvm2.xml	(révision 13697)
+++ postlfs/filesystems/lvm2.xml	(révision 13698)
@@ -190,14 +190,13 @@
           libdevmapper.so, liblvm2app.so and liblvm2cmd.so; optional:
           libdevmapper-event.so, libdevmapper-event-lvm2.so,
           libdevmapper-event-lvm2mirror.so, libdevmapper-event-lvm2snapshot.so,
-libdevmapper-event-lvm2raid.so, libdevmapper-event-lvm2thin.so
-and some under /lib/device-mapper
+          libdevmapper-event-lvm2raid.so, and libdevmapper-event-lvm2thin.so
         </seg>
         <seg>
           /etc/lvm and

Index: server/databases/postgresql.xml
===================================================================
--- server/databases/postgresql.xml	(révision 13697)
+++ server/databases/postgresql.xml	(révision 13698)
@@ -91,24 +91,14 @@
     <para>Install <application>PostgreSQL</application> with the
     following commands: </para>
 
+<!--sed -i -e 's@psql\\"@&amp; -h /tmp@' src/test/regress/pg_regress{,_main}.c &amp;&amp;
+sed -i -e 's@gres\\"@&amp; -k /tmp@' src/test/regress/pg_regress.c &amp;&amp;-->
 <screen><userinput>sed -i '/DEFAULT_PGSOCKET_DIR/s@/tmp@/run/postgresql@' src/include/pg_config_manual.h &amp;&amp;
-sed -i -e 's@psql\\"@&amp; -h /tmp@' src/test/regress/pg_regress{,_main}.c &amp;&amp;
-sed -i -e 's@gres\\"@&amp; -k /tmp@' src/test/regress/pg_regress.c &amp;&amp;
 ./configure --prefix=/usr          \
             --enable-thread-safety \
             --docdir=/usr/share/doc/postgresql-&postgresql-version; &amp;&amp;
 make</userinput></screen>
 
-<warning>
-<para>This package contains a known security hole that allows other
-users on the same machine to gain access to an operating system account
-while it is doing "make check": CVE-2014-0067. Until the fix is available,
-users are strongly advised not to run "make check" on machines where
-untrusted users have accounts. </para>
-</warning>
-<para>To test the results, issue: <command>make check</command>.</para>
     <para>There are a number of programs in the
     <filename class="directory">contrib/</filename> directory. If you are going
     to run this installation as a server and wish to build some of them, enter
@@ -126,18 +116,27 @@
 
 <screen role="nodump/"><userinput>make -C contrib/<replaceable>&lt;SUBDIR-NAME&gt;</replaceable> install</userinput></screen>
 
+    <warning>
+      <para>This package contains a known security hole that allows other
+      users on the same machine to gain access to an operating system account
+      while it is doing "make check": CVE-2014-0067. Tests must be run after
+      install, with postgresql server down, as unprivileged user.</para>
+    </warning>
+    <para>To test the results, issue: <command>make check</command>.</para>
     <para><emphasis>If you only intend to use <application>PostgreSQL</application>
     as a client to connect to a server on another machine, your installation is
     complete and you should not run the remaining commands.</emphasis></para>
 
     <!-- 'Upgrading' seems to only ever exist in the docs for *previous* version -->
-<note>
+ <!-- Obsolete: only if upgrading for versions prior to 9   <note>
       <para>If you are upgrading an existing system and are going to install
       the new files over the old ones, then you should back up your data, shut
       down the old server and follow the instructions in <ulink
@@ -178,9 +177,9 @@
     <para>
       <command>sed -i ...</command>: These seds change server socket location
       from <filename class="directory">/tmp</filename> to
-<filename class="directory">/run/postgresql</filename> and fix up the
+      <filename class="directory">/run/postgresql</filename><!-- and fix up the
       regression tests to use <filename class="directory">/tmp</filename> so
-that they can work reliably.
+      that they can work reliably-->.
     </para>
 
     <para><parameter>--docdir=/usr/share/doc/postgresql-&postgresql-version;</parameter>:
@@ -273,15 +272,16 @@
 
       <seglistitem>
         <seg>clusterdb, createdb, createlang, createuser, dropdb, droplang,
-dropuser, ecpg, initdb, pg_basebackup, pg_config, pg_controldata, pg_ctl,
-pg_dump, pg_dumpall, pg_isready, pg_receivexlog, pg_resetxlog, pg_restore, pltcl_delmod,
-pltcl_listmod, pltcl_loadmod, postgres, postmaster, psql,
-reindexdb, vacuumdb, and optionally (in contrib/) oid2name, pg_archivecleanup,
-pgbench, pg_standby, pg_test_fsync, pg_test_timing, pg_upgrade, pg_xlogdump,
-vacuumlo,</seg>
-<seg>libecpg.{so,a}, libecpg_compat.{so,a}, libpgport.a, libpgtypes.{so,a},
-libpq.{so,a}, various charset modules, and optionally programming language
-modules.</seg>
+        dropuser, ecpg, initdb, pg_basebackup, pg_config, pg_controldata,
+        pg_ctl, pg_dump, pg_dumpall, pg_isready, pg_receivexlog, pg_resetxlog,
+        pg_restore, pltcl_delmod, pltcl_listmod, pltcl_loadmod, postgres,
+        postmaster, psql, reindexdb, vacuumdb, and optionally (in contrib/)
+        oid2name, pg_archivecleanup, pgbench, pg_standby, pg_test_fsync,
+        pg_test_timing, pg_upgrade, pg_xlogdump, vacuumlo,
+        and many others</seg>
+        <seg>libecpg.{so,a}, libecpg_compat.{so,a}, libpgcommon.a, libpgport.a,
+        libpgtypes.{so,a}, libpq.{so,a}, various charset modules, and
+        optionally programming language modules under /usr/lib/postgresql</seg>
         <seg>/srv/pgsql, /usr/include/libpq, /usr/include/postgresql,
         /usr/lib/postgresql, /usr/share/doc/postgresql-&postgresql-version;, and
         /usr/share/postgresql</seg>

Index: server/mail/exim.xml
===================================================================
--- server/mail/exim.xml	(révision 13697)
+++ server/mail/exim.xml	(révision 13698)
@@ -312,10 +312,10 @@
       <segtitle>Installed Directories</segtitle>
 
       <seglistitem>
-<seg>exicyclog, exigrep, exim, exim-4.82_1-5b7a7c0-XX-3,
-exim_checkaccess, exim_dbmbuild, exim_dumpdb, exim_fixdb, exim_lock,
-exim_tidydb, eximstats, exinext, exipick, exiqgrep, exiqsumm, exiwhat,
-and optionally, eximon, eximon.bin, and sendmail (symlink)</seg>
+        <seg>exicyclog, exigrep, exim, exim-4.83-3, exim_checkaccess,
+        exim_dbmbuild, exim_dumpdb, exim_fixdb, exim_lock, exim_tidydb,
+        eximstats, exinext, exipick, exiqgrep, exiqsumm, exiwhat, and
+        optionally, eximon, eximon.bin, and sendmail (symlink)</seg>
         <seg>None</seg>
         <seg>/usr/share/doc/exim-&exim-version; and /var/spool/exim</seg>
       </seglistitem>

Index: xsoft/other/thunderbird.xml
===================================================================
--- xsoft/other/thunderbird.xml	(révision 13697)
+++ xsoft/other/thunderbird.xml	(révision 13698)
@@ -103,6 +103,23 @@
       </para>
     </note>
 
+    <note>
+      <para>
+        With <application>Thunderbird-31.0</application> and later versions, you
+        must have installed <application>Openssl</application> before
+        <application>Python 2</application>, or the build system will quickly
+        fail with output including "ImportError: cannot import name
+        HTTPSHandler". If you are in any doubt about this (e.g. upgrading
+        from an older version of Thunderbird), check if
+        <filename>/usr/lib/python2.7/lib-dynload/_ssl.so</filename> exists.
+        If it does not, reinstall <xref linkend="python2"/> (after
+        installing <xref linkend="openssl"/>  - the latest version of any
+        <emphasis>currently maintained</emphasis> version of Openssl should
+        be satisfactory if already installed - if that package has not already
+        been installed).
+      </para>
+    </note>
     <bridgehead renderas="sect4">Optional</bridgehead>
     <para role="optional">
       <xref linkend="curl"/>,

