Révision 12794

fichiers modifiés :
   introduction/welcome/changelog.xml
   general.ent
   xsoft/office/libreoffice.xml

Log :
Set an environment variable for libreoffice installation prefix.

Le robot a traité 14 % du commit anglais
Index: introduction/welcome/changelog.xml
===================================================================
--- introduction/welcome/changelog.xml	(révision 12793)
+++ introduction/welcome/changelog.xml	(révision 12794)
@@ -45,6 +45,16 @@
 -->
 
     <listitem>
+      <para>February 27th, 2014</para>
+      <itemizedlist>
+        <listitem>
+          <para>[igor] - Set an environment variable for libreoffice installation
+          prefix.  Fixes <ulink url="&blfs-ticket-root;4725">#4725</ulink>.</para>
+        </listitem>
+      </itemizedlist>
+    </listitem>
+    <listitem>
       <para>February 26th, 2014</para>
       <itemizedlist>
         <listitem>

Index: xsoft/office/libreoffice.xml
===================================================================
--- xsoft/office/libreoffice.xml	(révision 12793)
+++ xsoft/office/libreoffice.xml	(révision 12794)
@@ -292,19 +292,27 @@
     </note>
 
     <para>
-In the rest of the page, locales "en-US" and "pt-BR" are examples; the
-user will change them to suit his needs - you might want to read the
-"Command Explanations", further below, before proceeding. Due to the
-large size of the package, the user may prefer to install in
+      In the rest of the page, locales "en-US" and "pt-BR" are examples; you
+      can change them to suit your needs - you might want to read the
+      "Command Explanations", further below, before proceeding.
+    </para>
+    
+    <para>
+      Due to the large size of the package, you may prefer to install it in
       <filename class="directory">/opt</filename>, instead of
       <filename class="directory">/usr</filename>. Depending on your choice,
       replace <replaceable>&lt;PREFIX&gt;</replaceable> by
       <filename class="directory">/usr</filename> or by
-<filename class="directory">/opt/libreoffice-&libreoffice-dlversion;</filename>
-in the rest of the page. Prepare <application>LibreOffice</application>
-for compilation by running the following commands:
+      <filename class="directory">/opt/libreoffice-&libreoffice-dlversion;</filename>:
     </para>
 
+<screen><userinput>export LO_PREFIX=<replaceable>&lt;PREFIX&gt;</replaceable></userinput></screen>
+    
+    <para>
+      Prepare <application>LibreOffice</application> for compilation by running
+      the following commands:
+    </para>
 <screen><userinput>sed -e "/gzip -f/d"   \
     -e "s|.1.gz|.1|g" \
     -i bin/distro-install-desktop-integration        &amp;&amp;
@@ -316,7 +324,7 @@
     -e "/tar -x/s/lo_src_dir/start_dir/"           \
     -i bin/unpack-sources                          &amp;&amp;
 
-./autogen.sh --prefix=<replaceable>&lt;PREFIX&gt;</replaceable>           \
+./autogen.sh --prefix=$LO_PREFIX         \
              --sysconfdir=/etc           \
              --with-vendor="BLFS"        \
              --with-lang="en-US pt-BR"   \
@@ -369,9 +377,9 @@
     </para>
 
 <screen role="root"><userinput>make distro-pack-install                                  &amp;&amp;
-install -v -m755 -d <replaceable>&lt;PREFIX&gt;</replaceable>/share/appdata                &amp;&amp;
+install -v -m755 -d $LO_PREFIX/share/appdata                &amp;&amp;
 install -v -m644    sysui/desktop/appstream-appdata/*.xml \
-<replaceable>&lt;PREFIX&gt;</replaceable>/share/appdata</userinput></screen>
+                    $LO_PREFIX/share/appdata</userinput></screen>
 
     <para>
        If the dictionaries have been built, again as
@@ -379,17 +387,14 @@
     </para>
 
 <screen role="root"><userinput>chown -cR 0:0 dictionaries/                                                      &amp;&amp;
-mkdir -pv <replaceable>&lt;PREFIX&gt;</replaceable>/lib/libreoffice/share/extensions/dict-en                      &amp;&amp;
-cp -vR dictionaries/en/*    <replaceable>&lt;PREFIX&gt;</replaceable>/lib/libreoffice/share/extensions/dict-en    &amp;&amp;
-mkdir -pv <replaceable>&lt;PREFIX&gt;</replaceable>/lib/libreoffice/share/extensions/dict-pt-BR                   &amp;&amp;
-cp -vR dictionaries/pt_BR/* <replaceable>&lt;PREFIX&gt;</replaceable>/lib/libreoffice/share/extensions/dict-pt-BR</userinput></screen>
+mkdir -pv $LO_PREFIX/lib/libreoffice/share/extensions/dict-en                      &amp;&amp;
+cp -vR dictionaries/en/*    $LO_PREFIX/lib/libreoffice/share/extensions/dict-en    &amp;&amp;
+mkdir -pv $LO_PREFIX/lib/libreoffice/share/extensions/dict-pt-BR                   &amp;&amp;
+cp -vR dictionaries/pt_BR/* $LO_PREFIX/lib/libreoffice/share/extensions/dict-pt-BR</userinput></screen>
 
     <para>
-In the following, do not replace
-<filename class="directory">/usr</filename> by
-<filename class="directory">/opt/libreoffice-&libreoffice-dlversion;</filename>.
-If installed in <filename class="directory">/opt</filename> and the
-icons in the new items of the desktop menu are not properly displayed,
+       If installed in <filename class="directory">/opt/libreoffice-&libreoffice-dlversion;</filename>
+       and the icons in the new items of the desktop menu are not properly displayed,
        optionally run the following commands, as
        <systemitem class="username">root</systemitem> user (it may be necessary
        to logout the session, before the icons appear):
@@ -564,14 +569,14 @@
           libreoffice, lobase, localc, lodraw, loffice, lofromtemplate,
           loimpress, lomath, loweb, lowriter, soffice and unopkg;
           several programs under
-<userinput><replaceable>&lt;PREFIX&gt;</replaceable></userinput>/lib/libreoffice/program
+          $LO_PREFIX/lib/libreoffice/program
         </seg>
         <seg>
           several libraries under
-<userinput><replaceable>&lt;PREFIX&gt;</replaceable></userinput>/lib/libreoffice/{ure/lib,program}
+          $LO_PREFIX/lib/libreoffice/{ure/lib,program}
         </seg>
         <seg>
-<userinput><replaceable>&lt;PREFIX&gt;</replaceable></userinput>/lib/libreoffice
+          $LO_PREFIX/lib/libreoffice
         </seg>
       </seglistitem>
     </segmentedlist>

