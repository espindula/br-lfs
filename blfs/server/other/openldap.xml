<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY openldap-download-http " ">
  <!ENTITY openldap-download-ftp  "ftp://ftp.openldap.org/pub/OpenLDAP/openldap-release/openldap-&openldap-version;.tgz">
  <!ENTITY openldap-md5sum        "804c6cb5698db30b75ad0ff1c25baefd">
  <!ENTITY openldap-size          "5.2 Mio">
  <!ENTITY openldap-buildsize     "152 Mio">
  <!ENTITY openldap-time          "2.0 SBU et environ 35 minutes pour exécuter les tests (independant du CPU)">
]>

<sect1 id="openldap" xreflabel="OpenLDAP-&openldap-version;">
  <?dbhtml filename="openldap.html"?>

  <sect1info>
    <othername>$LastChangedBy&nbsp;: bdubbs $</othername>
    <date>$Date&nbsp;: 2012-05-27 23:22:46 +0200 (Sun, 27 May 2012) $</date>
  </sect1info>

  <title>OpenLDAP-&openldap-version;</title>

  <indexterm zone="openldap">
    <primary sortas="a-OpenLDAP">OpenLDAP</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à OpenLDAP</title>

    <para>Le paquet <application>OpenLDAP</application> fournit une implémentation
    libre de <foreignphrase>Lightweight Directory Access Protocol</foreignphrase>
    (protocole d'accès au répertoire).</para>

     &lfs71_checked;
     
     <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&openldap-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&openldap-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &openldap-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &openldap-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &openldap-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &openldap-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Correctif requis&nbsp;: <ulink
        url="&patch-root;/openldap-&openldap-version;-blfs-paths-1.patch"/></para>
        <para>Correctif requis&nbsp;: <ulink
        url="&patch-root;/openldap-&openldap-version;-symbol-versions-1.patch"/></para>
        <para>Correctif requis&nbsp;: <ulink
        url="&patch-root;/openldap-&openldap-version;-ntlm-1.patch"/></para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances d'OpenLDAP</bridgehead>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required"><xref linkend="db"/></para>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended"><xref linkend="cyrus-sasl"/> et
    <xref linkend="openssl"/></para>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
     <xref linkend="icu"/>,
      <xref linkend="mysql"/> ou
      <xref linkend="postgresql"/>,
      <ulink url="http://www.openslp.org/">OpenSLP</ulink>,
      <xref linkend="pth"/> et
      <xref linkend="unixodbc"/>
    </para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/openldap"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation d'OpenLDAP</title>

    <note>
      <para>Sans ce correctif, l'intégration du carnet d'adresse Exchange de <application>Evolution</application>
      utilise des liaisons simples avec
      les mots de passe en texte clair. Si vous voulez construire <application>Evolution Data Server</application>
      avec le support de <application>OpenLDAP</application>, appliquez ce correctif&nbsp;:</para>

<screen><userinput>patch -Np1 -i ../openldap-&openldap-version;-ntlm-1.patch</userinput></screen>
    </note>

    <note>
      <para>Si vous souhaitez installer seulement le client <command>ldap*</command>,
	  les man-pages correspondantes, les bibliothèques et fichiers d'entêtes (soit une
	  installation comme <quote>client-seul</quote>), taper la commande suivante  
	  <command>configure</command> au lieu des autres, et
      ensuite continuer avec les commandes restantes (pas de suite de test disponible):</para>

<screen><userinput>patch -Np1 -i ../openldap-&openldap-version;-blfs-paths-1.patch &amp;&amp;
patch -Np1 -i ../openldap-&openldap-version;-symbol-versions-1.patch &amp;&amp;
autoconf &amp;&amp;
./configure --prefix=/usr \
            --sysconfdir=/etc \
	    --enable-dynamic \
            --disable-debug \
            --disable-slapd</userinput></screen>
    </note>

    <para>Installez <application>OpenLDAP</application> en
    lançant les commandes suivantes&nbsp;:</para>

<screen><userinput>patch -Np1 -i ../openldap-&openldap-version;-blfs-paths-1.patch &amp;&amp;
patch -Np1 -i ../openldap-&openldap-version;-symbol-versions-1.patch &amp;&amp;
autoconf &amp;&amp;
./configure --prefix=/usr \
            --libexecdir=/usr/sbin \
            --sysconfdir=/etc \
            --localstatedir=/var \
            --libexecdir=/usr/lib \
            --disable-static \
            --disable-debug \
            --enable-dynamic \
            --enable-crypt \
            --enable-modules \
            --enable-rlookups \
            --enable-backends=mod \
            --enable-overlays=mod \
            --disable-ndb \
            --disable-sql &amp;&amp;
make depend &amp;&amp;
make</userinput></screen>

    <para>Pour tester les résultats, lancez&nbsp;: <command>make test</command>. 
    Si vous avez activé <application>tcp_wrappers</application>, assurez-vous
    d'ajouter 127.0.0.1 à la ligne <parameter>slapd</parameter> du fichier
    <filename>/etc/hosts.allow</filename> si vous avez un fichier
    <filename>/etc/hosts.deny</filename> restrictif.</para>

    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>make install &amp;&amp;

install -v -m755 -d /usr/share/doc/openldap-&openldap-version;/{drafts,guide,rfc} &amp;&amp;
install -v -m644    doc/drafts/* \
                    /usr/share/doc/openldap-&openldap-version;/drafts &amp;&amp;
install -v -m644    doc/rfc/* \
                    /usr/share/doc/openldap-&openldap-version;/rfc &amp;&amp;
cp -v -R            doc/guide/* \
                    /usr/share/doc/openldap-&openldap-version;/guide</userinput></screen>
 
  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
    href="../../xincludes/static-libraries.xml"/>

    <para><option>--disable-debug</option>&nbsp;: Ce paramètre désactive le code de
    déboguage dans <application>OpenLDAP</application>.</para>

    <para><option>--enable-dynamic</option>&nbsp;: Ce paramètre oblige les
    bibliothèques <application>OpenLDAP</application> à se lier dynamiquement 
    aux programmes de l'exécutable.</para>

    <para><option>--enable-crypt</option>&nbsp;: Ce paramètre active les mots de
    passe crypt(3).</para>

    <para><option>--enable-modules</option>&nbsp;: Ce paramètre active les support
    du modules dynamique.</para>

    <para><option>--enable-rlookups</option>&nbsp;: Ce paramètre active
    les recherches inversées des noms d'hôte du client.</para>

    <para><option>--enable-backends</option>&nbsp;: Ce paramètre active
    toutes les fondations disponibles.</para>

    <para><option>--enable-overlays</option>&nbsp;: Ce paramètre active
    toutes les couches disponibles.</para>

    <para><option>--disable-ndb</option>&nbsp;: Ce paramètre désactive
    le serveur de Cluster <application>MySQL</application> NDB qui cause un échec de configuration si
    MySQL est présent.</para>

    <para><option>--disable-sql</option>&nbsp;: Ce paramètre désactive
    explicitement le terminal sql. Ne mettez pas ce paramètre si un serveur SQL
    est installé et que vous l'utilisez.</para>

    <para><option>--enable-spasswd</option>&nbsp;: Ce paramètre active la vérification
    des mots de passe <application>SASL</application>.</para>

    <para><option>--enable-slp</option>&nbsp;: Ce paramètre active le support
    SLPv2. Utilisez ce paramètre si vous avez installé
    <ulink url="http://www.openslp.org/">OpenSLP</ulink>.</para>

    <note>
      <para>Vous pouvez lancer <command>./configure --help</command> pour
      voir s'il y a d'autres paramètres que vous pouvez passer à la commande 
      <command>configure</command> pour activer d'autres options ou d'autres
      paquets de dépendance.</para>
    </note>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de OpenLDAP</title>

    <sect3 id="openldap-config">
      <title>Fichiers de configuration</title>

      <para><filename>/etc/openldap/*</filename></para>

      <indexterm zone="openldap openldap-config">
      <primary sortas="e-etc-openldap">/etc/openldap/*</primary>
      </indexterm>

    </sect3>

    <sect3>
      <title>Informations de configuration</title>

      <para>Configurer des serveurs <command>slapd</command> peut être complexe.
      Securiser le repertoire LDAP, spécialement si vous stocker des données privées
      comme une base de données de mots de passe, peut être également une tache compliquée.
      Vous devrez éditer le fichier <filename>/etc/openldap/slapd.conf</filename> et
      <filename>/etc/openldap/ldap.conf</filename> pour paramétrer
      <application>OpenLDAP</application> pour vos besoins particuliers.</para>

      <indexterm zone="openldap openldap-config">
        <primary
        sortas="e-etc-openldap-slapd.conf">/etc/openldap/slapd.conf</primary>
      </indexterm>

      <indexterm zone="openldap openldap-config">
        <primary
        sortas="e-etc-openldap-ldap.conf">/etc/openldap/ldap.conf</primary>
      </indexterm>

      <para>Parmi les ressources pour vous aider sur des sujets tels que le
      choix de configuration d'un répertoire, les définitions de la fondation et
      de la base de données, les paramètres du contrôle d'accès, l'exécution en
      tant qu'utilisateur différent de <systemitem class="username">root</systemitem>
      et le paramétrage d'un environnement <command>chroot</command>, il y a&nbsp;:</para>

      <itemizedlist spacing='compact'>
        <listitem>
          <para>La page de man <command>slapd</command></para>
        </listitem>
        <listitem>
          <para>La page de man <filename>slapd.conf</filename></para>
        </listitem>
        <listitem>
          <para>Le <ulink
          url="http://www.openldap.org/doc/admin23/">OpenLDAP 2.4
          Administrator's Guide</ulink> (guide de l'administrateur) (installé
          aussi localement dans
          <filename class='directory'>
          /usr/share/doc/openldap-&openldap-version;/guide/admin</filename>)</para>
        </listitem>
        <listitem>
          <para>Des documents qui se trouve sur
          <ulink url="http://www.openldap.org/pub/"/></para>
        </listitem>
      </itemizedlist>

    </sect3>

    <sect3>
      <title>Répertoire d'adresse Mozilla</title>

      <para>Par défaut le support LDAPv2 est désactivé dans le fichier
      <filename>slapd.conf</filename>. Une fois que la base de données est 
      correctement paramétrée et que <application>Mozilla</application> est
      configuré pour utiliser le répertoire, vous devez ajouter <option>allow bind_v2</option> 
      au fichier <filename>slapd.conf</filename>.</para>

    </sect3>

    <sect3 id="openldap-init">
      <title>Script de démarrage</title>

      <para>Pour automatiser le démarrage du serveur LDAP au lancement du système,
      installez le script de démarrage <filename>/etc/rc.d/init.d/openldap</filename>
      inclu dans le paquet <xref linkend="bootscripts"/> en utilisant
      la commande suivante&nbsp;:</para>

      <indexterm zone="openldap openldap-init">
        <primary sortas="f-openldap">openldap</primary>
      </indexterm>

<screen role="root"><userinput>make install-openldap</userinput></screen>

      <note>
        <para>Le script de démarrage lance le démon sans paramètre.
        Vous devrez modifier le script <filename>/etc/sysconfig/openldap</filename>
        pour inclure les paramètres nécessaires
        à votre configuration spécifiques. Voir les pages de man de
        <command>slapd</command> pour des informations de paramètre.</para>
      </note>

    </sect3>

    <sect3>
      <title>Tester la Configuration</title>

      <para>Démarrez le serveur LDAP en utilisant le script de démarrage&nbsp;:</para>

<screen role="root"><userinput>/etc/rc.d/init.d/openldap start</userinput></screen>

      <para>Vérifiez l'accès au serveur LDAP avec la commande suivante&nbsp;:</para>

<screen><userinput>ldapsearch -x -b '' -s base '(objectclass=*)' namingContexts</userinput></screen>

      <para>Le résultat attendu est&nbsp;:</para>

<screen><computeroutput># extended LDIF
#
# LDAPv3
# base &lt;&gt; with scope base
# filter: (objectclass=*)
# requesting: namingContexts
#

#
dn:
namingContexts: dc=my-domain,dc=com

# résultat de recherche
search: 2
result: 0 Success

# numResponses: 2
# numEntries: 1</computeroutput></screen>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>ldapadd, ldapcompare, ldapdelete, ldapexop, ldapmodify, ldapmodrdn,
        ldappasswd, ldapsearch, ldapurl, ldapwhoami, slapacl, slapadd, slapauth,
        slapcat, slapd, slapdn, slapindex, slappasswd, slapschema et slaptest</seg>
        <seg>liblber.so, libldap.so,a et libldap_r.so</seg>
        <seg>/etc/openldap, /usr/lib/openldap
        et /var/lib/openldap</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="ldapadd">
        <term><command>ldapadd</command></term>
        <listitem>
          <para>ouvre une connexion sur un serveur LDAP, sonde et ajoute les
          entrées.</para>
          <indexterm zone="openldap ldapadd">
            <primary sortas="b-ldapadd">ldapadd</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ldapcompare">
        <term><command>ldapcompare</command></term>
        <listitem>
          <para>ouvre une connexion sur un serveur LDAP, sonde et effectue une
          comparaison en utilisant des paramètres spécifiés.</para>
          <indexterm zone="openldap ldapcompare">
            <primary sortas="b-ldapcompare">ldapcompare</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ldapdelete">
        <term><command>ldapdelete</command></term>
        <listitem>
          <para>ouvre une connexion sur un serveur LDAP, sonde et supprime une ou
          plusieurs entrées.</para>
          <indexterm zone="openldap ldapdelete">
            <primary sortas="b-ldapdelete">ldapdelete</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ldapexop">
        <term><command>ldapexop</command></term>
        <listitem>
          <para>délivre les opérations étendues de LDAP spécifiées par
	    oid ou l'un des mots-clés spéciaux whoami,
          cancel, or refresh.</para>
          <indexterm zone="openldap ldapexop">
            <primary sortas="b-ldapexop">ldapexop</primary>
         </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ldapmodify">
        <term><command>ldapmodify</command></term>
        <listitem>
          <para>ouvre une connexion sur un serveur LDAP, sonde et modifie
          des entrées.</para>
          <indexterm zone="openldap ldapmodify">
            <primary sortas="b-ldapmodify">ldapmodify</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ldapmodrdn">
        <term><command>ldapmodrdn</command></term>
        <listitem>
          <para>ouvre une connexion sur un serveur LDAP, sonde et modifie
          tle RDN des entrées.</para>
          <indexterm zone="openldap ldapmodrdn">
            <primary sortas="b-ldapmodrdn">ldapmodrdn</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ldappasswd">
        <term><command>ldappasswd</command></term>
        <listitem>
          <para>est un outil utilisé pour paramétrer le mot de passe d'un utilisateur
          LDAP.</para>
          <indexterm zone="openldap ldappasswd">
            <primary sortas="b-ldappasswd">ldappasswd</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ldapsearch">
        <term><command>ldapsearch</command></term>
        <listitem>
          <para>ouvre une connexion sur un serveur LDAP, sonde et effectue
          une recherche en utilisant des paramètres spécifiés.</para>
          <indexterm zone="openldap ldapsearch">
            <primary sortas="b-ldapsearch">ldapsearch</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ldapurl">
        <term><command>ldapurl</command></term>
        <listitem>
          <para>est une commande qui permet soit de composer ou soit de décomposer
	    des URL LDAP.</para>
          <indexterm zone="openldap ldapurl">
            <primary sortas="b-ldapurl">ldapurl</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ldapwhoami">
        <term><command>ldapwhoami</command></term>
        <listitem>
          <para>ouvre une connexion sur un serveur LDAP, sonde et affiche
          des informations sur qui on est.</para>
          <indexterm zone="openldap ldapwhoami">
            <primary sortas="b-ldapwhoami">ldapwhoami</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="slapacl">
        <term><command>slapacl</command></term>
        <listitem>
          <para>est utilisé pour vérifier le comportement de slapd en vérifiant
	    l'accès aux répertoires de données par rapport aux directives
	    de la liste des contrôles d'accès définies dans sa configuration.</para>
          <indexterm zone="openldap slapacl">
            <primary sortas="b-slapacl">slapacl</primary>
         </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="slapadd">
        <term><command>slapadd</command></term>
        <listitem>
          <para>est utilisé pour ajouter des entrées spécifiées au format
          <foreignphrase>LDAP Directory Interchange Format</foreignphrase> (LDIF,
          format d'échange de répertoire LDAP) dans une base de données LDAP.</para>
          <indexterm zone="openldap slapadd">
            <primary sortas="b-slapadd">slapadd</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="slapauth">
        <term><command>slapauth</command></term>
        <listitem>
          <para>est utilisé pour vérifier le comportement de slapd
          dans le mappage des identités pour l'authentication et l'usage des autorisations,
	  tel que spécifié dans in slapd.conf.</para>
          <indexterm zone="openldap slapauth">
            <primary sortas="b-slapauth">slapauth</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="slapcat">
        <term><command>slapcat</command></term>
        <listitem>
          <para>est utilisé pour justifier une sortie LDAP LDIF basée sur
          le contenu d'une base de données slapd.</para>
          <indexterm zone="openldap slapcat">
            <primary sortas="b-slapcat">slapcat</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="slapd">
        <term><command>slapd</command></term>
        <listitem>
          <para>est le serveur LDAP autonome.</para>
          <indexterm zone="openldap slapd">
            <primary sortas="b-slapd">slapd</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="slapdn">
        <term><command>slapdn</command></term>
        <listitem>
          <para>vérifie la liste des DNS représentée sous forme de chaîne basée
          sur une syntaxe de schéma.</para>
          <indexterm zone="openldap slapdn">
            <primary sortas="b-slapdn">slapdn</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="slapindex">
        <term><command>slapindex</command></term>
        <listitem>
          <para>est utilisé pour régénérer des index slapd basés sur le contenu
          actuel d'une base de données.</para>
          <indexterm zone="openldap slapindex">
            <primary sortas="b-slapindex">slapindex</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="slappasswd">
        <term><command>slappasswd</command></term>
        <listitem>
          <para>est un outil de mot de passe de
          <application>OpenLDAP</application>.</para>
          <indexterm zone="openldap slappasswd">
            <primary sortas="b-slappasswd">slappasswd</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="slapschema">
        <term><command>slapschema</command></term>
        <listitem>
          <para>est utilisé pour vérifier le respect des schémas dans le contenu
	    de la base de données slapd.</para>
          <indexterm zone="openldap slapschema">
            <primary sortas="b-slapschema">slapschema</primary>
          </indexterm>
        </listitem>
      </varlistentry>


      <varlistentry id="slaptest">
        <term><command>slaptest</command></term>
        <listitem>
          <para>vérifie la sanité du fichier <filename>slapd.conf</filename>.</para>
          <indexterm zone="openldap slaptest">
            <primary sortas="b-slaptest">slaptest</primary>
          </indexterm>
        </listitem>
      </varlistentry>

       <varlistentry id="liblber">
        <term><filename class='libraryfile'>liblber.so</filename></term>
        <listitem>
          <para>est un ensemble de routines de règles d'encodage de base lightweight 
          Ces routines sont utilisées par les routines de la bibliothèque LDAP
          pour encoder et décoder des éléments du protocole LDAP en utilisant
          les règles de l'encodage de base (légèrement simplifié) définies par
          LDAP. Elles ne sont en général pas utilisées en principe par une
          application LDAP sauf dans la gestion des contrôles et des opérations
          étendues.</para>
          <indexterm zone="openldap liblber">
            <primary sortas="c-liblber">liblber.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libldap">
        <term><filename class='libraryfile'>libldap.so</filename></term>
        <listitem>
          <para>supporte les programmes LDAP et offre des fonctionnalités pour
          d'autres programmes qui interagissent avec LDAP.</para>
          <indexterm zone="openldap libldap">
            <primary sortas="c-libldap">libldap.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libldap_r">
        <term><filename class='libraryfile'>libldap_r.so</filename></term>
        <listitem>
          <para>contient les fonctions exigées par des programmes LDAP pour
          produire des résultats à partir de requêtes LDAP.</para>
          <indexterm zone="openldap libldap_r">
            <primary sortas="c-libldap_r">libldap_r.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
