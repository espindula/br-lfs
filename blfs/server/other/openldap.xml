<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
   "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

<!ENTITY openldap-download-http "http://gd.tuwien.ac.at/infosys/network/OpenLDAP/openldap-release/openldap-&openldap-version;.tgz">
<!ENTITY openldap-download-ftp "ftp://ftp.openldap.org/pub/OpenLDAP/openldap-release/openldap-&openldap-version;.tgz">
<!ENTITY openldap-md5sum "bd45020a47061ea1c1e14e2f6204a0f9">
<!ENTITY openldap-size "2,5&nbsp;Mo">
<!ENTITY openldap-buildsize "67&nbsp;Mo">
<!ENTITY openldap-time "6,42&nbsp;SBU">
]>

<sect1 id="openldap" xreflabel="OpenLDAP-&openldap-version;">
<sect1info>
<othername>$LastChangedBy: randy $</othername>
<date>$Date: 2005-06-16 06:11:50 $</date>
</sect1info>
<?dbhtml filename="openldap.html"?>
<title><application>Open<acronym>LDAP</acronym></application>-&openldap-version;
</title>

<sect2>
<title>Introduction à <application>Open<acronym>LDAP</acronym></application>
</title>

<para>Le paquetage <application>Open<acronym>LDAP</acronym></application>
fournit une implémentation libre de <acronym>LDAP</acronym> (acronyme de
<foreignphrase>Lightweight Directory Access Protocol</foreignphrase>.</para>

<sect3><title>Informations sur le paquetage</title>
<itemizedlist spacing='compact'>
<listitem><para>Téléchargement (HTTP)&nbsp;: 
<ulink url="&openldap-download-http;"/></para></listitem>
<listitem><para>Téléchargement (FTP)&nbsp;: 
<ulink url="&openldap-download-ftp;"/></para></listitem>
<listitem><para>Téléchargement de la somme MD5&nbsp;: &openldap-md5sum;</para></listitem>
<listitem><para>Taille du téléchargement&nbsp;:&openldap-size;</para></listitem>
<listitem><para>Estimation de l'espace disque requis&nbsp;: 
&openldap-buildsize;</para></listitem>
<listitem><para>Estimation du temps de construction&nbsp;: 
&openldap-time;</para></listitem></itemizedlist>
</sect3>

<sect3><title>Dépendances de <application>Open<acronym>LDAP</acronym></application></title>
<sect4><title>Requis</title>
<para><xref linkend="db"/></para>
</sect4>

<sect4><title>Recommandé</title>
<para><xref linkend="cyrus-sasl"/> et <xref linkend="openssl"/></para>
</sect4>

<sect4><title>Optionnel</title>
<para><xref linkend="tcpwrappers"/>,
<xref linkend="gdbm"/>,
<ulink url="http://www.gnu.org/software/pth/">GNU Pth</ulink>, et
<xref linkend="heimdal"/> ou
<xref linkend="mitkrb"/></para>
</sect4>

</sect3>

</sect2>

<sect2>
<title>Installation de <application>Open<acronym>LDAP</acronym></application>
</title>

<para>Installez <application>Open<acronym>LDAP</acronym></application> en
lançant les commandes suivantes&nbsp;:</para>

<screen><userinput><command>./configure --prefix=/usr --libexecdir=/usr/sbin \
    --sysconfdir=/etc --localstatedir=/srv/ldap \
    --enable-ldbm --disable-debug &amp;&amp;
make depend &amp;&amp;
make &amp;&amp;
make test &amp;&amp;
make install &amp;&amp;
chmod 755 /usr/lib/libl*-2.2.so.7.0.13</command></userinput></screen>

</sect2>

<sect2>
<title>Explications des commandes</title>

<para><parameter>--libexecdir=/usr/sbin</parameter>&nbsp;: installe les
exécutables du serveur dans <filename class="directory">/usr/sbin</filename>
au lieu de <filename class="directory">/usr/libexec</filename>.</para>

<para><parameter>--sysconfdir=/etc</parameter>&nbsp;: configure le répertoire
du fichier de configuration pour éviter sa valeur par défaut,
<filename class="directory">/usr/etc</filename>.</para>

<para><parameter>--localstatedir=/srv/ldap</parameter>&nbsp;: configure le
répertoire de la base de donnée <acronym>LDAP</acronym>, des traces de réplication
et des données variables en exécution.</para>

<para><parameter>--enable-ldbm</parameter>&nbsp;: construit <command>slapd</command>
en utilisant comme base de données principale soit
<application>Berkeley DB</application> soit
<application><acronym>GNU</acronym> Database Manager</application>.</para> 

<para><parameter>--disable-debug</parameter>&nbsp;: désactive le code de
débogage.</para>

<para><command>make test</command>&nbsp;: valide la construction du paquetage.
Si vous avez activé <application>tcp_wrappers</application>, assurez-vous
d'ajouter 127.0.0.1 sur la ligne <parameter>slapd</parameter> dans le fichier
<filename>/etc/hosts.allow</filename> si vous avez un fichier
<filename>/etc/hosts.deny</filename> restrictif.</para>

<para><command>chmod 755 /usr/lib/libl*-2.2.so.7.0.10</command>&nbsp;: cette
commande ajoute le bit d'exécution aux bibliothèques partagées.</para>

</sect2>

<sect2>
<title>Configurer <application>Open<acronym>LDAP</acronym></application>
</title>

<sect3><title>Fichiers de configuration</title>
<para><filename>/etc/openldap/*</filename></para>
</sect3>

<sect3><title>Informations de configuration</title>
<para>Configurer les serveurs <command>slapd</command> et <command>slurpd</command>
peut être complexe. Sécuriser le répertoire <acronym>LDAP</acronym>, spécialement
si vous stockez des données non publiques comme des bases de données de mots de
passe, peut aussi être un défi. Vous aurez besoin de modifier les fichiers
<filename>/etc/openldap/slapd.conf</filename> et
<filename>/etc/openldap/ldap.conf</filename> pour configurer
<application>Open<acronym>LDAP</acronym></application> selon vos besoins
particuliers.</para>

<para>Les ressources pour vous aider avec des thèmes comme le choix d'un
répertoire, la configuration, les définitions du serveur et de la base de
données, les paramètrages de contrôle d'accès, exécuter avec un utilisateur
autre que root et configurer un environnement <command>chroot</command>
incluent&nbsp;:
</para>

<itemizedlist spacing='compact'>
<listitem><para>la page man de <command>slapd</command></para></listitem>
<listitem><para>la page man de <filename>slapd.conf</filename></para></listitem>
<listitem><para>le <ulink 
url="http://www.openldap.org/doc/admin22/">Guide de l'administrateur
d'OpenLDAP 2.2</ulink></para></listitem>
<listitem><para>les documents situés sur
<ulink url="http://www.openldap.org/pub/"/></para></listitem>
</itemizedlist></sect3>

<sect3><title>Utiliser <application>GDBM</application></title>
<para>Pour utiliser <application>GDBM</application> comme moteur de bases de
données, l'entrée <quote>database</quote> dans
<filename>/etc/openldap/slapd.conf</filename> doit être changée de
<quote>bdb</quote> à <quote>ldbm</quote>. Vous pouvez utiliser les deux en
créant une section base de données supplémentaire dans
<filename>/etc/openldap/slapd.conf</filename>.
</para></sect3>

<sect3><title>Répertoire d'adresses <application>Mozilla</application></title>
<para>Par défaut, le support de acronym>LDAP</acronym>v2 est désactivé dans le
fichier <filename>slapd.conf</filename>. Une fois que la base de données est
correctement configurée et que <application>Mozilla</application> est configuré
pour utiliser le répertoire, vous devez ajouter <option>allow bind_v2</option>
au fichier <filename>slapd.conf</filename>.</para></sect3>

<sect3><title>Script de démarrage</title>
<para>Pour automatiser le lancement du serveur <acronym>LDAP</acronym> lors du
démarrage du système, installez le script de démarrage
<filename>/etc/rc.d/init.d/openldap</filename> inclus dans le paquetage
<xref linkend="intro-important-bootscripts"/> en utilisant la commande
suivante&nbsp;:</para>

<screen><userinput><command>make install-openldap1</command></userinput></screen>

<para><emphasis>Note&nbsp;:</emphasis> le script de démarrage que vous venez
d'installer lance seulement le démon <command>slapd</command>. Si vous souhaitez
aussi lancer le démon <command>slurpd</command> au démarrage, installez une
version modifiée du script en utilisant cette commande&nbsp;:</para>

<screen><userinput><command>make install-openldap2</command></userinput></screen>

<note><para>Le script de démarrage lance les démons sans paramètres. Vous aurez
besoin de modifier le script pour inclure les paramètres nécessaires à votre
configuration spécifique. Voir les pages man de <command>slapd</command> et
<command>slurpd</command> pour des informations sur les paramètres.</para></note>
</sect3>

<sect3><title>Tester la configuration</title>
<para>Exécutez le serveur <acronym>LDAP</acronym> en utilisant le script de
démarrage&nbsp;:</para>

<screen><userinput><command>/etc/rc.d/init.d/openldap start</command></userinput></screen>

<para>Vérifiez l'accès au serveur <acronym>LDAP</acronym> avec la commande
suivante&nbsp;:</para>

<screen><userinput><command>ldapsearch -x -b '' -s base '(objectclass=*)' namingContexts</command></userinput></screen>

<para>Le résultat attendu est&nbsp;:</para>
<screen><computeroutput># extended LDIF
#
# LDAPv3
# base &lt;&gt; with scope base
# filter: (objectclass=*)
# requesting: namingContexts 
#

#
dn:
namingContexts: dc=my-domain,dc=com

# search result
search: 2
result: 0 Success

# numResponses: 2
# numEntries: 1</computeroutput></screen>

</sect3>
</sect2>

<sect2>
<title>Contenu</title>

<para>Le paquetage Open<acronym>LDAP</acronym> contient
<command>ldapadd</command>,
<command>ldapcompare</command>,
<command>ldapdelete</command>,
<command>ldapmodify</command>,
<command>ldapmodrdn</command>,
<command>ldappasswd</command>,
<command>ldapsearch</command>,
<command>ldapwhoami</command>,
<command>slapadd</command>,
<command>slapcat</command>,
<command>slapd</command>,
<command>slapdn</command>,
<command>slapindex</command>,
<command>slappasswd</command>,
<command>slaptest</command>,
<command>slurpd</command>,
<filename class="libraryfile">liblber</filename> et les bibliothèques
<filename class="libraryfile">libldap</filename>.</para>

</sect2>

<sect2><title>Description</title>

<sect3><title>ldapadd</title>
<para><command>ldapadd</command> ouvre une connexion avec un serveur
<acronym>LDAP</acronym>, établie un lien et ajoute des entrées.</para></sect3>

<sect3><title>ldapcompare</title>
<para><command>ldapcompare</command> ouvre une connexion avec un serveur
<acronym>LDAP</acronym>, établie un lien et réalise une comparaison en utilisant
les paramètres spécifiés.</para></sect3>

<sect3><title>ldapdelete</title>
<para><command>ldapdelete</command> ouvre une connexion avec un serveur
<acronym>LDAP</acronym>, établie un lien et supprime une ou plusieurs entrées.</para>
</sect3>

<sect3><title>ldapmodify</title>
<para><command>ldapmodify</command> ouvre une connexion avec un serveur
<acronym>LDAP</acronym>, établie un lien et modifie des entrées.</para></sect3>

<sect3><title>ldapmodrdn</title>
<para><command>ldapmodrdn</command> ouvre une connexion avec un serveur
<acronym>LDAP</acronym>, établie un lien et modifie le
<acronym>RDN</acronym> d'entrées.</para></sect3>

<sect3><title>ldappasswd</title>
<para><command>ldappasswd</command> est un outil pour configurer le mot de passe
d'un utilisateur <acronym>LDAP</acronym>.</para></sect3>

<sect3><title>ldapsearch</title>
<para><command>ldapsearch</command> ouvre une connexion avec un serveur
<acronym>LDAP</acronym>, établie un lien et réalise une recherche en utilisant
les paramètres spécifiés.</para></sect3>

<sect3><title>ldapwhoami</title>
<para><command>ldapwhoami</command> ouvre une connexion avec un serveur
<acronym>LDAP</acronym>, établie un lien et affiche les informations whoami.</para>
</sect3>

<sect3><title>slapadd</title>
<para><command>slapadd</command> est utilisé pour ajouter des entrées spécifiées
dans le format d'échange <acronym>LDAP</acronym> (<acronym>LDIF</acronym>) 
dans la base de données <acronym>LDAP</acronym>.</para></sect3>

<sect3><title>slapcat</title>
<para><command>slapcat</command> est utilisé pour générer une sortie
<acronym>LDIF</acronym> du <acronym>LDAP</acronym>, basée sur le contenu
d'une base de données slapd.</para></sect3>

<sect3><title>slapd</title>
<para><command>slapd</command> est le serveur autonome <acronym>LDAP</acronym>.
</para></sect3>

<sect3><title>slapdn</title>
<para><command>slapdn</command> vérifie une liste de <acronym>DN</acronym>
représentés par des chaîne basées sur la syntaxe du schéma.</para></sect3>

<sect3><title>slapindex</title>
<para><command>slapindex</command> est utilisé pour regénérer les indices slapd
suivant le contenu actuel d'une base de données.</para></sect3>

<sect3><title>slappasswd</title>
<para><command>slappasswd</command> est un outil pour mot de passe avec
Open<acronym>LDAP</acronym>.</para></sect3>

<sect3><title>slaptest</title>
<para><command>slaptest</command> vérifie la cohérence du fichier
<filename>slapd.conf</filename>.</para></sect3>

<sect3><title>slurpd</title>
<para><command>slurpd</command> est le serveur de réplication autonome
<acronym>LDAP</acronym>.</para></sect3>

<sect3><title>liblber et libldap</title>
<para>Ces bibliothèques supportent les programmes <acronym>LDAP</acronym> et
fournissent des fonctionnalités aux autres programmes interagissant avec
<acronym>LDAP</acronym>.</para></sect3>

</sect2>

</sect1>
