<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  <!ENTITY unbound-download-http "http://www.unbound.net/downloads/unbound-&unbound-version;.tar.gz">
  <!ENTITY unbound-download-ftp  " ">
  <!ENTITY unbound-md5sum        "f85854baad15adc7ce8acefe6cda4cf8">
  <!ENTITY unbound-size          "4.6 Mo">
  <!ENTITY unbound-buildsize     "90 Mo (with HTML documentation)">
  <!ENTITY unbound-time          "0.5 SBU (Add 0.2 SBU for tests)">
]>
<sect1 id="unbound" xreflabel="Unbound-&unbound-version;">
  <?dbhtml filename="unbound.html"?>
  <sect1info>
    <othername>$LastChangedBy: igor $</othername>
    <date>$Date: 2013-07-21 21:06:50 +0200 (Sun, 21 Jul 2013) $</date>
  </sect1info>
  <title>Unbound-&unbound-version;</title>
  <indexterm zone="unbound">
    <primary sortas="a-Unbound">Unbound</primary>
  </indexterm>
  <sect2 role="package">
    <title>Introduction à Unbound</title>
    <para>
      <application>Unbound</application> est un solveur DNS de validation récursif et pour le cache.
      Il est conçu comme un ensemble de composants modulaires qui incorporent
      des fonctions modernes, comme la validation de sécurité embarqué (DNSSEC), Le protocole internet
      Version 6 (IPv6), et une bibliothèque d'API du solveur client comme une partie intégrale
      de l'architecture.
    </para>
    &lfs78_checked;
    <bridgehead renderas="sect3">Information sur le paquet </bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP) : <ulink url="&unbound-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP) : <ulink url="&unbound-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5 du téléchargement : &unbound-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement : &unbound-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis : &unbound-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction : &unbound-time;
        </para>
      </listitem>
    </itemizedlist>
    <bridgehead renderas="sect3">Dépendances de Unbound</bridgehead>
    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
      <xref linkend="openssl"/>
    </para>
    <bridgehead renderas="sect4">Facultative</bridgehead>
    <para role="optional">
      <xref linkend="libevent"/>,
      <xref linkend="python2"/> et
      <xref linkend="swig"/> (pour les liaisons Python)
      <xref linkend="doxygen"/> (pour la documentation html) et
      <ulink url="http://dnstap.info/">dnstap</ulink>
    </para>
    <para condition="html" role="usernotes">Notes utilisateur :
      <ulink url="&blfs-wiki;/unbound"/>
    </para>
  </sect2>
  <sect2 role="installation">
    <title>Installation de Unbound</title>
    <para>
      Il doit y avoir un utilisateur et un groupé dédié  pour prendre le contrôle
      du démon
      <command>unbound</command> après son démarrage. Tapez la commande suivante
      en tant qu'utilisateur <systemitem class="username">root</systemitem>:
    </para>
<screen role="root">
<userinput>groupadd -g 88 unbound &amp;&amp;
useradd -c "Unbound DNS resolver" -d /var/lib/unbound -u 88 \
        -g unbound -s /bin/false unbound</userinput>
</screen>
    <para>
      Installez <application>Unbound</application> en lançant les commandes suivantes :
       
    </para>
<screen>
<userinput>./configure --prefix=/usr     \
            --sysconfdir=/etc \
            --disable-static  \
            --with-pidfile=/run/unbound.pid &amp;&amp;
make</userinput>
</screen>
    <para>
      si vous avez le paquet <xref linkend="doxygen"/> installé et voulez construire
      la documentation html, lancez les commandes suivantes:
    </para>
<screen>
<userinput>make doc</userinput>
</screen>
    <para>Pour tester les résultats, tapez <command>make check</command>.</para>
    <para>
      Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem> :
    </para>
<screen role="root">
<userinput>make install &amp;&amp;
mv -v /usr/sbin/unbound-host /usr/bin/</userinput>
</screen>
    <para>
      Si vous avez construit la documentation html, installez la en lançant les commandes suivantes
      en tant qu'utilisateur <systemitem class="username">root</systemitem>:
    </para>
<screen role="root">
<userinput>install -v -m755 -d /usr/share/doc/unbound-&unbound-version; &amp;&amp;
install -v -m644 doc/html/* /usr/share/doc/unbound-&unbound-version;</userinput>
</screen>
  </sect2>
  <sect2 role="commands">
    <title>Explications des commandes</title>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/static-libraries.xml"/>
    <para>
      <option>--with-libevent</option> : Cette option active le support libevent permettant
      une utilisation d'une plage de port de sortie importante.
    </para>
    <para>
      <option>--with-pyunbound</option> : Cette option active la construction des liaisons Python.
    </para>
  </sect2>
  <sect2 role="configuration">
    <title>Configuration de Unbound</title>
    <sect3 id="unbound-config">
      <title>Config Files</title>
      <para><filename>/etc/unbound/unbound.conf</filename></para>
      <indexterm zone="unbound unbound-config">
        <primary sortas="e-etc-unbound-unbound.conf">/etc/unbound/unbound.conf</primary>
      </indexterm>
    </sect3>
    <sect3>
      <title>Configuration Information</title>
      <para>
        Dans la configuration par défaut, <command>unbound</command> se liera au
        localhost (adresse IP 127.0.0.1) et permettra les requetes récursives seulement depuis les clients
        locaux. Si vous voulez utiliser <command>unbound</command> pour la résolution DNS local,
         lancez les commandes suivantes en tant qu'utilisateur
        <systemitem class="username">root</systemitem> :
      </para>
<screen role="root">
<userinput>echo "nameserver 127.0.0.1" > /etc/resolv.conf</userinput>
</screen>
      <para>
        Si vous utilisez un client DHCP pour vous connecter au réseau,
        <filename>/etc/resolv.conf</filename> sera écrasé avec les valeurs 
        fournies par le serveur DHCP. Vous pouvez empêcher cela, par exemple dans
        <xref linkend="dhcp"/>, en lançant la commande suivante en tant qu'utilisateur
         <systemitem class="username">root</systemitem>:
      </para>
<screen role="root">
<userinput>sed -i '/request /i\supersede domain-name-servers 127.0.0.1;' \
       /etc/dhcp/dhclient.conf</userinput>
</screen>
      <para>
        Pour une configuration avancée, regardez le fichier <filename>/etc/unbound/unbound.conf</filename>
        et la documentation.
      </para>
      <para>
        Quand <application>Unbound</application> est installé, quelques paquets
        échoue à la construction si le fichier <filename>/etc/unbound/root.key</filename>
        n'est pas trouvé. Ce fichier est créé en lançant le script de démarrage (les instructions
        d'installation sont à la suite). Alternativement, il peut être créé en lançant la commant
        suivant en tant qu'utilisateur
        <systemitem class="username">root</systemitem> :
      </para>
<screen role="root">
<userinput>unbound-anchor</userinput>
</screen>
    </sect3>
    <sect3 id="unbound-init">
      <title>Script de démarrage</title>
      <para>Si vous voulez que le serveur <application>Unbound</application> démarre automatiquement
      quand le système est démarré, installez le script d'initialisation
      <filename>/etc/rc.d/init.d/unbound</filename> inclu dans le paquet
      <xref linkend="bootscripts"/>.</para>
      <indexterm zone="unbound unbound-init">
        <primary sortas="f-unbound">unbound</primary>
      </indexterm>
<screen role="root">
<userinput>make install-unbound</userinput>
</screen>
    </sect3>
  </sect2>
  <sect2 role="content">
    <title>Contenu</title>
    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèque installée</segtitle>
      <segtitle>Répertoires installés</segtitle>
      <seglistitem>
        <seg>
          unbound, unbound-anchor, unbound-checkconf, unbound-control,
          unbound-control-setup et unbound-host
        </seg>
        <seg>
          libunbound.so
        </seg>
        <seg>
          /etc/unbound et /usr/share/doc/unbound-&unbound-version;
        </seg>
      </seglistitem>
    </segmentedlist>
    <variablelist>
      <bridgehead renderas="sect3">Description courte</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      <varlistentry id="unbound-prog">
        <term><command>unbound</command></term>
        <listitem>
          <para>
            est le démon du solveur DNS.
          </para>
          <indexterm zone="unbound unbound-prog">
            <primary sortas="b-unbound">unbound</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="unbound-anchor">
        <term><command>unbound-anchor</command></term>
        <listitem>
          <para>
            réalise la configuration ou la mise à jour l'ancre de confiance de la racine pour la validation
            DNSSEC.
          </para>
          <indexterm zone="unbound unbound-anchor">
            <primary sortas="b-unbound-anchor">unbound-anchor</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="unbound-checkconf">
        <term><command>unbound-checkconf</command></term>
        <listitem>
          <para>
            vérifie la syntaxe du fichier de configuration <command>unbound</command>
            et les autres erreurs.
          </para>
          <indexterm zone="unbound unbound-checkconf">
            <primary sortas="b-unbound-checkconf">unbound-checkconf</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="unbound-control">
        <term><command>unbound-control</command></term>
        <listitem>
          <para>
            réalise l'administration distante du solveur DNS <command>unbound</command>.
          </para>
          <indexterm zone="unbound unbound-control">
            <primary sortas="b-unbound-control">unbound-control</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="unbound-control-setup">
        <term><command>unbound-control-setup</command></term>
        <listitem>
          <para>
            génère un certification auto-signé et les clès privées pour le serveur et le client.
          </para>
          <indexterm zone="unbound unbound-control-setup">
            <primary sortas="b-unbound-control-setup">unbound-control-setup</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="unbound-host">
        <term><command>unbound-host</command></term>
        <listitem>
          <para>
            est l'utilitaire de recherhce DNS similaire à <command>host</command> de
            <xref linkend="bind-utils"/>.
          </para>
          <indexterm zone="unbound unbound-host">
            <primary sortas="b-unbound-host">unbound-host</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libunbound">
        <term><filename class="libraryfile">libunbound.so</filename></term>
        <listitem>
          <para>
            fournit les fonctions de l'API de <application>Unbound</application> pour programmer.
          </para>
          <indexterm zone="unbound libunbound">
            <primary sortas="c-libunbound">libunbound.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect2>
</sect1>
