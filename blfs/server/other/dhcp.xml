<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  <!ENTITY dhcp-download-http "http://gd.tuwien.ac.at/infosys/servers/isc/dhcp/dhcp-&dhcp-version;.tar.gz">
  <!ENTITY dhcp-download-ftp "ftp://ftp.isc.org/isc/dhcp/dhcp-&dhcp-version;.tar.gz">
  <!ENTITY dhcp-md5sum "724bad21ad8b638abadd5fcc07df1a0f">
  <!ENTITY dhcp-size "876 Kio">
  <!ENTITY dhcp-buildsize "21 Mio">
  <!ENTITY dhcp-time "0.1 SBU">
]>

<sect1 id="dhcp" xreflabel="DHCP-&dhcp-version;">
  <?dbhtml filename="dhcp.html"?>

  <sect1info>
    <othername>$LastChangedBy: randy $</othername>
    <date>$Date: 2008-05-09 15:00:42 +0200 (ven, 09 mai 2008) $</date>
  </sect1info>

  <title>DHCP-&dhcp-version;</title>

  <indexterm zone="dhcp">
    <primary sortas="a-dhcp">Dhcp</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à DHCP</title>

    <para>Le paquet <application>DHCP</application> contient le client
    et le serveur DHCP. <command>dhclient</command> (le client) est utile pour
    connecter votre ordinateur à un réseau utilisant DHCP pour attribuer des 
    adresses réseau. <command>dhcpd</command> (le serveur) est utile pour
    affecter des adresses réseau sur votre réseau privé.</para>

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&dhcp-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&dhcp-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &dhcp-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &dhcp-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &dhcp-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &dhcp-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>
    <itemizedlist spacing='compact'>
      <listitem>
        <para>Correctif requis&nbsp;:
        <ulink url="&patch-root;/dhcp-&dhcp-version;-client_dns-1.patch"/></para>
      </listitem>
      <listitem>
        <para>Correctif facultatif&nbsp;:
        <ulink url="&patch-root;/dhcp-&dhcp-version;-iproute2-1.patch"/></para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de DHCP</bridgehead>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required"><xref linkend="net-tools"/> (you may omit
    <application>net-tools</application> en utilisant le correctif facultatif 
    pour utiliser <application>iproute2</application>.</para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/dhcp"/></para>

  </sect2>

  <sect2 role="kernel" id='dhcp-kernel'>
    <title>Configuration du noyau</title>

    <para>Vous devez avoir compilé en dur le support de Packet Socket (Device Drivers &rArr; Networking
    Support &rArr; Networking Options &rArr; Packet Socket).</para>

    <indexterm zone="dhcp dhcp-kernel">
      <primary sortas="d-dhcp">DHCP</primary>
    </indexterm>

  </sect2>

  <sect2 role="installation">
    <title>Installation de DHCP</title>

    <para>Corrigez d'abord un problème de régénération de permanente de
          /etc/resolv.conf, que le serveur DNS ait changé ou pas.</para>

<screen><userinput>patch -Np1 -i ../dhcp-&dhcp-version;-client_dns-1.patch</userinput></screen>

    <para>Si vous choisissez de ne pas installer net-tools, appliquez le
    correctif iproute2&nbsp;:</para>

<screen><userinput>patch -Np1 -i ../dhcp-&dhcp-version;-iproute2-1.patch</userinput></screen>

    <para>Installez <application>DHCP</application> en lançant
    les commandes suivantes&nbsp;:</para>

<screen><userinput>./configure &amp;&amp;
make</userinput></screen>

    <para>Ce paquet n'est pas fourni avec une suite de tests.</para>

    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>make LIBDIR=/usr/lib INCDIR=/usr/include install</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para><parameter>LIBDIR=/usr/lib INCDIR=/usr/include</parameter>&nbsp;: Cette
    commande installe la bibliothèque et les fichiers include dans
    <filename class="directory">/usr</filename> au lieu de
    <filename class="directory">/usr/local</filename>.</para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de DHCP</title>

    <sect3 id='dhcp-config'>
      <title>Fichiers de configuration</title>

      <para><filename>/etc/dhclient.conf</filename> et
      <filename>/etc/dhcpd.conf</filename></para>

      <indexterm zone="dhcp dhcp-config">
        <primary sortas="e-etc-dhclient.conf">/etc/dhclient.conf</primary>
      </indexterm>

      <indexterm zone="dhcp dhcp-config">
        <primary sortas="e-etc-dhcpd.conf">/etc/dhcpd.conf</primary>
      </indexterm>

    </sect3>

    <sect3 id='dhcp-init'>
      <title>Informations de configuration</title>

      <para>Vous pouvez trouver des informations sur la configuring du client
      DHCP au chapitre <xref linkend="basicnet-connect"/>.</para>

      <para>Remarquez que vous n'avez besoin du serveur DHCP que si voulez gérer 
      des adresses LAN sur votre réseau. Le client DHCP n'a pas besoin que ce
      script soit utilisé. Remarquez aussi que ce script est codé pour l'interface
      <emphasis role="strong">eth1</emphasis>, ce qui peut se changer selon votre
      configuration matérielle.</para>

      <para>Installez le script de démarrage <filename>/etc/rc.d/init.d/dhcp</filename>
      inclu dans le paquet <xref linkend="bootscripts"/>.</para>

      <indexterm zone="dhcp dhcp-init">
        <primary sortas="f-dhcp">dhcpd</primary>
      </indexterm>

<screen role="root"><userinput>make install-dhcp</userinput></screen>

      <para>Le fichier lease doit exister au démarrage. La commande suivante
      satisfera cette exigence&nbsp;:</para>

<screen role="root"><userinput>touch /var/state/dhcp/dhcpd.leases</userinput></screen>

      <para>Les commandes suivantes créeront un fichier de configuration de base
      d'un serveur DHCP. Ce sont plusieurs options que vous pourriez vouloir
      ajouter (des informations passées au client DHCP) et ils sont
      traités dans les pages de man de <filename>dhcp.conf</filename>.</para>

<screen role="root"><userinput>cat &gt; /etc/dhcpd.conf &lt;&lt; "EOF"
<literal>default-lease-time 72000;
max-lease-time 144000;
ddns-update-style ad-hoc;

subnet <replaceable>&lt;192.168.5.0&gt;</replaceable> netmask <replaceable>&lt;255.255.255.0&gt;</replaceable> {
  range <replaceable>&lt;192.168.5.10&gt; &lt;192.168.5.240&gt;</replaceable>;
  option broadcast-address <replaceable>&lt;192.168.5.255&gt;</replaceable>;
  option routers <replaceable>&lt;192.168.5.1&gt;</replaceable>;
}</literal>
EOF</userinput></screen>

      <para>Vous devriez modifier toutes les adresses pour correspondre à votre
      votre contexte.</para>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>dhcpd, dhcrelay, dhclient, dhclient-script, et omshell</seg>
        <seg>bdhcpctl.a, libomapi.a</seg>
        <seg>/var/state/dhcp, /usr/include/omapip, et /usr/include/isi-dhcp</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="dhclient">
        <term><command>dhclient</command></term>
        <listitem>
          <para>est l'implémentation du client DHCP.</para>
          <indexterm zone="dhcp dhclient">
            <primary sortas="b-dhclient">dhclient</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="dhcpd">
        <term><command>dhcpd</command></term>
        <listitem>
          <para>implémente les requêtes <foreignphrase>Dynamic Host Configuration
          Protocol</foreignphrase> (DHCP, protocole de configuration d'hôte
          dynamique) et <foreignphrase>Internet Bootstrap Protocol</foreignphrase> (BOOTP) 
          pour les adresses réseaux.</para>
          <indexterm zone="dhcp dhcpd">
            <primary sortas="b-dhcpd">dhcpd</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="dhcrelay">
        <term><command>dhcrelay</command></term>
        <listitem>
          <para>offre un moyen d'accepter des requêtes DHCP et BOOTP sur un 
          sous-réseau sans serveur DHCP et les relayer vers le serveur DHCP d'un
          autre sous-réseau.</para>
          <indexterm zone="dhcp dhcrelay">
            <primary sortas="b-dhcrelay">dhcrelay</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="omshell">
        <term><command>omshell</command></term>
        <listitem>
          <para>fournit une façon interactive de se connecter, de chercher et
          éventuellement de modifier, l'état du serveur ISC DHCP via OMAPI
          <foreignphrase>Object Management API</foreignphrase>, 2l'API de gestion
          des objets).</para>
          <indexterm zone="dhcp omshell">
            <primary sortas="b-omshell">omshell</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
