<?xml version="1.0" encoding="ISO-8859-1"?>
<sect2>
<title>Configurer <application>Leafnode</application></title>

<sect3><title>Fichiers de configuration</title>
<para><filename>/etc/news/config</filename>,
<filename>/etc/inetd.conf</filename> et
<filename>/etc/xinetd.conf</filename>.</para>

<para><application>Leafnode</application> peut être configuré pour utiliser
<command>inetd</command> en ajoutant une entrée dans le fichier
<filename>/etc/inetd.conf</filename> avec la commande suivante:</para>

<screen><userinput><command>echo "nntp stream tcp nowait news /usr/sbin/tcpd /usr/sbin/leafnode" \
&gt;&gt; /etc/inetd.conf</command></userinput></screen>

<para>Lancez la commande <command>killall -HUP inetd</command> pour relire
le fichier <filename>inetd.conf</filename> modifié.</para>

<para>Autrement, <application>Leafnode</application> peut être configuré pour
utiliser <command>xinetd</command> en ajoutant une entrée dans le fichier
<filename>/etc/xinetd.conf</filename> avec la commande suivante:</para>

<screen><userinput><command>cat &gt;&gt; /etc/xinetd.conf &lt;&lt; "EOF" </command>
        service nntp
        {
           flags           = NAMEINARGS NOLIBWRAP
           socket_type     = stream
           protocol        = tcp
           wait            = no
           user            = news
           server          = /usr/sbin/tcpd
           server_args     = /usr/sbin/leafnode
           instances       = 7
           per_source      = 3
        }
<command>EOF</command></userinput></screen>

<para>Lancez la commande <command>killall -HUP xinetd</command> pour relire
le fichier <filename>xinetd.conf</filename> modifié.</para>

<para>Le fichier <filename>/etc/news/config</filename> doit être édité pour
refléter le nom du fournisseur <acronym>NNTP</acronym>. Copiez le fichier de
configuration exemple sur <filename>/etc/news/config</filename> et sauvegardez
l'original pour référence:</para>

<screen><userinput><command>cp /etc/news/config.example /etc/news/config</command></userinput></screen>

<para>Modifiez l'entrée
<screen><userinput>server = </userinput></screen>
pour refléter votre fournisseur de news.</para>

<para>La variable d'environnement <envar>NNTPSERVER</envar> doit être initialisée
à 127.0.0.1 pour empêcher des clients news de lire les news du flux, ajoutez la
suite à <filename>/etc/profile</filename> ou <filename>$HOME/.bash_profile</filename>:
</para>

<screen><userinput><command>export NNTPSERVER=127.0.0.1</command></userinput></screen>

</sect3>

</sect2>

