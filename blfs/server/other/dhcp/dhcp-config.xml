<sect2>
<title>Configurer dhcp</title>

<sect3><title>Fichiers de configuration</title>
<para><userinput>/etc/dhclient.conf</userinput></para>
</sect3>

<sect3><title>Informations de configuration</title>

<para>Informations sur la configuration du client dhcp peut être trouvé dans le
Chapitre 14.</para>

<para>Notez que vous voulez seulement lancer le serveur dhcp si vous voulez
adresser les adresses LAN sur votre réseau. Le client dhcp n'a pas besoin de ce
script pour être utilisé. Notez aussi que ce script est codé pour l'interface
'eth1', qui a peut-être besoin d'être modifié pour votre configuration
matérielle. Avec ceci à l'esprit, le script init.d dhcp peut être créé en
utilisant les commandes suivantes.</para>

<para><screen><userinput>cat &gt; /etc/rc.d/init.d/dhcp &lt;&lt; "EOF"</userinput>
#!/bin/sh
# Début $rc_base/init.d/dhcp

# Basé sur le script sysklogd de LFS-3.1 et précédents.
# Réécrit par Gerard Beekmans  - gerard@linuxfromscratch.org

source /etc/sysconfig/rc
source $rc_functions

case "$1" in
        start)
                echo "Starting DHCP Server..."
                loadproc dhcpd -q eth1
                ;;

        stop)
                echo "Stopping DHCP Server..."
                killproc dhcpd
                ;;

        reload)
                echo "Reloading DHCP Server..."
                reloadproc dhcpd
                ;;

        restart)
                $0 stop
                sleep 1
                $0 start
                ;;

        status)
                statusproc dhcpd
                ;;

        *)
                echo "Usage: $0 {start|stop|reload|restart|status}"
                exit 1
                ;;
esac

# End $rc_base/init.d/dhcp
<userinput>EOF
chmod 755 /etc/rc.d/init.d/dhcp</userinput></screen></para>

<para>Le fichier lease doit exister au démarrage. Cette commande suivante
satisfera celà:</para>

<para><screen><userinput>touch /var/state/dhcp/dhcpd.leases</userinput></screen></para>

<para>Les commandes suivantes vont créer un fichier de configuration de base
pour un serveur dhcp. Il existe de nombreuses options que vous voudriez ajouter
(information qui est retournée au client dhcp) et celles-ci sont couvertes
dans les pages man dans <filename>dhcp.conf</filename>.</para>

<para><screen><userinput>cat &gt; /etc/dhcpd.conf &lt;&lt; "EOF"</userinput>
default-lease-time 72000;
max-lease-time 144000;
ddns-update-style ad-hoc;

subnet 192.168.5.0 netmask 255.255.255.0 {
  range 192.168.5.10 192.168.5.240;
  option broadcast-address 195.168.5.255;
  option routers 192.168.5.1;
}
<userinput>EOF</userinput></screen></para>

<para>Toutes les adresses doivent être modifiées suivant votre situation.</para>

</sect3>

</sect2>

