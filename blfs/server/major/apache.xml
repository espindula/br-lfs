<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
   "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY apache-download-http "http://www.apache.org/dist/httpd/httpd-&apache-version;.tar.bz2">
  <!ENTITY apache-download-ftp  "ftp://ftp.tux.org/pub/net/apache/dist/httpd/httpd-&apache-version;.tar.bz2">
  <!ENTITY apache-md5sum        "94f3a793fb1665365724943206cce23f">
  <!ENTITY apache-size          "4.8 MB">
  <!ENTITY apache-buildsize     "49.4 MB">
  <!ENTITY apache-time          "1.08 SBU">
]>

<sect1 id="apache" xreflabel="Apache-&apache-version;">
<sect1info>
<othername>$LastChangedBy: bdubbs $</othername>
<date>$Date: 2008-11-16 21:28:02 $</date>
</sect1info>
<?dbhtml filename="apache.html"?>
<title>Apache-&apache-version;</title>
<indexterm zone="apache">
<primary sortas="a-Apache">Apache</primary></indexterm>

<sect2>
<title>Introduction à <application>Apache</application></title>

<para>Le paquetage <application>Apache</application> contient un serveur
<acronym>HTTP</acronym> open-source. Il est utile pour créer des sites
internet locaux ou faire fonctionner de gros serveurs web.</para>

<sect3><title>Informations sur le paquetage</title>
<itemizedlist spacing='compact'>
<listitem><para>Téléchargement (HTTP)&nbsp;: 
<ulink url="&apache-download-http;"/></para></listitem>
<listitem><para>Téléchargement (FTP)&nbsp;: 
<ulink url="&apache-download-ftp;"/></para></listitem>
<listitem><para>Téléchargement de la somme MD5&nbsp;: &apache-md5sum;</para></listitem>
<listitem><para>Taille du téléchargement&nbsp;:&apache-size;</para></listitem>
<listitem><para>Estimation de l'espace disque requis&nbsp;: 
&apache-buildsize;</para></listitem>
<listitem><para>Estimation du temps de construction&nbsp;: &apache-time;</para></listitem>
</itemizedlist>
</sect3>

<sect3><title>Téléchargements supplémentaires</title>
<itemizedlist spacing='compact'>
<listitem><para>Correctif requis&nbsp;: <ulink 
url="&patch-root;/httpd-&apache-version;-config-1.patch"/></para></listitem>
</itemizedlist></sect3>

<sect3><title>Dépendances d'<application>Apache</application></title>
<sect4><title>Optionnel</title>
<para><xref linkend="db"/> ou <xref linkend="gdbm"/>, 
<xref linkend="openssl"/>, 
<xref linkend="openldap"/>, 
<xref linkend="expat"/> et
<xref linkend="doxygen"/></para>
</sect4>
</sect3>

</sect2>

<sect2>
<title>Installation de <application>Apache</application></title>

<para>Pour des raisons de sécurité, exécuter le serveur en tant qu'utilisateur
et groupe non privilégié est fortement encouragé. Créez les groupe et utilisateur
suivants en utilisant les commandes suivantes (en tant que root)&nbsp;:</para>

<screen><userinput><command>groupadd apache &amp;&amp;
useradd -c "Apache Server" -d /dev/null -g apache -s /bin/false apache</command></userinput></screen>

<para>Le correctif suivant définira le placement des répertoires de destination
et, parmi eux, le répertoire de construction sur
<filename class="directory">/usr/lib/apache/build</filename>. Ceci permet aux
modules ajoutés à <application>Apache</application> d'être configurés sans
erreurs. Appliquez le correctif&nbsp;:</para>

<screen><userinput><command>patch -Np1 -i ../httpd-&apache-version;-config-1.patch</command></userinput></screen>

<para>Construisez et installez <application>Apache</application> en exécutant
les commandes suivantes&nbsp;:</para>

<screen><userinput><command>./configure --enable-layout=FHS --enable-mods-shared=all &amp;&amp;
make</command></userinput></screen>

<para>Maintenant, en tant qu'utilisateur root&nbsp;:</para>

<screen><userinput role='root'><command>make install &amp;&amp;
chown root:root /usr/sbin/{apxs,apachectl,dbmmanage,envvars-std,envvars} \
    /usr/include/apache/* /usr/lib/apache/httpd.exp \
    /usr/share/man/man1/{dbmmanage,htdigest,htpasswd}.1 \
    /usr/share/man/man8/{ab,apachectl,apxs,httpd}.8 \
    /usr/share/man/man8/{logresolve,rotatelogs,suexec}.8 &amp;&amp;
chown -R apache:apache /srv/www</command></userinput></screen>

</sect2>

<sect2>
<title>Explications des commandes</title>

<para><option>--with-expat=/usr</option>&nbsp;: utilise la version
d'<application>expat</application> installé sur ce système. <emphasis>Si vous
avez installé <application>expat</application> et que vous ne voulez pas utiliser
ce commutateur, l'installation d'<application>Apache</application> pourrait
écraser certains fichiers provenant de l'installation
d'<application>expat</application>.</emphasis></para>

<para><parameter>--enable-mods-shared=all</parameter>&nbsp;: les modules
devraient être compilés et utilisés comme des objets dynamiques partagés
(<acronym>DSO</acronym>) de façon à ce qu'ils puissent être inclus et
exclus du serveur en utilisant les directives de configuration en exécution.
</para>

<para><option>--enable-ssl</option>&nbsp;: utilisez ce commutateur pour créer
le module <filename class="libraryfile">mod_ssl</filename> et pour activer le
support de <acronym>SSL</acronym>.</para>

<para><command>chown root:root ...</command>&nbsp;: cette commande change le
propriétaire de quelques fichiers installés, résultat de la construction du
paquetage en tant qu'utilisateur autre que root.</para>

<para><command>chown -R apache:apache /srv/www</command>&nbsp;: Par défaut, le
processus d'installation installe les fichiers (documentation, messages
d'erreur, icônes par défaut, etc.) avec comme propriétaire l'utilisateur qui a
extrait les fichiers de l'archive tar. Si vous voulez modifier le propriétaire
avec un autre utilisateur, vous devriez le faire maintenant. Cela nécessite
seulement que les répertoires des documents soient accessibles par le processus
<command>httpd</command> avec les droits (r-x) et les fichiers doivent être
lisibles (r--) par l'utilisateur apache.</para>

</sect2>

<sect2>
<title>Configurer <application>Apache</application></title>

<sect3 id="apache-config">
<title>Fichiers de configuration</title>

<para><filename>/etc/apache/*</filename></para>
<indexterm zone="apache apache-config">
<primary sortas="e-etc-apache">/etc/apache/*</primary></indexterm>
<indexterm zone="apache apache-config">
<primary sortas="e-etc-apache-httpd.conf">/etc/apache/httpd.conf</primary>
</indexterm>
</sect3>

<sect3>
<title>Informations de configuration</title>

<para>Le principal fichier de configuration est nommé <filename>httpd.conf</filename>.
Modifiez*le pour exécuter le serveur avec un utilisateur dédié&nbsp;:</para>

<screen><userinput><command>sed -i -e "s%User nobody%User apache%" \
       -e "s%^Group #-1%Group apache%" \
    /etc/apache/httpd.conf</command></userinput></screen>

<para>Voir <ulink url="http://httpd.apache.org/docs-2.0/configuring.html"/> pour
des instructions détaillées sur la personnalisation de votre serveur
<acronym>HTTP</acronym> <application>Apache</application>.</para>

<para>Il existe un problème avec le module <acronym>DSO</acronym> ISAPI, causé
par la compilation avec <application><acronym>GCC</acronym></application>-3.4.1.
Commentez le module dans le fichier de configuration avec la commande
suivante&nbsp;:</para>

<screen><userinput><command>sed -i -e "s/^LoadModule isapi_module/# &amp;/" \
    /etc/apache/httpd.conf</command></userinput></screen>

<para id="apache-init">Si vous voulez que le serveur
<application>Apache</application> s'exécute automatiquement lors du démarrage
du système, installez le script de démarrage
<filename>/etc/rc.d/init.d/apache</filename> inclus dans le paquetage
<xref linkend="intro-important-bootscripts"/>.</para>
<indexterm zone="apache apache-init"> 
<primary sortas="f-apache">apache</primary></indexterm>

<screen><userinput><command>make install-apache</command></userinput></screen>
</sect3>

</sect2>

<sect2>
<title>Contenu</title>

<segmentedlist>
<segtitle>Programmes installés</segtitle>
<segtitle>Bibliothèques installées</segtitle>
<segtitle>Répertoires installés</segtitle>
<seglistitem>
<seg>ab, apachectl, apr-config, apu-config, apxs, checkgid, dbmmanage, htdbm, 
htdigest, htpasswd, httpd, instdso.sh, logresolve and rotatelogs</seg>
<seg>libapr-0.[so,a], libaprutil-0.[so,a] et /usr/lib/apache/*.so</seg>
<seg>/etc/apache, /srv/www, /usr/include/apache, /usr/lib/apache et 
/var/log/apache</seg>
</seglistitem>
</segmentedlist>

<variablelist>
<bridgehead renderas="sect3">Descriptions courtes</bridgehead>
<?dbfo list-presentation="list"?>

<varlistentry id="ab">
<term><command>ab</command></term>
<listitem><para>est un outil pour réaliser des tests de performance de votre
serveur <acronym>HTTP</acronym> <application>Apache</application>.</para>
<indexterm zone="apache ab">
<primary sortas="b-ab">ab</primary></indexterm>
</listitem>
</varlistentry>

<varlistentry id="apachectl">
<term><command>apachectl</command></term>
<listitem><para>est une interface au serveur <acronym>HTTP</acronym>
<application>Apache</application>, conçu pour aider l'administrateur.
à contrôler les fonctions du démon httpd
d'<application>Apache</application>.</para>
<indexterm zone="apache apachectl">
<primary sortas="b-apachectl">apachectl</primary></indexterm>
</listitem>
</varlistentry>

<varlistentry id="apxs">
<term><command>apxs</command></term>
<listitem><para>est un outil pour construire et installer les modules
d'extension pour le serveur <acronym>HTTP</acronym>
d'<application>Apache</application>.</para>
<indexterm zone="apache apxs">
<primary sortas="b-apxs">apxs</primary></indexterm>
</listitem>
</varlistentry>

<varlistentry id="dbmanage">
<term><command>dbmanage</command></term>
<listitem><para>est utilisé pour créer et mettre à jour les fichiers au format
<filename>DBM</filename> utilisés pour stocker les noms d'utilisateurs et mots
de passe pour une authentification basique des utilisateurs
<acronym>HTTP</acronym>.</para>
<indexterm zone="apache dbmanage">
<primary sortas="b-dbmanage">dbmanage</primary></indexterm>
</listitem>
</varlistentry>

<varlistentry id="htdigest">
<term><command>htdigest</command></term>
<listitem><para>est utilisé pour créer et mettre à jour des fichiers utilisés
pour stocker les noms d'utilisateurs, les domaines et mots de passe pour une
authentification <quote>digest</quote> des utilisateurs
<acronym>HTTP</acronym>.</para>
<indexterm zone="apache htdigest">
<primary sortas="b-htdigest">htdigest</primary></indexterm>
</listitem>
</varlistentry>

<varlistentry id="htpasswd">
<term><command>htpasswd</command></term>
<listitem><para>est utilisé pour créer et mettre à jour des fichiers utilisés
pour stocker les noms d'utilisateurs et les mots de passe pour une
authentification basique des utilisateurs <acronym>HTTP</acronym>.
</para>
<indexterm zone="apache htpasswd">
<primary sortas="b-htpasswd">htpasswd</primary></indexterm>
</listitem>
</varlistentry>

<varlistentry id="httpd">
<term><command>httpd</command></term>
<listitem><para>est le programme serveur <acronym>HTTP</acronym>
<application>Apache</application>.</para>
<indexterm zone="apache httpd">
<primary sortas="b-httpd">httpd</primary></indexterm>
</listitem>
</varlistentry>

<varlistentry id="instdso.sh">
<term><command>instdso.sh</command></term>
<listitem><para>est un script qui installe les modules <acronym>DSO</acronym>
d'<application>Apache</application> .</para>
<indexterm zone="apache instdso.sh">
<primary sortas="b-instdso.sh">instdso.sh</primary></indexterm>
</listitem>
</varlistentry>

<varlistentry id="logresolve">
<term><command>logresolve</command></term>
<listitem><para>est un programme de traitements après-coup pour résoudre les
adresses IP dans les journaux de traces d'accès à
<application>Apache</application>.</para>
<indexterm zone="apache logresolve">
<primary sortas="b-logresolve">logresolve</primary></indexterm>
</listitem>
</varlistentry>

<varlistentry id="rotatelogs">
<term><command>rotatelogs</command></term>
<listitem><para>est un programme simple à utiliser en conjonction avec la
fonctionnalité de tubes de journaux de traces d'<application>Apache</application>.
</para>
<indexterm zone="apache rotatelogs">
<primary sortas="b-rotatelogs">rotatelogs</primary></indexterm>
</listitem>
</varlistentry>
</variablelist>

</sect2>

</sect1>
