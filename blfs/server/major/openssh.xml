<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
   "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

<!ENTITY openssh-download-http "http://sunsite.ualberta.ca/pub/OpenBSD/OpenSSH/portable/openssh-&openssh-version;.tar.gz">
<!ENTITY openssh-download-ftp "ftp://ftp.openbsd.org/pub/OpenBSD/OpenSSH/portable/openssh-&openssh-version;.tar.gz">
<!ENTITY openssh-md5sum "8e1774d0b52aff08f817f3987442a16e">
<!ENTITY openssh-size "854 KB">
<!ENTITY openssh-buildsize "13.3 MB">
<!ENTITY openssh-time "0.40 SBU">
]>

<sect1 id="openssh" xreflabel="OpenSSH-&openssh-version;">
<sect1info>
<othername>$LastChangedBy: randy $</othername>
<date>$Date: 2008-11-16 21:28:02 $</date>
</sect1info>
<?dbhtml filename="openssh.html"?>
<title>Open<acronym>SSH</acronym>-&openssh-version;</title>

<sect2>
<title>Introduction à 
<application>Open<acronym>SSH</acronym></application></title>

<para>Le paquetage <application>Open<acronym>SSH</acronym></application> contient
des clients <command>ssh</command> et le démon <command>sshd</command>. Ils sont
utiles pour crypter l'authentification et le trafic qui suit sur un réseau.</para>

<sect3><title>Informations sur le paquetage</title>
<itemizedlist spacing='compact'>
<listitem><para>Téléchargement (HTTP)&nbsp;: 
<ulink url="&openssh-download-http;"/></para></listitem>
<listitem><para>Téléchargement (FTP)&nbsp;: 
<ulink url="&openssh-download-ftp;"/></para></listitem>
<listitem><para>Téléchargement de la somme MD5&nbsp;: &openssh-md5sum;</para></listitem>
<listitem><para>Taille du téléchargement&nbsp;:&openssh-size;</para></listitem>
<listitem><para>Estimation de l'espace disque requis&nbsp;: 
&openssh-buildsize;</para></listitem>
<listitem><para>Estimation du temps de construction&nbsp;: 
&openssh-time;</para></listitem></itemizedlist>
</sect3>

<sect3><title>Dépendances d'<application>Open<acronym>SSH</acronym></application></title>
<sect4><title>Requis</title>
<para><xref linkend="openssl"/></para>
</sect4>

<sect4><title>Optionnel</title>
<para><xref linkend="Linux_PAM"/>,
<xref linkend="tcpwrappers"/>,
X (<xref linkend="xfree86"/> ou <xref linkend="xorg"/>),
<xref linkend="mitkrb"/> ou <xref linkend="heimdal"/>,
<xref linkend="j2sdk"/>,
<xref linkend="net-tools"/> et
<ulink url="http://www.opensc.org/">OpenSC</ulink></para>
</sect4>
</sect3>

</sect2>

<sect2>
<title>Installation de
<application>Open<acronym>SSH</acronym></application></title>

<para><application>Open<acronym>SSH</acronym></application> fonctionne avec deux
processus lors de la connexion entre ordinateurs. Le premier processus est un
processus privilégié et contrôle l'échange des droits si nécessaire. Le second
processus communique avec le réseau. Les étapes supplémentaires d'installation
sont nécessaires pour configurer le bon environnement, grâce aux commandes
suivantes&nbsp;:</para>

<screen><userinput><command>mkdir /var/empty &amp;&amp;
chown root:sys /var/empty &amp;&amp;
groupadd sshd &amp;&amp;
useradd -c 'sshd privsep' -d /var/empty -g sshd -s /bin/false sshd</command></userinput></screen>

<para><application>OpenSSH</application> est très sensible aux changements dans
les bibliothèques liées d'<application>OpenSSL</application>. Si vous recompilez
<application>OpenSSL</application>, <application>OpenSSH</application> pourrait
échouer au lancement. Une alternative est de lier avec la bibliothèque statique
d'<application>OpenSSL</application>. Pour lier la bibliothèque statique,
exécutez la commande suivante&nbsp;:</para>

<screen><userinput><command>sed -i "s:-lcrypto:/usr/lib/libcrypto.a:g" configure</command></userinput></screen>

<para>Installez <application>Open<acronym>SSH</acronym></application> en lançant
les commandes suivantes&nbsp;:</para>

<screen><userinput><command>./configure --prefix=/usr --sysconfdir=/etc/ssh \
    --libexecdir=/usr/sbin --with-md5-passwords &amp;&amp;
make &amp;&amp;
make install</command></userinput></screen>

</sect2>

<sect2>
<title>Explications des commandes</title>

<para><parameter>--sysconfdir=/etc/ssh</parameter>&nbsp;: ceci empêche le stockage
des fichiers de configuration dans
<filename class="directory">/usr/etc</filename>.</para>

<para><parameter>--with-md5-passwords</parameter>&nbsp;: ceci est requis si vous
effectuez les modifications recommandées par l'astuce shadowpasswd_plus de
<acronym>LFS</acronym> sur votre serveur <acronym>SSH</acronym> lorsque vous
avez installez la suite Shadow Password ou si vous avez accès à un serveur
<acronym>SSH</acronym> qui fournit l'authentification des mots de passe
utilisateur avec un cryptage md5. </para>

<para><parameter>--libexecdir=/usr/sbin</parameter>&nbsp;:
<application>Open<acronym>SSH</acronym></application> installe des programmes
appelés par des programmes dans <filename class="directory">/usr/libexec</filename>.
<command>sftp-server</command> est un outil de <command>sshd</command> et
<command>ssh-askpass</command> est un outil de <command>ssh-add</command> 
qui est installé comme lien vers <command>X11-ssh-askpass</command>. Ces deux-là
devraient être installés dans <filename class="directory">/usr/sbin</filename>,
et non pas dans <filename class="directory">/usr/libexec</filename>.</para>

</sect2>

<sect2>
<title>Configurer <application>Open<acronym>SSH</acronym></application></title>

<sect3><title>Fichiers de configuration</title>

<para><filename>/etc/ssh/ssh_config</filename> et
<filename>/etc/ssh/sshd_config </filename></para>

<para>Il n'y a pas de modifications requises sur un de ces fichiers. Néanmoins,
vous pourriez vouloir faire des modifications pour une sécurité appropriée de
votre système. Une modification recommandée est de désactiver la connexion de
l'utilisateur root via ssh. Exécutez la commande suivante pour cela&nbsp;:</para>

<screen><userinput><command>echo "PermitRootLogin no" >> /etc/ssh/sshd_config</command></userinput></screen>

<para>Des informations de configuration supplémentaires sont disponibles dans
les pages man de <command>sshd</command>, <command>ssh</command> et
<command>ssh-agent</command></para>.
</sect3>

<sect3><title>Script de démarrage sshd</title>

<para>Pour exécuter le serveur <acronym>SSH</acronym> au démarrage du système,
installez le script de démarrage <filename>/etc/rc.d/init.d/sshd</filename>
inclus dans le paquetage <xref linkend="intro-important-bootscripts"/>.</para>

<screen><userinput><command>make install-sshd</command></userinput></screen>
</sect3>

</sect2>

<sect2>
<title>Contenu</title>

<para>Le paquetage <application>Open<acronym>SSH</acronym></application>
contient <command>ssh</command>, <command>sshd</command>, 
<command>ssh-agent</command>, <command>ssh-add</command>, 
<command>sftp</command>, <command>scp</command>, 
<command>ssh-keygen</command>, <command>sftp-server</command> et
<command>ssh-keyscan</command>.</para>

</sect2>

<sect2><title>Description</title>

<sect3><title>ssh</title>
<para>Le programme client de base, style
<command>rlogin</command>/<command>rsh</command>.</para></sect3>

<sect3><title>sshd</title>
<para>Le démon qui attend les demandes de connexions <command>ssh</command>.
</para></sect3>

<sect3><title>ssh-agent</title>
<para>Un agent d'authentification qui peut sotcker les clés privées.</para></sect3>

<sect3><title>ssh-add</title>
<para>Outil pour ajouter des clés à <command>ssh-agent</command>.</para></sect3>

<sect3><title>sftp</title>
<para>Programme style <acronym>FTP</acronym> mais fonctionnant avec les
protocoles <acronym>SSH</acronym>1 et <acronym>SSH</acronym>2.</para></sect3>

<sect3><title>scp</title>
<para>Programme de copie de fichiers agissant comme <command>rcp</command>.</para></sect3>

<sect3><title>ssh-keygen</title>
<para>Outil de génération de clés.</para></sect3>

<sect3><title>sftp-server</title>
<para>Sous-système du serveur <acronym>SFTP</acronym>.</para></sect3>

<sect3><title>ssh-keyscan</title>
<para>Outil pour récupérer les clés publiques des hôtes à partir de certains
hôtes.</para></sect3>

</sect2>

</sect1>

