<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
   "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY proftpd-download-http "http://ftp.proftpd.org/distrib/source/proftpd-&proftpd-version;.tar.bz2">
  <!ENTITY proftpd-download-ftp  "ftp://ftp.proftpd.org/distrib/source/proftpd-&proftpd-version;.tar.bz2">
  <!ENTITY proftpd-md5sum        "5feb4a7348e12faefc25e34fd92efdd6">
  <!ENTITY proftpd-size          "901 KB">
  <!ENTITY proftpd-buildsize     "7.3 MB">
  <!ENTITY proftpd-time          "0.27 SBU">
]>

<sect1 id="proftpd" xreflabel="ProFTPD-&proftpd-version;">
<sect1info>
  <othername>$LastChangedBy: bdubbs $</othername>
  <date>$Date: 2008-11-16 21:28:02 $</date>
</sect1info>

<?dbhtml filename="proftpd.html"?>
<title><application>Pro<acronym>FTP</acronym>D</application>-&proftpd-version;</title>

<indexterm zone="proftpd">
  <primary sortas="a-proftpd">Proftpd</primary>
</indexterm>

<sect2>
<title>Introduction à <application>Pro<acronym>FTP</acronym>D</application></title>

<para>Le paquetage <application>Pro<acronym>FTP</acronym>D</application> contient
un démon <acronym>FTP</acronym> sécurisé et hautement configurable. Il est utile
pour proposer des archives de gros fichiers sur un réseau.</para>

<sect3>
<title>Informations sur le paquetage</title>
<itemizedlist spacing='compact'>
  <listitem><para>Téléchargement (HTTP)&nbsp;: <ulink url="&proftpd-download-http;"/></para></listitem>
  <listitem><para>Téléchargement (FTP)&nbsp;: <ulink url="&proftpd-download-ftp;"/></para></listitem>
  <listitem><para>Téléchargement de la somme MD5&nbsp;: &proftpd-md5sum;</para></listitem>
  <listitem><para>Taille du téléchargement&nbsp;:&proftpd-size;</para></listitem>
  <listitem><para>Estimation de l'espace disque requis&nbsp;: &proftpd-buildsize;</para></listitem>
  <listitem><para>Estimation du temps de construction&nbsp;: &proftpd-time;</para></listitem>
</itemizedlist>
</sect3>

<sect3>
<title>Dépendances de <application>Pro<acronym>FTP</acronym>D</application></title>

<sect4>
<title>Optionnel</title>

<para><xref linkend="Linux_PAM"/></para>

</sect4>
</sect3>

</sect2>

<sect2>
<title>Installation de <application>Pro<acronym>FTP</acronym>D</application></title>

<para>Pour des raisons de sécurité, vous devriez installer
<application>Pro<acronym>FTP</acronym>D</application> en utilisant un utilisateur
et groupe non privilégiés. En tant qu'utilisateur root&nbsp;:</para>

<screen><userinput><command>groupadd proftpd &amp;&amp;
useradd -c proftpd -d /home/ftp -g proftpd \
        -s /usr/lib/proftpd/proftpdshell proftpd &amp;&amp;
install -d -m775 -o proftpd -g proftpd /usr/lib/proftpd &amp;&amp;
ln -s /bin/false /usr/lib/proftpd/proftpdshell &amp;&amp;
echo /usr/lib/proftpd/proftpdshell &gt;&gt; /etc/shells</command></userinput></screen>

<para>Installez <application>Pro<acronym>FTP</acronym>D</application> en tant
qu'utilisateur standard avec les commandes suivantes&nbsp;:</para>

<screen><userinput><command>install_user=proftpd install_group=proftpd \
    ./configure --prefix=/usr --sysconfdir=/etc \
    --localstatedir=/var/run &amp;&amp;
make</command></userinput></screen>

<para>Maintenant, de nouveau en tant qu'utilisateur root&nbsp;:</para>
 
<screen><userinput role='root'><command>make install</command></userinput></screen>

</sect2>

<sect2>
<title>Explications des commandes</title>

<para><command>install -d -m775 -o proftpd -g proftpd /usr/lib/proftpd</command>&nbsp;:
crée le répertoire personnel pour <application>Pro<acronym>FTP</acronym>D</application>.</para>

<para><command>ln -s /bin/false /usr/lib/proftpd/proftpdshell</command>&nbsp;:
configure le shell par défaut comme un lien vers un shell invalide.</para> 

<para><command>echo /usr/lib/proftpd/proftpdshell &gt;&gt; /etc/shells</command>&nbsp;:
Imite un shell valide dans un but de compatibilité.</para>

<note><para>Les trois commandes ci-dessus peuvent être omises si la directive
suivante est placée dans le fichier de configuration&nbsp;:

<screen>RequireValidShell off</screen>

Par défaut, proftpd demandera que aux utilisateurs se connectant d'avoir des
shells valides. La directive RequireValidShell désactive cette contrainte. C'est
seulement recommandé si vous configurez votre serveur <acronym>FTP</acronym>
exclusivement pour des téléchargements anonymes.</para></note>

<para><parameter>install_user=proftpd install_group=proftpd</parameter>&nbsp;:
spécifie l'identité de l'utilisateur et du groupe pour
<application>Pro<acronym>FTP</acronym>D</application>.</para>

<para><parameter>--sysconfdir=/etc</parameter>&nbsp;:
ceci empêche le placement des fichiers de configuration dans
<filename class="directory">/usr/etc</filename>.</para>

<para><parameter>--localstatedir=/var/run</parameter>&nbsp;:
ceci utilise <filename class="directory">/var/run</filename> au lieu de
<filename class="directory">/usr/var</filename> pour les fichiers de verrous.</para>

</sect2>

<sect2>
<title>Configurer <application>Pro<acronym>FTP</acronym>D</application></title>

<sect3 id='proftpd-init'>
<title>Script de démarrage proftpd</title>

<indexterm zone="proftpd proftpd-init">
  <primary sortas="f-proftpd">proftpd</primary>
</indexterm>


<para>Installez le script de démarrage <filename>/etc/rc.d/init.d/proftpd</filename>
inclus dans le paquetage <xref linkend="intro-important-bootscripts"/>.</para>

<screen><userinput><command>make install-proftpd</command></userinput></screen>

</sect3>

<sect3 id='proftpd-config'>
<title>Fichiers de configuration</title>

<indexterm zone="proftpd proftpd-config">
   <primary sortas="e-etc-proftpd">/etc/proftpd.conf</primary>
</indexterm>

<para><filename>/etc/proftpd.conf</filename></para>
</sect3>

<sect3><title>Informations de configuration</title>
<para>Ceci est une simple configuration dans un cas de téléchargement simple.
Voir la documentation de <application>Pro<acronym>FTP</acronym>D</application>
dans <filename class="directory">/usr/share/doc/proftpd</filename> et consultez
le site web sur <ulink url="http://www.proftpd.org/"/> pour des exemples de
configuration.</para>

<screen><userinput><command>cat &gt; /etc/proftpd.conf &lt;&lt; "EOF"</command>
# Ceci est un fichier de configuration basique pour ProFTPD
# Il établit un serveur seul et une connexion anonyme.

ServerName                      "ProFTPD Default Installation"
ServerType                      standalone
DefaultServer                   on

# Le port 21 est le port FTP standard.
Port                            21
# Umask 022 est un masque standard pour empêcher les nouveaux répertoires et fichiers and files
# d'être modifiables par tout le monde.
Umask                           022

# Pour empêcher les attaques DoS, configure le nombre maximum de processus
# fils à 30. Si vous avez besoin d'autoriser plus de 30 connexions concurrentes
# à la fois, augmentez cette valeur. Notez que ceci fonctionne seulement en mode
# autonome. Dans le mode inetd, vous devez utiliser un serveur inetd qui vous
# permet de limiter le nombre maximum de processus par service
# (par exemple xinetd)
MaxInstances                    30

# Configure l'utilisateur et le groupe avec lequel le serveur sera exécuté.
User                            proftpd
Group                           proftpd

# Habituellement, les fichiers dévraient être écrasables.
&lt;Directory /*&gt;
  AllowOverwrite                on
&lt;/Directory&gt;

# Une configuration anonymous basique, sans répertoires d'ajout.
&lt;Anonymous ~proftpd&gt;
  User                          proftpd
  Group                         proftpd
  # Les clients devraient être capables de se connecter avec "anonymous" ainsi que "proftpd"
  UserAlias                     anonymous proftpd

  # Limite le nombre maximum de connexions anonymes
  MaxClients                    10

  # 'welcome.msg' devrait être affiché à la connexion
  # et '.message' affiché à l'arrivé dans chaque répertoire.
  DisplayLogin                  welcome.msg
  DisplayFirstChdir             .message

  # Limite WRITE partout dans le chroot anonymous
  &lt;Limit WRITE&gt;
    DenyAll
  &lt;/Limit&gt;
&lt;/Anonymous&gt;
<command>EOF</command></userinput></screen></sect3>

</sect2>

<sect2>
<title>Contenu</title>

<segmentedlist>
  <segtitle>Programmes installés</segtitle>
  <segtitle>Bibliothèques installées</segtitle>
  <segtitle>Répertoire installé</segtitle>
 
  <seglistitem>
    <seg>ftpcount, ftpdctl, ftptop, ftpwho, ftpshut, proftpd</seg>
    <seg>Aucune</seg>
    <seg>/var/run/proftpd</seg>
  </seglistitem>
</segmentedlist>
 
<variablelist>
  <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
  <?dbfo list-presentation="list"?>

<varlistentry id="proftpd-prog">
  <term><command>proftpd</command></term>
  <listitem>
    <para>est le démon <acronym>FTP</acronym>.</para>
    <indexterm zone="proftpd proftpd-prog">
      <primary sortas="b-proftpd">proftpd</primary>
    </indexterm>
  </listitem>
</varlistentry>

<varlistentry id="ftpcount">
  <term><command>ftpcount</command></term>
  <listitem>
    <para>affiche le nombre actuel de connexions.</para>
    <indexterm zone="proftpd ftpcount">
      <primary sortas="b-ftpcount">ftpcount</primary>
    </indexterm>
  </listitem>
</varlistentry>

<varlistentry id="ftpshut">
  <term><command>ftpshut</command></term>
  <listitem>
    <para>arrête tous les serveurs <application>proftpd</application> à un
      moment donné.</para>
    <indexterm zone="proftpd ftpshut">
      <primary sortas="b-ftpshut">ftpshut</primary>
    </indexterm>
  </listitem>
</varlistentry>

<varlistentry id="ftptop">
  <term><command>ftptop</command></term>
  <listitem>
    <para>affiche un statut des connexions en cours.</para>
    <indexterm zone="proftpd ftptop">
      <primary sortas="b-ftptop">ftptop</primary>
    </indexterm>
  </listitem>
</varlistentry>

<varlistentry id="ftpwho">
  <term><command>ftpwho</command></term>
  <listitem>
    <para>affiche des informations sur les processus en cours pour chaque
      session.</para>
    <indexterm zone="proftpd ftpwho">
      <primary sortas="b-ftpwho">ftpwho</primary>
    </indexterm>
  </listitem>
</varlistentry>

</variablelist>
</sect2>

</sect1>

