<sect1 id="dhcpclient" xreflabel="Configuring the LFS bootscripts to support DHCP clients">
<?dbhtml filename="configdhcp.html" dir="connect"?>
<title>Configurer les scripts de démarrage LFS pour supporter les clients DHCP</title>

<sect2><title>Fichiers de configurations</title>
<para><userinput>/etc/sysconfig/network</userinput>,
<userinput>/etc/sysconfig/network-devices/ifup-eth0</userinput>,
<userinput>/etc/sysconfig/network-devices/ifdown-eth0</userinput>,
<userinput>/etc/sysconfig/network-devices/ifconfig.eth0</userinput></para>
</sect2>

<sect2><title>Informations de configuration</title>

<para>Notez que sur cette page et les suivantes, nous utiliserons
<userinput>eth0</userinput> comme interface d'exemple. Si vous voulez
configurer une interface différente (ou plus d'une), remplacez simplement
<userinput>eth0</userinput> avec l'interface que vous souhaitez utiliser.</para>

<para>Ces instructions convertiront les fichiers de configuration de LFS
(configuration statique) en une configuration utilisant le protocole DHCP).
Notez que interfaces statiques et basées sur DHCP peuvent co-exister sur un
système LFS. Pour ce faire, vous devez seulement faire les modifications sur les
interfaces qui doivent supporter DHCP. Toutes les instructions sur cette page
sont applicables quelque soit le client DHCP que vous souhaitez utiliser.</para>

<para>Si l'interface que vous avez l'intention d'utiliser comme passerelle par
défaut va utiliser DHCP, la première étape est de supprimer les variables
GATEWAY et GATEWAY_IF de <filename>/etc/sysconfig/network</filename>. Ceci
doit être fait seulement une fois.</para>

<para><screen><userinput>cd /etc/sysconfig &amp;&amp;
cp network network.bak &amp;&amp;
sed "s/GATEWAY/# GATEWAY/" network.bak > network</userinput></screen></para>

<para>Vous avez ensuite besoin de créer les scripts qui vont surcharger les
scripts réseau par défaut et apporter le support de DHCP. Ces deux scripts sont
génériques et donc à utiliser avec les deux clients DHCP. Tout d'abord, le
script <filename>ifup-eth0</filename>:</para>

<para><screen><userinput>cat &gt; /etc/sysconfig/network-devices/ifup-eth0 &lt;&lt; "EOF" </userinput>
#!/bin/sh

source /etc/sysconfig/rc || exit
source $rc_functions || exit
source $network_devices/ifconfig.eth0 || exit

echo "Bringing up the eth0 interface..."
modprobe eth0
loadproc $DHCP_PROG $DHCP_START
<userinput>EOF</userinput></screen></para>

<para>Puis le script <filename>ifdown-eth0</filename>:</para>

<para><screen><userinput>cat &gt; /etc/sysconfig/network-devices/ifdown-eth0 &lt;&lt; "EOF" </userinput>
#!/bin/sh

source /etc/sysconfig/rc || exit
source $rc_functions || exit
source $network_devices/ifconfig.eth0 || exit

echo "Bringing down the eth0 interface..."
$DHCP_PROG $DHCP_STOP
evaluate_retval
<userinput>EOF</userinput></screen></para>

<para>Finalement, nous avons besoin de rendre les scripts exécutables:</para>

<para><screen><userinput>chmod 755 /etc/sysconfig/network-devices/ifup-eth0 &amp;&amp;
chmod 755 /etc/sysconfig/network-devices/ifdown-eth0</userinput></screen></para>

</sect2>

</sect1>

