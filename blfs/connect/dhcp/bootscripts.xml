<sect1 id="dhcpclient" xreflabel="Configuring the LFS bootscripts to support DHCP clients">
<?dbhtml filename="configdhcp.html" dir="connect"?>
<title>Configurer les scripts de démarrage <acronym>LFS</acronym> pour
supporter les clients <acronym>DHCP</acronym></title>

<sect2><title>Fichiers de configurations</title>
<para><filename>/etc/sysconfig/network</filename>,
<filename>/etc/sysconfig/network-devices/ifup-eth0</filename>,
<filename>/etc/sysconfig/network-devices/ifdown-eth0</filename>,
<filename>/etc/sysconfig/network-devices/ifconfig.eth0</filename></para>
</sect2>

<sect2><title>Informations de configuration</title>

<para>Notez que sur cette page et les suivantes, nous utiliserons
<emphasis role="strong">eth0</emphasis> comme interface d'exemple. Si vous
voulez configurer une interface différente (ou plus d'une), remplacez simplement
<emphasis role="strong">eth0</emphasis> avec l'interface que vous souhaitez
utiliser.</para>

<para>Ces instructions convertiront les fichiers de configuration de
<acronym>LFS</acronym> (configuration statique) en une configuration utilisant
le protocole <acronym>DHCP</acronym>). Notez que interfaces statiques et basées
sur <acronym>DHCP</acronym> peuvent co-exister sur un système
<acronym>LFS</acronym>. Pour ce faire, vous devez seulement faire les
modifications sur les interfaces qui doivent supporter <acronym>DHCP</acronym>.
Toutes les instructions sur cette page sont applicables quelque soit le client
<acronym>DHCP</acronym> que vous souhaitez utiliser.</para>

<para>Si l'interface que vous avez l'intention d'utiliser comme passerelle par
défaut va utiliser <acronym>DHCP</acronym>, la première étape est de supprimer
les variables <envar>GATEWAY</envar> et <envar>GATEWAY_IF</envar> de
<filename>/etc/sysconfig/network</filename>. Ceci doit être fait seulement une
fois.</para>

<screen><userinput>cd /etc/sysconfig &amp;&amp;
cp network network.bak &amp;&amp;
sed "s/GATEWAY/# GATEWAY/" network.bak > network</userinput></screen>

<para>Vous avez ensuite besoin de créer les scripts qui vont surcharger les
scripts réseau par défaut et apporter le support de <acronym>DHCP</acronym>.
Ces deux scripts sont génériques et donc à utiliser avec les deux clients
<acronym>DHCP</acronym>. Tout d'abord, le script <filename>ifup-eth0</filename>:
</para>

<screen><userinput><command>cat &gt; /etc/sysconfig/network-devices/ifup-eth0 &lt;&lt; "EOF" </command>
#!/bin/sh

source /etc/sysconfig/rc || exit
source $rc_functions || exit
source $network_devices/ifconfig.eth0 || exit

echo "Bringing up the eth0 interface..."
modprobe eth0
loadproc $DHCP_PROG $DHCP_START
<command>EOF</command></userinput></screen>

<para>Puis le script <filename>ifdown-eth0</filename>:</para>

<screen><userinput><command>cat &gt; /etc/sysconfig/network-devices/ifdown-eth0 &lt;&lt; "EOF" </command>
#!/bin/sh

source /etc/sysconfig/rc || exit
source $rc_functions || exit
source $network_devices/ifconfig.eth0 || exit

echo "Bringing down the eth0 interface..."
$DHCP_PROG $DHCP_STOP
evaluate_retval
<command>EOF</command></userinput></screen>

<para>Finalement, nous avons besoin de rendre les scripts exécutables:</para>

<screen><userinput><command>chmod 755 /etc/sysconfig/network-devices/ifup-eth0 &amp;&amp;
chmod 755 /etc/sysconfig/network-devices/ifdown-eth0</command></userinput></screen>

</sect2>

</sect1>

