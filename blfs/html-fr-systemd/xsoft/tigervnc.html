<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      Tigervnc-1.11.0
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-r10.1-1007+">
    <div class="navheader">
      <h4>
        Au-delà de Linux<sup>®</sup> From Scratch (édition <span class=
        "phrase">systemd)</span> - Version r10.1-1007+
      </h4>
      <h3>
        Chapitre&nbsp;41.&nbsp;Autres programmes basés sur X
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="thunderbird.html" title=
          "Thunderbird-91.0.3">Précédent</a>
          <p>
            Thunderbird-91.0.3
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="transmission.html" title=
          "Transmission-3.00">Suivant</a>
          <p>
            Transmission-3.00
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="other.html" title=
          "Chapitre&nbsp;41.&nbsp;Autres programmes basés sur X">Niveau
          supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition systemd) - Version r10.1-1007+">
          Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="tigervnc" name="tigervnc"></a>Tigervnc-1.11.0
      </h1>
      <div class="package" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Introduction à Tigervnc
        </h2>
        <p>
          <span class="application">Tigervnc</span> est une implémentation
          VNC (Virtual Network Computing) avancée. Il permet la création d'un
          serveur Xorg non lié à une console physique et fournit également un
          client pour la visualisation des bureaux graphiques distants.
        </p>
        <p>
          This package is known to build and work properly using an LFS-11.0
          platform.
        </p>
        <h3>
          Informations sur le paquet
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Téléchargement (HTTP)&nbsp;: <a class="ulink" href=
                "https://github.com/TigerVNC/tigervnc/archive/v1.11.0/tigervnc-1.11.0.tar.gz">
                https://github.com/TigerVNC/tigervnc/archive/v1.11.0/tigervnc-1.11.0.tar.gz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Téléchargement (FTP)&nbsp;: <a class="ulink" href=""></a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Somme de contrôle MD5 du téléchargement&nbsp;:
                07f5e217f288c515effb083896e65054
              </p>
            </li>
            <li class="listitem">
              <p>
                Taille du téléchargement&nbsp;: 1.3 Mo
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation de l'espace disque requis&nbsp;: 95&nbsp;Mo
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation du temps de construction&nbsp;: 0,5 SBU (avec
                parallélisme = 4)
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Téléchargements supplémentaires
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Fichier requis&nbsp;: <a class="ulink" href=
                "https://www.x.org/pub/individual/xserver/xorg-server-1.20.7.tar.bz2">
                https://www.x.org/pub/individual/xserver/xorg-server-1.20.7.tar.bz2</a>
              </p>
            </li>
          </ul>
        </div>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            La version de <span class="application">Xorg</span> est ancienne
            de quelques versions, mais est requise pour les personalisations
            nécessaire pour ce paquet.
          </p>
        </div>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Correctif requis&nbsp;: <a class="ulink" href=
                "https://www.linuxfromscratch.org/patches/blfs/svn/tigervnc-1.11.0-configuration_fixes-1.patch">
                https://www.linuxfromscratch.org/patches/blfs/svn/tigervnc-1.11.0-configuration_fixes-1.patch</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Fichiers facultatifs&nbsp;:
              </p>
              <div class="itemizedlist">
                <ul class="compact">
                  <li class="listitem">
                    <p>
                      <a class="ulink" href=
                      "https://anduin.linuxfromscratch.org/BLFS/tigervnc/Xsession">
                      https://anduin.linuxfromscratch.org/BLFS/tigervnc/Xsession</a>
                    </p>
                  </li>
                </ul>
              </div>
            </li>
          </ul>
        </div>
        <h3>
          Dépendances de Tigervnc
        </h3>
        <h4>
          Requises
        </h4>
        <p class="required">
          <a class="xref" href="../general/cmake.html" title=
          "CMake-3.21.2">CMake-3.21.2</a>, <a class="xref" href=
          "../x/fltk.html" title="FLTK-1.3.7">FLTK-1.3.7</a>, <a class="xref"
          href="../postlfs/gnutls.html" title=
          "GnuTLS-3.7.2">GnuTLS-3.7.2</a>, <a class="xref" href=
          "../general/libgcrypt.html" title=
          "libgcrypt-1.9.4">libgcrypt-1.9.4</a>, <a class="xref" href=
          "../general/libjpeg.html" title=
          "libjpeg-turbo-2.1.1">libjpeg-turbo-2.1.1</a>, <a class="xref"
          href="../general/pixman.html" title=
          "Pixman-0.40.0">Pixman-0.40.0</a>, <a class="xref" href=
          "../x/x7app.html" title="Applications Xorg">Applications Xorg</a>
          et <a class="xref" href="../x/x7legacy.html" title=
          "Xorg Legacy">Xorg Legacy Fonts</a>
        </p>
        <h4>
          Recommandées
        </h4>
        <p class="recommended">
          <a class="xref" href="../general/imagemagick.html" title=
          "ImageMagick-7.1.0-4">ImageMagick-7.1.0-4</a> et <a class="xref"
          href="../postlfs/linux-pam.html" title=
          "Linux-PAM-1.5.1">Linux-PAM-1.5.1</a>
        </p>
        <p class="usernotes">
          Notes utilisateur&nbsp;: <a class="ulink" href=
          "https://wiki.linuxfromscratch.org/blfs/wiki/tigervnc">https://wiki.linuxfromscratch.org/blfs/wiki/tigervnc</a>
        </p>
      </div>
      <div class="installation" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Installation de Tigervnc
        </h2>
        <p>
          Tout d'abord, ajustez les fichiers de configuration pour les rendre
          compatible avec votre système LFS&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">patch -Np1 -i ../tigervnc-1.11.0-configuration_fixes-1.patch</kbd></pre>
        <p>
          Installez <span class="application">tigervnc</span> en lançant les
          commandes suivantes&nbsp;:
        </p>
        <pre class="userinput"><kbd class="command"># Put code in place
mkdir -p unix/xserver &amp;&amp;
tar -xf ../xorg-server-1.20.7.tar.bz2 \
    --strip-components=1              \
    -C unix/xserver                   &amp;&amp;
( cd unix/xserver &amp;&amp;
  patch -Np1 -i ../xserver120.patch ) &amp;&amp;

# Build viewer
cmake -G "Unix Makefiles"         \
      -DCMAKE_INSTALL_PREFIX=/usr \
      -DCMAKE_BUILD_TYPE=Release  \
      -Wno-dev . &amp;&amp;
make &amp;&amp;

# Build server
pushd unix/xserver &amp;&amp;
  autoreconf -fiv  &amp;&amp;

  CPPFLAGS="-I/usr/include/drm"       \
  ./configure $XORG_CONFIG            \
      --disable-xwayland    --disable-dri        --disable-dmx         \
      --disable-xorg        --disable-xnest      --disable-xvfb        \
      --disable-xwin        --disable-xephyr     --disable-kdrive      \
      --disable-devel-docs  --disable-config-hal --disable-config-udev \
      --disable-unit-tests  --disable-selective-werror                 \
      --disable-static      --enable-dri3                              \
      --without-dtrace      --enable-dri2        --enable-glx          \
      --with-pic &amp;&amp;
  make  &amp;&amp;
popd</kbd></pre>
        <p>
          Ce paquet n'est pas fourni avec une suite de tests.
        </p>
        <p>
          Maintenant, en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class="command">#Install viewer
make install &amp;&amp;

#Install server
( cd unix/xserver/hw/vnc &amp;&amp; make install ) &amp;&amp;

[ -e /usr/bin/Xvnc ] || ln -svf $XORG_PREFIX/bin/Xvnc /usr/bin/Xvnc</kbd></pre>
      </div>
      <div class="commands" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Explication des commandes
        </h2>
        <p>
          <span class="command"><strong>tar -xf ..
          xorg-server...</strong></span>&nbsp;: Cette commande extrait les
          paquets Xorg standards dans l'arborescence à un endroit requis pour
          modification.
        </p>
        <p>
          <code class="option">--disable ...</code>&nbsp;: La plupart des
          options qui sont habituellement utilisées pour le serveur Xorg
          standard ne sont pas utile pour l'instance Xvnc que l'on construit
          ici.
        </p>
        <p>
          <span class="command"><strong>[ -e /usr/bin/Xvnc ] || ln ...
          Xvnc</strong></span>&nbsp;: Si le serveur Xvnc n'est pas installé
          dans le répertoire <code class="filename">/usr/bin</code>, créez un
          lien pour que le script <span class=
          "command"><strong>vncserver</strong></span> puisse le trouver.
        </p>
      </div>
      <div class="configuration" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Configuration de Tigervnc
        </h2>
        <h3>
          Configuration du serveur
        </h3>
        <p>
          Sur les systèmes systemd, une autre méthode de configuration est
          disponible. Cette configuration a pour bénéfice supplémentaire de
          rendre systemd conscient des sessions VNC et permet aux
          environnements de bureau comme <span class=
          "application">GNOME</span> de démarrer automatiquement les services
          une fois la session VNC démarrée. Cette configuration permet aussi
          de démarrer des sessions VNC au démarrage du système. Pour
          configurer le serveur VNC de cette manière, suivez ces
          instructions.
        </p>
        <p>
          D'abord, installez un fichier Xsession rudimentaire pour que le
          serveur VNC puisse initialiser les sessions X correctement&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">install -vdm755 /etc/X11/tigervnc &amp;&amp;
install -v -m755 ../Xsession /etc/X11/tigervnc</kbd></pre>
        <p>
          Ensuite, configurez une carte des utilisateurs dans <code class=
          "filename">/etc/tigervnc/vncserver.users</code>. Cela dit au
          serveur VNC quelle session est allouée à quel utilisateur.
        </p>
        <pre class="root"><kbd class=
        "command">echo ":1=$(whoami)" &gt;&gt; /etc/tigervnc/vncserver.users</kbd></pre>
        <p>
          Ensuite, configurez un fichier pour dire à <span class=
          "application">vncserver</span> quel environnement de bureau
          utiliser et quelle géométrie utiliser. Il y a plusieurs autres
          options qui peuvent être définies dans ce fichier, mais elles ne
          rentrent pas dans le cadre de BLFS.
        </p>
        <pre class="userinput"><kbd class=
        "command">cat &gt; ~/.vnc/config &lt;&lt; EOF
<code class="literal"># Begin ~/.vnc/config

session=LXDE      # The session must match one listed in /usr/share/xsessions.
geometry=1024x768

# End ~/.vnc/config</code>
EOF</kbd></pre>
        <p>
          Pour démarrer le serveur VNC, lancez la commande suivante&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">systemctl start vncserver@:1</kbd></pre>
        <p>
          Pour démarrer le serveur VNC au démarrage du système, lancez la
          commande suivante&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">systemctl enable vncserver@:1</kbd></pre>
      </div>
      <div class="content" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Contenu
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Programmes installés:</strong>
              <span class="segbody">Xvnc, vncconfig, vncpasswd, vncserver,
              vncviewer et x0vncserver</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Bibliothèques installées:</strong>
              <span class="segbody">libvnc.so</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Répertoires installés:</strong>
              <span class="segbody">/usr/share/doc/tigervnc-1.11.0</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Descriptions courtes
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="xvnc" name="xvnc"></a><span class=
                    "term"><span class=
                    "command"><strong>Xvnc</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un serveur X VNC (Virtual Network Computing). Il est
                    basé sur un serveur X standard, mais il a un écran
                    <span class="quote">«&nbsp;<span class=
                    "quote">virtuel</span>&nbsp;»</span> plutôt qu'un écran
                    physique
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="vncconfig" name="vncconfig"></a><span class=
                    "term"><span class=
                    "command"><strong>vncconfig</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un programme pour configurer et contrôler un serveur
                    VNC
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="vncpasswd" name="vncpasswd"></a><span class=
                    "term"><span class=
                    "command"><strong>vncpasswd</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    vous permet d'initialiser le mot de passe utilisé pour
                    accéder aux bureaux VNC
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="vncserver" name="vncserver"></a><span class=
                    "term"><span class=
                    "command"><strong>vncserver</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un script perl utilisé pour démarrer ou stopper un
                    serveur VNC
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="vncviewer" name="vncviewer"></a><span class=
                    "term"><span class=
                    "command"><strong>vncviewer</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un client utilisé pour accéder aux bureaux VNC
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="x0vncserver" name="x0vncserver"></a><span class=
                    "term"><span class=
                    "command"><strong>x0vncserver</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un programme pour rendre accessible un affichage X
                    sur un terminal physique via TigerVNC ou un visualiseur
                    compatible
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="thunderbird.html" title=
          "Thunderbird-91.0.3">Précédent</a>
          <p>
            Thunderbird-91.0.3
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="transmission.html" title=
          "Transmission-3.00">Suivant</a>
          <p>
            Transmission-3.00
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="other.html" title=
          "Chapitre&nbsp;41.&nbsp;Autres programmes basés sur X">Niveau
          supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition systemd) - Version r10.1-1007+">
          Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
