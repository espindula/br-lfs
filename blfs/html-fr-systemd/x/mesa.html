<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      Mesa-21.1.6
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-r10.1-914+">
    <div class="navheader">
      <h4>
        Au-delà de Linux<sup>®</sup> From Scratch (édition <span class=
        "phrase">systemd)</span> - Version r10.1-914+
      </h4>
      <h3>
        Chapitre&nbsp;24.&nbsp;Environnement X Window System
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="xcb-util-cursor.html" title=
          "xcb-util-cursor-0.1.3">Précédent</a>
          <p>
            xcb-util-cursor-0.1.3
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="xbitmaps.html" title=
          "xbitmaps-1.1.2">Suivant</a>
          <p>
            xbitmaps-1.1.2
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="installing.html" title=
          "Chapitre&nbsp;24.&nbsp;Environnement X Window System">Niveau
          supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition systemd) - Version r10.1-914+">
          Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="mesa" name="mesa"></a>Mesa-21.1.6
      </h1>
      <div class="package" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Introduction à Mesa
        </h2>
        <p>
          <span class="application">Mesa</span> est une bibliothèque
          graphique 3D compatible avec OpenGL.
        </p>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            <span class="application">Mesa</span> est mis à jour
            régulièrement. Vous pourriez vouloir utiliser la dernière version
            21.1.x disponible.
          </p>
        </div>
        <p>
          This package still needs to be checked.
        </p>
        <h3>
          Informations sur le paquet
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Téléchargement (HTTP)&nbsp;: <a class="ulink" href=
                "https://mesa.freedesktop.org/archive/mesa-21.1.6.tar.xz">https://mesa.freedesktop.org/archive/mesa-21.1.6.tar.xz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Téléchargement (FTP)&nbsp;: <a class="ulink" href=
                "ftp://ftp.freedesktop.org/pub/mesa/mesa-21.1.6.tar.xz">ftp://ftp.freedesktop.org/pub/mesa/mesa-21.1.6.tar.xz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Somme de contrôle MD5 du téléchargement&nbsp;:
                115a4b7383982f03b2aa5b91d1a8a259
              </p>
            </li>
            <li class="listitem">
              <p>
                Taille du téléchargement&nbsp;: 15&nbsp;Mo
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation de l'espace disque requis&nbsp;: 547 Mo (avec la
                documentation)
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation du temps de construction&nbsp;: 3,1 SBU (avec
                parallélisme=4 et la doc)
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Téléchargements supplémentaires
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Correctif recommandé&nbsp;: <a class="ulink" href=
                "https://www.linuxfromscratch.org/patches/blfs/svn/mesa-21.1.6-add_xdemos-1.patch">
                https://www.linuxfromscratch.org/patches/blfs/svn/mesa-21.1.6-add_xdemos-1.patch</a>
                (installe 2 programmes de démo pour tester Mesa - pas
                nécessaire si vous installez le paquet <a class="ulink" href=
                "ftp://ftp.freedesktop.org/pub/mesa/demos/">mesa-demos</a>)
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Dépendances de Mesa
        </h3>
        <h4>
          Requises
        </h4>
        <p class="required">
          <a class="xref" href="x7lib.html" title=
          "Bibliothèques Xorg">Bibliothèques Xorg</a>, <a class="xref" href=
          "libdrm.html" title="libdrm-2.4.107">libdrm-2.4.107</a> et
          <a class="xref" href="../general/python-modules.html#Mako" title=
          "Mako-1.1.5">Mako-1.1.5</a>
        </p>
        <h4>
          Recommandées
        </h4>
        <p class="recommended">
          <a class="xref" href="x7driver.html#libva" title=
          "libva-2.12.0">libva-2.12.0</a> (pour construire les pilotes VA-API
          pour certains pilotes gallium, remarquez qu'il y a une dépendance
          circulaire. Vous devez construire <span class=
          "application">libva</span> d'abord sans la prise en charge d'EGL et
          GLX, installer ce paquet puis reconstruire <span class=
          "application">libva</span>), <a class="xref" href=
          "x7driver.html#libvdpau" title="libvdpau-1.4">libvdpau-1.4</a>
          (pour construire les pilotes VDPAU), <a class="xref" href=
          "../general/llvm.html" title="LLVM-12.0.1">LLVM-12.0.1</a> (requis
          pour les pilotes Gallium3D, nouveau, r300 et radeonsi et pour
          swrast, le rasteriseur logiciel souvent appelé llvmpipe. Voir
          <a class="ulink" href=
          "https://docs.mesa3d.org/systems.html">https://docs.mesa3d.org/systems.html</a>
          pour plus d'information) et <a class="xref" href=
          "../general/wayland-protocols.html" title=
          "Wayland-Protocols-1.21">wayland-protocols-1.21</a> (requis pour
          <a class="xref" href="../kde/plasma-all.html" title=
          "Construction de Plasma 5">Plasma-5.22.4</a>, GNOME et recommandé
          pour <a class="xref" href="gtk3.html" title=
          "GTK+-3.24.30">GTK+-3.24.30</a>)
        </p>
        <h4>
          Facultatives
        </h4>
        <p class="optional">
          <a class="xref" href="../general/libgcrypt.html" title=
          "libgcrypt-1.9.4">libgcrypt-1.9.4</a>, <a class="xref" href=
          "../general/lm_sensors.html" title=
          "lm-sensors-3-6-0">lm-sensors-3-6-0</a>, <a class="xref" href=
          "../postlfs/nettle.html" title="Nettle-3.7.3">Nettle-3.7.3</a>,
          <a class="xref" href="../general/valgrind.html" title=
          "Valgrind-3.17.0">Valgrind-3.17.0</a>, <a class="ulink" href=
          "ftp://ftp.freedesktop.org/pub/mesa/demos/">mesa-demos</a> (fournit
          plus de 300 démos supplémentaires pour tester <span class=
          "application">Mesa</span>&nbsp;; ceci inclut les même programmes
          que ceux ajoutés par le correctif ci-dessus), <a class="ulink"
          href="http://omxil.sourceforge.net/">Bellagio OpenMAX Integration
          Layer</a> (pour les plateformes mobiles), <a class="ulink" href=
          "http://www.nongnu.org/libunwind/">libunwind</a> et <a class=
          "ulink" href=
          "https://github.com/tizonia/tizonia-openmax-il/wiki/Tizonia-OpenMAX-IL/">
          libtizonia</a>
        </p>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            Les instructions considèrent que <span class=
            "application">LLVM</span> avec les moteurs hôte et r600/amdgpu et
            les informations de type à l'exécution (RTTI, requis pour
            nouveau) sont installés. Vous devrez modifier les instructions si
            vous choisissez de ne pas tous les installer. Pour une
            explication de Gallium3D lisez <a class="ulink" href=
            "https://en.wikipedia.org/wiki/Gallium3D">https://en.wikipedia.org/wiki/Gallium3D</a>.
          </p>
        </div>
        <p class="usernotes">
          Notes utilisateur&nbsp;: <a class="ulink" href=
          "https://wiki.linuxfromscratch.org/blfs/wiki/mesa">https://wiki.linuxfromscratch.org/blfs/wiki/mesa</a>
        </p>
      </div>
      <div class="installation" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Installation de Mesa
        </h2>
        <p>
          Si vous avez téléchargé le correctif xdemos (nécessaire pour tester
          l'installation de Xorg par les instructions de BLFS), appliquez-le
          en lançant la commande suivante&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">patch -Np1 -i ../mesa-21.1.6-add_xdemos-1.patch</kbd></pre>
        <p>
          Ajustez un fichier de script dans la suite de tests pour utiliser
          Python 3, au lieu de Python 2 qui est obsolète&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">sed '1s/python/&amp;3/' -i bin/symbols-check.py</kbd></pre>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            Les mesures ci-dessus, et le contenu plus bas sont pour la
            construction complète. En général, les gens n'ont pas envie
            d'installer les pilotes qu'ils n'utilisent pas, donc les
            paragraphes suivants expliquent comment limiter les pilotes et
            donnent un exemple qui peut être réduit ou modifié si nécessaire.
          </p>
        </div>
        <p>
          Maintenant, sélectionnez les pilotes que vous souhaitez installer.
          Pour l'architecture X86, les pilotes gallium disponibles sont auto,
          <span class="emphasis"><em>ou un seul au choix parmi</em></span>
          i915, nouveau, r300, r600, radeonsi, svga, swrast et virgl. Ce
          dernier est recommandé si vous voulez lancer le système sous
          <a class="xref" href="../postlfs/qemu.html" title=
          "qemu-6.1.0">qemu-6.1.0</a>. Si vous souhaitez construire tous les
          pilotes gallium utilisez «&nbsp;auto&nbsp;».
        </p>
        <p>
          Les pilotes (non-gallium) DRI disponibles sous X86 sont auto,
          <span class="emphasis"><em>ou un seul au choix parmi</em></span>
          i915, i965, nouveau, r100, r200 et swrast. Utilisez
          «&nbsp;auto&nbsp;» pour construire tous les pilotes DRI ou utilisez
          une chaîne vide (DRI_DRIVERS="") si vous voulez seulement
          construire des pilotes gallium.
        </p>
        <p>
          Les plateformes («&nbsp;systèmes de fenêtrages&nbsp;») disponibles
          pour linux sous X86 sont x11, wayland et surfaceless. En ne
          spécifiant rien, le système de construction meson construira pour
          toutes ces plateformes si vous avez les dépendances, comme si vous
          aviez spécifié «&nbsp;-Dplatforms=auto&nbsp;».
        </p>
        <p>
          Modifiez les commandes ci-dessous pour indiquer les pilotes que
          vous souhaitez. Les pilotes listés ci-dessous couvriront les cartes
          vidéos les plus modernes et les machines virtuelles. Pour trouver
          de l'aide à la sélection des pilotes lisez <a class="ulink" href=
          "https://docs.mesa3d.org/systems.html">https://docs.mesa3d.org/systems.html</a>.
        </p>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            Bien que les pilotes nouveau puissent être construits pour
            gallium et dri, le pilote i915 ne peut être construit que pour
            l'un des deux.
          </p>
        </div>
        <pre class="userinput"><kbd class=
        "command">GALLIUM_DRV="i915,iris,nouveau,r600,radeonsi,svga,swrast,virgl"
DRI_DRIVERS="i965,nouveau"</kbd></pre>
        <p>
          Installez <span class="application">Mesa</span> en lançant les
          commandes suivantes&nbsp;:
        </p>
        <pre class="userinput"><kbd class="command">mkdir build &amp;&amp;
cd    build &amp;&amp;

meson --prefix=$XORG_PREFIX          \
      --buildtype=release            \
      -Ddri-drivers=$DRI_DRIVERS     \
      -Dgallium-drivers=$GALLIUM_DRV \
      -Dgallium-nine=false           \
      -Dglx=dri                      \
      -Dvalgrind=disabled            \
      -Dlibunwind=disabled           \
      ..                             &amp;&amp;

unset GALLIUM_DRV DRI_DRIVERS &amp;&amp;

ninja</kbd></pre>
        <p>
          Ce paquet ne fournit plus de suite de tests.
        </p>
        <p>
          Maintenant, en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class="command">ninja install</kbd></pre>
        <p>
          Si vous le désirez, installez la documentation facultative en
          lançant les commandes suivantes en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">install -v -dm755 /usr/share/doc/mesa-21.1.6 &amp;&amp;
cp -rfv ../docs/* /usr/share/doc/mesa-21.1.6</kbd></pre>
      </div>
      <div class="commands" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Explication des commandes
        </h2>
        <p>
          <em class="parameter"><code>--buildtype=release</code></em>&nbsp;:
          ce paramètre s'assure que la construction est complètement
          optimisée et désactive les assertions de débogage qui ralentiraient
          sévèrement les bibliothèques pour certains usages. Sans ce
          paramètre, la construction peut prendre dans les 2 Go.
        </p>
        <p>
          <em class="parameter"><code>-Ddir-drivers="..."</code></em>&nbsp;:
          Ce paramètre contrôle quels pilotes dri (non-gallium) doivent être
          construits.
        </p>
        <p>
          <em class=
          "parameter"><code>-Dgallium-drivers="..."</code></em>&nbsp;: Ce
          paramètre contrôle quels pilotes Gallium3D doivent être construits.
        </p>
        <p>
          <em class="parameter"><code>-Dgallium-nine=false</code></em>&nbsp;:
          évite de construire la prise en charge des jeux (Windows) conçus
          pour DX9. Indiquez true si vous voulez cette prise en charge.
        </p>
        <p>
          <em class="parameter"><code>-Dvalgrind=disabled</code></em>&nbsp;:
          Ce paramètre désactive l'utilisation de Valgrind pendant le
          processus de construction. Supprimez ce paramètre si vous avez
          installé Valgrind et souhaitez vérifier les fuites mémoire.
        </p>
        <p>
          <em class="parameter"><code>-Dlibunwind=disabled</code></em>&nbsp;:
          ce paramètre désactive l'utilisation de libunwind.
        </p>
        <p>
          <code class="option">-Dbuild-tests=true</code>&nbsp;: cette option
          activera le code de test. Pour lancer les tests, lancez&nbsp;:
          <span class="command"><strong>ninja test</strong></span>.
        </p>
      </div>
      <div class="content" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Contenu
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Programmes installés:</strong>
              <span class="segbody">glxgears et glxinfo</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Bibliothèques installées:</strong>
              <span class="segbody">libEGL.so, libGL.so, libGLESv1_CM.so,
              libGLESv2.so, libOSMesa.so, libXvMCnouveau.so, libXvMCr600.so,
              libgbm.so, libglapi.so, libvulkan_intel.so, libvulkan_lvp.so,
              libvulkan_radeon.so et libxatracker.so,</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Pilotes installés:</strong>
              <span class="segbody">d3dadapter9.so (facultatif), i915_dri.so,
              i965_dri.so, iris_dri.so, kms_swrast_dri.so, nouveau_dri.so,
              nouveau_drv_video.so, nouveau_vieux_dri.so, r200_dri.so
              (facultatif), r300_dri.so (facultatif), r600_dri.so,
              r600_drv_video.so, radeon_dri.so (facultatif), radeonsi_dri.so,
              radeonsi_drv_video.so, swrast_dri.so, virtio_gpu_dri.so,
              vmwgfx_dri.so, libvdpau_nouveau.so, libvdpau_r300.so
              (optional), libvdpau_r600.so et libvdpau_radeonsi.so</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Répertoires installés:</strong>
              <span class=
              "segbody">$XORG_PREFIX/{include/{EGL,GL,GLES,GLES2,GLES3,KHR,vulkan},lib/{dri,vdpau}},
              $XORG_PREFIX/include/d3adapter (optional), $XORG_PREFIX/lib/d3d
              (facultatif), $XORG_PREFIX/share/drirc.d (contient des
              contournements pour certaines applications, surtout les
              navigateurs et les jeux) $XORG_PREFIX/share/vulkan/icd.d et
              /usr/share/doc/mesa-21.1.6 (facultatif)</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Descriptions courtes
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="glxgears" name="glxgears"></a><span class=
                    "term"><span class=
                    "command"><strong>glxgears</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est une démo GL utile pour dépanner des problèmes
                    graphiques
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="glxinfo" name="glxinfo"></a><span class=
                    "term"><span class=
                    "command"><strong>glxinfo</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un programme de diagnostic affichant des informations
                    sur le matériel graphique et les bibliothèques GL
                    installées
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="libEGL" name="libEGL"></a><span class=
                    "term"><code class="filename">libEGL.so</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    fournit nativement une interface de plate-forme graphique
                    qui est définie avec les spécifications EGL-1.4
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="libgbm" name="libgbm"></a><span class=
                    "term"><code class="filename">libgbm.so</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    est la bibliothèque de gestion du tampon graphique de
                    <span class="application">Mesa</span>
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="libGLESv1_CM" name="libGLESv1_CM"></a><span class=
                    "term"><code class=
                    "filename">libGLESv1_CM.so</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    est la bibliothèque OpenGL ES 1.1 de <span class=
                    "application">Mesa</span>
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="libGLES2" name="libGLES2"></a><span class=
                    "term"><code class="filename">libGLES2.so</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    est la bibliothèque OpenGL ES 2.0 de <span class=
                    "application">Mesa</span>
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="libGL" name="libGL"></a><span class=
                    "term"><code class="filename">libGL.so</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    est la bibliothèque OpenGL principale de <span class=
                    "application">Mesa</span>
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="libOSMesa" name="libOSMesa"></a><span class=
                    "term"><code class="filename">libOSMesa.so</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    est la bibliothèque de rendu hors-écran de <span class=
                    "application">Mesa</span>
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="xcb-util-cursor.html" title=
          "xcb-util-cursor-0.1.3">Précédent</a>
          <p>
            xcb-util-cursor-0.1.3
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="xbitmaps.html" title=
          "xbitmaps-1.1.2">Suivant</a>
          <p>
            xbitmaps-1.1.2
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="installing.html" title=
          "Chapitre&nbsp;24.&nbsp;Environnement X Window System">Niveau
          supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition systemd) - Version r10.1-914+">
          Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
