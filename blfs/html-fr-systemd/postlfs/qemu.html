<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      qemu-6.1.0
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-r10.1-1007+">
    <div class="navheader">
      <h4>
        Au-delà de Linux<sup>®</sup> From Scratch (édition <span class=
        "phrase">systemd)</span> - Version r10.1-1007+
      </h4>
      <h3>
        Chapitre&nbsp;8.&nbsp;Virtualisation
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="virtualization.html" title=
          "Virtualisation">Précédent</a>
          <p>
            Virtualisation
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="../general/general.html" title=
          "Bibliothèques et outils généraux">Suivant</a>
          <p>
            Bibliothèques et outils généraux
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="virtualization.html" title=
          "Chapitre&nbsp;8.&nbsp;Virtualisation">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition systemd) - Version r10.1-1007+">
          Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="qemu" name="qemu"></a>qemu-6.1.0
      </h1>
      <div class="package" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Introduction à qemu
        </h2>
        <p>
          <span class="application">qemu</span> est une solution de
          virtualisation complète pour Linux avec un processeur x86
          supportant les extensions de virtualisation (Intel VT ou AMD-V).
        </p>
        <p>
          This package is known to build and work properly using an LFS-11.0
          platform.
        </p>
        <h3>
          Informations sur le paquet
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Téléchargement (HTTP)&nbsp;: <a class="ulink" href=
                "https://download.qemu-project.org/qemu-6.1.0.tar.xz">https://download.qemu-project.org/qemu-6.1.0.tar.xz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Téléchargement (FTP)&nbsp;: <a class="ulink" href=""></a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Somme de contrôle MD5 du téléchargement&nbsp;:
                47f776c276a24f42108ba512a2aa3013
              </p>
            </li>
            <li class="listitem">
              <p>
                Taille du téléchargement&nbsp;: 106&nbsp;Mo
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation de l'espace disque requis&nbsp;: 1.9&nbsp;Go
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation du temps de construction&nbsp;: 1,2 SBU (avec
                parallélisme = 4&nbsp;; plus 0,3 SBU pour les tests)
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Dépendances de Qemu
        </h3>
        <h4>
          Requises
        </h4>
        <p class="required">
          <a class="xref" href="../general/glib2.html" title=
          "GLib-2.68.4">GLib-2.68.4</a> et <a class="xref" href=
          "../x/installing.html" title=
          "Chapitre&nbsp;24.&nbsp;Environnement X Window System">Système X
          Window</a>
        </p>
        <h4>
          Recommandées
        </h4>
        <p class="recommended">
          <a class="xref" href="../multimedia/alsa-lib.html" title=
          "alsa-lib-1.2.5.1">alsa-lib-1.2.5.1</a> et <a class="xref" href=
          "../multimedia/sdl2.html" title="SDL2-2.0.16">SDL2-2.0.16</a>
        </p>
        <h4>
          Facultatives
        </h4>
        <p class="optional">
          En fonction du système de son, divers paquets parmi <a class="xref"
          href="../multimedia/alsa.html" title="ALSA-1.2.5">ALSA-1.2.5</a>,
          <a class="xref" href="../general/python3.html" title=
          "Python-3.9.6">Python-3.9.6</a>, <a class="xref" href=
          "../multimedia/pulseaudio.html" title=
          "PulseAudio-15.0">PulseAudio-15.0</a>, <a class="xref" href=
          "../general/bluez.html" title="BlueZ-5.61">BlueZ-5.61</a>,
          <a class="xref" href="../basicnet/curl.html" title=
          "cURL-7.78.0">cURL-7.78.0</a>, <a class="xref" href=
          "cyrus-sasl.html" title="Cyrus SASL-2.1.27">Cyrus SASL-2.1.27</a>,
          <a class="xref" href="gnutls.html" title=
          "GnuTLS-3.7.2">GnuTLS-3.7.2</a>, <a class="xref" href=
          "../x/gtk2.html" title="GTK+-2.24.33">GTK+-2.24.33</a>, <a class=
          "xref" href="../x/gtk3.html" title="GTK+-3.24.30">GTK+-3.24.30</a>,
          <a class="xref" href="../general/libusb.html" title=
          "libusb-1.0.24">libusb-1.0.24</a>, <a class="xref" href=
          "../general/libgcrypt.html" title=
          "libgcrypt-1.9.4">libgcrypt-1.9.4</a>, <a class="xref" href=
          "../general/libssh2.html" title="libssh2-1.9.0">libssh2-1.9.0</a>,
          <a class="xref" href="../general/lzo.html" title=
          "LZO-2.10">LZO-2.10</a>, <a class="xref" href="nettle.html" title=
          "Nettle-3.7.3">Nettle-3.7.3</a>, <a class="xref" href=
          "../x/mesa.html" title="Mesa-21.2.1">Mesa-21.2.1</a>, <a class=
          "xref" href="../multimedia/sdl.html" title=
          "SDL-1.2.15">SDL-1.2.15</a>, <a class="xref" href=
          "../gnome/vte.html" title="VTE-0.64.2">VTE-0.64.2</a> ou <a class=
          "xref" href="../lxde/vte2.html" title="Vte-0.28.2">Vte-0.28.2</a>
          et <a class="ulink" href=
          "https://gitlab.freedesktop.org/spice/libcacard">libcacard</a>
        </p>
        <h4>
          Dépendances facultatives pour installer la documentation
        </h4>
        <p class="optional">
          <a class="ulink" href=
          "https://www.sphinx-doc.org/en/master/index.html">sphinx</a> avec
          le thème <a class="ulink" href=
          "https://pypi.org/project/sphinx-rtd-theme/">sphinx-rtd-theme</a>
        </p>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            La liste des dépendances facultatives n'est pas complète.
            Regardez la sortie de <span class="command"><strong>./configure
            --help</strong></span> pour une liste plus complète.
          </p>
        </div>
        <p class="usernotes">
          Notes utilisateur&nbsp;: <a class="ulink" href=
          "https://wiki.linuxfromscratch.org/blfs/wiki/qemu">https://wiki.linuxfromscratch.org/blfs/wiki/qemu</a>
        </p>
      </div>
      <div class="sect2" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          <a id="qemu-prereq" name="qemu-prereq"></a>Prérequis de KVM
        </h2>
        <p>
          Avant de construite <span class="application">qemu</span>, vérifier
          si votre processeur supporte la technologie de virtualisation
          (VT)&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">egrep '^flags.*(vmx|svm)' /proc/cpuinfo</kbd></pre>
        <p>
          Si vous avez une sortie, vous avez la technologie VT (vmx pour les
          processeurs Intel et svm pour les processeurs AMD). Vous devez
          également allez voir dans votre BIOS et vérifier qu'elle est
          activée. Après l'activation, redémarrez sur votre LFS.
        </p>
      </div>
      <div class="kernel" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          <a id="qemu-kernel" name="qemu-kernel"></a>Configuration du noyau
        </h2>
        <p>
          Activez les options suivantes dans la configuration du noyau et
          recompilez le noyau si nécessaire&nbsp;:
        </p>
        <pre class="screen"><code class=
        "literal">[*] Virtualization:  ---&gt;                                             [CONFIG_VIRTUALIZATION]
  &lt;*/M&gt;   Kernel-based Virtual Machine (KVM) support [CONFIG_KVM]
  &lt;*/M&gt;     KVM for Intel (and compatible) processors support         [CONFIG_KVM_INTEL]
  &lt;*/M&gt;     KVM for AMD processors support                            [CONFIG_KVM_AMD]</code></pre>
        <p>
          Les options Intel ou AMD ne sont pas toutes les deux nécessaires,
          mais celle correspondante à votre processeur est obligatoire.
        </p>
        <p>
          Pour pour utiliser les périphériques <span class=
          "quote">«&nbsp;<span class="quote">pont</span>&nbsp;»</span>
          (bridge), comme expliqué ci-dessous, vérifiez que <a class="xref"
          href="../basicnet/bridge-utils.html" title=
          "bridge-utils-1.7.1">bridge-utils-1.7.1</a> est installé et que les
          options suivantes dans la configuration du noyau sont
          activées&nbsp;:
        </p>
        <pre class="screen"><code class=
        "literal">[*] Networking support  ---&gt;                         [CONFIG_NET]
  Networking options  ---&gt;
    &lt;*/M&gt; 802.1d Ethernet Bridging                   [CONFIG_BRIDGE]
Device Drivers  ---&gt;
  [*] Network device support  ---&gt;                   [CONFIG_NETDEVICES]
    &lt;*/M&gt;    Universal TUN/TAP device driver support [CONFIG_TUN]</code></pre>
      </div>
      <div class="installation" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Installation de qemu
        </h2>
        <p>
          Ajoutez tous les utilisateurs qui peuvent utiliser le périphérique
          KVM dans ce groupe&nbsp;:
        </p>
        <pre class="root"><kbd class="command">usermod -a -G kvm <em class=
        "replaceable"><code>&lt;username&gt;</code></em></kbd></pre>
        <p>
          Installez <span class="application">qemu</span> en lançant les
          commandes suivantes&nbsp;:
        </p>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            Qemu est capable de faire tourner de nombreuses architectures. La
            procédure de construction est aussi capable de construire les
            différentes cibles en une fois à l'aide d'une liste de cibles
            séparées par des virgules à l'option <code class=
            "option">--target-list</code>. Lancez <span class=
            "command"><strong>./configure --help</strong></span> pour avoir
            une liste complète des cibles possibles.
          </p>
        </div>
        <pre class="userinput"><kbd class=
        "command">if [ $(uname -m) = i686 ]; then
   QEMU_ARCH=i386-softmmu
else
   QEMU_ARCH=x86_64-softmmu
fi


mkdir -vp build &amp;&amp;
cd        build &amp;&amp;

../configure --prefix=/usr               \
             --sysconfdir=/etc           \
             --localstatedir=/var        \
             --target-list=$QEMU_ARCH    \
             --audio-drv-list=alsa       \
             --docdir=/usr/share/doc/qemu-6.1.0 &amp;&amp;

unset QEMU_ARCH &amp;&amp;

make</kbd></pre>
        <p>
          <span class="application">qemu</span> utilise <span class=
          "command"><strong>ninja</strong></span> comme sous-processus lors
          de la construction. Pour lancer les tests, lancez&nbsp;:
          <span class="command"><strong>ninja test</strong></span>.
        </p>
        <p>
          Maintenant, en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class="command">make install</kbd></pre>
        <p>
          Vous pouvez aussi avoir besoin d'ajouter une règle Udev pour que le
          périphérique KVM ait les bonnes permissions&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">cat &gt; /lib/udev/rules.d/65-kvm.rules &lt;&lt; "EOF"
<code class="literal">KERNEL=="kvm", GROUP="kvm", MODE="0660"</code>
EOF</kbd></pre>
        <p>
          Modifiez les permissions et le propriétaire d'un script d'aide, qui
          est requis lorsque vous utilisez un périphérique <span class=
          "quote">«&nbsp;<span class="quote">pont</span>&nbsp;»</span> (voir
          en bas)&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">chgrp kvm  /usr/libexec/qemu-bridge-helper &amp;&amp;
chmod 4750 /usr/libexec/qemu-bridge-helper</kbd></pre>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            Par confort vous pouvez vouloir créer un lien symbolique pour
            lancer le programme installé. Par exemple&nbsp;:
          </p>
          <pre class="root"><kbd class=
          "command">ln -sv qemu-system-`uname -m` /usr/bin/qemu</kbd></pre>
        </div>
      </div>
      <div class="commands" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Explication des commandes
        </h2>
        <p>
          <em class=
          "parameter"><code>--audio-drv-list=alsa</code></em>&nbsp;: Ce
          paramètre initialise le pilote audio pour ALSA. Voir plus bas pour
          activer d'autres pilotes audio.
        </p>
        <p>
          <code class="option">--audio-drv-list=pa</code>&nbsp;: Ce paramètre
          initialise le pilote audio pour pulseaudio. Pour les autres pilotes
          regardez la liste --audio-drv-list dans la sortie de l'aide de
          <span class="command"><strong>configure</strong></span>. Le pilote
          audio par défaut est OSS. Pour activer le support pour alsa et
          pulseaudio, utilisez <code class=
          "option">--audio-drv-list=alsa,pa</code>
        </p>
      </div>
      <div class="using" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Utilisation de Qemu
        </h2>
        <p>
          Comme l'utilisation de qemu signifie d'utiliser un ordinateur
          virtuel, les étapes pour mettre en place la machine virtuelle sont
          très proches de celles d'un vrai ordinateur. Vous devrez décider du
          CPU, de la mémoire, des disques, des périphériques USB, des cartes
          réseau, de la taille de l'écran, etc. Une fois que le <span class=
          "quote">«&nbsp;<span class="quote">matériel</span>&nbsp;»</span>
          est décidé, vous devrez par exemple choisir comment connecter la
          machine à internet et installer un système d'exploitation. Dans la
          suite, nous montrons des façons simples d'effectuer ces étapes.
          Mais qemu est bien plus que ça, et il est fortement recommandé de
          lire la documentation de qemu dans <code class=
          "filename">/usr/share/doc/qemu-6.1.0/qemu-doc.html</code>.
        </p>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            Il est d'usage d'appeler l'ordinateur qui fait tourner qemu
            l'<span class="quote">«&nbsp;<span class=
            "quote">hôte</span>&nbsp;»</span> et la machine émulée qui tourne
            sous qemu l'<span class="quote">«&nbsp;<span class=
            "quote">invitée</span>&nbsp;»</span>. Nous utiliserons ces
            notations dans la suite.
          </p>
        </div>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            Les instructions suivantes supposent que vous avez créé le lien
            symbolique facultatif, <code class="filename">qemu</code>. De
            plus, vous devez exécuter <span class=
            "command"><strong>qemu</strong></span> depuis un terminal dans
            une fenêtre X (soit localement, soit à travers ssh).
          </p>
        </div>
        <h3>
          Disk
        </h3>
        <p>
          Un disque virtuel peut être mis en place de cette manière&nbsp;:
        </p>
        <pre class="userinput"><kbd class="command">VDISK_SIZE=<em class=
        "replaceable"><code>50G</code></em>
VDISK_FILENAME=<em class="replaceable"><code>vdisk.img</code></em>
qemu-img create -f qcow2 $VDISK_FILENAME $VDISK_SIZE</kbd></pre>
        <p>
          Ajustez la taille du disque virtuel et le nom du fichier image
          comme vous le souhaitez. La taille réelle du fichier sera plus
          petite que spécifiée, mais s'agrandira quand il sera utilisé, donc
          une valeur élevée reste sure.
        </p>
        <h3>
          Système d'exploitation
        </h3>
        <p>
          Pour installer un système d'exploitation, téléchargez une image ISO
          de votre distribution Linux préférée. Pour les besoins de
          l'exemple, nous utiliserons une distribution <code class=
          "filename">Fedora-16-x86_64-Live-LXDE.iso</code> dans le répertoire
          courant. Exécutez les commandes suivantes&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">qemu -enable-kvm                           \
     -drive file=$VDISK_FILENAME           \
     -cdrom Fedora-16-x86_64-Live-LXDE.iso \
     -boot d                               \
     -m <em class="replaceable"><code>1G</code></em></kbd></pre>
        <p>
          Suivez la procédure d'installation normale pour la distribution
          choisie. L'option <em class="parameter"><code>-boot</code></em>
          spécifie l'ordre de démarrage des disques comme une chaîne de
          lettres de lecteur. Les lettres valides de lecteurs sont&nbsp;: a,
          b (lecteur de disquettes 1 et 2), c (premier disque dur), d
          (premier lecteur CD-ROM). L'option <em class=
          "parameter"><code>-m</code></em> est la quantité de mémoire à
          utiliser pour la machine virtuelle. Le choix dépend de la charge de
          l'hôte. Les distributions modernes devraient être à l'aise avec 1
          Go. L'option <em class="parameter"><code>-enable-kvm</code></em>
          permet l'accélération matérielle. Sans ce paramètre, l'émulation
          est assez lente.
        </p>
        <h3>
          Définition du matériel virtuel
        </h3>
        <p>
          Le matériel de la machine virtuelle est défini par la ligne de
          commande de qemu. Par exemple&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">qemu -enable-kvm                     \
     -smp 4                          \
     -cpu host                       \
     -m 1G                           \
     -drive file=$VDISK_FILENAME     \
     -cdrom grub-img.iso             \
     -boot order=c,once=d,menu=on    \
     -net nic,netdev=net0            \
     -netdev user,id=net0            \
     -device ac97                    \
     -vga std                        \
     -serial mon:stdio               \
     -name "fedora-16"</kbd></pre>
        <h3>
          Signification des options de la ligne de commande
        </h3>
        <p>
          <em class="parameter"><code>-enable-kvm</code></em>&nbsp;: active
          le support complet de la virtualisation KVM. Sur certain matériels,
          il est nécessaire d'ajouter l'option non-documentée <code class=
          "option">-machine smm=off</code> pour activer KVM.
        </p>
        <p>
          <em class="parameter"><code>-smp &lt;N&gt;</code></em>&nbsp;:
          active le multi-tâche symétrique avec &lt;N&gt; processeurs.
        </p>
        <p>
          <em class="parameter"><code>-cpu &lt;model&gt;</code></em>&nbsp;:
          simule le &lt;modèle&gt; du processeur. La liste des modèles
          supportés peut être obtenu avec <code class="option">-cpu
          help</code>.
        </p>
        <p>
          <em class="parameter"><code>-drive
          file=&lt;filename&gt;</code></em>&nbsp;: définie un disque virtuel
          dont l'image est enregistrée dans <code class=
          "filename">&lt;filename&gt;</code>.
        </p>
        <p>
          <em class="parameter"><code>-cdrom grub-img.iso</code></em>&nbsp;:
          définit un fichier formaté en iso pour l'utiliser comme cdrom. Ici
          nous utilisons le disque de secours de grub, qui peut être pratique
          lorsque quelque chose ne va pas au démarrage.
        </p>
        <p>
          <em class="parameter"><code>-boot
          order=c,once=d,menu=on</code></em>&nbsp;: définit l'ordre de
          démarrage pour le BIOS virtuel.
        </p>
        <p>
          <em class="parameter"><code>-net
          nic,netdev=&lt;netid&gt;</code></em>&nbsp;: définie la carte réseau
          connectée au périphérique réseau avec l'id &lt;netid&gt;.
        </p>
        <p>
          <em class="parameter"><code>-netdev
          user,id=&lt;netid&gt;</code></em>&nbsp;: définie le périphérique
          <span class="quote">«&nbsp;<span class=
          "quote">utilisateur</span>&nbsp;»</span> réseau. Il s'agit d'un
          réseau local virtuel avec les adresses 10.0.2.0/24, où l'hôte à
          l'adresse 10.0.2.2 et agit comme une passerelle vers internet, et
          avec un serveur de nom à l'adresse 10.0.2.3, et un serveur smb à
          l'adresse 10.0.2.4. Un serveur DHCP inclus peut allouer des
          adresses entre 10.0.2.15 et 10.0.2.31.
        </p>
        <p>
          <em class="parameter"><code>-soundhw
          &lt;model&gt;</code></em>&nbsp;: définie le modèle de la carte son.
          La liste peut être obtenue avec <code class="option">-soundhw
          help</code>.
        </p>
        <p>
          <em class="parameter"><code>-vga &lt;type&gt;</code></em>&nbsp;:
          définie le type de carte vga à émuler.
        </p>
        <p>
          <em class="parameter"><code>-serial mon:stdio</code></em>&nbsp;:
          envoie le port série de l'invité (<code class=
          "filename">/dev/ttyS0</code> sur les invités linux), multiplexé
          avec le moniteur qemu, vers l'entrée standard et la sortie du
          processus qemu.
        </p>
        <p>
          <em class="parameter"><code>-name &lt;name&gt;</code></em>&nbsp;:
          définit le nom de l'invité. Ce nom est affiché dans le titre de la
          fenêtre de l'invité. Il peut être utile si vous lancez plusieurs
          invités en même temps.
        </p>
        <h3>
          Contrôle de l'affichage émulé
        </h3>
        <p>
          Il peut arriver que la fenêtre de l'invité affichée par qemu ne
          corresponde pas à la plein capacité de la carte vga émulée. Par
          exemple la carte vmware est capable d'afficher en 1600x900 mais ne
          s'affiche qu'en 1024x768 par défaut. Une configuration appropriée
          de Xorg sur l'invité permet d'utiliser la taille maximale
          (remarquez que le pilote vidéo Xorg à utiliser est <a class="xref"
          href="../x/x7driver.html#xorg-vmware-driver" title=
          "Xorg VMware Driver-13.3.0">Xorg VMware Driver-13.3.0</a>)&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">cat &gt; /usr/share/X11/xorg.conf.d/20-vmware.conf &lt;&lt; "EOF"
<code class="literal">Section         "Monitor"
  Identifier    "Monitor0"
  # cvt 1600 900
  # 1600x900 59.95 Hz (CVT 1.44M9) hsync: 55.99 kHz; pclk: 118.25 MHz
  Modeline      "1600x900"  118.25  1600 1696 1856 2112  900 903 908 934 -hsync +vsync
  Option        "PreferredMode" "1600x900"
  HorizSync     1-200
  VertRefresh   1-200
EndSection

Section         "Device"
  Identifier    "VMware SVGA II Adapter"
  Option        "Monitor" "default"
  Driver        "vmware"
EndSection

Section         "Screen"
  Identifier    "Default Screen"
  Device        "VMware SVGA II Adapter"
  Monitor       "Monitor0"

  SubSection    "Display"
    Depth       24
    Modes       "1600x900" "1440x900" "1366x768" "1280x720" "800x480"
  EndSubSection

EndSection</code>
EOF</kbd></pre>
        <p>
          Des tailles supplémentaires seront disponibles en plus des tailles
          natives. Vous devrez redémarrer X pour rendre ces nouvelles tailles
          disponibles.
        </p>
        <h3>
          Networking
        </h3>
        <p>
          La solution pour le réseau ci-dessus permet à l'invité d'accéder au
          réseau local à travers l'hôte (et éventuellement d'accéder à
          internet à travers des routeurs locaux), mais l'inverse n'est pas
          vrai. Pas même l'hôte ne peut accéder à l'invité, à moins que la
          redirection de port ne soit activée. Et dans le cas où plusieurs
          invités tourneraient, ils ne peuvent pas communiquer entre eux.
          D'autres périphériques réseau peuvent être utilisés pour cela. Par
          exemple, le périphérique <span class="quote">«&nbsp;<span class=
          "quote">socket</span>&nbsp;»</span> qui permet à plusieurs invités
          de partager un réseau virtuel commun. Dans la suite, nous décrivons
          plus en détails comment mettre en place le périphérique
          <span class="quote">«&nbsp;<span class=
          "quote">bridge</span>&nbsp;»</span> qui permet aux invités
          d'apparaître comme s'ils étaient connectés au réseau local. Toutes
          les commandes ce-dessous devraient être lancés en tant
          qu'utilisateur <code class="systemitem">root</code>.
        </p>
        <p>
          Autorisez le système hôte à transférer les paquets IP&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">sysctl -w net.ipv4.ip_forward=1</kbd></pre>
        <p>
          Pour rendre cela permanent, ajoutez la commande au fichier
          <code class=
          "filename">etc/sysctl.d/60-net-forward.conf</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">cat &gt;&gt; /etc/sysctl.d/60-net-forward.conf &lt;&lt; EOF
<code class="literal">net.ipv4.ip_forward=1</code>
EOF</kbd></pre>
        <p>
          Initialisez un fichier de configuration requis&nbsp;:
        </p>
        <pre class="root">
<kbd class="command">install -vdm 755 /etc/qemu &amp;&amp;
echo allow br0 &gt; /etc/qemu/bridge.conf</kbd></pre>
        <p>
          Dans la commande au-dessus, remplacez l'option <em class=
          "parameter"><code>-netdev user,...</code></em> par <em class=
          "parameter"><code>-netdev bridge,id=net0</code></em>.
        </p>
      </div>
      <div class="content" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Contenu
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Programmes installés:</strong>
              <span class="segbody">elf2dmp, qemu (lien symbolique),
              qemu-edid, qemu-ga, qemu-img, qemu-io, qemu-keymap, qemu-nbd,
              qemu-pr-helper, qemu-storage-daemon et
              qemu-system-&lt;arch&gt;</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Bibliothèque installée:</strong>
              <span class="segbody">None</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Répertoires installés:</strong>
              <span class="segbody">/usr/share/qemu et
              /usr/share/doc/qemu-6.1.0 (facultatif)</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Descriptions courtes
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="elf2dmp" name="elf2dmp"></a><span class=
                    "term"><span class=
                    "command"><strong>elf2dmp</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    Convertit les fichiers du format elf au format dmp
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="qemu-edid" name="qemu-edid"></a><span class=
                    "term"><span class=
                    "command"><strong>qemu-edid</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un outil de test pour le générateur EDID de qemu
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="qemu-ga" name="qemu-ga"></a><span class=
                    "term"><span class=
                    "command"><strong>qemu-ga</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    implémente le support pour les commandes QMP (Protocole
                    de surveillance QEMU) et les événements qui terminent et
                    débutent respectivement au sein de l'invité à l'aide d'un
                    agent intégré dans le cadre de QEMU
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="qemu-img" name="qemu-img"></a><span class=
                    "term"><span class=
                    "command"><strong>qemu-img</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    fournit les commandes pour gérer les images disques QEMU
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="qemu-io" name="qemu-io"></a><span class=
                    "term"><span class=
                    "command"><strong>qemu-io</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un programme de diagnostic et de manipulation pour
                    les médias de mémoire (virtuels). Il est encore à un
                    stade de développement précoce
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="qemu-keymap" name="qemu-keymap"></a><span class=
                    "term"><span class=
                    "command"><strong>qemu-keymap</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    génère les dispositions inverses à partir des
                    dispositions xkb, que vous pouvez utiliser avec l'option
                    « -k » de qemu en ligne de commande
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="qemu-nbd" name="qemu-nbd"></a><span class=
                    "term"><span class=
                    "command"><strong>qemu-nbd</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    exporte les images disques Qemu en utilisant le protocole
                    disque QEMU "Network Block Device" (NBD)
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="qemu-pr-helper" name=
                    "qemu-pr-helper"></a><span class="term"><span class=
                    "command"><strong>qemu-pr-helper</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    Implémente l'outil de réservation persistante pour QEMU
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="qemu-storage-daemon" name=
                    "qemu-storage-daemon"></a><span class="term"><span class=
                    "command"><strong>qemu-storage-daemon</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    vous permet de modifier les images disque qui avec le
                    protocole de surveillance de QEMU (QMP) sans lancer de VM
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="qemu-system" name="qemu-system"></a><span class=
                    "term"><span class=
                    "command"><strong>qemu-system-x86_64</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est l'émulateur QEMU de système PC
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="virtualization.html" title=
          "Virtualisation">Précédent</a>
          <p>
            Virtualisation
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="../general/general.html" title=
          "Bibliothèques et outils généraux">Suivant</a>
          <p>
            Bibliothèques et outils généraux
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="virtualization.html" title=
          "Chapitre&nbsp;8.&nbsp;Virtualisation">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition systemd) - Version r10.1-1007+">
          Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
