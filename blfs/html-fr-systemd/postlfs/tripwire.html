<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      Tripwire-2.4.3.7
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-r10.1-914+">
    <div class="navheader">
      <h4>
        Au-delà de Linux<sup>®</sup> From Scratch (édition <span class=
        "phrase">systemd)</span> - Version r10.1-914+
      </h4>
      <h3>
        Chapitre&nbsp;4.&nbsp;Sécurité
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="sudo.html" title=
          "Sudo-1.9.7p2">Précédent</a>
          <p>
            Sudo-1.9.7p2
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="volume_key.html" title=
          "volume_key-0.3.12">Suivant</a>
          <p>
            volume_key-0.3.12
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="security.html" title=
          "Chapitre&nbsp;4.&nbsp;Sécurité">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition systemd) - Version r10.1-914+">
          Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="tripwire" name="tripwire"></a>Tripwire-2.4.3.7
      </h1>
      <div class="package" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Introduction à Tripwire
        </h2>
        <p>
          Le paquet <span class="application">Tripwire</span> contient des
          programmes utilisés pour vérifier l'intégrité des fichiers sur un
          système donné.
        </p>
        <p>
          This package still needs to be checked.
        </p>
        <h3>
          Informations sur le paquet
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Téléchargement (HTTP)&nbsp;: <a class="ulink" href=
                "https://github.com/Tripwire/tripwire-open-source/releases/download/2.4.3.7/tripwire-open-source-2.4.3.7.tar.gz">
                https://github.com/Tripwire/tripwire-open-source/releases/download/2.4.3.7/tripwire-open-source-2.4.3.7.tar.gz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Téléchargement (FTP)&nbsp;: <a class="ulink" href=""></a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Somme de contrôle MD5 du téléchargement&nbsp;:
                a5cf1bc2f235f5d8ca458f00548db6ee
              </p>
            </li>
            <li class="listitem">
              <p>
                Taille du téléchargement&nbsp;: 980 Ko
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation de l'espace disque requis&nbsp;: 29 Mo
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation du temps de construction&nbsp;: 1.6 SBU (en
                scriptant l'installation)
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Dépendances de Tripwire
        </h3>
        <h4>
          Facultatives
        </h4>
        <p class="optional">
          Un <a class="xref" href="../server/mail.html" title=
          "Chapitre&nbsp;21.&nbsp;Serveurs de messagerie électronique">MTA</a>
        </p>
        <p class="usernotes">
          Notes utilisateur&nbsp;: <a class="ulink" href=
          "https://wiki.linuxfromscratch.org/blfs/wiki/tripwire">https://wiki.linuxfromscratch.org/blfs/wiki/tripwire</a>
        </p>
      </div>
      <div class="installation" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Installation de Tripwire
        </h2>
        <p>
          Compilez <span class="application">Tripwire</span> en lançant les
          commandes suivantes&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">sed -e '/^CLOBBER/s/false/true/'         \
    -e 's|TWDB="${prefix}|TWDB="/var|'   \
    -e '/TWMAN/ s|${prefix}|/usr/share|' \
    -e '/TWDOCS/s|${prefix}/doc/tripwire|/usr/share/doc/tripwire-2.4.3.7|' \
    -i installer/install.cfg                               &amp;&amp;

find . -name Makefile.am | xargs                           \
    sed -i 's/^[[:alpha:]_]*_HEADERS.*=/noinst_HEADERS =/' &amp;&amp;

sed '/dist/d' -i man/man?/Makefile.am                      &amp;&amp;
autoreconf -fi                                             &amp;&amp;

./configure --prefix=/usr --sysconfdir=/etc/tripwire       &amp;&amp;
make CPPFLAGS=-std=c++11</kbd></pre>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            La configuration par défaut consiste à utiliser un MTA local. Si
            vous n'avez pas installé de MTA et si vous ne souhaitez pas en
            installer, modifiez <code class=
            "filename">install/install.cfg</code> pour utiliser plutôt un
            serveur SMTP. Sans cela, l'installation échouera.
          </p>
        </div>
        <p>
          Ce paquet n'est pas fourni avec une suite de tests.
        </p>
        <p>
          Maintenant, en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class="command">make install &amp;&amp;
cp -v policy/*.txt /usr/share/doc/tripwire-2.4.3.7</kbd></pre>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            Pendant <span class="command"><strong>make
            install</strong></span>, plusieurs questions sont posées,
            incluant les mots de passe. Si vous voulez faire un script, vous
            devez appliquer un <span class="application">sed</span> avant de
            lancer <span class="command"><strong>make
            install</strong></span>:
          </p>
          <pre class="userinput"><kbd class=
          "command">sed -i -e 's@installer/install.sh@&amp; -n -s <em class=
          "replaceable"><code>&lt;site-password&gt;</code></em> -l <em class=
          "replaceable"><code>&lt;local-password&gt;</code></em>@' Makefile</kbd></pre>
          <p>
            Bien sûr, vous devez faire cela avec des mots de passe triviaux
            et les changer ensuite.
          </p>
          <p>
            Un autre problème quand on utilise un script est que
            l'installateur termine quand l'entrée standard n'est pas un
            terminal. Vous pouvez désactiver ce comportement avec le sed
            suivant&nbsp;:
          </p>
          <pre class="userinput"><kbd class=
          "command">sed '/-t 0/,+3d' -i installer/install.sh</kbd></pre>
        </div>
      </div>
      <div class="commands" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Explication des commandes
        </h2>
        <p>
          <span class="command"><strong>sed ...
          installer/install.cfg</strong></span>&nbsp;: Cette commande dit au
          paquet d'installer la base de données et les rapports du programme
          dans <code class="filename">/var/lib/tripwire</code> et indique les
          bons emplacements pour les pages de manuel et la documentation.
        </p>
        <p>
          <span class="command"><strong>find ...</strong></span>,
          <span class="command"><strong>sed ...</strong></span> et
          <span class="command"><strong>autoreconf -fi</strong></span>&nbsp;:
          Le système de construction est inutilisable tel quel et doit être
          modifié pour que la construction réussisse.
        </p>
        <p>
          <code class="option">CPPFLAGS=-std=c++11</code>&nbsp;: il faut
          paramétrer les drapeaux du préprocesseur C++ à la version 11 pour
          éviter un conflit avec la version par défaut qui est c++17 dans les
          versions récentes de gcc.
        </p>
        <p>
          <span class="command"><strong>make install</strong></span>&nbsp;:
          Cette commande crée les clés de sécurité <span class=
          "application">Tripwire</span> et installe les binaires. Il y a deux
          clés : une clé distante et une clé locale qui sont stockées dans
          <code class="filename">/etc/tripwire/</code>.
        </p>
        <p>
          <span class="command"><strong>cp -v policy/*.txt
          /usr/doc/tripwire-2.4.3.7</strong></span>&nbsp;: Cette commande
          installe les modèles de fichiers de politique de <span class=
          "application">tripwire</span> avec le reste de la documentation de
          <span class="application">tripwire</span>.
        </p>
      </div>
      <div class="configuration" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Configuration de Tripwire
        </h2>
        <div class="sect3">
          <h3 class="sect3">
            <a id="tripwire-config" name="tripwire-config"></a>Fichiers de
            configuration
          </h3>
          <p>
            <code class="filename">/etc/tripwire/*</code>
          </p>
        </div>
        <div class="sect3">
          <h3 class="sect3">
            Informations sur la configuration
          </h3>
          <p>
            <span class="application">Tripwire</span> utilise un fichier de
            règles pour déterminer les fichiers dont l'intégrité est à
            vérifier. Le fichier de règles par défaut (<code class=
            "filename">/etc/tripwire/twpol.txt</code>) vaut pour une
            installation par défaut et devra être mis à jour selon votre
            système.
          </p>
          <p>
            Vous devriez adapter les fichiers de règles à chaque distribution
            ou installation individuelle. Vous pouvez trouver certains
            fichiers de règles d'exemples dans <code class=
            "filename">/usr/share/doc/tripwire/</code>.
          </p>
          <p>
            Si vous le souhaitez, copiez le fichier de règles que vous
            aimeriez essayer dans <code class=
            "filename">/etc/tripwire/</code> au lieu d'utiliser le fichier de
            règles par défaut, <code class="filename">twpol.txt</code>.
            Néanmoins, on vous recommande d'éditer votre propre fichier de
            règles. Inspirez-vous des exemples ci-dessus et lisez
            <code class="filename">/usr/share/doc/tripwire/policyguide.txt</code>
            pour des informations supplémentaires. <code class=
            "filename">twpol.txt</code> est un bon fichier de règles pour
            apprendre <span class="application">Tripwire</span> car il
            remarquera n'importe quelle modification dans le système de
            fichiers et il peut même être utilisé comme une façon ennuyeuse
            de garder une trace des changements de désinstallation d'un
            logiciel.
          </p>
          <p>
            Après que votre fichier de règles a été éditez selon vos désirs,
            vous pouvez commencer les étapes de configuration (effectuez en
            tant qu'utilisateur <code class="systemitem">root</code>)&nbsp;:
          </p>
          <pre class="root"><kbd class=
          "command">twadmin --create-polfile --site-keyfile /etc/tripwire/site.key \
    /etc/tripwire/twpol.txt &amp;&amp;
tripwire --init</kbd></pre>
          <p>
            Selon votre système et le contenu du fichier de règles, la phase
            d'initialisation ci-dessus peut prendre un temps relativement
            long.
          </p>
        </div>
        <div class="sect3">
          <h3 class="sect3">
            Informations d'utilisation
          </h3>
          <p>
            <span class="application">Tripwire</span> identifiera les
            modifications de fichiers dans les fichiers critiques du système
            indiqués dans le fichier de règles. L'utilisation de <span class=
            "application">Tripwire</span> si vous modifiez souvent ces
            répertoires marquera toutes ces modifications. C'est souvent
            utile après que le système a atteint une configuration considérée
            comme stable par l'utilisateur.
          </p>
          <p>
            Pour utiliser <span class="application">Tripwire</span> après
            avoir créé un fichier de règles pour lancer un signalement,
            utilisez la commande suivante&nbsp;:
          </p>
          <pre class="root"><kbd class=
          "command">tripwire --check &gt; /etc/tripwire/report.txt</kbd></pre>
          <p>
            Observez la sortie pour vérifier l'intégrité de vos fichiers. Un
            rapport automatique d'intégrité peut être obtenu en utilisant une
            fonctionnalité cron pour programmer à l'avance les exécutions.
          </p>
          <p>
            Les rapports sont stockés en binaire et, si vous le désirez,
            chiffrés. Observez les rapports, en tant qu'utilisateur
            <code class="systemitem">root</code>, avec&nbsp;:
          </p>
          <pre class="userinput"><kbd class=
          "command">twprint --print-report -r /var/lib/tripwire/report/<em class=
          "replaceable"><code>&lt;report-name.twr&gt;</code></em></kbd></pre>
          <p>
            Après avoir lancé une vérification d'intégrité, vous devriez
            examiner le rapport (ou le message électronique) puis modifier la
            base de données <span class="application">Tripwire</span> pour
            refléter les fichiers modifiés sur votre système. Ceci pour que
            <span class="application">Tripwire</span> ne vous notifie pas en
            permanence que des fichiers que vous avez volontairement modifiés
            sont une violation de sécurité. Pour faire cela, vous devez tout
            d'abord faire <span class="command"><strong>ls -l
            /var/lib/tripwire/report/</strong></span> et remarquer le nom du
            fichier le plus récent qui commence par le nom de votre système
            tel que présenté par la commande <strong class=
            "userinput"><code>uname -n</code></strong> et qui finit par
            <code class="filename">.twr</code>. Ces fichiers ont été créés
            pendant la création du rapport et le plus actuel est nécessaire
            pour mettre à jour la base de données <span class=
            "application">Tripwire</span> de votre système. En tant
            qu'utilisateur <code class="systemitem">root</code>, entrez la
            commande suivante en faisant le nom du rapport adéquat&nbsp;:
          </p>
          <pre class="userinput"><kbd class=
          "command">tripwire --update --twrfile /var/lib/tripwire/report/<em class=
          "replaceable"><code>&lt;report-name.twr&gt;</code></em></kbd></pre>
          <p>
            Vous serez mis dans <span class="application">vim</span> avec une
            copie du rapport face à vous. Si tous les changements sont
            corrects, tapez simplement <span class=
            "command"><strong>:wq</strong></span> et après avoir entré votre
            clé locale, la base de données sera mise à jour. S'il y a des
            fichiers pour lesquels vous voulez encore être averti, supprimez
            le 'x' avant le nom du fichier dans le rapport et tapez
            <span class="command"><strong>:wq</strong></span>.
          </p>
        </div>
        <div class="sect3">
          <h3 class="sect3">
            Modifier le fichier de règles
          </h3>
          <p>
            Si vous n'êtes pas content de votre fichier de règles et si vous
            aimeriez le modifier ou en utiliser un nouveau, modifiez le
            fichier de règles puis exécutez les commandes suivantes en tant
            qu'utilisateur <code class="systemitem">root</code>&nbsp;:
          </p>
          <pre class="userinput"><kbd class=
          "command">twadmin --create-polfile /etc/tripwire/twpol.txt &amp;&amp;
tripwire --init</kbd></pre>
        </div>
      </div>
      <div class="content" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Contenu
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Programmes installés:</strong>
              <span class="segbody">siggen, tripwire, twadmin et
              twprint</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Bibliothèques installées:</strong>
              <span class="segbody">Aucune</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Répertoires installés:</strong>
              <span class="segbody">/etc/tripwire, /var/lib/tripwire et
              /usr/share/doc/tripwire-2.4.3.7</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Descriptions courtes
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="siggen" name="siggen"></a><span class=
                    "term"><span class=
                    "command"><strong>siggen</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un outil rassembleur de signatures qui affiche les
                    valeurs de la fonction de hachage pour les fichiers
                    spécifiés
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="tripwire-program" name=
                    "tripwire-program"></a><span class="term"><span class=
                    "command"><strong>tripwire</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est le programme principal de vérification d'intégrité
                    des fichiers
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="twadmin" name="twadmin"></a><span class=
                    "term"><span class=
                    "command"><strong>twadmin</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    outil d'administration utilisé pour effectuer certaines
                    fonctions administratives et certaines options de
                    configuration liées aux fichiers <span class=
                    "application">Tripwire</span>
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="twprint" name="twprint"></a><span class=
                    "term"><span class=
                    "command"><strong>twprint</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    affiche une base de données et des fichiers de rapport
                    <span class="application">Tripwire</span> au format texte
                    en clair
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="sudo.html" title=
          "Sudo-1.9.7p2">Précédent</a>
          <p>
            Sudo-1.9.7p2
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="volume_key.html" title=
          "volume_key-0.3.12">Suivant</a>
          <p>
            volume_key-0.3.12
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="security.html" title=
          "Chapitre&nbsp;4.&nbsp;Sécurité">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition systemd) - Version r10.1-914+">
          Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
