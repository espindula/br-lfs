<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      Configuration de l'ajout d'utilisateurs
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-r10.1-1007+">
    <div class="navheader">
      <h4>
        Au-delà de Linux<sup>®</sup> From Scratch (édition <span class=
        "phrase">systemd)</span> - Version r10.1-1007+
      </h4>
      <h3>
        Chapitre&nbsp;3.&nbsp;Questions de configuration après LFS
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="devices.html" title=
          "À propos des périphériques">Précédent</a>
          <p>
            À propos des périphériques
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="users.html" title=
          "À propos des utilisateurs et des groupes systèmes">Suivant</a>
          <p>
            À propos des utilisateurs et des groupes systèmes
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="config.html" title=
          "Chapitre&nbsp;3.&nbsp;Questions de configuration après LFS">Niveau
          supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition systemd) - Version r10.1-1007+">
          Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="postlfs-config-skel" name=
        "postlfs-config-skel"></a>Configuration de l'ajout d'utilisateurs
      </h1>
      <p>
        Ensembles, la commande <span class=
        "command"><strong>/usr/sbin/useradd</strong></span> et le répertoire
        <code class="filename">/etc/skel</code> (on peut les paramétrer et
        les utiliser facilement) offrent un moyen de garantir que les
        nouveaux utilisateurs soient ajoutés à votre système LFS avec les
        mêmes réglages de base d'éléments tels que le <code class=
        "envar">PATH</code>, le traitement du clavier et d'autres variables
        d'environnement. L'utilisation de ces deux possibilités facilite la
        garantie de cet état initial pour tous les nouveaux utilisateurs
        ajoutés au système.
      </p>
      <p>
        Le répertoire <code class="filename">/etc/skel</code> contient des
        copies de divers fichiers d'initialisation ou autres qui peuvent être
        copiés dans le répertoire home du nouvel utilisateur lorsque la
        commande <span class=
        "command"><strong>/usr/sbin/useradd</strong></span> ajoute le nouvel
        utilisateur.
      </p>
      <h5>
        Useradd
      </h5>
      <p>
        Le programme <span class="command"><strong>useradd</strong></span>
        utilise un ensemble de valeurs par défaut contenues dans <code class=
        "filename">/etc/default/useradd</code>. Ce fichier est créé dans une
        installation de LFS de base par le paquet <span class=
        "application">Shadow</span>. S'il a été supprimé ou renommé, le
        programme <span class="command"><strong>useradd</strong></span>
        utilise des paramères par défaut internes. Vous pouvez voir les
        valeurs par défaut en lançant <span class=
        "command"><strong>/usr/sbin/useradd -D</strong></span>.
      </p>
      <p>
        Pour modifier ces valeurs, modifiez simplement le fichier
        <code class="filename">/etc/default/useradd</code> en tant
        qu'utilisateur <code class="systemitem">root</code>. Une alternative
        à la modification directe du fichier consiste à exécuter <span class=
        "command"><strong>useradd</strong></span> en tant qu'utilisateur
        <code class="systemitem">root</code> en fournissant les modifications
        désirées sur la ligne de commande. Vous pouvez trouver des
        informations sur la façon de faire cela dans la page de man de
        <span class="command"><strong>useradd</strong></span>.
      </p>
      <h5>
        /etc/skel
      </h5>
      <p>
        Pour commencer, créez un répertoire <code class=
        "filename">/etc/skel</code> et assurez-vous qu'il n'est modifiable en
        écriture que par l'administrateur du système, en général <code class=
        "systemitem">root</code>. La création de ce répertoire en tant que
        <code class="systemitem">root</code> est la meilleure manière de
        faire.
      </p>
      <p>
        Les droits des fichiers issus de cette partie du livre que vous
        mettez dans <code class="filename">/etc/skel</code> devraient n'être
        modifiables que par leur propriétaire. En outre, puisqu'il n'existe
        pas de règle sur le genre d'informations sensibles qu'un utilisateur
        peut éventuellement mettre dans leur copie de ces fichiers, vous
        devriez les rendre inaccessibles en lecture par «&nbsp;group&nbsp;»
        et «&nbsp;other&nbsp;» (autres).
      </p>
      <p>
        Vous pouvez également mettre d'autres fichiers dans <code class=
        "filename">/etc/skel</code> et il se peut que différents droits leur
        soient nécessaires.
      </p>
      <p>
        Décidez des fichiers d'initialisation qui devraient être fournis dans
        chaque (ou la plupart des) répertoire home d'un nouvel utilisateur.
        Les décisions que vous prendrez changeront ce que vous ferez dans les
        deux prochaines sections, <a class="xref" href="profile.html" title=
        "Les fichiers de démarrage du shell Bash">Les fichiers de démarrage
        du shell Bash</a> et <a class="xref" href="vimrc.html" title=
        "Les fichiers /etc/vimrc et ~/.vimrc">Les fichiers vimrc</a>.
        Certains ou tous ces fichiers seront utiles à <code class=
        "systemitem">root</code>, aux utilisateurs qui existent déjà et aux
        nouveaux utilisateurs.
      </p>
      <p>
        Les fichiers de ces sections que vous pourriez vouloir mettre dans
        <code class="filename">/etc/skel</code> comprennent <code class=
        "filename">.inputrc</code>, <code class=
        "filename">.bash_profile</code>, <code class=
        "filename">.bashrc</code>, <code class=
        "filename">.bash_logout</code>, <code class=
        "filename">.dircolors</code> et <code class="filename">.vimrc</code>.
        Si vous n'êtes pas sûr qu'ils devraient être mis là, poursuivez
        simplement les sections suivantes, lisez chaque section et les
        références fournies, puis prenez votre décision.
      </p>
      <p>
        Vous lancerez un jeu de commandes légèrement différent pour les
        fichiers qui se trouvent dans <code class=
        "filename">/etc/skel</code>. Chaque section vous le rappellera. En
        bref, les commandes du livre ont été écrites pour des fichiers
        <span class="emphasis"><em>non</em></span> ajoutés à <code class=
        "filename">/etc/skel</code> et elles envoient simplement les
        résultats dans le répertoire personnel de l'utilisateur. Si le
        fichier va être dans <code class="filename">/etc/skel</code>,
        modifiez la/les commande(s) du livre pour y envoyer la sortie au lieu
        de juste copier le fichier de <code class="filename">/etc/skel</code>
        vers les répertoires adéquats, comme <code class=
        "filename">/etc</code>, <code class="filename">~</code> ou le
        répertoire home d'un autre utilisateur déjà sur le systéme.
      </p>
      <h5>
        Lors de l'ajout d'un utilisateur
      </h5>
      <p>
        Lors de l'ajout d'un nouvel utilisateur avec <span class=
        "command"><strong>useradd</strong></span>, utilisez le paramètre
        <code class="option">-m</code> qui dit à <span class=
        "command"><strong>useradd</strong></span> de créer le répertoire home
        de l'utilisateur et de copier les fichiers de <code class=
        "filename">/etc/skel</code> (il peut être écrasé) vers le répertoire
        home du nouvel utilisateur. Par exemple (effectuez ceci en tant
        qu'utilisateur <code class="systemitem">root</code>)&nbsp;:
      </p>
      <pre class="root"><kbd class="command">useradd -m <em class=
      "replaceable"><code>&lt;newuser&gt;</code></em></kbd></pre>
      <p class="updated">
        Last updated on
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="devices.html" title=
          "À propos des périphériques">Précédent</a>
          <p>
            À propos des périphériques
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="users.html" title=
          "À propos des utilisateurs et des groupes systèmes">Suivant</a>
          <p>
            À propos des utilisateurs et des groupes systèmes
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="config.html" title=
          "Chapitre&nbsp;3.&nbsp;Questions de configuration après LFS">Niveau
          supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition systemd) - Version r10.1-1007+">
          Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
