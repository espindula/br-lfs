<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      Apache-2.4.48
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-r10.1-1007+">
    <div class="navheader">
      <h4>
        Au-delà de Linux<sup>®</sup> From Scratch (édition <span class=
        "phrase">systemd)</span> - Version r10.1-1007+
      </h4>
      <h3>
        Chapitre&nbsp;20.&nbsp;Serveurs principaux
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="majorservers.html" title=
          "Serveurs principaux">Précédent</a>
          <p>
            Serveurs principaux
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="bind.html" title="BIND-9.16.20">Suivant</a>
          <p>
            BIND-9.16.20
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="majorservers.html" title=
          "Chapitre&nbsp;20.&nbsp;Serveurs principaux">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition systemd) - Version r10.1-1007+">
          Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="apache" name="apache"></a>Apache-2.4.48
      </h1>
      <div class="package" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Introduction à Apache HTTPD
        </h2>
        <p>
          Le paquet <span class="application">Apache HTTPD</span> contient un
          serveur HTTP open-source. C'est utile pour créer des sites Internet
          d'Intranet locaux ou lancer d'immenses opérations de service
          Internet.
        </p>
        <p>
          This package is known to build and work properly using an LFS-11.0
          platform.
        </p>
        <h3>
          Informations sur le paquet
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Téléchargement (HTTP)&nbsp;: <a class="ulink" href=
                "https://archive.apache.org/dist/httpd/httpd-2.4.48.tar.bz2">https://archive.apache.org/dist/httpd/httpd-2.4.48.tar.bz2</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Téléchargement (FTP)&nbsp;: <a class="ulink" href=""></a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Somme de contrôle MD5 du téléchargement&nbsp;:
                a7088cec171b0d00bf43394ce64d3909
              </p>
            </li>
            <li class="listitem">
              <p>
                Taille du téléchargement&nbsp;: 6.9&nbsp;Mo
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation de l'espace disque requis&nbsp;: 130&nbsp;Mo
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation du temps de construction&nbsp;: 0.8&nbsp;SBU
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Téléchargements supplémentaires
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Correctif requis&nbsp;: <a class="ulink" href=
                "https://www.linuxfromscratch.org/patches/blfs/svn/httpd-2.4.48-blfs_layout-1.patch">
                https://www.linuxfromscratch.org/patches/blfs/svn/httpd-2.4.48-blfs_layout-1.patch</a>
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Dépendances de Apache HTTPD
        </h3>
        <h4>
          Requises
        </h4>
        <p class="required">
          <a class="xref" href="../general/apr-util.html" title=
          "Apr-Util-1.6.1">Apr-Util-1.6.1</a> et <a class="xref" href=
          "../general/pcre.html" title="PCRE-8.45">PCRE-8.45</a>
        </p>
        <h4>
          Facultatives
        </h4>
        <p class="optional">
          <a class="xref" href="../general/brotli.html" title=
          "brotli-1.0.9">Brotli-1.0.9</a>, <a class="xref" href="db.html"
          title="Berkeley DB-5.3.28">Berkeley DB-5.3.28</a>, <a class="xref"
          href="../general/doxygen.html" title=
          "Doxygen-1.9.2">Doxygen-1.9.2</a>, <a class="xref" href=
          "../general/libxml2.html" title=
          "libxml2-2.9.12">libxml2-2.9.12</a>, <a class="xref" href=
          "../general/lua.html" title="Lua-5.4.3">Lua-5.4.3</a>, <a class=
          "xref" href="../basicnet/lynx.html" title=
          "Lynx-2.8.9rel.1">Lynx-2.8.9rel.1</a> ou <a class="xref" href=
          "../basicnet/links.html" title="Links-2.23">Links-2.23</a> ou
          <a class="ulink" href="http://elinks.or.cz">ELinks</a>, <a class=
          "xref" href="../basicnet/nghttp2.html" title=
          "nghttp2-1.44.0">nghttp2-1.44.0</a>, <a class="xref" href=
          "openldap.html" title="OpenLDAP-2.5.7">OpenLDAP-2.5.7</a>
          (<a class="xref" href="../general/apr-util.html" title=
          "Apr-Util-1.6.1">Apr-Util-1.6.1</a> doit être installé avec le
          support ldap), <a class="xref" href="../basicnet/rsync.html" title=
          "rsync-3.2.3">rsync-3.2.3</a> et <a class="ulink" href=
          "https://sourceforge.net/projects/distcache">Distcache</a>
        </p>
        <p class="usernotes">
          Notes utilisateur&nbsp;: <a class="ulink" href=
          "https://wiki.linuxfromscratch.org/blfs/wiki/apache">https://wiki.linuxfromscratch.org/blfs/wiki/apache</a>
        </p>
      </div>
      <div class="installation" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Installation de Apache HTTPD
        </h2>
        <p>
          Pour des raisons de sécurité, l'exécution du serveur en tant
          qu'utilisateur et groupe non privilégiés est fortement conseillée.
          Créez le groupe et l'utilisateur suivant en utilisant les commandes
          suivantes (en tant qu'utilisateur <code class=
          "systemitem">root</code>)&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">groupadd -g 25 apache &amp;&amp;
useradd -c "Apache Server" -d /srv/www -g apache \
        -s /bin/false -u 25 apache</kbd></pre>
        <p>
          Construisez et installez <span class="application">Apache
          HTTPD</span> en lançant les commandes suivantes&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">patch -Np1 -i ../httpd-2.4.48-blfs_layout-1.patch             &amp;&amp;

sed '/dir.*CFG_PREFIX/s@^@#@' -i support/apxs.in              &amp;&amp;

./configure --enable-authnz-fcgi                              \
            --enable-layout=BLFS                              \
            --enable-mods-shared="all cgi"                    \
            --enable-mpms-shared=all                          \
            --enable-suexec=shared                            \
            --with-apr=/usr/bin/apr-1-config                  \
            --with-apr-util=/usr/bin/apu-1-config             \
            --with-suexec-bin=/usr/lib/httpd/suexec           \
            --with-suexec-caller=apache                       \
            --with-suexec-docroot=/srv/www                    \
            --with-suexec-logfile=/var/log/httpd/suexec.log   \
            --with-suexec-uidmin=100                          \
            --with-suexec-userdir=public_html                 &amp;&amp;
make</kbd></pre>
        <p>
          Ce paquet n'est pas fourni avec une suite de tests.
        </p>
        <p>
          Maintenant, en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            Ce paquet ne s'installe pas correctement avec la technique
            <code class="envar">DESTDIR</code> en tant qu'utilisateur non
            privilégié.
          </p>
        </div>
        <pre class="root"><kbd class="command">make install  &amp;&amp;

mv -v /usr/sbin/suexec /usr/lib/httpd/suexec &amp;&amp;
chgrp apache           /usr/lib/httpd/suexec &amp;&amp;
chmod 4754             /usr/lib/httpd/suexec &amp;&amp;

chown -v -R apache:apache /srv/www</kbd></pre>
      </div>
      <div class="commands" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Explication des commandes
        </h2>
        <p>
          <span class="command"><strong>sed
          '/dir.*CFG_PREFIX/s@^@#@'...</strong></span>&nbsp;: Force
          l'utilitaire <span class="application">apxs</span> à utiliser les
          chemins absolus pour les modules quand les instructions le
          demandent.
        </p>
        <p>
          <em class="parameter"><code>--enable-authnz-fcgi</code></em>&nbsp;:
          construit les authentifications et les autorisations basées sur
          FastCGI authorizer (module fast CGI mod_authnz_fcgi.so).
        </p>
        <p>
          <em class="parameter"><code>--enable-mods-shared="all
          cgi"</code></em>&nbsp;: Les modules devraient être compilés et
          utilisés comme objets partageables dynamiquement (<span class=
          "foreignphrase"><em class="foreignphrase">Dynamic Shared
          Objects</em></span>, DSO) pour pouvoir être inclus et exclus du
          serveur qui utilise les lignes de configuration au moment de
          l'exécution
        </p>
        <p>
          <em class=
          "parameter"><code>--enable-mpms-shared=all</code></em>&nbsp;: Ce
          paramètre assure que tous les MPM (Multi Processing Modules) sont
          constuit en tant qu'objets partagés dynamiques (DSO), pour que
          l'utilisateur puisse choisir lequel utiliser à l'exécution.
        </p>
        <p>
          <em class="parameter"><code>--enable-suexec</code></em>&nbsp;: Ce
          paramètre active la construction du module suEXEC de <span class=
          "application">Apache</span> qui peut être utilisé pour autoriser
          les utilisateurs à lancer des scripts CGI et SSI avec un ID
          différent de l'ID de l'utilisateur du serveur web appelant.
        </p>
        <p>
          <em class="parameter"><code>--with-suexec-*</code></em>&nbsp;: Ces
          paramètres contrôlent le comportement du module suEXEC, comme la
          racine des documents par défaut, l'UID minimal pouvant être utilisé
          pour lancer le script sous suEXEC. Veuillez remarquer qu'avec un
          UID minimal de 100, vous ne pourrez pas lancer des scripts CGI ou
          SSI sous suEXEC en tant qu'utilisateur <code class=
          "systemitem">apache</code>.
        </p>
        <p>
          <span class="command"><strong>...
          /usr/lib/httpd/suexec</strong></span>&nbsp;: Ces commandes mettent
          l'enveloppe <span class="command"><strong>suexec</strong></span> au
          bon endroit, car il n'est pas destiné à être exécuté directement.
          Ils ajustent aussi les permissions pour le binaire, mettant son
          segid à <code class="systemitem">apache</code>.
        </p>
        <p>
          <span class="command"><strong>chown -R apache:apache
          /srv/www</strong></span>&nbsp;: Par défaut, le processus
          d'installation installe des fichiers (documentation, messages
          d'erreur, icônes par défaut, etc.) avec comme propriétaire
          l'utilisateur qui a extrait les fichiers de l'archive tar. Si vous
          voulez modifier la propriété au profit d'un autre utilisateur, vous
          devriez le faire maintenant. La seule exigence est que les
          répertoires des documents soient accessibles par le processus
          <span class="command"><strong>httpd</strong></span> avec les droits
          (r-x) et il faut que les fichiers soient lisibles (r--) par
          l'utilisateur <code class="systemitem">apache</code>.
        </p>
      </div>
      <div class="configuration" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Configuration de Apache
        </h2>
        <div class="sect3">
          <h3 class="sect3">
            <a id="apache-config" name="apache-config"></a>Fichiers de
            configuration
          </h3>
          <p>
            <code class="filename">/etc/httpd/httpd.conf</code> et
            <code class="filename">/etc/httpd/extra/*</code>
          </p>
        </div>
        <div class="sect3">
          <h3 class="sect3">
            Informations sur la configuration
          </h3>
          <p>
            Voir <a class="ulink" href=
            "file:///usr/share/httpd/manual/configuring.html">file:///usr/share/httpd/manual/configuring.html</a>
            pour des instructions détaillées sur la personnalisation de votre
            fichier configuration du serveur HTTP <span class=
            "application">Apache</span>.
          </p>
        </div>
        <div class="sect3">
          <h3 class="sect3">
            <a id="httpd-init" name="httpd-init"></a> Unité Systemd
          </h3>
          <p>
            Si vous voulez que le serveur <span class=
            "application">Apache</span> démarre automatiquement au démarrage
            du système, installez <span class="phrase">l'unité systemd
            <code class="filename">httpd.service</code> incluse</span> dans
            le paquet <a class="xref" href=
            "../introduction/systemd-units.html" title=
            "Unités Systemd de BLFS">blfs-systemd-units-20210819</a>&nbsp;:
          </p>
          <pre class="root"><kbd class=
          "command">make install-httpd</kbd></pre>
        </div>
      </div>
      <div class="content" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Contenu
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Programmes installés:</strong>
              <span class="segbody">ab, apachectl, apxs, checkgid, dbmmanage,
              fcgistarter, htcacheclean, htdbm, htdigest, htpasswd, httpd,
              httxt2dbm, logresolve, rotatelogs et suexec</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Bibliothèques installées:</strong>
              <span class="segbody">Plusieurs bibliothèques dans
              /usr/lib/httpd/modules/</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Répertoires installés:</strong>
              <span class="segbody">/etc/httpd, /srv/www, /usr/include/httpd,
              /usr/lib/httpd, /usr/share/httpd, /var/log/httpd et
              /var/run/httpd</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Descriptions courtes
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="ab" name="ab"></a><span class="term"><span class=
                    "command"><strong>ab</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un outil d'évaluation de votre serveur HTTP
                    <span class="application">Apache</span>
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="apachectl" name="apachectl"></a><span class=
                    "term"><span class=
                    "command"><strong>apachectl</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est une interface avec le serveur HTTP <span class=
                    "application">Apache</span> conçue pour aider
                    l'administrateur à contrôler le fonctionnement du démon
                    httpd de <span class="application">Apache</span>
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="apxs" name="apxs"></a><span class=
                    "term"><span class=
                    "command"><strong>apxs</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un outil pour construire et installer les modules
                    pour le serveur HTTP <span class=
                    "application">Apache</span>
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="checkgid" name="checkgid"></a><span class=
                    "term"><span class=
                    "command"><strong>checkgid</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un programme qui vérifie s'il peut initialiser le gid
                    du groupe spécifié. C'est pour voir si un groupe valide
                    existe pour Apache2 afin de l'utiliser à l'exécution. Si
                    l'utilisateur (doit être lancé en superutilisateur) est
                    dans ce groupe, ou peut être initialisé dans ce groupe,
                    le programme retournera 0
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="dbmmanage" name="dbmmanage"></a><span class=
                    "term"><span class=
                    "command"><strong>dbmmanage</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est utilisé pour créer et mettre à jour les fichiers au
                    format DBM utilisés pour stocker les noms d'utilisateur
                    et les mots de passe pour l'authentification de base des
                    utilisateurs HTTP
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="fcgistarter" name="fcgistarter"></a><span class=
                    "term"><span class=
                    "command"><strong>fcgistarter</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un outil pour démarrer un programme FastCGI
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="htcacheclean" name="htcacheclean"></a><span class=
                    "term"><span class=
                    "command"><strong>htcacheclean</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est utilisé pour nettoyer le cache disque
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="htdbm" name="htdbm"></a><span class=
                    "term"><span class=
                    "command"><strong>htdbm</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est utilisé pour manipuler la basse de données DBM des
                    mots de passe
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="htdigest" name="htdigest"></a><span class=
                    "term"><span class=
                    "command"><strong>htdigest</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est utilisé pour créer et mettre à jour les fichiers
                    plats utilisés pour stocker les noms d'utilisateur, les
                    realms et les mots de passe pour une authentification
                    digest des utilisateurs HTTP
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="htpasswd" name="htpasswd"></a><span class=
                    "term"><span class=
                    "command"><strong>htpasswd</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est utilisé pour créer et mettre à jour les fichiers
                    plats utilisés pour stocker les noms d'utilisateur et les
                    mots de passe pour une authentification des utilisateurs
                    HTTP
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="httpd" name="httpd"></a><span class=
                    "term"><span class=
                    "command"><strong>httpd</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est le serveur HTTP <span class=
                    "application">Apache</span>
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="httxt2dbm" name="httxt2dbm"></a><span class=
                    "term"><span class=
                    "command"><strong>httxt2dbm</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est utilisé pour générer les fichiers DBM depuis des
                    entrées textes, qui seront utilisés dans RewriteMap
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="logresolve" name="logresolve"></a><span class=
                    "term"><span class=
                    "command"><strong>logresolve</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un programme de post-traitement pour résoudre des
                    adresses IP dans des fichiers journaux d'accès
                    d'<span class="application">Apache</span>
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="rotatelogs" name="rotatelogs"></a><span class=
                    "term"><span class=
                    "command"><strong>rotatelogs</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un programme simple pour une utilisation conjointe
                    avec la fonctionnalité de redirection du fichier journal
                    d'<span class="application">Apache</span>
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="suexec" name="suexec"></a><span class=
                    "term"><span class=
                    "command"><strong>suexec</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    permet aux utilisateurs de lancer des applications CGI et
                    SSI avec un utilisateur différent
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="majorservers.html" title=
          "Serveurs principaux">Précédent</a>
          <p>
            Serveurs principaux
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="bind.html" title="BIND-9.16.20">Suivant</a>
          <p>
            BIND-9.16.20
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="majorservers.html" title=
          "Chapitre&nbsp;20.&nbsp;Serveurs principaux">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition systemd) - Version r10.1-1007+">
          Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
