<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      rsync-3.2.3
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-r10.1-1007+">
    <div class="navheader">
      <h4>
        Au-delà de Linux<sup>®</sup> From Scratch (édition <span class=
        "phrase">systemd)</span> - Version r10.1-1007+
      </h4>
      <h3>
        Chapitre&nbsp;15.&nbsp;Programmes de réseau
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="rpcbind.html" title=
          "rpcbind-1.2.6">Précédent</a>
          <p>
            rpcbind-1.2.6
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="samba.html" title="Samba-4.14.7">Suivant</a>
          <p>
            Samba-4.14.7
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="netprogs.html" title=
          "Chapitre&nbsp;15.&nbsp;Programmes de réseau">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition systemd) - Version r10.1-1007+">
          Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="rsync" name="rsync"></a>rsync-3.2.3
      </h1>
      <div class="package" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Introduction à rsync
        </h2>
        <p>
          Le paquet <span class="application">rsync</span> contient l'outil
          <span class="command"><strong>rsync</strong></span>. C'est utile
          pour synchroniser de grosses archives de fichiers sur un réseau.
        </p>
        <p>
          This package is known to build and work properly using an LFS-11.0
          platform.
        </p>
        <h3>
          Informations sur le paquet
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Téléchargement (HTTP)&nbsp;: <a class="ulink" href=
                "https://www.samba.org/ftp/rsync/src/rsync-3.2.3.tar.gz">https://www.samba.org/ftp/rsync/src/rsync-3.2.3.tar.gz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Téléchargement (FTP)&nbsp;: <a class="ulink" href=""></a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Somme de contrôle MD5 du téléchargement&nbsp;:
                209f8326f5137d8817a6276d9577a2f1
              </p>
            </li>
            <li class="listitem">
              <p>
                Taille du téléchargement&nbsp;: 1.0&nbsp;Mo
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation de l'espace disque requis&nbsp;: 10 Mo (avec les
                tests - 47 Mo supplémentaires pour la documentation HTML de
                l'API)
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation du temps de construction&nbsp;: 0.7&nbsp;SBU (avec
                les tests)
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Dépendances de rsync
        </h3>
        <h4>
          Recommandées
        </h4>
        <p class="recommended">
          <a class="xref" href="../general/popt.html" title=
          "Popt-1.18">popt-1.18</a>
        </p>
        <h4>
          Facultatives
        </h4>
        <p class="optional">
          <a class="xref" href="../general/doxygen.html" title=
          "Doxygen-1.9.2">Doxygen-1.9.2</a>, <a class="ulink" href=
          "https://lz4.github.io/lz4/">lz4</a> et <a class="ulink" href=
          "https://cyan4973.github.io/xxHash/">xxhash</a>
        </p>
        <p class="usernotes">
          Notes utilisateur&nbsp;: <a class="ulink" href=
          "https://wiki.linuxfromscratch.org/blfs/wiki/rsync">https://wiki.linuxfromscratch.org/blfs/wiki/rsync</a>
        </p>
      </div>
      <div class="installation" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Installation de rsync
        </h2>
        <p>
          Pour des raisons de sécurité, il est recommandé d'exécuter le
          serveur <span class="application">rsync</span> en tant
          qu'utilisateur et que groupe non privilégiés. Si vous souhaitez
          lancer <span class="command"><strong>rsync</strong></span> en tant
          que démon, créez l'utilisateur et le groupe <code class=
          "systemitem">rsyncd</code> avec les commandes suivantes lancées en
          tant qu'utilisateur <code class="systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">groupadd -g 48 rsyncd &amp;&amp;
useradd -c "rsyncd Daemon" -m -d /home/rsync -g rsyncd \
    -s /bin/false -u 48 rsyncd</kbd></pre>
        <p>
          Installez <span class="application">rsync</span> en lançant les
          commandes suivantes&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">./configure --prefix=/usr    \
            --disable-lz4    \
            --disable-xxhash \
            --without-included-zlib &amp;&amp;
make</kbd></pre>
        <p>
          Si vous avez installé <a class="xref" href=
          "../general/doxygen.html" title="Doxygen-1.9.2">Doxygen-1.9.2</a>
          et souhaitez construire la documentation HTML de l'API,
          lancez&nbsp;:
        </p>
        <pre class="userinput"><kbd class="command">doxygen</kbd></pre>
        <p>
          Pour tester les résultats lancez&nbsp;: <span class=
          "command"><strong>make check</strong></span>.
        </p>
        <p>
          Maintenant, en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class="command">make install</kbd></pre>
        <p>
          Si vous avez construit la documentation, installez-la en utilisant
          les commandes suivantes en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">install -v -m755 -d          /usr/share/doc/rsync-3.2.3/api &amp;&amp;
install -v -m644 dox/html/*  /usr/share/doc/rsync-3.2.3/api</kbd></pre>
      </div>
      <div class="commands" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Explication des commandes
        </h2>
        <p>
          <em class="parameter"><code>--disable-lz4</code></em>&nbsp;: ce
          paramètre désactive la compression LZ4. Remarquez que ce paramètre
          fait utiliser le meilleur algorithme «&nbsp;zstd&nbsp;», et que
          zstd est fournit dans LFS.
        </p>
        <p>
          <em class="parameter"><code>--disable-xxhash</code></em>&nbsp;: ce
          paramètre désactive la prise en charge de la somme de contrôle
          avancée xxhash. Supprimez-le si vous avez installé <a class="ulink"
          href="https://cyan4973.github.io/xxHash/">xxhash</a>.
        </p>
        <p>
          <em class=
          "parameter"><code>--without-included-zlib</code></em>&nbsp;: ce
          paramètre active la compilation avec la bibliothèque zlib installée
          sur le système.
        </p>
      </div>
      <div class="configuration" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Configuration de rsync
        </h2>
        <div class="sect3">
          <h3 class="sect3">
            <a id="rsync-config" name="rsync-config"></a>Fichiers de
            configuration
          </h3>
          <p>
            <code class="filename">/etc/rsyncd.conf</code>
          </p>
        </div>
        <div class="sect3">
          <h3 class="sect3">
            Informations sur la configuration
          </h3>
          <p>
            Pour un accès client aux fichiers distants, il se peut que vous
            deviez installer le paquet <a class="xref" href=
            "../postlfs/openssh.html" title="OpenSSH-8.7p1">OpenSSH-8.7p1</a>
            pour vous connecter au serveur distant.
          </p>
          <p>
            C'est une configuration simple pour le téléchargement seulement
            pour régler un <span class=
            "command"><strong>rsync</strong></span> fonctionnant comme un
            serveur. Voir la page de manuel de rsyncd.conf(5) pour des
            options supplémentaires (donc l'authentification utilisateur).
          </p>
          <pre class="root"><kbd class=
          "command">cat &gt; /etc/rsyncd.conf &lt;&lt; "EOF"
<code class="literal"># This is a basic rsync configuration file
# It exports a single module without user authentication.

motd file = /home/rsync/welcome.msg
use chroot = yes

[localhost]
    path = /home/rsync
    comment = Default rsync module
    read only = yes
    list = yes
    uid = rsyncd
    gid = rsyncd
</code>
EOF</kbd></pre>
          <p>
            Vous pouvez trouver des informations de configuration et de la
            documentation générale concernant <span class=
            "command"><strong>rsync</strong></span> sur <a class="ulink"
            href="https://rsync.samba.org/documentation.html">https://rsync.samba.org/documentation.html</a>.
          </p>
        </div>
        <div class="sect3">
          <h3 class="sect3">
            <a id="rsync-init" name="rsync-init"></a> Unité Systemd
          </h3>
          <p>
            Remarquez que vous ne voudrez démarrer le serveur <span class=
            "application">rsync</span> que si vous voulez fournir une archive
            <span class="application">rsync</span> sur votre machine locale.
            Vous n'avez pas besoin de <span class="phrase">cette unité</span>
            pour lancer le client <span class="application">rsync</span>.
          </p>
          <p>
            Installez <span class="phrase">l'unité <code class=
            "filename">rsyncd.service</code> incluse</span> dans le paquet
            <a class="xref" href="../introduction/systemd-units.html" title=
            "Unités Systemd de BLFS">blfs-systemd-units-20210819</a>.
          </p>
          <pre class="root"><kbd class=
          "command">make install-rsyncd</kbd></pre>
          <div class="admon note">
            <img alt="[Note]" src="../images/note.png" />
            <h3>
              Note
            </h3>
            <p>
              Ce paquet est distribué avec deux types d'unités&nbsp;: Un
              fichier de service et un fichier de socket. Le fichier de
              service démarrera le démon rsync au démarrage et le gardera
              actif jusqu'à l'extinction du système. Le fichier socket fera
              écouter systemd sur le port rsync (par défaut 873, le fichier
              doit être édité pour en utiliser un autre) et démarrera le
              démon rsync lorsque quelque chose essaiera de se connecter à ce
              port, et éteindra le démon lorsque la connexion se terminera.
              Ceci est appelé activation par socket et est similaire à
              l'utilisation de <span class="application">{,x}inetd</span> sur
              un système basé sur SysVinit.
            </p>
            <p>
              Par défaut, la première méthode est utilisée - le démon rsync
              est démarré au démarrage et stoppé à l'extinction. Si vous
              voulez utiliser l'activation par socket, vous devez lance en
              tant qu'utilisateur <code class="systemitem">root</code>&nbsp;:
            </p>
            <pre class="userinput"><kbd class=
            "command">systemctl stop rsyncd &amp;&amp;
systemctl disable rsyncd &amp;&amp;
systemctl enable rsyncd.socket &amp;&amp;
systemctl start rsyncd.socket</kbd></pre>
            <p>
              Remarquez que la méthode par socket n'est utile que pour les
              sauvegardes distantes. Pour les sauvegardes locales, vous
              devrez utiliser la méthode du service.
            </p>
          </div>
        </div>
      </div>
      <div class="content" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Contenu
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Programme installé:</strong>
              <span class="segbody">rsync et rsync-ssl</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Bibliothèques installées:</strong>
              <span class="segbody">Aucune</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Répertoires installés:</strong>
              <span class="segbody">Éventuellement,
              /usr//share/doc/rsync-3.2.3</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Descriptions courtes
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="rsync-prog" name="rsync-prog"></a><span class=
                    "term"><span class=
                    "command"><strong>rsync</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est le remplaçant de <span class=
                    "command"><strong>rcp</strong></span> (et <span class=
                    "command"><strong>scp</strong></span>) qui a beaucoup
                    plus de fonctionnalités. Il utilise l'<span class=
                    "quote">«&nbsp;<span class="quote">algorithme
                    rsync</span>&nbsp;»</span> qui fournit une méthode de
                    synchronisation des fichiers distants très rapide. Il
                    fait cela en n'envoyant que les différences dans les
                    fichiers à travers le lien, sans exiger que les deux
                    ensembles de fichiers soient présents à l'avance d’un
                    côté du lien
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="rsync-ssl" name="rsync-ssl"></a><span class=
                    "term"><span class=
                    "command"><strong>rsync-ssl</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un script d'aide utilisé lors de la connexion à un
                    démon rsync avec la prise en charge de SSL incluse
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="rpcbind.html" title=
          "rpcbind-1.2.6">Précédent</a>
          <p>
            rpcbind-1.2.6
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="samba.html" title="Samba-4.14.7">Suivant</a>
          <p>
            Samba-4.14.7
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="netprogs.html" title=
          "Chapitre&nbsp;15.&nbsp;Programmes de réseau">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition systemd) - Version r10.1-1007+">
          Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
