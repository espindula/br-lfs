<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      wpa_supplicant-2.9
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-r10.1-1007+">
    <div class="navheader">
      <h4>
        Au-delà de Linux<sup>®</sup> From Scratch (édition <span class=
        "phrase">systemd)</span> - Version r10.1-1007+
      </h4>
      <h3>
        Chapitre&nbsp;15.&nbsp;Programmes de réseau
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="wireless_tools.html" title=
          "Wireless Tools-29">Précédent</a>
          <p>
            Wireless Tools-29
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="netutils.html" title=
          "Outils réseaux">Suivant</a>
          <p>
            Outils réseaux
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="netprogs.html" title=
          "Chapitre&nbsp;15.&nbsp;Programmes de réseau">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition systemd) - Version r10.1-1007+">
          Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="wpa_supplicant" name="wpa_supplicant"></a>wpa_supplicant-2.9
      </h1>
      <div class="package" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Introduction à WPA Supplicant
        </h2>
        <p>
          <span class="application">wpa_supplicant</span> est un client
          d'accès au Wi-fi protégé (WPA) et compatible IEEE 802.1X. Il
          implémente la négociation de clé WPA avec une authentification WPA
          et le protocole d'authentification étendue (EAP) avec un serveur
          d'authentification. De plus, il contrôle l'itinérance et
          l'authentification/association IEEE 802.11 des pilotes. Il est
          pratique pour se connecter à un point d'accès protégé par mot de
          passe.
        </p>
        <p>
          This package is known to build and work properly using an LFS-11.0
          platform.
        </p>
        <h3>
          Informations sur le paquet
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Téléchargement (HTTP)&nbsp;: <a class="ulink" href=
                "https://w1.fi/releases/wpa_supplicant-2.9.tar.gz">https://w1.fi/releases/wpa_supplicant-2.9.tar.gz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Téléchargement (FTP)&nbsp;: <a class="ulink" href=""></a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Somme de contrôle MD5 du téléchargement&nbsp;:
                2d2958c782576dc9901092fbfecb4190
              </p>
            </li>
            <li class="listitem">
              <p>
                Taille du téléchargement&nbsp;: 3.1&nbsp;Mo
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation de l'espace disque requis&nbsp;: 35&nbsp;Mo
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation du temps de construction&nbsp;: 0.5 SBU (sans
                l'interface graphique facultative)
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Dépendances de WPA Supplicant
        </h3>
        <h4>
          Recommandées
        </h4>
        <p class="recommended">
          <a class="xref" href="../general/desktop-file-utils.html" title=
          "desktop-file-utils-0.26">desktop-file-utils-0.26</a> (pour lancer
          <span class=
          "command"><strong>update-desktop-database</strong></span>) et
          <a class="xref" href="libnl.html" title=
          "libnl-3.5.0">libnl-3.5.0</a>
        </p>
        <h4>
          Facultatives
        </h4>
        <p class="optional">
          <a class="xref" href="../general/dbus.html" title=
          "dbus-1.12.20">dbus-1.12.20</a>, <a class="xref" href=
          "../general/libxml2.html" title="libxml2-2.9.12">libxml2-2.9.12</a>
          et <a class="xref" href="../x/qt5.html" title=
          "Qt-5.15.2">Qt-5.15.2</a>
        </p>
        <p class="usernotes">
          Notes utilisateur&nbsp;: <a class="ulink" href=
          "https://wiki.linuxfromscratch.org/blfs/wiki/wpa_supplicant">https://wiki.linuxfromscratch.org/blfs/wiki/wpa_supplicant</a>
        </p>
      </div>
      <div class="kernel" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          <a id="wpa_supplicant-kernel" name=
          "wpa_supplicant-kernel"></a>Configuration du noyau
        </h2>
        <p>
          Activez les options suivantes dans la configuration du noyau aussi
          bien que les pilotes spécifiques pour votre matériel et recompilez
          si nécessaire&nbsp;:
        </p>
        <pre class="screen"><code class=
        "literal">[*] Networking support  ---&gt;                              [CONFIG_NET]
  [*] Wireless  ---&gt;                                      [CONFIG_WIRELESS]
    &lt;*/M&gt; cfg80211 - wireless configuration API           [CONFIG_CFG80211]
    [*]     cfg80211 wireless extensions compatibility    [CONFIG_CFG80211_WEXT]
    &lt;*/M&gt; Generic IEEE 802.11 Networking Stack (mac80211) [CONFIG_MAC80211]
Device Drivers  ---&gt;
  [*] Network device support  ---&gt;                        [CONFIG_NETDEVICES]
    [*] Wireless LAN  ---&gt;                                [CONFIG_WLAN]</code></pre>
        <p>
          Ouvrez le sous-menu et sélectionnez les options que supportent
          votre matériel&nbsp;: <span class=
          "command"><strong>lspci</strong></span> de <a class="xref" href=
          "../general/pciutils.html" title=
          "pciutils-3.7.0">pciutils-3.7.0</a> peut être utilisé pour voir
          votre configuration matérielle.
        </p>
      </div>
      <div class="installation" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Installation de WPA Supplicant
        </h2>
        <p>
          En premier vous devez créer un fichier de configuration initial
          pour la construction. Vous pouvez lire <code class=
          "filename">wpa_supplicant/README</code> et <code class=
          "filename">wpa_supplicant/defconfig</code> pour les explications
          des options suivantes aussi bien que pour les autres options qui
          peuvent être utilisées. Créer un fichier de configuration qui peut
          fonctionner avec les initialisations standards pour le WiFi en
          lançant les commandes suivantes&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">cat &gt; wpa_supplicant/.config &lt;&lt; "EOF"
<code class="literal">CONFIG_BACKEND=file
CONFIG_CTRL_IFACE=y
CONFIG_DEBUG_FILE=y
CONFIG_DEBUG_SYSLOG=y
CONFIG_DEBUG_SYSLOG_FACILITY=LOG_DAEMON
CONFIG_DRIVER_NL80211=y
CONFIG_DRIVER_WEXT=y
CONFIG_DRIVER_WIRED=y
CONFIG_EAP_GTC=y
CONFIG_EAP_LEAP=y
CONFIG_EAP_MD5=y
CONFIG_EAP_MSCHAPV2=y
CONFIG_EAP_OTP=y
CONFIG_EAP_PEAP=y
CONFIG_EAP_TLS=y
CONFIG_EAP_TTLS=y
CONFIG_IEEE8021X_EAPOL=y
CONFIG_IPV6=y
CONFIG_LIBNL32=y
CONFIG_PEERKEY=y
CONFIG_PKCS12=y
CONFIG_READLINE=y
CONFIG_SMARTCARD=y
CONFIG_WPS=y
CFLAGS += -I/usr/include/libnl3</code>
EOF</kbd></pre>
        <p>
          Si vous souhaitez utiliser <span class="application">WPA
          Supplicant</span> avec <a class="xref" href="networkmanager.html"
          title="NetworkManager-1.32.10">NetworkManager-1.32.10</a>, soyez
          certain d'avoir installé <a class="xref" href=
          "../general/dbus.html" title="dbus-1.12.20">dbus-1.12.20</a> et
          <a class="xref" href="../general/libxml2.html" title=
          "libxml2-2.9.12">libxml2-2.9.12</a>, ensuite ajoutez les options
          suivantes dans le fichier de configuration de <span class=
          "application">WPA Supplicant</span> en lançant les commandes
          suivantes&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">cat &gt;&gt; wpa_supplicant/.config &lt;&lt; "EOF"
<code class="literal">CONFIG_CTRL_IFACE_DBUS=y
CONFIG_CTRL_IFACE_DBUS_NEW=y
CONFIG_CTRL_IFACE_DBUS_INTRO=y</code>
EOF</kbd></pre>
        <p>
          Installez <span class="application">WPA Supplicant</span> en
          lançant les commandes suivantes&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">cd wpa_supplicant &amp;&amp;
make BINDIR=/usr/sbin LIBDIR=/usr/lib</kbd></pre>
        <p>
          Si vous avez installé <a class="xref" href="../x/qt5.html" title=
          "Qt-5.15.2">Qt-5.15.2</a> et souhaitez construire l'interface
          graphique de <span class="application">WPA Supplicant</span>,
          lancez les commandes suivantes&nbsp;:
        </p>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            Le répertoire suivant est nommé qt4, mais est compatible avec
            <a class="xref" href="../x/qt5.html" title=
            "Qt-5.15.2">Qt-5.15.2</a>.
          </p>
        </div>
        <pre class="userinput"><kbd class=
        "command">pushd wpa_gui-qt4 &amp;&amp;
qmake wpa_gui.pro &amp;&amp;
make &amp;&amp;
popd</kbd></pre>
        <p>
          Ce paquet n'est pas fourni avec une suite de tests.
        </p>
        <p>
          Maintenant, en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">install -v -m755 wpa_{cli,passphrase,supplicant} /usr/sbin/ &amp;&amp;
install -v -m644 doc/docbook/wpa_supplicant.conf.5 /usr/share/man/man5/ &amp;&amp;
install -v -m644 doc/docbook/wpa_{cli,passphrase,supplicant}.8 /usr/share/man/man8/</kbd></pre>
        <p>
          Installez les fichiers supports de <span class=
          "application">systemd</span> en lançant la commande suivante en
          tant qu'utilisateur <code class="systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">install -v -m644 systemd/*.service /lib/systemd/system/</kbd></pre>
        <p>
          Si vous avez construit <span class="application">WPA
          Supplicant</span> avec le support <span class=
          "application">D-Bus</span>, vous devez installer les fichiers de
          configuration de <span class="application">D-Bus</span>.
          Installez-les en lançant les commandes suivantes en tant
          qu'utilisateur <code class="systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">install -v -m644 dbus/fi.w1.wpa_supplicant1.service \
                 /usr/share/dbus-1/system-services/ &amp;&amp;
install -v -d -m755 /etc/dbus-1/system.d &amp;&amp;
install -v -m644 dbus/dbus-wpa_supplicant.conf \
                 /etc/dbus-1/system.d/wpa_supplicant.conf</kbd></pre>
        <p>
          De plus, activez <code class=
          "filename">wpa_supplicant.service</code> pour que <span class=
          "application">systemd</span> puisse activer correctement le service
          <span class="application">D-Bus</span>. Remarquez que le service
          par connexion et le service D-Bus ne peuvent pas être activés en
          même temps. Lancez la commande suivante en tant qu'utilisateur
          <code class="systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">systemctl enable wpa_supplicant</kbd></pre>
        <p>
          Si vous avez construit l'interface graphique de <span class=
          "application">WPA Supplicant</span>, installez-le en lançant les
          commandes suivantes en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">install -v -m755 wpa_gui-qt4/wpa_gui /usr/bin/ &amp;&amp;
install -v -m644 doc/docbook/wpa_gui.8 /usr/share/man/man8/ &amp;&amp;
install -v -m644 wpa_gui-qt4/wpa_gui.desktop /usr/share/applications/ &amp;&amp;
install -v -m644 wpa_gui-qt4/icons/wpa_gui.svg /usr/share/pixmaps/</kbd></pre>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            Vous devrez redémarrer le démon du système <span class=
            "application">D-Bus</span> avant de pouvoir utiliser l'interface
            <span class="application">D-Bus</span> de <span class=
            "application">WPA Supplicant</span>.
          </p>
        </div>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            Ce paquet installe des fichiers du bureau dans la hiérarchie
            <code class="filename">/usr/share/applications</code> et vous
            pouvez améliorer les performances du système et l'utilisation de
            la mémoire en mettant à jour <code class=
            "filename">/usr/share/applications/mimeinfo.cache</code>. Pour
            réaliser la mise à jour vous devez avoir installé <a class="xref"
            href="../general/desktop-file-utils.html" title=
            "desktop-file-utils-0.26">desktop-file-utils-0.26</a> et taper la
            commande suivante en tant qu'utilisateur <code class=
            "systemitem">root</code>&nbsp;:
          </p>
          <pre class="root"><kbd class=
          "command">update-desktop-database -q</kbd></pre>
        </div>
      </div>
      <div class="configuration" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Configuration de wpa_supplicant
        </h2>
        <div class="sect3">
          <h3 class="sect3">
            <a id="wpa_supplicant-config" name=
            "wpa_supplicant-config"></a>Fichier de configuration
          </h3>
          <p>
            <code class=
            "filename">/etc/wpa_supplicant/wpa_supplicant-*.conf</code>
          </p>
        </div>
        <div class="sect3">
          <h3 class="sect3">
            Informations sur la configuration
          </h3>
          <p>
            Pour se connecter à un point d'accès qui utilise un mot de passe
            vous devez mettre la clé partagée dans <span class=
            "phrase"><code class=
            "filename">/etc/wpa_supplicant/wpa_supplicant-<em class=
            "replaceable"><code>wifi0</code></em>.conf</code>.</span> Le SSID
            est la chaîne que le point d'accès ou le routeur transmet pour
            s'identifier. Lancez la commande suivante en tant qu'utilisateur
            <code class="systemitem">root</code>&nbsp;:
          </p>
          <pre class="userinput"><kbd class=
          "command">install -v -dm755 /etc/wpa_supplicant &amp;&amp;
wpa_passphrase <em class="replaceable"><code>SSID</code></em> <em class=
"replaceable"><code>SECRET_PASSWORD</code></em> &gt; /etc/wpa_supplicant/wpa_supplicant-<em class="replaceable"><code>wifi0</code></em>.conf</kbd></pre>
          <p>
            <span class="phrase"><code class=
            "filename">/etc/wpa_supplicant/wpa_supplicant-<em class=
            "replaceable"><code>wifi0</code></em>.conf</code></span> peut
            retenir les détails de plusieurs points d'accès. Quand vous
            lancez <span class=
            "command"><strong>wpa_supplicant</strong></span> il scannera les
            SSID qu'il peut voir et choisira le mot de passe approprié pour
            se connecter.
          </p>
          <p>
            Si vous souhaitez vous connecter à un point d'accès qui n'est pas
            protégé par un mot de passe, indiquez une entrée comme cela dans
            <span class="phrase"><code class=
            "filename">/etc/wpa_supplicant/wpa_supplicant-<em class=
            "replaceable"><code>wifi0</code></em>.conf</code></span>.
            Remplacez «&nbsp;Some-SSID&nbsp;» avec le SSID du point
            d'accès/routeur.
          </p>
          <pre class="screen">network={
  ssid="<em class="replaceable"><code>Some-SSID</code></em>"
  key_mgmt=NONE
}</pre>
          <p>
            Se connecter à un nouveau point d'accès qui n'est pas dans le
            fichier de configuration peut se faire manuellement via la ligne
            de commande ou l'interface graphique, mais cela doit se faire via
            un utilisateur privilégié. Pour ce faire, ajoutez la suite dans
            le fichier de configuration&nbsp;:
          </p>
          <pre class=
          "screen">ctrl_interface=DIR=/run/wpa_supplicant GROUP=&lt;privileged group&gt;
update_config=1</pre>
          <p>
            Remplacez le &lt;priviledged group&gt; ci-dessus avec le groupe
            système dont les membres peuvent se connecter au point d'accès
            sans fil.
          </p>
          <p>
            Il y a beaucoup d'options que vous pouvez utiliser pour
            personnaliser la façon de se connecter à chaque point d'accès.
            Elles sont décrites en détails dans le fichier <code class=
            "filename">wpa_supplicant/wpa_supplicant.conf</code> dans les
            sources.
          </p>
        </div>
        <div class="sect3">
          <h3 class="sect3">
            Connexion à un point d'accès
          </h3>
          <p>
            Il y a 3 types d'unités <span class="application">systemd</span>
            qui ont été installées&nbsp;:
          </p>
          <div class="itemizedlist">
            <ul class="compact">
              <li class="listitem">
                <p>
                  wpa_supplicant@.service
                </p>
              </li>
              <li class="listitem">
                <p>
                  wpa_supplicant-nl80211@.service
                </p>
              </li>
              <li class="listitem">
                <p>
                  wpa_supplicant-wired@.service
                </p>
              </li>
            </ul>
          </div>
          <p>
            La seule différence entre les 3 est le pilote utilisé pour se
            connecter (option -D). La première utilise le pilote par défaut,
            la deuxième utilise le pilote nl80211 et la troisième utilise le
            pilote filaire.
          </p>
          <p>
            Vous pouvez vous connecter au point d'accès sans fil en lançant
            la commande suivante en tant qu'utilisateur <code class=
            "systemitem">root</code>&nbsp;:
          </p>
          <pre class="root"><kbd class=
          "command">systemctl start wpa_supplicant@<em class=
          "replaceable"><code>wlan0</code></em></kbd></pre>
          <p>
            Pour vous connecter au point d'accès sans fil au démarrage,
            activez simplement le bon service <span class=
            "command"><strong>wpa_supplicant</strong></span> en lançant la
            commande suivante en tant qu'utilisateur <code class=
            "systemitem">root</code>&nbsp;:
          </p>
          <pre class="root"><kbd class=
          "command">systemctl enable wpa_supplicant@<em class=
          "replaceable"><code>wlan0</code></em></kbd></pre>
          <p>
            En fonction de votre configuration, remplacez <code class=
            "filename">wpa_supplicant@.service</code> avec celle qui
            convient.
          </p>
          <p>
            Pour assigner une adresse réseau à votre interface sans fil,
            consultez la page <a class="ulink" href=
            "../../../../lfs/view/development/chapter09/network.html">Configuration
            Générale du Réseau</a> de LFS.
          </p>
        </div>
      </div>
      <div class="content" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Contenu
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Programmes installés:</strong>
              <span class="segbody">wpa_gui, wpa_supplicant, wpa_passphrase
              et wpa_cli</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Bibliothèques installées:</strong>
              <span class="segbody">Aucune</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Répertoires installés:</strong>
              <span class="segbody">Aucun</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Descriptions courtes
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="wpa_gui" name="wpa_gui"></a><span class=
                    "term"><span class=
                    "command"><strong>wpa_gui</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est une interface graphique pour interagir avec
                    <span class="application">wpa_supplicant</span>
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="wpa_supplicant-prog" name=
                    "wpa_supplicant-prog"></a><span class="term"><span class=
                    "command"><strong>wpa_supplicant</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un démon qui peut se connecter à un point d'accès
                    protégé par un mot de passe
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="wpa_passphrase" name=
                    "wpa_passphrase"></a><span class="term"><span class=
                    "command"><strong>wpa_passphrase</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    prend un SSID et un mot de passe et génère une
                    configuration simple que <span class=
                    "command"><strong>wpa_supplicant</strong></span> peut
                    comprendre
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="wpa_cli" name="wpa_cli"></a><span class=
                    "term"><span class=
                    "command"><strong>wpa_cli</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est une interface en ligne de commandes pour contrôler le
                    lancement du démon <span class=
                    "command"><strong>wpa_supplicant</strong></span>
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="wireless_tools.html" title=
          "Wireless Tools-29">Précédent</a>
          <p>
            Wireless Tools-29
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="netutils.html" title=
          "Outils réseaux">Suivant</a>
          <p>
            Outils réseaux
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="netprogs.html" title=
          "Chapitre&nbsp;15.&nbsp;Programmes de réseau">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition systemd) - Version r10.1-1007+">
          Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
