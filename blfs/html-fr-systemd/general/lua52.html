<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      Lua-5.2.4
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-r10.1-1007+">
    <div class="navheader">
      <h4>
        Au-delà de Linux<sup>®</sup> From Scratch (édition <span class=
        "phrase">systemd)</span> - Version r10.1-1007+
      </h4>
      <h3>
        Chapitre&nbsp;13.&nbsp;Programmation
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="lua.html" title="Lua-5.4.3">Précédent</a>
          <p>
            Lua-5.4.3
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="mercurial.html" title=
          "Mercurial-5.9">Suivant</a>
          <p>
            Mercurial-5.9
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="prog.html" title=
          "Chapitre&nbsp;13.&nbsp;Programmation">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition systemd) - Version r10.1-1007+">
          Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="lua52" name="lua52"></a>Lua-5.2.4
      </h1>
      <div class="package" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Introduction à Lua 5.2
        </h2>
        <p>
          <span class="application">Lua</span> est un langage de
          programmation puissant et assez léger conçu pour les extensions
          d'applications. Il est aussi souvent utilisé de façon plus générale
          en langage utilisé seul. <span class="application">Lua</span> est
          implémenté comme une petite bibliothèque de fonction C, écrite en C
          ANSI, et compilé sans modification sur toutes les plate-formes
          connues. Les buts de l'implémentation sont simplicité, efficacité,
          portabilité, et coût d'embarquement faible. Le résultat est un
          moteur de langage rapide avec de petites empreinte, le rendant
          idéal pour les systèmes embarqués.
        </p>
        <p>
          C'est une ancienne version de <span class="application">Lua</span>
          requise uniquement pour la compatibilité avec d'autres programmes
          comme <a class="xref" href="../basicnet/wireshark.html" title=
          "Wireshark-3.4.8">Wireshark-3.4.8</a>.
        </p>
        <p>
          This package is known to build and work properly using an LFS-11.0
          platform.
        </p>
        <h3>
          Informations sur le paquet
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Téléchargement (HTTP)&nbsp;: <a class="ulink" href=
                "https://www.lua.org/ftp/lua-5.2.4.tar.gz">https://www.lua.org/ftp/lua-5.2.4.tar.gz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Téléchargement (FTP)&nbsp;: <a class="ulink" href=""></a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Somme de contrôle MD5 du téléchargement&nbsp;:
                913fdb32207046b273fdb17aad70be13
              </p>
            </li>
            <li class="listitem">
              <p>
                Taille du téléchargement&nbsp;: 248 Ko
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation de l'espace disque requis&nbsp;: 3.6 Mo
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation du temps de construction&nbsp;: moins de 0.1 SBU
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Téléchargements supplémentaires
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Correctif requis&nbsp;: <a class="ulink" href=
                "https://www.linuxfromscratch.org/patches/blfs/svn/lua-5.2.4-shared_library-1.patch">
                https://www.linuxfromscratch.org/patches/blfs/svn/lua-5.2.4-shared_library-1.patch</a>
              </p>
            </li>
          </ul>
        </div>
        <p class="usernotes">
          Notes utilisateur&nbsp;: <a class="ulink" href=
          "https://wiki.linuxfromscratch.org/blfs/wiki/lua">https://wiki.linuxfromscratch.org/blfs/wiki/lua</a>
        </p>
      </div>
      <div class="installation" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Installation de Lua 5.2
        </h2>
        <p>
          Certains paquets cherchent le fichier <span class=
          "application">pkg-config</span> de <span class=
          "application">Lua</span>, qui est créé avec&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">cat &gt; lua.pc &lt;&lt; "EOF"
<code class="literal">V=5.2
R=5.2.4

prefix=/usr
INSTALL_BIN=${prefix}/bin
INSTALL_INC=${prefix}/include/lua5.2
INSTALL_LIB=${prefix}/lib
INSTALL_MAN=${prefix}/share/man/man1
INSTALL_LMOD=${prefix}/share/lua/${V}
INSTALL_CMOD=${prefix}/lib/lua/${V}
exec_prefix=${prefix}
libdir=${exec_prefix}/lib
includedir=${prefix}/include/lua5.2

Name: Lua
Description: An Extensible Extension Language
Version: ${R}
Requires:
Libs: -L${libdir} -llua5.2 -lm -ldl
Cflags: -I${includedir}</code>
EOF</kbd></pre>
        <p>
          Installez <span class="application">Lua</span> en lançant les
          commandes suivantes&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">patch -Np1 -i ../lua-5.2.4-shared_library-1.patch &amp;&amp;

sed -i '/#define LUA_ROOT/s:/usr/local/:/usr/:' src/luaconf.h &amp;&amp;

sed -r -e '/^LUA_(SO|A|T)=/ s/lua/lua5.2/' \
       -e '/^LUAC_T=/ s/luac/luac5.2/'     \
       -i src/Makefile &amp;&amp;

make MYCFLAGS="-fPIC" linux</kbd></pre>
        <p>
          L'installation de ce paquet est complexe, donc nous utiliserons la
          méthode d'installation DESTDIR&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">make TO_BIN='lua5.2 luac5.2'                     \
     TO_LIB="liblua5.2.so liblua5.2.so.5.2 liblua5.2.so.5.2.4" \
     INSTALL_DATA="cp -d"                        \
     INSTALL_TOP=$PWD/install/usr                \
     INSTALL_INC=$PWD/install/usr/include/lua5.2 \
     INSTALL_MAN=$PWD/install/usr/share/man/man1 \
     install &amp;&amp;

install -Dm644 lua.pc install/usr/lib/pkgconfig/lua52.pc &amp;&amp;

mkdir -pv install/usr/share/doc/lua-5.2.4 &amp;&amp;
cp -v doc/*.{html,css,gif,png} install/usr/share/doc/lua-5.2.4 &amp;&amp;

ln -s liblua5.2.so install/usr/lib/liblua.so.5.2   &amp;&amp;
ln -s liblua5.2.so install/usr/lib/liblua.so.5.2.4 &amp;&amp;

mv install/usr/share/man/man1/{lua.1,lua5.2.1} &amp;&amp;
mv install/usr/share/man/man1/{luac.1,luac5.2.1}</kbd></pre>
        <p>
          Maintenant, en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class=
        "command">chown -R root:root install  &amp;&amp;
cp -a install/* /</kbd></pre>
      </div>
      <div class="commands" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Explication des commandes
        </h2>
        <p>
          <span class="command"><strong>sed -i ...
          src/luaconf.h</strong></span>&nbsp;: Cette commande change le
          chemin de recherche de <span class="application">Lua</span> pour
          correspondre au répertoire d'installation.
        </p>
        <p>
          <span class="command"><strong>sed -i ...
          src/Makefile</strong></span>&nbsp;: Cette commande supprime le
          conflit entre cette installation et la dernière version de lua.
        </p>
      </div>
      <div class="content" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Contents
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Programmes installés:</strong>
              <span class="segbody">lua5.2 et luac5.2</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Bibliothèque installée:</strong>
              <span class="segbody">liblua5.2.so</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Répertoires installés:</strong>
              <span class="segbody">/usr/include/lua5.2, /usr/lib/lua/5.2,
              /usr/share/doc/lua-5.2.4 et /usr/share/lua/5.2</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Descriptions courtes
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="lua52-prog" name="lua52-prog"></a><span class=
                    "term"><span class=
                    "command"><strong>lua5.2</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est l'interpréteur Lua 5.2 indépendant
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="luac52" name="luac52"></a><span class=
                    "term"><span class=
                    "command"><strong>luac5.2</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est le compilateur Lua 5.2
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="liblua52" name="liblua52"></a><span class=
                    "term"><code class="filename">liblua5.2.so</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    contient les fonction de l'API 5.2 de <span class=
                    "application">Lua</span>
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="lua.html" title="Lua-5.4.3">Précédent</a>
          <p>
            Lua-5.4.3
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="mercurial.html" title=
          "Mercurial-5.9">Suivant</a>
          <p>
            Mercurial-5.9
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="prog.html" title=
          "Chapitre&nbsp;13.&nbsp;Programmation">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition systemd) - Version r10.1-1007+">
          Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
