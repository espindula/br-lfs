<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      Valgrind-3.17.0
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-r10.1-914+">
    <div class="navheader">
      <h4>
        Au-delà de Linux<sup>®</sup> From Scratch (édition <span class=
        "phrase">systemd)</span> - Version r10.1-914+
      </h4>
      <h3>
        Chapitre&nbsp;13.&nbsp;Programmation
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="vala.html" title="Vala-0.52.5">Précédent</a>
          <p>
            Vala-0.52.5
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="yasm.html" title="yasm-1.3.0">Suivant</a>
          <p>
            yasm-1.3.0
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="prog.html" title=
          "Chapitre&nbsp;13.&nbsp;Programmation">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition systemd) - Version r10.1-914+">
          Sommaire</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="fr" xml:lang="fr">
      <h1 class="sect1">
        <a id="valgrind" name="valgrind"></a>Valgrind-3.17.0
      </h1>
      <div class="package" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Introduction à Valgrind
        </h2>
        <p>
          <span class="application">Valgrind</span> est une boite à outils
          d'instrumentation pour construire des outils d'analyses dynamiques.
          Il y a les outils de Valgrind qui peuvent automatiquement détecter
          plusieurs bogues de gestion de mémoires et de threading, et des
          programmes de profilages en détail. Valgrind peut également être
          utilisé pour construire de nouveaux outils.
        </p>
        <p>
          This package still needs to be checked.
        </p>
        <h3>
          Informations sur le paquet
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Téléchargement (HTTP)&nbsp;: <a class="ulink" href=
                "https://sourceware.org/ftp/valgrind/valgrind-3.17.0.tar.bz2">
                https://sourceware.org/ftp/valgrind/valgrind-3.17.0.tar.bz2</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Téléchargement (FTP)&nbsp;: <a class="ulink" href=
                "ftp://sourceware.org/pub/valgrind/valgrind-3.17.0.tar.bz2">ftp://sourceware.org/pub/valgrind/valgrind-3.17.0.tar.bz2</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Somme de contrôle MD5 du téléchargement&nbsp;:
                afe11b5572c3121a781433b7c0ab741b
              </p>
            </li>
            <li class="listitem">
              <p>
                Taille du téléchargement&nbsp;: 16 Mo
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation de l'espace disque requis&nbsp;: 629&nbsp;Mo (plus
                103&nbsp;Mo pour les tests)
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimation du temps de construction&nbsp;: 0,5 SBU (avec
                parallélisme = 4&nbsp;; plus 7,9 SBU pour les tests)
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Téléchargements supplémentaires
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Correctif requis&nbsp;: <a class="ulink" href=
                "https://www.linuxfromscratch.org/patches/blfs/svn/valgrind-3.17.0-upstream_fixes-1.patch">
                https://www.linuxfromscratch.org/patches/blfs/svn/valgrind-3.17.0-upstream_fixes-1.patch</a>
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Dépendances de Valgrind
        </h3>
        <h4>
          Facultatives
        </h4>
        <p class="optional">
          <a class="xref" href="gdb.html" title="GDB-10.2">GDB-10.2</a> (pour
          les tests), <a class="xref" href="llvm.html" title=
          "LLVM-12.0.1">LLVM-12.0.1</a> (avec Clang), et <a class="xref"
          href="which.html" title="Which-2.21 et Alternatives">Which-2.21</a>
          (pour les tests)
        </p>
        <p class="usernotes">
          Notes utilisateur&nbsp;: <a class="ulink" href=
          "https://wiki.linuxfromscratch.org/blfs/wiki/valgrind">https://wiki.linuxfromscratch.org/blfs/wiki/valgrind</a>
        </p>
      </div>
      <div class="installation" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Installation de Valgrind
        </h2>
        <p>
          Tout d'abord, effectuez plusieurs changements requis pour que
          Valgrind fonctionne sur les systèmes avec glibc-2.34
          installée&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">patch -Np1 -i ../valgrind-3.17.0-upstream_fixes-1.patch</kbd></pre>
        <p>
          Installez <span class="application">Valgrind</span> en lançant les
          commandes suivantes&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">autoreconf -fiv &amp;&amp;
sed -i 's|/doc/valgrind||' docs/Makefile.in &amp;&amp;

./configure --prefix=/usr \
            --datadir=/usr/share/doc/valgrind-3.17.0 &amp;&amp;
make</kbd></pre>
        <p>
          Pour tester les résultats, tapez&nbsp;: <span class=
          "command"><strong>make regtest</strong></span>. Les tests peuvent
          freezer si <a class="xref" href="gdb.html" title=
          "GDB-10.2">GDB-10.2</a> n'est pas installé. Quelques tests sont
          connus pour freezer également, en fonction de la version de glibc.
          Certains tests dans la suite de tests «&nbsp;drd&nbsp;» sont aussi
          connus pour échouer. Les tests problématiques peuvent être
          désactivés en changeant la ligne <strong class=
          "userinput"><code>prereq:</code></strong> dans le fichier
          <code class="filename">.vgtest</code> correspondants en
          <strong class="userinput"><code>prereq: false</code></strong>. Par
          exemple&nbsp;:
        </p>
        <pre class="userinput"><kbd class=
        "command">sed -e 's@prereq:.*@prereq: false@' \
    -i {helgrind,drd}/tests/pth_cond_destroy_busy.vgtest</kbd></pre>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            Les tests <span class="application">OpenMP</span> sont ignorés si
            libgomp a été compilé avec <code class=
            "option">--enable-linux-futex</code> (valeur par défaut). Si
            besoin, recompilez simplement libgomp depuis l'arborescence de
            construction de gcc, en passant <code class=
            "option">--disable-linux-futex</code> au script configure, en
            enregistrant la bibliothèque ailleurs et en changeant le lien de
            <code class="filename">/usr/lib/libgomp.so.1</code> vers la
            nouvelle bibliothèque.
          </p>
        </div>
        <p>
          Maintenant, en tant qu'utilisateur <code class=
          "systemitem">root</code>&nbsp;:
        </p>
        <pre class="root"><kbd class="command">make install</kbd></pre>
      </div>
      <div class="commands" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Explication des commandes
        </h2>
        <p>
          <span class="command"><strong>sed -i ...
          docs/Makefile.in</strong></span> &nbsp;: Ce sed permet d'installer
          la documentation dans un répertoire versionné.
        </p>
        <p>
          <code class="option">--enable-lto=yes</code>&nbsp;: Cette option
          permet de construire Valgrind avec LTO (optimisation à l'édition de
          liens). Cela produit un Valgrind plus petit et plus rapide (jusqu'à
          10&nbsp;%) mais le temps de construction augmente à 5.5 SBU.
        </p>
      </div>
      <div class="content" lang="fr" xml:lang="fr">
        <h2 class="sect2">
          Contenu
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Programmes installés:</strong>
              <span class="segbody">callgrind_annotate, callgrind_control,
              cg_annotate, cg_diff, cg_merge, ms_print, valgrind,
              valgrind-di-server, valgrind-listener et vgdb</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Bibliothèques installées:</strong>
              <span class="segbody">None</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Répertoires installés:</strong>
              <span class="segbody">/usr/lib/valgrind, /usr/libexec/valgrind,
              /usr/include/valgrind et /usr/share/doc/valgrind-3.17.0</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Descriptions courtes
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="valgrind-prog" name=
                    "valgrind-prog"></a><span class="term"><span class=
                    "command"><strong>valgrind</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un programme pour déboguer et profiler les
                    exécutables Linux
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="callgrind_annotate" name=
                    "callgrind_annotate"></a><span class="term"><span class=
                    "command"><strong>callgrind_annotate</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    prend en entré le fichier de sortie produit par l'outil
                    Callgrind de <span class="application">Valgrind</span> et
                    affiche les informations dans une forme facile à lire
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="callgrind_control" name=
                    "callgrind_control"></a><span class="term"><span class=
                    "command"><strong>callgrind_control</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    contrôle les programmes en train d'être lancés par
                    l'outil Callgrind de <span class=
                    "application">Valgrind</span>
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="cg_annotate" name="cg_annotate"></a><span class=
                    "term"><span class=
                    "command"><strong>cg_annotate</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un outil de post-traitement pour l'outil Cachegrind
                    de <span class="application">Valgrind</span>
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="cg_diff" name="cg_diff"></a><span class=
                    "term"><span class=
                    "command"><strong>cg_diff</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    compare deux fichiers de sortie de Cachegrind
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="cg_merge" name="cg_merge"></a><span class=
                    "term"><span class=
                    "command"><strong>cg_merge</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    fusionne plusieurs fichiers de sortie de Cachegrind en un
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="ms_print" name="ms_print"></a><span class=
                    "term"><span class=
                    "command"><strong>ms_print</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    prend un fichier de sortie produit par l'outil Massif de
                    <span class="application">Valgrind</span> et affiche les
                    informations dans une forme facile à lire
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="valgrind-di-server" name=
                    "valgrind-di-server"></a><span class="term"><span class=
                    "command"><strong>valgrind-di-server</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un serveur qui lit les informations de débogage des
                    objets stockés sur un machine différente
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="valgrind-listener" name=
                    "valgrind-listener"></a><span class="term"><span class=
                    "command"><strong>valgrind-listener</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    écoute les commentaires de Valgrind sur un socket
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="vgdb" name="vgdb"></a><span class=
                    "term"><span class=
                    "command"><strong>vgdb</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    est un intermédiaire entre Valgrind et GDB ou un shell
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <p class="updated">
        Last updated on
      </p>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="vala.html" title="Vala-0.52.5">Précédent</a>
          <p>
            Vala-0.52.5
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="yasm.html" title="yasm-1.3.0">Suivant</a>
          <p>
            yasm-1.3.0
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="prog.html" title=
          "Chapitre&nbsp;13.&nbsp;Programmation">Niveau supérieur</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Au-delà de Linux® From Scratch (édition systemd) - Version r10.1-914+">
          Sommaire</a>
        </li>
      </ul>
    </div>
  </body>
</html>
