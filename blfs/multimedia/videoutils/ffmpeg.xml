<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY ffmpeg-download-http "http://ffmpeg.org/releases/ffmpeg-&ffmpeg-version;.tar.bz2">
  <!ENTITY ffmpeg-download-ftp  " ">
  <!ENTITY ffmpeg-md5sum        "b4ef1fa6506750569fdb64a0f0a646a8">
  <!ENTITY ffmpeg-size          "4.3 Mio">
  <!ENTITY ffmpeg-buildsize     "178 MB (built with recommended dependencies)">
  <!ENTITY ffmpeg-time          "2.5 SBU">
]>

<sect1 id="ffmpeg" xreflabel="FFmpeg-&ffmpeg-version;">
  <?dbhtml filename="ffmpeg.html"?>

  <sect1info>
    <othername>$LastChangedBy: randy $</othername>
    <date>$Date: 2011-01-18 01:13:43 +0100 (mar 18 jan 2011) $</date>
  </sect1info>

  <title>FFmpeg-&ffmpeg-version;</title>

  <indexterm zone="ffmpeg">
    <primary sortas="a-FFmpeg">FFmpeg</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à FFmpeg</title>

    <para><application>FFmpeg</application> est une solution pour enregistrer
    et convertir un flux audio et vidéo. C'est un convertisseur audio et vidéo
    très rapide et il peut aussi acquérir à partir d'une source audio et vidéo
    en direct. Conçu pour être intuitif, l'interface en ligne de commande
    (<command>ffmpeg</command>) tente de couvrir tous les paramètres lorsque
    cela est possible. <application>FFmpeg</application> peut convertir aussi
    entre des vitesses d'échantillon et redimensionner des vidéos à la volée
    avec un filtre polyphases de haute qualité. <application>FFmpeg</application> 
    peut utiliser une source vidéo compatible video4linux et n'importe quelle
    source audio <foreignphrase>Open Sound System</foreignphrase>.</para>
    <para>Les développeurs de ce paquet ne sortent pas très souvent des versions, de sorte que vous
    souhaiterez peut-être utiliser un instantané au lieu de cette version. Si vous faites cela,
    vous devez vous attendre à choir les bons paramètres pour <command> configure </command>, et résoudre les
    dépendances.</para>

    &lfs70_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&ffmpeg-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&ffmpeg-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &ffmpeg-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &ffmpeg-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &ffmpeg-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &ffmpeg-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de FFmpeg</bridgehead>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended"><xref linkend="yasm"/></para>


    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional"><xref linkend="faad2"/>, <xref linkend="lame"/>,
    <xref linkend="libtheora"/>, <xref linkend="libvorbis"/>,
    <xref linkend="libvpx"/>, <xref linkend="x-window-system"/>,
    <ulink url="http://www.videolan.org/developers/x264.html">x264</ulink>
    (x264 a besoin de <ulink url="http://www.tortall.net/projects/yasm/">yasm</ulink>
    sauf si vous le configurez avec <literal>--disable-asm</literal>),
    <xref linkend="xvid"/>,
    <ulink url="http://www.penguin.cz/~utx/amr">AMR narrowband
    (point flottant)</ulink>,
    <ulink url="http://www.penguin.cz/~utx/amr">AMR wideband</ulink>,
    <xref linkend="faac"/>, <xref linkend="freetype2"/>,
    <ulink url="http://libgsm.sourcearchive.com/">GSM</ulink>,
    <xref linkend="liba52"/>,
    <ulink url="http://sourceforge.net/projects/libdc1394">libdc1394</ulink>,
    <ulink url="http://svn.mplayerhq.hu/nut/src/trunk/">libnut</ulink>
    (SVN checkout),
    <ulink url="http://sourceforge.net/projects/librtmp">librtmp</ulink>,
    <ulink url="http://diracvideo.org/">libschroedinger</ulink>,
    <ulink url="http://medialibrary.sourceforge.net/">MediaLibrary</ulink>,
    <ulink url="http://www.openjpeg.org">OpenJPEG</ulink>
    (<application>FFmpeg</application> inclut du code pour son propre encodeur 
    et son proqe décodeur jpeg2000 qui est activé par défaut), <xref linkend="speex"/>,
    <!-- <xref linkend="tetex"/>, --> <xref linkend="sdl"/> et
    <ulink url="http://www.nongnu.org/texi2html">texi2html</ulink>
   (pour construire la documentation)</para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/ffmpeg"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de FFmpeg</title>

    <para>Installez <application>FFmpeg</application> en lançant les commandes
    suivantes&nbsp;:</para>

<screen><userinput>mkdir build &amp;&amp;
cd build &amp;&amp;
../configure --prefix=/usr --enable-shared --disable-static --enable-gpl &amp;&amp;
make</userinput></screen>

 
    <para>Si vous déposez certains formats (quicktime, mov ou mp4) sur youtube,
    vous avez besoin de les "aplatir" (déplacer l'index à l'avant du fichier)
    avant de les déposer. FFmpeg contient un outil appelé <command>qt-faststart</command>
    qui peut faire cela. Si vous avez besoin de <command>qt-faststart</command>, 
    vous pouvez le compiler avec gcc&nbsp;:</para>

<screen><userinput>gcc ../tools/qt-faststart.c -o qt-faststart</userinput></screen>

    <para>Si vous avez installé <xref linkend="doxygen"/> et si vous souhaitez
    créer la documentation de l'API (ce qui prend environ 150 Mio d'espace),
    lancez la commande <command>doxygen</command>.</para>

    <para>Ce paquet n'inclut aucune suite de tests opérationnelle.</para>

    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>make install &amp;&amp;
make install-man &amp;&amp;
mkdir /usr/share/doc/ffmpeg-&ffmpeg-version; &amp;&amp;
cp ../doc/*.txt /usr/share/doc/ffmpeg-&ffmpeg-version; &amp;&amp;
texi2html --version &amp;&gt; /dev/null &amp;&amp;
cp doc/*.html /usr/share/doc/ffmpeg-&ffmpeg-version;</userinput></screen>

    <para>Si vous avez utilisé <command>doxygen</command> pour créer la 
    documentation de l'API, installez-la en
    lançant les commandes suivantes en tant qu'utilisateur
    <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>mkdir /usr/share/doc/ffmpeg-&ffmpeg-version;/api &amp;&amp;
cp -v doxy/* /usr/share/doc/ffmpeg-&ffmpeg-version;/api</userinput></screen>

    <para>Si vous avez compilé <command>qt-faststart</command>, installez-le en
     en tant qu'utilisateur 
    <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>cp qt-faststart /usr/bin</userinput></screen>

   </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>


    <para><command>mkdir build</command> and <command>cd build</command>&nbsp;:
    Ceci garantit que nous compilons les fichiers objet <application>FFmpeg</application> 
    dans un répertoire distinct de des fichiers du code source.</para>

    <para><parameter>--enable-shared</parameter>&nbsp;: Ce paramètre est
    nécessaire pour construire les bibliothèques partagées, sinon seules les
    bibliothèques statiques sont construites et installées.</para>

    <para><option>--disable-static</option>>:nbsp;: Ce paramètre empèche les bibliothèques d'être
    contruite en statique</para>

    <para><parameter>--enable-gpl</parameter>&nbsp;: Ce paramètre autorise l'utilisation de 
    code GPL et permet le support pour que postprocessing, swscale et bien d'autres
    fonctionnalités.</para>

    <para><option>--enable-<replaceable>&lt;codec&gt;</replaceable></option>&nbsp;:
    <application>FFmpeg</application> est fourni avec du code pour compiler
    les décodeurs de presque tous les codecs imaginables. La seule raison pour
    activer un codec en particulier (ainsi ffmpeg se lie à la bibliothèque 
    partagée prérequise installée sur votre système au lieu de celle de votre 
    système), est pour que vous
    voulez que ffmpeg compile un <emphasis>encodeur</emphasis> pour 
    ce codec. L'encodage vidéo est une affaire de spécialiste. Si vous voulez,
    faire cela avec ffmpeg, étudiez la sortie de 
    <command>configure --help</command>. Souvenez-vous que les dépendances 
    installent toutes leurs propres encodeurs,  qui sont souvent meilleurs
    que celui de <application>FFmpeg</application>. 
    <application>FFmpeg</application> est un excellent ensemble d'decodeurs.
    Si vous ne voulez utiliser ffmpeg que pour regrder des vidéos ou écouter de
    la musique (avec d'autres
    applications telles que <application>Gstreamer</application>) vous n'aurez
    pas d'avantage à le lier à une autre bibliothèque.</para>

    <para><option>--disable-yasm</option>: utilisez cette option si vous n'avez
    pas installé yasm et si vous voulez que configure parle "d'une const!uction
    crippled".</para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de FFmpeg</title>

    <sect3 id="ffmpeg-config">
      <title>Fichiers de configuration</title>

      <para><filename>/etc/ffserver.conf</filename> et
      <filename>~/.ffmpeg/ffserver-config</filename></para>

      <indexterm zone="ffmpeg ffmpeg-config">
        <primary sortas="e-AA.ffmpeg-ffserver-config">~/.ffmpeg/ffserver-config</primary>
      </indexterm>

      <indexterm zone="ffmpeg ffmpeg-config">
        <primary sortas="e-etc-ffserver.conf">/etc/ffserver.conf</primary>
      </indexterm>

      <para>Vous trouverez un modèle de fichier de configuration pour
      <command>ffserver</command> sur 
      <filename>doc/ffserver.conf</filename> dans l'arborescence des sources.</para>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>ffmpeg, ffplay, ffprobe, ffserver and qt-faststart</seg>
        <seg>libavcodec.so, libavdevice.so, libavfilter.so, libavformat.so,
        libavutil.so, libpostproc.so, and libswscale.so</seg>
        <seg>/usr/include/libavcodec, /usr/include/libavdevice, 
        /usr/include/libavfilter, /usr/include/libavformat,
        /usr/include/libavutil, /usr/include/postproc, /usr/include/libswscale,
        /usr/share/ffmpeg, and /usr/share/doc/ffmpeg-&ffmpeg-version;</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="ffmpeg-prog">
        <term><command>ffmpeg</command></term>
        <listitem>
          <para>est un outil en ligne de commande pour convertir des fichiers
          vidéo, des flux réseaux et des entrées d'une carte TV en divers formats
          vidéo.</para>
          <indexterm zone="ffmpeg ffmpeg-prog">
            <primary sortas="b-ffmpeg">ffmpeg</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ffplay">
        <term><command>ffplay</command></term>
        <listitem>
          <para>est un lecteur média très simple et portable utilisant les
          bibliothèques de <filename>ffmpeg</filename> et la bibliothèque SDL.</para>
          <indexterm zone="ffmpeg ffplay">
            <primary sortas="b-ffplay">ffplay</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ffprobe">
        <term><command>ffprobe</command></term>
        <listitem>
          <para>rassemble des informations à partir de flux multimédia et
          les affiche d'une manière lisible par un homme ou une machine.</para>
          <indexterm zone="ffmpeg ffprobe">
            <primary sortas="b-ffprobe">ffprobe</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ffserver">
        <term><command>ffserver</command></term>
        <listitem>
          <para>est un serveur de flux pour toutes les entrées utilisables par
          <command>ffmpeg</command> (fichiers, flux, entrées de carte TV, webcam,
          etc.).</para>
          <indexterm zone="ffmpeg ffserver">
            <primary sortas="b-ffserver">ffserver</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt-faststart">
        <term><command>qt-faststart</command></term>
        <listitem>
          <para>déplace le fichier d'index à l'avant des vidéos
          quicktime (mov/mp4).</para>
          <indexterm zone="ffmpeg qt-faststart">
            <primary sortas="b-qt-faststart">qt-faststart</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libavcodec">
        <term><filename class='libraryfile'>libavcodec.so</filename></term>
        <listitem>
          <para>est une bibliothèque contenant les codecs <application>FFmpeg</application>
          (pour l'encodage et le décodage).</para>
          <indexterm zone="ffmpeg libavcodec">
            <primary sortas="c-libavcodec">libavcodec.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libavdevice">
        <term><filename class='libraryfile'>libavdevice.so</filename></term>
        <listitem>
          <para>est le periphérique <application>FFmpeg</application> pour la manipulation de la
	  bibliothèque.</para>
          <indexterm zone="ffmpeg libavdevice">
            <primary sortas="c-libavdevice">libavdevice.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libavfilter">
        <term><filename class='libraryfile'>libavfilter.so</filename></term>
        <listitem>
          <para>est une bibliothèque ee filtres  capables de modifier des vidéos
          ou des sons entre un décodeur et un encodeur (ou une sortie).</para>
          <indexterm zone="ffmpeg libavfilter">
            <primary sortas="c-libavfilter">libavfilter.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libavformat">
        <term><filename class='libraryfile'>libavformat.so</filename></term>
        <listitem>
          <para>est une bibliothèque contenant la gestion des formats de fichier
          (code mux et demux pour plusieurs formats) utilisée par <command>ffplay</command> 
          et permettant de générer des flux audio et vidéo.</para>
          <indexterm zone="ffmpeg libavformat">
            <primary sortas="c-libavformat">libavformat.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libavutil">
        <term><filename class='libraryfile'>libavutil.so</filename></term>
        <listitem>
          <para>est la bibliothèque de l'utilitaire <application>FFmpeg</application>.</para>
          <indexterm zone="ffmpeg libavutil">
            <primary sortas="c-libavutil">libavutil.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <!-- mplayer et à la fois ffmpeg créent maintenant libpostproc. La validation 
      pour le livre n'est pas impressionné par cela, et elle echoue sans donner
      toutes les informations utiles si l'identifiant est changé en "libpostproc (de ffmpeg)"
      ou toute autre variante utilisant des espaces ou des parentheses ou des crochets, alors 
      essayez cette variante : mmm, bizarrement, elle accepte cela mais ignore tout, depuis
      le premier trait d'union, de sorte que dans longindex.html cela semble correct (une 
      bibliothèque,deux paquets)  -->
      
      <varlistentry id="libpostproc-from-ffmpeg">
        <term><filename class='libraryfile'>libpostproc.so</filename></term>
        <listitem>
          <para>is the <application>FFmpeg</application> post processing
          library.</para>
          <indexterm zone="ffmpeg libpostproc">
            <primary sortas="c-libpostproc">libpostproc.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libswscale">
        <term><filename class='libraryfile'>libswscale.so</filename></term>
        <listitem>
          <para>is the <application>FFmpeg</application> image rescaling
          library.</para>
          <indexterm zone="ffmpeg libswscale">
            <primary sortas="c-libswscale">libswscale.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
