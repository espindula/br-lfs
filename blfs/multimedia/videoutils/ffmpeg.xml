<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY ffmpeg-download-http "http://ffmpeg.org/releases/ffmpeg-&ffmpeg-version;.tar.bz2">
  <!ENTITY ffmpeg-download-ftp  " ">
  <!ENTITY ffmpeg-md5sum        "4f5d732d25eedfb072251b5314ba2093">
  <!ENTITY ffmpeg-size          "3.5 Mio">
  <!ENTITY ffmpeg-buildsize     "328 MB (built with recommended dependencies)">
  <!ENTITY ffmpeg-time          "2.1 SBU">
]>

<sect1 id="ffmpeg" xreflabel="FFmpeg-&ffmpeg-version;">
  <?dbhtml filename="ffmpeg.html"?>

  <sect1info>
    <othername>$LastChangedBy: randy $</othername>
    <date>$Date: 2011-01-18 01:13:43 +0100 (mar 18 jan 2011) $</date>
  </sect1info>

  <title>FFmpeg-&ffmpeg-version;</title>

  <indexterm zone="ffmpeg">
    <primary sortas="a-FFmpeg">FFmpeg</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à FFmpeg</title>

    <para><application>FFmpeg</application> est une solution pour enregistrer
    et convertir un flux audio et vidéo. C'est un convertisseur audio et vidéo
    très rapide et il peut aussi acquérir à partir d'une source audio et vidéo
    en direct. Conçu pour être intuitif, l'interface en ligne de commande
    (<command>ffmpeg</command>) tente de couvrir tous les paramètres lorsque
    cela est possible. <application>FFmpeg</application> peut convertir aussi
    entre des vitesses d'échantillon et redimensionner des vidéos à la volée
    avec un filtre polyphases de haute qualité. <application>FFmpeg</application> 
    peut utiliser une source vidéo compatible video4linux et n'importe quelle
    source audio <foreignphrase>Open Sound System</foreignphrase>.</para>
    <para>Les développeurs de ce paquet ne sortent pas très souvent des versions, de sorte que vous
    souhaiterez peut-être utiliser un instantané au lieu de cette version. Si vous faites cela,
    vous devez vous attendre à choir les bons paramètres pour <command> configure </command>, et résoudre les
    dépendances.


    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&ffmpeg-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&ffmpeg-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &ffmpeg-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &ffmpeg-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &ffmpeg-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &ffmpeg-time;</para>
      </listitem>
    </itemizedlist>

    <!-- <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Correctif requis&nbsp;: <ulink
        url="&patch-root;/ffmpeg-&ffmpeg-version;-gcc4-1.patch"/></para>
      </listitem>
      <listitem>
        <para>Correctif requis&nbsp;: <ulink
        url="&patch-root;/ffmpeg-&ffmpeg-version;-amr_fixes-1.patch"/></para>
      </listitem>
    </itemizedlist> -->

    <bridgehead renderas="sect3">Dépendances de FFmpeg</bridgehead>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
    <xref linkend="faad2"/>,
    <xref linkend="lame"/>,
    <xref linkend="libtheora"/>,
    <xref linkend="libvorbis"/>,
    <xref linkend="libvpx"/>,
    <xref linkend="x-window-system"/>,
    <ulink url="http://www.videolan.org/developers/x264.html">x264</ulink>
    (testé avec l'instantané 20100615-2245 : x264 utilise 
    <ulink url="http://www.tortall.net/projects/yasm/">yasm</ulink> à moins que vous ne
    le configuriez avec <literal>--disable-asm</literal>),
    <xref linkend="xvid"/></para>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
    <ulink url="http://www.penguin.cz/~utx/amr">AMR narrowband (floating point)</ulink>,
    <ulink url="http://www.penguin.cz/~utx/amr">AMR wideband</ulink>,
    <xref linkend="faac"/>,
    <xref linkend="freetype2"/>,
    <ulink url="http://kbs.cs.tu-berlin.de/~jutta/gsm/">GSM</ulink>,
    <xref linkend="imlib2"/>,
    <xref linkend="liba52"/>,
    <ulink url="http://sourceforge.net/projects/libdc1394">libdc1394</ulink>,
    <ulink url="http://svn.mplayerhq.hu/nut/src/trunk/">libnut</ulink> (SVN checkout),
    <ulink url="http://sourceforge.net/projects/librtmp">librtmp</ulink>,
    <ulink url="http://diracvideo.org/">libschroedinger</ulink>,
    <ulink url="http://medialibrary.sourceforge.net/">MediaLibrary</ulink>,
    <ulink url="http://www.openjpeg.org">OpenJPEG</ulink>,
    <xref linkend="sdl"/>,
    <xref linkend="speex"/>,
    <ulink url="http://www.tortall.net/projects/yasm/">yasm</ulink>, et
    <xref linkend="tetex"/> or
    <ulink url="http://www.nongnu.org/texi2html">texi2html</ulink>
   (pour construire la documentation)</para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/ffmpeg"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de FFmpeg</title>

    <para>Installez <application>FFmpeg</application> en lançant les commandes
    suivantes&nbsp;:</para>

<screen><userinput>sed -i 's/-number//' Makefile &amp;&amp;
./configure --prefix=/usr --enable-shared \
            --enable-pthreads --enable-gpl \
            --enable-swscale --enable-postproc \
            --enable-libfaad --enable-libmp3lame \
            --enable-libtheora --enable-libvorbis \
            --enable-libvpx --enable-libx264 \
            --enable-libxvid &amp;&amp;
make</userinput></screen>

    <para>Si vous avez installé <application>teTeX</application> ou <application>texi2html
    </application>, la documentation HTML a été construite lors du processus de 
    <command>make</command>. Si vous souhaitez créer des formats supplémentaires de la 
    documentation, vous devez avoir installé <application>teTeX</application> ou 
    <xref linkend="texlive"/>, puis lancer les commandes suivantes&nbsp;:</para>

<screen><userinput>cd doc &amp;&amp;
for DOCNAME in faq ffmpeg-doc ffplay-doc ffprobe-doc ffserver-doc general libavfilter; do
    texi2dvi -b -p $DOCNAME.texi
    texi2dvi -b    $DOCNAME.texi
    dvips -o $DOCNAME.ps $DOCNAME.dvi
    if [ $DOCNAME = ffserver-doc ] || [ $DOCNAME = ffplay-doc ] || [ $DOCNAME = ffprobe-doc ]; then \
        continue
    fi
    makeinfo --plaintext --force -o $DOCNAME.txt $DOCNAME.texi
done &amp;&amp;
cd .. &amp;&amp;
unset DOCNAME</userinput></screen>

    <para>Si vous avez installé <xref linkend="doxygen"/> et si vous souhaitez
    créer la documentation de l'API (ce qui prend environ 150 Mio d'espace),
    lancez la commande <command>doxygen</command>.</para>

    <para>Si vous souhaitez lancer les tests, taper>&nbsp;: <command>make check</command> -
    ce qui prendra environ 0.9 SBU et utilisera environ 365 MB d'espace disque.</para>

    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>make install &amp;&amp;
install -v -m755 -d        /usr/share/doc/ffmpeg-&ffmpeg-version; &amp;&amp;
install -v -m644 doc/*.txt /usr/share/doc/ffmpeg-&ffmpeg-version; &amp;&amp;
texi2html --version >/dev/null 2>&amp;1 || make install-man</userinput></screen>

    <para>Si vous avez créé des formats supplémentaires de documentation, 
    installez-les en lançant les commandes suivantes en tant qu'utilisateur
    <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>install -v -m644 doc/*.{html,dvi,pdf,ps} \
    /usr/share/doc/ffmpeg-&ffmpeg-version;</userinput></screen>

    <para>Si vous avez créé la documentation de l'API, installez-la en
    lançant les commandes suivantes en tant qu'utilisateur
    <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>install -v -m755 -d /usr/share/doc/ffmpeg-&ffmpeg-version;/api &amp;&amp;
cp -v doxy/*        /usr/share/doc/ffmpeg-&ffmpeg-version;/api</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para><parameter>sed -i 's/-number//' Makefile</parameter>: Les versions recentes de
    gnu <command>texi2html</command> génère une erreur car
    <command>-number</command> est maintenant ambigü (pour number-footnote ou
    number-sections).  Aucun des choix fait Aucun choix fait de différence pour ce qui est 
    créé ici, et c'est la même chose avec les anciennes versions of
    <command>texi2html</command>, par exemple pour l'application
    <application>teTeX</application>.</para>

    <para><parameter>--enable-shared</parameter>&nbsp;: Ce paramètre est
    nécessaire pour construire les bibliothèques partagées, sinon seules les
    bibliothèques statiques sont construites et installées.</para>

    <para><parameter>--enable-pthreads</parameter>&nbsp;: Ce paramètre
    permet à la construction de se lier contre la bibliothèque de threads
    Posix.</para>

    <para><parameter>--enable-gpl</parameter>: Ce paramètre autorise l'utilisation de 
    code GPL et permet le support pour que postprocessing, swscale, liba54,
    xvid, x264, libfaad2 et x11grab soient selectionnés.</para>

    <para><parameter>--enable-swscale</parameter>: Ce paramètre effectuera la construction de
    libswscale.</para>

    <para><parameter>--enable-postprocessing</parameter>: Ce paramètre effectuera la construction
    de libpostproc.</para>

    <para><option>--enable-<replaceable>&lt;codec&gt;</replaceable></option>&nbsp;:
    Regardez les options et les codecs disponibles en utilisant la commande
    <command>./configure --help</command>. Vous devez activer explicitement
    chaque codec facultatif. Si vous n'avez pas installé quelques unes des dépendances recommandées,
    ne pas activer celles que vous avez omises.</para>

     <para><option>--disable-ffplay</option>: Installe seulement la partie serveur.
    Utilisez cette option si <application>X</application> n'est pas installé.</para>

    <para><option>--disable-static</option>: Ce paramètre empèche les bibliothèques d'être
    contruite en statique</para>

    <para><command>if [ $DOCNAME = ffserver-doc ] ...</command> Ces trois fichiers
    .texi sont rejetés par la commande <command>makeinfo</command> à cause d'erreurs de
    syntaxe.</para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de FFmpeg</title>

    <sect3 id="ffmpeg-config">
      <title>Fichiers de configuration</title>

      <para><filename>/etc/ffserver.conf</filename> et
      <filename>~/.ffmpeg/ffserver-config</filename></para>

      <indexterm zone="ffmpeg ffmpeg-config">
        <primary sortas="e-AA.ffmpeg-ffserver-config">~/.ffmpeg/ffserver-config</primary>
      </indexterm>

      <indexterm zone="ffmpeg ffmpeg-config">
        <primary sortas="e-etc-ffserver.conf">/etc/ffserver.conf</primary>
      </indexterm>

      <para>You'll find a sample ffserver configuration file at
      <ulink url="http://ffmpeg.sourceforge.net/sample.html"/> (également
      <filename>doc/ffserver.conf</filename> dans l'arborescence du source).</para>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>ffmpeg, ffplay, ffprobe, et ffserver</seg>
        <seg>libavcodec.{so,a}, libavdevice.{so,a}, libavformat.{so,a},
        libavutil.{so,a}, libpostproc.{so,a}, et libswscale.{so,a}</seg>
        <seg>/usr/include/libavcodec, /usr/include/libavdevice,
        /usr/include/libavformat, /usr/include/libavutil, /usr/include/postproc,
        /usr/include/libswscale, /usr/share/ffmpeg, et
        /usr/share/doc/ffmpeg-&ffmpeg-version;</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="ffmpeg-prog">
        <term><command>ffmpeg</command></term>
        <listitem>
          <para>est un outil en ligne de commande pour convertir des fichiers
          vidéo, des flux réseaux et des entrées d'une carte TV en divers formats
          vidéo.</para>
          <indexterm zone="ffmpeg ffmpeg-prog">
            <primary sortas="b-ffmpeg">ffmpeg</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ffplay">
        <term><command>ffplay</command></term>
        <listitem>
          <para>est un lecteur média très simple et portable utilisant les
          bibliothèques de <filename>ffmpeg</filename> et la bibliothèque SDL.</para>
          <indexterm zone="ffmpeg ffplay">
            <primary sortas="b-ffplay">ffplay</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ffserver">
        <term><command>ffserver</command></term>
        <listitem>
          <para>est un serveur de flux pour toutes les entrées utilisables par
          <command>ffmpeg</command> (fichiers, flux, entrées de carte TV, webcam,
          etc.).</para>
          <indexterm zone="ffmpeg ffserver">
            <primary sortas="b-ffserver">ffserver</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libavcodec">
        <term><filename class='libraryfile'>libavcodec.{so,a}</filename></term>
        <listitem>
          <para>est une bibliothèque contenant les codecs <application>FFmpeg</application>
          (pour l'encodage et le décodage).</para>
          <indexterm zone="ffmpeg libavcodec">
            <primary sortas="c-libavcodec">libavcodec.{so,a}</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libavdevice">
        <term><filename class='libraryfile'>libavdevice.{so,a}</filename></term>
        <listitem>
          <para>est le periphérique <application>FFmpeg</application> pour la manipulation de la
	  bibliothèque.</para>
          <indexterm zone="ffmpeg libavdevice">
            <primary sortas="c-libavdevice">libavdevice.{so,a}</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libavformat">
        <term><filename class='libraryfile'>libavformat.{so,a}</filename></term>
        <listitem>
          <para>est une bibliothèque contenant la gestion des formats de fichier
          (code mux et demux pour plusieurs formats) utilisée par <command>ffplay</command> 
          et permettant de générer des flux audio et vidéo.</para>
          <indexterm zone="ffmpeg libavformat">
            <primary sortas="c-libavformat">libavformat.{so,a}</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libavutil">
        <term><filename class='libraryfile'>libavutil.{so,a}</filename></term>
        <listitem>
          <para>est la bibliothèque de l'utilitaire <application>FFmpeg</application>.</para>
          <indexterm zone="ffmpeg libavutil">
            <primary sortas="c-libavutil">libavutil.{so,a}</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <!-- mplayer et à la fois ffmpeg créent maintenant libpostproc. La validation 
      pour le livre n'est pas impressionné par cela, et elle echoue sans donner
      toutes les informations utiles si l'identifiant est changé en "libpostproc (de ffmpeg)"
      ou toute autre variante utilisant des espaces ou des parentheses ou des crochets, alors 
      essayez cette variante : mmm, bizarrement, elle accepte cela mais ignore tout, depuis
      le premier trait d'union, de sorte que dans longindex.html cela semble correct (une 
      bibliothèque,deux paquets)  -->
      
      <varlistentry id="libpostproc-from-ffmpeg">
        <term><filename class='libraryfile'>libpostproc.{so,a}</filename></term>
        <listitem>
          <para>is the <application>FFmpeg</application> post processing
          library.</para>
          <indexterm zone="ffmpeg libpostproc">
            <primary sortas="c-libpostproc">libpostproc.{so,a}</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libswscale">
        <term><filename class='libraryfile'>libswscale.{so,a}</filename></term>
        <listitem>
          <para>is the <application>FFmpeg</application> image rescaling
          library.</para>
          <indexterm zone="ffmpeg libswscale">
            <primary sortas="c-libswscale">libswscale.{so,a}</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
