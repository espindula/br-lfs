<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY ffmpeg-download-http "&files-anduin;/sources/ffmpeg-&ffmpeg-version;.tar.bz2">
  <!ENTITY ffmpeg-download-ftp  " ">
  <!ENTITY ffmpeg-md5sum        "abae526f04693c08684f0a18c28e3313">
  <!ENTITY ffmpeg-size          "2.2 Mio">
  <!ENTITY ffmpeg-buildsize     "131 Mio (built with all dependencies)">
  <!ENTITY ffmpeg-time          "1.8 SBU">
]>

<sect1 id="ffmpeg" xreflabel="FFmpeg-&ffmpeg-version;">
  <?dbhtml filename="ffmpeg.html"?>

  <sect1info>
    <othername>$LastChangedBy: ken $</othername>
    <date>$Date: 2008-12-24 20:20:07 +0100 (mer 24 déc 2008) $</date>
  </sect1info>

  <title>FFmpeg-&ffmpeg-version;</title>

  <indexterm zone="ffmpeg">
    <primary sortas="a-FFmpeg">FFmpeg</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à FFmpeg</title>

    <para><application>FFmpeg</application> est une solution pour enregistrer
    et convertir un flux audio et vidéo. C'est un convertisseur audio et vidéo
    très rapide et il peut aussi acquérir à partir d'une source audio et vidéo
    en direct. Conçu pour être intuitif, l'interface en ligne de commande
    (<command>ffmpeg</command>) tente de couvrir tous les paramètres lorsque
    cela est possible. <application>FFmpeg</application> peut convertir aussi
    entre des vitesses d'échantillon et redimensionner des vidéos à la volée
    avec un filtre polyphases de haute qualité. <application>FFmpeg</application> 
    peut utiliser une source vidéo compatible video4linux et n'importe quelle
    source audio <foreignphrase>Open Sound System</foreignphrase>. Les
    développeurs de ce paquet ne créent ni ne distribuent plus d'archives tar
    de ce paquet. BLFS a créé l'archive tar pour ce paquet en
    se basant sur le code de <application>FFmpeg</application> SVN daté du 6
    juin 2007.</para>

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&ffmpeg-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&ffmpeg-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &ffmpeg-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &ffmpeg-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &ffmpeg-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &ffmpeg-time;</para>
      </listitem>
    </itemizedlist>

    <!-- <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Correctif requis&nbsp;: <ulink
        url="&patch-root;/ffmpeg-&ffmpeg-version;-gcc4-1.patch"/></para>
      </listitem>
      <listitem>
        <para>Correctif requis&nbsp;: <ulink
        url="&patch-root;/ffmpeg-&ffmpeg-version;-amr_fixes-1.patch"/></para>
      </listitem>
    </itemizedlist> -->

    <bridgehead renderas="sect3">Dépendances de FFmpeg</bridgehead>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
    <ulink url="http://www.penguin.cz/~utx/amr">AMR narrowband (floating point)</ulink>,
    <ulink url="http://www.penguin.cz/~utx/amr">AMR wideband</ulink>,
    <xref linkend="faac"/>,
    <xref linkend="faad2"/>,
    <xref linkend="freetype2"/>,
    <ulink url="http://kbs.cs.tu-berlin.de/~jutta/gsm/">GSM</ulink>,
    <xref linkend="imlib2"/>,
    <xref linkend="lame"/>,
    <xref linkend="liba52"/>,
    <ulink url="http://sourceforge.net/projects/libdc1394">libdc1394</ulink>,
    <ulink url="http://svn.mplayerhq.hu/nut/src/trunk/">libnut</ulink> (SVN checkout),
    <xref linkend="libvorbis"/>,
    <ulink url="http://medialibrary.sourceforge.net/">MediaLibrary</ulink>,
    <xref linkend="sdl"/>,
    <xref linkend="libtheora"/>,
    <xref linkend="x-window-system"/>,
    <ulink url="http://www.videolan.org/developers/x264.html">x264</ulink>,
    <xref linkend="xvid"/> et
    <xref linkend="tetex"/> (to build HTML documentation)</para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/ffmpeg"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de FFmpeg</title>

    <para>Lisez le fichier <filename>doc/optimization.txt</filename> dans
    l'arborescence du source pour des informations sur l'optimisation de la
    construction. En outre, il se peut que vous souhaitiez construire la bibliothèque
    de postprocessing vu que d'autres paquets tels que 
    <xref linkend='mplayer'/> et <xref linkend='transcode'/> peuvent
    l'utiliser et <xref linkend='xine-lib'/> en dépend.  Voir la section
    <quote>Explications des commandes</quote> pour des informations complémentaires.</para>

    <para>Installez <application>FFmpeg</application> en lançant les commandes
    suivantes&nbsp;:</para>

<screen><userinput>./configure --prefix=/usr \
            --enable-shared \
            --enable-pthreads \
            --disable-ffplay &amp;&amp;
sed -i 's|/man|/share/man|' config.mak &amp;&amp;
make &amp;&amp;
texi2html --version >/dev/null 2>&amp;1 || make doc/ff{mpeg,play,server}.1</userinput></screen>

    <para>Si vous avez installé <application>teTeX</application>, la 
    documentation HTML a été construite lors du processus de <command>make</command>.
    Si vous souhaitez créer des formats supplémentaires de la documentation, 
    vous devez avoir installé 
    <application>teTeX</application> puis lancer les commandes suivantes&nbsp;:</para>

<screen><userinput>cd doc &amp;&amp;
for DOCNAME in faq ffmpeg-doc hooks ffserver-doc ffplay-doc; do
    texi2dvi -b -p $DOCNAME.texi
    texi2dvi -b    $DOCNAME.texi
    dvips -o $DOCNAME.ps $DOCNAME.dvi
    if [ $DOCNAME = ffserver-doc ] || [ $DOCNAME = ffplay-doc ]; then \
        continue
    fi
    makeinfo --plaintext --force -o $DOCNAME.txt $DOCNAME.texi
done &amp;&amp;
cd .. &amp;&amp;
unset DOCNAME</userinput></screen>

    <para>Si vous avez installé <xref linkend="doxygen"/> et si vous souhaitez
    créer la documentation de l'API (ce qui prend environ 100 Mio d'espace),
    lancez la commande <command>doxygen</command>.</para>

    <para>Ce paquet n'est pas fourni avec une suite de tests that works.</para>

    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>make install &amp;&amp;
install -v -m755 -d        /usr/share/doc/ffmpeg-&ffmpeg-version; &amp;&amp;
install -v -m644 doc/*.txt /usr/share/doc/ffmpeg-&ffmpeg-version; &amp;&amp;
texi2html --version >/dev/null 2>&amp;1 || make install-man</userinput></screen>

    <para>Si vous avez créé des formats supplémentaires de documentation, 
    installez-les en lançant les commandes suivantes en tant qu'utilisateur
    <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>install -v -m644 doc/*.{html,dvi,pdf,ps} \
    /usr/share/doc/ffmpeg-&ffmpeg-version;</userinput></screen>

    <para>Si vous avez créé la documentation de l'API, installez-la en
    lançant les commandes suivantes en tant qu'utilisateur
    <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>install -v -m755 -d /usr/share/doc/ffmpeg-&ffmpeg-version;/api &amp;&amp;
cp -v doxy/*        /usr/share/doc/ffmpeg-&ffmpeg-version;/api</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para><parameter>--enable-shared</parameter>&nbsp;: Ce paramètre est
    nécessaire pour construire les bibliothèques partagées, sinon seules les
    bibliothèques statiques sont construites et installées.</para>

    <para><parameter>--enable-pthreads</parameter>&nbsp;: Ce paramètre
    permet à la construction de se lier contre la bibliothèque de threads
    Posix.</para>

    <para><parameter>--disable-ffplay</parameter>&nbsp;: N'installe que la
    partie serveur.
    <command>ffplay</command> exige <application>X</application> pour la
    construction. Supprimez cette option si <application>X</application> est
    installé.</para>

    <para><option>--enable-<replaceable>&lt;codec&gt;</replaceable></option>&nbsp;:
    Regardez les options et les codecs disponibles en utilisant la commande
    <command>./configure --help</command>. Vous devez activer explicitement
    chaque codec facultatif. Notez que si vous souhaitez construire le support 
    du postprocessing, de liba52, xvid, x264, libfaad2, x11grab ou de swscaler,
    vous devez passer <option>--enable-gpl</option> au script
    <command>configure</command>.</para>

    <para><parameter>--enable-pp</parameter>&nbsp;: Ce paramètre active le
    support du postprocessing.</para>

    <para><parameter>--enable-gpl</parameter>&nbsp;: Ce paramètre active
    l'utilisation du code GPL pour le support du postprocessing.</para>

    <para><command>texi2html --version ...</command>&nbsp;: Ces commandes sont
    utilisées pour vérifier la présence du paquet <application>teTeX</application>
    et elles construisent/installent les pages de man si elles ne le trouvent 
    pas.</para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de FFmpeg</title>

    <sect3 id="ffmpeg-config">
      <title>Fichiers de configuration</title>

      <para><filename>/etc/ffserver.conf</filename> et
      <filename>~/.ffmpeg/ffserver-config</filename></para>

      <indexterm zone="ffmpeg ffmpeg-config">
        <primary sortas="e-AA.ffmpeg-ffserver-config">~/.ffmpeg/ffserver-config</primary>
      </indexterm>

      <indexterm zone="ffmpeg ffmpeg-config">
        <primary sortas="e-etc-ffserver.conf">/etc/ffserver.conf</primary>
      </indexterm>

      <para>You'll find a sample ffserver configuration file at
      <ulink url="http://ffmpeg.sourceforge.net/sample.html"/> (également
      <filename>doc/ffserver.conf</filename> dans l'arborescence du source).</para>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>ffmpeg, ffserver, et optionally, ffplay</seg>
        <seg>libavcodec.{so,a}, libavformat.{so,a}, libavutil.{so,a},
        modules hook vidéo et éventuellement, libpostproc.{so,a}</seg>
        <seg>/usr/include/ffmpeg, /usr/include/postproc, /usr/lib/vhook, et
        /usr/share/doc/ffmpeg-&ffmpeg-version;</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="ffmpeg-prog">
        <term><command>ffmpeg</command></term>
        <listitem>
          <para>est un outil en ligne de commande pour convertir des fichiers
          vidéo, des flux réseaux et des entrées d'une carte TV en divers formats
          vidéo.</para>
          <indexterm zone="ffmpeg ffmpeg-prog">
            <primary sortas="b-ffmpeg">ffmpeg</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ffplay">
        <term><command>ffplay</command></term>
        <listitem>
          <para>est un lecteur média très simple et portable utilisant les
          bibliothèques de <filename>ffmpeg</filename> et la bibliothèque SDL.</para>
          <indexterm zone="ffmpeg ffplay">
            <primary sortas="b-ffplay">ffplay</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ffserver">
        <term><command>ffserver</command></term>
        <listitem>
          <para>est un serveur de flux pour toutes les entrées utilisables par
          <command>ffmpeg</command> (fichiers, flux, entrées de carte TV, webcam,
          etc.).</para>
          <indexterm zone="ffmpeg ffserver">
            <primary sortas="b-ffserver">ffserver</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libavcodec">
        <term><filename class='libraryfile'>libavcodec.so</filename></term>
        <listitem>
          <para>est une bibliothèque contenant les codecs <application>FFmpeg</application>
          (pour l'encodage et le décodage).</para>
          <indexterm zone="ffmpeg libavcodec">
            <primary sortas="c-libavcodec">libavcodec.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libavformat">
        <term><filename class='libraryfile'>libavformat.so</filename></term>
        <listitem>
          <para>est une bibliothèque contenant la gestion des formats de fichier
          (code mux et demux pour plusieurs formats) utilisée par <command>ffplay</command> 
          et permettant de générer des flux audio et vidéo.</para>
          <indexterm zone="ffmpeg libavformat">
            <primary sortas="c-libavformat">libavformat.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
