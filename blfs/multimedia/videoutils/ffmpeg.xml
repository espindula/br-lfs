<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  <!ENTITY ffmpeg-download-http "http://ffmpeg.org/releases/ffmpeg-&ffmpeg-version;.tar.bz2">
  <!ENTITY ffmpeg-download-ftp  " ">
  <!ENTITY ffmpeg-md5sum        "8da635baff57d7ab704b1daca5a99b47">
  <!ENTITY ffmpeg-size          "7.1 Mo">
  <!ENTITY ffmpeg-buildsize     "130 Mo (additional 1737 Mo for docs and 1908 Mo to run the FATE tests)">
  <!ENTITY ffmpeg-time          "3.8 SBU (additional 2.8 SBU for docs and 6.0 SBU to run the FATE tests, after sample files are downloaded)">
]>
<sect1 id="ffmpeg" xreflabel="FFmpeg-&ffmpeg-version;">
  <?dbhtml filename="ffmpeg.html"?>
  <sect1info>
    <othername>$LastChangedBy&nbsp;: krejzi $</othername>
    <date>$Date&nbsp;: 2013-03-03 16:30:53 +0100 (Sun, 03 Mar 2013) $</date>
  </sect1info>
  <title>FFmpeg-&ffmpeg-version;</title>
  <indexterm zone="ffmpeg">
    <primary sortas="a-FFmpeg">FFmpeg</primary>
  </indexterm>
  <sect2 role="package">
    <title>Introduction à FFmpeg</title>
    <para><application>FFmpeg</application> est une solution pour enregistrer
    et convertir un flux audio et vidéo. C'est un convertisseur audio et vidéo
    très rapide et il peut aussi acquérir à partir d'une source audio et vidéo
    en direct. Conçu pour être intuitif, l'interface en ligne de commande
    (<command>ffmpeg</command>) tente de couvrir tous les paramètres lorsque
    cela est possible. <application>FFmpeg</application> peut convertir aussi
    entre des vitesses d'échantillon et redimensionner des vidéos à la volée
    avec un filtre polyphases de haute qualité. <application>FFmpeg</application> 
    peut utiliser une source vidéo compatible video4linux et n'importe quelle
    source audio <foreignphrase>Open Sound System</foreignphrase>.</para>
   &lfs76_checked;
    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&ffmpeg-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&ffmpeg-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &ffmpeg-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &ffmpeg-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &ffmpeg-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &ffmpeg-time;</para>
      </listitem>
    </itemizedlist>
<bridgehead renderas="sect3">Dépendances de FFmpeg</bridgehead>
    
    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="yasm"/>,
      <xref linkend="libass"/>,
      <xref linkend="fdk-aac"/>,
      <xref linkend="lame"/>,
      <xref linkend="opus"/>,
      <xref linkend="libtheora"/>,
      <xref linkend="libvorbis"/>,
      <xref linkend="libvpx"/>, et
      <xref linkend="x264"/>
    </para>
    <bridgehead renderas="sect4">Recommandées pour une utilisation de bureau</bridgehead>
    <para>
      <xref linkend="x-window-system"/>,
      <xref linkend="alsa-lib"/>,
      <xref linkend="sdl"/>,
      <xref linkend="libva"/> et
      <xref linkend="libvdpau"/>
      (avec les paquets des pilotes correspondants)
    </para>
    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      <xref linkend="faac"/>,
      <xref linkend="freetype2"/>,
      <xref linkend="libwebp"/>,
      <xref linkend="openjpeg"/>,
      <xref linkend="pulseaudio"/>,
      <xref linkend="speex"/>,
      <xref linkend="xvid"/>,
      <xref linkend="openssl"/>,
      <xref linkend="fontconfig"/>,
      <xref linkend="gnutls"/>,
      <ulink url="https://files.dyne.org/frei0r/snapshots/">frei0r</ulink>,
      <ulink url="http://xhevc.com/en/hevc/decoder/download.jsp">HEVC/H.265</ulink>,
      <ulink url="http://www.ladspa.org/">LADSPA</ulink>,
      <ulink url="http://www.libssh.org/">libssh</ulink>,
      <ulink url="http://zapping.sourceforge.net/ZVBI/">ZVBI</ulink>,
      <ulink url="http://tipok.org.ua/node/17">libaacplus</ulink>,
      <ulink url="http://www.videolan.org/developers/libbluray.html">libbluray</ulink>,
      <ulink url="http://caca.zoy.org/">libcaca</ulink>,
      <ulink url="http://www.celt-codec.org/">libcelt</ulink>,
      <ulink url="http://ftp.gnu.org/pub/gnu/libcdio/">libcdio</ulink>,
      <ulink url="http://sourceforge.net/projects/libdc1394">libdc1394</ulink>,
      <ulink url="http://www.speech.cs.cmu.edu/flite/">Flite</ulink>,
      <ulink url="http://www.quut.com/gsm/">GSM</ulink>,
      <ulink url="https://ieee1394.wiki.kernel.org/index.php/Libraries">libiec61883</ulink>,
      <ulink url="https://github.com/dekkers/libilbc">libilbc</ulink>,
      <ulink url="http://sourceforge.net/projects/modplug-xmms/">libmodplug</ulink>,
      <ulink url="https://github.com/Distrotech/libnut">libnut</ulink> (Git checkout)
      <ulink url="http://sourceforge.net/projects/opencore-amr">OpenCore AMR</ulink>,
      <ulink url="http://opencv.org/">OpenCV</ulink>,
      <ulink url="http://rtmpdump.mplayerhq.hu/">librtmp</ulink>,
      <ulink url="http://diracvideo.org/">Schroedinger</ulink>,
      <ulink url="http://www.twolame.org/">TwoLAME</ulink>,
      <ulink url="http://linuxtv.org/downloads/v4l-utils/">Video4Linux</ulink>,
      <ulink url="http://sourceforge.net/projects/opencore-amr/files/vo-aacenc/">vo-aaenc</ulink>,
      <ulink url="http://sourceforge.net/projects/opencore-amr/files/vo-amrwbenc/">vo-amrwbenc</ulink>,
      <ulink url="http://xavs.sourceforge.net/">libxavs</ulink> (SVN checkout),
      <ulink url="http://kcat.strangesoft.net/openal-releases/">OpenAL</ulink> et
      <ulink url="http://www.videolan.org/developers/x265.html">x265 (H.265/MPEG-H HEVC)</ulink>
  </para>
 
    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/ffmpeg"/></para>
  </sect2>
  <sect2 role="installation">
    <title>Installation de FFmpeg</title>
    <para>Installez <application>FFmpeg</application> en lançant les commandes
    suivantes&nbsp;:</para>
    
<screen>
<userinput>sed -i 's/-lflite"/-lflite -lasound"/' configure &amp;&amp;
./configure --prefix=/usr                    --enable-gpl                     --enable-version3                --enable-nonfree                 --disable-static                 --enable-shared                  --disable-debug                  --enable-libass                  --enable-libfdk-aac              --enable-libmp3lame              --enable-libtheora               --enable-libvorbis               --enable-libvpx                  --enable-libx264                 --enable-x11grab                 --docdir=/usr/share/doc/ffmpeg-&ffmpeg-version; &amp;&amp;
make &amp;&amp;
gcc tools/qt-faststart.c -o tools/qt-faststart</userinput>
</screen>
    <para>
      La documentation HTML a été construite à l'étape précédente 
      si 
      <xref linkend="texlive"/> et que vous souhaitiez des versions PDF et
      Postscript de la documentation, tapez les commandes suivantes:
    </para>
<screen>
<userinput>sed -i '$s/$/nn@bye/' doc/{git-howto,nut,fate}.texi             &amp;&amp;
sed -i '/machine:i386/ s/\/@backslashchar{}/g' doc/platform.texi &amp;&amp;
pushd doc &amp;&amp;
for DOCNAME in `basename -s .html *.html`
do
    texi2pdf -b $DOCNAME.texi &amp;&amp;
    texi2dvi -b $DOCNAME.texi &amp;&amp;
    dvips -o    $DOCNAME.ps                   $DOCNAME.dvi
done                          &amp;&amp;
popd                          &amp;&amp;
unset DOCNAME</userinput>
</screen>
   <para>Si vous avez installé <xref linkend="doxygen"/> et si vous souhaitez
    créer la documentation de l'API (ce qui prend environ 350 Mo d'espace),
    lancez la commande <command>doxygen</command>.</para>
    <para>
      La suite de tests fate inclu des comparaisons avec des fichiers installés, et ne doit pas
      être lancée avant que le paquet ne soit installé. Cependant, si vous souhaitez la lancer, les 
      instructions sont données en dessous.
     </para>
    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>
<screen role="root">
<userinput>make install &amp;&amp;
install -v -m755    tools/qt-faststart /usr/bin &amp;&amp;
install -v -m644    doc/*.txt                     /usr/share/doc/ffmpeg-&ffmpeg-version;</userinput>
</screen>
    <para>
	Si les documentations PDF et Postscript sont construites, tapez les commandes suivantes , en 
        tant qu'utilisateur <systemitem class="username">root</systemitem> pour l'installer:
    </para>
<screen role="root">
<userinput>install -v -m644 doc/*.pdf                  /usr/share/doc/ffmpeg-&ffmpeg-version; &amp;&amp;
install -v -m644 doc/*.ps                   /usr/share/doc/ffmpeg-&ffmpeg-version;</userinput>
</screen>
    <para>Si vous avez utilisé <command>doxygen</command> pour créer la 
    documentation de l'API, installez-la (300 Mo d'espace en plus) en
    lançant les commandes suivantes en tant qu'utilisateur
    <systemitem class="username">root</systemitem>&nbsp;:</para>
<screen role="root">
<userinput>install -v -m755 -d /usr/share/doc/ffmpeg-&ffmpeg-version;/api                       &amp;&amp;
cp -vr doc/doxy/html/* /usr/share/doc/ffmpeg-&ffmpeg-version;/api                    &amp;&amp;
find /usr/share/doc/ffmpeg-&ffmpeg-version;/api -type f -exec chmod -c 0644 "{}" ";" &amp;&amp;
find /usr/share/doc/ffmpeg-&ffmpeg-version;/api -type d -exec chmod -c 0755 "{}" ";"</userinput>
</screen>
<para>
      Pour tester proprement l'installation vous devez avoir installé <xref linkend="rsync"/>
      et suivi les instructions de 
      <ulink url="http://www.ffmpeg.org/fate.html">
      FFmpeg Automated Testing Environment</ulink>(fate). D'abord, environ 879 Mo de fichiers d'exemple utilisés pour lancer FATE sont 
      sont téléchargés avec la commande :
    </para>
<screen>
<userinput>make fate-rsync SAMPLES=fate-suite/</userinput>
</screen>
     <para>
      Le répertoire <filename class="directory">fate-suite</filename> est créé et les fichiers
      téléchargé ici. Cette commande lance maintenant une commande rsync pour obtenir les fichiers d'échantillons.
      Vous pouvez vouloir comprimer et laisser le répertoire pour retester
      de nouveau, dans un autre système, ou quand une nouvelle version de ffmpeg est lancée.
      Ensuite, vous déballez les fichiers d'échantillons dans le répertoire des sources, et lancez, de nouveau,
      la commande <command>make fate-rsync...</command> ci dessus, pour synchroniser avec le dépot.
      Maintenant, la taille du téléchargement et le temps sont drastiquement réduits.
      Les valeurs estimées dans "Information du paquet" n'incluent pas le SBU du téléchargement.
      Quelques échantillons peuvent être enlevés, dans les nouvelles versions, quand vous utilisez les échantillons
      précédents, lancez la commande suivante:
    </para>
<screen>
<userinput>make fate SAMPLES=fate-suite/ | tee ../fate.log &amp;&amp;
grep ^TEST ../fate.log | wc -l</userinput>
</screen>
   </sect2>
  <sect2 role="commands">
    <title>Explication des commandes</title>
<para>
      <command>sed -i ... configure</command>&nbsp;: Cette commande ajoute la bibliothèque
      <application>ALSA</application> dans la variable  <envar>LDFLAGS</envar> de 
      <application>Flite</application> et 
     active la découverte de <application>Flite</application>.
    </para>
     <para>
      <command>sed -i ... texi</command>: Corrige des fichiers .texi pour la construction de la documentation.
    </para>
    <para>
      <command>find ... ";"</command>: Corrige des droits de fichiers et de répertoires de documentation.
    </para>
    <para>
      <option>--enable-libfreetype</option>: Active le support de 
      <application>Freetype</application>.
    </para>
  <para><parameter>--enable-gpl</parameter>&nbsp;: Ce paramètre autorise l'utilisation de
    code GPL et permet le support pour que postprocessing, swscale et bien d'autres
    fonctionnalités.</para>
    <para>
      <parameter>--enable-version3</parameter>&nbsp;: Active l'utilisation du code (L)GPL
      version 3.
     </para>
    <para>
      <parameter>--enable-nonfree</parameter>&nbsp;: Active l'utilisation de code non-libre.
      Notez que les binaires et bibliothèques ne seront pas distribuable.
    </para>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/static-libraries.xml"/>
    <para>
      <parameter>--enable-shared</parameter>&nbsp;: Active la construction des bibliothèques
      partagées, sinon seulement les bibliothèques statiques sont construites et installées.
    </para>
   <para>
      <parameter>--disable-debug</parameter>: Désactive la construction des symboles de déboguage
      dans les programmes et les bibliothèques.
    </para>
    <para>
      <parameter>--enable-libass</parameter>: Active le moteur de rendu du format de sous-titre ASS/SSA
      via <filename class="libraryfile">libass</filename>.
    </para>
    <para>
      <parameter>--enable-libfdk-aac</parameter>: Active actuellement l'encodage et le décodage audio de plus grande qualité dans le format AAC
      via <filename class="libraryfile">libfdk-aac</filename>.
    </para>
    <para>
      <parameter>--enable-libmp3lame</parameter>&nbsp;: Active l'encodage MP3 via
      <filename class="libraryfile">libmp3lame</filename>.
    </para>
    <para>
      <parameter>--enable-libvorbis --enable-libtheora</parameter>: Active
      l'encodage vidéo Theora via <filename
      class="libraryfile">libvorbis</filename> et <filename
      class="libraryfile">libtheora</filename>.
    </para>
    <para>
      <parameter>--enable-libvorbis --enable-libvpx</parameter>: Active l'encodage WebM
      via <filename class="libraryfile">libvorbis</filename> et
      <filename class="libraryfile">libvpx</filename>.
    </para>
    
    <para>
      <parameter>--enable-libx264</parameter>: Active l'encodage de haute qualité H.264/MPEG-4
      AVC via <filename class="libraryfile">libx264</filename>.
    </para>
    
    <para>
      <parameter>--enable-x11grab</parameter>: Active X11 grabbing.
    </para>
    <para>
      <command>gcc tools/qt-faststart.c -o tools/qt-faststart</command>:
      Cela construit le programme <command>qt-faststart</command> qui peut modifier les films formatés en 
      QuickTime
      (<filename class="extension">.mov</filename> ou
      <filename class="extension">.mp4</filename>) pour que les informations d'entête soit placées au début du fichier au lieu de la fin.
      Cela permet de lire le film avant que le fichier entier ne soit téléchargé. 
    </para>
        <note>
      <para>
      Le support de la plupart des paquets dépendants demande l'utilisation d'options passées au script
      <command>configure</command>. Regardez la sortie de 
      <command>./configure --help</command> pour une information complète à propos de l'activation des paquets dépendants.
  </para>
</note>
  </sect2>
  <sect2 role="configuration">
    <title>Configuration de FFmpeg</title>
    <sect3 id="ffmpeg-config">
      <title>Fichiers de configuration</title>
      <para><filename>/etc/ffserver.conf</filename> et
      <filename>~/.ffmpeg/ffserver-config</filename></para>
      <indexterm zone="ffmpeg ffmpeg-config">
        <primary sortas="e-AA.ffmpeg-ffserver-config">~/.ffmpeg/ffserver-config</primary>
      </indexterm>
      <indexterm zone="ffmpeg ffmpeg-config">
        <primary sortas="e-etc-ffserver.conf">/etc/ffserver.conf</primary>
      </indexterm>
      <para>Vous trouverez un modèle de fichier de configuration pour
      <command>ffserver</command> sur 
      <filename>doc/ffserver.conf</filename> dans l'arborescence des sources.</para>
    </sect3>
  </sect2>
  <sect2 role="content">
    <title>Contenu</title>
    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>
      <seglistitem>
        <seg>
          ffmpeg,
          ffplay,
          ffprobe,
          ffserver et
          qt-faststart
        </seg>
        <seg>
          libavcodec.so,
          libavdevice.so,
          libavfilter.so,
          libavformat.so,
          libavutil.so,
          libpostproc.so,
          libswresample et
          libswscale.so
        </seg>
       <seg>
          /usr/include/libavcodec,
          /usr/include/libavdevice,
          /usr/include/libavfilter,
          /usr/include/libavformat,
          /usr/include/libavutil,
          /usr/include/postproc,
          /usr/include/libswscale,
          /usr/share/ffmpeg et
          /usr/share/doc/ffmpeg-&ffmpeg-version;
       </seg>
      </seglistitem>
    </segmentedlist>
    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      <varlistentry id="ffmpeg-prog">
        <term><command>ffmpeg</command></term>
        <listitem>
          <para>est un outil en ligne de commande pour convertir des fichiers
          vidéo, des flux réseaux et des entrées d'une carte TV en divers formats
          vidéo.</para>
          <indexterm zone="ffmpeg ffmpeg-prog">
            <primary sortas="b-ffmpeg">ffmpeg</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="ffplay">
        <term><command>ffplay</command></term>
        <listitem>
          <para>est un lecteur média très simple et portable utilisant les
          bibliothèques de <filename>ffmpeg</filename> et la bibliothèque SDL.</para>
          <indexterm zone="ffmpeg ffplay">
            <primary sortas="b-ffplay">ffplay</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="ffprobe">
        <term><command>ffprobe</command></term>
        <listitem>
          <para>rassemble des informations à partir de flux multimédia et
          les affiche d'une manière lisible par un homme ou une machine.</para>
          <indexterm zone="ffmpeg ffprobe">
            <primary sortas="b-ffprobe">ffprobe</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="ffserver">
        <term><command>ffserver</command></term>
        <listitem>
          <para>est un serveur de flux pour toutes les entrées utilisables par
          <command>ffmpeg</command> (fichiers, flux, entrées de carte TV, webcam,
          etc.).</para>
          <indexterm zone="ffmpeg ffserver">
            <primary sortas="b-ffserver">ffserver</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="qt-faststart">
        <term><command>qt-faststart</command></term>
        <listitem>
          <para>déplace le fichier d'index à l'avant des vidéos
          quicktime (mov/mp4).</para>
          <indexterm zone="ffmpeg qt-faststart">
            <primary sortas="b-qt-faststart">qt-faststart</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libavcodec">
        <term><filename class='libraryfile'>libavcodec.so</filename></term>
        <listitem>
          <para>est une bibliothèque contenant les codecs <application>FFmpeg</application>
          (pour l'encodage et le décodage).</para>
          <indexterm zone="ffmpeg libavcodec">
            <primary sortas="c-libavcodec">libavcodec.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libavdevice">
        <term><filename class='libraryfile'>libavdevice.so</filename></term>
        <listitem>
          <para>est le periphérique <application>FFmpeg</application> pour la manipulation de la
	  bibliothèque.</para>
          <indexterm zone="ffmpeg libavdevice">
            <primary sortas="c-libavdevice">libavdevice.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libavfilter">
        <term><filename class='libraryfile'>libavfilter.so</filename></term>
        <listitem>
          <para>est une bibliothèque ee filtres  capables de modifier des vidéos
          ou des sons entre un décodeur et un encodeur (ou une sortie).</para>
          <indexterm zone="ffmpeg libavfilter">
            <primary sortas="c-libavfilter">libavfilter.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libavformat">
        <term><filename class='libraryfile'>libavformat.so</filename></term>
        <listitem>
          <para>est une bibliothèque contenant la gestion des formats de fichier
          (code mux et demux pour plusieurs formats) utilisée par <command>ffplay</command> 
          et permettant de générer des flux audio et vidéo.</para>
          <indexterm zone="ffmpeg libavformat">
            <primary sortas="c-libavformat">libavformat.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libavutil">
        <term><filename class='libraryfile'>libavutil.so</filename></term>
        <listitem>
          <para>est la bibliothèque de l'utilitaire <application>FFmpeg</application>.</para>
          <indexterm zone="ffmpeg libavutil">
            <primary sortas="c-libavutil">libavutil.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
   
      <varlistentry id="libpostproc">
        <term><filename class='libraryfile'>libpostproc.so</filename></term>
        <listitem>
          <para>is the <application>FFmpeg</application> post processing
          library.</para>
          <indexterm zone="ffmpeg libpostproc">
            <primary sortas="c-libpostproc">libpostproc.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libswresample">
        <term><filename class="libraryfile">libswresample.so</filename></term>
        <listitem>
          <para>
            est la bibliothèque de <application>FFmpeg</application> pour la transformation audio,
            elle contient des fonctions pour convertir les formats d'échantillon audio.
          </para>
          <indexterm zone="ffmpeg libswresample">
            <primary sortas="c-libswresample">libswresample.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
     <varlistentry id="libswscale">
        <term><filename class='libraryfile'>libswscale.so</filename></term>
        <listitem>
          <para>is the <application>FFmpeg</application> image rescaling
          library.</para>
          <indexterm zone="ffmpeg libswscale">
            <primary sortas="c-libswscale">libswscale.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect2>
</sect1>
