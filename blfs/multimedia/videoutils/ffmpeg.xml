<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  <!ENTITY ffmpeg-download-http
    "http://ffmpeg.org/releases/ffmpeg-&ffmpeg-version;.tar.bz2">
  <!ENTITY ffmpeg-download-ftp  " ">
  <!ENTITY ffmpeg-md5sum        "93c1908022567b321df74db7214da6ac">
  <!ENTITY ffmpeg-size          "5.7 Mo">
  <!ENTITY ffmpeg-buildsize     "244 Mo">
  <!ENTITY ffmpeg-time          "3.6 SBU">
]>

<sect1 id="ffmpeg" xreflabel="FFmpeg-&ffmpeg-version;">
  <?dbhtml filename="ffmpeg.html"?>

  <sect1info>
    <othername>$LastChangedBy : krejzi $</othername>
    <date>$Date : 2012-08-25 22:05:14 +0200 (Sat, 25 Aug 2012) $</date>
  </sect1info>

  <title>FFmpeg-&ffmpeg-version;</title>

  <indexterm zone="ffmpeg">
    <primary sortas="a-FFmpeg">FFmpeg</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à FFmpeg</title>

    <para><application>FFmpeg</application> est une solution pour enregistrer
    et convertir un flux audio et vidéo. C'est un convertisseur audio et vidéo
    très rapide et il peut aussi acquérir à partir d'une source audio et vidéo
    en direct. Conçu pour être intuitif, l'interface en ligne de commande
    (<command>ffmpeg</command>) tente de couvrir tous les paramètres lorsque
    cela est possible. <application>FFmpeg</application> peut convertir aussi
    entre des vitesses d'échantillon et redimensionner des vidéos à la volée
    avec un filtre polyphases de haute qualité. <application>FFmpeg</application> 
    peut utiliser une source vidéo compatible video4linux et n'importe quelle
    source audio <foreignphrase>Open Sound System</foreignphrase>.</para>

&lfs72_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&ffmpeg-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&ffmpeg-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &ffmpeg-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &ffmpeg-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &ffmpeg-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &ffmpeg-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de FFmpeg</bridgehead>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="yasm"/>
    </para>


    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      <xref linkend="faad2"/>, 
      <xref linkend="lame"/>,
      <xref linkend="libtheora"/>, 
      <xref linkend="libvorbis"/>,
      <xref linkend="libvpx"/>, 
      <xref linkend="xorg7-lib"/>,
      <ulink url="http://www.videolan.org/developers/x264.html">x264</ulink>
      <xref linkend="xvid"/>,
      <ulink url="http://sourceforge.net/projects/opencore-amr">OpenCore AMR</ulink>,
      <xref linkend="faac"/>, 
      <xref linkend="freetype2"/>,
      <ulink url="http://libgsm.sourcearchive.com/">GSM</ulink>,
      <ulink url="http://sourceforge.net/projects/libdc1394">libdc1394</ulink>,
      <ulink url="http://svn.mplayerhq.hu/nut/src/trunk/">libnut</ulink>
         (SVN checkout),
      <ulink url="http://xavs.sourceforge.net/">libxavs</ulink>
         (SVN checkout),
      <ulink url="http://sourceforge.net/projects/librtmp">librtmp</ulink>,
      <ulink url="http://diracvideo.org/">libschroedinger</ulink>,
      <ulink url="http://medialibrary.sourceforge.net/">MediaLibrary</ulink>,
      <ulink
      url="http://connect.creativelabs.com/openal/default.aspx">OpenAL</ulink>,
      <ulink url="http://tipok.org.ua/node/17">libaacplus</ulink>,
      <ulink url="http://code.google.com/p/libass/">libass</ulink>,
      <ulink url="http://www.celt-codec.org/">libcelt</ulink>,
      <ulink url="http://ftp.gnu.org/pub/gnu/libcdio/">libcdio</ulink>,
      <ulink
      url="http://sourceforge.net/projects/opencvlibrary/">libopencv</ulink>,
      <ulink url="http://sourceforge.net/projects/libdc1394/">libdc1394</ulink>,
      <ulink url="http://linuxtv.org/downloads/v4l-utils/">libv4l2</ulink>,
      <xref linkend="openjpeg"/>
        (<application>FFmpeg</application> inclue le code pour ses propres encodeur et décodeur jpeg2000
        qui sont activés par défaut), 
      <xref linkend="speex"/>,
      <xref linkend="gnutls"/>,
      <xref linkend="openssl"/>,
      <xref linkend="sdl"/> et
      <ulink url="http://www.nongnu.org/texi2html">texi2html</ulink>
        (pour construire la documentation HTML).</para>
	
    <bridgehead renderas="sect4">Facultatives (Pour le décodage Vidéo matériel)</bridgehead>
    <para role="optional">
      <ulink url="http://cgit.freedesktop.org/vaapi/libva/">VA API</ulink>
      avec les pilotes correspondants, incluant:
      <ulink url="http://cgit.freedesktop.org/vaapi/intel-driver/">Intel Driver (i965 chipsets seulement)</ulink>,
      <ulink url="http://www.splitted-desktop.com/static/libva/xvba-video/">XVBA pilote pour les cartes Radeon</ulink> and
      <ulink url="http://cgit.freedesktop.org/vaapi/vdpau-driver/">VDPAU pilote pour les cartes NVidia</ulink>
      (requiert <ulink url="http://cgit.freedesktop.org/~aplattner/libvdpau/">libvdpau</ulink>).
    </para>
    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/ffmpeg"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de FFmpeg</title>

    <para>Installez <application>FFmpeg</application> en lançant les commandes
    suivantes&nbsp;:</para>

<screen><userinput>./configure --prefix=/usr   \
            --enable-gpl    \
            --enable-shared \
            --disable-static &amp;&amp;
make</userinput></screen>

  <para>Pour convertir les docs en html utilisez les commandes suivantes&nbsp;:</para>
<screen><userinput>sed -i '/@top/d;/ignore$/d'    doc/*.texi                   &amp;&amp;
sed -i '/@include avoptions/d' doc/avtools-common-opts.texi &amp;&amp;

for DOC in doc/*.texi; do
   makeinfo --html --no-split -o ${DOC%texi}html ${DOC}
done</userinput></screen>

   <para>Si vous avez installé <xref linkend="doxygen"/> et si vous souhaitez
    créer la documentation de l'API (ce qui prend environ 150 Mo d'espace),
    lancez la commande <command>doxygen</command>.</para>

    <para>Ce paquet n'inclut aucune suite de tests.</para>

    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>make install &amp;&amp;
make install-man &amp;&amp;
mkdir -p                  /usr/share/doc/ffmpeg-&ffmpeg-version; &amp;&amp;
cp    -v doc/*.{html,txt} /usr/share/doc/ffmpeg-&ffmpeg-version;</userinput></screen>

    <para>Les source de <application>Ffmpeg</application> contiennent un outil qui s'apelle
    <command>qt-faststart</command> et qui peut modifier des vidéos au format
    QuickTime (mov ou mp4) pour que les informations d'en-tête se mettent au début
    du fichier et non à la fin. Cela permet aux lecteurs vidéos de commencar à 
    lire le contenu avant que tout le fichier n'ait été téléchargé. Un exemple
    de cas utile est la péparation de vidéos avant de las déposer sur
    Tube. Si vous avez besoin de <command>qt-faststart</command>, vous pouvez
    le compiler avec gcc&nbsp;:</para>

<screen><userinput>gcc tools/qt-faststart.c -o /usr/bin/qt-faststart</userinput></screen>

    <para>Si vous avez utilisé <command>doxygen</command> pour créer la 
    documentation de l'API, installez-la en
    lançant les commandes suivantes en tant qu'utilisateur
    <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>mkdir -p        /usr/share/doc/ffmpeg-&ffmpeg-version;/api &amp;&amp;
cp    -v doxy/* /usr/share/doc/ffmpeg-&ffmpeg-version;/api</userinput></screen>

   </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para><option>--enable-gpl</option>&nbsp;: Ce paramètre autorise l'utilisation de
    code GPL et permet le support pour que postprocessing, swscale et bien d'autres
    fonctionnalités.</para>

    <para><option>--enable-shared</option>&nbsp;: Ce paramètre est
    nécessaire pour construire les bibliothèques partagées, sinon seules les
    bibliothèques statiques sont construites et installées.</para>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/static-libraries.xml"/>

    <para><option>--enable-<replaceable>&lt;codec&gt;</replaceable></option>&nbsp;:
    <application>FFmpeg</application> est fourni avec du code pour compiler
    les décodeurs de presque tous les codecs imaginables. La seule raison pour
    activer un codec en particulier (ainsi <application>FFmpeg</application> se lie à la bibliothèque 
    partagée prérequise installée sur votre système au lieu de celle de votre 
    système), est pour que vous
    voulez que <command>ffmpeg</command> compile un <emphasis>encodeur</emphasis> pour 
    ce codec.<application>FFmpeg</application> est un excellent ensemble de decodeurs.
    Si vous ne voulez utiliser <application>FFmpeg</application> que pour regarder
    des vidéos ou écouter de la musique (avec d'autres
    applications telles que <application>Gstreamer</application> ou Xine) vous n'aurez
    pas d'avantage à le lier à une autre bibliothèque.</para>

    <para>
      <command>sed -i '/@top/d;/ignore$/d' *.texi</command> et
      <command>sed -i '/@include avoptions/d' avtools-common-opts.texi</command>&nbsp;:
      ces commandes seds résolvent les problèmes avec les fichiers .texi.
    </para>
    <para>
      <command>makeinfo --html --no-split -o ${DOC%texi}html ${DOC}</command>&nbsp;:
      cela convertit les fichiers .texi en html.
    </para>
  </sect2>

  <sect2 role="configuration">
    <title>Configuration de FFmpeg</title>

    <sect3 id="ffmpeg-config">
      <title>Fichiers de configuration</title>

      <para><filename>/etc/ffserver.conf</filename> et
      <filename>~/.ffmpeg/ffserver-config</filename></para>

      <indexterm zone="ffmpeg ffmpeg-config">
        <primary sortas="e-AA.ffmpeg-ffserver-config">~/.ffmpeg/ffserver-config</primary>
      </indexterm>

      <indexterm zone="ffmpeg ffmpeg-config">
        <primary sortas="e-etc-ffserver.conf">/etc/ffserver.conf</primary>
      </indexterm>

      <para>Vous trouverez un modèle de fichier de configuration pour
      <command>ffserver</command> sur 
      <filename>doc/ffserver.conf</filename> dans l'arborescence des sources.</para>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>
          ffmpeg,
          ffplay,
          ffprobe,
          ffserver et
          qt-faststart
        </seg>
        <seg>
          libavcodec.so,
          libavdevice.so,
          libavfilter.so,
          libavformat.so,
          libavutil.so,
          libpostproc.so,
          libswresample et
          libswscale.so
        </seg>
       <seg>
          /usr/include/libavcodec,
          /usr/include/libavdevice,
          /usr/include/libavfilter,
          /usr/include/libavformat,
          /usr/include/libavutil,
          /usr/include/postproc,
          /usr/include/libswscale,
          /usr/share/ffmpeg et
          /usr/share/doc/ffmpeg-&ffmpeg-version;
       </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="ffmpeg-prog">
        <term><command>ffmpeg</command></term>
        <listitem>
          <para>est un outil en ligne de commande pour convertir des fichiers
          vidéo, des flux réseaux et des entrées d'une carte TV en divers formats
          vidéo.</para>
          <indexterm zone="ffmpeg ffmpeg-prog">
            <primary sortas="b-ffmpeg">ffmpeg</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ffplay">
        <term><command>ffplay</command></term>
        <listitem>
          <para>est un lecteur média très simple et portable utilisant les
          bibliothèques de <filename>ffmpeg</filename> et la bibliothèque SDL.</para>
          <indexterm zone="ffmpeg ffplay">
            <primary sortas="b-ffplay">ffplay</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ffprobe">
        <term><command>ffprobe</command></term>
        <listitem>
          <para>rassemble des informations à partir de flux multimédia et
          les affiche d'une manière lisible par un homme ou une machine.</para>
          <indexterm zone="ffmpeg ffprobe">
            <primary sortas="b-ffprobe">ffprobe</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ffserver">
        <term><command>ffserver</command></term>
        <listitem>
          <para>est un serveur de flux pour toutes les entrées utilisables par
          <command>ffmpeg</command> (fichiers, flux, entrées de carte TV, webcam,
          etc.).</para>
          <indexterm zone="ffmpeg ffserver">
            <primary sortas="b-ffserver">ffserver</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="qt-faststart">
        <term><command>qt-faststart</command></term>
        <listitem>
          <para>déplace le fichier d'index à l'avant des vidéos
          quicktime (mov/mp4).</para>
          <indexterm zone="ffmpeg qt-faststart">
            <primary sortas="b-qt-faststart">qt-faststart</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libavcodec">
        <term><filename class='libraryfile'>libavcodec.so</filename></term>
        <listitem>
          <para>est une bibliothèque contenant les codecs <application>FFmpeg</application>
          (pour l'encodage et le décodage).</para>
          <indexterm zone="ffmpeg libavcodec">
            <primary sortas="c-libavcodec">libavcodec.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libavdevice">
        <term><filename class='libraryfile'>libavdevice.so</filename></term>
        <listitem>
          <para>est le periphérique <application>FFmpeg</application> pour la manipulation de la
	  bibliothèque.</para>
          <indexterm zone="ffmpeg libavdevice">
            <primary sortas="c-libavdevice">libavdevice.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libavfilter">
        <term><filename class='libraryfile'>libavfilter.so</filename></term>
        <listitem>
          <para>est une bibliothèque ee filtres  capables de modifier des vidéos
          ou des sons entre un décodeur et un encodeur (ou une sortie).</para>
          <indexterm zone="ffmpeg libavfilter">
            <primary sortas="c-libavfilter">libavfilter.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libavformat">
        <term><filename class='libraryfile'>libavformat.so</filename></term>
        <listitem>
          <para>est une bibliothèque contenant la gestion des formats de fichier
          (code mux et demux pour plusieurs formats) utilisée par <command>ffplay</command> 
          et permettant de générer des flux audio et vidéo.</para>
          <indexterm zone="ffmpeg libavformat">
            <primary sortas="c-libavformat">libavformat.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libavutil">
        <term><filename class='libraryfile'>libavutil.so</filename></term>
        <listitem>
          <para>est la bibliothèque de l'utilitaire <application>FFmpeg</application>.</para>
          <indexterm zone="ffmpeg libavutil">
            <primary sortas="c-libavutil">libavutil.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
   
      <varlistentry id="libpostproc">
        <term><filename class='libraryfile'>libpostproc.so</filename></term>
        <listitem>
          <para>is the <application>FFmpeg</application> post processing
          library.</para>
          <indexterm zone="ffmpeg libpostproc">
            <primary sortas="c-libpostproc">libpostproc.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libswresample">
        <term><filename class="libraryfile">libswresample.so</filename></term>
        <listitem>
          <para>
            est la bibliothèque de <application>FFmpeg</application> pour la transformation audio,
            elle contient des fonctions pour convertir les formats d'échantillon audio.
          </para>
          <indexterm zone="ffmpeg libswresample">
            <primary sortas="c-libswresample">libswresample.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

     <varlistentry id="libswscale">
        <term><filename class='libraryfile'>libswscale.so</filename></term>
        <listitem>
          <para>is the <application>FFmpeg</application> image rescaling
          library.</para>
          <indexterm zone="ffmpeg libswscale">
            <primary sortas="c-libswscale">libswscale.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect2>
</sect1>
