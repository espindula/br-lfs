<sect2>
<title>Configurer <application><acronym>ALSA</acronym> Utilities</application></title>

<sect3><title>Fichier de configurations</title>

<para><filename>/etc/asound.state</filename></para>

</sect3>

<sect3><title>Informations de configuration</title>

<para>La façon la plus simple de stocker les niveaux de mixage est certainement
de les configurer en utilisant un script de démarrage. Il est possible de faire
cela avec une ligne <userinput>post-install</userinput> dans
<filename>/etc/modules.conf</filename> mais ceci est laissé comme exercice aux
lecteurs souhaitant le faire.</para>

<para>Le package <application><acronym>ALSA</acronym> Driver</application> installe un script nommé
<filename>/etc/rc.d/init.d/alsasound</filename>. Bien qu'il soit possible
d'utiliser ce script, il contient plein de détails supplémentaires et non
nécessaire à un système LFS, donc nous créons notre propre script
<filename>/etc/rc.d/init.d/alsa</filename>.</para>

<para>Pour créer le script <application><acronym>ALSA</acronym></application>, faites ce qui suit:</para>

<screen><userinput><command>cat &gt; /etc/rc.d/init.d/alsa &lt;&lt; "EOF"</command>
#!/bin/sh
# Début $rc_base/init.d/alsa

# Basé sur le script sysklogd de LFS-3.1 et précédents.
# Réécrit par Gerard Beekmans  - gerard@linuxfromscratch.org
# Parties spécifiques à ALSA par Mark Hymers - markh@linuxfromscratch.org
# Stockage des paramètrages du mixage dans l'emplacement par défaut: /etc/asound.state

source /etc/sysconfig/rc
source $rc_functions

case "$1" in
    start)
        echo "Starting ALSA...    Restoring volumes..."
        loadproc /usr/sbin/alsactl restore
        #echo "                    Loading MIDI font..."
        #loadproc sfxload /path/to/soundfont
        ;;

    stop)
        echo "Stopping ALSA...    Saving volumes......"
        loadproc /usr/sbin/alsactl store
        #echo "            Removing MIDI font.........."
        #loadproc sfxload -i
        ;;

    restart)
        $0 stop
        /usr/bin/sleep 1
        $0 start
        ;;

    *)
        echo "Usage: $0 {start|stop|restart}"
        exit 1
        ;;

esac

# Fin $rc_base/init.d/alsa
<command>EOF
chmod 755 /etc/rc.d/init.d/alsa</command></userinput></screen>


<para>Vous pouvez alors créer les liens symboliques associés:</para>
<screen><userinput><command>cd /etc/rc.d/init.d &amp;&amp;
ln -sf ../init.d/alsa ../rc0.d/K35alsa &amp;&amp;
ln -sf ../init.d/alsa ../rc1.d/K35alsa &amp;&amp;
ln -sf ../init.d/alsa ../rc2.d/S40alsa &amp;&amp;
ln -sf ../init.d/alsa ../rc3.d/S40alsa &amp;&amp;
ln -sf ../init.d/alsa ../rc4.d/S40alsa &amp;&amp;
ln -sf ../init.d/alsa ../rc5.d/S40alsa &amp;&amp;
ln -sf ../init.d/alsa ../rc6.d/K35alsa</command></userinput></screen>

<para>Notez que tous les canaux de votre carte son sont muets par défaut. Vous
pouvez utiliser le programme <command>alsamixer</command> de <application><acronym>ALSA</acronym> Utilities</application> (ou
tout autre mixeur <acronym>OSS</acronym>) pour le changer.</para>

<para>De même, la première fois que le script ci-dessus est lancé, il se
plaindra qu'il ne trouve pas d'état dans <filename>/etc/asound.state</filename>.
Vous pouvez empêcher ceci en lançant les commandes suivantes après
l'installation d'<application><acronym>ALSA</acronym> Utilities</application>:</para>
<screen><userinput><command>touch /etc/asound.state &amp;&amp;
alsactl store</command></userinput></screen>

<para>Une note finale pour indiquer que les lignes permettant le chargement de
<filename>sfxload</filename> sont en commentaires. Elles sont ici comme exemple
d'autres choses que vous pourriez vouloir faire dans le script de démarrage.
<filename>sfxload</filename> est un package séparé intéressant les utilisateurs
de SoundBlaster AWE et Live!. Il a été conçu pour charger les "sons" utilisés
par la sortie <acronym>MIDI</acronym>. Vous pouvez souhaiter supprimer ces lignes et ajouter les
vôtres ou, si vous diposez de la carte adéquate, installer
<filename>sfxload</filename> et supprimer les commentaires.</para>

</sect3>

</sect2>

