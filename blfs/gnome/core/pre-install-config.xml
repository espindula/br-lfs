<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<sect1 id="gnome-pre-install-config">
  <?dbhtml filename="pre-install-config.html"?>

  <sect1info>
    <othername>$LastChangedBy: ken $</othername>
    <date>$Date: 2012-01-25 01:04:37 +0100 (mer. 25 janv. 2012) $</date>
  </sect1info>

  <title>Configuration de pré-installation</title>
  
  <!-- FIXME:ken -->
  <note>
  <para>Les paquets <application>GNOME</application> sont en cours de mise à jours vers 
  <application>GNOME-3</application>.  Maintenant, les instructions
  et les liens de beaucoups de paquets <application>GNOME</application> sont probablement
  invalides. Merci de consulter les archives de la liste BLFS-support, dans les mails du 24 janvier
  2012, un lien pour l'ancien livre avec <application>GNOME-2</application> est donné et ou regarder pour voir comment construire
  <application>GNOME-3</application>.</para>
  </note>


  <para>Paramétrez une variable d'environnement pour résoudre le préfixe de
  destination.</para>

  <para>Si <application>GNOME</application> est le bureau de votre choix&nbsp;:</para>

<screen><userinput>cat &gt; /etc/profile.d/gnome.sh &lt;&lt; "EOF" &amp;&amp;
<literal>export GNOME_PREFIX=/usr
export GNOME_SYSCONFDIR=&gnome-etc-dir;
export XDG_CONFIG_DIRS=$GNOME_SYSCONFDIR/xdg
export XDG_DATA_DIRS=/usr/share:/usr/local/share</literal>
EOF
. /etc/profile.d/gnome.sh</userinput></screen>
 
  <para>Si vous voulez juste essayer <application>GNOME</application>, ou
  l'installer à un endroit facile à supprimer&nbsp;:</para>

  <note>
    <para>Il se peut que vous souhaitiez créer un lien symbolique vers le 
    répertoire versioné final en utilisant un nom non versionné. Ceci a l'avantage
    d'un chemin plus facile à taper dans toutes les modifications ci-dessous et
    cela facilite aussi le pointage vers une autre version différente/plus
    récente de GNOME sans changer toutes les éditions ci-dessous. Si vous
    souhaitez utiliser un nom non versionné dans les modifiations ci-dessous,
    
    lancez les commandes suivantes en tant qu'utilisateur
    <systemitem class='username'>root</systemitem>&nbsp;:</para>

<screen role='root'><userinput>install -v -m755 -d /opt/gnome-&gnome-version;&gnome-minor-version; &amp;&amp;
ln -v -s gnome-&gnome-version;&gnome-minor-version; /opt/gnome</userinput></screen>
  </note>

  <para>Si vous avez créé le lien symbolique, modifiez tous les
  <filename class='directory'>/opt/gnome-&gnome-version;&gnome-minor-version;</filename>
  en <filename class='directory'>/opt/gnome</filename> dans les instructions
  ci-dessous.</para>

<screen><userinput>export GNOME_PREFIX=/opt/gnome-&gnome-version;&gnome-minor-version;</userinput></screen>

  <para>Le groupe d'essai devra également faire tous les changements de
  configuration suivants&nbsp;:</para>

  <para>Ajoutez à votre système ou à votre profil personnel&nbsp;:</para>

<screen><literal>export PATH=$PATH:/opt/gnome-&gnome-version;&gnome-minor-version;/bin
export PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/opt/gnome-&gnome-version;&gnome-minor-version;/lib/pkgconfig
export PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/opt/gnome-&gnome-version;&gnome-minor-version;/share/pkgconfig
export GNOME_LIBCONFIG_PATH=/usr/lib:/opt/gnome-&gnome-version;&gnome-minor-version;/lib
export PYTHONPATH=$PYTHONPATH:/opt/gnome-&gnome-version;&gnome-minor-version;/lib/python&python2-majorver;/site-packages</literal></screen>

  <para>Ajoutez à votre <filename>/etc/ld.so.conf</filename>&nbsp;:</para>

<screen role='root'><userinput>cat &gt;&gt; /etc/ld.so.conf &lt;&lt; "EOF"
<literal># Début du supplément de gnome à /etc/ld.so.conf

/opt/gnome-&gnome-version;&gnome-minor-version;/lib

# Fin des suppléments de gnome</literal>
EOF</userinput></screen>

  <para>Ajoutez à votre <filename>/etc/man_db.conf</filename>&nbsp;:</para>

<screen role='root'><userinput>cat &gt;&gt; /etc/man_db.conf &lt;&lt; "EOF"
<literal># Début du supplément de gnome à man_db.conf

MANDATORY_MANPATH /opt/gnome-&gnome-version;&gnome-minor-version;/share/man

# Fin du supplément de gnome à man_db.conf</literal>
EOF</userinput></screen>

  <tip>
    <para>Souvenez-vous d'exécuter <command>ldconfig</command> en tant
    qu'utilisateur <systemitem class='username'>root</systemitem> après
    avoir installé les bibliothèques pour mettre à jour le cache de bibliothèque
    de l'éditeur de liens.</para>
  </tip>

</sect1>
