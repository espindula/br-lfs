<sect2>
<title>Configurer gdm</title>

<sect3><title>Fichiers de configuration</title>
<para><userinput>/opt/gnome2/gdm.conf /opt/gnome2/gnomerc</userinput></para>
</sect3>

<sect3><title>Informations de configuration</title>

<para>Les fichiers de configurations gdm PAM contiennent des modules non
présents lors d'une installation BLFS. Les commandes suivantes vont remplacer
ces fichiers:</para>
<screen><userinput>cat &gt; /etc/pam.d/gdm &lt;&lt; "EOF"</userinput>
auth        required    pam_unix.so
auth        required    pam_nologin.so
account     required    pam_unix.so
password    required    pam_unix.so
session     required    pam_unix.so
<userinput>EOF</userinput></screen>
<screen><userinput>cat &gt; /etc/pam.d/gdm-autologin &lt;&lt; "EOF"</userinput>
auth        required    pam_env.so
auth        required    pam_nologin.so
auth        required    pam_permit.so
account     required    pam_unix.so
password    required    pam_unix.so
session     required    pam_unix.so
<userinput>EOF</userinput></screen>

<para>gdm peut être testé en le lançant à partir de la console root.</para>

<para>Pour automatiser le lancement de gdm, utilisez la commande suivante pour
créer le script init.d:
<screen><userinput>cat &gt; /etc/rc.d/init.d/gdm &lt;&lt; "EOF"</userinput>
#!/bin/bash
# Debut $rc_base/init.d/gdm

# Basé sur le script sysklogd de LFS-3.1 et précédent.
# Réécrit par Gerard Beekmans  - gerard@linuxfromscratch.org

source /etc/sysconfig/rc
source $rc_functions

case "$1" in
        start)
                echo "Starting gdm..."
                loadproc /opt/gnome2/bin/gdm
                ;;

        stop)
                echo "Stopping gdm..."
		if [ -f /var/run/gdm.pid ]; then
			loadproc /opt/gnome2/sbin/gdm-stop
		fi;
                ;;

        reload)
                echo "Reloading gdm..."
                reloadproc /opt/gnome2/sbin/gdm-safe-restart
                ;;

        restart)
                echo "Restarting gdm..."
		loadproc /opt/gnome2/sbin/gdm-restart
               ;;

        *)
                echo "Usage: $0 {start|stop|reload|restart}"
                exit 1
                ;;
esac

# Fin $rc_base/init.d/gdm
<userinput>EOF
chmod 755 /etc/rc.d/init.d/gdm</userinput></screen></para>

<para>Créez les liens symboliques vers ce fichier dans les répertoires rc.d
avec les commandes suivantes:
<screen><userinput>cd /etc/rc.d/init.d &amp;&amp;
ln -sf ../init.d/gdm ../rc0.d/K05gdm &amp;&amp;
ln -sf ../init.d/gdm ../rc1.d/K05gdm &amp;&amp;
ln -sf ../init.d/gdm ../rc2.d/K05gdm &amp;&amp;
ln -sf ../init.d/gdm ../rc3.d/K05gdm &amp;&amp;
ln -sf ../init.d/gdm ../rc4.d/K05gdm &amp;&amp;
ln -sf ../init.d/gdm ../rc5.d/S95gdm &amp;&amp;
ln -sf ../init.d/gdm ../rc6.d/K05gdm</userinput></screen></para>

<para>Pour démarrer automatiquement avec un login graphique, éditez
<filename>/etc/inittab</filename> de façon à ce que la ligne indiquant
<screen>id:3:initdefault:</screen>
soit changé en
<screen>id:5:initdefault:</screen></para>

</sect3>

</sect2>

