<sect2>
<title>Configurer <application>GDM</application></title>

<sect3><title>Fichiers de configuration</title>
<para><filename>/opt/gnome2/gdm.conf</filename>,
<filename>/opt/gnome2/gnomerc</filename></para>
</sect3>

<sect3><title>Informations de configuration</title>

<para>Les fichiers de configurations <application>GDM</application>
<application>PAM</application> contiennent des modules non présents lors d'une
installation <acronym>BLFS</acronym>. Les commandes suivantes vont remplacer
ces fichiers:</para>
<screen><userinput><command>cat &gt; /etc/pam.d/gdm &lt;&lt; "EOF"</command>
auth        required    pam_unix.so
auth        required    pam_nologin.so
account     required    pam_unix.so
password    required    pam_unix.so
session     required    pam_unix.so
<command>EOF
cat &gt; /etc/pam.d/gdm-autologin &lt;&lt; "EOF"</command>
auth        required    pam_env.so
auth        required    pam_nologin.so
auth        required    pam_permit.so
account     required    pam_unix.so
password    required    pam_unix.so
session     required    pam_unix.so
<command>EOF</command></userinput></screen>

<para><command>gdm</command> peut être testé en le lançant à partir de la
console root.</para>

<para>Pour automatiser le lancement de <command>gdm</command>, utilisez la
commande suivante pour créer le script init.d si votre GNOME_PREFIX vaut
/opt/gnome-&gnome-version;. Les chemins complètement qualifiés peuvent être
remplacés par:</para>
<screen><userinput><command>cat &gt; /etc/rc.d/init.d/gdm &lt;&lt; "EOF"</command>
#!/bin/bash
# Debut $rc_base/init.d/gdm

# Basé sur le script sysklogd de LFS-3.1 et précédent.
# Réécrit par Gerard Beekmans  - gerard@linuxfromscratch.org

source /etc/sysconfig/rc
source $rc_functions

case "$1" in
        start)
                echo "Starting GDM..."
                loadproc /opt/gnome-&gnome-version;/bin/gdm
                ;;

        stop)
                echo "Stopping GDM..."
		if [ -f /var/run/gdm.pid ]; then
			loadproc /opt/gnome-&gnome-version;/sbin/gdm-stop
		fi;
                ;;

        reload)
                echo "Reloading GDM..."
                reloadproc /opt/gnome-&gnome-version;/sbin/gdm-safe-restart
                ;;

        restart)
                echo "Restarting GDM..."
		loadproc /opt/gnome-&gnome-version;/sbin/gdm-restart
               ;;

        *)
                echo "Usage: $0 {start|stop|reload|restart}"
                exit 1
                ;;
esac

# Fin $rc_base/init.d/gdm
<command>EOF
chmod 755 /etc/rc.d/init.d/gdm</command></userinput></screen>

<para>Créez les liens symboliques vers ce fichier dans les répertoires
<filename>rc.d</filename> avec les commandes suivantes:</para>
<screen><userinput><command>cd /etc/rc.d/init.d &amp;&amp;
ln -sf ../init.d/gdm ../rc0.d/K05gdm &amp;&amp;
ln -sf ../init.d/gdm ../rc1.d/K05gdm &amp;&amp;
ln -sf ../init.d/gdm ../rc2.d/K05gdm &amp;&amp;
ln -sf ../init.d/gdm ../rc3.d/K05gdm &amp;&amp;
ln -sf ../init.d/gdm ../rc4.d/K05gdm &amp;&amp;
ln -sf ../init.d/gdm ../rc5.d/S95gdm &amp;&amp;
ln -sf ../init.d/gdm ../rc6.d/K05gdm</command></userinput></screen>

<para>Pour démarrer automatiquement avec un login graphique, éditez
<filename>/etc/inittab</filename> de façon à ce que la ligne
indiquant</para>
<screen>id:3:initdefault:</screen>
<para>soit changé en</para>
<screen>id:5:initdefault:</screen>

</sect3>

</sect2>

