<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY gdm-download-http "&gnome-download-http;/gdm/&gnome-version;/gdm-&gdm-version;.tar.bz2">
  <!ENTITY gdm-download-ftp  "&gnome-download-ftp;/gdm/&gnome-version;/gdm-&gdm-version;.tar.bz2">
  <!ENTITY gdm-md5sum        "08555fce34d247062625c1a451a4d5a6">
  <!ENTITY gdm-size          "3.4 Mio">
  <!ENTITY gdm-buildsize     "64 Mio">
  <!ENTITY gdm-time          "0.6 SBU">
]>

<sect1 id="gdm" xreflabel="GDM-&gdm-version;">
  <?dbhtml filename="gdm.html"?>

  <sect1info>
    <othername>$LastChangedBy: randy $</othername>
    <date>$Date: 2007-07-26 20:58:49 +0200 (jeu, 26 jui 2007) $</date>
  </sect1info>

  <title>GDM-&gdm-version;</title>

  <indexterm zone="gdm">
    <primary sortas="a-GDM">GDM</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à GDM</title>

    <para>Le paquet <application>GDM</application> contient le démon du
    gestionnaire d'affichage de <application>GNOME</application>. C'est
    utile pour permettre des connexions graphiques configurables.</para>

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&gdm-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&gdm-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &gdm-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &gdm-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &gdm-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &gdm-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de GDM</bridgehead>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required"><xref linkend="libgnomecanvas"/>,
    <xref linkend="gnome-doc-utils"/> et
    <xref linkend="librsvg"/></para>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional"><xref linkend="intltool"/>,
    <xref linkend="zenity"/>,
    <xref linkend="linux-pam"/>,
    <xref linkend="tcpwrappers"/>,
    <ulink url="http://people.freedesktop.org/~mccann/dist/">ConsoleKit</ulink> et
    <ulink url="http://www.openafs.org/">OpenAFS</ulink></para>

    <para>If you configure <application>GDM</application> pour offrir des
    connexions sécurisées auxmachines distantes, vous devrez installer
    <xref linkend="zenity"/>, <xref linkend="openssh"/> et
    <xref linkend="which"/>.</para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/gdm"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de GDM</title>

    <para>Il est recommandé d'avoir un groupe et un utilisateur dédiés pour
    prendre le contrôle du démon <command>gdm-binary</command> après qu'il
    a été démarré. Lancez les commandes suivantes en tant qu'utilisateur
    <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role='root'><userinput>groupadd -g 21 gdm &amp;&amp;
useradd -c "GDM Daemon Owner" -d /dev/null \
        -g gdm -s /bin/bash -u 21 gdm</userinput></screen>

    <para>Installez <application>GDM</application> en lançant les commandes
    suivantes en tant qu'utilisateur non privilégié&nbsp;:</para>

<screen><userinput>./configure --prefix=$(pkg-config --variable=prefix ORBit-2.0) \
            --sysconfdir=&gnome-etc-dir; \
            --localstatedir=/var/lib \
            --libexecdir=$(pkg-config \
                --variable=prefix ORBit-2.0)/lib/gdm \
            --mandir=$(pkg-config \
                --variable=prefix ORBit-2.0)/share/man \
            --with-pam-prefix=/etc &amp;&amp;
make</userinput></screen>

    <para>Ce paquet n'est pas fourni avec une suite de tests.</para>

    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role='root'><userinput>make install</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
    href="../../xincludes/gnome-prefix.xml"/>

    <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
    href="../../xincludes/gnome-sysconfdir.xml"/>

    <para><parameter>--localstatedir=/var/lib</parameter>&nbsp;: Cette commande
    met les fichiers dans <filename class="directory">/var/lib</filename> au
    lieu de
    <filename class="directory">$GNOME_PREFIX/var</filename>. Cela modifie
    malheureusement également l'utilisation de
    <filename class='directory'>/var/lib/log/gdm</filename> en tant que
    répertoire journal. Voir la section <quote>Informations de configuration</quote> 
    ci-dessous pour des instructions pour replacer le répertoire du fichier 
    journa.</para>

    <para><parameter>--libexecdir=$(pkg-config
    --variable=prefix ORBit-2.0)/lib/gdm</parameter>&nbsp;: Ce paramètre est
    utilisé pour que les programmes du support interne de
    <application>GDM</application> s'installent à l'endroit préféré de 
    <filename class='directory'>$GNOME_PREFIX/lib/gdm</filename> au lieu de
    <filename class='directory'>$GNOME_PREFIX/libexec</filename>.</para>

    <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
    href="../../xincludes/gnome-mandir.xml"/>

    <para><parameter>--with-pam-prefix=/etc</parameter>&nbsp;: Cette commande
    met les fichiers de configuration de <application>PAM</application> dans
    <filename class="directory">/etc/pam.d</filename> au lieu de
    <filename class="directory">&gnome-etc-dir;</filename>.</para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de GDM</title>

    <sect3 id="gdm-config">
      <title>Fichiers de configuration</title>

      <para><filename>&gnome-etc-dir;/gdm/custom.conf</filename>,
      <filename>$GNOME_PREFIX/share/gdm/defaults.conf</filename></para>

      <indexterm zone="gdm gdm-config">
        <primary sortas="e-etc-gnome-&gnome-version;&gnome-minor-version;gdm-custom.conf">
        &gnome-etc-dir;/gdm/custom.conf</primary>
      </indexterm>
      <indexterm zone="gdm gdm-config">
        <primary sortas="e-$GNOME_PREFIX-share-gdm-defaults.conf">
        $GNOME_PREFIX/share/gdm/defaults.conf</primary>
      </indexterm>

    </sect3>

    <sect3>
      <title>Informations de configuration</title>

      <para>À partir de la version 2.14.x de GNOME, les paramètres de
      configuration par défaut sont stockés dans un fichier statique 
      (<filename><envar>$GNOME_PREFIX</envar>/share/gdm/defaults.conf</filename>).
      Ce fichier n'est pas conçu pour être édité. S'il faut modifier la
      configuration, vous devriez ajouter les paramètres au fichier
      <filename>&gnome-etc-dir;/gdm/custom.conf</filename>. Les paramètres
      de ce fichier remplaceront ceux cu fichier statique. Les mêmes paramètres
      du fichier statique sont utilisés dans le fichier de configuration.</para>

      <para>Changez le répertoire contenant les fichiers journaux de 
      <application>GDM</application> vers la hiérarchie
      <filename class='directory'>/var/log</filename> en créant un répertoire
      et en modifiant le fichier de configuration
      <filename>&gnome-etc-dir;/gdm/custom.conf</filename>. Lancez les commandes
      suivantes en tant qu'utilisateur
      <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>install -v -m755 -d /var/log/gdm &amp;&amp;
sed -i.orig "/\[daemon\]/ a LogDir=/var/log/gdm" \
    &gnome-etc-dir;/gdm/custom.conf &amp;&amp;
rmdir -v /var/lib/log/gdm &amp;&amp;
rmdir -v /var/lib/log</userinput></screen>

      <para>Les fichiers de configuration <application>PAM</application> de
      <application>GDM</application> contiennent des modules non présents dans
      installation de BLFS. Si vous avez installé
      <application>PAM</application>, lancez les commandes suivantes
      en tant qu'utilisateur <systemitem class="username">root</systemitem> 
      pour remplacer ces fichiers par des fichiers contenant les modules
      correctement spécifiés&nbsp;:</para>

<screen role="root"><userinput>cat &gt; /etc/pam.d/gdm &lt;&lt; "EOF"
<literal>auth        required    pam_unix.so
auth        requisite   pam_nologin.so
account     required    pam_unix.so
password    required    pam_unix.so
session     required    pam_unix.so</literal>

EOF
cat &gt; /etc/pam.d/gdm-autologin &lt;&lt; "EOF"
<literal>auth        required    pam_env.so
auth        requisite   pam_nologin.so
auth        required    pam_permit.so
account     required    pam_unix.so
password    required    pam_unix.so
session     required    pam_unix.so</literal>

EOF</userinput></screen>

      <indexterm zone="gdm gdm-config">
        <primary sortas="e-etc-pam.d-gdm">/etc/pam.d/gdm</primary>
      </indexterm>
      <indexterm zone="gdm gdm-config">
        <primary
        sortas="e-etc-pam.d-gdm-autologin">/etc/pam.d/gdm-autologin</primary>
      </indexterm>

      <para id="gdm-config-dbus">Si vous avez installé <application>D-BUS</application>
      et si vous voulez démarrer le démon de la session
      <application>D-BUS</application> quand vous démarrez un environnement de
      bureau GNOME en utilisant <command>gdm</command>, vous devrez créer 
      un nouveau fichier Xsession. Créez le fichier en utilisant la commande
      suivante en tant qu'utilisateur root.</para>

<screen role="root"><userinput>cat &gt; $GNOME_PREFIX/share/xsessions/gnome-dbus.desktop &lt;&lt; "EOF"
<literal>[Desktop Entry]
Encoding=UTF-8
Name=GNOME with D-BUS
Comment=GNOME Desktop with D-BUS support
Exec=dbus-launch --exit-with-session gnome-session
TryExec=/usr/bin/dbus-launch
Icon=
Type=Application</literal>

EOF
chmod -v 644 $GNOME_PREFIX/share/xsessions/gnome-dbus.desktop</userinput></screen>

      <para>Choisissez cette session en utilisant la boîte de dialogue de sélection de
      session sur l'écran de connexion du gestionnaire d'affichage. Vous avez
      aussi la possibilité d'en faire votre session par défaut.</para>

      <note>
        <para>Il se peut que vous utilisiez le fichier 
        <filename class='extension'>.desktop</filename> créé ci-dessus comme
        exemple pour créer des fichiers 
        <filename class='extension'>.desktop</filename> supplémentaires et 
        ajouter d'autres éléments désirés au menu de sélection des sessions
        du gestionnaire d'affichage <application>GDM</application>.</para>
      </note>

      <para>On peut tester <command>gdm</command> en l'exécutant en tant 
      qu'utilisateur
      <systemitem class="username">root</systemitem>. Utilisez la commande
      <command>gdm-stop</command> si vous souhaitez arrêter le gestionnaire 
      d'affichage.</para>

    </sect3>

    <sect3 id="gdm-init">
      <title>Script de démarrage</title>

      <para>Pour démarrer une connexion graphique au démarrage du système,
      installez le script de démarrage
      <filename>/etc/rc.d/init.d/gdm</filename> fourni dans le paquet
      <xref linkend="bootscripts"/>. Si votre variable d'environnement
      <envar>GNOME_PREFIX</envar> est autre chose que
      <filename class='directory'>/usr</filename> ou <filename
      class='directory'>/opt/gnome-&gnome-version;&gnome-minor-version;</filename>,
      vous devrez modifier la déclaration de <envar>PATH</envar> du script pour
      inclure le chemin où vous avez installé <application>GNOME</application>.</para>

      <indexterm zone="gdm gdm-init">
        <primary sortas="f-gdm">gdm</primary>
      </indexterm>

<screen role="root"><userinput>make install-gdm</userinput></screen>

      <para>Maintenant éditez <filename>/etc/inittab</filename> pour que la
      ligne contienne&nbsp;:</para>

<screen><literal>id:3:initdefault:</literal></screen>

      <para>devient&nbsp;:</para>

<screen><literal>id:5:initdefault:</literal></screen>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>gdm, gdm-binary, gdm-dmx-reconnect-proxy, gdm-restart,
        gdm-safe-restart, gdm-stop, gdmXnest, gdmXnestchooser, gdmdynamic,
        gdmflexiserver, gdmphotosetup, gdmsetup, et gdmthemetester</seg>
        <seg>lib*mouselistener.{so,a} GTK+ modules</seg>
        <seg>&gnome-etc-dir;/{,g}dm,
        /var/lib/gdm,
        /var/log/gdm et the following directories in
        <envar>$GNOME_PREFIX</envar>/:
        share/{,gnome/help/ ,omf/}gdm</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="gdm-prog">
        <term><command>gdm</command></term>
        <listitem>
          <para>est un script enveloppe pour exécute le binaire
          <application>GDM</application>, l'invite de connexion configurable
          basé sur <application>GNOME</application>.</para>
          <indexterm zone="gdm gdm-prog">
            <primary sortas="b-gdm">gdm</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gdm-restart">
        <term><command>gdm-restart</command></term>
        <listitem>
          <para>envoie le signal HUP au démon <application>GDM</application>
          pour qu'il redémarre. Il est utilisé après que le fichier de 
          configuration a été édité</para>
          <indexterm zone="gdm gdm-restart">
            <primary sortas="b-gdm-restart">gdm-restart</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gdm-safe-restart">
        <term><command>gdm-safe-restart</command></term>
        <listitem>
          <para>envoie le signal USR1 au démon <application>GDM</application>
          pour qu'il redémarre. Il est utilisé après que le fichier de
          configuration a été édité.</para>
          <indexterm zone="gdm gdm-safe-restart">
            <primary sortas="b-gdm-safe-restart">gdm-safe-restart</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gdmsetup">
        <term><command>gdmsetup</command></term>
        <listitem>
          <para>est une interface graphique pour éditer le fichier
          <filename>gdm.conf</filename>.</para>
          <indexterm zone="gdm gdmsetup">
            <primary sortas="b-gdmsetup">gdmsetup</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>

  </sect2>

</sect1>
