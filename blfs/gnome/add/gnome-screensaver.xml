<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY gnome-screensaver-download-http "&gnome-download-http;/gnome-screensaver/&gnome-version;/gnome-screensaver-&gnome-screensaver-version;.tar.bz2">
  <!ENTITY gnome-screensaver-download-ftp  "&gnome-download-ftp;/gnome-screensaver/&gnome-version;/gnome-screensaver-&gnome-screensaver-version;.tar.bz2">
  <!ENTITY gnome-screensaver-md5sum        "b5931e1f39c62acee0df1fcf016ddc39">
  <!ENTITY gnome-screensaver-size          "2.0 MB">
  <!ENTITY gnome-screensaver-buildsize     "21 MB">
  <!ENTITY gnome-screensaver-time          "0.3 SBU">
]>

<sect1 id="gnome-screensaver" xreflabel="gnome-screensaver-&gnome-screensaver-version;">
  <?dbhtml filename="gnome-screensaver.html"?>

  <sect1info>
    <othername>$LastChangedBy: randy $</othername>
    <date>$Date: 2008-11-16 21:28:00 $</date>
  </sect1info>

  <title>gnome-screensaver-&gnome-screensaver-version;</title>

  <indexterm zone="gnome-screensaver">
    <primary sortas="a-gnome-screensaver">gnome-screensaver</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction to gnome-screensaver</title>

    <para>The <application>gnome-screensaver</application> package contains a
    screen saver and locker designed to have simple, sane, secure defaults
    and be well integrated with the desktop. It supports locking down of
    configuration settings, has translations into many languages and
    convenient user switching.</para>

    <bridgehead renderas="sect3">Package Information</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Download (HTTP): <ulink url="&gnome-screensaver-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Download (FTP): <ulink url="&gnome-screensaver-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Download MD5 sum: &gnome-screensaver-md5sum;</para>
      </listitem>
      <listitem>
        <para>Download size: &gnome-screensaver-size;</para>
      </listitem>
      <listitem>
        <para>Estimated disk space required: &gnome-screensaver-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimated build time: &gnome-screensaver-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">gnome-screensaver Dependencies</bridgehead>

    <bridgehead renderas="sect4">Required</bridgehead>
    <para role="required"><xref linkend="libgnomeui"/> and
    <xref linkend="gnome-menus"/></para>

    <bridgehead renderas="sect4">Optional</bridgehead>
    <para role="optional"><xref linkend="intltool"/>,
    <xref linkend="libexif"/>,
    <xref linkend="linux-pam"/>,
    <xref linkend="libgnomekbd"/>,
    <xref linkend="xscreensaver"/>
    (and <xref linkend="libxslt"/>),
    <xref linkend="gdm"/>, and
    <ulink url="http://cyberelk.net/tim/xmlto/">xmlto</ulink></para>

    <para condition="html" role="usernotes">User Notes:
    <ulink url="&blfs-wiki;/gnome-screensaver"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation of gnome-screensaver</title>

    <note>
      <para><emphasis>Optional Features</emphasis></para>

      <para><emphasis role='strong'>1.</emphasis> If you have
      <application>XScreenSaver</application> installed and wish to import any
      or all of the <quote>hacks</quote> into
      <application>gnome-screensaver</application> themes, set the following
      environment variable (modify it if <application>XScreenSaver</application>
      is installed in a non-standard location):</para>

<screen><userinput>XSAVERDIR=/usr/share/xscreensaver/config</userinput></screen>

    <para>Also add the following parameter to the <command>configure</command>
    script below:</para>

<screen><userinput>            --with-xscreensaverdir=$XSAVERDIR</userinput></screen>

    <para><emphasis role='strong'>2.</emphasis> If you have
    <application>GDM</application> installed and wish to provide user-switching
    from the <application>gnome-screensaver</application> unlock-screen dialog
    box, add the following parameter to the <command>configure</command> script
    below:</para>

<screen><userinput>            --with-gdm-config=&gnome-etc-dir;/gdm/custom.conf</userinput></screen>
    </note>

    <para>Install <application>gnome-screensaver</application> by running the
    following commands:</para>

<screen><userinput>sed -i 's|etc/pam\.d"|etc"|' data/Makefile.in &amp;&amp;
./configure --prefix=$(pkg-config --variable=prefix ORBit-2.0) \
            --sysconfdir=&gnome-etc-dir; \
            --libexecdir=$(pkg-config \
                --variable=prefix ORBit-2.0)/lib/gnome-screensaver \
            --with-pam-prefix=/etc &amp;&amp;
make</userinput></screen>

    <para>If you have <application>XScreenSaver</application> installed and
    wish to import any or all of the <quote>hacks</quote> into
    <application>gnome-screensaver</application> themes, you'll need to
    identify which <quote>hacks</quote> you wish to import. The commands
    below will import all of them. If you want to import less than all of
    them, modify the setting of the <envar>XSAVERLIST</envar> environment
    variable below (listing the desired hacks by filename without the
    extension, space delimited) and issue the following commands:</para>

<screen><userinput>mkdir xscreensavers &amp;&amp;
cd xscreensavers &amp;&amp;

XSAVERLIST="*" &amp;&amp;

for SAVERLIST in $(ls ${XSAVERDIR}/${XSAVERLIST}.xml); do
    ../data/migrate-xscreensaver-config.sh $SAVERLIST
done &amp;&amp;

unset XSAVERDIR
unset XSAVERLIST
unset SAVERLIST

cd ..</userinput></screen>

    <para>This package does not come with a test suite.</para>

    <para>Now, as the <systemitem class='username'>root</systemitem> user:</para>

<screen role='root'><userinput>make install &amp;&amp;

GNOMEDOCDIR="$(pkg-config \
    --variable=prefix ORBit-2.0)/share/doc/gnome-screensaver-&gnome-screensaver-version;" &amp;&amp;

install -v -m644 -D doc/gnome-screensaver.html \
                    ${GNOMEDOCDIR}/gnome-screensaver.html &amp;&amp;
unset GNOMEDOCDIR</userinput></screen>

    <para>If you identified some, or all,
    <application>XScreenSaver</application> hacks to be imported into
    <application>gnome-screensaver</application>, install them by issuing the
    following commands as the <systemitem class='username'>root</systemitem>
    user:</para>

<screen role='root'><userinput>install -v -m755 -d $(pkg-config --variable=prefix \
        ORBit-2.0)/share/gnome-screensaver/themes/xscreensaver &amp;&amp;
install -v -m644 xscreensavers/*.desktop \
        $(pkg-config --variable=prefix \
            ORBit-2.0)/share/gnome-screensaver/themes/xscreensaver</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Command Explanations</title>

    <para><command>sed -i 's|etc/pam\.d"|etc|' data/Makefile.in</command>:
    This command is used so that an erroneous message to copy the PAM
    configuration file is not displayed.</para>

    <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
    href="../../xincludes/gnome-prefix.xml"/>

    <xi:include xmlns:xi="http://www.w3.org/2003/XInclude"
    href="../../xincludes/gnome-sysconfdir.xml"/>

    <para><parameter>--libexecdir=$(pkg-config --variable=prefix
    ORBit-2.0)/lib/gnome-screensaver</parameter>: This parameter causes the
    libexec files to be installed in the preferred location of
    <filename class="directory">$GNOME_PREFIX/lib/gnome-screensaver</filename>
    instead of
    <filename class="directory">$GNOME_PREFIX/libexec</filename>.</para>

    <para><parameter>--with-pam-prefix=/etc</parameter>: This parameter is
    used so that the <application>Linux-PAM</application> configuration file
    for the <application>gnome-screensaver</application> application is
    installed in the correct location. You may omit this parameter if you
    don't have <application>Linux-PAM</application> installed, though it
    won't affect the build if you don't.</para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuring gnome-screensaver</title>

    <sect3 id="gnome-screensaver-config">
      <title>Config Files</title>

      <para><filename>/etc/pam.d/gnome-screensaver</filename>,
      <filename>&gnome-etc-dir;/gdm/custom.conf</filename></para>

      <indexterm zone="gnome-screensaver gnome-screensaver-config">
        <primary sortas="e-etc-pam.d-gnome-screensaver">
        /etc/pam.d/gnome-screensaver</primary>
      </indexterm>
      <indexterm zone="gnome-screensaver gnome-screensaver-config">
        <primary sortas="etc-gnome-&gnome-version;&gnome-minor-version;gdm-custom.conf">
        &gnome-etc-dir;/gdm/custom.conf</primary>
      </indexterm>

    </sect3>

    <sect3>
      <title>Configuration Information</title>

      <sect4>
        <title>General Configuration</title>

        <para>Most of the <application>gnome-screensaver</application>
        configuration parameters can be modified using the
        <guimenuitem>Screensaver</guimenuitem> menu item from the
        <guimenu>Desktop</guimenu>&mdash;<guisubmenu>Preferences</guisubmenu>
        drop-down menu. Some of the fine-tuning parameters are only available
        using <xref linkend="gconf-editor"/>.</para>

      </sect4>

      <sect4>
        <title>Linux-PAM Configuration</title>

        <para>If you have <application>Linux-PAM</application> installed, the
        just-installed <filename>gnome-screensaver</filename> configuration
        file does not work with a BLFS system. Replace the existing file with
        one that can be used on a BLFS system by issuing the following command
        as the <systemitem class='username'>root</systemitem> user:</para>

<screen role="root"><userinput>cat &gt; /etc/pam.d/gnome-screensaver &lt;&lt; "EOF"
<literal># File: /etc/pam.d/gnome-screensaver

auth         required      pam_unix.so
account      required      pam_unix.so
session      required      pam_unix.so
password     required      pam_unix.so</literal>

EOF
chmod -v 644 /etc/pam.d/gnome-screensaver</userinput></screen>

      </sect4>

      <sect4>
        <title>User-Switching Configuration</title>

        <para>If you have <application>GDM</application> installed and you
        passed the <option>--with-gdm-config=</option> option to the
        <command>configure</command> script, the screen-unlocking dialog box
        will contain an option to <quote>Switch Users</quote>. This user
        switching option uses the same configuration as
        <application>GDM</application> to determine what users are displayed
        in this dialog. You can use the <application>GDM</application>
        configuration option from the GDM login screen, or you can directly
        edit the <filename>&gnome-etc-dir;/gdm/custom.conf</filename> file to
        modify the settings. </para>

      </sect4>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contents</title>

    <segmentedlist>
      <segtitle>Installed Programs</segtitle>
      <segtitle>Installed Libraries</segtitle>
      <segtitle>Installed Directories</segtitle>

      <seglistitem>
        <seg>gnome-screensaver, gnome-screensaver-command and
        gnome-screensaver-preferences</seg>
        <seg>None</seg>
        <seg><envar>$GNOME_PREFIX</envar>/share/{doc/gnome-screensaver-&gnome-screensaver-version;,
        gnome-screensaver, pixmaps/backgrounds/cosmos}</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Short Descriptions</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="gnome-screensaver-prog">
        <term><command>gnome-screensaver</command></term>
        <listitem>
          <para>is a screensaver and screen-locking program designed to
          work seamlessly with the GNOME desktop.</para>
          <indexterm zone="gnome-screensaver gnome-screensaver-prog">
            <primary sortas="b-gnome-screensaver">gnome-screensaver</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
