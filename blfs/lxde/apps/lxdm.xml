<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!-- Place this in the general.ent file
  <!ENTITY TEMPLATE-version "">
  -->

  <!ENTITY lxdm-download-http "http://downloads.sourceforge.net/lxdm/lxdm-&lxdm-version;.tar.xz">
  <!ENTITY lxdm-download-ftp  " ">
  <!ENTITY lxdm-md5sum        "a51686720e606ca456d7f56ae4159d1f">
  <!ENTITY lxdm-size          "232 Ko">
  <!ENTITY lxdm-buildsize     "4.7 Mo">
  <!ENTITY lxdm-time          "less than 0.1 SBU ">
]>

<sect1 id="lxdm" xreflabel="LXDM-&lxdm-version;">
  <?dbhtml filename="lxdm.html"?>

  <sect1info>
    <othername>$LastChangedBy: fernando $</othername>
    <date>$Date: 2014-09-01 16:53:56 +0200 (lun. 01 sept. 2014) $</date>
  </sect1info>

  <title>LXDM-&lxdm-version;</title>

  <indexterm zone="lxdm">
    <primary sortas="a-LXDM">LXDM</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à LXDM</title>

    <para>
      <application>LXDM</application> est un gestionnaire d'affichage léger pour le bureau
      <application>LXDE</application>. Il peut également être utilisé comme une alternative aux autres 
      gestionnaires d'affichage comme
      <application>GDM</application> de <application>GNOME's</application> ou
      <application>KDM</application> de <application>KDE</application>.
    </para>

    &lfs75lfs76lfs76_checked;

    <bridgehead renderas="sect3">Information sur le paquet </bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP) : <ulink url="&lxdm-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP) : <ulink url="&lxdm-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5 du téléchargement : &lxdm-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement : &lxdm-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis : &lxdm-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction : &lxdm-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de LXDM</bridgehead>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
      <xref linkend="gtk2"/>,
      <xref linkend="iso-codes"/> et
      <xref linkend="librsvg"/> (exécution, pour le thème de fond par défaut)
    </para>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="consolekit"/> et
     <xref linkend="linux-pam"/>
    </para>
    
    <bridgehead renderas="sect4">Facultative</bridgehead>
    <para role="optional">
      <xref linkend="gtk3"/>
    </para>

    <para condition="html" role="usernotes">
      Notes utilisateur : <ulink url="&blfs-wiki;/lxdm"/>
    </para>
  </sect2>

  <sect2 role="installation">
    <title>Installation de LXDM</title>

    <para>
      Commencez par corriger quelques fichiers.
    </para>

<screen><userinput>mv -vi pam/lxdm{,.orig} &amp;&amp;

cat &gt; pam/lxdm &lt;&lt; "EOF" &amp;&amp;
<literal>#%PAM-1.0
auth        required    pam_unix.so
auth        requisite   pam_nologin.so
account     required    pam_unix.so
password    required    pam_unix.so
session     required    pam_unix.so</literal>
EOF

sed -i 's/^bg/#&amp;/' data/lxdm.conf.in</userinput></screen>

    <para>
      Installez <application>LXDM</application> en lançant les commandes suivantes :
       
    </para>

<screen><userinput>./configure --prefix=/usr     \
            --sysconfdir=/etc \
            --with-pam        \
            --with-systemdsystemunitdir=/lib/systemd/system &amp;&amp;
make</userinput></screen>

    <para>
      Ce paquet ne vient pas avec une suite de tests.
    </para>

    <para>
      Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem> :
    </para>

<screen role="root"><userinput>make install</userinput></screen>
  </sect2>

  <!--Optional section-->
  <sect2 role="commands">
    <title>Explications des commandes</title>

    <para>
      <command>cat &gt; pam/lxdm &lt;&lt; "EOF" ...</command> : Remplacez le 
      <filename>/etc/pam.d/lxdm</filename> par défaut par un autre approprié pour BLFS.
    </para>

    <para>
      <command>sed -i ... lxdm.conf.in</command> : Corrige le fond vers celui par défaut.
    </para>

     <para>
      <command>sed -i ... data/Xsession</command>: Utilise
      <filename>/etc/profile</filename>, a la place d'un autre fichier, en accord avec le standard
      BLFS.
    </para>
    <para>
      <command>sed -i ... data/lxdm.in</command>: corrige les bonnes locales selon la spécification BLFS.
    </para>



    <para>
      <option>--with-pam</option> : Cette option active l'utilisation de l'authentification
    </para>

    <para>
      <option>--with-systemdsystemunitdir=no</option> : BLFS ne supporte pas systemd.
    </para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de LXDM</title>

   <sect3 id="lxdm-config">
      <title>Fichiers de configuration</title>

      <para>
        <filename>/etc/lxdm/lxdm.conf</filename>
      </para>

      <indexterm zone="lxdm lxdm-config">
        <primary sortas="e-etc-lxdm-lxdm.conf">/etc/lxdm/lxdm.conf</primary>
      </indexterm>

    </sect3>


   <sect3 id="lxdm-init">
      <title>Script de démarrage</title>
      <para>
        Installez le script d'init <filename>/etc/rc.d/init.d/lxdm</filename> depuis le paquet
        <xref linkend="bootscripts"/>.
      </para>
      <indexterm zone="lxdm lxdm-init">
        <primary sortas="f-lxdm">lxdm</primary>
      </indexterm>
<screen role="root"><userinput>make install-lxdm</userinput></screen>



    <sect3>

      <title>Information de configuration</title>

      <para>
        Le fichier de configuration du démon LXDM <filename>/etc/lxdm/lxdm.conf</filename>
        inclu les options numlock on/off, backgraound image (bg), session,
        etc.  Vous pouvez initialiser une session par défaut en décommentait la ligne:
        session=/usr/bin/startlxde et en remplaçant <command>startlxde</command>
        avec la session de votre choix. Pour <application>GNOME</application>
        session=/usr/bin/gnome-session.  Pour <application>OPENBOX</application>
        session=/usr/bin/openbox-session et pour
        <application>XFCE</application> session=/usr/bin/startxfce4.
      </para>

      <para>
        Il est aussi possible d'initialiser une session préférée d'un utilisateur en éditant le fichier
        ~/.dmrc pour chaque utilisateur et en ajoutant:
        <screen><literal>[Desktop]
        Session=xfce</literal></screen>
      </para>

      <para>
        Vous pouvez remplacer l'image idiote par défaut dans l'écran de bienvenue par une autre image représentant votre utilisateur
        Pour cela, copiez ou liez l'image désirée de votre répertoire home, avec le nom
        <filename>.face</filename>.
      </para>

    </sect3>
    <sect3>
      <title>Démarrage de lxdm</title>
      <para>
        Vous pouvez démarrer manuellement <command>lxdm</command>, c'est à dire, si vous installez le
        script de démarrage, en lançant, en tant qu'utilisateur
        <systemitem
        class="username">root</systemitem> :
      </para>
<screen role="root"><userinput>/etc/rc.d/init.d/lxdm start</userinput></screen>
      <para>
        Par définition, X doit être exécuté au niveau d'éxécution 5, donc, c'est vrai aussi pour
        <application>lxdm</application>. Cependant, par défaut BLFS lance le niveau 3. Le changement
        en niveau 5, depuis le terminal, en tant qu'utilisateur
        <systemitem class="username">root</systemitem>, fait que le script de démarrage de 
        <command>lxdm</command> est exécuté, en obtenant le bon écran:
      </para>
<screen role="root"><userinput>init 5</userinput></screen>
      <para>
          Pour changer en permanence à 5, donc pour obtenir que
          <command>lxdm</command> soit automatiquement à l'écran, vous devez modifier
          <filename>/etc/inittab</filename>, en tant qu'utilisateur <systemitem
          class="username">root</systemitem> (les instructions dessous font également une sauvegarde, donc
          vous pouvez facilement annuler la modification):
      </para>
<screen role="root"><userinput>mov -vi /etc/inittab{,-orig} &amp;&amp;
sed -i '/initdefault/ s/3/5/' /etc/inittab</userinput></screen>
    </sect3>

      <para>
          Un script important, exécuté après le login, est
          <filename>/etc/lxdm/Xsession</filename>, que nous avons corrigé pour coller aux
          specifications de BLFS.
      </para>




    </sect3>
  
  </sect2>
  <!--Required section-->
  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>
          lxdm, lxdm-binary et lxdm-config
        </seg>
        <seg>
          Aucun
        </seg>
        <seg>
          /etc/lxdm et
          /usr/share/lxdm
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Description courte</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <!-- If the program or library name conflicts (is the same) as the
      package name, add -prog or -lib to the varlistentry entity id
      et the 2nd entry of the indexterm zone entity -->

      <varlistentry id="lxdm-prog">
        <term><command>lxdm</command></term>
        <listitem>
          <para>
            est un script pour exécuter <command>lxdm-binary</command>
          </para>
          <indexterm zone="lxdm lxdm-prog">
            <primary sortas="b-lxdm">lxdm</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="lxdm-bin">
        <term><command>lxdm-binary</command></term>
        <listitem>
          <para>
             est le gestionnaire d'affichage courant; nécessite d'être exécuté avec l'option
             <option>-d</option> pour lancer en démon.
          </para>
          <indexterm zone="lxdm lxdm-bin">
            <primary sortas="b-lxdm">lxdm</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="lxdm-config-prog">
        <term><command>lxdm-config</command></term>
        <listitem>
          <para>
            est un programme de personnalisation graphique
          </para>
          <indexterm zone="lxdm lxdm-config">
            <primary sortas="b-lxdm">lxdm</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="lxdm-greeter-gtk">
        <term><command>lxdm-greeter-gtk</command></term>
        <listitem>
          <para>
            est l'affichage graphique de login, ou, entre d'autres options, 
            le nom de l'utilisateur est choisi et le mot de passe est tapé. (si pas en mode login automatique)
          </para>
          <indexterm zone="lxdm lxdm-greeter-gtk">
            <primary sortas="b-lxdm">lxdm</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="lxdm-numlock">
        <term><command>lxdm-numlock</command></term>
        <listitem>
          <para>
            est un programme pour initialiser la touche numlock, si aussi défini dans
            <filename>/etc/lxdm/lxdm.conf</filename>
          </para>
          <indexterm zone="lxdm lxdm-numlock">
            <primary sortas="b-lxdm">lxdm</primary>
          </indexterm>
        </listitem>
      </varlistentry>



    </variablelist>
  </sect2>
</sect1>
