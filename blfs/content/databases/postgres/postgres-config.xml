<sect2>
<title>Configurer PostgreSQL</title>

<sect3>
<title>Fichiers de configurations</title>

<para><userinput>
$PGDATA/pg_ident.con, $PGDATA/pg_hba.conf, $PGDATA/postgresql.conf
</userinput></para>

<para>La variable d'environnement PGDATA est utilisé pour distinguer
les clusters de bases de données en lui donnant comme valeur celle
du répertoire contenant le cluster désiré. Les trois fichiers de
configuration existent dans chaque répertoire PGDATA/. Les détails
sur le format des fichiers et des options disponibles dans chacun
d'entre eux peuvent être trouvé dans:</para>
<para>
<ulink url="file:///usr/share/doc/postgresql/html/tutorial.html" />
</para>

<para>Script init.d de postgres</para>

<para>Créez le script de démarrage postgres avec ceci: </para>

<screen><userinput>
cat &gt; /etc/rc.d/init.d/postgres &lt;&lt; "EOF"</userinput>

#!/bin/bash
# Début $rc_base/init.d/postgres

# Basé sur le script sysklogd de LFS-3.1 et précédent.
# Réécrit par Gerard Beekmans  - gerard@linuxfromscratch.org

source /etc/sysconfig/rc
source $rc_functions

case "$1" in
        start)
                echo "Starting PostgreSQL daemon..."
                su - postgres -c '/usr/bin/postmaster -D \
                    /var/pgsql/data > /var/pgsql/data/logfile 2>&1 &'
                evaluate_retval
                ;;

        stop)
                echo "Stopping PostgreSQL daemon..."
                killproc postmaster
                ;;

        restart)
                $0 stop
                sleep 1
                $0 start
                ;;

        status)
                statusproc /usr/sbin/postmaster
                ;;

        *)
                echo "Usage: $0 {start|stop|restart|status}"
                exit 1
                ;;
esac

# Fin $rc_base/init.d/
<userinput>EOF
chmod 755 /etc/rc.d/init.d/postgres</userinput></screen>

<para>Créez le lien symbolique de ce fichier dans le répertoire
adéquat avec les commandes suivantes:</para>

<screen><userinput>
cd /etc/rc.d/init.d &amp;&amp;
ln -sf ../init.d/mysql ../rc0.d/K26postgres &amp;&amp;
ln -sf ../init.d/postgres ../rc1.d/K26postgres &amp;&amp;
ln -sf ../init.d/postgres ../rc2.d/K26postgres &amp;&amp;
ln -sf ../init.d/postgres ../rc3.d/S34postgres &amp;&amp;
ln -sf ../init.d/postgres ../rc4.d/S34postgres &amp;&amp;
ln -sf ../init.d/postgres ../rc5.d/S34postgres &amp;&amp;
ln -sf ../init.d/postgres ../rc6.d/K26postgres
</userinput></screen>

</sect3>

</sect2>

