<sect2>
<title>Configurer MySQL</title>

<sect3>
<title>Fichiers de configuration</title>

<para><filename>/etc/my.cnf</filename>, <filename>~/.my.cnf</filename></para>

</sect3>

<sect3>
<title>Informations de configuration</title>

<para>Il y a de nombreux fichiers de configuration par défaut
disponible dans <filename class="directory">/usr/share/mysql</filename> que
vous pouvez utiliser.</para>

<screen><userinput><command>cp /usr/share/mysql/my-medium.cnf /etc/my.cnf</command></userinput></screen>

<para>Maintenant, nous pouvons installer la base de données et changer
le propriétaire en un utilisateur et groupe non privilégié.</para>

<screen><userinput><command>mysql_install_db
chown -R mysql:mysql /var/lib/mysql</command></userinput></screen>

<para>Une configuration plus avancée requiert que le serveur mysql soit
lancé:</para>

<screen><userinput><command>mysqld_safe --user=mysql 2&gt;&amp;1 &gt;/dev/null &amp;</command></userinput></screen>

<para>Une installation par défaut n'attribue pas de mot de passe pour
l'administrateur. Donc, nous allons nous connecter et en ajouter un. Nous
vous suggérons fortement de changer 'new-password' par le votre.</para>

<screen><userinput><command>mysql -uroot mysql
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connexion id is 2 to server version: 3.23.51-log

Type 'help;' or '\h' for help. Type '\c' to clear the buffer.

mysql&gt; UPDATE user SET password=password('new-password') WHERE user='root';
Query OK, 2 rows affected (0.00 sec)
Rows matched: 2  Changed: 2  Warnings: 0

mysql&gt; FLUSH PRIVILEGES;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; EXIT;
bye
</command></userinput></screen>

<para>Maintenant que nous avons terminé la configuration du serveur,
nous devons l'arrêter.</para>

<screen><userinput><command>kill `pidof -x mysqld_safe mysqld`</command></userinput></screen>

<sect4>
<title>Script init.d pour mysql</title>

<para>Pour automatiser le lancement de MySQL, utilisez la commande suivante
pour créer le script init.d:</para>

<screen><userinput><command>cat &gt; /etc/rc.d/init.d/mysql &lt;&lt; "EOF"
#!/bin/bash
# Début $rc_base/init.d/

# Basé sur le script sysklogd de LFS-3.1 et précédent.
# Réécrit par Gerard Beekmans  - gerard@linuxfromscratch.org

source /etc/sysconfig/rc
source $rc_functions

case "$1" in
        start)
                echo "Starting MySQL daemon..."
                /usr/bin/mysqld_safe --user=mysql 2&gt;&amp;1 &gt;/dev/null &amp;
                evaluate_retval
                ;;

        stop)
                echo "Stopping MySQL daemon..."
                killproc mysqld
                ;;

        restart)
                $0 stop
                sleep 1
                $0 start
                ;;

        status)
                statusproc /usr/sbin/mysqld
                ;;

        *)
                echo "Usage: $0 {start|stop|restart|status}"
                exit 1
                ;;
esac

# End $rc_base/init.d/
EOF
chmod 755 /etc/rc.d/init.d/mysql</command></userinput></screen>

<para>Créez les liens symboliques vers ce fichier dans le répertoire
<filename class="directory">rc.d</filename> adéquat avec les commandes
suivantes:</para>

<screen><userinput><command>cd /etc/rc.d/init.d &amp;&amp;
ln -sf ../init.d/mysql ../rc0.d/K26mysql &amp;&amp;
ln -sf ../init.d/mysql ../rc1.d/K26mysql &amp;&amp;
ln -sf ../init.d/mysql ../rc2.d/K26mysql &amp;&amp;
ln -sf ../init.d/mysql ../rc3.d/S34mysql &amp;&amp;
ln -sf ../init.d/mysql ../rc4.d/S34mysql &amp;&amp;
ln -sf ../init.d/mysql ../rc5.d/S34mysql &amp;&amp;
ln -sf ../init.d/mysql ../rc6.d/K26mysql</command></userinput></screen>

</sect4>

</sect3>

</sect2>

