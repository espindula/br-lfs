<?xml version="1.0" encoding="ISO-8859-1"?>
<sect2>
<title>Configurer PostgreSQL</title>

<sect3>
<title>Fichiers de configurations</title>

<para><filename>$PGDATA/pg_ident.con</filename>,
<filename>$PGDATA/pg_hba.conf</filename>,
<filename>$PGDATA/postgresql.conf</filename></para>

<para>La variable d'environnement <envar>PGDATA</envar> est utilisé pour
distinguer les clusters de bases de données en lui donnant comme valeur celle
du répertoire contenant le cluster désiré. Les trois fichiers de configuration
existent dans chaque répertoire <filename class="directory">PGDATA/</filename>.
Les détails sur le format des fichiers et des options disponibles dans chacun
d'entre eux peuvent être trouvé dans:</para>
<para>
<ulink url="file:///usr/share/doc/postgresql/html/tutorial.html" />
</para>

<para>Créez le script de démarrage postgres avec ce qui suit: </para>

<screen><userinput><command>cat &gt; /etc/rc.d/init.d/postgres &lt;&lt; "EOF"

#!/bin/bash
# Début $rc_base/init.d/postgres

# Basé sur le script sysklogd de LFS-3.1 et précédent.
# Réécrit par Gerard Beekmans  - gerard@linuxfromscratch.org

source /etc/sysconfig/rc
source $rc_functions

case "$1" in
        start)
                echo "Starting PostgreSQL daemon..."
                su - postgres -c '/usr/bin/pg_ctl start -W -D /var/pgsql/data \
                               -l /var/pgsql/data/logfile -o "-i" '
                evaluate_retval
                ;;

        stop)
                echo "Stopping PostgreSQL daemon..."
                /usr/bin/pg_ctl stop -m smart -D /var/pgsql/data
                evaluate_retval
                ;;

        restart)
                $0 stop
                sleep 1
                $0 start
                ;;

        status)
                /usr/bin/pg_ctl status -D /var/pgsql/data
                ;;

        *)
                echo "Usage: $0 {start|stop|restart|status}"
                exit 1
                ;;
esac

# Fin $rc_base/init.d/
EOF
chmod 755 /etc/rc.d/init.d/postgres</command></userinput></screen>

<para>Créez le lien symbolique de ce fichier dans le répertoire <filename
class="directory">rc.d</filename> adéquat avec les commandes suivantes:</para>

<screen><userinput><command>make install-postgresql</command></userinput></screen>

</sect3>

</sect2>

