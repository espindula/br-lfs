<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<sect1 id="kde4-pre-install-config">
  <?dbhtml filename="pre-install-config.html"?>

  <sect1info>
    <othername>$LastChangedBy&nbsp;: rthomsen $</othername>
    <date>$Date&nbsp;: 2012-03-16 14:30:16 +0100 (ven. 16 mars 2012) $</date>
  </sect1info>

  <title>configuration de la pré-installation de KDE4</title>

  <sect2><title>Installation dans /usr</title>
    <para>Une option est de mettre <application>KDE4</application> dans la hiérarchie
    <filename class='directory'>/usr</filename>.  Cela va créer un setup plus simple
    mais il sera plus difficile d'essayer des versions multiples de
    <application>KDE4</application>.</para>

<screen><userinput>export &kde4-dir-var;=/usr</userinput></screen>
  </sect2>
  
  <sect2><title>Installation dans /opt</title>
    <para>Une méthode pour construire des multiples versions est d'installer
    <application>KDE4</application> dans la hiérarchie <filename
    class='directory'>/opt</filename>&nbsp;:</para>

<screen><userinput>export &kde4-dir-var;=/opt/kde4</userinput></screen>

    <para>Si vous n'avez pas installé <application>KDE4</application> dans
    <filename class="directory">/usr</filename>, vous aurez besoin de faire quelques
	changement supplémentaire de la configuration. Une bonne pratique est de les ajouter dans votre
	profil système ou personnel:</para>

<screen><userinput>cat &gt; /etc/profile.d/kde4.sh &lt;&lt; "EOF"
# Début de /etc/profile.d/kde4.sh

&kde4-dir-var;=/opt/kde4
KDE4DIR=&kde4-dir;
KDEDIR=&kde4-dir;

pathappend &kde4-dir;/bin             PATH
pathappend &kde4-dir;/lib/pkgconfig   PKG_CONFIG_PATH
pathappend &kde4-dir;/share/pkgconfig PKG_CONFIG_PATH
pathappend &kde4-dir;/share           XDG_DATA_DIRS
pathappend /etc/kde4/xdg                XDG_CONFIG_DIRS

export KDE4_PREFIX KDE4DIR KDEDIR

# Fin de /etc/profile.d/kde4.sh
EOF
</userinput></screen>

    <para>Ajouter dans votre <filename>/etc/ld.so.conf</filename>&nbsp;:</para>

<screen role="root"><userinput>cat &gt;&gt; /etc/ld.so.conf &lt;&lt; "EOF"
<literal># Début des ajouts de kde4

/opt/kde4/lib

# Fin des ajouts de kde4</literal>
EOF</userinput></screen>

    <indexterm zone="kde4-pre-install-config">
      <primary sortas="e-etc-ld.so.conf">/etc/ld.so.conf</primary>
    </indexterm>

    <para>Ajouter dans votre <filename>/etc/man_db.conf</filename>&nbsp;:</para>

<screen role="root"><userinput>cat &gt;&gt; /etc/man_db.conf &lt;&lt; "EOF"
<literal># Début des ajouts de kde4

MANDATORY_MANPATH /opt/kde4/man

# Fin des ajouts de kde4</literal>
EOF</userinput></screen>

    <indexterm zone="kde4-pre-install-config">
      <primary sortas="e-etc-man_db.conf">/etc/man_db.conf</primary>
    </indexterm>

    <para>Quelques paquets KDE4 installent des fichiers dans les répertoires D-BUS et polkit.
    Quand on installe KDE4 ailleurs que dans <filename class="directory">/usr</filename>,
    D-BUS et polkit ont besoin de trouver ces fichiers. La façon la plus simple de le faire est de créer
    les liens symboliques suivants (en tant qu'utilisateur <systemitem class="username">root</systemitem> )&nbsp;:</para>

<screen role="root"><userinput>install -d /opt/kde4/share &amp;&amp;
ln -svf /usr/share/dbus-1 /opt/kde4/share &amp;&amp;
ln -svf /usr/share/polkit-1 /opt/kde4/share</userinput></screen>

    <tip>
      <para>Parfois, les chemins d'installation sont corrigés dans les fichies installés.
	  C'est la raison pourquoi <filename class="directory">/opt/kde4</filename>
      est utilisé comme préfixe d'installation au lieu de <filename class="directory">/opt/kde-&kde4-version;</filename>.
      Après l'installation de <application>KDE4</application>, vous pouvez considérer de renommer le répertoire
	  et créer un lien symbolique:</para>

<screen role="root"><userinput>mv /opt/kde{4,-&kde4-version;} &amp;&amp;
ln -vsf kde-&kde4-version; /opt/kde4</userinput></screen>

      <para>Plus tard, vous pouvez vouloir installer d'autres versions de <application>KDE4</application>.
      Pour faire cela, il suffit d'effacer le lien symbolique et utiliser <filename class="directory">/opt/kde4</filename>
      de nouveau comme préfixe (<application>KDE4</application> ne doit pas être démarré). La version de 
      <application>KDE4</application> que vous utiliserez dépendra uniquement de la cible du lien
	  symbolique. Aucune autre configuration ne sera nécessaire.</para>
    </tip>

 <!-- Moved to QT4
 
  <sect2><title>La variable QT4DIR</title>
  <para>Quelques paquets supplémentaires qui sont basés sur <application>Qt4</application>
  seront installés. Un de ceux la est <application>Phonon</application>, un remplacement direct
  de l'implémentation qui est fournie avec <application>Qt4</application>.
  Il est recommandé de placer de tels bibliothèques dans la même hiérarchie que <application>Qt4</application>.
  Plus tard, il est fait référence à <envar>QT4DIR</envar>. Si vous avez placé 
  <application>Qt4</application> dans <filename class='directory'>/usr</filename>,
  initialisez <envar>QT4DIR</envar>&nbsp;:</para>
  
<screen><userinput>export QT4DIR=/usr</userinput></screen>

  <para>Alternativement, <application>Qt4</application> peut aussi être placé dans la hiérarchie
  <filename class='directory'>/opt</filename>&nbsp;:</para>
  
<screen><userinput>export QT4DIR=/opt/qt-&qt4-version;
export PATH=$QT4DIR/bin:$PATH</userinput></screen>

 -->
  </sect2>
  
</sect1>
