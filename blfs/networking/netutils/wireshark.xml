<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  <!ENTITY wireshark-download-http "https://www.wireshark.org/download/src/all-versions/wireshark-&wireshark-version;.tar.bz2">
  <!ENTITY wireshark-download-ftp  "ftp://ftp.uni-kl.de/pub/wireshark/src/wireshark-&wireshark-version;.tar.bz2">
  <!ENTITY wireshark-md5sum        "25ad2bc1c2a21396827c238fcff51bf3">
  <!ENTITY wireshark-size          "28 Mo">
  <!ENTITY wireshark-buildsize     "1.6 Go, with the Qt GUI">
  <!ENTITY wireshark-time          "6.0 SBU, with the Qt GUI">
]>
<sect1 id="wireshark" xreflabel="Wireshark-&wireshark-version;">
  <?dbhtml filename="wireshark.html"?>
  <sect1info>
    <othername>$LastChangedBy&nbsp;: randy $</othername>
    <date>$Date&nbsp;: 2013-02-11 19:51:17 +0100 (Mon, 11 Feb 2013) $</date>
  </sect1info>
  <title>Wireshark-&wireshark-version;</title>
  <indexterm zone="wireshark">
    <primary sortas="a-Wireshark">Wireshark</primary>
  </indexterm>
  <sect2 role="package">
    <title>Introduction à Wireshark</title>
    <para>Le paquet <application>Wireshark</application> contient un analyseur 
    de protocole réseau connu aussi sous le nom de <quote>sniffer</quote>. 
    Ceci est utile pour analyser les données capturées <quote>hors connexion</quote>
    à partir d'une connexion réseau en direct ou de données lues à partir 
    d'un fichier de capture.</para>
   <para> <application>Wireshark</application> fournit 
    à la fois un mode graphique et un front-end TTY-mode pour examiner les 
    paquets réseau capturés de plus de 500 protocoles, ainsi que la capacité 
    de lire des fichiers de capture à partir de nombreux autres analyseurs de 
    réseau populaires.</para>
    &lfs77_checked; &gcc5_checked;
    
    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&wireshark-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&wireshark-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement de la somme MD5&nbsp;: &wireshark-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &wireshark-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &wireshark-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &wireshark-time;</para>
      </listitem>
    </itemizedlist>
    <bridgehead renderas="sect3">Téléchargements additionnels</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Correctif facultatif:
          <ulink url=
              "&patch-root;/wireshark-&wireshark-version;-lua_5_3_0-1.patch"/>
          (permet de construire les liaisons LUA si <xref linkend="lua"/> est installé et LUA n'est pas 
          désactivé par le passage de <option>--without-lua
          </option> à <command>configure</command>)
       </para>
     </listitem>
      <listitem>
       <para>Documentation supplémentaire&nbsp;: 
         <ulink url="https://www.wireshark.org/download/docs/"/></para>
      </listitem>
   </itemizedlist>
    <bridgehead renderas="sect3">Dépendances de Wireshark</bridgehead>
    <bridgehead renderas="sect4">Requis</bridgehead>
    <para role="required">
<xref linkend="glib2"/>
    (pour ne construire que l'interface en mode ligne de commande)</para>
    <bridgehead renderas="sect4">Recommandés</bridgehead>
    <para role="recommended">
      <xref linkend="gtk3"/> (pour contruire l'interface <application>Gtk+3</application>
      ) et
 <xref linkend="libpcap"/> (requis pour capturer les données)</para>
    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      <xref linkend="gnutls"/>,
      <xref linkend="libgcrypt"/>,
      <xref linkend="lua"/>,
      <xref linkend="mitkrb"/>,
      <xref linkend="openssl"/>,
      <ulink url="http://www.gnu.org/software/adns/adns.html">adns</ulink>,
      <ulink url="http://www.maxmind.com/app/c">GeoIP</ulink>, and
      <ulink url="http://www.portaudio.com/download.html">PortAudio</ulink>
     </para>
    <bridgehead renderas="sect4">Facultatives (pour construire plus d'interfaces graphiques)</bridgehead>
    <para role="optional">
      <xref linkend="gtk2"/>,
      <xref linkend="qt4"/> ou
      <xref linkend="qt5"/>
    </para>
    <note>
      <para>
        L'interface <application>GTK+</application> demande soit <xref linkend=
        "gtk2"/> ou <xref linkend="gtk3"/>. Si les deux sont installés, GTK+3
        est utilisé par défaut.
      </para>
      <para>
        L'interface <application>Qt</application> deamnde soit <xref linkend=
        "qt4"/> ou <xref linkend="qt5"/>. Si les deux sont installés, Qt5
        est utilisé par défaut.
      </para>
      <para>
        Les interfaces GTK+ et Qt peuvent être construite en même temps. Si vous voulez écraser les valeurs par défaut, quelques
        paramètres de configure doivent être initialisés (voir
        <quote>Explications des commances</quote>) ou quelques instructions spéciales doivent être tapées (voir dessous) quand 
        Qt4 et Qt5 sont installés et que vous voulez utiliser Qt4. SBU et l'espace disque requis sont plus
        important pour l'interface Qt. Les instructions suivantes supposent que vous voulez seulement construire
        l'interface GTK+3.
      </para>
    </note>
     <para condition="html" role="usernotes">Notes d'utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/wireshark"/></para>
  </sect2>
  <sect2 role="kernel" id="wireshark-kernel">
    <title>Configuration du noyau</title>
      <para>Le noyau doit avoir le protocole de paquets (Packet protocol) activé pour que
         <application>Wireshark</application> capture les paquets en direct à partir du réseau:</para>
<screen>
<literal>[*] Networking support ---&gt;          [CONFIG_NET]
      Networking options ---&gt;
        &lt;*/M&gt; Packet socket          [CONFIG_PACKET]</literal>
</screen>
      <para>Si la construction est faite en tant qu'un module, le nom est
         <filename>af_packet.ko</filename>.</para>
         
      <indexterm zone="wireshark wireshark-kernel">
        <primary sortas="d-Capturing-network-packets">Capturing network packets</primary>
      </indexterm>
  </sect2>
  <sect2 role="installation">
    <title>Installation de Wireshark</title>
    <para>Éventuellement, corrigez la description du programme dans titre. Le
    premier changement écrase le <quote>SVN Unknown</quote> (SVN inconnu) par défaut dans le
    titre et le second écrase un script qui réinitialise la version à
    to <quote>unknown</quote> (inconnue).</para>
<screen>
<userinput>cat > svnversion.h &lt;&lt; "EOF" &amp;&amp;
#define SVNVERSION "BLFS"
#define SVNPATH "source"
EOF
cat > make-version.pl &lt;&lt; "EOF"
<literal>#!/usr/bin/perl</literal>
EOF</userinput>
</screen>
    <para><application>Wireshark</application> est une application très grosse et
    très complexe. Ces instructions donnent les mesures de sécurité pour garantir
    que seuls les utilisateurs de confiance soient autorisés à voir le trafic réseau.
    Tout d'abord, définissez le groupe system pour wireshark.  En tant qu'utilisateur
    <systemitem
    class="username">root</systemitem>&nbsp;:</para>
<screen role="root">
<userinput>groupadd -g 62 wireshark</userinput>
</screen>
    <para>
      Si vous voulez construire une interface Qt et avez <application>Qt4
      </application> et 5 d'installé, tapez soit :
</para>
<screen>
<userinput>source setqt5</userinput>
</screen>
    <para>si vous voulez la construction de l'interface <application>Qt5</application>, ou:</para>
<screen>
<userinput>source setqt4 &amp;&amp;
sed -i 's/Qt5 Qt/Qt/' configure</userinput>
</screen>
    <para>si vous voulez la construction de l'interface <application>Qt4</application>.</para>
    <para>Continuez à installer <application>Wireshark</application> en lançant
    les commandes suivantes&nbsp;:</para>
<screen>
<userinput>patch -Np1 -i ../wireshark-&wireshark-version;-lua_5_3_0-1.patch  &amp;&amp;
./configure --prefix=/usr     \
            --with-gtk3       \
            --without-qt      \
            --sysconfdir=/etc &amp;&amp;
make</userinput>
</screen>
    <para>Ce paquet n'est pas livré avec une suite de test</para>
    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>
<screen role="root">
<userinput>make install &amp;&amp;
install -v -m755 -d /usr/share/doc/wireshark-&wireshark-version; &amp;&amp;
install -v -m755 -d /usr/share/pixmaps/wireshark &amp;&amp;
install -v -m644    README{,.linux} doc/README.* doc/*.{pod,txt} \
                    /usr/share/doc/wireshark-&wireshark-version; &amp;&amp;
pushd /usr/share/doc/wireshark-&wireshark-version; &amp;&amp;
   for FILENAME in ../../wireshark/*.html; do
      ln -s -v -f $FILENAME .
   done &amp;&amp;
popd &amp;&amp;
unset FILENAME
install -v -m644 -D wireshark.desktop \
                    /usr/share/applications/wireshark.desktop &amp;&amp;
install -v -m644 -D image/wsicon48.png \
                    /usr/share/pixmaps/wireshark.png &amp;&amp;
install -v -m644    image/*.{png,ico,xpm,bmp} \
                    /usr/share/pixmaps/wireshark</userinput>
</screen>
    <para>Si vous avez téléchargé un des fichiers de documentation mentionnés dans 'Téléchargements supplémentaires', installez les en suivant les commandes suivantes en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>
<screen role="root">
<userinput>install -v -m644 <replaceable>&lt;Downloaded_Files&gt;</replaceable> /usr/share/doc/wireshark-&wireshark-version;</userinput>
</screen>
  <para>Maintenant, définissez le propriétaire et les droits des applications 
  sensibles pour ne permettre qu'aun utilisateurs autorisés de l'utiliser.
  En tant qu'utilisateur <systemitem
  class="username">root</systemitem>&nbsp;:</para>
<screen role="root">
<userinput>chown -v root:wireshark /usr/bin/{tshark,dumpcap} &amp;&amp;
chmod -v 6550 /usr/bin/{tshark,dumpcap}</userinput>
</screen>
  <para>Enfin, ajoutez les utilisateurs au groupe wireshark (en tant qu'utilisateur <systemitem class=
      "username">root</systemitem>):</para>
<screen role="root">
<userinput>usermod -a -G wireshark &lt;username&gt;</userinput>
</screen>
  </sect2>
  <sect2 role="commands">
    <title>Explication des commandes</title>
    <para><command>sed -i 's/Qt5 Qt/Qt/' ...</command>: Cette commande est requise car sans elle,
    les bibliothèques et include de 
   <application>Qt5</application> sont trouvés et utilisés en premier, si les deux versions
     sont installées, quand on tente de construire avec
     <application>Qt4</application>,
    et que <command>make</command> ne se termine pas.</para>
    <para>
      <parameter>--with-gtk3</parameter>: Par défaut, la machine de construction construira une interface
      pour Qt et GTK+, si ces bibliothèques sont trouvées. Si Qt est installé et que vous ne voulez pas que l'interface
      soit créé, vous devez passer
      <parameter>--without-qt</parameter> au script configure. Cela écrasera les valeurs par défaut, et vous devrez passer
      <parameter>--with-gtk3</parameter>  ou <parameter>--with-gtk2</parameter>
      pour avoir l'insterface GTK+ de construite.
    </para>
    <para>
      <parameter>--without-qt</parameter>: désactive la construction de l'interface Qt.
    </para>
   <para><option>--disable-wireshark</option>: Cette option est requise si vous
    avez installé <application>GTK+</application> mais ne voulez pas construire les interfaces.
    </para>
    <para>
      <option>--with-gtk2</option>: Utilisez cette option si vous voulez l'interface 
      <application>GTK+2</application> 
      Notez que
    l'interface graphique pour seulement une version de GTK+ (soit 2 ou 3) peut être construite.</para>
   </sect2>
  <sect2 role="configuration">
    <title>Configurer Wireshark</title>
    <sect3 id="wireshark-config">
      <title>Fichiers de configuration</title>
      <para><filename>/etc/wireshark.conf</filename> et <filename>~/.wireshark/*</filename></para>
      <indexterm zone="wireshark wireshark-config">
        <primary sortas="e-AA.wireshark-star">~/.wireshark/*</primary>
      </indexterm>
      <indexterm zone="wireshark wireshark-config">
        <primary sortas="e-etc-wireshark.conf">/etc/wireshark.conf</primary>
      </indexterm>
    </sect3>
    <sect3>
      <title>Informations de configuration</title>
      <para>Si les paramètres de configuration par défaut sont très clairs, reportez vous à la section de configuration 
    du <ulink url="http://www.wireshark.org/docs/wsug_html/">Guide de l'utilisateur de Wireshark
      (Wireshark User's Guide)</ulink> pour les informations de configuration.
 La majorité de la configuration de <application>Wireshark</application> peut être réalisée en utilisant 
    les options du menu des interfaces graphiques de <command>wireshark</command>.</para>
    </sect3>
    <sect3>
      <title>Fichier de bureau pour l'interface Qt</title>
      <para>Si l'interface Qt est construite et que vous souhaitez une entrée dans le menu du bureau,
      il y a deux possibilités (les instructions doivent être exécutées en tant que root).</para>
      <para>Si seulement l'interface Qt est construite:</para>
<screen role="root">
<userinput>mv -v /usr/share/applications/wireshark.desktop \
      /usr/share/applications/wireshark-qt.desktop</userinput>
</screen>
      <para>Si les deux interfaces GTK+ et Qt sont construites:</para>
<screen role="root">
<userinput>cp -v /usr/share/applications/wireshark.desktop \
      /usr/share/applications/wireshark-qt.desktop</userinput>
</screen>
      <para>Maintenant corriger pour <command>wireshark-qt</command>:</para>
<screen role="root">
<userinput>sed -e 's/ireshark/&amp;-qt/' \
    -e 's/^\(Icon=wireshark\)-qt/\1/' \
    -i /usr/share/applications/wireshark-qt.desktop</userinput>
</screen>
      <note>
        <para>Si vous voulez regarder les paquets, assurez vous que vous ne les filtrez pas avec <xref linkend="iptables"/>. Si vous voulez exclure certaines classes de paquets, il est plus efficace de le faire avec <application>iptables</application> qu'avec <application>Wireshark</application>.</para>
      </note>
    </sect3>
  </sect2>
  <sect2 role="content">
    <title>Contenu</title>
    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>
      <seglistitem>
        <seg>capinfos, captype, dftest, dumpcap, editcap, mergecap, randpkt,
        rawshark, reordercap, text2pcap, tshark,
        wireshark et facultativement wireshark-qt</seg>
        <seg>libfiletap.so, libwireshark.so, libwiretap.so, libwsutil.so, et
        de nombreux modules dans /usr/lib/wireshark/plugins</seg>
        <seg>/usr/lib/wireshark, /usr/share/doc/wireshark-&wireshark-version;,
        /usr/share/pixmaps/wireshark et /usr/share/wireshark</seg>
      </seglistitem>
    </segmentedlist>
    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      <varlistentry id="capinfos">
        <term><command>capinfos</command></term>
        <listitem>
          <para>lit un fichier de capture sauvegardé et retourne certaines ou toutes les différentes statistiques sur ce fichier. Il est capable de détecter et lire toutes les captures supportées par le paquet <application>Wireshark</application>.</para>
          <indexterm zone="wireshark capinfos">
            <primary sortas="b-capinfos">capinfos</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="captype">
        <term><command>captype</command></term>
        <listitem>
          <para>affiche les types de fichier des fichiers de capture.</para>
          <indexterm zone="wireshark captype">
            <primary sortas="b-captype">captype</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="dftest">
        <term><command>dftest</command></term>
        <listitem>
          <para>est un programme test d'affichage-filtrage-compilation.</para>
          <indexterm zone="wireshark dftest">
            <primary sortas="b-dftest">dftest</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="dumpcap">
        <term><command>dumpcap</command></term>
        <listitem>
          <para>est un outil de vidage de traffic réseau. Il vous permet de capturer en direct les paquets de données d'un réseau et écrire ces paquets dans un fichier.</para>
          <indexterm zone="wireshark dumpcap">
            <primary sortas="b-dumpcap">dumpcap</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="editcap">
        <term><command>editcap</command></term>
        <listitem>
          <para>édite et/ou traduit le format des fichiers de capture. Il sait comment lire les fichiers de capture <application>libpcap</application> dont ceux de <command>tcpdump</command>, <application>Wireshark</application> et autres outils qui capturent dans ce format.</para>
          <indexterm zone="wireshark editcap">
            <primary sortas="b-editcap">editcap</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="mergecap">
        <term><command>mergecap</command></term>
        <listitem>
          <para>combine de multiples fichiers de capture en un fichier unique de sortie.</para>
          <indexterm zone="wireshark mergecap">
            <primary sortas="b-mergecap">mergecap</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="randpkt">
        <term><command>randpkt</command></term>
        <listitem>
          <para>crée des fichiers de capture de paquets aléatoires.</para>
          <indexterm zone="wireshark randpkt">
            <primary sortas="b-randpkt">randpkt</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="rawshark">
        <term><command>rawshark</command></term>
        <listitem>
          <para>crée et analyse des données raw libpcap.</para>
          <indexterm zone="wireshark rawshark">
            <primary sortas="b-rawshark">rawshark</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="reordercap">
        <term><command>reordercap</command></term>
        <listitem>
          <para>re-arrange les marqueurs de temps des paquets d'un fichier d'entrée vers un fichier de sortie.</para>
          <indexterm zone="wireshark reordercap">
            <primary sortas="b-reordercap">reordercap</primary>
          </indexterm>
        </listitem>
      </varlistentry>
       <varlistentry id="text2pcap">
        <term><command>text2pcap</command></term>
        <listitem>
          <para>lit dans une sauvegarde ASCII hexadécimale et écrit les données décrites dans un fichier de capture de style <application>libpcap</application>.</para>
          <indexterm zone="wireshark text2pcap">
            <primary sortas="b-text2pcap">text2pcap</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="tshark">
        <term><command>tshark</command></term>
        <listitem>
          <para>est un analyseur de protocole réseau mode TTY. Il vous permet de capturer directement les paquets de donnée à partir d'un réseau ou lire les paquets à partir d'un fichier de capture sauvegardé précédemment.</para>
          <indexterm zone="wireshark tshark">
            <primary sortas="b-tshark">tshark</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="wireshark-prog">
        <term><command>wireshark</command></term>
        <listitem>
          <para>est l'interface GTK+ de l'analyseur de protocole réseau. Il vous permet de parcourir intéractivement
             en direct les paquets à partir d'un réseau ou à partir d'un fichier de capture sauvegardé précédemment.</para>
          <indexterm zone="wireshark wireshark-prog">
            <primary sortas="b-wireshark">wireshark</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="wireshark-qt-prog">
        <term><command>wireshark-qt</command></term>
        <listitem>
          <para>est l'interface Qt de l'analyseur de protocole réseau. Il vous permet de parcourir intéractivement
             en direct les paquets à partir d'un réseau ou à partir d'un fichier de capture sauvegardé précédemment.</para>
          <indexterm zone="wireshark wireshark-qt-prog">
            <primary sortas="b-wireshark-qt">wireshark-qt</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libwireshark">
        <term><filename class='libraryfile'>libwireshark.so</filename></term>
        <listitem>
          <para>contient les fonctions utilisés par les programmes de <application>Wireshark</application> pour effectuer le filtrage et la capture de paquets.</para>
          <indexterm zone="wireshark libwireshark">
            <primary sortas="c-libwireshark">libwireshark.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libwiretap">
        <term><filename class='libraryfile'>libwiretap.so</filename></term>
        <listitem>
          <para>est une bibliothèque développée afin de remplacer dans le futur <filename class='libraryfile'>libpcap</filename>, la bibliothèque Unix standard actuelle pour la capture de paquets. Pour plus d'informations, consultez le fichier <filename>README</filename> dans le répertoire source <filename class='directory'>wiretap</filename>.</para>
          <indexterm zone="wireshark libwiretap">
            <primary sortas="c-libwiretap">libwiretap.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect2>
</sect1>
