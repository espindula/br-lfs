<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  <!ENTITY serf-download-http "https://serf.googlecode.com/files/serf-&serf-version;.tar.bz2">
  <!ENTITY serf-download-ftp  " ">
  <!ENTITY serf-md5sum        "bb0dbf9494495db7e8b34eac99b2dc3a">
  <!ENTITY serf-size          "133 Ko">
  <!ENTITY serf-buildsize     "3.0 Mo">
  <!ENTITY serf-time          "0.1 SBU">
]>
<sect1 id="serf" xreflabel="Serf-&serf-version;">
  <?dbhtml filename="serf.html"?>
  <sect1info>
    <othername>$LastChangedBy: krejzi $</othername>
    <date>$Date: 2013-07-02 15:19:17 +0200 (mar. 02 juil. 2013) $</date>
  </sect1info>
  <title>Serf-&serf-version;</title>
  <indexterm zone="serf">
    <primary sortas="a-Serf">Serf</primary>
  </indexterm>
  <sect2 role="package">
    <title>Introduction à Serf</title>
    <para>
      Le paquet <application>Serf</application> contient une bibliothèque
      d'un client HTTP en C construite contre la bibliothèque 
      Apache Portable Runtime (APR) library. Il gère les connexions multiples, la lecture/écriture
      des communications asynchrones.
      Les copies de la mémoire et les transformations sont minimales pour laisser une performance élevée.
    </para>
    &lfs73_checked;
    <bridgehead renderas="sect3">Information sur le paquet </bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP) : <ulink url="&serf-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP) : <ulink url="&serf-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5 du téléchargement : &serf-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement : &serf-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis : &serf-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction : &serf-time;
        </para>
      </listitem>
    </itemizedlist>
    <bridgehead renderas="sect3">Dépendances de Serf</bridgehead>
    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
      <xref linkend="apr-util"/>,
      <xref linkend="openssl"/> et
      <xref linkend="scons"/>
    </para>
    <para condition="html" role="usernotes">
      Notes utilisateur : <ulink url="&blfs-wiki;/serf"/>
    </para>
  </sect2>
  <sect2 role="installation">
    <title>Installation de Serf</title>
    <para>
      Installez <application>Serf</application> en lançant les commandes suivantes :
       
    </para>
<screen>
<userinput>sed -i "/incdir/s:MAJOR':&amp;\n\nenv\['SHLIBVERSION'\]='0.\${MAJOR}.0':" SConstruct &amp;&amp;
sed -i "/Append/s:RPATH=libdir,::" SConstruct &amp;&amp;
sed -i "/Default/s:lib_static,::" SConstruct &amp;&amp;
sed -i "/Alias/s:install_static,::" SConstruct &amp;&amp;
scons</userinput>
</screen>
    <para>
      Pour tester le résultat, tapez : <command>scons check</command>.
    </para>
    <para>
      Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem> :
    </para>
<screen role="root">
<userinput>scons PREFIX=/usr install &amp;&amp;
ln -sfv libserf-1.so.0.1.0 /usr/lib/libserf-1.so.0 &amp;&amp;
ln -sfv libserf-1.so.0.1.0 /usr/lib/libserf-1.so</userinput>
</screen>
  </sect2>
  <sect2 role="commands">
    <title>Explications des commandes</title>
    <para>
      <command>sed -i "..."</command>: Le premier Sed modifie le script de construction
      pour construire la bibliothèque en version partagé, le second sed enlève le chemin d'éxécution
      pour la bibliothèque partagé et le troisième et quatrième sed désactive la construction et l'installation
      de la bibliothèque statique.
    </para>
  </sect2>
  <sect2 role="content">
    <title>Contenu</title>
    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèque installée</segtitle>
      <segtitle>Répertoire installé</segtitle>
      <seglistitem>
        <seg>
          Aucun
        </seg>
        <seg>
          libserf-1.so
        </seg>
        <seg>
          /usr/include/serf-1
        </seg>
      </seglistitem>
    </segmentedlist>
    <variablelist>
      <bridgehead renderas="sect3">Description courte</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      <varlistentry id="libserf-1">
        <term><filename class="libraryfile">libserf-1.so</filename></term>
        <listitem>
          <para>
            contient les fonctions de l'API de <application>Serf</application>.
          </para>
          <indexterm zone="serf libserf-1">
            <primary sortas="c-libserf-1">libserf-1.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect2>
</sect1>
