<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY texlive-pass1-download-http " ">
  <!ENTITY texlive-pass1-download-ftp  "ftp://tug.org/texlive/historic/&texlive-year;/texlive-&texlive-version;-source.tar.xz">
  <!ENTITY texlive-pass1-md5sum        "09ee265ff51637827559affc7304078c">
  <!ENTITY texlive-pass1-size          "40 Mo">

 <!-- when measured, 900MB for pass 1 itself, 3.6 GB for texmf -->
  <!ENTITY texlive-pass1-buildsize      "3.6 GB including the additional download">
  <!ENTITY texlive-pass1-time           "8.2 SBU including the additional download">

  <!ENTITY texlive-texmf-download-http " ">
  <!ENTITY texlive-texmf-download-ftp  "ftp://tug.org/texlive/historic/&texlive-year;/texlive-&texlive-version;-texmf.tar.xz">
  <!ENTITY texlive-texmf-md5sum        "645a6f1d3a0ef4a9c279dae02588eab7">
  <!ENTITY texlive-texmf-size          "1.7 GB">

]>


<sect1 id="texpass1" xreflabel="texlive-&texlive-version;-source pass 1">
  <?dbhtml filename="texlive-pass1.html"?>

  <sect1info>
    <othername>$LastChangedBy: ken $</othername>
    <date>$Date: 2014-10-22 01:24:32 +0200 (mer. 22 oct. 2014) $</date>
  </sect1info>

  <title>texlive-&texlive-version;-source pass 1</title>

  <indexterm zone="texpass1">
    <primary sortas="a-texpass1">texlive-pass-1</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à TeX Live from source, pass 1</title>

    <para>La plupart de TeX Live peut être constuit depuis les sources sans difficultés.
    Cependant, <application>xindy</application> (pour l'indexage) demande une version de travail de
     <command>latex</command> et <command>pdflatex</command>
    quand configure est lancé, et la suite de tests pour <command>asy</command>
    (pour les graphiques vectoriels) échouera si TeX n'est pas déjà installé.
    </para>

    <para>De plus, il est nécessaire de créer des liens symboliques différents à la fin de
     l'installation.</para>

    <para>Vous pouvez reconstruire texlive plus tard dans <xref linkend="texlive"/> pour inclure
    xindy. Nous installerons xindy et aussi constuire et installer asy.</para>

    &lfs76_checked;

    <bridgehead renderas="sect3">Information sur le paquet </bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP) : <ulink url="&texlive-pass1-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP) : <ulink url="&texlive-pass1-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement : &texlive-pass1-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement : &texlive-pass1-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis : &texlive-pass1-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction : &texlive-pass1-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Téléchargement requis supplémentaire</bridgehead>

      <para>Beaucoup de l'environnement texlive (en incluant les scripts, la documentation,
      les polices, et d'autres fichiers) ne fait pas partie de l'archive des sources. Vous devez
      les télécharger séparément. Cela vous donnera tous les fichiers supplémentaires qui sont
      fournis par une installation complète de la version binaire, il n'est pas réaliste de 
      limiter les parties qui doivent être installées.
      </para>

      <para>
        A cause de la taille de ce paquet, il ne peut pas être mis en mirroir sur les serveurs
        BLFS. En cas de problème, allez sur http://www.ctan.org/mirrors/
        pour trouver un mirroir plus accessible.
      </para>

    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (FTP) : <ulink url="&texlive-texmf-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement : &texlive-texmf-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement : &texlive-texmf-size;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de TeX Live from source pass 1</bridgehead>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="x-window-system"/>
    </para>
    <para role="recommended">
      Les sources sont livrées avec leurs propres versions de <emphasis>beaucoup</emphasis>
      de bibliothèques, et les utiliseront a moins de forcer l'utilisation des versions du
      système.  Les suivantes sont recommandées pour que les versions du système soient utilisées:
      <xref linkend="fontconfig"/>,
      <xref linkend="freetype2"/>,
      <xref linkend="gc"/>,
      <xref linkend="graphite2"/>,
      <xref linkend="harfbuzz"/> (lié à graphite2),
      <xref linkend="icu"/>,
      <xref linkend="libpaper"/>,
      <xref linkend="libpng"/>,
      <xref linkend="poppler"/>
    </para>

    <bridgehead renderas="sect4">Facultative</bridgehead>
    <para role="optional">
      Les sources sont livrées avec leurs propres versions de quelques bibliothèques qui ne sont soit plus
      dans un developpement actif, ou seulement utilisée pour des fonctionnalités limitées. Si vous les
      installez, comme d'autres dépendances facultatives dans ce livre vous devrez dire à 
      <command>configure</command> d'utiliser la version du système.
      <ulink url="http://libgd.bitbucket.org">GD</ulink>,
      <ulink url="http://fossies.org/linux/misc/t1lib-5.1.2.tar.gz/">t1lib</ulink>,
      <ulink url="http://sourceforge.net/projects/zziplib/">ZZIPlib</ulink>,
      <ulink url="http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&amp;id=TECkitTéléchargements">TECkit</ulink>
    </para>

    <bridgehead renderas="sect4">Dépendances d'exécution</bridgehead>
    <para role="recommended">
      Certains scripts utiliseront
      <xref linkend="python2"/> ou <xref linkend="ruby"/>.
    </para>

    <para condition="html" role="usernotes">Notes utilisateur :
    <ulink url="&blfs-wiki;/texlive-pass1"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de TeX Live, passe 1</title>

    <para>
      Installez la passe 1 de TeX Live en lançant la suite 
    </para>

<screen role="root"><userinput>export TEXARCH=$(uname -m | sed -e 's/i.86/i386/' -e 's/$/-linux/') &amp;&amp;
mkdir texlive-build &amp;&amp;
cd texlive-build    &amp;&amp;

../configure                                        \
    --prefix=/opt/texlive/&texlive-year;                      \
    --bindir=/opt/texlive/&texlive-year;/bin/$TEXARCH         \
    --datarootdir=/opt/texlive/&texlive-year;                 \
    --includedir=/usr/include                       \
    --infodir=/opt/texlive/&texlive-year;/texmf-dist/doc/info \
    --libdir=/usr/lib                               \
    --mandir=/opt/texlive/&texlive-year;/texmf-dist/doc/man   \
    --disable-native-texlive-build                  \
    --disable-static --enable-shared                \
    --with-system-cairo                             \
    --with-system-fontconfig                        \
    --with-system-freetype2                         \
    --with-system-graphite2                         \
    --with-system-harfbuzz                          \
    --with-system-icu                               \
    --with-system-libgs                             \
    --with-system-libpng                            \
    --with-system-pixman                            \
    --with-system-poppler                           \
    --with-system-xpdf                              \
    --with-system-zlib                              \
    --with-banner-add=" - BLFS" &amp;&amp;
unset TEXARCH &amp;&amp;

make</userinput></screen>

    <para>Pour tester le résultat, tapez : <command>make -k check</command>
    Un test de web2c, dvipng et ttf2pk2 sera PASSER (SKIP) car kpathsea
    n'a pas encore été installé.</para>

    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>
    :</para>

<screen><userinput role="root">make install &amp;&amp;
make texlinks</userinput></screen>

    <para>Et maintenant, installez les fichiers supplémentaires en tant qu'utilisateur
    <systemitem class="username">root</systemitem> :</para>

<screen><userinput role="root">mkdir -pv /opt/texlive/&texlive-year; &amp;&amp;
tar -xf texlive-&texlive-version;-texmf.tar.xz -C /opt/texlive/&texlive-year; --strip-components=1</userinput></screen>

    <para>Maintenant, faite <xref linkend="tex-path"/>.</para>

  </sect2>

  <sect2 role="commands">
    <title>Explications des commandes</title>

    <para>
      <parameter>--prefix=, --bindir=, --datarootdir=, --infodir=, --mandir= ...
      </parameter> : Ces paramètres assurent que les fichiers installés depuis les sources
      écraseront les fichiers correspondants installés précédement par
      <application>install-tl</application>.
    </para>

    <para>
      <parameter>--includedir=, --libdir= ...</parameter> : Ces paramètres assurent que les bibliothèques
      seront trouvées à l'éxécution, et que les programmes peuvent être compilés contre elle.
    </para>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/static-libraries.xml"/>

    <para>
      <parameter>--enable-shared</parameter> : Crée les versions partagées de 
      <filename class="libraryfile">libkpathsea</filename> et
      <filename class="libraryfile">libptexenc</filename>.
    </para>

    <para>
      <parameter>--with-system-...</parameter> : Sans que ce paramètre soit utilisé, les versions
      incluses dans les sources de ces bibliothèques seront compilées statiquement dans le programme
      qui les utilisent. Si vous décidez de ne pas installer une bibliothèque recommandée, oubliez le
      paramètre correspondant.
    </para>

    <para>
      <parameter>--with-system-xpdf</parameter> : Unique, ce paramètre a une signification non standard, il
      dit à <command>configure</command> d'utiliser la version installée des entêtes et de la bibliothèque
      de <application>poppler</application>.
      De nouveau, oubliez le si vous n'avez pas installé
      <application>poppler</application>.
    </para>

    <para>
      <option>--without-x</option> : utilisez cela si vous n'avez pas installé Xorg.
    </para>

    <para>
      <parameter>make texlinks</parameter> : cela lance le script texlinks.sh pour créer ou recréer
      les liens symboliques depuis les formats aux moteurs. En pratique, beaucoup de cibles comme
      <command>xetex</command> sont maintenant des binaires séparés et pour ceux la signalera
      "file already exists".
    </para>
    <para>
      <parameter>tar -xf texlive-&texlive-version;-texmf.tar.xz -C /opt/texlive/&texlive-year; --strip-components=1</parameter> :
      L'archive contient les fichiers pour le répertoire texmf-dist, et à cause de sa taille nous n'allons
      pas perdre du temps et de l'espace à le déballer et ensuite copier les fichiers.
    </para>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>Plus de 300 binaires et liens symboliques vers des scripts</seg>
        <seg>libkpathsea.so, libptexenc.so</seg>
        <seg>/opt/texlive/&texlive-year;/bin, /opt/texlive/&texlive-year;/texmf-dist,
        /usr/include/kpathsea, /usr/include/ptexenc</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Description courte</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="texpass1-programs">
        <term><command>TeX&nbsp;programs</command></term>
        <listitem>
          <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
          href="../../xincludes/texprogs.xml"/>
          <indexterm zone="texpass1 texpass1-programs">
            <primary sortas="b-texpass1-programs">TeX Live programs</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libkpathsea-texpass1">
        <term><filename class="libraryfile">libkpathsea.so</filename></term>
        <listitem>
          <para>
            (kpathsearch) existe pour chercher un fichier dans une liste de répertoires.
          </para>
          <indexterm zone="texpass1 libkpathsea">
            <primary sortas="c-libkpathsea">libkpathsea.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libptexenc-texpass1">
        <term><filename class="libraryfile">libptexenc.so</filename></term>
        <listitem>
          <para>
            est une bibliothèque pour pTeX japonnais (publication de TeX).
          </para>
          <indexterm zone="texpass1 libptexenc">
            <primary sortas="c-libptexenc">libptexenc.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>

  </sect2>

</sect1>
