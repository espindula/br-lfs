<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY texlive-pass1-download-http " ">
  <!ENTITY texlive-pass1-download-ftp  "ftp://tug.org/texlive/historic/&texlive-year;/texlive-&texlive-version;-source.tar.xz">
  <!ENTITY texlive-pass1-md5sum        "09ee265ff51637827559affc7304078c">
  <!ENTITY texlive-pass1-size          "40 Mo">

 <!-- when measured, 900MB for pass 1 itself, 3.6 GB for texmf -->
  <!ENTITY texlive-pass1-buildsize      "3.6 GB including the additional download">
  <!ENTITY texlive-pass1-time           "8.2 SBU including the additional download">

  <!ENTITY texlive-texmf-download-http " ">
  <!ENTITY texlive-texmf-download-ftp  "ftp://tug.org/texlive/historic/&texlive-year;/texlive-&texlive-version;-texmf.tar.xz">
  <!ENTITY texlive-texmf-md5sum        "645a6f1d3a0ef4a9c279dae02588eab7">
  <!ENTITY texlive-texmf-size          "1.7 GB">

]>


<sect1 id="texpass1" xreflabel="texlive-&texlive-version;-source pass 1">
  <?dbhtml filename="texlive-pass1.html"?>

  <sect1info>
    <othername>$LastChangedBy: ken $</othername>
    <date>$Date: 2014-10-22 01:24:32 +0200 (mer. 22 oct. 2014) $</date>
  </sect1info>

  <title>texlive-&texlive-version;-source pass 1</title>

  <indexterm zone="texpass1">
    <primary sortas="a-texpass1">texlive-pass-1</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à TeX Live from source, pass 1</title>

    <para>La plupart de TeX Live peut être constuit depuis les sources sans difficultés.
    Cependant, <application>xindy</application> (pour l'indexage) demande une version de travail de
     <command>latex</command> et <command>pdflatex</command>
    quand configure est lancé, et la suite de tests pour <command>asy</command>
    (pour les graphiques vectoriels) échouera si TeX n'est pas déjà installé.
    </para>

    <para>De plus, il est nécessaire de créer des liens symboliques différents à la fin de
     l'installation.</para>

    <para>Vous pouvez reconstruire texlive plus tard dans <xref linkend="texlive"/> pour inclure
    xindy. Nous installerons xindy et aussi constuire et installer asy.</para>

    &lfs76_checked;

    <bridgehead renderas="sect3">Information sur le paquet </bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP) : <ulink url="&texlive-pass1-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP) : <ulink url="&texlive-pass1-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement : &texlive-pass1-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement : &texlive-pass1-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis : &texlive-pass1-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction : &texlive-pass1-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Téléchargement requis supplémentaire</bridgehead>

      <para>Much of the texlive environment (including scripts, documentation,
      fonts et various other files) is not part of the source tarball. You must
      download it separately. This will give you all of the additional files
      which are provided by a full install of the binary version, there is no
      realistic way to restrict which parts get installed.</para>

      <para>
        Because of the size of this package, it is unlikely to be mirrored by
        BLFS mirrors.  In case of difficulty, go to http://www.ctan.org/mirrors/
        to find a more-accessible mirror.
      </para>

    <itemizedlist spacing="compact">
      <title>Standard Fonts</title>
      <listitem>
        <para>Téléchargement (FTP) : <ulink url="&texlive-texmf-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement : &texlive-texmf-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement : &texlive-texmf-size;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de TeX Live from source pass 1</bridgehead>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="x-window-system"/>
    </para>
    <para role="recommended">
      The source ships with its own versions of <emphasis>many</emphasis>
      libraries, et will use them unless it is forced to use the system
      versions.  The following are recommended so that the system version
      will be used:
      <xref linkend="fontconfig"/>,
      <xref linkend="freetype2"/>,
      <xref linkend="gc"/>,
      <xref linkend="graphite2"/>,
      <xref linkend="harfbuzz"/> (linked to graphite2),
      <xref linkend="icu"/>,
      <xref linkend="libpaper"/>,
      <xref linkend="libpng"/>,
      <xref linkend="poppler"/>
    </para>

    <bridgehead renderas="sect4">Facultative</bridgehead>
    <para role="optional">
      The source ships with its own versions of several libraries which are either
      not under active development, or only used for limited functionality.  If
      you install these, as with some other optional dependencies in this book you
      will need to tell <command>configure</command> to use the system versions.
      <ulink url="http://libgd.bitbucket.org">GD</ulink>,
      <ulink url="http://fossies.org/linux/misc/t1lib-5.1.2.tar.gz/">t1lib</ulink>,
      <ulink url="http://sourceforge.net/projects/zziplib/">ZZIPlib</ulink>,
      <ulink url="http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&amp;id=TECkitTéléchargements">TECkit</ulink>
    </para>

    <bridgehead renderas="sect4">Runtime dependencies</bridgehead>
    <para role="recommended">
      Some scripts will use
      <xref linkend="python2"/> or <xref linkend="ruby"/>.
    </para>

    <para condition="html" role="usernotes">Notes utilisateur :
    <ulink url="&blfs-wiki;/texlive-pass1"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de TeX Live, pass 1</title>

    <para>
      Install TeX Live pass 1 by running the following  
    </para>

<screen role="root"><userinput>export TEXARCH=$(uname -m | sed -e 's/i.86/i386/' -e 's/$/-linux/') &amp;&amp;
mkdir texlive-build &amp;&amp;
cd texlive-build    &amp;&amp;

../configure                                        \
    --prefix=/opt/texlive/&texlive-year;                      \
    --bindir=/opt/texlive/&texlive-year;/bin/$TEXARCH         \
    --datarootdir=/opt/texlive/&texlive-year;                 \
    --includedir=/usr/include                       \
    --infodir=/opt/texlive/&texlive-year;/texmf-dist/doc/info \
    --libdir=/usr/lib                               \
    --mandir=/opt/texlive/&texlive-year;/texmf-dist/doc/man   \
    --disable-native-texlive-build                  \
    --disable-static --enable-shared                \
    --with-system-cairo                             \
    --with-system-fontconfig                        \
    --with-system-freetype2                         \
    --with-system-graphite2                         \
    --with-system-harfbuzz                          \
    --with-system-icu                               \
    --with-system-libgs                             \
    --with-system-libpng                            \
    --with-system-pixman                            \
    --with-system-poppler                           \
    --with-system-xpdf                              \
    --with-system-zlib                              \
    --with-banner-add=" - BLFS" &amp;&amp;
unset TEXARCH &amp;&amp;

make</userinput></screen>

    <para>Pour tester le résultat, tapez : <command>make -k check</command>
    One test in each of web2c, dvipng et ttf2pk2 will SKIP because kpathsea
    has not yet been installed.</para>

    <para>Now, as the <systemitem class="username">root</systemitem>
    user:</para>

<screen><userinput role="root">make install &amp;&amp;
make texlinks</userinput></screen>

    <para>And now, install the additional files as the
    <systemitem class="username">root</systemitem> user:</para>

<screen><userinput role="root">mkdir -pv /opt/texlive/&texlive-year; &amp;&amp;
tar -xf texlive-&texlive-version;-texmf.tar.xz -C /opt/texlive/&texlive-year; --strip-components=1</userinput></screen>

    <para>Now proceed to <xref linkend="tex-path"/>.</para>

  </sect2>

  <sect2 role="commands">
    <title>Explications des commandes</title>

    <para>
      <parameter>--prefix=, --bindir=, --datarootdir=, --infodir=, --mandir= ...
      </parameter> : these switches ensure that the files installed from source
      will overwrite the corresponding files previously installed by
      <application>install-tl</application>.
    </para>

    <para>
      <parameter>--includedir=, --libdir= ...</parameter> : these switches ensure
      that the libraries will be found at runtime, et that programs can be
      compiled against them.
    </para>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/static-libraries.xml"/>

    <para>
      <parameter>--enable-shared</parameter> : Create shared versions of
      <filename class="libraryfile">libkpathsea</filename> et
      <filename class="libraryfile">libptexenc</filename>.
    </para>

    <para>
      <parameter>--with-system-...</parameter> : Unless this parameter is used,
      the included versions of these libraries  will be statically compiled
      into the programs which need them.  If you decided not to install a
      recommended library, omit the corresponding switches.
    </para>

    <para>
      <parameter>--with-system-xpdf</parameter> : Uniquely, this parameter has
      a non-standard meaning, it tells <command>configure</command> to use the
      system-installed <application>poppler</application> headers et library.
      Again, omit this if you have not installed
      <application>poppler</application>.
    </para>

    <para>
      <option>--without-x</option> : use this if you do not have Xorg installed.
    </para>

    <para>
      <parameter>make texlinks</parameter> : this runs the texlinks.sh script
      to create (or recreate) symbolic links from formats to engines.  In
      practice, several of the targets such as <command>xetex</command> are now
      separate binaries et for these it will report "file already exists".
    </para>
    <para>
      <parameter>tar -xf texlive-&texlive-version;-texmf.tar.xz -C /opt/texlive/&texlive-year; --strip-components=1</parameter> :
      the tarball contains the files for the texmf-dist directory, et because
      of its size we do not want to waste time et space untarring it et then
      copying the files.
    </para>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>Over 300 binaries et symlinks to scripts</seg>
        <seg>libkpathsea.so, libptexenc.so</seg>
        <seg>/opt/texlive/&texlive-year;/bin, /opt/texlive/&texlive-year;/texmf-dist,
        /usr/include/kpathsea, /usr/include/ptexenc</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Description courte</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="texpass1-programs">
        <term><command>TeX&nbsp;programs</command></term>
        <listitem>
          <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
          href="../../xincludes/texprogs.xml"/>
          <indexterm zone="texpass1 texpass1-programs">
            <primary sortas="b-texpass1-programs">TeX Live programs</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libkpathsea-texpass1">
        <term><filename class="libraryfile">libkpathsea.so</filename></term>
        <listitem>
          <para>
            (kpathsearch) exists to look up a file in a list of directories.
          </para>
          <indexterm zone="texpass1 libkpathsea">
            <primary sortas="c-libkpathsea">libkpathsea.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libptexenc-texpass1">
        <term><filename class="libraryfile">libptexenc.so</filename></term>
        <listitem>
          <para>
            is a library for Japanese pTeX (publishing TeX).
          </para>
          <indexterm zone="texpass1 libptexenc">
            <primary sortas="c-libptexenc">libptexenc.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>

  </sect2>

</sect1>
