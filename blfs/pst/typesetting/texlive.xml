<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  <!ENTITY texlive-source-download-http " ">
  <!ENTITY texlive-source-download-ftp  "ftp://tug.org/texlive/historic/&texlive-year;/texlive-&texlive-version;-source.tar.xz">
  <!ENTITY texlive-source-md5sum        "f52599c99fb1035399b907f4c54f1125">
  <!ENTITY texlive-source-size          "172 Mo">
  <!ENTITY texlive-buildsize            "1.6 Go">
  <!ENTITY texlive-time                 "9.6 SBU">
]>
<sect1 id="texlive" xreflabel="TeX-Live-&texlive-version;">
  <?dbhtml filename="texlive.html"?>
  <sect1info>
    <othername>$LastChangedBy&nbsp;: bdubbs $</othername>
    <date>$Date&nbsp;: 2012-09-22 18:38:01 +0200 (Sat, 22 Sep 2012) $</date>
  </sect1info>
  <title>TeX-Live-&texlive-version;</title>
  <indexterm zone="texlive">
    <primary sortas="a-texlive">texlive</primary>
  </indexterm>
  <sect2 role="package">
    <title>Introduction √† TeX Live depuis les sources</title>
    <para>Une version binaire du paquet <application>TeX Live</application> est install√©e
    avec <xref linkend="tl-installer"/>. Ici, nous utilisons cela pour reconstruire les programmes
    compil√©s depuis les sources.</para>
   &lfs75_checked;
    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>T√©l√©chargement (HTTP)&nbsp;: <ulink url="&texlive-source-download-http;"/></para>
      </listitem>
      <listitem>
        <para>T√©l√©chargement (FTP)&nbsp;: <ulink url="&texlive-source-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contr√¥le MD5 du t√©l√©chargement&nbsp;: &texlive-source-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du t√©l√©chargement&nbsp;: &texlive-source-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &texlive-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &texlive-time;</para>
      </listitem>
    </itemizedlist>
      
    <bridgehead renderas="sect3">T√©l√©chargements suppl√©mentaires</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Correctif requis:
          <ulink url="&patch-root;/texlive-&texlive-version;-source-fix_asymptote-1.patch"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Correctif requis:
          <ulink url="&patch-root;/texlive-&texlive-version;-source-poppler26-1.patch"/>
        </para>
      </listitem>


    </itemizedlist>
    <bridgehead renderas="sect3">D√©pendances de TeX Live</bridgehead>
    <bridgehead renderas="sect4">Recommand√©es</bridgehead>
    <para role="recommended">
      <xref linkend="freeglut"/> (pour asy),
      <xref linkend="gs"/>,
      <xref linkend="x-window-system"/>
    </para>
    <para>
      Les sources inclus leur propre version de <emphasis>beaucoup</emphasis> de
      biblioth√®ques, et veulent les utiliser sans √™tre forc√© √† utiliser celle du
      syst√®me. La suite est recommand√©es pour que la version du syst√®me puisse √™tre utilis√©es
      <xref linkend="gs"/>,
      <xref linkend="icu"/>,
      <xref linkend="freetype2"/>,
      <xref linkend="fontconfig"/>,
      <xref linkend="graphite2"/>,
      <xref linkend="harfbuzz"/> (li√© √† graphite2),
      <xref linkend="libpng"/>,
      <xref linkend="poppler"/>,
      <xref linkend="x-window-system"/>
    </para>
    <bridgehead renderas="sect4">Facultative</bridgehead>
    <para role="optional">
      <ulink url="http://www.fftw.org/">FFTW</ulink> peut √™tre utilis√© par asy.
    </para>
    <para>
      Les sources inclus leur propre verson de ces biblioth√®ques, qui ne sont soit pas dans un developpement
      actif, ou seulement utilis√©es pour des fonctions limit√©es. Si vous les installez, comme avec d'autres
      d√©pendances facultatives dans le ce libre, vous devrez appeler
      <command>configure</command> pour utiliser les versions du syst√®me.
      <ulink url="http://libgd.bitbucket.org">GD</ulink>,
      <ulink url="http://fossies.org/linux/misc/t1lib-5.1.2.tar.gz/">t1lib</ulink>,
      <ulink url="http://sourceforge.net/projects/zziplib/">ZZIPlib</ulink>,
      <ulink url="http://www.gnu.org/software/clisp/">CLISP</ulink>,
      <ulink url="http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&amp;id=TECkitDownloads">TECkit</ulink>
     </para>
    <bridgehead renderas="sect4">D√©pendances d'√©x√©cution</bridgehead>
    <para role="recommended">
      Quelques scripts  (r√©install√©s) utiliseront
      <xref linkend="ruby"/> et <xref linkend="tk"/> est utilis√© par epspdftk.
    </para>
    <para condition="html" role="usernotes">Notes utilisaeur:
    <ulink url="&blfs-wiki;/texlive"/></para>
  </sect2>
  <sect2 role="installation">
    <title>Installation de TeX Live</title>
    <para>Ces instructions √©craseront les fichiers correspondants de l'installateur binaire. Comme avec
    l'installateur, changez x86_64-linux pour quelque chose qui correspond √† votre  architecture.</para>
    
   <para>Merci de noter que l'installation depuis les sources recompilera les programmes
    binaires et recr√©era les fichiers <literal>man</literal> et <literal>info</literal>.
    Cela √©crasera √©galement les scripts - certain peuvent √™tre de versions plus anciennes que
    ceux du nouvel installateur. Cele <emphasis>ne</emphasis>
    recr√©era pas : les plus de 200 liens symboliques dans le r√©pertoire
    x86_64-linux (certains sont des noms alternatifs, beaucoup sont des pointeurs vers 
    les scripts), les fichiers  html, les fichiers PDF, les licences, les fichiers README, deux fichiers de
    config (<filename>texmf.cnf</filename> et <filename>texmfcnf.lua</filename>),
    ni les nombreux paquets et les fichiers de police dans 
    <filename class="directory">texmf-dist</filename> et
    <filename class="directory">texmf-var</filename>, ni les fichiers enregistrant les actions de l'installateur,
    et les fichiers <filename>ls-R</filename> listant ce qui est install√© originellement.</para>
    <para>Actuellement, ces instructions ne construisent pas 
    <application>xindy</application> qui est install√© pas l'installateur
    binaires √† cause d'un probl√®me avec la proc√©dure d'installation de l'archive.
    Asy et le reste de l'asymptote n'est pas reconstruit par d√©faut, alors nous allons lancer s√©par√©ment 
    <command>configure</command> et <command>make</command> dans leur r√©pertoire.
</para>
<screen>
<userinput>patch -Np1 -i ../texlive-&texlive-version;-source-fix_asymptote-1.patch &amp;&amp;
mkdir texlive-build &amp;&amp;
cd texlive-build    &amp;&amp;
../configure                                        \
    --prefix=/opt/texlive/2013                      \
    --bindir=/opt/texlive/2013/bin/x86_64-linux     \
    --datarootdir=/opt/texlive/2013                 \
    --includedir=/usr/include                       \
    --infodir=/opt/texlive/2013/texmf-dist/doc/info \
    --libdir=/usr/lib                               \
    --mandir=/opt/texlive/2013/texmf-dist/doc/man   \
    --disable-native-texlive-build                  \
    --disable-static --enable-shared                \
    --with-system-libgs                             \
    --with-system-poppler                           \
    --with-system-freetype2                         \
    --with-system-fontconfig                        \
    --with-system-libpng                            \
    --with-system-icu                               \
    --with-system-graphite2                         \
    --with-system-harfbuzz                          \
    --with-system-xpdf                              \
    --with-system-poppler                           \
    --with-system-cairo                             \
    --with-system-pixman                            \
    --with-system-zlib                              \
    --with-banner-add=" - BLFS" &amp;&amp;
pushd ../utils/asymptote &amp;&amp;
    echo "ac_cv_lib_m_sqrt=yes"     >config.cache &amp;&amp;
    echo "ac_cv_lib_z_deflate=yes" >>config.cache &amp;&amp;
./configure LIBS="-ltirpc "                         \
    --prefix=/opt/texlive/2013/                     \
    --bindir=/opt/texlive/2013/bin/x86_64-linux     \
    --enable-texlive-build                          \
    --datarootdir=/opt/texlive/2013/texmf-dist      \
    --infodir=/opt/texlive/2013/texmf-dist/doc/info \
    --mandir=/opt/texlive/2013/texmf-dist/doc/man   \
    --cache-file=config.cache &amp;&amp;
popd &amp;&amp;
make &amp;&amp;
make -C ../utils/asymptote</userinput>
</screen>
     <para>Pour tester les r√©sultats, lancez&nbsp;:  <command>make -k chec &amp;&amp;
     make -C utils/asymptote check</command>.</para>
  
    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>:</para>
<screen>
<userinput role="root">make install &amp;&amp;
make -C ../utils/asymptote install</userinput>
</screen>
</sect2>
  <sect2 role="commands">
    <title>Explications des commandes</title>
     <para>
      <parameter>patch -Np1 -i ../texlive-&texlive-version;-source-poppler26-1.patch</parameter>:
      Cela autorise luatex √ ce construire contre poppler &gt;=0.26. Oubliez cela si vous n'avez pas install√
      <application>poppler</application>.
    </para>
    <para>
      <parameter>--prefix=, --bindir=, --datarootdir=, --infodir=, --mandir= ...
      </parameter>: Ces param√®tres assurent que les fichiers isntall√©s depuis les sources
      √©craseront les fichiers correspondants install√©s pr√©c√©dement par 
      <application>install-tl</application>.
    </para>
    <para>
      <parameter>--includedir=, --libdir= ...</parameter> : Ces param√®tres assurent que les biblioth√®ques
      seront trouv√©s √† l'√©x√©cution, et que les programmes peuvent √™tre compil√©s contre elles.
  </para>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/static-libraries.xml"/>
    <para>
      <parameter>--enable-shared</parameter>: Utilisation des versions partag√©es de 
      <filename class="libraryfile">libkpathsea</filename> et
      <filename class="libraryfile">libptexenc</filename>.
    </para>
    <para>
      <parameter>--with-system-...</parameter>: Sans ce param√®tre utilis√©,
      les versions incluses de ces biblioth√®ques seront compil√©s en statiques dans les programmes
      qui les utilisent. Si vous d√©cidez de ne pas installer une biblioth√®que recommand√©e, ne pas mettre le
      param√®tre correspondant.
   </para>
    <para>
      <parameter>--with-system-xpdf</parameter>: unique, ce param√®tre a une signification non standard, il
      indique √† <command>configure</command> d'utiliser les ent√™tes et la biblioth√®que install√©s sur le syst√®me
       <application>poppler</application>.
      De nouveau, oubliez le si vous n'avez pas install√©
      <application>poppler</application>.
    </para>
    <para>
      <parameter>echo "ac_cv_lib_m_sqrt=yes" ... LIBS="-ltirpc " &gt;config.cache,
      ... --cache-file=config.cache</parameter> : Les scripts configure dans
      <application>TeX Live</application> sont rares. Asymptote ne doit pas seulement √™tre configur√©
      et construit s√©par√©ment, le script configure √©choue √† trouver la biblioth√®que partag√©e
      <filename class="libraryfile">libtirpc.so</filename>.  En passant cela dans 
      LIBS casse les tests pour (statique) libm et (partag√©e) libz, alors nous avons corrig√© cela, selon
      la m√™me fa√ßon que pour la compilation crois√©e.
    </para>
    <para>
      <option>--without-x</option>: utilisez cela (et oubliez le configure et make dans
      <filename>utils/asymptote</filename> si vous n'avez pas install√©.
    </para>
  </sect2>
  <sect2 role="content">
    <title>Contenu</title>
    <segmentedlist>
      <segtitle>Programmes install√©s</segtitle>
      <segtitle>Biblioth√®que install√©e</segtitle>
      <segtitle>R√©pertoires install√©s</segtitle>
      <seglistitem>
        <seg>plus de 300 binaires et liens symboliques vers des scripts</seg>
        <seg>libkpathsea.so, libptexenc.so</seg>
        <seg>/opt/texlive, /usr/include/kpathsea, /usr/include/ptexenc</seg>       <seg>Aucune</seg>
      </seglistitem>
    </segmentedlist>
    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      <varlistentry id="texlive-programs">
        <term><command>Programmes&nbsp;TeX</command></term>
        <listitem>
          <para>ceux inclus dans le paquet <application>TeX Live</application> sont
          trop nombreux pour √™tre list√©s individuellement. Merci de vous reporter
          aux pages de man et html individuelles de chaque programme dans le
          r√©pertoire 2011/index.html du r√©pertoire d'installation.</para>
          <indexterm zone="texlive texlive-programs">
            <primary sortas="b-texlive-programs">TeX Live programs</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libkpathsea">
        <term><filename class="libraryfile">libkpathsea.so</filename></term>
        <listitem>
          <para>
            (kpathsearch) existe pour regarder un fichier dans une liste de r√©pertoires.
          </para>
          <indexterm zone="texlive libkpathsea">
            <primary sortas="c-libkpathsea">libkpathsea.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libptexenc">
        <term><filename class="libraryfile">libptexenc.so</filename></term>
        <listitem>
          <para>
            est une biblioth√®que pour pTeX Japonnais (publication TeX).
          </para>
          <indexterm zone="texlive libptexenc">
            <primary sortas="c-libptexenc">libptexenc.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect2>
</sect1>
