<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  <!ENTITY texlive-source-download-http " ">
  <!ENTITY texlive-source-download-ftp  "ftp://tug.org/texlive/historic/&texlive-year;/texlive-&texlive-version;-source.tar.xz">
  <!ENTITY texlive-source-md5sum        "f52599c99fb1035399b907f4c54f1125">
  <!ENTITY texlive-source-size          "172 Mo">
  <!ENTITY texlive-buildsize            "1.6 Go">
  <!ENTITY texlive-time                 "9.6 SBU">
]>
<sect1 id="texlive" xreflabel="TeX-Live-&texlive-version;">
  <?dbhtml filename="texlive.html"?>
  <sect1info>
    <othername>$LastChangedBy&nbsp;: bdubbs $</othername>
    <date>$Date&nbsp;: 2012-09-22 18:38:01 +0200 (Sat, 22 Sep 2012) $</date>
  </sect1info>
  <title>TeX-Live-&texlive-version;</title>
  <indexterm zone="texlive">
    <primary sortas="a-texlive">texlive</primary>
  </indexterm>
  <sect2 role="package">
    <title>Introduction à TeX Live depuis les sources</title>
    <para>Une version binaire du paquet <application>TeX Live</application> est installée
    avec <xref linkend="tl-installer"/>. Ici, nous utilisons cela pour reconstruire les programmes
    compilés depuis les sources.</para>

   &lfs75_checked;
    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&texlive-source-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&texlive-source-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &texlive-source-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &texlive-source-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &texlive-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &texlive-time;</para>
      </listitem>
    </itemizedlist>
      

    <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          corrctif requis:
          <ulink url="&patch-root;/texlive-&texlive-version;-source-fix_asymptote-1.patch"/>
        </para>
      </listitem>
    </itemizedlist>
    <bridgehead renderas="sect3">Dépendances de TeX Live</bridgehead>
    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="freeglut"/> (pour asy),
      <xref linkend="gs"/>,
      <xref linkend="x-window-system"/>
    </para>
    <para>

      Les sources inclus leur propre version de <emphasis>beaucoup</emphasis> de
      bibliothèques, et veulent les utiliser sans être forcé à utiliser celle du
      système. La suite est recommandées pour que la version du système puisse être utilisées
      <xref linkend="gs"/>,
      <xref linkend="icu"/>,
      <xref linkend="freetype2"/>,
      <xref linkend="fontconfig"/>,
      <xref linkend="graphite2"/>,
      <xref linkend="harfbuzz"/> (lié à graphite2),
      <xref linkend="libpng"/>,
      <xref linkend="poppler"/>,
      <xref linkend="x-window-system"/>
    </para>
    <bridgehead renderas="sect4">Facultative</bridgehead>
    <para role="optional">
      <ulink url="http://www.fftw.org/">FFTW</ulink> peut être utilisé par asy.
    </para>
    <para>

      Les sources inclus leur propre verson de ces bibliothèques, qui ne sont soit pas dans un developpement
      actif, ou seulement utilisées pour des fonctions limitées. Si vous les installez, comme avec d'autres
      dépendances facultatives dans le ce libre, vous devrez appeler
      <command>configure</command> pour utiliser les versions du système.
      <ulink url="http://libgd.bitbucket.org">GD</ulink>,
      <ulink url="http://fossies.org/linux/misc/t1lib-5.1.2.tar.gz/">t1lib</ulink>,
      <ulink url="http://sourceforge.net/projects/zziplib/">ZZIPlib</ulink>,
      <ulink url="http://www.gnu.org/software/clisp/">CLISP</ulink>,
      <ulink url="http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&amp;id=TECkitDownloads">TECkit</ulink>
     </para>
    <bridgehead renderas="sect4">Dépendances d'éxécution</bridgehead>
    <para role="recommended">
      Quelques scripts  (réinstallés) utiliseront
      <xref linkend="ruby"/> et <xref linkend="tk"/> est utilisé par epspdftk.
    </para>

    <para condition="html" role="usernotes">Notes utilisaeur:
    <ulink url="&blfs-wiki;/texlive"/></para>
  </sect2>
  <sect2 role="installation">
    <title>Installation de TeX Live</title>
    <para>Ces instructions écraseront les fichiers correspondants de l'installateur binaire. Comme avec
    l'installateur, changez x86_64-linux pour quelque chose qui correspond à votre  architecture.</para>
    
   <para>Merci de noter que l'installation depuis les sources recompilera les programmes
    binaires et recréera les fichiers <literal>man</literal> et <literal>info</literal>.
    Cela écrasera également les scripts - certain peuvent être de versions plus anciennes que
    ceux du nouvel installateur. Cele <emphasis>ne</emphasis>
    recréera pas : les plus de 200 liens symboliques dans le répertoire
    x86_64-linux (certains sont des noms alternatifs, beaucoup sont des pointeurs vers 
    les scripts), les fichiers  html, les fichiers PDF, les licences, les fichiers README, deux fichiers de
    config (<filename>texmf.cnf</filename> et <filename>texmfcnf.lua</filename>),
    ni les nombreux paquets et les fichiers de police dans 
    <filename class="directory">texmf-dist</filename> et
    <filename class="directory">texmf-var</filename>, ni les fichiers enregistrant les actions de l'installateur,
    et les fichiers <filename>ls-R</filename> listant ce qui est installé originellement.</para>
    <para>Actuellement, ces instructions ne construisent pas 
    <application>xindy</application> qui est installé pas l'installateur
    binaires à cause d'un problème avec la procédure d'installation de l'archive.
    Asy et le reste de l'asymptote n'est pas reconstruit par défaut, alors nous allons lancer séparément 
    <command>configure</command> et <command>make</command> dans leur répertoire.
</para>
<screen><userinput>mkdir texlive-build &amp;&amp;
cd texlive-build    &amp;&amp;
../configure --prefix=/opt/texlive/2013 \
             --bindir=/opt/texlive/2013/bin/x86_64-linux \
             --datarootdir=/opt/texlive/2013 \
             --includedir=/usr/include \
             --infodir=/opt/texlive/2013/texmf-dist/doc/info \
             --libdir=/usr/lib \
             --mandir=/opt/texlive/2013/texmf-dist/doc/man \
             --disable-native-texlive-build \
             --disable-static --enable-shared \
             --with-system-libgs \
             --with-system-poppler \
             --with-system-freetype2 \
             --with-system-fontconfig \
             --with-system-libpng \
             --with-system-icu \
             --with-system-graphite2 \
             --with-system-harfbuzz \
             --with-system-xpdf \
             --with-system-poppler \
             --with-system-cairo \
             --with-system-pixman \
             --with-system-zlib \
             --with-banner-add=" - BLFS" &amp;&amp;
make</userinput>
</screen>
     <para>Pour tester les résultats, lancez&nbsp;:  <command>make -k chec &amp;&amp;
+    make -C utils/asymptote checkk</command>.</para>
  
    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>:</para>

<screen><userinput role="root">make install</userinput></screen>

</sect2>

  <sect2 role="commands">
    <title>Explications des commandes</title>
    <para>
      <parameter>--prefix=, --bindir=, --datarootdir=, --infodir=, --mandir= ...
      </parameter>: Ces paramètres assurent que les fichiers isntallés depuis les sources
      écraseront les fichiers correspondants installés précédement par 
      <application>install-tl</application>.
    </para>
    <para>
      <parameter>--includedir=, --libdir= ...</parameter> : Ces paramètres assurent que les bibliothèques
      seront trouvés à l'éxécution, et que les programmes peuvent être compilés contre elles.
  </para>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/static-libraries.xml"/>
    <para>
      <parameter>--enable-shared</parameter>: Utilisation des versions partagées de 
      <filename class="libraryfile">libkpathsea</filename> et
      <filename class="libraryfile">libptexenc</filename>.
    </para>
    <para>
      <parameter>--with-system-...</parameter>: Sans ce paramètre utilisé,
      les versions incluses de ces bibliothèques seront compilés en statiques dans les programmes
      qui les utilisent. Si vous décidez de ne pas installer une bibliothèque recommandée, ne pas mettre le
      paramètre correspondant.
   </para>
    <para>
      <parameter>--with-system-xpdf</parameter>: unique, ce paramètre a une signification non standard, il
      indique à <command>configure</command> d'utiliser les entêtes et la bibliothèque installés sur le système
       <application>poppler</application>.
      De nouveau, oubliez le si vous n'avez pas installé
      <application>poppler</application>.
    </para>
    <para>
      <parameter>echo "ac_cv_lib_m_sqrt=yes" ... LIBS="-ltirpc " &gt;config.cache,
      ... --cache-file=config.cache</parameter> : Les scripts configure dans
      <application>TeX Live</application> sont rares. Asymptote ne doit pas seulement être configuré
      et construit séparément, le script configure échoue à trouver la bibliothèque partagée
      <filename class="libraryfile">libtirpc.so</filename>.  En passant cela dans 
      LIBS casse les tests pour (statique) libm et (partagée) libz, alors nous avons corrigé cela, selon
      la même façon que pour la compilation croisée.
    </para>
    <para>
      <option>--without-x</option>: utilisez cela (et oubliez le configure et make dans
      <filename>utils/asymptote</filename> si vous n'avez pas installé.
    </para>
  </sect2>
  <sect2 role="content">
    <title>Contenu</title>
    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèque installée</segtitle>
      <segtitle>Répertoires installés</segtitle>
      <seglistitem>
        <seg>plus de 300 binaires et liens symboliques vers des scripts</seg>
        <seg>libkpathsea.so, libptexenc.so</seg>
        <seg>/opt/texlive, /usr/include/kpathsea, /usr/include/ptexenc</seg>       <seg>Aucune</seg>
      </seglistitem>
    </segmentedlist>
    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      <varlistentry id="texlive-programs">
        <term><command>Programmes&nbsp;TeX</command></term>
        <listitem>
          <para>ceux inclus dans le paquet <application>TeX Live</application> sont
          trop nombreux pour être listés individuellement. Merci de vous reporter
          aux pages de man et html individuelles de chaque programme dans le
          répertoire 2011/index.html du répertoire d'installation.</para>
          <indexterm zone="texlive texlive-programs">
            <primary sortas="b-texlive-programs">TeX Live programs</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libkpathsea">
        <term><filename class="libraryfile">libkpathsea.so</filename></term>
        <listitem>
          <para>
            (kpathsearch) existe pour regarder un fichier dans une liste de répertoires.
          </para>
          <indexterm zone="texlive libkpathsea">
            <primary sortas="c-libkpathsea">libkpathsea.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libptexenc">
        <term><filename class="libraryfile">libptexenc.so</filename></term>
        <listitem>
          <para>
            est une bibliothèque pour pTeX Japonnais (publication TeX).
          </para>
          <indexterm zone="texlive libptexenc">
            <primary sortas="c-libptexenc">libptexenc.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect2>
</sect1>
