<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  <!ENTITY texlive-source-download-http " ">
  <!ENTITY texlive-source-download-ftp  "ftp://tug.org/texlive/historic/&texlive-year;/texlive-&texlive-version;-source.tar.xz">
  <!ENTITY texlive-source-md5sum        "09ee265ff51637827559affc7304078c">
  <!ENTITY texlive-source-size          "40 Mo">
  
  <!ENTITY texlive-buildsize            "555 Mo">
  <!ENTITY texlive-time                 "8.4 SBU">
]>
<sect1 id="texlive" xreflabel="TeX-Live-&texlive-version;">
  <?dbhtml filename="texlive.html"?>
  <sect1info>
    <othername>$LastChangedBy&nbsp;: bdubbs $</othername>
    <date>$Date&nbsp;: 2012-09-22 18:38:01 +0200 (Sat, 22 Sep 2012) $</date>
  </sect1info>
  <title>TeX-Live-&texlive-version;</title>
  <indexterm zone="texlive">
    <primary sortas="a-texlive">texlive</primary>
  </indexterm>
  <sect2 role="package">
    <title>Introduction à TeX Live depuis les sources</title>
    <para>Une version binaire du paquet <application>TeX Live</application> est installée
    avec <xref linkend="tl-installer"/>. Ici, nous utilisons cela pour reconstruire les programmes
    compilés depuis les sources.</para>
   &lfs75_checked;
    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&texlive-source-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&texlive-source-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &texlive-source-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &texlive-source-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &texlive-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &texlive-time;</para>
      </listitem>
    </itemizedlist>
      
    <bridgehead renderas="sect3">Dépendances de TeX Live</bridgehead>
    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
      <xref linkend="tl-installer"/> ou une version précédente de Tex Live
      (non testé, vous aurez besoin de modifier le paramètre de configuration
      qui se réfère à &texlive-year; ou sinon cela écrasera votre installation existante, ou alors
      copier tous à l'endroit de l'année actuelle) et  <xref linkend="clisp"/>
      (pour construire <command>xindy</command> qui est un procésseur d'indexage pour la création
       d'index multi-langage).
    </para>
    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="gs"/> (pour dvisvgm, utilisé par asymptote qui fournit une trousse à outils
      mathématique orrientée coordonnées pour le dessin technique),
      <xref linkend="x-window-system"/>
    </para>
    <para>
      Les sources inclus leur propre version de <emphasis>beaucoup</emphasis> de
      bibliothèques, et veulent les utiliser sans être forcé à utiliser celle du
      système. La suite est recommandées pour que la version du système puisse être utilisées
      <xref linkend="fontconfig"/>,
      <xref linkend="freetype2"/>,
      <xref linkend="gc"/>,
      <xref linkend="graphite2"/>,
      <xref linkend="harfbuzz"/> (lié à graphite2),
      <xref linkend="icu"/>,
      <xref linkend="libpaper"/>,
      <xref linkend="libpng"/>,
      <xref linkend="poppler"/>,
    </para>
    <bridgehead renderas="sect4">Facultative</bridgehead>
    <para>
      Les sources inclus leur propre verson de ces bibliothèques, qui ne sont soit pas dans un developpement
      actif, ou seulement utilisées pour des fonctions limitées. Si vous les installez, comme avec d'autres
      dépendances facultatives dans le ce libre, vous devrez appeler
      <command>configure</command> pour utiliser les versions du système.
      <ulink url="http://libgd.bitbucket.org">GD</ulink>,
      <ulink url="http://fossies.org/linux/misc/t1lib-5.1.2.tar.gz/">t1lib</ulink>,
      <ulink url="http://sourceforge.net/projects/zziplib/">ZZIPlib</ulink>,
      <ulink url="http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&amp;id=TECkitDownloads">TECkit</ulink>
     </para>
    <bridgehead renderas="sect4">Dépendances d'éxécution</bridgehead>
    <para role="recommended">
      Quelques scripts  (réinstallés) utiliseront
      <xref linkend="python2"/> ou <xref linkend="ruby"/>. 
    </para>
    <para condition="html" role="usernotes">Notes utilisaeur:
    <ulink url="&blfs-wiki;/texlive"/></para>
  </sect2>
  <sect2 role="installation">
    <title>Installation de TeX Live</title>
    <para>Ces instructions écraseront les fichiers correspondants de l'installateur binaire. Comme avec
    l'installateur, changez x86_64-linux pour quelque chose qui correspond à votre  architecture.</para>
    
   <para>Merci de noter que l'installation depuis les sources recompilera les programmes
    binaires et recréera les fichiers <literal>man</literal> et <literal>info</literal>.
    Cela écrasera également les scripts - certain peuvent être de versions plus anciennes que
    ceux du nouvel installateur. Cele <emphasis>ne</emphasis>
    recréera pas : les plus de 200 liens symboliques dans le répertoire
    x86_64-linux (certains sont des noms alternatifs, beaucoup sont des pointeurs vers 
    les scripts), les fichiers  html, les fichiers PDF, les licences, les fichiers README, deux fichiers de
    config (<filename>texmf.cnf</filename> et <filename>texmfcnf.lua</filename>),
    ni les nombreux paquets et les fichiers de police dans 
    <filename class="directory">texmf-dist</filename> et
    <filename class="directory">texmf-var</filename>, ni les fichiers enregistrant les actions de l'installateur,
    et les fichiers <filename>ls-R</filename> listant ce qui est installé originellement.</para>
    <para>
    Asy et le reste de l'asymptote n'est pas reconstruit par défaut, alors nous allons lancer séparément 
    <command>configure</command> et <command>make</command> dans leur répertoire.
</para>
<screen>
<userinput>mkdir texlive-build &amp;&amp;
cd texlive-build    &amp;&amp;
../configure                                        \
    --prefix=/opt/texlive/&texlive-year;                      \
    --bindir=/opt/texlive/&texlive-year;/bin/x86_64-linux     \
    --datarootdir=/opt/texlive/&texlive-year;                 \
    --includedir=/usr/include                       \
    --infodir=/opt/texlive/&texlive-year;/texmf-dist/doc/info \
    --libdir=/usr/lib                               \
    --mandir=/opt/texlive/&texlive-year;/texmf-dist/doc/man   \
    --disable-native-texlive-build                  \
    --disable-static --enable-shared                \
    --with-system-libgs                             \
    --with-system-poppler                           \
    --with-system-freetype2                         \
    --with-system-fontconfig                        \
    --with-system-libpng                            \
    --with-system-icu                               \
    --with-system-graphite2                         \
    --with-system-harfbuzz                          \
    --with-system-xpdf                              \
    --with-system-poppler                           \
    --with-system-cairo                             \
    --with-system-pixman                            \
    --with-system-zlib                              \
    --with-banner-add=" - BLFS" &amp;&amp;</userinput></screen>
    <para>Asymptote a été configuré séparément. Il arrive avec sa propre copie des sources de gc, et utilisera seulement
    la version système si les sources locales sont supprimées.
    </para>
+<screen><userinput>pushd ../utils/asymptote &amp;&amp;
    echo "ac_cv_lib_m_sqrt=yes"     >config.cache &amp;&amp;
    echo "ac_cv_lib_z_deflate=yes" >>config.cache &amp;&amp;
./configure LIBS="-ltirpc "                         \
    --prefix=/opt/texlive/&texlive-year;/                     \
    --bindir=/opt/texlive/&texlive-year;/bin/x86_64-linux     \
    --enable-texlive-build                          \
    --datarootdir=/opt/texlive/&texlive-year;/texmf-dist      \
    --infodir=/opt/texlive/&texlive-year;/texmf-dist/doc/info \
    --mandir=/opt/texlive/&texlive-year;/texmf-dist/doc/man   \
    --cache-file=config.cache &amp;&amp;
popd &amp;&amp;
make &amp;&amp;
make -C ../utils/asymptote</userinput>
</screen>
     <para>Pour tester les résultats, lancez&nbsp;:  <command>make -k chec &amp;&amp;
     make -C utils/asymptote check</command>.</para>
  
    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>:</para>
<screen>
<userinput role="root">make install &amp;&amp;
make -C ../utils/asymptote install</userinput>
</screen>

    <para>une partie du paquet demande à être reconstruite:
    <xref linkend="biber"/>.</para>

</sect2>
  <sect2 role="commands">
    <title>Explications des commandes</title>
    <para>
      <parameter>--prefix=, --bindir=, --datarootdir=, --infodir=, --mandir= ...
      </parameter>: Ces paramètres assurent que les fichiers installés depuis les sources
      écraseront les fichiers correspondants installés précédement par 
      <application>install-tl</application>.
    </para>
    <para>
      <parameter>--includedir=, --libdir= ...</parameter> : Ces paramètres assurent que les bibliothèques
      seront trouvés à l'éxécution, et que les programmes peuvent être compilés contre elles.
  </para>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/static-libraries.xml"/>
    <para>
      <parameter>--enable-shared</parameter>: Utilisation des versions partagées de 
      <filename class="libraryfile">libkpathsea</filename> et
      <filename class="libraryfile">libptexenc</filename>.
    </para>
    <para>
      <parameter>--with-system-...</parameter>: Sans ce paramètre utilisé,
      les versions incluses de ces bibliothèques seront compilés en statiques dans les programmes
      qui les utilisent. Si vous décidez de ne pas installer une bibliothèque recommandée, ne pas mettre le
      paramètre correspondant.
   </para>
    <para>
      <parameter>--with-system-xpdf</parameter>: unique, ce paramètre a une signification non standard, il
      indique à <command>configure</command> d'utiliser les entêtes et la bibliothèque installés sur le système
       <application>poppler</application>.
      De nouveau, oubliez le si vous n'avez pas installé
      <application>poppler</application>.
    </para>
    <para>
      <parameter>echo "ac_cv_lib_m_sqrt=yes" ... LIBS="-ltirpc " &gt;config.cache,
      ... --cache-file=config.cache</parameter> : Les scripts configure dans
      <application>TeX Live</application> sont rares. Asymptote ne doit pas seulement être configuré
      et construit séparément, le script configure échoue à trouver la bibliothèque partagée
      <filename class="libraryfile">libtirpc.so</filename>.  En passant cela dans 
      LIBS casse les tests pour (statique) libm et (partagée) libz, alors nous avons corrigé cela, selon
      la même façon que pour la compilation croisée.
    </para>
    <para>
      <option>--without-x</option>: utilisez cela (et oubliez le configure et make dans
      <filename>utils/asymptote</filename> si vous n'avez pas installé.
    </para>
  </sect2>
  <sect2 role="content">
    <title>Contenu</title>
    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèque installée</segtitle>
      <segtitle>Répertoires installés</segtitle>
      <seglistitem>
        <seg>plus de 300 binaires et liens symboliques vers des scripts</seg>
        <seg>libkpathsea.so, libptexenc.so</seg>
        <seg>/opt/texlive, /usr/include/kpathsea, /usr/include/ptexenc</seg> 
      </seglistitem>
    </segmentedlist>
    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      <varlistentry id="texlive-programs">
        <term><command>Programmes&nbsp;TeX</command></term>
        <listitem>
          <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
          href="../../xincludes/texprogs.xml"/>
          <indexterm zone="texlive texlive-programs">
            <primary sortas="b-texlive-programs">TeX Live programs</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libkpathsea">
        <term><filename class="libraryfile">libkpathsea.so</filename></term>
        <listitem>
          <para>
            (kpathsearch) existe pour regarder un fichier dans une liste de répertoires.
          </para>
          <indexterm zone="texlive libkpathsea">
            <primary sortas="c-libkpathsea">libkpathsea.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libptexenc">
        <term><filename class="libraryfile">libptexenc.so</filename></term>
        <listitem>
          <para>
            est une bibliothèque pour pTeX Japonnais (publication TeX).
          </para>
          <indexterm zone="texlive libptexenc">
            <primary sortas="c-libptexenc">libptexenc.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect2>
</sect1>
