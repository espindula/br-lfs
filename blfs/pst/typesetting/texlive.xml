<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  <!ENTITY texlive-download-http " ">
  <!ENTITY texlive-download-ftp  "ftp://tug.org/texlive/historic/&texlive-year;/texlive-&texlive-version;-source.tar.xz">
  <!ENTITY texlive-md5sum        "e526bd57118c4c4d5e9d525d20b5ac02">
  <!ENTITY texlive-size          "44 Mo">
  <!ENTITY texlive-buildsize      "4.0 Go including the additional download">
  <!ENTITY texlive-time           "7.2 SBU including the additional download (+0.3 SBU for the tests)">
  <!ENTITY texlive-texmf-download-http " ">
  <!ENTITY texlive-texmf-download-ftp  "ftp://tug.org/texlive/historic/&texlive-year;/texlive-&texmf-version;-texmf.tar.xz">
  <!ENTITY texlive-texmf-md5sum        "488c1e36ab42841b122cfd074ac42fa1">
  <!ENTITY texlive-texmf-size          "1.8 Go">
]>
<sect1 id="texlive" xreflabel="texlive-&texlive-version;">
  <?dbhtml filename="texlive.html"?>
  <sect1info>
    <othername>$LastChangedBy: ken $</othername>
    <date>$Date: 2015-01-11 22:13:35 +0100 (dim. 11 janv. 2015) $</date>
  </sect1info>
  <title>texlive-&texlive-version;-source</title>
  <indexterm zone="texlive">
    <primary sortas="a-texlive">texlive</primary>
  </indexterm>
  <sect2 role="package">
    <title>Introduction à TeX Live from source</title>
    <para>La plupart de TeX Live peut être construit depuis les sources sans une installation
    pré-existante, mais
    <application>xindy</application> (pour l'indexage) demande des versions en fonctionnement de
    <command>latex</command> et <command>pdflatex</command>
    quand configure est lancé, et les suites de tests et l'installation de
    <command>asy</command> (pour les graphiques vectoriels) échoueront si TeX n'a pas déjà été installé.
    En supplément, <application>biber</application> n'est pas fournit dans les sources de
    <application>texlive</application>.</para>
    <para>L'ensemble de ses paquets sont expliqués dans leurs propres pages et peuvent être construit
    après l'installation de ce paquet. si vous ne l'avez pas encore fait, vous pouvez démarrer par
    <xref linkend="tex-path"/> pour que les dernières commandes pour initialiser la nouvelle installation
    soit trouvées.</para>
    &lfs77_checked; &gcc5_checked;
    <bridgehead renderas="sect3">Information sur le paquet </bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP) : <ulink url="&texlive-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP) : <ulink url="&texlive-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement : &texlive-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement : &texlive-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis : &texlive-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction : &texlive-time;</para>
      </listitem>
    </itemizedlist>
    <bridgehead renderas="sect3">Téléchargement supplémentaire requis</bridgehead>
      <para>Beaucoup de l'environnement texlive (incluant scripts, documentation,
      polices et différents autres fichiers) ne sont pas dans l'archive des sources. Vous devez les
      télécharger séparément. Cela vous donnera tous les fichiers supplémentaires qui sont fournis
      par une isntallation complète de la version binaire, ce n'est pas réaliste de limiter
      les parties à installer.
      </para>
       <para>
        A cause de la taille de ce paquet, il n'est pas en mirroir sur les mirroirs BLFS. En cas de problème, 
        allez sur http://www.ctan.org/mirrors/ pour trouver un mirroir plus accessible.
      </para>
    <itemizedlist spacing="compact">
       <listitem>
        <para>Téléchargement (HTTP): <ulink url="&texlive-texmf-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP) : <ulink url="&texlive-texmf-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement : &texlive-texmf-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement : &texlive-texmf-size;</para>
      </listitem>
    </itemizedlist>
    <bridgehead renderas="sect3">Dépendances de TeX Live depuis les sources</bridgehead>
    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="gs"/> (pour dvisvgm - utilisé par asymptote qui fournit une boite à outils basée sur
      les coordonnées mathématiques pour les déssins techniques),
      <xref linkend="x-window-system"/>
    </para>
    
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
     href="../../xincludes/texrecommendlibs.xml"/>
    <bridgehead renderas="sect4">Facultative</bridgehead>
    
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
     href="../../xincludes/texoptional.xml"/>
    <bridgehead renderas="sect4">Dépendances d'exécution</bridgehead>
    
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
     href="../../xincludes/texruntime.xml"/>
    <para condition="html" role="usernotes">Notes utilisateur :
    <ulink url="&blfs-wiki;/texlive"/></para>
  </sect2>
  <sect2 role="installation">
    <title>Installation de TeX Live</title>
    <para>
      Installez TeX Live en lançant la suite  
    </para>
    <para>Les bibliothèques partagées seront installées dans le répertoire de texlive.
    En tant qu'utilisateur <systemitem class="username">root</systemitem>, ajoutez le à votre
    <filename>/etc/ld.so.conf</filename>:</para>
<screen role="root">
<userinput>cat &gt;&gt; /etc/ld.so.conf &lt;&lt; EOF
<literal># Begin texlive &texlive-year; addition
/opt/texlive/&texlive-year;/lib
# End texlive &texlive-year; addition</literal>
EOF</userinput>
</screen>
    <note>
      <para>
        Depuis la version 2015, une installation complête demande que des commandes de texlive
        soient lancées en tant qu'utilisateur root, donc nous exporterons la variable
        TEXARCH pour que <systemitem class="username">root</systemitem> l'utilise.
      </para>
    </note>
    <para>
      Maintenant, en tant qu'utilisateur normal:
    </para>
<screen>
<userinput>export TEXARCH=$(uname -m | sed -e 's/i.86/i386/' -e 's/$/-linux/') &amp;&amp;
mkdir texlive-build &amp;&amp;
cd texlive-build    &amp;&amp;
../configure                                        \
    --prefix=/opt/texlive/&texlive-year;                      \
    --bindir=/opt/texlive/&texlive-year;/bin/$TEXARCH         \
    --datarootdir=/opt/texlive/&texlive-year;                 \
    --includedir=/opt/texlive/&texlive-year;/include          \
    --infodir=/opt/texlive/&texlive-year;/texmf-dist/doc/info \
    --libdir=/opt/texlive/&texlive-year;/lib                  \
    --mandir=/opt/texlive/&texlive-year;/texmf-dist/doc/man   \
    --disable-native-texlive-build                  \
    --disable-static --enable-shared                \
    --with-system-cairo                             \
    --with-system-fontconfig                        \
    --with-system-freetype2                         \
    --with-system-gmp                               \
    --with-system-graphite2                         \
    --with-system-harfbuzz                          \
    --with-system-icu                               \
    --with-system-libgs                             \
    --with-system-libpaper                          \
    --with-system-libpng                            \
    --with-system-mpfr                              \
    --with-system-pixman                            \
    --with-system-poppler                           \
    --with-system-xpdf                              \
    --with-system-zlib                              \
    --with-banner-add=" - BLFS" &amp;&amp;
make</userinput>
</screen>
    <para>Pour tester le résultat, tapez : <command>make check</command>
    Un test de web2c, dvipng et ttf2pk2 seront passé ("SKIP") car kpathsea
    n'est pas encore installé.</para>
    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>:</para>
<screen role="root">
<userinput>make install-strip &amp;&amp;
make texlinks &amp;&amp;
ldconfig &amp;&amp;
mkdir -pv /opt/texlive/&texlive-year;/tlpkg/TeXLive/ &amp;&amp;
install -v -m444 ../texk/tests/TeXLive/* /opt/texlive/&texlive-year;/tlpkg/TeXLive/</userinput>
</screen>
    <note>
      <para>
        Lancez <command>make texlinks</command> seulement une fois. S'il est relancé,
        il peut changer tous les liens symboliques des programmes pour qu'ils pointent sur eux-même
        et soient inutiles.
      </para>
    </note>
    <para>Et maintenant, installez les fichiers supplémentaires en tant qu'utilisateur
    <systemitem class="username">root</systemitem>:</para>
<screen role="root">
<userinput>tar -xf ../../texlive-&texmf-version;-texmf.tar.xz -C /opt/texlive/&texlive-year; --strip-components=1</userinput>
</screen>
    <para>Restez en utilisateur <systemitem class="username">root</systemitem>,
    initialisez le nouveau système (les commandes
    <command>fmtutil-sys --all</command> et <command>mtxrun --generate</command>
    produiront <emphasis>beaucoup</emphasis> de lignes d'affichage):</para>
<screen role="root">
<userinput>mktexlsr &amp;&amp;
fmtutil-sys --all &amp;&amp;
mtxrun --generate</userinput>
</screen>
    <para> Vous pouvez maintenant faire <xref linkend="asymptote"/>,
    <xref linkend="biber"/> et  / ou <xref linkend="xindy"/> si vous souhaitez les installer.
   </para>
  </sect2>
  <sect2 role="commands">
    <title>Explications des commandes</title>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
     href="../../xincludes/tex-prefix.xml"/>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
     href="../../xincludes/tex-lib.xml"/>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/static-libraries.xml"/>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/tex-shared.xml"/>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/tex-system.xml"/>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/tex-xpdf.xml"/>
    <para>
      <option>--without-x</option> : utilisez cela si vous n'avez pas installé Xorg.
    </para>
    <para>
      <parameter>make texlinks</parameter> : cela lance le script texlinks.sh pour créer les liens
      symboliques depuis les formats du moteur. En pratique, plusieurs des cibles comme
      <command>xetex</command> sont maintenant des binaires séparés et pour ceux la signalera "fichiers existants" ("file already exists").
    </para>
    <para>
      <parameter>tar -xf texlive-&texmf-version;-texmf.tar.xz -C /opt/texlive/&texlive-year; --strip-components=1</parameter>:
      L'archive contient les fichiers pour le répertoire texmf-dist, et à cause de sa taille nous ne voulons pas
      gaspiller de temps et d'espace à le déballer et ensuite copier les fichiers.
    </para>
    <para>
      <parameter>install -v -m444 ../texk/tests/TeXLive/*
      /opt/texlive/$texlive-year;/tlpkg/TeXLive/</parameter>: cela met les modules perl
      <filename>TLConfig.pm</filename> et <filename>TLUtils.pm</filename>
      dans le repertoire ou l'installateur binaire les place - c'est au début du PATH perl
      @INC@ dans texlive quand l'installation utilise les paramêtres de configuration suivant.
      Sans ces modules, texlive est inutilisable.
    </para>
    <para>
      <parameter>mktexlsr</parameter>: Crée un fichier <filename>ls-R</filename> qui liste ce qui a été installé -
      c'est utilisé par kpathsea pour trouver les fichiers.
    </para>
    <para>
      <parameter>fmtutil-sys --all</parameter>: Cela initialise les formats TeX,
      les bases de Metafont et les memoires de Metapost.
    </para>
    <para>
      <parameter>mtxrun --generate</parameter>: Cela initialise le système ConTeXt.
    </para>
  </sect2>
  <sect2 role="content">
    <title>Contenu</title>
    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>
      <seglistitem>
        <seg>Plus de 300 binaires et liens symboliques vers des scripts</seg>
        <seg>libkpathsea.so, libptexenc.so, libsynctex.so, libtexlua52.so,
        libtexluajit.so</seg>
        <seg>/opt/texlive/&texlive-year;/bin, /opt/texlive/&texlive-year;/include,
        /opt/texlive/&texlive-year;/lib, /opt/texlive/&texlive-year;/texmf-dist</seg>
      </seglistitem>
    </segmentedlist>
    <variablelist>
      <bridgehead renderas="sect3">Description courte</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      <varlistentry id="texlive-programs">
        <term><command>Programmes de TeX&nbsp;</command></term>
        <listitem>
          <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
          href="../../xincludes/texprogs.xml"/>
          <indexterm zone="texlive texlive-programs">
            <primary sortas="b-texlive-programs">Programmes de TeX Live</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libkpathsea">
        <term><filename class="libraryfile">libkpathsea.so</filename></term>
        <listitem>
          <para>
            (kpathsearch) existe pour rechercher un fichier dans une liste de répertoires et
             est utilisé par <command>kpsewhich</command>.
          </para>
          <indexterm zone="texlive libkpathsea">
            <primary sortas="c-libkpathsea">libkpathsea.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libptexenc">
        <term><filename class="libraryfile">libptexenc.so</filename></term>
        <listitem>
          <para>
            est une bibliothèque pour pTeX japonnais (publishing TeX).
          </para>
          <indexterm zone="texlive libptexenc">
            <primary sortas="c-libptexenc">libptexenc.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libsynctex">
        <term><filename class="libraryfile">libsynctex.so</filename></term>
        <listitem>
          <para>
            est la bibliothèque d'analyse SyncTeX (Synchronize TeXnology).
          </para>
          <indexterm zone="texlive libsynctex">
            <primary sortas="c-libsynctex">libsynctex.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libtexlua52">
        <term><filename class="libraryfile">libtexlua52.so</filename></term>
        <listitem>
          <para>
            fournit Lua 5.2, modifié pour fonctionner avec LuaTeX.
          </para>
          <indexterm zone="texlive libtexlua52">
            <primary sortas="c-libtexlua52">libtexlua52.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libtexluajit">
        <term><filename class="libraryfile">libtexluajit.so</filename></term>
        <listitem>
          <para>
            fournit LuaJIT, modifié pour fonctionner avec LuaJITTeX.
          </para>
          <indexterm zone="texlive libtexluajit">
            <primary sortas="c-libtexluajit">libtexluajit.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect2>
</sect1>
