<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  <!ENTITY texlive-source-download-http " ">
  <!ENTITY texlive-source-download-ftp  "ftp://tug.org/texlive/historic/&texlive-year;/texlive-&texlive-version;-source.tar.xz">
  <!ENTITY texlive-source-md5sum        "09ee265ff51637827559affc7304078c">
  <!ENTITY texlive-source-size          "40 Mo">
  <!ENTITY texlive-buildsize            "923 Mo (if starting from pass 1)">
  <!ENTITY texlive-time                 "9.0 SBU">
]>
<sect1 id="texlive" xreflabel="TeX-Live-&texlive-version;-source">
  <?dbhtml filename="texlive.html"?>
  <sect1info>
    <othername>$LastChangedBy&nbsp;: bdubbs $</othername>
    <date>$Date&nbsp;: 2012-09-22 18:38:01 +0200 (Sat, 22 Sep 2012) $</date>
  </sect1info>
  <title>TeX-Live-&texlive-version;</title>
  <indexterm zone="texlive">
    <primary sortas="a-texlive">texlive</primary>
  </indexterm>
  <sect2 role="package">
    <title>Introduction à TeX Live depuis les sources</title>
    <para>Après l'installation d'une construction partiel de Tex (ou alternativement une installation
    de la version binaire), ici nous construirons tous Tex Live depuis les sources (excepté <application>biber</application>
     qui n'est pas founie dans l'archive des sources et devra être traité séparément).
    </para>
   &lfs76_checked;
    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&texlive-source-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&texlive-source-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &texlive-source-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &texlive-source-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &texlive-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &texlive-time;</para>
      </listitem>
    </itemizedlist>
      
    <bridgehead renderas="sect3">Dépendances de TeX Live</bridgehead>
    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
     Soit <xref linkend="texpass1"/> ou <xref linkend="tl-installer"/>
       et  <xref linkend="clisp"/>
      (pour construire <command>xindy</command> qui est un procésseur d'indexage pour la création
       d'index multi-langage).
    </para>
    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="gs"/> (pour dvisvgm, utilisé par asymptote qui fournit une trousse à outils
      mathématique orrientée coordonnées pour le dessin technique),
      <xref linkend="x-window-system"/>
    </para>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
     href="../../xincludes/texrecommendlibs.xml"/>
    <bridgehead renderas="sect4">Facultative</bridgehead>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
     href="../../xincludes/texoptional.xml"/>
    <bridgehead renderas="sect4">Dépendances d'éxécution</bridgehead>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
     href="../../xincludes/texruntime.xml"/>
    <para condition="html" role="usernotes">Notes utilisaeur:
    <ulink url="&blfs-wiki;/texlive"/></para>
  </sect2>
  <sect2 role="installation">
    <title>Installation de TeX Live</title>
    <para>si vous avez démarré avec l'installateur binaire, ces instructions écraseront les programmes
    installés.</para>
<screen role="root">
<userinput>export TEXARCH=$(uname -m | sed -e 's/i.86/i386/' -e 's/$/-linux/') &amp;&amp;
mkdir texlive-build &amp;&amp;
cd texlive-build    &amp;&amp;
../configure                                        \
    --prefix=/opt/texlive/&texlive-year;                      \
    --bindir=/opt/texlive/&texlive-year;/bin/$TEXARCH         \
    --datarootdir=/opt/texlive/&texlive-year;                 \
    --includedir=/usr/include                       \
    --infodir=/opt/texlive/&texlive-year;/texmf-dist/doc/info \
    --libdir=/usr/lib                               \
    --mandir=/opt/texlive/&texlive-year;/texmf-dist/doc/man   \
    --disable-native-texlive-build                  \
    --disable-static --enable-shared                \
    --with-system-cairo                             \
    --with-system-fontconfig                        \
    --with-system-freetype2                         \
    --with-system-graphite2                         \
    --with-system-harfbuzz                          \
    --with-system-icu                               \
    --with-system-libgs                             \
    --with-system-libpng                            \
    --with-system-pixman                            \
    --with-system-poppler                           \
    --with-system-xpdf                              \
    --with-system-zlib                              \
    --with-banner-add=" - BLFS"                     \
    --enable-xindy                                  \
    --enable-xindy-rules                            \
    --enable-xindy-doc                              \
    --with-clisp-runtime=system</userinput>
</screen>
    <para>Asymptote a été configuré séparément. Il arrive avec sa propre copie des sources de gc, et utilisera seulement
    la version système si les sources locales sont supprimées.
    </para>
<screen>
<userinput>pushd ../utils/asymptote &amp;&amp;
rm -v gc-7.4.0.tar.gz &amp;&amp;
echo "ac_cv_lib_m_sqrt=yes"     >config.cache &amp;&amp;
echo "ac_cv_lib_z_deflate=yes" >>config.cache &amp;&amp;
./configure LIBS="-ltirpc "                         \
    --prefix=/opt/texlive/&texlive-year;/                     \
    --bindir=/opt/texlive/&texlive-year;/bin/$TEXARCH     \
    --enable-texlive-build                          \
    --datarootdir=/opt/texlive/&texlive-year;/texmf-dist      \
    --infodir=/opt/texlive/&texlive-year;/texmf-dist/doc/info \
    --mandir=/opt/texlive/&texlive-year;/texmf-dist/doc/man   \
    --cache-file=config.cache &amp;&amp; &amp;&amp;
popd &amp;&amp;
unset TEXARCH &amp;&amp;
make &amp;&amp;
make -C ../utils/asymptote</userinput>
</screen>
     <para>Pour tester les résultats, lancez&nbsp;:  <command>make -k chec &amp;&amp;
     make -C utils/asymptote check</command>.</para>
  
    <para>Si vous avez utilisez l'installateur binaire, vous devrez faire une installation complète.
     En tant qu'utilisateur <systemitem class="username">root</systemitem>:</para>
<screen>
<userinput role="nodump">make install &amp;&amp;
make -C ../utils/asymptote install</userinput>
</screen>
    <para>Pour les gens qui ont suivi le chemin LFS et construit depuis les souces il est seulement
     nécessaire d'installer <application>xindy</application> et
    <application>asy</application>, alors, en tant qu'utilisateur
    <systemitem class="username">root</systemitem>:</para>
<screen>
<userinput role="root">make -C utils/xindy install &amp;&amp;
make -C ../utils/asymptote install</userinput>
</screen>
    <para>une partie du paquet demande à être reconstruite:
    <xref linkend="biber"/>.</para>
</sect2>
  <sect2 role="commands">
    <title>Explications des commandes</title>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
     href="../../xincludes/tex-prefix.xml"/>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
     href="../../xincludes/tex-lib.xml"/>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/static-libraries.xml"/>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/tex-shared.xml"/>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/tex-system.xml"/>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/tex-xpdf.xml"/>
    <para>
      <parameter>echo "ac_cv_lib_m_sqrt=yes" ... LIBS="-ltirpc " &gt;config.cache,
      ... --cache-file=config.cache</parameter> : Les scripts configure dans
      <application>TeX Live</application> sont rares. Asymptote ne doit pas seulement être configuré
      et construit séparément, le script configure échoue à trouver la bibliothèque partagée
      <filename class="libraryfile">libtirpc.so</filename>.  En passant cela dans 
      LIBS casse les tests pour (statique) libm et (partagée) libz, alors nous avons corrigé cela, selon
      la même façon que pour la compilation croisée.
    </para>
    <para>
      <option>--without-x</option>: utilisez cela (et oubliez le configure et make dans
      <filename>utils/asymptote</filename> si vous n'avez pas installé.
    </para>
  </sect2>
  <sect2 role="content">
    <title>Contenu</title>
    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèque installée</segtitle>
      <segtitle>Répertoires installés</segtitle>
      <seglistitem>
        <seg>plus de 300 binaires et liens symboliques vers des scripts</seg>
        <seg>libkpathsea.so, libptexenc.so</seg>
        <seg>/opt/texlive, /usr/include/kpathsea, /usr/include/ptexenc</seg> 
      </seglistitem>
    </segmentedlist>
    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      <varlistentry id="texlive-programs">
        <term><command>Programmes&nbsp;TeX</command></term>
        <listitem>
          <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
          href="../../xincludes/texprogs.xml"/>
          <indexterm zone="texlive texlive-programs">
            <primary sortas="b-texlive-programs">TeX Live programs</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libkpathsea">
        <term><filename class="libraryfile">libkpathsea.so</filename></term>
        <listitem>
          <para>
            (kpathsearch) existe pour regarder un fichier dans une liste de répertoires.
          </para>
          <indexterm zone="texlive libkpathsea">
            <primary sortas="c-libkpathsea">libkpathsea.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libptexenc">
        <term><filename class="libraryfile">libptexenc.so</filename></term>
        <listitem>
          <para>
            est une bibliothèque pour pTeX Japonnais (publication TeX).
          </para>
          <indexterm zone="texlive libptexenc">
            <primary sortas="c-libptexenc">libptexenc.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect2>
</sect1>
