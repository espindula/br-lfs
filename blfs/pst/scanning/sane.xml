<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  
  <!ENTITY sane-be-download-http "http://fossies.org/linux/misc//sane-backends-&sane-version;.tar.gz">
  <!ENTITY sane-be-download-ftp  " ">
  
  
  <!ENTITY sane-be-md5sum        "1ca68e536cd7c1852322822f5f6ac3a4">
  <!ENTITY sane-be-size          "5.6 Mo">
  <!ENTITY sane-be-buildsize     "97 Mo">
  <!ENTITY sane-be-time          "1 SBU">
  <!ENTITY sane-fe-download-http "http://alioth.debian.org/frs/download.php/file/1140/sane-frontends-&sane-fe-version;.tar.gz">
  <!ENTITY sane-fe-download-ftp  "ftp://ftp2.sane-project.org/pub/sane/sane-frontends-&sane-fe-version;.tar.gz">
  <!ENTITY sane-fe-md5sum        "c63bf7b0bb5f530cf3c08715db721cd3">
  <!ENTITY sane-fe-size          "231 Ko">
  <!ENTITY sane-fe-buildsize     "3.0 Mo">
  <!ENTITY sane-fe-time          "moins de 0.1 SBU">
]>
<sect1 id="sane" xreflabel="SANE-&sane-version;">
  <?dbhtml filename="sane.html"?>
  <sect1info>
    <othername>$LastChangedBy&nbsp;: bdubbs $</othername>
    <date>$Date&nbsp;: 2012-11-05 17:24:47 +0100 (Mon, 05 Nov 2012) $</date>
  </sect1info>
  <title>SANE-&sane-version;</title>
  <indexterm zone="sane">
    <primary sortas="a-SANE">SANE</primary>
  </indexterm>
  <sect2 role="package">
    <title>Introduction à SANE</title>
    <para><application>SANE</application> est le nom court pour
    <foreignphrase>Scanner Access Now Easy</foreignphrase>. Cependant, l'accès
    au scanner est loin d'être facile, vu que chaque fabricant a ses propres
    protocoles. Le seul protocole connu qui devrait apporter un peu d'unité dans
    ce chaos est l'interface TWAIN, mais c'est trop imprécis pour permettre un
    environnement de numérisation stable. <application>SANE</application> est
    donc fourni avec son propre protocole et on ne peut pas utiliser les pilotes
    du fabricant.</para>
    <para><application>SANE</application> est divisé en fondations et en
    interfaces. Les fondations sont des pilotes des scanners et des appareils
    photo. Les interfaces sont des interfaces utilisateur pour accéder aux
    fondations.</para>
   &lfs76_checked;
    
    <bridgehead renderas="sect3">Information sur le paquet des fondations</bridgehead>
    <itemizedlist spacing='compact'>
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&sane-be-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&sane-be-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &sane-be-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &sane-be-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &sane-be-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &sane-be-time;</para>
      </listitem>
    </itemizedlist>
    <bridgehead renderas="sect3">Informations sur le paquet d'interfaces</bridgehead>
    <itemizedlist spacing='compact'>
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&sane-fe-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&sane-fe-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Downlaod MD5 sum: &sane-fe-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &sane-fe-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &sane-fe-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &sane-fe-time;</para>
      </listitem>
    </itemizedlist>
 
    <bridgehead renderas="sect3">Dépendances de SANE</bridgehead>
    <bridgehead renderas="sect4">Facultatives (Back Ends)</bridgehead>
    <para role="optional">
      <xref linkend="avahi"/>,
      <xref linkend="cups"/>,
      <xref linkend="libjpeg"/>,
      <xref linkend="libtiff"/>,
      <xref linkend="libusb"/>,
      <ulink url="http://www.net-snmp.org/">Net-SNMP</ulink>,
      <ulink url="http://cyberelk.net/tim/libieee1284/">libieee1284</ulink>,
      <ulink url="http://www.gphoto.org/">libgphoto2</ulink>,
      <ulink url="http://linuxtv.org/downloads/v4l-utils/">Video4Linux</ulink>, et
      <xref linkend="texlive"/>
    </para>
    <bridgehead renderas="sect4">Facultatives (Front Ends)</bridgehead>
    <para role="optional">
      <xref linkend="x-window-system"/>,
      <xref linkend="gtk2"/>, et
      <xref linkend="gimp"/>
    </para>
    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/sane"/></para>
  </sect2>
  <sect2 role="kernel" id='sane-kernel'>
    <title>Configuration du noyau, des pilotes et des paquets supplémentaires</title>
    <indexterm zone="sane sane-kernel">
      <primary sortas="d-Scanning-devices">Scanning devices</primary>
    </indexterm>
    <para>Pour accéder à votre scanner, vous aurez probablement besoin les
    pilotes associés du noyau et/ou les paquets de support supplémentaires. Un 
    scanner SCSI aura besoin des pilotes SCSI, un scanner en port parallèle a 
    besoin du support du port parallèle (vous devriez utiliser les modes
    EPP amélioré) et peut-être <ulink
    url="http://cyberelk.net/tim/libieee1284/">libieee1284</ulink> et un scanner
    USB aura besoin du paquet <xref linkend="libusb"/>. Pour les périphériques HP, vous aurez besoin de <ulink
    url="http://sourceforge.net/projects/hplip/files/hplip/">hplip</ulink>. Assurez-vous d'avoir
    correctement configuré les pilotes nécessaires pour accéder aux
    périphériques.</para>
  </sect2>
  <sect2 role="installation">
    <title>Installation de SANE</title>
    <sect3>
      <title>Installation des fondations de SANE</title>
      <note>
        <para>
          vous pouvez ignorer sans problème tous les messages affichés à l'écran
          quand vous déballez le paquet.
        </para>
      </note>
      <para>Le démon <application>SANE</application> devrait se lancer avec son 
      propre groupe. Créez ce groupe en exécutant les commandes suivantes en tant
      qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>
<screen>
<userinput>groupadd -g 70 scanner</userinput>
</screen>
      <note><para>L'utilisateur de construction <application>SANE</application>-backends
      doit être membre du groupe  <systemitem class="groupname">scanner</systemitem>
      avant de commencer. Après que vous ayez ajouté l'utilisateur construisant le paquet
      au groupe  <systemitem class="groupname">scanner</systemitem>, tapez la commande
      suivante pour créer un nouveau shell :
      </para>
<screen>
<userinput>su $(whoami)</userinput>
</screen>
        <para>
          Vérifiez la sortie de la commande <userinput>groups</userinput> et assurez vous que
          l'utilisateur est membre du groupe 
          <systemitem class="groupname">scanner</systemitem>.
        </para>
      </note>
      <para>Pour un scanner USB, si vous êtes lié à <xref linkend="libusb"/>,
      ajouter le paramètre de configuration --enable-libusb_1_0. Installez
      les fondations de <application>SANE</application> en
      lançant les commandes suivantes&nbsp;:</para>
            
<screen>
<userinput>./configure --prefix=/usr                                    \
            --sysconfdir=/etc                                \
            --localstatedir=/var                             \
            --with-docdir=/usr/share/doc/sane-backend-&sane-version; \
            --with-group=scanner                             &amp;&amp;
make                                                         &amp;&amp;
exit</userinput>
</screen>
      <para>Si vous voulez tester les résultats, quelques fichiers doivent être corrigés :</para>
<screen>
<userinput>sed -i -e 's/Jul 31 07:52:48/Oct  7 08:58:33/'      \
       -e 's/1.0.24git/1.0.24/'                     \
       testsuite/tools/data/db.ref                  \
       testsuite/tools/data/html-mfgs.ref           \
       testsuite/tools/data/usermap.ref             \
       testsuite/tools/data/html-backends-split.ref \
       testsuite/tools/data/udev+acl.ref            \
       testsuite/tools/data/udev.ref</userinput>
</screen>
<para>Pour tester les résultats, tapez :  <command>make check</command>.</para>
      <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>
<screen role="root">
<userinput>make install                                         &amp;&amp;
install -m 644 -v tools/udev/libsane.rules           \
                  /etc/udev/rules.d/65-scanner.rules &amp;&amp;
chgrp -v scanner  /var/lock/sane</userinput>
</screen>
      <para>En ayant le scanner allumé, lancez <command>scanimage -L</command>
      et le nom et le chemin du périphérique apparaîtront, bien sur, vous devez configurer le pilote, avant de lancer les tests.</para>
    </sect3>
    <sect3>
      <title>Installation des interfaces de SANE</title>
      <para>Le paquet <application>SANE</application>-frontends inclus
      les interfaces graphiques <command>xscanimage</command> et
      <command>xcam</command> ainsi qu'une interface en ligne de commande
      <command>scanadf</command>. Vous n'avez pas besoin de ce paquet si vous
      souhaitez utiliser une des interfaces graphiques plus avancées comme
      <xref linkend="xsane"/>. Pour une liste des paquets d'interface, 
      voir <ulink url="http://www.sane-project.org/sane-frontends.html"/>.</para>
      <para>Pour installer <application>SANE</application>-frontends,
      utilisez les commandes suivantes&nbsp;:</para>
<screen>
<userinput>sed -i -e "/SANE_CAP_ALWAYS_SETTABLE/d" src/gtkglue.c &amp;&amp;
./configure --prefix=/usr &amp;&amp;
make</userinput>
</screen>
      <para>Ce paquet n'est pas fourni avec une suite de tests.</para>
      <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>
<screen role="root">
<userinput>make install &amp;&amp;
install -v -m644 doc/sane.png xscanimage-icon-48x48-2.png \
    /usr/share/sane</userinput>
</screen>
      <para>Si vous avez lié <application>GIMP</application> à la construction
      et si vous souhaitez que <application>GIMP</application> utilise
      <command>xscanimage</command> comme plugin de numérisation, exécutez les 
      commandes suivantes en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>
<screen role="root">
<userinput>ln -v -s ../../../../bin/xscanimage /usr/lib/gimp/2.0/plug-ins</userinput>
</screen>
      <note>
        <para>
          Si le plugin <command>xscanimage</command> est désactivé du menu de <application>GIMP</application>, pour l'activer
          , "créez" une image blanche en utilisant le menu ou Ctrl-N. Après cela, il sera
          activé.
        </para>
      </note>
</sect3>
  </sect2>
  <sect2 role="commands">
    <title>Explication des commandes</title>
    <para><parameter>--sysconfdir=/etc</parameter>&nbsp;: Ce paramètre installe
    les fichiers de configuration dans <filename class="directory">/etc/sane.d</filename>
    et non dans <filename class="directory">/usr/etc/sane.d</filename>.</para>
    <para><parameter>--with-group=scanner</parameter>: Ce paramètre fait que le répertoire
    créé pour les fichiers de verrou doit appartenir au groupe
    <systemitem class="groupname">scanner</systemitem> au lieu du groupe par défaut
    <systemitem class="groupname">uucp</systemitem>.</para>
    <para><command>exit</command>: Cette commande est utilisée pour sortir
    du shell créé par la commande <command>su</command>.</para>
  </sect2>
  <sect2 role="configuration">
    <title>Configuration de SANE</title>
    <sect3 id="sane-config">
      <title>Fichiers de configuration</title>
      <para><filename>/etc/sane.d/*.conf</filename></para>
      <indexterm zone="sane sane-config">
        <primary sortas="e-etc-sane.d-conf">/etc/sane.d/*.conf</primary>
      </indexterm>
    </sect3>
    <sect3>
      <title>Informations de configuration</title>
      <sect4>
        <title>Configuration des fondations</title>
        <para>Les fichiers de configuration des fondations se trouvent dans
        <filename class='directory'>/etc/sane.d</filename>. Vous pouvez des
        informations sur la configuration des diverses fondations en utilisant
        la page de man(5) de la fondation désirée. Lancez
        <command>man sane-<replaceable>&lt;fondation&gt;</replaceable></command>,
        en remplaçant par la fondation désirée.</para>
        <para>Ajoutez les utilisateurs désirés au groupe <systemitem
        class="groupname">scanner</systemitem> group.</para>
	
      <para>Si vous voulez accéder à un scanner réseau, ajoutez deux lignes dans
        <filename>net.conf</filename>, en tant qu'utilisateur <systemitem class="username">root</systemitem> 
        (soyez certain de remplacer &lt;server_ip&gt; par la bonne valeur):</para>
<screen role="root">
<userinput>cat &gt;&gt; /etc/sane.d/net.conf &lt;&lt; "EOF"
connect_timeout = 60
&lt;server_ip&gt;
EOF</userinput>
</screen>
        <para>Coté du serveur, ajoutez l'ip du client dans la liste d'accès de
        <filename>/etc/sane.d/saned.conf</filename>, redémarrez le démon
        <command>saned</command>, et soyez certain que le pare-feu, s'il y en a un, est
	ouvert pour le client.</para>
      </sect4>
      <sect4>
        <title>Configuration de l'interface</title>
        <para>
          Si vous utilisez un environnement de bureau comme <application>Gnome</application>
          ou <application>KDE</application> vous devrez créer un fichier
          <filename>xscanimage.desktop</filename> pour que
          <application>xscanimage</application> apparaisse dans le menu.
          En tant qu'utilisateur <systemitem class="username">root</systemitem>:
        </para>
<screen role="root">
<userinput>mkdir -pv /usr/share/{applications,pixmaps}               &amp;&amp;
cat &gt; /usr/share/applications/xscanimage.desktop &lt;&lt; "EOF" &amp;&amp;
[Desktop Entry]
Encoding=UTF-8
Name=XScanImage - Scanning
Comment=Acquire images from a scanner
Exec=xscanimage
Icon=xscanimage
Terminal=false
Type=Application
Categories=Application;Graphics
EOF
ln -svf ../sane/xscanimage-icon-48x48-2.png /usr/share/pixmaps/xscanimage.png</userinput>
</screen>
      </sect4>
      <sect4>
   <title>Informations générales</title>
        <para>Pour des informations générales sur la configuration et l'utilisation
        de <application>SANE</application>, voir <command>man sane</command>.
        Linux-2.6.x apporte des problèmes spéciaux en matière d'image. Voir
        <ulink url="http://www.sane-project.org/README.linux"/> pour des
        informations sur l'utilisation de <application>SANE</application> avec
        le noyau Linux-2.6.x. Pour des informations sur les périphériques 
        scanner USB, lancez <command>man sane-usb</command>. Pour des
        informations sur les périphériques SCSI, lancez <command>man sane-scsi</command>.</para>
      </sect4>
      <sect4>
        <title>Configuration et paramétrage du démon 'saned'</title>
        <para>Le démon <command>saned</command> n'est pas conçu pour être
        utilisé pour des clients non fiables. Vous devriez fournir une protection
        <xref linkend="fw-firewall"/> 
        pour vous assurer que seuls des clients de confiance accèdent au démon.
        Vu la complexité des exigences de sécurité pour être sûr que seuls les 
        clients de confiance accèdent au démon, BLFS ne fournit pas 
        d'instructions pour configurer le démon <command>saned</command>. Si
        vous désirez rendre le démon disponible, assurez-vous de fournir la
        sécurité adaptée, de configurer votre fichier <filename>[x]inetd.conf</filename> 
        et d'envoyer un <userinput>SIGHUP</userinput> au démon [x]inetd. 
        Vous pouvez trouver de bonnes informations sur le paramétrage et la
        sécurisation du démon <command>saned</command> sur
        <ulink url="http://penguin-breeder.org/sane/saned/"/>.</para>
      </sect4>
    </sect3>
  </sect2>
  <sect2 role="content">
    <title>Contenu</title>
    <bridgehead renderas="sect4">Fondements&nbsp;:</bridgehead>
    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>
      <seglistitem>
        <seg>gamma4scanimage, sane-config, saned, sane-find-scanner,
        et scanimage</seg>
        <seg>libsane.so et numerous scanner backend modules</seg>
        <seg>/etc/sane.d, /usr/include/sane, /usr/lib/sane, /usr/share/sane,
        et /usr/share/doc/sane-&sane-version;</seg>
      </seglistitem>
    </segmentedlist>
    <bridgehead renderas="sect4">Interfaces&nbsp;:</bridgehead>
    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèque installée</segtitle>
      <segtitle>Répertoires installés</segtitle>
      <seglistitem>
        <seg>scanadf, xcam, et xscanimage</seg>
        <seg><application>GIMP</application> plugin embedded in
        <command>xscanimage</command></seg>
        <seg>Aucun</seg>
      </seglistitem>
    </segmentedlist>
    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      <varlistentry id="gamma4scanimage">
        <term><command>gamma4scanimage</command></term>
        <listitem>
          <para>crée une table gamma au format attendu par
          <command>scanimage</command>.</para>
          <indexterm zone="sane gamma4scanimage">
            <primary sortas="b-gamma4scanimage">gamma4scanimage</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="sane-config-prog">
        <term><command>sane-config</command></term>
        <listitem>
          <para>est un outil utilisé pour déterminer les drapeaux du compilateur
          et de l'éditeur de liens qui devraient être utilisés pour compiler et
          lier <application>SANE</application>.</para>
          <indexterm zone="sane sane-config-prog">
            <primary sortas="b-sane-config">sane-config</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="saned">
        <term><command>saned</command></term>
        <listitem>
          <para>est le démon <application>SANE</application> qui permet à un
          client distant d'accéder aux périphériques d'acquisition d'images
          disponibles sur l'hôte local.</para>
          <indexterm zone="sane saned">
            <primary sortas="b-saned">saned</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="sane-find-scanner">
        <term><command>sane-find-scanner</command></term>
        <listitem>
          <para>est un outil en ligne de commande pour chercher des scanners
          SCSI et USB et pour déterminer leurs fichiers de périphérique. Son
          premier objectif est d'assurer que les scanners puissent être détectés
          par les fondations <application>SANE</application>.</para>
          <indexterm zone="sane sane-find-scanner">
            <primary sortas="b-sane-find-scanner">sane-find-scanner</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="scanadf">
        <term><command>scanadf</command></term>
        <listitem>
          <para>est une interface en ligne de commande pour contrôler des
          des périphériques d'acquisition d'image équipés d'un alimenteur
          automatique de document (<foreignphrase>automatic document feeder</foreignphrase>
          (ADF).</para>
          <indexterm zone="sane scanadf">
            <primary sortas="b-scanadf">scanadf</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="scanimage">
        <term><command>scanimage</command></term>
        <listitem>
          <para>est une interface en ligne de commande pour numériser à partir
          de périphériques d'acquisition d'image tels que des scanners à plat 
          ou des appareils photos. On l'utilise aussi pour lister les périphériques
          fondations disponibles.</para>
          <indexterm zone="sane scanimage">
            <primary sortas="b-scanimage">scanimage</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="xcam">
        <term><command>xcam</command></term>
        <listitem>
          <para>est une interface d'appareil photo graphique pour 
          <application>SANE</application>.</para>
          <indexterm zone="sane xcam">
            <primary sortas="b-xcam">xcam</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="xscanimage">
        <term><command>xscanimage</command></term>
        <listitem>
          <para>est une interface graphique pour la manipulation d'images.</para>
          <indexterm zone="sane xscanimage">
            <primary sortas="b-xscanimage">xscanimage</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libsane">
        <term><filename class='libraryfile'>libsane.so</filename></term>
        <listitem>
          <para>est l'interface de programmation de l'application utilisée pour
          communiquer entre des interfaces et des fondations.</para>
          <indexterm zone="sane libsane">
            <primary sortas="c-libsane">libsane.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libsane-module">
        <term><filename class='libraryfile'>libsane-*.so</filename></term>
        <listitem>
          <para>ces modules sont des plugins de bibliothèque de numérisation des
          fondations utilisées comme interface avec les périphériques de
          numérisation. See
          <ulink url="http://www.sane-project.org/sane-supported-devices.html"/>
          for a list of supported backends.</para>
          <indexterm zone="sane libsane-module">
            <primary sortas="c-libsane-module">libsane-*.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect2>
</sect1>
