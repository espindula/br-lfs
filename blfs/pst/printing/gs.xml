<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  <!ENTITY gs-download-http
  "http://downloads.ghostscript.com/public/ghostscript-&gs-version;.tar.bz2">
  <!ENTITY gs-download-ftp  " ">
  <!ENTITY gs-md5sum        "46f9ebe40dc52755287b30704270db11">
  <!ENTITY gs-size          "28 Mo">
  <!ENTITY gs-buildsize     "195 Mo (y compris l'installation de libgs.so et de deux archives de police)">
  <!ENTITY gs-time          "2.5 SBU (includes building and installing libgs.so)">
  <!ENTITY gs-standard-fonts-download
  "&sourceforge-repo;/gs-fonts/ghostscript-fonts-std-8.11.tar.gz">
  <!ENTITY gs-standard-fonts-md5sum   "6865682b095f8c4500c54b285ff05ef6">
  <!ENTITY gs-standard-fonts-size     "3.7 Mo">
  <!ENTITY gs-other-fonts-download
  "&sourceforge-repo;/gs-fonts/gnu-gs-fonts-other-6.0.tar.gz">
  <!ENTITY gs-other-fonts-md5sum      "33457d3f37de7ef03d2eea05a9e6aa4f">
  <!ENTITY gs-other-fonts-size        "796 Ko">
]>

<sect1 id="gs" xreflabel="GPL-Ghostscript-&gs-version;">
  <?dbhtml filename="gs.html"?>

  <sect1info>
    <othername>$LastChangedBy&nbsp;: randy $</othername>
    <date>$Date&nbsp;: 2012-12-19 20:57:20 +0100 (Wed, 19 Dec 2012) $</date>
  </sect1info>

  <title>GPL-Ghostscript-&gs-version;</title>

  <indexterm zone="gs">
    <primary sortas="a-GPL-Ghostscript">GPL Ghostscript</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à Ghostscript</title>

    <para><application>Ghostscript</application> est un calculateur bidirectionnel
    de données PostScript offrant la possibilité de produire du PostScript sur
    différentes cibles.</para>

   &lfs72_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&gs-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&gs-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &gs-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &gs-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &gs-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &gs-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>

    <itemizedlist spacing="compact">
      <title>Polices standards</title>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&gs-standard-fonts-download;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &gs-standard-fonts-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &gs-standard-fonts-size;</para>
      </listitem>
    </itemizedlist>

    <itemizedlist spacing="compact">
      <title>Autres polices</title>
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&gs-other-fonts-download;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &gs-other-fonts-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &gs-other-fonts-size;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de Ghostscript</bridgehead>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="expat"/>,
      <xref linkend="freetype2"/>,
      <xref linkend="libjpeg"/>,
      <xref linkend="libpng"/>,
      <xref linkend="libtiff"/>, et
      <xref linkend="lcms2"/>
    </para>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      <xref linkend="cairo"/>,
      <xref linkend="fontconfig"/>,
      <xref linkend="gtk2"/>,
      <xref linkend="cups"/>,
      <xref linkend="jasper"/>,
      <xref linkend="lcms"/>,
      <xref linkend="libidn"/>,
      <xref linkend="x-window-system"/> and
      <ulink url="http://packages.debian.org/unstable/source/libpaper">libpaper</ulink>
    </para>
 
    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/gs"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Ghostscript</title>

    <note>
      <para>
        Le système de construction de <application>Ghostscript</application> n'est pas simple.
        Afin d'utiliser des copies du systèmes de divers bibliothèques graphiques, vous devez
        le faire en utilisant les méthodes traditionnelles.
      </para>
    </note>

     <para><application>GPL Ghostscript</application> inclue des (anciennes) copies de
      quelques bibliothèques. Certains d'entre eux semblent avoir été modifié pour 
      corriger failles connues, mais d'autres de ces copies sont moins bien maintenus.
	  Afin de s'assurer que les correctifs futurs sont appliqués dans tout le système,
      il est recommandé que vous installiez en premier les versions publiées de ces bibliothèques et
  que vous configuriez <application> GPL Ghostscript </application> pour créer un lien vers 
  elles. Cette configuration comporte plusieurs étapes.</para>

      <para>Si vous avez installé ces dépendances sur votre système, supprimez
      les copies d'<application>expat</application>,
      de <application>freetype</application>, <application>lcms2</application>,
      <application>libjpeg</application>, <application>libpng</application>,
      et de <application>libtiff</application>&nbsp;:</para>

<screen><userinput>rm -rf expat freetype jpeg lcms2 libpng tiff</userinput></screen>

    <note>
      <para>Si vous avez un ordinateur multiprocesseurs et si vous essayez de 
      lancer make avec plusieurs tâches (par exemple make -j4) il se peut que la
      construction échoue du fait de situations de concurrence critique (race conditions)
      dans le système de construction de <application>Ghostscript</application>. Vous pouvez
      contourner le problème simplement en relançant make une nouvelle fois (c'est à dire,
      <command>make -j4 || make -j1</command>).
     </para>
    </note>

    <note>
      <para>
        Si vous avez installé Cups et que votre imprimante n'est <emphasis>pas</emphasis>
        une imprimante postscript vous devez ajouter
        <option>--with-install-cups</option> aux options de configuration dessus.
        (Cette option fait que Ghostscript compile et installe le filtre gstoraster
        et le fichier de configuration gstoraster.convs qui permet à Cups de convertir un fichier 
        PostScript en fichier raster.)
      </para>
    </note>

    <para>Compilez <application>Ghostscript</application>&nbsp;:</para>

<screen><userinput>rm -rf jasper lcms zlib &amp;&amp;
./configure --prefix=/usr --enable-dynamic --with-system-libtiff LIBS=-lz &amp;&amp;
make</userinput></screen>

    <note>
      <para>La bibliothèque partagée dépend de <xref linkend="gtk2"/>. Elle n'est
      utilisée que dans des programmes externes comme <xref linkend="imagemagick"/>.</para>
    </note>

    <para>Pour compiler la bibliothèque partagçe
     <filename class="libraryfile">libgs.so</filename>, lancez la commande
     supplémentaire suivante en tant qu'utilisateur non privilégié&nbsp;:</para>
 
<screen><userinput>make so</userinput></screen>

    <para>Ce paquet n'est pas fourni avec une suite de tests. Cependant, vous
    pouvez tester l'opération du programme <command>gs</command> nouvellement
    construit en lançant la commande suivante (à lancer dans un terminal
    X Windows)&nbsp;:</para>

<screen><userinput>bin/gs -Ilib -dBATCH examples/tiger.eps</userinput></screen>

    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>make install</userinput></screen>

    <para>Si vous voulez également la bibliothèque partagée&nbsp;:</para>

<screen role="root"><userinput>make soinstall &amp;&amp;
install -v -m644 base/*.h /usr/include/ghostscript &amp;&amp;
ln -v -s ghostscript /usr/include/ps</userinput></screen>

    <para>Installez maintenant la documentation&nbsp;:</para>

<screen role="root"><userinput>ln -sfv ../ghostscript/&gs-version;/doc /usr/share/doc/ghostscript-&gs-version;</userinput></screen>

    <para>Pour finir l'installation, déballez toutes les polices que vous avez 
    téléchargées dans
    <filename class="directory">/usr/share/ghostscript</filename> et assurez-vous
    que les fichiers appartiennent bien à <systemitem class="username">root</systemitem>>&nbsp;:nbsp;:
    <systemitem class="groupname">root</systemitem>. Remplacez
    <replaceable>&lt;archive-tar-police&gt;</replaceable> comme il faut dans la
    commande ci-dessous selon les polices que vous souhaitez installer&nbsp;:</para>

<screen role="root"><userinput>tar -xvf ../<replaceable>&lt;font-tarball&gt;</replaceable> -C /usr/share/ghostscript --no-same-owner</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para><command>rm -rf jasper lcms zlib</command>&nbsp;: Les réglages par
    défaut du système de construction de <application>Ghostscript</application>
    prévoient d'utiliser sa propre version de
    <ulink url="http://www.openjpeg.org/">OpenJpeg</ulink> pour les fichiers
    JPEG 2000 <!-- I can't get it to compile using a system installed
    version of openjpeg. I'll come back to this, it seems the ghostscript
    version is quite old --> donc les sources de jasper peuvent être supprimées.
    Le système de gestion de couleurs par défaut est désormais 
    <application>lcms2</application>, donc les sources de
    <application>lcms</application> ne sont pas nécessaires.
    <application>Zlib</application> a été installé avec LFS.</para>

    <para><option>--with-system-libtiff</option>&nbsp;: Supprimez cette option 
    si vous n'avez pas installé <xref linkend="libtiff"/>.</para>

    <para><parameter>LIBS=-lz</parameter>&nbsp;: Utilisez la variable <envar>LIBS</envar>
    pour dire à l'éditeur de liens (ld) de se lier au
    <application>zlib</application> installé sur le système.</para>
    
    <para><command>install -v -m644 base/*.h...</command>&nbsp;: Certains paquets 
    (<application>ImageMagick</application> en fait partie) ont besoin que
    les en-têtes de l'interface 
    <application>Ghostscript</application> soient en place pour se lier à la
    bibliothèque partagée. Ces commandes installent les en-têtes.</para>

    <para><command>ln -v -s ghostscript /usr/include/ps</command>&nbsp;: 
    Certains paquets s'attendent à trouver les en-têtes de l''interface à un
    autre endroit.</para>

    <para><command>ln -sfv ../ghostscript-&gs-version;/doc ...</command>&nbsp;:
    Ceci crée un lien symbolique vers la documentation à l'endroit où elle
    devrait être.</para>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>
    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèque installée</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>bdftops, dumphint, dvipdf, eps2eps, fixmswrd.pl, font2c, gs, gsbj,
        gsc (from soinstall), gsdj, gsdj500, gslj, gslp, gsnd, gsx
        (from soinstall), lprsetup.sh, pdf2dsc, pdf2ps, pdfopt,
        pf2afm, pfbtopfa, printafm, ps2ascii, ps2epsi, ps2pdf, ps2pdf12,
        ps2pdf13, ps2pdf14, ps2pdfwr, ps2ps, ps2ps2, pv.sh, unix-lpr.sh, et
        wftopfa</seg>
        <seg>libgs.so</seg>
        <seg>/usr/include/ghostscript, /usr/lib/ghostscript,
        /usr/share/ghostscript et
        /usr/share/doc/ghostscript-&gs-version;</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="gplgs-prog">
        <term><command>gs</command></term>
        <listitem>
          <para>is un interpreteur pour Adobe Systems' PostScript(tm) et Portable Document Format
          (PDF).</para>
          <indexterm zone="gs gplgs-prog">
            <primary sortas="b-gs">gs</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libgs.so">
        <term><filename class="libraryfile">libgs.so</filename></term>
        <listitem>
          <para>fournit la fonctionnalité <application>Ghostscript</application> 
          à d'autres programmes, comme <application>GSView</application>,
          <application>ImageMagick</application>, et
          <application>libspectre</application>.</para>
          <indexterm zone="gs libgs.so">
            <primary sortas="c-libgs.so">libgs.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

   </variablelist>

    <para><application>GPL Ghostscript</application> fournit de nombreux scripts
    variés utilisés pour convertir des fichiers PostScript, PDF et d'autres formats.
	Merci de vous reporter à la documentation HTML ou aux pages de manuel
	pour des informations sur les possibilités offertes par le paquet.</para>

  </sect2>

</sect1>
