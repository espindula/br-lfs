<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!-- <!ENTITY gs-download-http "&sourceforge-repo;/ghostscript/ghostscript-&gs-version;.tar.bz2"> -->
  <!ENTITY gs-download-http "http://ghostscript.com/releases/ghostscript-&gs-version;.tar.gz">
  <!-- no response 2010-12-18
     <!ENTITY gs-download-ftp  "ftp://mirror.cs.wisc.edu/pub/mirrors/ghost/GPL/gs900/ghostscript-&gs-version;.tar.gz"> -->
  <!ENTITY gs-download-ftp  " ">
  <!ENTITY gs-md5sum        "177c33b796ed28d3d568e230a6dbdba5">
  <!ENTITY gs-size          "22.3 Mio">
  <!ENTITY gs-buildsize     "170 MB (incluant l'installation de libgs.so et de quelques archives de fonts)">
  <!ENTITY gs-time          "2.7 SBU (incluant la construction et l'installation de libgs.so)">

  <!-- <!ENTITY gs-standard-fonts-download "ftp://ftp.imagemagick.org/pub/ImageMagick/delegates/ghostscript-fonts-std-8.11.tar.gz"> -->
  <!ENTITY gs-standard-fonts-download "&sourceforge-repo;/gs-fonts/ghostscript-fonts-std-8.11.tar.gz">
  <!ENTITY gs-standard-fonts-md5sum   "6865682b095f8c4500c54b285ff05ef6">
  <!ENTITY gs-standard-fonts-size     "3.7 Mio">

  <!ENTITY gs-other-fonts-download    "&sourceforge-repo;/gs-fonts/gnu-gs-fonts-other-6.0.tar.gz">
  <!ENTITY gs-other-fonts-md5sum      "33457d3f37de7ef03d2eea05a9e6aa4f">
  <!ENTITY gs-other-fonts-size        "796 Kio">
]>

<sect1 id="gs" xreflabel="GPL Ghostscript-&gs-version;">
  <?dbhtml filename="gs.html"?>

  <sect1info>
    <othername>$LastChangedBy: randy $</othername>
    <date>$Date: 2011-01-05 16:40:16 +0100 (mer 05 jan 2011) $</date>
  </sect1info>

  <title>GPL Ghostscript-&gs-version;</title>

  <indexterm zone="gs">
    <primary sortas="a-GPL-Ghostscript">GPL Ghostscript</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à Ghostscript</title>

    <para><application>Ghostscript</application> est un calculateur bidirectionnel
    de données PostScript offrant la possibilité de produire du PostScript sur
    différentes cibles.</para>

    &lfs67_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&gs-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&gs-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &gs-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &gs-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &gs-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &gs-time;</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>

    <itemizedlist spacing='compact'>
      <title>Polices standards</title>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&gs-standard-fonts-download;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &gs-standard-fonts-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &gs-standard-fonts-size;</para>
      </listitem>
    </itemizedlist>

    <itemizedlist spacing='compact'>
      <title>Autres polices</title>
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&gs-other-fonts-download;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &gs-other-fonts-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &gs-other-fonts-size;</para>
      </listitem>
    </itemizedlist>

    <itemizedlist spacing="compact">
      <title>Correctifs</title>
      <listitem>
        <para>Correctif requis>&nbsp;: <ulink
        url="&patch-root;/ghostscript-&gs-version;-security_fixes-1.patch"/>
        </para>
      </listitem>
      <listitem>
        <para>Correctifs recommandées (Sauf si vous construisez sans le support JPEG2000) : <ulink
        url="&patch-root;/ghostscript-&gs-version;-system_jasper-1.patch"/>
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de Ghostscript</bridgehead>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="optional"><xref linkend="expat"/>,
    <xref linkend="freetype2"/>,
    <xref linkend="jasper"/>
    <xref linkend="libjpeg"/>,
    <xref linkend="libpng"/>,
    <xref linkend="libtiff"/>, et
    <xref linkend="lcms"/></para>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
    <xref linkend="cairo"/>,
    <xref linkend="fontconfig"/>,
    <xref linkend="gtk2"/>,
    <xref linkend="cups"/>,
    <xref linkend="libidn"/>,
    <xref linkend="x-window-system"/>, et
    <!-- the link for ijs source ultimately takes users back to the ghostscript site
	<ulink url="http://www.linuxprinting.org/ijs/">IJS</ulink>, et -->
    <ulink url="http://packages.debian.org/unstable/source/libpaper">libpaper</ulink></para>
 
    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/gs"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Ghostscript</title>

    <para>Installez <application>GPL Ghostscript</application> en lançant les
    commandes suivantes&nbsp;:</para>

      <note>
      <para>Le système <application>Ghostscript</application> construit n'est pas 
      user-friendly. Afin d'utiliser des copies du système de bibliothèques graphiques
	  différents, vous devez le faire en utilisant des méthodes non conventionnelles.</para>
      </note>
	 
      <para>Commençons par corriger quelques failles de sécurité:</para>

<screen><userinput>patch -Np1 -i ../ghostscript-&gs-version;-security_fixes-1.patch
</userinput></screen>

      <para><application>GPL Ghostscript</application> inclue des (anciennes) copies de
      quelques bibliothèques. Certains d'entre eux semblent avoir été modifié pour 
      corriger failles connues, mais d'autres de ces copies sont moins bien maintenus.
	  Afin de s'assurer que les correctifs futurs sont appliqués dans tout le système,
      il est recommandé que vous créez les versions publiées de ces bibliothèques et puis 
	  configurer <application> GPL Ghostscript </ application> pour créer un lien vers 
	  eux. Cette configuration comporte plusieurs étapes.</para>

      <para>Sauf si vous avez l'intention de construire <application> postscript GPL
	  </ application> sans le support pour  les fichiers <literal>  JPEG2000 </ literal>,
	  appliquer un correctif pour lui permettre de se construire contre une version 
	  actuelle du système installé de <application> JasPer </ application>:</para>

<screen><userinput>patch -Np1 -i ../ghostscript-&gs-version;-system_jasper-1.patch
</userinput></screen>

      <para>Effacer les copies locales de <application>expat</application>,
      <application>JasPer</application>, <application>lcms</application>,
      <application>libjpeg</application>, <application>libpng</application>,
      <application>libtiff</application>, et <application>zlib</application>:
      </para>

<screen><userinput>rm -rf expat jasper lcms jpeg libpng tiff zlib
</userinput></screen>

    <para>Exécuter la commande de configuration:</para>

<screen><userinput>./configure --prefix=/usr --enable-dynamic --with-drivers=ALL,x11 --with-system-libtiff --disable-compile-inits</userinput></screen>

    <para>Pour s'assurer que la construction pour utiliser les versions du système de
    <application>expat</application>, <application>freetype</application>, et
    <application>lcms</application> il est nécessaire de faire quelques changements et un
    ajout dans le <literal>Makefile</literal> avant de construire le paquet:</para>

<screen><userinput>sed -i  -e 's|SHARE_LCMS=0|SHARE_LCMS=1|' \
        -e 's|LCMSSRCDIR=lcms|LCMSSRCDIR=/usr|' \
        -e 's|=imdi|&amp;\n\n# Use system expat library\n\nSHARE_EXPAT=1|' \
        -e 's|SHARE_FT=0|SHARE_FT=1|' Makefile &amp;&amp;make</userinput></screen>

    <para>Ce paquet n'est pas fourni avec une suite de tests. Par contre, vous pouvez tester
	le fonctionnement du nouveau progamme <command>gs</command> construit en tapant la 
	commande suivante (tapée dans un terminal X Windows):</para>

	<screen><userinput>bin/gs -Ilib -dBATCH examples/tiger.eps</userinput></screen>
	
    <para>Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>

<!-- for 9.00 docdir is only referenced by GS_DOCDIR which is itself not referenced
 so the docs still go into /usr/share/ghostscript/9.00/
<screen role="root"><userinput>make install docdir=/usr/share/doc/ghostscript-&gs-version; &amp;&amp;-->
<screen role="root"><userinput>make install &amp;&amp;
for INSTFILE in `ls doc`
do
  <!--if [ ! -f          /usr/share/doc/ghostscript-&gs-version;/$INSTFILE ]; then -->
  if [ ! -f          /usr/share/ghostscript/&gs-version;/doc/$INSTFILE ]; then
    install -v -m644 doc/$INSTFILE \
                     /usr/share/ghostscript/&gs-version;/doc
                     <!--/usr/share/doc/ghostscript-&gs-version;-->
  fi
done &amp;&amp;

<!--install -v -m755 -d /usr/share/doc/ghostscript-&gs-version;/figures &amp;&amp;-->
install -v -m755 -d /usr/share/ghostscript/&gs-version;/doc/figures &amp;&amp;
install -v -m644    doc/figures/* \
                    /usr/share/ghostscript/&gs-version;/doc/figures &amp;&amp;
                    <!--/usr/share/doc/ghostscript-&gs-version;/figures-->
ln -sv ../ghostscript/&gs-version;/doc /usr/share/doc/ghostscript-&gs-version;
</userinput></screen>

    <para>Pour installer la bibliothèque partagée
    <filename class='libraryfile'>libgs.so</filename>, lancez la commande
    supplémentaire suivante en tant qu'utilisateur non privilégié&nbsp;:</para>

<screen><userinput>make so</userinput></screen>

    <para>Puis de nouveau en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>

<screen role="root"><userinput>make soinstall docdir=/usr/share/doc/ghostscript-&gs-version; &amp;&amp;
install -v -m644 base/*.h /usr/include/ghostscript &amp;&amp;
ln -v -s ghostscript /usr/include/ps</userinput></screen>
 
    <note>
      <para>La bibliothèque partagée dépend de <xref linkend="gtk2"/>. Elle n'est
      utilisée que dans des programmes externes comme <xref linkend="gsview"/> et
      <xref linkend="imagemagick"/>.</para>
    </note>

    <para>Pour finir l'installation, déballez toutes les polices que vous avez 
    téléchargées dans
    <filename class="directory">/usr/share/ghostscript</filename> et assurez-vous
    que les fichiers appartiennent bien à <systemitem class="username">root</systemitem>:
	<systemitem class="groupname">root</systemitem>. Remplacez
    <replaceable>&lt;archive-tar-police&gt;</replaceable> comme il faut dans la
    commande ci-dessous selon les polices que vous souhaitez installer&nbsp;:</para>

<screen role="root"><userinput>tar -xvf ../<replaceable>&lt;font-tarball&gt;</replaceable> \
    -C /usr/share/ghostscript --no-same-owner</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

	 <para><command>--with-drivers=ALL,x11</command>: Ce paramètre ajoute le périphérique
     de sortie <literal>x11</literal> pour la selection defaut (<literal>ALL</literal>)
     pour que le test pour rendre le tigre fonctionne sur les systèmes 32-bit
     (Cela n'est pas nuisible sur une architecture <literal>x86_64</literal>, bien qu'il 
     ne soit pas nécessaire dans ce cas).</para>
    <para><command>--disable-compile-inits</command>: Ce paramètre est destiné 
    à éviter de compiler  les fichiers d'initialisation dans les exécutables.  Il est 
	utilisé ici pour simplifier la construction contre la version systeme de 
	<application>zlib</application>.</para>
    <para><option>--without-jasper</option>: Si vous savez que vous n'imprimerez aucuns 
	fichiers <literal>JPEG2000</literal>, ce paramètre (en effaçant le repertoire
    <filename class="directory">jasper/</filename> ) fera cela.</para>
    <para><option>--without-jbig2dec</option>: La decompression <literal>JBIG2</literal>
    (utilisé par quelques faxs) peut être désactivé en utilisant ce paramètre
    et en effaçant le repertoire <filename class="directory">jbig2dec/</filename>.</para>
    <para><command>install ...</command>&nbsp;: Certains paquets 
    (<application>ImageMagick</application> en fait partie) ont besoin que
    les en-têtes de l'interface 
    <application>Ghostscript</application> soient en place pour se lier à la
    bibliothèque partagée. Ces commandes installent les en-têtes.</para>

    <para><command>ln -sv ... /usr/share/doc/ghostscript-&gs-version;</command>: Cela mets 
    la documentation ou elle doit être trouvée.</para>

    <para><command>ln -v -s ghostscript /usr/include/ps</command>: Certains
    paquets s'attendent à trouver les en-têtes de l'interface à un autre endroit.</para>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>
    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèque installée</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>bdftops, dumphint, dvipdf, eps2eps, fixmswrd.pl, font2c, gs, gsbj,
        gsc (from soinstall), gsdj, gsdj500, gslj, gslp, gsnd, gsx (from soinstall),
        lprsetup.sh, pdf2dsc, pdf2ps, pdfopt,
        pf2afm, pfbtopfa, printafm, ps2ascii, ps2epsi, ps2pdf, ps2pdf12,
        ps2pdf13, ps2pdf14, ps2pdfwr, ps2ps, ps2ps2, pv.sh, unix-lpr.sh, et
        wftopfa</seg>
        <seg>libgs.so </seg>
        <seg>/usr/include/ghostscript, /usr/lib/ghostscript, /usr/share/ghostscript,
        <!--and /usr/share/doc/ghostscript</seg>-->
        et /usr/share/doc/ghostscript-&gs-version;</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="gplgs-prog-gs">
        <term><command>gs</command></term>
        <listitem>
          <para>is un interpreteur pour Adobe Systems' PostScript(tm) et Portable Document Format
          (PDF).</para>
          <indexterm zone="gs gplgs-prog">
            <primary sortas="b-gs">gs</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libgs.so">
        <term><filename class="libraryfile">libgs.so</filename></term>
        <listitem>
          <para>fournit la fonctionnalité <application>Ghostscript</application> 
          à d'autres programmes, comme <application>GSView</application>,
          <application>ImageMagick</application>, et
          <application>libspectre</application>.</para>
          <indexterm zone="gs libgs.so">
            <primary sortas="c-libgs.so">libgs.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

   </variablelist>

    <para><application>GPL Ghostscript</application> fournit de nombreux scripts
    variés utilisés pour convertir des fichiers PostScript, PDF et d'autres formats.
	Merci de vous reporter à ladocumentation HTML ou essayez <command>man gs</command>
	pour des informations sur les possibilités offertes par le paquet.</para>

  </sect2>

</sect1>
