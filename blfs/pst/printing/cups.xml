<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
  <!ENTITY cups-download-http "http://www.cups.org/software/&cups-version;/cups-&cups-version;-source.tar.bz2">
  <!ENTITY cups-download-ftp  " ">
  <!ENTITY cups-md5sum        "946a2d8ad1aec6beced312fce18543da">
  <!ENTITY cups-size          "7.9 Mo">
  <!ENTITY cups-buildsize     "56 Mo">
  <!ENTITY cups-time          "0.6 SBU">
]>
<sect1 id="cups" xreflabel="Cups-&cups-version;">
  <?dbhtml filename="cups.html"?>
  <sect1info>
    <othername>$LastChangedBy&nbsp;: bdubbs $</othername>
    <date>$Date&nbsp;: 2013-03-15 17:26:39 +0100 (Fri, 15 Mar 2013) $</date>
  </sect1info>
  <title>Cups-&cups-version;</title>
  <indexterm zone="cups">
    <primary sortas="a-Cups">Cups</primary>
  </indexterm>
  <sect2 role="package">
    <title>Introduction à Cups</title>
    <para>Le <foreignphrase>Common Unix Printing System</foreignphrase> (Cups) 
    (système d'impression Unix général) est un ensemble tampon d'imprimantes et
    d'outils associés. Il se base sur l'"Internet Printing
    Protocol" (protocole d'impression par Internet) et il offre des services 
    d'impression pour la plupart des imprimantes PostScript and raster.</para>
   &lfs74_checked;
    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>Téléchargement (HTTP)&nbsp;: <ulink url="&cups-download-http;"/></para>
      </listitem>
      <listitem>
        <para>Téléchargement (FTP)&nbsp;: <ulink url="&cups-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>Somme de contrôle MD5 du téléchargement&nbsp;: &cups-md5sum;</para>
      </listitem>
      <listitem>
        <para>Taille du téléchargement&nbsp;: &cups-size;</para>
      </listitem>
      <listitem>
        <para>Estimation de l'espace disque requis&nbsp;: &cups-buildsize;</para>
      </listitem>
      <listitem>
        <para>Estimation du temps de construction&nbsp;: &cups-time;</para>
      </listitem>
    </itemizedlist>
    <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Correctif requis&nbsp;:
          <ulink url="&patch-root;/cups-&cups-version;-blfs-1.patch"/>
         </para>
      </listitem>
    </itemizedlist>
    <bridgehead renderas="sect3">Dépendances de Cups</bridgehead>
    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="colord"/>,
      <xref linkend="dbus"/> et
      <xref linkend="libusb"/>
    </para>
    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      <xref linkend="acl"/>,
      <xref linkend="avahi"/>,
      <xref linkend="gnutls"/> or <xref linkend="openssl"/>,
      <ulink
      url="http://packages.debian.org/source/sid/libpaper">libpaper</ulink>,
      <xref linkend="linux-pam"/>,
      <xref linkend="mitkrb"/>,
      <xref linkend="openjdk"/>,
      <xref linkend="php"/>,
      <xref linkend="python2"/>,
      
et
      <xref linkend="xdg-utils"/>
    </para>
    <bridgehead renderas="sect4">Requises (au moment de l'exécution)</bridgehead>
    <para role="optional">
      <xref linkend="cups-filters"/>
    </para>
    <para condition="html" role="usernotes">Notes utilisateur&nbsp;:
    <ulink url="&blfs-wiki;/cups"/></para>
  </sect2>
  <sect2 role="kernel" id="cups-kernel">
    <title>Configuration du noyau</title>
    <note>
      <para>
        Il existe un conflit entre la fondation <application>libusb</application>
        de <application>Cups</application> et le pilote usblp du noyau. Si vous
        voulez utiliser <application>Cups</application> avec
        <application>libusb</application> <emphasis>n'activez pas</emphasis> le
        support des imprimantes USB de votre noyau.
      </para>
    </note>
    <para>
      Si vous voulez utiliser le pilote usblp du noyau, activez les
      options suivantes dans la configuration de votre noyau et recompilez le
      noyau&nbsp;:
    </para>
<screen>
Device Drivers  ---&gt;
  [*] USB support  ---&gt;
...
Enable support for either UHCI or OHCI, not both:
    [*]   OHCI HCD support
    [*]   UHCI HCD (most Intel and VIA) support
...
    [*]   USB Printer support
</screen>
    <para>
      Si vous avez une imprimante en port parallèle, activez les options suivantes
      dans la configuration de votre noyau et recompilez le noyau&nbsp;:
    </para>
<screen>
<literal>Device Drivers  ---&gt;
  [*] Parallel port support  ---&gt;
    [*]   PC-style hardware
...
  Character devices  ---&gt;
    [*] Parallel printer support</literal>
</screen>
    <indexterm zone="cups cups-kernel">
      <primary sortas="d-cups">cups</primary>
    </indexterm>
  </sect2>
  <sect2 role="installation">
    <title>Installation de Cups</title>
    <para>
      Il va falloir ajouter un utilisateur <systemitem class="username">lp</systemitem>
      car <application>Cups</application> va créer des fichiers qui appartiennent
      à cet utilisateur. (L'utilisateur <systemitem class="username">lp</systemitem>
      est celui que <application>Cups</application> utilise par défakt, mais
      on peut mettre un autre utilisateur en passant un paramètre au script
      <command>configure</command>. Utilisez la commande suivante en tant qu'utilisateur
      <systemitem class="username">root</systemitem>&nbsp;:
    </para>
 
<screen role="root">
<userinput>useradd -c "Print Service User" -d /var/spool/cups -g lp -s /bin/false -u 9 lp</userinput>
</screen>
      <para>Vous aurez également besoin d'un groupe dédié qui contiendra les
      utilisateurs autorisés à effectuer des tâches administratives de
      <application>Cups</application>. Ajoutez le groupe en lançant la commande
      suivante en tant qu'utilisateur 
      <systemitem class="username">root</systemitem>&nbsp;:
    </para>
<screen role="root">
<userinput>groupadd -g 19 lpadmin</userinput>
</screen>
    <para>
      Si vous voulez ajouter un utilisateur au groupe d'administration de
      <application>Cups</application>, lancez la commande suivante en tant qu'utilisateur
      <systemitem class="username">root</systemitem>&nbsp;:
    </para>
<screen role="root">
<userinput>usermod -a -G lpadmin <replaceable>&lt;username&gt;</replaceable></userinput>
</screen>
    <para>
      Si vous n'avez pas installé <xref linkend="xdg-utils"/>, utilisez le
      <command>sed</command> suivant pour modifier le navigateur utilisé par défaut
      pour accéder à l'interface Web de <application>Cups</application>&nbsp;:
    </para>
<screen>
<userinput>sed -i 's#@CUPS_HTMLVIEW@#firefox#' desktop/cups.desktop.in</userinput>
</screen>
    <para>
      Remplacez <command>firefox</command> par le navigateur Web de votre
      choix.
    </para>
    <para>
      Installez <application>Cups</application> en lançant les commandes
      suivantes&nbsp;:
    </para>
    
<screen>
<userinput>patch -Np1 -i ../cups-&cups-version;-blfs-1.patch &amp;&amp;
aclocal -I config-scripts &amp;&amp;
autoconf -I config-scripts &amp;&amp;
CC=gcc \
./configure --libdir=/usr/lib                 \
            --with-rcdir=/tmp/cupsinit        \
            --with-docdir=/usr/share/cups/doc \
            --with-system-groups=lpadmin      &amp;&amp;
make</userinput>
</screen>
    <para>Ce paquet n'a pas de suite de tests opérationnelle.</para>
    
    <para>
      Maintenant, en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:
    </para>
 
<screen role="root">
<userinput>make install &amp;&amp;
rm -rf /tmp/cupsinit &amp;&amp;
ln -sv ../cups/doc /usr/share/doc/cups-&cups-version;</userinput>
</screen>
    <para>Créez le fichier de configuration de base du client
    <application>Cups</application> en lançant la commande suivante en tant qu'utilisateur
       <systemitem class="username">root</systemitem>&nbsp;:</para>
    
<screen role="root">
<userinput>echo "ServerName /var/run/cups/cups.sock" > /etc/cups/client.conf</userinput>
</screen>
    <para>Supprimez les filtres, qui font maintenant partie du     paquet
    <application>Cups Filters</application>, en lançant les commandes suivantes
    en tant qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:</para>
<screen role="root">
<userinput>rm -rf /usr/share/cups/banners &amp;&amp;
rm -rf /usr/share/cups/data/testprint</userinput>
</screen>
<xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/gtk-update-icon-cache.xml"/>
  </sect2>
  <sect2 role="commands">
    <title>Explication des commandes</title>
    <para>
      <envar>CC=gcc</envar>: Cette variable d'environnement assure que gcc
      est utilisé si clang est installé. La construction échoue avec le compilateur clang.
    </para>
    <para>
      <parameter>--with-rcdir=/tmp/cupsinit</parameter>&nbsp;: Ce paramètre dit
      au processus de construction d'installer le script de démarrage inclu dans
      <filename class="directory">/tmp</filename> et non dans
      <filename class="directory">/etc/rc.d</filename>.
    </para>
 
    <para>
      <parameter>--with-system-groups=lpadmin</parameter>&nbsp;: Ce paramètre
      garantit que seul <systemitem class="groupname">lpadmin</systemitem> sera
      utilisé comme groupe d'administration de <application>Cups</application>.
    </para>
 
    <para>
      <option>--disable-libusb</option>&nbsp;: Utilisez ce paramètre si vous avez
      installé <xref linkend="libusb"/>, mais si vous souhaitez le pilote usblp du noyau.
    </para>
    <para>
      <option>--enable-libpaper</option>&nbsp;: Utilisez ce paramètre si vous 
      avez installé <application>libpaper</application> et si vous souhaitez
      l'utiliser avec 
      <application>Cups</application>.
    </para>
 
    <para>
      <option>--disable-gnutls --enable-openssl</option>&nbsp;: Ce paramètre
      dit au processus de construction d'utiliser <xref linkend="openssl"/> au
      lieu de <xref linkend="gnutls"/>. La version actuelle de
      <application>GnuTLS</application> pourrait donner de nombreux avertissements
      pendant la construction de <application>Cups</application>.
    </para>
  </sect2>
  <sect2 role="configuration">
    <title>Configuration de Cups</title>
    <para>La configuration de <application>Cups</application> dépend du
    type d'imprimante et elle peut être complexe. En général, les imprimantes
    PostScript sont plus simples. Pour des instructions détaillées sur la 
    configuration et l'utilisation de <application>Cups</application>, voir
    <ulink url="http://www.cups.org/documentation.php"/>. Le
    <foreignphrase>Software Administrators Manual</foreignphrase> (manuel ges 
    administrateurs du logiciel) et le <foreignphrase>Software Users Manual</foreignphrase>
    (manuel des utilisateurs) sont particulièrement utiles.</para>
    <para>Pour que des imprimantes non PostScript impriment avec
    <application>Cups</application>, vous devez installer 
    <xref linkend="gs"/> pour convertir PostScript en images raster
    et un pilote (comme ceux de <xref linkend="gutenprint"/>) pour convertir
    les images raster résultantes sous une forme compréhensible par l'imprimante.
    Les pilotes de <ulink url="http://www.linuxprinting.org/foomatic.html">Foomatic</ulink>
    utilisent Ghostscript pour convertir du PostScript en forme directement
    imprimable, mais les développeurs de <application>Cups</application> 
    considèrent cela comme du bricolage.</para>
    <sect3 id="cups-init">
      <title>Script de démarrage</title>
      <para>Si vous voulez que <application>Cups</application> démarre
      automatiquement lors du démarrage du système, installez le script 
      de démarrage inclu dans le paquet <xref linkend="bootscripts"/>&nbsp;:</para>
      <indexterm zone="cups cups-init">
        <primary sortas="f-cups">cups</primary>
      </indexterm>
<screen role="root">
<userinput>make install-cups</userinput>
</screen>
    </sect3>
  </sect2>
  <sect2 role="content">
    <title>Contenu</title>
    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>
      <seglistitem>
        <seg>
          accept, cancel, cupsaccept, cupsaddsmb, cups-config,
          cupsctl, cupsd, cupsdisable, cupsenable, cupsfilter,
          cupsreject, cupstestdsc, cupstestppd, ipptool, lp,
          lpadmin, lpc, lpinfo, lpmove, lpoptions, lppasswd,
          lpq, lpr, lprm, lpstat, ppdc, ppdhtml, ppdi, ppdmerge,
          ppdpo et reject
        </seg>
        <seg>
          libcupscgi.so, libcupsimage.so, libcupsmime.so,
          libcupsppdc.so et libcups.so
        </seg>
        <seg>
          /etc/cups,
          /usr/include/cups,
          /usr/lib/cups,
          /usr/share/cups,
          /usr/share/doc/cups-&cups-version;,
          /var/cache/cups,
          /var/log/cups,
          /var/run/cups et
          /var/spool/cups
        </seg>
       </seglistitem>
     </segmentedlist>
    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>
      <varlistentry id="accept">
        <term><command>accept</command></term>
        <listitem>
          <para>demande au système d'impression d'accepter les tâches d'impression
         sur les destinations spécifiées.</para>
          <indexterm zone="cups accept">
            <primary sortas="b-accept">accept</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="cancel-cups">
        <term><command>cancel</command></term>
        <listitem>
          <para>annule les tâches d'impression existantes dans les queues 
          d'imprimante.</para>
          <indexterm zone="cups cancel-cups">
            <primary sortas="b-cancel">cancel</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="cupsaddsmb">
        <term><command>cupsaddsmb</command></term>
        <listitem>
          <para>
            exporte les imprimantes vers le logiciel <application>Samba</application>
            pour une utilisation avec des clients Windows.
          </para>
          <indexterm zone="cups cupsaddsmb">
            <primary sortas="b-cupsaddsmb">cupsaddsmb</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="cups-config">
        <term><command>cups-config</command></term>
        <listitem>
          <para>est un outil de configuration <application>Cups</application>.</para>
          <indexterm zone="cups cups-config">
            <primary sortas="b-cups-config">cups-config</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="cupsctl">
        <term><command>cupsctl</command></term>
        <listitem>
          <para>Met à jour ou interroge le fichier cupsd.conf pour un serveur.</para>
          <indexterm zone="cups cupsctl">
            <primary sortas="b-cupsctl">cupsctl</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="cupsd">
        <term><command>cupsd</command></term>
        <listitem>
          <para>est le programmeur de tâches du <foreignphrase>Common Unix 
          Printing System</foreignphrase>.</para>
          <indexterm zone="cups cupsd">
            <primary sortas="b-cupsd">cupsd</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="cupsfilter">
        <term><command>cupsfilter</command></term>
        <listitem>
          <para>est une interface avec le sous-système de filtre de
          <application>Cups</application> qui vous permet de convertir un
          fichier dans un format spécifique.</para>
          <indexterm zone="cups cupsfilter">
            <primary sortas="b-cupsfilter">cupsfilter</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="cupstestdsc">
        <term><command>cupstestdsc</command></term>
        <listitem>
          <para>teste la conformité des fichiers PostScript.</para>
          <indexterm zone="cups cupstestdsc">
            <primary sortas="b-cupstestdsc">cupstestdsc</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="cupstestppd">
        <term><command>cupstestppd</command></term>
        <listitem>
          <para>teste la conformité des fichiers PPD.</para>
          <indexterm zone="cups cupstestppd">
            <primary sortas="b-cupstestppd">cupstestppd</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="ipptool">
        <term><command>ipptool</command></term>
        <listitem>
          <para>
            envoie des requêtes IPP à l'adresse spécifiée et teste et/ou affiche
            les résultats.
          </para>
          <indexterm zone="cups ipptool">
            <primary sortas="b-ipptool">ipptool</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="lp-cups">
        <term><command>lp</command></term>
        <listitem>
          <para>soumet des fichiers pour qu'ils soient imprimés ou modifie des 
          tâches en attente.</para>
          <indexterm zone="cups lp-cups">
            <primary sortas="b-lp">lp</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="lpadmin">
        <term><command>lpadmin</command></term>
        <listitem>
          <para>configure les queues d'une imprimante ou d'une classe fournies par
          <application>Cups</application>.</para>
          <indexterm zone="cups lpadmin">
            <primary sortas="b-lpadmin">lpadmin</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="lpc-cups">
        <term><command>lpc</command></term>
        <listitem>
          <para>offre un contrôle limité des queues d'imprimante ou de
          classe fournies par <application>Cups</application>.</para>
          <indexterm zone="cups lpc-cups">
            <primary sortas="b-lpc">lpc</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="lpinfo">
        <term><command>lpinfo</command></term>
        <listitem>
          <para>liste les périphériques ou les pilotes disponibles connus du
          serveur <application>Cups</application>.</para>
          <indexterm zone="cups lpinfo">
            <primary sortas="b-lpinfo">lpinfo</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="lpmove">
        <term><command>lpmove</command></term>
        <listitem>
          <para>envoie la tâche spécifiée vers une nouvelle destination.</para>
          <indexterm zone="cups lpmove">
            <primary sortas="b-lpmove">lpmove</primary>
          </indexterm>
      </listitem>
      </varlistentry>
      <varlistentry id="lpoptions">
        <term><command>lpoptions</command></term>
        <listitem>
          <para>affiche ou règle les options de l'imprimante et ceux par défaut.</para>
          <indexterm zone="cups lpoptions">
            <primary sortas="b-lpoptions">lpoptions</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="lppasswd">
        <term><command>lppasswd</command></term>
        <listitem>
          <para>ajoute, modifie ou efface des mots de passe dans le fichier
                    <filename>passwd.md5</filename> de mots de passe chiffrés de 
          <application>CUPS</application>.</para>
          <indexterm zone="cups lppasswd">
            <primary sortas="b-lppasswd">lppasswd</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="lpq-cups">
        <term><command>lpq</command></term>
        <listitem>
          <para>affiche le statut actuel de la queue d'impression de l'imprimante
          mentionnée.</para>
          <indexterm zone="cups lpq-cups">
            <primary sortas="b-lpq">lpq</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="lpr-cups">
        <term><command>lpr</command></term>
        <listitem>
          <para>soumet des fichiers pour qu'ils soient imprimés.</para>
          <indexterm zone="cups lpr-cups">
            <primary sortas="b-lpr">lpr</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="lprm-cups">
        <term><command>lprm</command></term>
        <listitem>
          <para>annule des tâches d'impression envoyées pour impression vers la
          queue.</para>
          <indexterm zone="cups lprm-cups">
            <primary sortas="b-lprm">lprm</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="lpstat-cups">
        <term><command>lpstat</command></term>
        <listitem>
          <para>affiche des informations statutaires sur les classes, les tâches
          et les imprimantes actuelles.</para>
          <indexterm zone="cups lpstat-cups">
            <primary sortas="b-lpstat">lpstat</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="ppdc">
        <term><command>ppdc</command></term>
        <listitem>
          <para>
            compile des fichiers sources PPDC en un ou plusieurs fichiers PPD.
          </para>
          <indexterm zone="cups ppdc">
            <primary sortas="b-ppdc">ppdc</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="ppdhtml">
        <term><command>ppdhtml</command></term>
        <listitem>
          <para>
            lit le fichier d'informations d'un pilote et donne une page de 
            résumé en HTML qui liste tous les pilotes d'un fichier et les options
            supportées.
          </para>
          <indexterm zone="cups ppdhtml">
            <primary sortas="b-ppdhtml">ppdhtml</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="ppdi">
        <term><command>ppdi</command></term>
        <listitem>
          <para>
            importe un ou plusieurs fichiers PPD dans un fichier source pour le
            compilateur PPD.
          </para>
          <indexterm zone="cups ppdi">
            <primary sortas="b-ppdi">ppdi</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="ppdmerge">
        <term><command>ppdmerge</command></term>
        <listitem>
          <para>
            synchronise deux ou plusieurs fichiers PPD dans un seul fichier PPD 
            multi-langages.
          </para>
          <indexterm zone="cups ppdmerge">
            <primary sortas="b-ppdmerge">ppdmerge</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="ppdpo">
        <term><command>ppdpo</command></term>
        <listitem>
          <para>
            extrait des chaînes UI de fichiers source PPDC et met à jour soit
            un fichier de traduction source d'un catalogue GNU gettext ou de
            chaînes au format Mac OS X.
          </para>
          <indexterm zone="cups ppdpo">
            <primary sortas="b-ppdpo">ppdpo</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="reject">
        <term><command>reject</command></term>
        <listitem>
          <para>demande au système d'impression de rejeter les tâches d'impression
          des destinations spécifiées.</para>
          <indexterm zone="cups reject">
            <primary sortas="b-reject">reject</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="libcups">
        <term><filename class="libraryfile">libcups.so</filename></term>
        <listitem>
          <para>
            contient les fonctions de l'API de the <application>Cups</application>.
          </para>
          <indexterm zone="cups libcups">
            <primary sortas="c-libcups">libcups.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect2>
</sect1>
