<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
   "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY cups-download-http "http://ftp.easysw.com/pub/cups/&cups-version;/cups-&cups-version;-source.tar.bz2">
  <!ENTITY cups-download-ftp  "ftp://ftp.easysw.com/pub/cups/&cups-version;/cups-&cups-version;-source.tar.bz2">
  <!ENTITY cups-md5sum        "4ce09b1dce09b6b9398af0daae9adf63">
  <!ENTITY cups-size          "8.7 MB">
  <!ENTITY cups-buildsize     "46 MB">
  <!ENTITY cups-time          "0.54 SBU (additional 69 SBU to run full test suite)">
]>

<sect1 id="cups" xreflabel="CUPS-&cups-version;">
<sect1info>
<othername>$LastChangedBy: randy $</othername>
<date>$Date: 2005-06-15 06:18:19 $</date>
</sect1info>
<?dbhtml filename="cups.html"?>
<title>CUPS-&cups-version;</title>

<sect2>
<title>Introduction to
<application><acronym>CUPS</acronym></application></title>

<para>The Common Unix Printing System (<acronym>CUPS</acronym>) is a print 
spooler and associated utilities. It is based on the "Internet Printing 
Protocol" and provides printing services to most PostScript and raster 
printers.</para>

<sect3><title>Package information</title>
<itemizedlist spacing='compact'>
<listitem><para>Download (HTTP): 
<ulink url="&cups-download-http;"/></para></listitem>
<listitem><para>Download (FTP): 
<ulink url="&cups-download-ftp;"/></para></listitem>
<listitem><para>Download MD5 sum: &cups-md5sum;</para></listitem>
<listitem><para>Download size: &cups-size;</para></listitem>
<listitem><para>Estimated disk space required: 
&cups-buildsize;</para></listitem>
<listitem><para>Estimated build time: 
&cups-time;</para></listitem></itemizedlist>
</sect3>

<sect3><title><application><acronym>CUPS</acronym></application> 
dependencies</title>
<sect4><title>Recommended</title>
<para><xref linkend="libjpeg"/>, 
<xref linkend="libpng"/>, 
and <xref linkend="libtiff"/></para>
</sect4>

<sect4><title>Optional</title>
<para><xref linkend="openssl"/> or 
<ulink url="http://www.gnu.org/software/gnutls/">GnuTLS</ulink> (which needs 
<ulink url="ftp://ftp.gnupg.org/gcrypt/alpha/libgpg-error/">
libgpg-error</ulink>, 
<ulink url="ftp://ftp.gnupg.org/gcrypt/libgcrypt/">libgcrypt</ulink> and 
<ulink url="ftp://ftp.gnupg.org/gcrypt/alpha/gnutls/opencdk/">opencdk</ulink>, 
in that order), 
<xref linkend="Linux_PAM"/>, 
<xref linkend="php"/>, 
<xref linkend="python"/>, 
<xref linkend="j2sdk"/>, 
<ulink url="http://www.openslp.org/">OpenSLP</ulink>, 
<ulink url="http://packages.debian.org/unstable/source/libpaper">
libpaper</ulink> and 
<ulink url="http://valgrind.kde.org/">Valgrind</ulink> (optionally used if 
running the test suites)</para>
</sect4>
</sect3>

</sect2>

<sect2>
<title>Installation of
<application><acronym>CUPS</acronym></application></title>

<para>Create an 'lp' user, as 
<application><acronym>CUPS</acronym></application> will install the 
<command>lppasswd</command> command <acronym>SUID</acronym> to this user. Use 
the following command as the root user:</para>

<screen><userinput role='root'><command>useradd -c "Print Service User" -d /dev/null -g lp -s /bin/false lp</command></userinput></screen> 

<para>If you utilize <application>Linux-<acronym>PAM</acronym></application>, 
you need to modify some files so 
<application><acronym>CUPS</acronym></application> can find needed headers. 
Make the appropriate modifications using the following command:</para>

<screen><userinput><command>sed -i -e "s@pam/pam@security/pam@g" \
{config-scripts/cups-pam.m4,scheduler/auth.c,configure}</command></userinput></screen>

<para>Install <application><acronym>CUPS</acronym></application> by 
running the following commands:</para>

<screen><userinput><command>./configure &amp;&amp;
make &amp;&amp;
make install</command></userinput></screen>

</sect2>

<sect2>
<title>Command explanations</title>

<para>The basic default behavior of the installation is appropriate for
<acronym>LFS</acronym> systems. <application><acronym>CUPS</acronym>
</application> files are placed in 
<filename class="directory">/usr/bin</filename>, 
<filename class="directory">/usr/sbin</filename>, 
<filename class="directory">/var</filename> and 
<filename class="directory">/etc/cups</filename>.</para>

</sect2>

<sect2>
<title>Configuring <application><acronym>CUPS</acronym></application></title>

<para>Configuration of <application><acronym>CUPS</acronym></application> is 
dependent on the type of printer and can be complex. Generally, PostScript 
printers are easier. For detailed instructions on configuration and use of 
<application><acronym>CUPS</acronym></application>, see 
<ulink url="http://www.cups.org/documentation.php"/>. The Software 
Administrators Manual and Software Users Manual are particularly useful.</para>

<para>For non-PostScript printers to print with 
<application><acronym>CUPS</acronym></application>, you need to install 
<xref linkend="espgs"/> to convert PostScript to raster images
and a driver (e.g., from <xref linkend="gimp-print"/>) to convert
the resulting raster images to a form that the printer understands.
<ulink url="http://www.linuxprinting.org/foomatic.html">Foomatic</ulink>
drivers use Ghostscript to convert PostScript to a printable form directly, but 
this is considered to be a hack by 
<application><acronym>CUPS</acronym></application> developers.</para>

<para>During the install, <application><acronym>CUPS</acronym></application> 
created the startup file <command>/etc/rc.d/init.d/cups</command>. The file 
works, but you may want to change it to a more conventional 
<acronym>LFS</acronym> startup file by installing the script included in the
<xref linkend="intro-important-bootscripts"/> package:</para>

<screen><userinput><command>make install-cups</command></userinput></screen>

</sect2>

<sect2>
<title>Contents</title>

<para><application><acronym>CUPS</acronym></application> provides 
<command>accept</command>,
<command>cupsaddsmb</command>,
<command>cupsd</command>,
<command>cupstestppd</command>,
<command>lpadmin</command>,
<command>lpc</command>,
<command>lpinfo</command>,
<command>lpmove</command>,
<command>reject</command>,
<command>cancel</command>,
<command>cups-config</command>,
<command>disable</command>,
<command>enable</command>,
<command>lp</command>,
<command>lpoptions</command>,
<command>lppasswd</command>,
<command>lpq</command>,
<command>lpr</command>,
<command>lprm</command>,
<command>lpstat</command>,
<filename class="libraryfile">libcups</filename>,
<filename class="libraryfile">libcupsimage</filename> and various
scripts and filters.</para>

<sect3><title>lpc</title>
<para><command>lpc</command> provides limited control over printer
and class queues provided by <application><acronym>CUPS</acronym>
</application>.
</para></sect3>

<sect3><title>cupsd</title>
<para><command>cupsd</command> is the scheduler for the Common Unix Printing 
System.
</para></sect3>

<sect3><title>accept</title>
<para><command>accept</command> instructs the printing system to accept print 
jobs to the specified destinations.
</para></sect3>

<sect3><title>reject</title>
<para><command>reject</command> instructs the printing system to
reject print jobs to the specified destinations.
</para></sect3>

<sect3><title>cupsaddsmb</title>
<para><command>cupsaddsmb</command> exports printers to the SAMBA software for
use with Windows clients.
</para></sect3>

<sect3><title>lpadmin</title>
<para><command>lpadmin</command> configures printer and class queues provided 
by <acronym>CUPS</acronym>.
</para></sect3>

<sect3><title>lpinfo</title>
<para><command>lpinfo</command> lists the available devices or drivers known to 
the <acronym>CUPS</acronym> server.
</para></sect3>

<sect3><title>lpmove</title>
<para><command>lpmove</command> moves the specified job to a new destination.
</para></sect3>

<sect3><title>cupstestppd</title>
<para><command>cupstestppd</command> tests the conformance of
<filename>PPD</filename> files.
</para></sect3>

<sect3><title>lpq</title>
<para><command>lpq</command> shows the current print queue status on the named 
printer.
</para></sect3>

<sect3><title>lpr</title>
<para><command>lpr</command> submits files for printing.
</para></sect3>

<sect3><title>lprm</title>
<para><command>lprm</command> cancels print jobs that have been queued for 
printing.
</para></sect3>

<sect3><title>cancel</title>
<para><command>cancel</command> cancels existing print jobs.
</para></sect3>

<sect3><title>disable</title>
<para><command>disable</command> stops the named printers or classes.
</para></sect3>

<sect3><title>enable</title>
<para><command>enable</command> starts the named printers or classes.
</para></sect3>

<sect3><title>lp</title>
<para><command>lp</command> submits files for printing or alters a pending job.
</para></sect3>

<sect3><title>lpoptions</title>
<para><command>lpoptions</command> displays or sets printer options and 
defaults.
</para></sect3>

<sect3><title>lpstat</title>
<para><command>lpstat</command> displays status information about the 
current classes, jobs, and printers.</para></sect3>

<sect3><title>lppasswd</title>
<para><command>lppasswd</command> adds, changes or deletes passwords in 
the <application><acronym>CUPS</acronym></application> digest password file 
<filename>passwd.md5</filename>.
</para></sect3>

<sect3><title>cups-config</title>
<para><command>cups-config</command> is the <application><acronym>CUPS
</acronym></application> program configuration utility.
</para></sect3>

</sect2>

</sect1>
