<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY ntfs-3g-download-http
           "https://tuxera.com/opensource/ntfs-3g_ntfsprogs-&ntfs-3g-version;.tgz">
  <!ENTITY ntfs-3g-download-ftp  "">
  <!ENTITY ntfs-3g-md5sum        "a038af61be7584b79f8922ff11244090">
  <!ENTITY ntfs-3g-size          "1.3&nbsp;Mo">
  <!ENTITY ntfs-3g-buildsize     "22&nbsp;Mo">
  <!ENTITY ntfs-3g-time          "0.2 SBU">
]>

<sect1 id="ntfs-3g" xreflabel="ntfs-3g-&ntfs-3g-version;">
  <?dbhtml filename="ntfs-3g.html"?>


  <title>ntfs-3g-&ntfs-3g-version;</title>

  <indexterm zone="ntfs-3g">
    <primary sortas="a-ntfs-3g">ntfs-3g</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à Ntfs-3g</title>

    <note>
      <para id='ntfs3-kernel'>
        Un nouveau pilote NTFS en lecture-écriture, NTFS3, a été ajouté au noyau
Linux à partir de la version 5.15. Les performances de NTFS3 sont bien
meilleures que ntfs--3g. Pour activer NTFS3, activez les options suivantes
dans la configuration du noyau et recompilez le noyau si nécessaire&nbsp;:
      </para>

<screen><literal>File systems  ---&gt;
  &lt;*/M&gt; NTFS Read-Write file system support [CONFIG_NTFS3_FS]</literal></screen>

    <indexterm zone="ntfs-3g ntfs3-kernel">
      <primary sortas="d-ntfs3">Prise en charge NTFS en lecture-écriture dans le noyau</primary>
    </indexterm>

      <para>
        Pour vous assurer que la commande <command>mount</command> utilise NTFS3
pour les partitions ntfs, créez un script enveloppe&nbsp;:
      </para>

<screen role="nodump"><userinput>cat &gt; /usr/sbin/mount.ntfs &lt;&lt; "EOF" &amp;&amp;
<literal>#!/bin/sh
exec mount -t ntfs3 "$@"</literal>
EOF
chmod -v 755 /usr/sbin/mount.ntfs</userinput></screen>

      <para>
        Maintenant que la prise en charge est disponible dans le noyau, ntfs-3g
n'est plus nécessaire que si vous avez besoin de ses utilitaires (par
exemple, pour créer des systèmes de fichiers NTFS).
      </para>
    </note>

    <para>
      Le paquet <application>Ntfs-3g</application> contient un pilote stable et
libre pour lire et écrire les partitions NTFS. Les partitions NTFS sont
utilisées par la plupart des systèmes d'exploitation de Microsoft. Ntfs-3g
vous permet de monter des partitions NTFS en mode lecture-écriture depuis
votre système Linux. Il utilise le module noyau FUSE pour pouvoir
implémenter le support NTFS en espace utilisateur. Ce paquet contient aussi
divers utilitaires utiles pour manipuler des partitions NTFS.
    </para>

    &lfs113_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&ntfs-3g-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP)&nbsp;: <ulink url="&ntfs-3g-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5&nbsp;: &ntfs-3g-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &ntfs-3g-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &ntfs-3g-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &ntfs-3g-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de Ntfs-3g</bridgehead>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      <ulink url="https://github.com/libfuse/libfuse">fuse 2.x</ulink> (cela
désactive les montages utilisateurs)
    </para>

    <para condition="html" role="usernotes">
      Notes utilisateur&nbsp;: <ulink url="&blfs-wiki;/ntfs-3g"/>
    </para>
  </sect2>

  <sect2 role="kernel" id="ntfs-3g-kernel">
    <title>Configuration du noyau</title>

    <para>
      Activer les options suivantes dans la configuration du noyau et recompilez
le noyau si nécessaire&nbsp;:
    </para>

<screen><literal>File systems  ---&gt;
  &lt;*/M&gt; FUSE (Filesystem in Userspace) support [CONFIG_FUSE_FS]</literal></screen>

    <indexterm zone="ntfs-3g ntfs-3g-kernel">
      <primary sortas="d-ntfs-3g">ntfs-3g</primary>
    </indexterm>
  </sect2>

  <sect2 role="installation">
    <title>Installation de Ntfs-3g</title>



    <!--
    <para>

      First, adapt <application>Ntfs-3g</application> to the merged-/usr
      changes:
    </para>

<screen><userinput remap="pre">sed -i 's|/sbin|$(rootsbindir)|' {ntfsprogs,src}/Makefile.in</userinput></screen>
-->
<para>
      Installez <application>Ntfs-3g</application> en exécutant les commandes
suivantes&nbsp;:
    </para>

<screen><userinput>./configure --prefix=/usr        \
            --disable-static     \
            --with-fuse=internal \
            --docdir=/usr/share/doc/ntfs-3g-&ntfs-3g-version; &amp;&amp;
make</userinput></screen>

    <para>
      Ce paquet n'a pas de suite de tests.
    </para>

    <para>
      Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>make install &amp;&amp;</userinput></screen>

    <para>
      Il est recommandé d'utiliser le pilote NTFS3 du noyau pour monter des
systèmes de fichiers NTFS, au lieu de ntfs-3g (voir la remarque au début de
cette page). Cependant, si vous voulez utiliser ntfs-3g pour monter des
systèmes de fichiers NTFS malgré tout, créez un lien symbolique pour la
commande <command>mount</command>&nbsp;:
    </para>

<screen role="nodump"><userinput>ln -sv ../bin/ntfs-3g /usr/sbin/mount.ntfs &amp;&amp;
ln -sv ntfs-3g.8 /usr/share/man/man8/mount.ntfs.8</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/static-libraries.xml"/>


    <!--
    <para>

      <command>patch -Np1 -i ...</command>: This command applies a security
      patch from upstream to fix ntfs-3g on systems that use setuid for the
      executable.
    </para>
-->
<para>
      <parameter>--with-fuse=internal</parameter>&nbsp;: Ce paramètre force
<application>ntfs-3g</application> à utiliser une copie interne de la
bibliothèque <application>fuse-2.x</application>. Ceci est requis si vous
souhaitez permettre aux utilisateurs de monter des partitions NTFS.
    </para>

    <para>
      <option>--disable-ntfsprogs</option>&nbsp;: Désactive l'installation de
différents utilitaires utilisés pour la manipulation des partitions NTFS.
    </para>

    <para>
      <command>chmod -v 4755 /usr/bin/ntfs-3g</command>&nbsp;: Fait que mount.ntfs
est initialisé setuid root pour autoriser les utilisateurs non root à monter
des partitions NTFS.
    </para>

  </sect2>

  <sect2 role="configuration">
    <title>Utilisation de Ntfs-3g</title>

    <para>
      Pour monter une partition Windows au démarrage, mettez une ligne comme cela
dans /etc/fstab&nbsp;:
    </para>

    <screen>/dev/sda1 /mnt/windows auto defaults 0 0</screen>

    <para>
      Pour autoriser les utilisateurs à monter une clé USB avec un système de
fichiers NTFS, mettez une ligne similaire à cela (en changeant sdc1 en ce
que les clés USB sont sur votre système) dans /etc/fstab&nbsp;:
    </para>

    <screen>/dev/sdc1 /mnt/usb auto user,noauto,umask=0,utf8 0 0</screen>

    <para>
      Pour que l'utilisateur qui peut monter une clé USB puisse écrire dans
<filename class="directory">/mnt/usb</filename> alors en tant qu'utilisateur
<systemitem class="username">root</systemitem>&nbsp;:
    </para>

<screen role="nodump"><userinput>chmod -v 777 /mnt/usb</userinput></screen>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèque installée</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>
          lowntfs-3g, mkfs.ntfs, mkntfs, mount.lowntfs-3g, mount.ntfs, mount.ntfs-3g,
ntfs-3g, ntfs-3g.probe, ntfscat, ntfsclone, ntfscluster, ntfscmp, ntfscp,
ntfsfix, ntfsinfo, ntfslabel, ntfsls, ntfsresize et ntfsundelete
        </seg>
        <seg>
          libntfs-3g.so
        </seg>
        <seg>
          /usr/include/ntfs-3g et /usr/share/doc/ntfs-3g
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?> <?dbhtml list-presentation="table"?>

      <varlistentry id="lowntfs-3g">
        <term><command>lowntfs-3g</command></term>
        <listitem>
          <para>
            est similaire à ntfs-3g mais utilise l'interface bas niveau de Fuse
          </para>
          <indexterm zone="ntfs-3g lowntfs-3g">
            <primary sortas="b-lowntfs-3g">lowntfs-3g</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mkfs.ntfs">
        <term><command>mkfs.ntfs</command></term>
        <listitem>
          <para>
            est un lien symbolique vers mkntfs
          </para>
          <indexterm zone="ntfs-3g mkfs.ntfs">
            <primary sortas="b-mkfs.ntfs">mkfs.ntfs</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mkntfs">
        <term><command>mkntfs</command></term>
        <listitem>
          <para>
            créé un système de fichier NTFS
          </para>
          <indexterm zone="ntfs-3g mkntfs">
            <primary sortas="b-mkntfs">mkntfs</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mount.lowntfs-3g">
        <term><command>mount.lowntfs-3g</command></term>
        <listitem>
          <para>
            est un lien symbolique vers lowntfs-3g
          </para>
          <indexterm zone="ntfs-3g mount.lowntfs-3g">
            <primary sortas="b-mount.lowntfs-3g">mount.lowntfs-3g</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mount.ntfs">
        <term><command>mount.ntfs</command></term>
        <listitem>
          <para>
            monte un système de fichier NTFS
          </para>
          <indexterm zone="ntfs-3g mount.ntfs">
            <primary sortas="b-mount.ntfs">mount.ntfs</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mount.ntfs-3g">
        <term><command>mount.ntfs-3g</command></term>
        <listitem>
          <para>
            est un lien symbolique vers ntfs-3g
          </para>
          <indexterm zone="ntfs-3g mount.ntfs-3g">
            <primary sortas="b-mount.ntfs-3g">mount.ntfs-3g</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ntfs-3g-prog">
        <term><command>ntfs-3g</command></term>
        <listitem>
          <para>
            est un pilote NTFS, qui peut créer, effacer, renommer, déplacer des
fichiers, des répertoires, des liens en dur, et des flux; il peut aussi lire
et écrire des fichiers, incluant les flux, les fichiers fragmentés et les
fichiers compressés de façon transparente; il peut aussi gérer les fichiers
spéciaux comme les liens symboliques, les périphériques, et les FIFOs; de
plus il fournit la gestion standard des permissions et des appartenances des
fichiers en incluant les ACL POSIX
          </para>
          <indexterm zone="ntfs-3g ntfs-3g-prog">
            <primary sortas="b-ntfs-3g">ntfs-3g</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ntfs-3g.probe">
        <term><command>ntfs-3g.probe</command></term>
        <listitem>
          <para>
            teste si un volume NTFS est montable en lecture seule ou en
lecture-écriture, et sort avec une valeur de statut correspondante. Le
volume peut être un périphérique bloc ou un fichier image
          </para>
          <indexterm zone="ntfs-3g ntfs-3g.probe">
            <primary sortas="b-ntfs-3g.probe">ntfs-3g.probe</primary>
          </indexterm>
        </listitem>
      </varlistentry>



      <!-- Not present in 2021.8.22
      <varlistentry id="ntfs-3g.secaudit">

        <term><command>ntfs-3g.secaudit</command></term>
        <listitem>
          <para>
            audits NTFS Security Data
          </para>
          <indexterm zone="ntfs-3g ntfs-3g.secaudit">
            <primary sortas="b-ntfs-3g.secaudit">ntfs-3g.secaudit</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ntfs-3g.usermap">
        <term><command>ntfs-3g.usermap</command></term>
        <listitem>
          <para>
            creates the file defining the mapping of Windows accounts to Linux
            logins for users who owns files which should be visible from both
            Windows and Linux
          </para>
          <indexterm zone="ntfs-3g ntfs-3g.usermap">
            <primary sortas="b-ntfs-3g.usermap">ntfs-3g.usermap</primary>
          </indexterm>
        </listitem>
      </varlistentry>
-->
<varlistentry id="ntfscluster">
        <term><command>ntfscluster</command></term>
        <listitem>
          <para>
            identifie les fichiers dans une région spécifique d'un volume NTFS
          </para>
          <indexterm zone="ntfs-3g ntfscluster">
            <primary sortas="b-ntfscluster">ntfscluster</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ntfscp">
        <term><command>ntfscp</command></term>
        <listitem>
          <para>
            copie un fichier dans un volume NTFS
          </para>
          <indexterm zone="ntfs-3g ntfscp">
            <primary sortas="b-ntfscp">ntfscp</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ntfsfix">
        <term><command>ntfsfix</command></term>
        <listitem>
          <para>
            corriges les erreurs courantes et force Windows à vérifier une partition
NTFS
          </para>
          <indexterm zone="ntfs-3g ntfsfix">
            <primary sortas="b-ntfsfix">ntfsfix</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ntfsls">
        <term><command>ntfsls</command></term>
        <listitem>
          <para>
            liste les répertoires contenus dans un système de fichiers NTFS
          </para>
          <indexterm zone="ntfs-3g ntfsls">
            <primary sortas="b-ntfsls">ntfsls</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ntfscat">
        <term><command>ntfscat</command></term>
        <listitem>
          <para>
            affiche les fichiers NTFS et les flux sur la sortie standard
          </para>
          <indexterm zone="ntfs-3g ntfscat">
            <primary sortas="b-ntfscat">ntfscat</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ntfsclone">
        <term><command>ntfsclone</command></term>
        <listitem>
          <para>
            copie un système de fichiers NTFS
          </para>
          <indexterm zone="ntfs-3g ntfsclone">
            <primary sortas="b-ntfsclone">ntfsclone</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ntfscmp">
        <term><command>ntfscmp</command></term>
        <listitem>
          <para>
            compare deux systèmes de fichiers NTFS et donne les différences
          </para>
          <indexterm zone="ntfs-3g ntfscmp">
            <primary sortas="b-ntfscmp">ntfscmp</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ntfsinfo">
        <term><command>ntfsinfo</command></term>
        <listitem>
          <para>
            donne les attributs d'un fichier
          </para>
          <indexterm zone="ntfs-3g ntfsinfo">
            <primary sortas="b-ntfsinfo">ntfsinfo</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ntfslabel">
        <term><command>ntfslabel</command></term>
        <listitem>
          <para>
            affiche ou change l'étiquette d'un système de fichiers NTFS
          </para>
          <indexterm zone="ntfs-3g ntfslabel">
            <primary sortas="b-ntfslabel">ntfslabel</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ntfsresize">
        <term><command>ntfsresize</command></term>
        <listitem>
          <para>
            redimensionne un système de fichiers NTFS sans perte de données
          </para>
          <indexterm zone="ntfs-3g ntfsresize">
            <primary sortas="b-ntfsresize">ntfsresize</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ntfsundelete">
        <term><command>ntfsundelete</command></term>
        <listitem>
          <para>
            récupère un fichier effacé dans un volume NTFS
          </para>
          <indexterm zone="ntfs-3g ntfsundelete">
            <primary sortas="b-ntfsundelete">ntfsundelete</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libntfs-3g">
        <term><filename class="libraryfile">libntfs-3g.so</filename></term>
        <listitem>
          <para>
            contient les fonctions de l'API de Ntfs-3g
          </para>
          <indexterm zone="ntfs-3g libntfs-3g">
            <primary sortas="c-libntfs-3g">libntfs-3g.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect2>

</sect1>
