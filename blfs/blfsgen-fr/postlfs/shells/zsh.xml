<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY zsh-download-http "https://www.zsh.org/pub/zsh-&zsh-version;.tar.xz">
  <!ENTITY zsh-download-ftp  "">
  <!ENTITY zsh-md5sum        "e02a5428620b3dd268800c7843b3dd4d">
  <!ENTITY zsh-size          "3.0 Mo">
  <!ENTITY zsh-buildsize     "72 Mo (avec la documentation et les tests)">
  <!ENTITY zsh-time          "1,3 SBU (avec parallélisme = 4&nbsp;; avec la documentation et les tests)">

  <!ENTITY zsh-doc-md5sum    "ef8514401a81bb1a4c4b655ebda8a1a2">
  <!ENTITY zsh-doc-size      "3.0 Mo">
]>

<sect1 id="zsh" xreflabel="zsh-&zsh-version;">
  <?dbhtml filename="zsh.html"?>

  <sect1info>
<date>$Date$</date></sect1info>

  <title>zsh-&zsh-version;</title>

  <indexterm zone="zsh">
    <primary sortas="a-zsh">zsh</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à zsh</title>

    <para>
      Le paquet <application>ZSH</application> contient un interpréteur de
commandes (shell) utilisable en tant que shell de connexion interactif et en
tant que manipulateur de commandes de shell script. Parmi les shells
standards, <application>ZSH</application> est l'un des plus ressemblant à
<application>KSH</application> mais il comprend beaucoup d'améliorations.
    </para>

    &lfs110_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&zsh-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP)&nbsp;: <ulink url="&zsh-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5 du téléchargement&nbsp;: &zsh-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &zsh-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &zsh-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &zsh-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Documentation facultative&nbsp;: <ulink
url="https://www.zsh.org/pub/zsh-&zsh-version;-doc.tar.xz"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5 de la documentation&nbsp;: &zsh-doc-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille de téléchargement de la documentation&nbsp;: &zsh-doc-size;
        </para>
      </listitem>
    </itemizedlist>

    <note>
      <para>
        Quand il y a une nouvelle publication de <application>zsh</application>, les
anciens fichiers montrés précédemment sont déplacés dans un nouveau
répertoire du serveur&nbsp;: <ulink url="https://www.zsh.org/pub/old/"/>.
      </para>
    </note>

    <bridgehead renderas="sect3">Dépendances de zsh</bridgehead>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      <xref linkend="libcap-pam"/>, <xref linkend="pcre"/> et <xref
linkend="valgrind"/>,
    </para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;: <ulink url="&blfs-wiki;/zsh"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de zsh</title>

    <para>
      Si vous avez téléchargé la documentation facultative, déballez-la avec la
commande suivante&nbsp;:
    </para>

<!--    <note>

      <para>
        Using a script to build with "su -c script" may produce a funny
        configure error message: "no controlling tty". If this happens, add
        the switch -\-with-tcsetpgrp to configure.
      </para>
    </note>
-->
<screen><userinput>tar --strip-components=1 -xvf ../zsh-&zsh-version;-doc.tar.xz</userinput></screen>


    <para>
      Installez <application>zsh</application> en lançant les commandes
suivantes&nbsp;:
    </para>

<screen><userinput>./configure --prefix=/usr         \
            --sysconfdir=/etc/zsh \
            --enable-etcdir=/etc/zsh                  &amp;&amp;
make                                                  &amp;&amp;

makeinfo  Doc/zsh.texi --plaintext -o Doc/zsh.txt     &amp;&amp;
makeinfo  Doc/zsh.texi --html      -o Doc/html        &amp;&amp;
makeinfo  Doc/zsh.texi --html --no-split --no-headers -o Doc/zsh.html</userinput></screen>

    <para>
      Si vous avez installé <xref linkend="texlive"/>, vous pouvez construire la
documentation PDF en exécutant les commandes suivantes&nbsp;:
    </para>

<screen remap="doc"><userinput>texi2pdf  Doc/zsh.texi -o Doc/zsh.pdf</userinput></screen>

    <para>
      Pour tester les résultats lancez&nbsp;: <command>make check</command>.
    </para>

    <para>
      Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>make install                              &amp;&amp;
make infodir=/usr/share/info install.info &amp;&amp;

install -v -m755 -d                 /usr/share/doc/zsh-&zsh-version;/html &amp;&amp;
install -v -m644 Doc/html/*         /usr/share/doc/zsh-&zsh-version;/html &amp;&amp;
install -v -m644 Doc/zsh.{html,txt} /usr/share/doc/zsh-&zsh-version;</userinput></screen>

    <para>
      Si vous avez téléchargé la documentation facultative, installez-la en
exécutant les commandes suivantes en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>make htmldir=/usr/share/doc/zsh-&zsh-version;/html install.html &amp;&amp;
install -v -m644 Doc/zsh.dvi /usr/share/doc/zsh-&zsh-version;</userinput></screen>

    <para>
      Si vous avez construit la documentation au format PDF, installez-le en
exécutant la commande suivante en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"
        remap="doc"><userinput>install -v -m644 Doc/zsh.pdf /usr/share/doc/zsh-&zsh-version;</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para>
      <parameter>--sysconfdir=/etc/zsh</parameter> et
<parameter>--enable-etcdir=/etc/zsh</parameter>&nbsp;: Ces paramètres sont
utilisés pour que tous les fichiers de configuration de
<application>zsh</application> soient regroupés dans le répertoire <filename
class='directory'>/etc/zsh</filename>. Ne mettez pas ces paramètres si vous
souhaitez assurer une compatibilité historique en mettant tous les fichiers
dans le répertoire <filename class='directory'>/etc</filename>.
    </para>

    <para>
      <option>--enable-cap</option>&nbsp;: Ce paramètre active les possibilités
POSIX.
    </para>

    <para>
      <option>--disable-gdbm</option>&nbsp;: Ce paramètre désactive l'utilisation
de la bibliothèque <application>GDBM</application>.
    </para>

    <para>
      <option>--enable-pcre</option>&nbsp;: Ce paramètre permet à zsh d'utiliser
la bibliothèque d'expression régulière <application>PCRE</application> dans
les intégrations du shell.
    </para>
  </sect2>

  <sect2 role="configuration">
    <title>Configuration de ZSH</title>

    <sect3 id="zsh-config">
      <title>Fichiers de configuration</title>

      <para>
        Il y a tout un tas de fichiers de configuration pour
<application>ZSH</application>, incluant
<filename>/etc/zsh/zshenv</filename>,
<filename>/etc/zsh/zprofile</filename>, <filename>/etc/zsh/zshrc</filename>,
<filename>/etc/zsh/zlogin</filename> et
<filename>/etc/zsh/zlogout</filename>. Vous pouvez trouver plus
d'informations à leur sujet dans <filename>zsh(1)</filename> et les pages de
manuel qui s'y rapportent.
      </para>

      <para>
        La première fois que zsh est lancé, vous devrez répondre à quelques
questions. Les réponses seront utilisées pour créer un fichier
<filename>~/.zshrc</filename>. Si vous souhaitez lancer ces questions de
nouveau, lancez <command>zsh
/usr/share/zsh/&zsh-version;/functions/zsh-newuser-install -f</command>.
      </para>

      <para>
        Plusieurs invites de commandes avancées sont construites. Dans le shell
<command>zsh</command>, démarrez le support des invites de commandes
avancées avec <command>autoload -U promptinit</command>, ensuite
<command>promptinit</command>. Les noms des invites de commandes disponibles
sont listés avec <command>prompt -l</command>. Sélectionnez-en une en
particulier avec <command>prompt
<literal>&lt;prompt-name&gt;</literal></command>. Affichez toutes les
invites de commandes disponibles avec <command>prompt -p</command>. En
dehors de la liste et les commandes d'affichages, vous pouvez insérer les
autres dans <filename>~/.zshrc</filename> pour qu'elles soient
automatiquement exécutées au démarrage du shell, avec l'invite de commande
de votre choix.
      </para>

      <indexterm zone="zsh zsh-config">
        <primary sortas="e-etc-zsh-zshenv">/etc/zsh/zshenv</primary>
      </indexterm>

      <indexterm zone="zsh zsh-config">
        <primary sortas="e-etc-zsh-zprofile">/etc/zsh/zprofile</primary>
      </indexterm>

      <indexterm zone="zsh zsh-config">
        <primary sortas="e-etc-zsh-zshrc">/etc/zsh/zshrc</primary>
      </indexterm>

      <indexterm zone="zsh zsh-config">
        <primary sortas="e-etc-zsh-zlogin">/etc/zsh/zlogin</primary>
      </indexterm>

      <indexterm zone="zsh zsh-config">
        <primary sortas="e-etc-zsh-zlogout">/etc/zsh/zlogout</primary>
      </indexterm>

    </sect3>

    <sect3>
      <title>Informations sur la configuration</title>

      <para>
        Mettez à jour <filename>/etc/shells</filename> pour inclure les noms de
programme shell <application>ZSH</application> (en tant qu'utilisateur
<systemitem class="username">root</systemitem>)&nbsp;:
      </para>

<screen role="root"><userinput>cat &gt;&gt; /etc/shells &lt;&lt; "EOF"
<literal>/bin/zsh</literal>
EOF</userinput></screen>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>zsh et zsh-&zsh-version; (en lien dur)</seg>
        <seg>Plusieurs greffons de modules d'aide sous /usr/lib/zsh/&zsh-version;/</seg>
        <seg>/usr/{lib,share}/zsh et /usr/share/doc/zsh-&zsh-version;</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="zsh-prog">
        <term><command>zsh</command></term>
        <listitem>
          <para>
            est un shell pour éditer la ligne de commande, qui a une fonction de
vérification d'orthographe, de complétion programmable des commandes, des
fonctions shell (avec auto-chargement), un mécanisme d'historique et un tas
d'autres fonctionnalités
          </para>
          <indexterm zone="zsh zsh-prog">
            <primary sortas="b-zsh">zsh</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
