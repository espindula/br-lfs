<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY cracklib-url "https://github.com/cracklib/cracklib/releases/download">

  <!ENTITY cracklib-download-http "&cracklib-url;/v&cracklib-version;/cracklib-&cracklib-version;.tar.xz">
  <!ENTITY cracklib-download-ftp  "">
  <!ENTITY cracklib-md5sum        "a6dfb1766aab43a54e1cbd78abf0a20a">
  <!ENTITY cracklib-size          "452&nbsp;Ko">
  <!ENTITY cracklib-buildsize     "6,8&nbsp;Mo">
  <!ENTITY cracklib-time          "0,1&nbsp;SBU">

  <!ENTITY crackdict-download     "&cracklib-url;/v&cracklib-version;/cracklib-words-&cracklib-version;.xz">
  <!ENTITY crackdict-size         "4,0&nbsp;Mo">
  <!ENTITY crackdict-md5sum       "f27804022dbf2682a7f7c353317f9a53">
]>

<sect1 id="cracklib" xreflabel="CrackLib-&cracklib-version;">
  <?dbhtml filename="cracklib.html"?>


  <title>CrackLib-&cracklib-version;</title>

  <indexterm zone="cracklib">
    <primary sortas="a-CrackLib">CrackLib</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à CrackLib</title>

    <para>
      Le paquet <application>CrackLib</application> contient une bibliothèque
utilisée pour imposer des mots de passe forts en comparant les mots de passe
sélectionnés par l'utilisateur avec des mots dans des listes choisies.
    </para>

    &lfs120_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&cracklib-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP)&nbsp;: <ulink url="&cracklib-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5&nbsp;: &cracklib-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &cracklib-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &cracklib-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &cracklib-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>
    <itemizedlist spacing="compact">
      <para>Liste de mots recommandée pour les pays anglophones&nbsp;:</para>
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&crackdict-download;"/>
        </para>
      </listitem>
      <listitem>
        <para>
           Somme de contrôle MD5&nbsp;: &crackdict-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
            Taille du téléchargement&nbsp;: &crackdict-size;
        </para>
      </listitem>
    </itemizedlist>

    <para>
      Il y a des listes de mots supplémentaires disponibles au téléchargement, par
exemple sur <ulink
url="https://wiki.skullsecurity.org/index.php/Passwords"/>.
<application>CrackLib</application> peut utiliser autant de listes de mots
que vous souhaitez installer.
    </para>

    <important>
      <para>
        Les utilisateurs ont tendance à baser leur mot de passe sur des mots
ordinaires de leur langue et les pirates le
savent. <application>CrackLib</application> vise à filtrer de tels mots de
passe dès la source en utilisant un dictionnaire créé à partir de listes de
mots. Pour cela, la/les liste(s) de mots à utiliser avec
<application>CrackLib</application> doit/doivent être exhaustive(s) et
contenir les mots et les combinaisons de touche qui ont des chances d'être
choisies par les utilisateurs du système comme mots de passe (devinables).
      </para>

      <para>
        La liste de mots par défaut dont on recommande plus haut le téléchargement
joue en général ce rôle dans les pays anglophones. Dans d'autres situations,
il peut être nécessaire de télécharger (ou de créer), des listes de mots
supplémentaires.
      </para>

      <para>
        Remarquez que les listes de mots adaptées à la vérification orthographique
ne sont pas utilisables comme listes de mots pour
<application>CrackLib</application> dans des pays ayant des alphabets à base
non latine à cause des <quote>combinaisons de touche basées sur le
mot</quote> qui produisent de mauvais mots de passe.
      </para>
    </important>

  </sect2>

  <sect2 role="installation">
    <title>Installation de CrackLib</title>

    <para>
      Installez <application>CrackLib</application> en exécutant les commandes
suivantes&nbsp;:
    </para>

<screen><userinput>autoreconf -fiv &amp;&amp;

PYTHON=python3               \
./configure --prefix=/usr    \
            --disable-static \
            --with-default-dict=/usr/lib/cracklib/pw_dict &amp;&amp;
make</userinput></screen>

    <para>
      Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>make install</userinput></screen>

    <para>
      Lancez les commandes suivantes en tant qu'utilisateur <systemitem
class="username">root</systemitem> pour installer la liste de mots
recommandée et créer le dictionnaire
<application>CrackLib</application>. D'autres listes de mots (au format
texte, un mot par ligne) peuvent être utilisées, simplement en les
installant dans <filename class="directory">/usr/share/dict</filename> et en
les ajoutant à la commande <command>create-cracklib-dict</command>.
    </para>

<screen role="root"><userinput>install -v -m644 -D    ../cracklib-words-&cracklib-version;.xz \
                         /usr/share/dict/cracklib-words.xz    &amp;&amp;

unxz -v                  /usr/share/dict/cracklib-words.xz    &amp;&amp;
ln -v -sf cracklib-words /usr/share/dict/words                &amp;&amp;
echo $(hostname) >>      /usr/share/dict/cracklib-extra-words &amp;&amp;
install -v -m755 -d      /usr/lib/cracklib                    &amp;&amp;

create-cracklib-dict     /usr/share/dict/cracklib-words \
                         /usr/share/dict/cracklib-extra-words</userinput></screen>

    <para>
      Si vous le désirez, vérifiez le bon fonctionnement de la bibliothèque en
tant qu'utilisateur non privilégié en exécutant la commande suivante&nbsp;:
    </para>

<screen remap="test"><userinput>make test</userinput></screen>

    <important>
      <para>
        Si vous installez <application>CrackLib</application> après avoir terminé
votre système LFS, et si vous avez installé le paquet
<application>Shadow</application>, vous devez réinstaller <xref
linkend="shadow"/> si vous souhaitez fournir le support des mots de passe
forts sur votre système. Si maintenant vous allez installer le paquet <xref
linkend="linux-pam"/>, vous pouvez ignorer cette remarque vu que
<application>Shadow </application>sera réinstallé après l'installation de
<application>Linux-PAM</application>.
      </para>
    </important>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para>
      <command>autoreconf -fiv</command>&nbsp;: le script configure embarqué avec
ce paquet est trop vieux pour trouver la bonne chaine de version de Python
3.10 et supérieur. Cette commande le régénère avec une version plus récente
des autotools, ce qui corrige le problème.
    </para>

    <para>
      <envar>PYTHON=python3</envar>&nbsp;: cela force l'installation des liaisons
python pour Python 3, même si Python 2 est installé.
    </para>

    <para>
      <parameter>--with-default-dict=/lib/cracklib/pw_dict</parameter>&nbsp;: Ce
paramètre oblige l'installation du dictionnaire
<application>CrackLib</application> à se faire dans l'arborescence <filename
class="directory">/lib</filename>.
    </para>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/static-libraries.xml"/>

    <para>
      <command>install -v -m644 -D ...</command>&nbsp;: Cette commande crée le
répertoire <filename class="directory">/usr/share/dict</filename> (s'il
n'existe pas déjà) et y installe la liste de mots compressée.
    </para>

    <para>
      <command>ln -v -s cracklib-words /usr/share/dict/words</command>&nbsp;: La
liste de mots est liée à <filename>/usr/share/dict/words</filename> vu
qu'historiquement, <filename>words</filename> est la liste de mots
principale dans le répertoire <filename
class="directory">/usr/share/dict</filename>. Supprimez cette commande si
vous avez déjà installé un fichier
<filename>/usr/share/dict/words</filename> sur votre système.
    </para>

    <para>
      <command>echo $(hostname) >>... </command>&nbsp;: La valeur de
<command>hostname</command> est envoyée dans un fichier nommé
<filename>cracklib-extra-words</filename>. Ce fichier supplémentaire vise à
être une liste locale spécifique incluant des mots de passe faciles à
deviner tels que les noms de la société ou du département, les noms
d'utilisateurs, les noms de produit, les noms d'ordinateur, les noms de
domaine, etc.
    </para>

    <para>
      <command>create-cracklib-dict ...</command>&nbsp;: Cette commande crée le
dictionnaire <application>CrackLib</application> à partir des listes de
mots. Modifiez la commande pour ajouter une liste de mots supplémentaire que
vous avez installée.
    </para>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>cracklib-check, cracklib-format, cracklib-packer, cracklib-unpacker,
cracklib-update et create-cracklib-dict</seg>

        <seg>libcrack.so et _cracklibmodule.so (module <application>Python</application>)</seg>

        <seg>/usr/lib/cracklib, /usr/share/dict et /usr/share/cracklib</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?> <?dbhtml list-presentation="table"?>

      <varlistentry id="cracklib-check">
        <term><command>cracklib-check</command></term>
        <listitem>
          <para>
            est utilisé pour déterminer si un mot de passe est fort
          </para>
          <indexterm zone="cracklib cracklib-check">
            <primary sortas="b-cracklib-check">cracklib-check</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="cracklib-format">
        <term><command>cracklib-format</command></term>
        <listitem>
          <para>
            est utilisé pour formater des fichiers textes (minuscules pour tous les
mots, suppression des caractères de contrôle et tri des listes)
          </para>
          <indexterm zone="cracklib cracklib-format">
            <primary sortas="b-cracklib-format">cracklib-format</primary>
          </indexterm>
        </listitem>
      </varlistentry>

     <varlistentry id="cracklib-packer">
        <term><command>cracklib-packer</command></term>
        <listitem>
          <para>
            crée une base de données avec les mots lus depuis l'entrée standard
          </para>
          <indexterm zone="cracklib cracklib-packer">
            <primary sortas="b-cracklib-packer">cracklib-packer</primary>
          </indexterm>
        </listitem>
      </varlistentry>

     <varlistentry id="cracklib-unpacker">
        <term><command>cracklib-unpacker</command></term>
        <listitem>
          <para>
            affiche sur la sortie standard la base de données spécifiées
          </para>
          <indexterm zone="cracklib cracklib-packer">
            <primary sortas="b-cracklib-packer">cracklib-packer</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="create-cracklib-dict">
        <term><command>create-cracklib-dict</command></term>
        <listitem>
          <para>
            est utilisé pour créer le dictionnaire <application>CrackLib</application> à
partir des listes de mots données
          </para>
          <indexterm zone="cracklib create-cracklib-dict">
            <primary sortas="b-create-cracklib-dict">create-cracklib-dict</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libcrack">
        <term><filename class="libraryfile">libcrack.so</filename></term>
        <listitem>
          <para>
            fournit une méthode de parcours rapide du dictionnaire pour l'application
des mots de passe forts
          </para>
          <indexterm zone="cracklib libcrack">
            <primary sortas="c-libcrack">libcrack.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
