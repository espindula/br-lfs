<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY cyrus-sasl-download-http "https://github.com/cyrusimap/cyrus-sasl/releases/download/cyrus-sasl-&cyrus-sasl-version;/cyrus-sasl-&cyrus-sasl-version;.tar.gz">
  <!ENTITY cyrus-sasl-download-ftp  "">
  <!ENTITY cyrus-sasl-md5sum        "6f228a692516f5318a64505b46966cfa">
  <!ENTITY cyrus-sasl-size          "3.9 Mo">
  <!ENTITY cyrus-sasl-buildsize     "28&nbsp;Mo">
  <!ENTITY cyrus-sasl-time          "0,2&nbsp;SBU">
]>

<sect1 id="cyrus-sasl" xreflabel="Cyrus SASL-&cyrus-sasl-version;">
  <?dbhtml filename="cyrus-sasl.html"?>

  <sect1info>
<date>$Date$</date></sect1info>

  <title>Cyrus SASL-&cyrus-sasl-version;</title>

  <indexterm zone="cyrus-sasl">
    <primary sortas="a-Cyrus-SASL">Cyrus SASL</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à Cyrus SASL</title>

    <para>
      Le paquet <application>Cyrus SASL</application> contient une implémentation
de Simple Authentication and Security Layer (simple couche
d'authentification et de sécurité), une méthode pour ajouter la prise en
charge de l'authentification aux protocoles basés sur la connexion. Pour
utiliser SASL, un protocole se compose d'une commande d'identification et
d'authentification d'un utilisateur sur un serveur ainsi que d'une
négociation éventuelle de la protection des interactions suivantes du
protocole. Si son utilisation est négociée, une couche de sécurité est
insérée entre le protocole et la connexion.
    </para>

    <!-- To test this package at freeze, run the following command:
         testsaslauthd -u <current user>
 -p <password>
         after saslauthd is started. -->
&lfs112_checked;

    
    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&cyrus-sasl-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP)&nbsp;: <ulink url="&cyrus-sasl-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5&nbsp;: &cyrus-sasl-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &cyrus-sasl-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &cyrus-sasl-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &cyrus-sasl-time;
        </para>
      </listitem>
    </itemizedlist>

    

    <!-- Not needed anymore
    <bridgehead renderas="sect3">
Additional Downloads</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Required patch:
          <ulink url="&patch-root;/cyrus-sasl-&cyrus-sasl-version;-doc_fixes-1.patch"/>
        </para>
      </listitem>
      <!- -<listitem>
        <para>
          Required patch:
          <ulink url="&patch-root;/cyrus-sasl-&cyrus-sasl-version;-openssl-1.1.0-1.patch"/>
       </para>
    </listitem>- ->
    </itemizedlist>
    -->
<bridgehead renderas="sect3">Dépendances de Cyrus SASL</bridgehead>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="db"/>
    </para>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      <!--<xref linkend="openjdk"/>
, Removed in 2.1.28 -->
<xref linkend="linux-pam"/>, <xref linkend="mitkrb"/>, <xref
linkend="mariadb"/> ou <ulink url="https://www.mysql.com/">MySQL</ulink>,
<xref linkend="openldap"/>, <xref linkend="postgresql"/>, <xref
linkend="sqlite"/>, <ulink
url="https://stuff.mit.edu/afs/net.mit.edu/project/attic/krb4/">krb4</ulink>,
<ulink url="https://dmalloc.com/">Dmalloc</ulink>, <ulink
url="https://metacpan.org/pod/Pod::POM::View::Restructured">Pod::POM::View::Restructured</ulink>
et <ulink url="https://pypi.org/project/Sphinx">Sphinx</ulink>
    </para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;: <ulink url="&blfs-wiki;/cyrus-sasl"/>
    </para>
  </sect2>

  <sect2 role="installation">
    <title>Installation de Cyrus SASL</title>

    <note>
      <para>
        Ce paquet ne supporte pas la construction en parallèle.
      </para>
    </note>

    

    <!-- Without this patch, having Sphinx and/or doctools (doctools not tested)
         on the system causes an FTBFS when man pages are generated. The Sphinx
         and Docutils API has changed significantly between Sphinx-{1,2} and
         Sphinx-3.0.

    <para>

      First, fix a build failure if Sphinx or
      <xref role="nodep" linkend="docutils"/> is installed on the system:
    </para>

<screen><userinput remap="pre">patch -Np1 -i ../cyrus-sasl-2.1.27-doc_fixes-1.patch</userinput></screen>
    -->
<para>
      Installez <application>Cyrus SASL</application> en exécutant les commandes
suivantes&nbsp;:
    </para>

<screen><userinput>./configure --prefix=/usr        \
            --sysconfdir=/etc    \
            --enable-auth-sasldb \
            --with-dbpath=/var/lib/sasl/sasldb2 \
            --with-sphinx-build=no              \
            --with-saslauthd=/var/run/saslauthd &amp;&amp;
make -j1</userinput></screen>

    <para>
      Ce paquet n'a pas de suite de tests. Si vous envisagez d'utiliser le
mécanisme d'authentification GSSAPI, testez-le après l'installation du
paquet en utilisant le serveur donné comme exemple et les programmes clients
qui ont été construits à l'étape précédente. Vous pouvez trouver des
instructions pour effectuer cela sur <ulink
url="&hints-root;/downloads/files/cyrus-sasl.txt"/>.
    </para>

    <para>
      Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>make install &amp;&amp;
install -v -dm755                          /usr/share/doc/cyrus-sasl-&cyrus-sasl-version;/html &amp;&amp;
install -v -m644  saslauthd/LDAP_SASLAUTHD /usr/share/doc/cyrus-sasl-&cyrus-sasl-version;      &amp;&amp;
install -v -m644  doc/legacy/*.html        /usr/share/doc/cyrus-sasl-&cyrus-sasl-version;/html &amp;&amp;
install -v -dm700 /var/lib/sasl</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para>
      <parameter>--with-dbpath=/var/lib/sasl/sasldb2</parameter>&nbsp;: Ce
paramètre force la base de données <command>sasldb</command> à être créée
dans <filename class="directory">/var/lib/sasl</filename> au lieu de
<filename class="directory">/etc</filename>.
    </para>

    <para>
      <parameter>--with-saslauthd=/var/run/saslauthd</parameter>&nbsp;: Ce
paramètre oblige <command>saslauthd</command> à utiliser les données en
cours d'exécution de la variable du répertoire /<filename
class="directory">var/run/saslauthd</filename> conformément à la FHS.
    </para>

    <para>
      <parameter>--enable-auth-sasldb</parameter>&nbsp;: Ce paramètre active
l'authentification SASLDB.
    </para>

    <para>
      <option>--with-dblib=gdbm</option> : Ce paramètre oblige l'utilisation de
<application>GDBM</application> au lieu de <application>Berkeley
DB</application>.
    </para>

    <para>
      <option>--with-ldap</option>: Ce paramètre active l'utilisation avec
<application>OpenLDAP</application>.
    </para>

    <para>
      <!--There is a circular dependency with this
      parameter. See <ulink url="&blfs-wiki;/cyrus-sasl"/>
 for a solution to
      this problem.-->
<option>--enable-ldapdb</option>&nbsp;: ce paramètre active le moteur
d'authentification LDAPDB. 
    </para>



    <!-- Removed in 2.1.28
    <para>

      <option>- -enable-java</option>: This switch enables compiling of the
      <application>Java</application> support libraries.
    </para>
-->
<para>
      <option>--enable-login</option>&nbsp;: Cette option active
l'authentification LOGIN non supportée.
    </para>

    <para>
      <option>--enable-ntlm</option>&nbsp;: Cette option active l'authentification
NTLM non supportée.
    </para>

    <para>
      <command>install -v -m644 ...</command>&nbsp;: Ces commandes installent la
documentation qui n'est pas installée par la commande <command>make
install</command>.
    </para>

    <para>
      <command>install -v -m700 -d /var/lib/sasl</command>&nbsp;: Ces répertoires
doivent exister au démarrage de <command>saslauthd</command> ou pendant
l'utilisation de l'extension sasldb. Si vous n'allez pas utiliser le démon
ou les greffons, vous pouvez vous passer de la création de ce répertoire.
    </para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de Cyrus SASL</title>

    <sect3 id="cyrus-sasl-config">
      <title>Fichiers de configuration</title>

      <para>
        <filename>/etc/saslauthd.conf</filename> (pour la configuration LDAP de
<command>saslauthd</command>) et
<filename>/etc/sasl2/Appname.conf</filename> (où «&nbsp;Appname&nbsp;» est
le nom de l'application)
      </para>

      <indexterm zone="cyrus-sasl cyrus-sasl-config">
        <primary sortas="e-etc-saslauthd.conf">/etc/saslauthd.conf</primary>
      </indexterm>

    </sect3>

    <sect3>
      <title>Informations de configuration</title>

      <para>
        Voir <ulink url="https://www.cyrusimap.org/sasl/sasl/sysadmin.html"/> pour
des informations sur ce que contiennent les fichiers de configuration de
l'application.
      </para>

      <para>
        Voir <ulink
url="file:///usr/share/doc/cyrus-sasl-&cyrus-sasl-version;/LDAP_SASLAUTHD"/>
pour la configuration de <command>saslauthd</command> avec
<application>OpenLDAP</application>.
      </para>

      <para>
        Voir <ulink url="https://www.cyrusimap.org/sasl/sasl/gssapi.html#gssapi"/>
pour la configuration de <command>saslauthd</command> avec
<application>Kerberos</application>.
      </para>

    </sect3>

    <sect3 id="cyrus-sasl-init">
      <title><phrase revision="sysv">Script d'init</phrase><phrase
revision="systemd">Unité Systemd</phrase></title>

      <para revision="sysv">
        Si vous devez exécuter le démon <command>saslauthd</command> au démarrage du
système, installez le script de démarrage
<filename>/etc/rc.d/init.d/saslauthd</filename> fourni dans le paquet <xref
linkend="bootscripts"/> en utilisant la commande suivante&nbsp;:
      </para>

      <para revision="systemd">
        Si vous devez exécuter le démon <command>saslauthd</command> au démarrage du
système, installez l'unité<filename>saslauthd.service</filename> fournie
dans le paquet <xref linkend="systemd-units"/> en utilisant la commande
suivante&nbsp;:
      </para>

      <indexterm zone="cyrus-sasl cyrus-sasl-init">
        <primary sortas="f-saslauthd">saslauthd</primary>
      </indexterm>

<screen role="root"><userinput>make install-saslauthd</userinput></screen>

      <note>
        <para>
          Vous devrez modifier <filename
revision="sysv">/etc/sysconfig/saslauthd</filename><filename
revision="systemd">/etc/default/saslauthd</filename> et remplacer le
paramètre <option revision="sysv">AUTHMECH</option><option
revision="systemd">MECHANISM</option> par le mécanisme d'authentification
que vous désirez. <phrase revision="systemd">Le mécanisme d'authentification
par défaut est «&nbsp;shadow&nbsp;».</phrase>
        </para>
      </note>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèque installée</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>
          pluginviewer, saslauthd, sasldblistusers2, saslpasswd2 et testsaslauthd
        </seg>
        <seg>
          libsasl2.so
        </seg>
        <seg>
          /usr/include/sasl, /usr/lib/sasl2,
/usr/share/doc/cyrus-sasl-&cyrus-sasl-version; et /var/lib/sasl
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?> <?dbhtml list-presentation="table"?>

      <varlistentry id="pluginviewer">
        <term><command>pluginviewer</command></term>
        <listitem>
          <para>
            est utilisé pour lister les greffons SASL chargeables et leurs propriétés
          </para>
          <indexterm zone="cyrus-sasl pluginviewer">
            <primary sortas="b-pluginviewer">pluginviewer</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="saslauthd">
        <term><command>saslauthd</command></term>
        <listitem>
          <para>
            est le serveur d'authentification SASL
          </para>
          <indexterm zone="cyrus-sasl saslauthd">
            <primary sortas="b-saslauthd">saslauthd</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="sasldblistusers2">
        <term><command>sasldblistusers2</command></term>
        <listitem>
          <para>
            est utilisé pour lister les utilisateurs de la base de données de mots de
passe SASL <filename>sasldb2</filename>
          </para>
          <indexterm zone="cyrus-sasl sasldblistusers2">
            <primary sortas="b-sasldblistusers2">sasldblistusers2</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="saslpasswd2">
        <term><command>saslpasswd2</command></term>
        <listitem>
          <para>
            est utilisé pour paramétrer et effacer un mot de passe SASL d'utilisateur et
les secrets spécifiques au mécanisme dans la base de données de mots de
passe SASL <filename>sasldb2</filename>
          </para>
          <indexterm zone="cyrus-sasl saslpasswd2">
            <primary sortas="b-saslpasswd2">saslpasswd2</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="testsaslauthd">
        <term><command>testsaslauthd</command></term>
        <listitem>
          <para>
            est un outil de test pour le serveur d'authentification SASL
          </para>
          <indexterm zone="cyrus-sasl testsaslauthd">
            <primary sortas="b-testsaslauthd">testsaslauthd</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libsasl2">
        <term><filename class="libraryfile">libsasl2.so</filename></term>
        <listitem>
          <para>
            est une bibliothèque d'authentification généraliste pour des applications
serveur et client
          </para>
          <indexterm zone="cyrus-sasl libsasl2">
            <primary sortas="c-libsasl2">libsasl2.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
