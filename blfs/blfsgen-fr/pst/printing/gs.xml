<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!--  When updating, ensure gs9xx is updated in url -->

  <!ENTITY gs-download-http
  "https://github.com/ArtifexSoftware/ghostpdl-downloads/releases/download/gs&gs-packver;/ghostscript-&gs-version;.tar.xz">
  <!ENTITY gs-download-ftp  "">
  <!ENTITY gs-md5sum        "46dabbb1554391a3d0d95ce8304363f0">
  <!ENTITY gs-size          "60&nbsp;Mo">
  <!ENTITY gs-buildsize     "287 MB (with fonts and libgs.so)">
  <!ENTITY gs-time          "1.7 SBU (Using parallelism=4; with libgs.so)">

  <!ENTITY gs-standard-fonts-download
  "&sourceforge-dl;/gs-fonts/ghostscript-fonts-std-8.11.tar.gz">
  <!ENTITY gs-standard-fonts-md5sum   "6865682b095f8c4500c54b285ff05ef6">
  <!ENTITY gs-standard-fonts-size     "3.7 Mo">

  <!ENTITY gs-other-fonts-download
  "&sourceforge-dl;/gs-fonts/gnu-gs-fonts-other-6.0.tar.gz">
  <!ENTITY gs-other-fonts-md5sum      "33457d3f37de7ef03d2eea05a9e6aa4f">
  <!ENTITY gs-other-fonts-size        "796 Ko">
]>

<sect1 id="gs" xreflabel="ghostscript-&gs-version;">
  <?dbhtml filename="gs.html"?>

  <sect1info>
<date>$Date$</date></sect1info>

  <title>ghostscript-&gs-version;</title>

  <indexterm zone="gs">
    <primary sortas="a-Ghostscript">Ghostscript</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à Ghostscript</title>

    <para>
      <application>Ghostscript</application> est un transformateur polyvalent de
données PostScript offrant la possibilité de produire du PostScript sur
différentes cibles. Il s'agit d'une partie nécessaire à la pile d'impression
de cups.
    </para>

    &lfs111_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&gs-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP)&nbsp;: <ulink url="&gs-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5&nbsp;: &gs-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &gs-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &gs-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &gs-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>
    

    <!-- devs: do not comment out the bridgehead, unless you comment
         out all the additional downloads (including font files)
         Commenting this out since it's no longer needed, but keeping it for the
         inevitable next time that we need a patch for this package.-->
<!--
    <itemizedlist spacing="compact">

      <listitem>
        <para>
          Required patch:
          <ulink url="&patch-root;/ghostscript-&gs-version;-upstream_fix-1.patch"/>
        </para>
      </listitem>
    </itemizedlist>
-->
<para>
      Si vous le souhaitez, vous pouvez télécharger des polices supplémentaires.
    </para>

    <itemizedlist spacing="compact">
      <title>Polices standards</title>
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&gs-standard-fonts-download;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5&nbsp;: &gs-standard-fonts-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &gs-standard-fonts-size;
        </para>
      </listitem>
    </itemizedlist>

    <itemizedlist spacing="compact">
      <title>Autres polices</title>
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&gs-other-fonts-download;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5&nbsp;: &gs-other-fonts-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &gs-other-fonts-size;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de Ghostscript</bridgehead>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="cups"/> (requis pour construire le moteur
<quote>cups</quote>, qui est requis par
<application>cups-filters</application>), <xref linkend="fontconfig"/>
(requis, si vous avez installé une police suggérée), <xref
linkend="freetype2"/>, <xref linkend="lcms2"/>, <xref linkend="libjpeg"/>,
<xref linkend="libpng"/>, <xref linkend="libtiff"/> et <xref
linkend="openjpeg2"/>
    </para>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      <xref linkend="cairo"/>, <xref linkend="gtk3"/>, <xref linkend="libidn"/>,
<xref linkend="libpaper"/> et <xref linkend="x-window-system"/>
    </para>

    <para condition="html" role="usernotes">
      Notes utilisateur&nbsp;: <ulink url="&blfs-wiki;/gs"/>
    </para>
  </sect2>

  <sect2 role="installation">
    <title>Installation de Ghostscript</title>

    <note>
      <para>
        Le système de construction de <application>Ghostscript</application> n'est
pas simple. Afin d'utiliser des copies du système de diverses bibliothèques
graphiques, vous devez le faire en utilisant les méthodes traditionnelles.
      </para>
    </note>

    <para>
      <application>Ghostscript</application> inclut des (anciennes) copies de
quelques bibliothèques. Certaines d'entre elles semblent avoir été modifiées
pour corriger des failles connues, mais d'autres de ces copies sont moins
bien maintenues. Afin de s'assurer que les correctifs futurs sont appliqués
dans tout le système, il est recommandé que vous installiez en premier les
versions publiées de ces bibliothèques et que vous configuriez
<application>Ghostscript</application> pour créer un lien vers elles.
    </para>

    <para>
      Si vous avez installé les dépendances recommandées sur votre système,
supprimez les copies de <application>freetype</application>,
<application>lcms2</application>, <application>libjpeg</application>,
<application>libpng</application> et
<application>openjpeg</application>&nbsp;:
    </para>

<!--
    <para>

      Apply an upstream fix to prevent a build problem.
    </para>

<screen><userinput remap="pre">patch -Np1 -i ../ghostscript-&gs-version;-upstream_fix-1.patch</userinput></screen>
-->
<screen><userinput>rm -rf freetype lcms2mt jpeg libpng openjpeg</userinput></screen>


    <para>
      Compilez <application>Ghostscript</application>&nbsp;:
    </para>

<screen><userinput>rm -rf zlib &amp;&amp;

./configure --prefix=/usr           \
            --disable-compile-inits \
            --enable-dynamic        \
            --with-system-libtiff   &amp;&amp;
make</userinput></screen>

    <note>
      <para>
        La bibliothèque partagée dépend de <xref linkend="gtk3"/>. Elle n'est
utilisée que par des programmes externes comme <xref linkend="asymptote"/>,
<xref linkend="dvisvgm"/>, <xref linkend="imagemagick"/> et <xref
linkend="texlive"/>.
      </para>
    </note>

    <para>
      Pour compiler la bibliothèque statique <filename
class="libraryfile">libgs.so</filename>, lancez les commandes
supplémentaires suivantes en tant qu'utilisateur non privilégié&nbsp;:
    </para>

<screen><userinput>make so</userinput></screen>

    <para>
      Ce paquet n'a pas de suite de tests. Un ensemble de fichiers d'exemples peut
être utilisé pour tester, mais cela n'est possible qu'après l'installation
du paquet.
    </para>

    <para>
      Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>make install</userinput></screen>

    <para>
      Si vous souhaitez aussi la bibliothèque partagée&nbsp;:
    </para>

<screen role="root"><userinput>make soinstall &amp;&amp;
install -v -m644 base/*.h /usr/include/ghostscript &amp;&amp;
ln -sfvn ghostscript /usr/include/ps</userinput></screen>

    <para>
      Maintenant rendez la documentation accessible depuis l'endroit normal&nbsp;:
    </para>


<screen role="root"><!-- Starting with 9.23, the install does not seem to copy the examples any more -->
<userinput>mv -v /usr/share/doc/ghostscript/&gs-version; /usr/share/doc/ghostscript-&gs-version;  &amp;&amp;
rm -rfv /usr/share/doc/ghostscript &amp;&amp;
cp -r examples/ /usr/share/ghostscript/&gs-version;/</userinput></screen>

    <para>
      Si vous avez téléchargé les polices, déballez-les dans <filename
class="directory">/usr/share/ghostscript</filename> et assurez-vous que les
fichiers appartiennent bien à <systemitem
class="username">root</systemitem>:<systemitem
class="groupname">root</systemitem>.
    </para>

<screen role="root"><userinput>tar -xvf ../ghostscript-fonts-std-8.11.tar.gz -C /usr/share/ghostscript --no-same-owner &amp;&amp;
tar -xvf ../gnu-gs-fonts-other-6.0.tar.gz     -C /usr/share/ghostscript --no-same-owner &amp;&amp;
fc-cache -v /usr/share/ghostscript/fonts/</userinput></screen>

    <para>
      Vous pouvez maintenant tester le rendu de différents fichiers postscript et
pdf depuis <filename
class="directory">/usr/share/ghostscript/&gs-version;/examples
</filename>. Pour cela, lancez la commande suivante (vous avez besoin d'un
affichage de fenêtrage X)&nbsp;:
    </para>

<screen remap="test"><userinput>gs -q -dBATCH /usr/share/ghostscript/&gs-version;/examples/tiger.eps</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para>
      <command>rm -rf zlib </command>&nbsp;: <application>zlib</application> a été
installé par LFS.
    </para>

    <para>
      <parameter>--disable-compile-inits</parameter>&nbsp;: Cette option rend
<command>gs</command> et <filename>libgs.so</filename> un peu plus petits.
    </para>

    <para>
      <parameter>--with-system-libtiff</parameter>&nbsp;: Supprimez cette option
si vous n'avez pas installé <xref linkend="libtiff"/>.
    </para>

    <para>
      <command>install -v -m644 base/*.h... </command>&nbsp;: Certains paquets
(<application>ImageMagick</application> entre autres) ont besoin que les
en-têtes d'interface de <application>Ghostscript</application> soient
disponibles pour se lier à la bibliothèque partagée. Ces commandes
installent les en-têtes.
    </para>

    <para>
      <command>ln -sfvn ghostscript /usr/include/ps</command>&nbsp;: Certains
paquets s'attendent à trouver les en-têtes d'interface à un autre endroit.
    </para>

    <para>
        <command>mv -v /usr/share/doc/ghostscript/&gs-version;
/usr/share/doc/ghostscript-&gs-version;</command>&nbsp;: Cela déplace la
documentation là où elle devrait se trouver.
    </para>

    <para>
      <option>--disable-cups</option>&nbsp;: Cette option sauvera un peu de place
en ne liant pas <command>gs</command> et <filename>libgs.so</filename> aux
bibliothèques <xref linkend="cups"/> si vous les avez installées.
    </para>
  </sect2>

  <sect2 role="content">
    <title>Contenu</title>
    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèque installée</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>
          <!-- I don't see bdftops,fixmswrd.pl or pv.sh on my builds [ I don't
          have any bdf tools from xorg ] but they are still referenced in
          base/unixinst.mak -->
dvipdf, eps2eps, gs, gsbj, gsc (de soinstall), gsdj, gsdj500, gslj, gslp,
gsnd, gsx (de soinstall), lprsetup.sh, pdf2dsc, pdf2ps, pf2afm, pfbtopfa,
pphs, printafm, ps2ascii, ps2epsi, ps2pdf, ps2pdf12, ps2pdf13, ps2pdf14,
ps2pdfwr, ps2ps, ps2ps2 et unix-lpr.sh
          
        </seg>
        <seg>libgs.so et /usr/lib/ghostscript/&gs-version;/X11.so</seg>
        <seg>
          /usr/include/ghostscript, /usr/lib/ghostscript, /usr/share/ghostscript et
/usr/share/doc/ghostscript-&gs-version;
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="gplgs-prog">
        <term><command>gs</command></term>
        <listitem>
          <para>
            est un interpreteur pour Adobe Systems' PostScript(tm) et Portable Document
Format (PDF)
          </para>
          <indexterm zone="gs gplgs-prog">
            <primary sortas="b-gs">gs</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libgs.so">
        <term><filename class="libraryfile">libgs.so</filename></term>
        <listitem>
          <para>
            fournit la fonctionnalité <application>Ghostscript</application> à d'autres
programmes, comme <application>GSView</application>,
<application>ImageMagick</application> et
<application>libspectre</application>
          </para>
          <indexterm zone="gs libgs.so">
            <primary sortas="c-libgs.so">libgs.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
   </variablelist>

   <para>
     <application>Ghostscript</application> fournit plein de scripts différents
utilisé pour convertir du PostScript, PDF, et d'autre formats. Veuillez vous
référer à la documentation HTML ou aux pages de manuel pour trouver des
informations à propos des possibilités fournies.
    </para>
  </sect2>

</sect1>
