<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY gutenprint-download-http "&sourceforge-dl;/gimp-print/gutenprint-&gutenprint-version;.tar.xz">
  <!ENTITY gutenprint-download-ftp  "">
  <!ENTITY gutenprint-md5sum        "dc208cfb873f13a93439185c15aa6f81">
  <!ENTITY gutenprint-size          "5.1&nbsp;Mo">
  <!ENTITY gutenprint-buildsize     "59 Mo (sans les tests)">
  <!ENTITY gutenprint-time          "0,4 SBU (sans les tests)">
  <!-- Tests add 75 SBU and 13GB to the equation - updated info in the tests below -->
]>

<sect1 id="gutenprint" xreflabel="Gutenprint-&gutenprint-version;">
  <?dbhtml filename="gutenprint.html"?>

  <sect1info>
<date>$Date$</date></sect1info>

  <title>Gutenprint-&gutenprint-version;</title>

  <indexterm zone="gutenprint">
    <primary sortas="a-Gutenprint">Gutenprint</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à Gutenprint</title>

    <para>
      Le paquet <application>Gutenprint</application> (anciennement
<application>Gimp-Print</application>) contient des pilotes de grande
qualité pour de nombreuses marques et de nombreux modèles d'imprimantes pour
une utilisation avec <xref linkend="cups"/> et
<application>GIMP-2.0</application>. Vous trouverez une liste des
imprimantes supportées sur <ulink
url="http://gutenprint.sourceforge.net/p_Supported_Printers.php"/>.
    </para>

    &lfs112_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&gutenprint-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP)&nbsp;: <ulink url="&gutenprint-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5&nbsp;: &gutenprint-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &gutenprint-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &gutenprint-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &gutenprint-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de Gutenprint</bridgehead>

    
    <!-- recommend cups since we describe how to use it, and the gimp
    so that we can use gutenprint's driver to print photos there -->
<bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="cups"/> et <xref linkend="gimp"/>
    </para>

    <bridgehead renderas="sect4">Recommandées (à l'exécution)</bridgehead>
    <para role="recommended">
      Les deux familles d'imprimantes photos DyeSub demandent d'autres
bibliothèques à l'exécution. Si vous n'avez pas un de ces périphériques vous
n'avez pas besoin de ces bibliothèques.
    </para>

    <para role="recommended">
      Pour Sinfonia S6145 et Ciaat Brava 21, <ulink
url="http://git.shaftnet.org/cgit/selphy_print.git/tree/lib6145">libS6145ImageReProcess</ulink>,
voir <ulink role="nodep"
url="http://www.peachyphotos.com/blog/posts/201601301524-sinfonia-chc-s6145-cs2-and-ciaat-brava-21-revited/">Peachy
Photos (Sinfonia)</ulink> pour les instructions sur comment construire et
tester.
    </para>

    <para role="recommended">
      Pour la famille Mitsubishi D70 et la Kodak 305 semblable, <ulink
url="http://git.shaftnet.org/cgit/selphy_print.git/tree/lib70x">libMitsuD70ImageReProcess</ulink>,
voir <ulink role="nodep"
url="http://www.peachyphotos.com/blog/posts/201610061508-mitsubishi-cp-d70-family-working/">Peachy
Photos (Mitsubishi CP-D70)</ulink> pour les instructions de construction et
de tests.
    </para>

    <bridgehead renderas="sect4">Facultatives (pour régénérer la documentation)</bridgehead>
    <para role="optional">
      <xref linkend="imagemagick"/>, <xref linkend="texlive"/> (ou <xref
linkend="tl-installer"/>), <xref linkend="doxygen"/> et <xref
linkend="docbook-utils"/>
    </para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;: <ulink url="&blfs-wiki;/gutenprint"/></para>

  </sect2>

  <sect2 role="kernel" id="gutenprint-escputil">
    <title>Configuration du noyau</title>

    <para>
      Si vous souhaitez utiliser <application>escputil</application> avec une
imprimente USB Epson Stylus pour les commandes comme
<command>--ink-level</command> qui ont besoin d'accéder directement au
périphérique, vous devez activer le pilote usblp dans le noyau. Activez les
options suivantes dans la configuration de votre noyau et
recompilez-le&nbsp;:
    </para>

<screen><literal>Device Drivers  ---&gt;
  [*] USB support  ---&gt;                          [CONFIG_USB_SUPPORT]
    &lt;*/M&gt;  OHCI HCD (USB 1.1) support            [CONFIG_USB_OHCI_HCD]
    &lt;*/M&gt;  UHCI HCD (most Intel and VIA) support [CONFIG_USB_UHCI_HCD]
    &lt;*/M&gt;  USB Printer support                   [CONFIG_USB_PRINTER]</literal></screen>

    <indexterm zone="gutenprint escputil">
      <primary sortas="d-escputil">escputil pour les imprimantes usb</primary>
    </indexterm>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Gutenprint</title>

    <para>
      Installez <application>Gutenprint</application> en exécutant les commandes
suivantes&nbsp;:
    </para>

<!-- this is supposed to discourage you from running the tests if you upgrade
    the package - but the tests in 5.2.12 have changed and I thought I read they
    were more parallel -->
<screen><userinput>sed -i 's|$(PACKAGE)/doc|doc/$(PACKAGE)-$(VERSION)|' \
       {,doc/,doc/developer/}Makefile.in &amp;&amp;

./configure --prefix=/usr --disable-static &amp;&amp;
make</userinput></screen>

    
    <para>
      Pour tester les résultats, lancez&nbsp;: <command>make check</command>. Les
tests prennent très longtemps et utilisent beaucoup d'espace disque. Lors du
dernier test (version 5.2.15 en juin 2019) il fallait 75 SBU et 13.5 Go pour
terminer le test (un test, rastertogutenprint a échoué car les ppd CUPS sont
prévus pour une version précédente. Peut-être que genppds devrait être lancé
avant les tests). Remarquez que les tests n'utilisaient qu'un CPU.
    </para>

    <para>
      Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>make install &amp;&amp;
install -v -m755 -d /usr/share/doc/gutenprint-&gutenprint-version;/api/gutenprint{,ui2} &amp;&amp;
install -v -m644    doc/gutenprint/html/* \
                    /usr/share/doc/gutenprint-&gutenprint-version;/api/gutenprint &amp;&amp;
install -v -m644    doc/gutenprintui2/html/* \
                    /usr/share/doc/gutenprint-&gutenprint-version;/api/gutenprintui2</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para>
      <command>sed -i '...' ...Makefile.in</command>&nbsp;: Cette commande est
utilisée pour que la documentation du paquet soit installée dans la
structure de dossier <filename class='directory'>/usr/share/doc</filename>
conventionnelle plutôt que <filename
class='directory'>/usr/share/gutenprint/doc</filename>.
    </para>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/static-libraries.xml"/>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de Gutenprint</title>

    <sect3>
      <title>Informations sur la configuration</title>

      <para>
        Pour que <application>CUPS</application> voie les pilotes d'imprimantes
nouvellement installés, il doit être redémarré (en tant qu'utilisateur
<systemitem class="username">root</systemitem>)&nbsp;:
      </para>

<!-- <para>

        This command may take a long time (up to 10 minutes)
        to complete. Don't panic while <application>CUPS</application>
        is rescanning the list of PPD files. The long delay will happen
        only once.
      </para> -->
<screen role="root" revision="sysv"><userinput>/etc/rc.d/init.d/cups restart</userinput></screen>

<screen role="root" revision="systemd"><userinput>systemctl restart cups</userinput></screen>

      

      <para>
        Puis pointez votre navigateur web vers <ulink url="http://localhost:631/"/>
pour ajouter une nouvelle imprimante à <application>CUPS</application>.
      </para>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>
          cups-calibrate, cups-genppd.5.2, cups-genppdupdate, escputil et testpattern
        </seg>
        <seg>
          libgutenprint.so, libgutenprintui2.so et éventuellement, divers filtres et
moteurs de pilote <application>CUPS</application> dans
/usr/lib/gutenprint/5.2/modules/
        </seg>
        <seg>
          /usr/{include,lib,share}/gutenprint, /usr/include/gutenprintui2 et
/usr/share/doc/gutenprint-&gutenprint-version;
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?> <?dbhtml list-presentation="table"?>

      <varlistentry id="cups-calibrate">
        <term><command>cups-calibrate</command></term>
        <listitem>
          <para>
            calibre la sortie en couleurs des imprimantes en utilisant les pilotes
<application>Gutenprint</application>, <application>CUPS</application> ou
<application>ESP Print Pro</application>
          </para>
          <indexterm zone="gutenprint cups-calibrate">
            <primary sortas="b-cups-calibrate">cups-calibrate</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="cups-genppd.5.2">
        <term><command>cups-genppd.5.2</command></term>
        <listitem>
          <para>
            génère les fichiers PPD de Gutenprint pour l'utilisation avec CUPS
          </para>
          <indexterm zone="gutenprint cups-genppd.5.2">
            <primary sortas="b-cups-genppd.5.2">cups-genppd.5.2</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="cups-genppdupdate">
        <term><command>cups-genppdupdate</command></term>
        <listitem>
          <para>
            régénère les fichiers PPD de Gutenprint pour utiliser avec CUPS
          </para>
          <indexterm zone="gutenprint cups-genppdupdate">
            <primary sortas="b-cups-genppdupdate">cups-genppdupdate</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="escputil">
        <term><command>escputil</command></term>
        <listitem>
          <para>
            est un outil en ligne de commande pour effectuer diverses tâches de
maintenance sur des imprimantes Epson Stylus à jet d'encre
          </para>
          <indexterm zone="gutenprint escputil">
            <primary sortas="b-escputil">escputil</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      
      

     <!-- With 5.2.15, even with IJS installed, this program no longer exists.
      cups-filters-1.25.0 dropped support for IJS filters entirely. -->
<!--
      <varlistentry id="ijsgutenprint.5.2">

        <term><command>ijsgutenprint.5.2</command></term>
        <listitem>
          <para>
            is a Ghostscript driver for HP InkJet and LaserJet printers.
          </para>
          <indexterm zone="gutenprint ijsgutenprint.5.2">
            <primary sortas="b-ijsgutenprint.5.2">ijsgutenprint.5.2</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      -->
<varlistentry id="testpattern">
        <term><command>testpattern</command></term>
        <listitem>
          <para>
            est un programme de test pour apprendre comment utiliser libgutenprint
          </para>
          <indexterm zone="gutenprint testpattern">
            <primary sortas="b-testpattern">testpattern</primary>
          </indexterm>
        </listitem>
      </varlistentry>

   </variablelist>

  </sect2>

</sect1>
