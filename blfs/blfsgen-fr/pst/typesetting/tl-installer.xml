<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY tl-installer-download-http   "https://mirror.ctan.org/systems/texlive/tlnet/install-tl-unx.tar.gz">

  <!ENTITY tl-installer-download-ftp    "">
  <!ENTITY tl-installer-md5sum          "cec36f23d7d4e1a4a2a90f77bad8e667">
  <!ENTITY tl-installer-date             "20230313"> <!-- in the directory name -->
  <!ENTITY tl-installer-size            "5,5&nbsp;Mo">

  <!ENTITY tl-installer-buildsize        "310&nbsp;Mo pour la base de TeX et latex, 7,9&nbsp;Go si tout est inclus">
  <!ENTITY tl-installer-time            "varie en fonction de la vitesse du réseau et du trafic">
]>

<sect1 id="tl-installer" xreflabel="install-tl-unx">
  <?dbhtml filename="tl-installer.html"?>


  <title>install-tl-unx</title>

  <indexterm zone="tl-installer">
    <primary sortas="a-install-tl-unx">install-tl-unx</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à TeX Live et son installateur</title>

    <para>
      Le paquet <application>TeX Live</application> est un système complet de
production de documents TeX. Il inclut TEX, LaTeX2e, ConTEXt, Metafont,
MetaPost, BibTeX et bien d'autres programmes&nbsp;; un ensemble complet de
macros, de polices et de documentation&nbsp;; le support du formatage de
nombreux systèmes d'écritures dans le monde.
    </para>

    <para>
      Cette page est destinée aux personnes qui souhaitent utiliser l'installateur
binaire pour fournir les programmes, les scripts, et beaucoup de fichiers
auxiliaires et de documentation. L'installateur est mis à jour souvent, donc
sa somme md5 sera bientôt obsolète. Les versions plus récentes de
l'installateur devraient fonctionner avec ces instructions, qui installeront
dans le répertoire <filename class="directory">&texlive-year;/</filename>.
    </para>

    <para>
      Il y a deux raisons pour lesquelles vous pourriez souhaiter installer les
binaires dans BLFS&nbsp;: soit vous avez besoin d'une petite installation
(par exemple au moins TeX simple sans LaTeX2e, ConTeXt, etc) ou vous
souhaitez utiliser <command>tlmgr</command> pour avoir les mises à jours
tant que cette version est supportée (typiquement, jusqu'à avril de l'année
suivant la publication). Pour cette dernière, vous pourriez préférer
installer dans votre répertoire <filename class="directory">/home</filename>
en tant qu'utilisateur non privilégié, et ensuite effectuer les changements
correspondants au PATH dans votre <filename>~/.bashrc</filename> ou
équivalent.
    </para>

    
    <!-- editors: latex-test-20230819.tar.xz at ~/ken/tex-testfiles and the
    ABOUT.pdf now deal with specifying which collections are needed when using
    binary texlive. Please do not sign off this package without at least
    testing asy to ensure that the symlinks are as needed. Plese also be aware
    that removing a collection might leave huge backups in tlpkg/backups -->
&lfs120_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&tl-installer-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP)&nbsp;: <ulink url="&tl-installer-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          
          <!--Download MD5 sum: &tl-installer-md5sum; (for &tl-installer-date;)-->
Somme de contrôle MD5&nbsp;: Varies frequently
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &tl-installer-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &tl-installer-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &tl-installer-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="gnupg2"/> (pour valider aussi bien le téléchargement initial
que toute mise à jour que vous pourriez faire plus tard avec
<command>tlmgr</command>) <xref linkend="perl-libwww-perl"/> (pour utiliser
une seule connexion au serveur, ce qui réduira la charge et accélérera les
choses)
    </para>

    <bridgehead renderas="sect4">Recommandées (à l'exécution)</bridgehead>
    <para role="recommended">
      Les binaires sont principalement liés statiquement aux bibliothèques
incluses ou aux bibliothèques générales (LFS) du système, mais certains
programmes et plusieurs scripts échoueront si les paquets suivants ne sont
pas présents&nbsp;:
    </para>
    <para role="recommended">
      <xref role="runtime" linkend="gs"/> est chargé dynamiquement par
l'application externe <ulink url="https://dvisvgm.de/">dvisvgm</ulink>, qui
est utilisé par <application>asy</application> pour créer des fichiers SVG.
    </para>
    <para role="recommended">
      <xref role="runtime" linkend="xorg7-lib"/> et <xref role="runtime"
linkend="libxcb"/> sont requis pour inimf, mf, pdfclose, pdfopen et
xdvi-xaw. Mais si vous utilisez asy, ou un moteur
<application>TeX</application> pour créer un fichier PDF, vous aurez besoin
d'un <xref role="runtime" linkend="x-window-system"/> (pour les fichiers
PDF, c'est pour la prise en charge d'une visionneuse PDF de votre choix, par
exemple <xref role="nodep" linkend="epdfview"/>).
    </para>

    <!-- seems to not be needed in 2021
    <para role="recommended">

      the optional non-wide-character ncurses library (for "some binary-only
      application") from the bottom of the <application>Ncurses</application>
      page in LFS is needed
      for xindy.run which is used by <application>xindy</application>
    </para> -->
<para role="recommended">
      La version binaire de <application>asy</application> requière <xref
linkend="freeglut"/>.
    </para>
    <para> 
      <!-- needed, but cannot recommend :-) -->
The binary version of asy is linked to libGLX.so.0 from <ulink
url="https://gitlab.freedesktop.org/glvnd/libglvnd/">libglvnd</ulink>, but
installing that will break future updates of BLFS packages such as <xref
linkend="mesa"/>. Work around that by creating a symlink as the <systemitem
class="username">root</systemitem> user:
    </para>
    <screen role="nodump"><userinput>ln -sv libGL.so.1 /usr/lib/libGLX.so.0</userinput></screen>
    <note>
      <para>
        Comme toujours avec des programmes binaires tiers, il est possible que les
dépendances requises changent quand l'installateur est mis à jour. En
particulier, ces dépendances n'ont été vérifiée que sur x86_64.
      </para>
    </note>
    
    <!-- text for runtime deps, shared with texlive -->
<xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
     href="../../xincludes/texruntime.xml"/>

    <para condition="html" role="usernotes">Notes des rédacteurs&nbsp;: <ulink url="&blfs-wiki;/tl-installer"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation binaire de TeX Live</title>

    <para>
      L'ensemble des programmes de <application>TeX Live</application> avec les
documents supports, les polices et les utilitaires est très important. Les
mainteneurs recommandent de placer tous les fichiers dans une structure de
répertoires unique. BLFS recommande <filename
class='directory'>/opt/texlive</filename>.
    </para>

    <para>
      Comme avec les autres paquets, déballez l'installeur et allez dans son
répertoire, <filename
class='directory'>install-tl-&lt;CCYYMMDD&gt;</filename>. Le nom de ce
répertoire change quand l'installeur est mis à jour, aussi remplacez
&lt;CCYYMMDD&gt; par le bon nom de répertoire.
    </para>

    <warning>
      <para>
        If you have installed any of the luatex programs (luatex, luahbtex,
luajitex, luajithbtex) or ConTeXt with the luametatex backend there was a
security issue fixed by the introduction of luatex v1.17.0.  You should
check the version with 'luatex --version' and if it is less than 1.17.0 you
can use tlmgr to update.
      </para>
    </warning>

    <note>
      <para>
        Les binaires de la distribution installée ci-dessous utilisent des liens
statiques pour les bibliothèques générales du système Linux. Les
bibliothèques supplémentaires ou les interpréteurs comme spécifiés dans la
section des dépendances ne doivent pas être présent pendant l'installation,
mais les programmes qui en ont besoin ne pourront pas se lancer tant que
leurs dépendances spécifiques n'auront pas été installées.
      </para>

    
      <!-- please keep something like this in the future -->
<para>
        Avec tous les programmes binaires, il peut y avoir une erreur entre la
chaîne d'outils du constructeur et votre matériel. Pour une grande partie de
TeX, cela n'aura sans doute pas d'importance, mais dans de très rares cas
particulier, vous pourriez avoir des problèmes. Par exemple, si votre
processeur x86_64 ne prend pas en charge 3dnowext ou 3dnow, le binaire du
2014-06-28 échouait dans conTeXt en lançant LuaTeX, bien que lualatex
fonctionne, de même que les binaires i686 sur la même machine. Dans ce cas,
la solution la plus simple est d'installer texlive depuis les sources. De
même, la version binaire x86_64 de <command>asy</command> est très lente à
créer des diagrammes 3D.
      </para>
    </note>

    <para>
      Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>TEXLIVE_INSTALL_PREFIX=/opt/texlive ./install-tl</userinput></screen>

    <para>
      Cette commande est interactive et permet la sélection ou la modification de
la plateforme, des paquets, des répertoires, et d'autres
options. L'installation complète demandera environ 4,9 Go d'espace
disque. Le temps nécessaire au téléchargement dépendra de votre vitesse de
connexion internet et du nombre de paquets sélectionnés.
    </para>

    <para>
      It has been established by Debian that the <command>python</command> scripts
in <filename class="directory">latex-make</filename> will work with
<command>python3</command>, so update them to invoke that by running the
following command as the <systemitem class="username">root</systemitem>
user:
    </para>

<screen role="root"><userinput>for F in /opt/texlive/&texlive-year;/texmf-dist/scripts/latex-make/*.py ; do
  test -f $F &amp;&amp; sed -i 's%/usr/bin/env python%/usr/bin/python3%' $F || true
done
</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para>
      <command>test -f $F &amp;&amp; sed ...</command>&nbsp;: pour une petite
installation ces fichiers peuvent ne pas être présents, donc cette commande
teste voir s'ils existent et sinon renvoie «&nbsp;:true&nbsp;» pour éviter
des erreurs si cette commande est copiée dans l'un de vos propres scripts
d'installation.
    </para>

    <para>
      <option>./install-tl --location
http://mirror.aut.ac.nz/CTAN/systems/texlive/tlnet/</option>&nbsp;: utilisez
autre chose si vous souhaitez utiliser un miroir différent, par exemple si
vous êtes en Nouvelle Zélande mais que l'installeur choisi d'utiliser un
miroir australien. La liste des miroirs est à l'adresse <ulink
url='https://ctan.org/mirrors/'/>.
    </para>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>Plus de 300 binaires et liens symboliques vers des scripts</seg>
        <seg>Aucune</seg>
        <seg>/opt/texlive</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?> <?dbhtml list-presentation="table"?>

      <varlistentry id="tl-installer-programs">
        <term><command>TeX&nbsp;programs</command></term>
        <listitem>
          <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
          href="../../xincludes/texprogs.xml"/>
          <indexterm zone="tl-installer tl-installer-programs">
            <primary sortas="b-tl-installer-programs">programmes TeX Live</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>

  </sect2>

</sect1>
