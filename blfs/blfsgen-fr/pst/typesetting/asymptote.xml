<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY asymptote-download-http "&sourceforge-dl;/asymptote/asymptote-&asymptote-version;.src.tgz">
  <!ENTITY asymptote-download-ftp  "">
  <!ENTITY asymptote-md5sum        "b57e685568a7cca69024a86c7276eb6d">
  <!ENTITY asymptote-size          "4.5&nbsp;Mo">
  <!ENTITY asymptote-buildsize     "190 Mo (avec toutes les dépendances qui se trouvent dans BLFS)">
  <!-- with 2.68 the j1 time was 2.5 SBU, slow enough to use a parallel build -->
  <!ENTITY asymptote-time          "0.9&nbsp;SBU (avec parallélisme = 4)">
]>

<sect1 id="asymptote" xreflabel="asymptote-&asymptote-version;">
  <?dbhtml filename="asymptote.html"?>

  <sect1info>
<date>$Date$</date></sect1info>

  <title>asymptote-&asymptote-version;</title>

  <indexterm zone="asymptote">
    <primary sortas="a-asymptote">asymptote</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à asymptote</title>

    <para>
      <application>Asymptote</application> est un puissant langage vectoriel de
description graphique qui fournit une boite à outils basée sur les
coordonnées naturelles pour les dessins techniques. Les équations et les
étiquettes peuvent être formaté avec LaTeX. Avec les formats de sortie EPS,
PDF et PNG, il peut produire un rendu WebGL 3D en HTML et (avec
<application>dvisvgm</application>) une sortie en SVG.
    </para>

    &lfs110_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&asymptote-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP)&nbsp;: <ulink url="&asymptote-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5 du téléchargement&nbsp;: &asymptote-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &asymptote-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &asymptote-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &asymptote-time;
        </para>
      </listitem>
    </itemizedlist>



    <!--<bridgehead renderas="sect3">
Additional Downloads</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Required patch:
          <ulink url="&patch-root;/asymptote-&asymptote-version;-ghostscript_fix-1.patch"/>
        </para>
      </listitem>
    </itemizedlist>-->
<bridgehead renderas="sect3">Dépendances de asymptote</bridgehead>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
      <xref linkend="gs"/> et <xref linkend="texlive"/>
    </para>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="curl"/>, <xref linkend="freeglut"/>, <xref linkend="gc"/>,
<xref linkend="glew"/>, <xref linkend="glm"/> et <xref linkend="libtirpc"/>
    </para>

    <bridgehead renderas="sect4">Recommandées à l'exécution</bridgehead>
    <para role="recommended">
      <xref role="runtime" linkend="dvisvgm"/>
    </para>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      <xref linkend="fftw"/>, <xref linkend="gsl"/>, <xref linkend="libsigsegv"/>

    </para>

    <bridgehead renderas="sect4">Facultatif (à l'exécution)</bridgehead>
    <para role="optional">
      <xref linkend="imagemagick"/> pour convertir la sortie en d'autres formats
comme JPEG ou pour créer des GIF animés, <ulink
url="https://pypi.org/project/PyQt5/">PyQt5</ulink> (non testé, qui dépend
pour sa construction de <xref linkend="qt5"/>) pour utiliser xasy.
    </para>

    <para condition="html" role="usernotes">
      Notes utilisateur&nbsp;: <ulink url="&blfs-wiki;/asymptote"/>
    </para>
  </sect2>

  <sect2 role="installation">
    <title>Installation de asymptote</title>




    <!-- Editors: for testing this, the minimal latex functionality is
 covered by the cylinder and triangle tests in
 https://www.linuxfromscratch.org/~ken/tex-testfiles/latex-test-20190318.tar.xz
 but the more interesting stuff (WebM html, svg, png, pdf) is tested in
 https://www.linuxfromscratch.org/~ken/asy-nontex-testfiles/asy-test-20200123.tar.xz
-->
<!--<para>

      First apply a patch for building with ghostscript-9.53:
    </para>

<screen><userinput>patch -Np1 -i ../asymptote-&asymptote-version;-ghostscript_fix-1.patch</userinput></screen>-->
<para>
      Installez <application>asymptote</application> en lançant les commandes
suivantes&nbsp;:
    </para>

<screen><userinput>export TEXARCH=$(uname -m | sed -e 's/i.86/i386/' -e 's/$/-linux/') &amp;&amp;

./configure --prefix=/opt/texlive/&texlive-year;                          \
            --bindir=/opt/texlive/&texlive-year;/bin/$TEXARCH             \
            --datarootdir=/opt/texlive/&texlive-year;/texmf-dist          \
            --infodir=/opt/texlive/&texlive-year;/texmf-dist/doc/info     \
            --libdir=/opt/texlive/&texlive-year;/texmf-dist               \
            --mandir=/opt/texlive/&texlive-year;/texmf-dist/doc/man       \
            --enable-gc=system                                  \
            --with-latex=/opt/texlive/&texlive-year;/texmf-dist/tex/latex \
            --with-context=/opt/texlive/&texlive-year;/texmf-dist/tex/context/third &amp;&amp;

make</userinput></screen>

    <para>
      Pour tester les résultats lancez&nbsp;: <command>make check</command>.
    </para>

    <para>
      Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>make install</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
     href="../../xincludes/tex-prefix.xml"/>

    <para>
      <parameter>--libdir=/opt/texlive/&texlive-year;/texmf-dist;</parameter>&nbsp;:
Ce paramètre assure que le répertoire <filename
class="directory">asymptote</filename> écrasera respectivement tous les
fichiers installés par install-tl-unx
    </para>

    <para>
      <parameter>--enable-gc=system</parameter>&nbsp;: ceci assure que la version
du système de <filename class="libraryfile">libgc.so</filename> sera
utilisée au lieu de celle incluse dans le paquet.
    </para>

    <para>
      <parameter>--with-latex= ... --with-context=</parameter>&nbsp;: Ces
paramètres assurent que les fichiers de style et les fichiers tex seront
installés dans le répertoire <application>texlive</application> plutôt que
de créer un répertoire <filename class="directory">texmf-local</filename>
pour eux.
    </para>

    

  <!-- commenting for now: 2.44 installs asymptote.info in both places
     so the old version no longer remains

    <para>

      <command>rm -fv /opt/texlive/.../asymptote.info</command>:
      This deletes the file installed by <application>texlive</application>.
      Exceptionally, asymptote will create an <filename
      class="directory">asymptote/</filename> subdirectory for its own
      <filename>asymptote.info</filename> even though a possibly older
      version from <xref linkend="texlive"/> is in the main
      <application>texlive</application>
      <filename class="directory">info/</filename> directory. Both the
      new version and the existing <filename>asy-faq.info</filename>
      <emphasis>will</emphasis> be found by <command>info</command>.
    </para>-->
</sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoire installé</segtitle>

      <seglistitem>
        <seg>
          asy, xasy
        </seg>
        <seg>
          Aucune
        </seg>
        <seg>
          /opt/texlive/&texlive-year;texmf-dist/asymptote,
/opt/texlive/&texlive-year;/doc/asymptote,
/opt/texlive/&texlive-year;/info/asymptote
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="asy">
        <term><command>asy</command></term>
        <listitem>
          <para>
            est un programme graphique vectoriel
          </para>
          <indexterm zone="asymptote asy">
            <primary sortas="b-asy">asy</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="xasy">
        <term><command>xasy</command></term>
        <listitem>
          <para>
            est un script Python3 qui fournit une interface Qt5 à asy
          </para>
          <indexterm zone="asymptote xasy">
            <primary sortas="b-xasy">xasy</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
