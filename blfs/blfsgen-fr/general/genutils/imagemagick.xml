<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY imagemagick-patch-version "46">

  <!ENTITY imagemagick-download-http "https://www.imagemagick.org/archive/releases/ImageMagick-&imagemagick-version;-&imagemagick-patch-version;.tar.xz">
<!-- 2021-01-14 : ftp.imagemagick.org hangs, assume no longer usable
  <!ENTITY imagemagick-download-ftp  "ftp://ftp.imagemagick.org/pub/ImageMagick/releases/ImageMagick-&imagemagick-version;-&imagemagick-patch-version;.tar.xz"> -->
  <!ENTITY imagemagick-download-ftp  "">
  <!ENTITY imagemagick-md5sum        "37db9e62dee40cbf2fa05ba6f19cd7d6">
  <!ENTITY imagemagick-size          "9.9&nbsp;Mo">
  <!ENTITY imagemagick-buildsize     "194&nbsp;Mo (avec les dépendances usuelles, plus 21&nbsp;Mo pour les tests)">
  <!ENTITY imagemagick-time          "1,2&nbsp;SBU (avec les dépendances usuelles, plus 1,0&nbsp;SBU pour les
tests, tous les deux avec parallélisme = 4)">
]>



<!-- Editors: It is highly unlikely that the buildsize (disk space used) will
     be less than the figure shown above. Unless you have installed *all* the
     delegate dependencies, you will see a smaller buildsize, but what is
     currently listed above is the space one would require if all the
     dependencies available in the book are installed.

     Marked as 'typical' because nobody builds ALL the optional extras [ken]

     [bdubbs] I do; at least the internal ones.  I still got only 141 MB.

     [pierre 2017-02-14, v7.0.4-8]. I did too, and got 184 MB. I added the
     all the corresponding switches to configure, that may make a difference.
     All 6733 tests passed.

     Saved the "full" 450MB as a comment - feel free to update this iff you
     do build all dependencies, it's probably a lot bigger now.

     [bdubbs] Just removed it.  I don't think it adds anything.

     [ken] Comparing 7.0.10-27 to 7.0.10-57 on the same machine: for -27 my
     timings and space matched the book (well, make check was marginally
     faster on this machine), but for -57 the compiled source, installed
     files and extra space for make check were all much smaller.

     Also, please look over the output from the configure command for any
     additional dependencies that need to be listed, as ImageMagick is
     constantly adding additional features and dependencies. Or diff the
     configure script against the previous version.

     For those of us who touch this infrequently:
     DPS/dpsXclient is from apple so not relevant to linux builds
     GVC is part of Graphviz and documented in the explanations
     LQR is Liquid Rescale  -->
<sect1 id="imagemagick" xreflabel="ImageMagick-&imagemagick-version;-&imagemagick-patch-version;">
  <?dbhtml filename="imagemagick.html"?>

  <sect1info>
<date>$Date$</date></sect1info>

  <title>ImageMagick-&imagemagick-version;-&imagemagick-patch-version;</title>

  <indexterm zone="imagemagick">
    <primary sortas="a-ImageMagick">ImageMagick</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à ImageMagick</title>

    <para>
      <application>ImageMagick</application> est un ensemble d'outils et de
bibliothèques pour lire, écrire et manipuler une image dans divers formats
d'images. Les opérations de traitement d'images sont disponibles en ligne de
commande. Des bindings pour Perl et C++ sont également disponibles.
    </para>

    &lfs112_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&imagemagick-download-http;"/></para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP)&nbsp;: <ulink url="&imagemagick-download-ftp;"/></para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5&nbsp;: &imagemagick-md5sum;</para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &imagemagick-size;</para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &imagemagick-buildsize;</para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &imagemagick-time;</para>
      </listitem>
    </itemizedlist>

    <note>
      <para>
        Les sources de <application>ImageMagick</application> sont mises à jour
fréquemment et la version affichée ci-dessus peut ne plus être disponible
sur les emplacements de téléchargement. Vous pouvez télécharger une version
plus récente et utiliser les instructions de BLFS pour l'installer. Il y a
des chances que cela fonctionne très bien, mais n'a pas été testé par
l'équipe BLFS. Si la version du paquet affichée ci-dessus n'est pas
disponible aux emplacements indiqués ci-dessus, vous pouvez la télécharger
depuis le serveur de paquet BLFS de l'université de l'État d'Oregon&nbsp;:
<ulink url="ftp://ftp.osuosl.org/pub/blfs/conglomeration/ImageMagick/"/>.
      </para>
    </note>

    <bridgehead renderas="sect3">Dépendances de ImageMagick</bridgehead>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="xorg7-lib"/>
    </para>

    <para>
      <!-- No such section in 7.1.0-4
                Many of the dependencies' capabilities and uses are described in
      the <quote>MAGICK DELEGATES</quote> section of the
      <filename>README.txt</filename> file located in the source tree. -->
Vous devriez installer les dépendances facultatives listées ci-dessous si
vous avez besoin de la prise en charge d'un format spécifique ou de l'outil
de conversion que la dépendance fournit. Vous pouvez trouver des
informations supplémentaires tant dans le fichier
<filename>Install-unix.txt</filename> situé dans l'arborescence des sources
qu'en lançant la commande <command>./configure --help</command>. Vous pouvez
lire un résumé de ces informations et des remarques complémentaires en ligne
sur <ulink url="https://imagemagick.org/script/install-source.php"/>.
    </para>

    <bridgehead renderas="sect4">Utilitaires systèmes facultatifs</bridgehead>
    <para role="optional">
      Clang de <xref linkend="llvm"/>, <xref linkend="cups"/>, <xref
linkend="curl"/>, <xref linkend="ffmpeg"/>, <xref linkend="fftw"/>, <xref
linkend="p7zip"/> (LZMA), <xref linkend="sane"/>, <xref linkend="wget"/>,
<xref linkend="xdg-utils"/>, <xref linkend="xterm2"/>, <ulink
url="https://dmalloc.com/">Dmalloc</ulink>, <ulink
url="https://linux.softpedia.com/get/Programming/Debuggers/Electric-Fence-3305.shtml/">Electric
Fence</ulink>, <ulink url="https://www.openpgp.org/about/">PGP</ulink> ou
<xref linkend="gnupg2"/> (vous devrez utiliser quelques hacks pour utiliser
<application>GnuPG</application>), <ulink
url="https://imagemagick.org/archive/delegates/">Profiles</ulink> et <ulink
url="http://ufraw.sourceforge.net/">ufraw</ulink> (pour les formats raw
listés sur <ulink url="https://imagemagick.org/script/formats.php">
https://imagemagick.org/script/formats.php</ulink>)
    </para>

    <bridgehead renderas="sect4">Bibliothèques graphiques facultatives</bridgehead>
    <para role="optional">
      <!-- although libexif may have been used in the past, I can find no
          evidence that it has been used in imagemagick-7.  ken
      <xref linkend="libexif"/>
,-->
<!--<ulink url="&gnome-download-http;/libgxps/">
libgxps</ulink>,-->
<xref linkend="jasper"/>, <xref role="nodep" linkend="lcms"/> ou <xref
linkend="lcms2"/>, <xref linkend="libgxps"/>, <xref linkend="libjpeg"/>,
<xref linkend="libpng"/>, <xref linkend="libraw"/> (RAW_R), <xref
linkend="librsvg"/>, <xref linkend="libtiff"/>, <xref linkend="libwebp"/>,
<xref linkend="openjpeg2"/>, <xref linkend="pango"/>, <ulink
url="http://djvu.sourceforge.net/">DjVuLibre</ulink>, <ulink
url="https://imagemagick.org/archive/delegates/"> FlashPIX (libfpx)</ulink>,
<ulink url="https://github.com/FLIF-hub/FLIF/releases">FLIF</ulink>, <ulink
url="https://www.cl.cam.ac.uk/~mgk25/jbigkit/">JBIG-KIT</ulink>, <ulink
url="https://github.com/strukturag/libheif/">libheif</ulink> avec <ulink
url="https://github.com/strukturag/libde265/">libde265</ulink> (tous deux
requis pour convertir les images heic de macOS), <ulink
url="https://github.com/libjxl/libjxl/">libjxl</ulink>, <ulink
url="https://github.com/HOST-Oman/libraqm/">libraqm</ulink>, <ulink
url="http://liblqr.wikidot.com/en:download-page">Liquid Rescale</ulink>,
<ulink url="https://www.openexr.com/">OpenEXR</ulink> et <ulink
url="http://www.agocg.ac.uk/train/cgm/ralcgm.htm">RALCGM</ulink> (ou <ulink
url="http://www.mcmurchy.com/ralcgm/ralcgm-3.51.tar.gz">ralcgm</ulink>)
    </para>

    <bridgehead renderas="sect4">Utilitaires graphiques facultatifs</bridgehead>
    <para role="optional">
      <xref linkend="dejavu-fonts"/>, <xref linkend="gs"/>, <xref
linkend="gimp"/>, <xref linkend="graphviz"/>, <xref linkend="inkscape"/>,
<ulink url="https://www.blender.org/">Blender</ulink>, <ulink
url="http://corefonts.sourceforge.net/">corefonts</ulink>, <ulink
url="https://ghostscript.com/releases/gpcldnld.html">GhostPCL</ulink>,
<ulink url="http://www.gnuplot.info/">Gnuplot</ulink>, <ulink
url="https://www.povray.org/">POV-Ray</ulink> et <ulink
url="https://www.radiance-online.org/">Radiance</ulink>
    </para>

    <bridgehead renderas="sect4">Outils de conversion facultatifs</bridgehead>
    <para role="optional">
      <!-- not accessible
      <ulink url="https://user.it.uu.se/~jan/html2ps.html">
html2ps</ulink>,
      -->
<xref linkend="enscript"/>, <xref linkend="texlive"/> (or <xref
linkend="tl-installer"/>)  <ulink
url="http://autotrace.sourceforge.net/">AutoTrace</ulink>, <ulink
url="https://www.extensis.com/"> GeoExpress Command Line Utilities, AKA
MrSID Utilities (paquet binaire)</ulink>, <ulink
url="https://www.gnu.org/software/hp2xx/">hp2xx</ulink>, <ulink
url="http://wvware.sourceforge.net/">libwmf</ulink>, <ulink
url="https://sk1project.net/uc2/"> UniConvertor</ulink> et <ulink
url="https://www.cs.utah.edu/gdc/projects/urt/">Utah Raster Toolkit</ulink>
(ou <ulink
url="http://www.mcmurchy.com/urt/urt-3.1b.tar.gz">URT-3.1b</ulink>)
    </para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;: <ulink url="&blfs-wiki;/imagemagick"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de ImageMagick</title>

    <para>
      Installez <application>ImageMagick</application> en exécutant les commandes
suivantes&nbsp;:
    </para>

<screen><userinput>./configure --prefix=/usr     \
            --sysconfdir=/etc \
            --enable-hdri     \
            --with-modules    \
            --with-perl       \
            --disable-static  &amp;&amp;
make</userinput></screen>

    <para>
      Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>make DOCUMENTATION_PATH=/usr/share/doc/imagemagick-&imagemagick-version; install</userinput></screen>

    <para>
      <!-- seems to have been dropped                         A more
      comprehensive test is the <application>
ImageMagick</application>
      validation suite. If <command>make check</command> has not been executed,
      run <command>make tests/validate</command> to compile it.  Issue
      <command>tests/validate 2>&amp;1 | tee validate.log</command> to run the
      validation suite.-->
<!-- summary is last line of output
       The result summary may be obtained with <command>
grep
      "validation suite" validate.log</command>. -->
<!-- I'm not convinced that Helvetica is required, I don't install the gs
      fonts. But lots of references to it. Surely fontconfig provides it? ken -->
Pour tester l'installation, tapez&nbsp;: <command>make
check</command>. Remarquez que les tests EPS, PS et PDF demandent un
<application>Ghostscript</application> fonctionnel. Un test de «&nbsp;make
check&nbsp;» demande <quote>Helvetica</quote> de <quote>Ghostscript Standard
Fonts</quote>, qui est éventuellement installé dans <xref linkend="gs"/> —
ce test, et un autre, peuvent échouer, mais toute la validation peut
toujours réussir.
    </para>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para>
      <parameter>--enable-hdri</parameter>&nbsp;: Active la construction d'une
version à espace hautement dynamique de ImageMagick.
    </para>

    <para>
      <parameter>--with-modules</parameter>&nbsp;:  Active le support des modules
chargeables de façon dynamique.
    </para>

    <para>
      <parameter>--with-perl</parameter>&nbsp;: Active la construction et
l'installation de PerlMagick.
    </para>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/static-libraries.xml"/>

    <para>
      <option>--with-gslib</option>&nbsp;: Active le support pour utiliser la
bibliothèque partagée de <application>Ghostscript</application>.
    </para>

    <para>
      <option>--with-rsvg</option>&nbsp;: Active le support pour utiliser la
bibliothèque <application>librsvg</application>.
    </para>

    <para>
      <option>--with-autotrace</option>&nbsp;: Active le support pour utiliser la
bibliothèque <application>Autotrace</application>.
    </para>

    <para>
      <option>--with-wmf</option>&nbsp;: Active le support pour utiliser la
bibliothèque <application>libwmf</application>..
    </para>

    <para>
      <option>--with-gvc</option>&nbsp;: Active le support pour utiliser
<application>GraphViz</application>.
    </para>

    <para>
      <option>--with-windows-font-dir=
<replaceable>&lt;Some/Directory&gt;</replaceable></option>&nbsp;: Cette
option spécifie le répertoire où les CoreFonts Windows seront installés.
    </para>

    <para>
      <option>--with-dejavu-font-dir=
<replaceable>&lt;Some/Directory&gt;</replaceable></option>&nbsp;: Cette
option spécifie le répertoire ou les polices DejaVu sont installées.
    </para>

    <para>
      Les options et les paramètres listés ci-dessus sont les seuls que vous
devriez être obligé de passer au script <command>configure</command> pour
activer toutes les fonctions déléguées aux dépendances. Toutes les autres
dépendances seront automatiquement détectées et utilisées dans la
construction si elles sont installées.
    </para>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>
          magick, Magick++-config, MagickCore-config et MagickWand-config.  (animate,
compare, composite, conjure, convert, display, identify, import,
magick-script, mogrify, montage et stream sont tous des liens symboliques
vers magick)
        </seg>
        <seg>
          libMagickCore-7.Q16HDRI.so, libMagickWand-7.Q16HDRI.so et
libMagick++-7.Q16HDRI.so
        </seg>
        <seg>
          /etc/ImageMagick-7, /usr/include/ImageMagick-7,
/usr/lib/ImageMagick-&imagemagick-version;,
/usr/lib/perl5/site_perl/&lfs-perl-version;/{,auto}/Image/Magick,
/usr/share/doc/ImageMagick-&imagemagick-version; et /usr/share/ImageMagick-7
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?> <?dbhtml list-presentation="table"?>

    <varlistentry id="animate">
      <term><command>animate</command></term>
      <listitem>
        <para>
          anime une séquence d'images
        </para>
        <indexterm zone="imagemagick animate">
          <primary sortas="b-animate">animate</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="compare">
      <term><command>compare</command></term>
      <listitem>
        <para>
          compare une image à une image reconstruite
        </para>
        <indexterm zone="imagemagick compare">
          <primary sortas="b-compare">compare</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="composite">
      <term><command>composite</command></term>
      <listitem>
        <para>
          assemble diverses images sur l'image de base donnée
        </para>
        <indexterm zone="imagemagick composite">
          <primary sortas="b-composite">composite</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="conjure">
      <term><command>conjure</command></term>
      <listitem>
        <para>
          exécute un script MSL pour créer une image
        </para>
        <indexterm zone="imagemagick conjure">
          <primary sortas="b-conjure">conjure</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="convert">
      <term><command>convert</command></term>
      <listitem>
        <para>
          convertit une ou plusieurs images d'un format en un autre
        </para>
        <indexterm zone="imagemagick convert">
          <primary sortas="b-convert">convert</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="display">
      <term><command>display</command></term>
      <listitem>
        <para>
          affiche une image
        </para>
        <indexterm zone="imagemagick display">
          <primary sortas="b-display">display</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="identify">
      <term><command>identify</command></term>
      <listitem>
        <para>
          décrit le format et les caractéristiques d'un fichier image
        </para>
        <indexterm zone="imagemagick identify">
          <primary sortas="b-identify">identify</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="import">
      <term><command>import</command></term>
      <listitem>
        <para>
          capture une fenêtre X
        </para>
        <indexterm zone="imagemagick import">
          <primary sortas="b-import">import</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="magick">
      <term><command>magick</command></term>
      <listitem>
        <para>
          convertit des images entre différents formats en pouvant les redimensionner,
les flouter, les rogner, les déparasiter, les tramer, dessiner dessus, les
retourner, les coller, les ré-échantillonner et bien plus
        </para>
        <indexterm zone="imagemagick magick">
          <primary sortas="b-magick">magick</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="magick-config">
      <term><command>Magick{++,Core,Wand}-config</command></term>
      <listitem>
        <para>
          montre des informations sur les versions installées des bibliothèques
<application>ImageMagick</application>
        </para>
        <indexterm zone="imagemagick magick-config">
          <primary sortas="b-Magick-config">Magick-config</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="mogrify">
      <term><command>mogrify</command></term>
      <listitem>
        <para>
          transforme une image
        </para>
        <indexterm zone="imagemagick mogrify">
          <primary sortas="b-mogrify">mogrify</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="montage">
      <term><command>montage</command></term>
      <listitem>
        <para>
          rassemble plusieurs images sur une nouvelle image
        </para>
        <indexterm zone="imagemagick montage">
          <primary sortas="b-montage">montage</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="stream">
      <term><command>stream</command></term>
      <listitem>
        <para>
          met en flux un ou plusieurs composants de pixels d'une image ou une portion
de l'image vers des formats de stockage de votre choix
        </para>
        <indexterm zone="imagemagick stream">
          <primary sortas="b-stream">stream</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="perlmagick">
      <term><filename class="libraryfile">Image::Magick</filename></term>
      <listitem>
        <para>
          permet de lire, manipuler et écrire un grand nombre de formats de fichiers
images en utilisant la bibliothèque
<application>ImageMagick</application>. Lancez <command>make</command> dans
le répertoire <filename class='directory'>PerlMagick/demo</filename> de
l'arborescence des sources du paquet après que le paquet a été installé pour
voir une belle démonstration des fonctionnalités du module
        </para>
        <indexterm zone="imagemagick perlmagick">
          <primary sortas="g-Image-Magick">Image::Magick</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="libMagickCore-7.Q16HDRI">
      <term><filename class="libraryfile">libMagickCore-7.Q16HDRI.so</filename></term>
      <listitem>
        <para>
          fournit une API C pour ImageMagick
        </para>
        <indexterm zone="imagemagick libMagickCore-7.Q16HDRI">
          <primary sortas="c-libMagickCore-7.Q16HDRI">libMagickCore-7.Q16HDRI.so</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="libMagickWand-7.Q16HDRI">
      <term><filename class="libraryfile">libMagickWand-7.Q16HDRI.so</filename></term>
      <listitem>
        <para>
          est l'API C recommandée pour ImageMagick. Contairement à l'API MagickCore,
elle n'utilise que peu de types opaques
        </para>
        <indexterm zone="imagemagick libMagickWand-7.Q16HDRI">
          <primary sortas="c-libMagickWand-7.Q16HDRI">libMagickWand-7.Q16HDRI.so</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    <varlistentry id="libMagickpp-7.Q16HDRI">
      <term><filename class="libraryfile">libMagick++-7.Q16HDRI.so</filename></term>
      <listitem>
        <para>
          fournit l'API C++ pour ImageMagick
        </para>
        <indexterm zone="imagemagick libMagickpp-7.Q16HDRI">
          <primary sortas="c-libMagick++-7.Q16HDRI">libMagick++-7.Q16HDRI.so</primary>
        </indexterm>
      </listitem>
    </varlistentry>

    </variablelist>

  </sect2>

</sect1>
