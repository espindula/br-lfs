<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!-- Also update the download, md5, size entities in libxml2py2.xml -->
  <!ENTITY libxml2-download-http "https://download.gnome.org/sources/libxml2/2.10/libxml2-&libxml2-version;.tar.xz">
<!--  <!ENTITY libxml2-download-http "http://xmlsoft.org/sources/libxml2-&libxml2-version;.tar.xz">-->
  <!ENTITY libxml2-download-ftp  "">
  <!ENTITY libxml2-md5sum        "76808c467a58c31e2dbd511e71d5fd13">
  <!ENTITY libxml2-size          "2,5&nbsp;Mo">
  <!ENTITY libxml2-buildsize     "106&nbsp;Mo (avec les tests)">
  <!ENTITY libxml2-time          "0,4&nbsp;SBU (avec parallélisme=4&nbsp;; avec les tests)">
  <!ENTITY testsuite-version     "20130923">
]>

<sect1 id="libxml2" xreflabel="libxml2-&libxml2-version;">
  <?dbhtml filename="libxml2.html"?>


  <title>libxml2-&libxml2-version;</title>

  <indexterm zone="libxml2">
    <primary sortas="a-libxml2">libxml2</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à libxml2</title>

    <para>
      Le paquet <application>libxml2</application> contient des bibliothèques et
des utilitaires utilisés pour analyser des fichiers XML.
    </para>

    &lfs113_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&libxml2-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP)&nbsp;: <ulink url="&libxml2-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5&nbsp;: &libxml2-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &libxml2-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &libxml2-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &libxml2-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Suite de tests facultative&nbsp;: <ulink
url="https://www.w3.org/XML/Test/xmlts&testsuite-version;.tar.gz"/> — Ceci
permet à <command>make check</command> de faire un test complet.
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de libxml2</bridgehead>

    <!-- do not advertize python2 here, except in the note below
    <bridgehead renderas="sect4">
Optional</bridgehead>
    <para role="optional">
      <xref linkend="python2"/>
    </para>
-->
<bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      <xref linkend="icu"/> (voir plus bas) et <xref linkend="valgrind"/> (peut
être utilisé dans les tests)
    </para>

    <note>
      <para>
        Le vieux module <application>Python2</application> peut être construit après
l'installation de <filename class="libraryfile">libxml2.so</filename>, voir
<xref linkend="libxml2py2"/>.
      </para>
    </note>

    <para condition="html" role="usernotes">
      Notes utilisateur&nbsp;: <ulink url="&blfs-wiki;/libxml2"/>
    </para>
  </sect2>

  <sect2 role="installation">
    <title>Installation de libxml2</title>

    <para>
      Installez <application>libxml2</application> en exécutant les commandes
suivantes&nbsp;:
    </para>

<screen><userinput>./configure --prefix=/usr           \
            --sysconfdir=/etc       \
            --disable-static        \
            --with-history          \
            PYTHON=/usr/bin/python3 \
            --docdir=/usr/share/doc/libxml2-&libxml2-version; &amp;&amp;
make</userinput></screen>

    <para>
      Si vous avez téléchargé la suite de tests, exécutez la commande
suivante&nbsp;:
    </para>

<screen><userinput>tar xf ../xmlts&testsuite-version;.tar.gz</userinput></screen>

    <para>
      Pour tester les résultats lancez&nbsp;: <command>make check &gt;
check.log</command>.  A summary of the results can be obtained with
<command>grep -E '^Total|expected' check.log</command>. If <xref
linkend="valgrind"/> is installed and you want to check for memory leaks,
replace <command>check</command> with <command>check-valgrind</command>.
    </para>

    <note>
      <para>
        Les tests utilisent <ulink url="http://localhost/">http://localhost/</ulink>
pour tester l'analyse des entités externes. Si la machine où vous lancez les
tests sert un site web, les tests peuvent durer indéfiniment, en fonction du
contenu servi. Il est donc recommandé d'éteindre le serveur durant les
tests, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
      </para>

<screen role="nodump" revision="sysv"><userinput>/etc/init.d/httpd stop</userinput></screen>
<screen role="nodump" revision="systemd"><userinput>systemctl stop httpd.service</userinput></screen>

    </note>

    <para>
      Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>make install</userinput></screen>
  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/static-libraries.xml"/>

    <para>
      <parameter>--with-history</parameter>&nbsp;: Ce paramètre active le support
de <application>Readline</application> quand <command>xmlcatalog</command>
ou <command>xmllint</command> sont lancés en mode shell.
    </para>

    <para>
      <parameter>PYTHON=/usr/bin/python3</parameter>&nbsp;: permet de compiler le
module libxml2 avec Python3 plutôt que Python2.
    </para>

    <para>
      <option>--with-icu</option>&nbsp;: Ajoutez ce paramètre si vous avez
construit <xref linkend="icu"/>, pour un meilleur support d'unicode.
    </para>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>
          xml2-config, xmlcatalog et xmllint
        </seg>
        <seg>
          libxml2.so
        </seg>
        <seg>
          /usr/include/libxml2, /usr/lib/cmake/libxml2,
/usr/share/doc/libxml2-&libxml2-version; et /usr/share/gtk-doc/html/libxml2
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?> <?dbhtml list-presentation="table"?>

      <varlistentry id="xml2-config">
        <term><command>xml2-config</command></term>
        <listitem>
          <para>
            détermine les drapeaux du compilateur et de l'éditeur de liens qui devraient
être utilisés pour compiler et lier les programmes qui utilisent <filename
class="libraryfile">libxml2</filename>
          </para>
          <indexterm zone="libxml2 xml2-config">
            <primary sortas="b-xml2-config">xml2-config</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="xmlcatalog">
        <term><command>xmlcatalog</command></term>
        <listitem>
          <para>
            est utilisé pour gérer et manipuler des catalogues XML et SGML
          </para>
          <indexterm zone="libxml2 xmlcatalog">
            <primary sortas="b-xmlcatalog">xmlcatalog</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="xmllint">
        <term><command>xmllint</command></term>
        <listitem>
          <para>
            analyse des fichiers XML et affiche les rapports (basés sur les options
ci-dessus) pour détecter les erreurs dans le code XML
          </para>
          <indexterm zone="libxml2 xmllint">
            <primary sortas="b-xmllint">xmllint</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libxml2-lib">
        <term><filename class="libraryfile">libxml2.so</filename></term>
        <listitem>
          <para>
            fournit des fonctions aux programmes pour analyser des fichiers qui
utilisent le format XML
          </para>
          <indexterm zone="libxml2 libxml2-lib">
            <primary sortas="c-libxml2">libxml2.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
