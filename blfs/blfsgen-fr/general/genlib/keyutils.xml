<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY keyutils-download-http "https://people.redhat.com/~dhowells/keyutils/keyutils-&keyutils-version;.tar.bz2">
  <!ENTITY keyutils-download-ftp  "">
  <!ENTITY keyutils-md5sum        "919af7f33576816b423d537f8a8692e8">
  <!ENTITY keyutils-size          "96&nbsp;Ko">
  <!ENTITY keyutils-buildsize     "1.9&nbsp;Mo (avec les tests)">
  <!ENTITY keyutils-time          "moins de 0,1&nbsp;SBU (plus 0,6&nbsp;SBU pour les tests)">
]>

<sect1 id="keyutils" xreflabel="keyutils-&keyutils-version;">
  <?dbhtml filename="keyutils.html"?>


  <title>keyutils-&keyutils-version;</title>

  <indexterm zone="keyutils">
    <primary sortas="a-keyutils">keyutils</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à keyutils</title>

    <para>
      <application>Keyutils</application> est un ensemble d'outils de gestion de
la conservation des clés dans le noyau, que peuvent utiliser les systèmes de
fichiers, les périphériques de blocs et la base pour conserver
l'autorisation et les clés de chiffrement nécessaires pour effectuer des
opérations sécurisées.
    </para>

    &lfs113_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&keyutils-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP)&nbsp;: <ulink url="&keyutils-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5&nbsp;: &keyutils-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &keyutils-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &keyutils-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &keyutils-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de keyutils</bridgehead>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
      <!-- Without krb5 installed, a FTBFS occurs while trying to compile dns.afsdb.c.
      It looks for profile.h, which is installed by krb5. -->
<xref linkend="mitkrb"/>
      
    </para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;: <ulink url="&blfs-wiki;/keyutils"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de keyutils</title>

    <para>
      Installez <application>keyutils</application> en exécutant les commandes
suivantes&nbsp;:
    </para>

<screen><userinput>sed -i 's:$(LIBDIR)/$(PKGCONFIG_DIR):/usr/lib/pkgconfig:' Makefile &amp;&amp;
make</userinput></screen>

    <para>
      Pour tester les résultats, lancez, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root" remap="test"><userinput>make -k test</userinput></screen>

    <para>
      Remarquez que plusieurs tests échoueront si certaines options peu communes
du noyau n'ont pas été utilisées lors de la construction de votre
noyau. Cela comprend CONFIG_BIG_KEYS, CONFIG_KEY_DH_OPERATIONS et
CONFIG_CRYPTO_DH.
    </para>

    <para>
      Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>make NO_ARLIB=1 LIBDIR=/usr/lib BINDIR=/usr/bin SBINDIR=/usr/sbin install</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para>
      <command>sed ... Makefile</command>&nbsp;: cette commande s'assure que le
fichier pkgconfig est placé dans le bon répertoire.
    </para>

    <para>
      <parameter>NO_ARLIB=1</parameter>&nbsp;: Ce drapeau désactive l'installation
des bibliothèques statiques.
    </para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de keyutils</title>

    <sect3 id="keyutils-config">
      <title>Fichiers de configuration</title>

      <para>
        <filename>/etc/request-key.conf</filename> et
<filename>/etc/request-key.d/*</filename>
      </para>

      <indexterm zone="keyutils keyutils-config">
        <primary sortas="e-etc-request-key.conf">/etc/request-key.conf</primary>
      </indexterm>

      <indexterm zone="keyutils keyutils-config">
        <primary sortas="e-etc-request-key.d">/etc/request-key.d/*</primary>
      </indexterm>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèque installée</segtitle>
      <segtitle>Répertoire installé</segtitle>

      <seglistitem>
        <seg>keyctl, key.dns_resolver et request-key</seg>
        <seg>libkeyutils.so</seg>
        <seg>/etc/request-key.d et /usr/share/keyutils</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?> <?dbhtml list-presentation="table"?>

      <varlistentry id="keyctl">
        <term><command>keyctl</command></term>
        <listitem>
          <para>
            contrôle la gestion de clés de différentes façons, en utilisant toute une
variété de sous-commande
          </para>
          <indexterm zone="keyutils keyctl">
            <primary sortas="b-keyctl">keyctl</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="key.dns_resolver">
        <term><command>key.dns_resolver</command></term>
        <listitem>
          <para>
            est appelé par <command>request-key</command> au nom du noyau quand les
services noyau (comme NFS, CIFS et AFS) doivent effectuer une résolution de
noms et que le noyau n'a pas la clé dans le cache. Ce n'est pas prévu pour
être appelé directement
          </para>
          <indexterm zone="keyutils key.dns_resolver">
            <primary sortas="b-key.dns_resolver">key.dns_resolver</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="request-key">
        <term><command>request-key</command></term>
        <listitem>
          <para>
            est appelé par le noyau quand le noyau est interrogé pour une clé qui n'est
pas immédiatement disponible. Le noyau crée une clé temporaire et ensuite
demande au programme de l’instancier. Ce n'est pas prévu pour être appelé
directement
          </para>
          <indexterm zone="keyutils request-key">
            <primary sortas="b-request-keyt-key">request-key</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libkeyutils">
        <term><filename class="libraryfile">libkeyutils.so</filename></term>
        <listitem>
          <para>
            contient les déclarations de l'API de la bibliothèque de keyutils
          </para>
          <indexterm zone="keyutils libkeyutils">
            <primary sortas="c-libkeyutils">libkeyutils.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
