<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY glib2-download-http "&gnome-download-http;/glib/&glib2-minor;/glib-&glib2-version;.tar.xz">
  <!ENTITY glib2-download-ftp  "&gnome-download-ftp;/glib/&glib2-minor;/glib-&glib2-version;.tar.xz">
  <!ENTITY glib2-md5sum        "06745709784eddb4a3860e1814f795e8">
  <!ENTITY glib2-size          "4,9&nbsp;Mo">
  <!ENTITY glib2-buildsize     "119&nbsp;Mo (plus 7&nbsp;Mo pour les tests)">
  <!ENTITY glib2-time          "0,4&nbsp;SBU (plus 0,5&nbsp;SBU pour les tests&nbsp;; dans les deux cas avec
parallélisme = 4)">
]>

<sect1 id="glib2" xreflabel="GLib-&glib2-version;">
  <?dbhtml filename="glib2.html"?>

  <sect1info>
<date>$Date$</date></sect1info>

  <title>GLib-&glib2-version;</title>

  <indexterm zone="glib2">
    <primary sortas="a-GLib2">GLib2</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à GLib</title>

    <para>
      Le paquet <application>GLib</application> contient des bibliothèques de bas
niveau utiles pour avoir la gestion de structures de données pour le C, des
enveloppes de portabilité et des interfaces pour des fonctionnalités
d'exécution telles qu'une boucle d'événements, les fils d'exécution, le
chargement dynamique et un système d'objets.
    </para>

    &lfs112_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&glib2-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP)&nbsp;: <ulink url="&glib2-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5&nbsp;: &glib2-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &glib2-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &glib2-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &glib2-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Téléchargements supplémentaires</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Correctif facultatif&nbsp;: <ulink
url="&patch-root;/glib-&glib2-version;-skip_warnings-1.patch"/>
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de GLib</bridgehead>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="libxslt"/> et <xref linkend="pcre2"/> 
    </para>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      <xref linkend="dbus"/> et <ulink url="https://bindfs.org/">bindfs</ulink>
(tous deux utilisés dans quelques tests), <xref linkend="gdb"/> (pour les
liaisons), <xref linkend="DocBook"/>, <xref linkend="docbook-xsl"/>, <xref
linkend="gtk-doc"/> (pour construire la documentation de l'API), <xref
linkend="glib-networking"/> (pour certains tests, mais c'est une dépendance
circulaire) et <xref linkend="sysprof"/>
    </para>

    <bridgehead renderas="sect4">Dépendances de Additional Runtime</bridgehead>
    <para role="recommended">
      <xref role="runtime" linkend="gobject-introspection"/> (doit être installé
avant gtk+, atk, etc.)
    </para>
    <para role="optional">
      Cité directement depuis le fichier <filename>INSTALL</filename>&nbsp;:
<quote>Certaines fonctionnalités de GIO liées aux types mime exigent
<command>update-mime-database</command> et les outils
<command>update-desktop-database</command></quote>, qui font partie
respectivement de <xref role="runtime" linkend="shared-mime-info"/> et de
<xref role="runtime" linkend="desktop-file-utils"/>. Ces deux utilitaires
sont aussi requis pour certains tests.
    </para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;: <ulink url="&blfs-wiki;/glib2"/>
    </para>
  </sect2>

  <sect2 role="installation">
    <title>Installation de GLib</title>
    
    <!-- Remove the next para and screen for glib-2.72.3 or above
    <para>

      First, fix an issue in MIME file content lookup, which may prevent
      displaying <command>file://</command> URL's in webkitgtk based browsers.
    </para>

<screen><userinput>patch -Np1 -i ../glib-&glib2-version;-fix_xdgmime-1.patch</userinput></screen>
-->
<para>
      Si vous le souhaitez, appliquez le correctif facultatif. Dans beaucoup de
cas, les applications qui utilisent cette bibliothèque, directement ou
indirectement via d'autres bibliothèques comme <xref linkend="gtk3"/>,
affichent de nombreux avertissements lorsqu'ils sont lancés depuis la ligne
de commande. Ce correctif permet d'utiliser une variable d'environnement,
<envar>GLIB_LOG_LEVEL</envar>, qui supprime les messages non souhaités. La
valeur de la variable est un nombre qui correspond à&nbsp;:
    </para>

    <simplelist>
      <member>1 Alerte</member>
      <member>2 Critique</member>
      <member>3 Erreur</member>
      <member>4 Avertissement</member>
      <member>5 Remarque</member>
    </simplelist>

    <para>
      Par exemple <userinput>export GLIB_LOG_LEVEL=4</userinput> ignorera les
sorties de messages d'avertissement et de remarque (et les messages
Info/Debug s'ils sont activés). Si <envar>GLIB_LOG_LEVEL</envar> n'est pas
défini, la sortie des messages normaux ne sera pas affectée.
    </para>

<screen><userinput>patch -Np1 -i ../glib-&glib2-version;-skip_warnings-1.patch</userinput></screen>

    <warning>
      <para>
        Si vous avez installé une version précédente de glib, déplacez les en-têtes
là où ils ne gêneront pas pour que les paquets suivants n'aient pas de
conflits&nbsp;:
      </para>

<screen role="root"><userinput remap="pre">if [ -e /usr/include/glib-2.0 ]; then
    rm -rf /usr/include/glib-2.0.old &amp;&amp;
    mv -vf /usr/include/glib-2.0{,.old}
fi</userinput></screen>

    </warning>

    <para>
      Installez <application>GLib</application> en exécutant les commandes
suivantes&nbsp;:
    </para>

<screen><userinput>mkdir build &amp;&amp;
cd    build &amp;&amp;

meson --prefix=/usr       \
      --buildtype=release \
      -Dman=true          \
      ..                  &amp;&amp;
ninja</userinput></screen>

    <note><para>
      Si <xref linkend="libxslt"/> est installé, la commande suivante peut
indiquer plusieurs erreurs (environ 33) qui commencent par «&nbsp;Error: no
ID for constraint linkend:&nbsp;» lors de la génération des pages de
manuel. Elles sont inoffensives.
    </para></note>

    <para>
      La suite de tests de <application>GLib</application> exige
<application>desktop-file-utils</application> pour quelques
tests. Cependant, <application>desktop-file-utils</application> exige
<application>GLib</application> pour se compiler&nbsp;; vous devrez donc
installer d'abord <application>GLib</application> puis lancer la suite de
test.
    </para>

    <para>
      Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>ninja install &amp;&amp;

mkdir -p /usr/share/doc/glib-&glib2-version; &amp;&amp;
cp -r ../docs/reference/{gio,glib,gobject} /usr/share/doc/glib-&glib2-version;</userinput></screen>

    <para>
      Vous devriez maintenant installer <xref linkend="desktop-file-utils"/> et
<xref linkend="shared-mime-info"/> et lancer la suite de tests.
    </para>

    <warning>
      <para>
        Ne lancez pas la suite de tests en tant que &root; ou certains tests
échoueront de manière inattendue et laisseront des répertoires qui ne se
conforment pas à la FHS dans la hiérarchie <filename
class='directory'>/usr</filename>.
      </para>
    </warning>

    <para>
      <!-- glib issue #1954: -->
<!-- One test named gdbus-server-auth sometimes fails.-->
<!-- SysV has the symlink now, so gdatetime no longer fails.-->
<!-- Needs /etc/localtime to be a symbolic link. In addition
      the link must be to some place like /usr/share/zoneinfo/...

      This can be overcome if the line below in glib/tests/gdatetime.c
      is removed or commented out.
      g_assert_true (*g_time_zone_get_identifier (tz) != '/');

      NOTE: systemd implements this as a hard requirement.  -->
<!-- with 2.60.4 on systemd, all tests pass. -->
<!-- with 2.64.1 on sysV, all tests pass. -->
<!-- with 2.70.1 on sysV, all tests pass. -->
<!-- with 2.70.2 on sysV, all tests pass. -->
<!-- with 2.72.3 on sysV, all tests pass. [pierre, July 2022] -->
<!-- with 2.74.0 on sysV, all tests pass. [bdubbs, Sep 2022] -->
Pour tester les résultats, après avoir installé le paquet, lancez&nbsp;:
<command>LC_ALL=C ninja test</command> en tant qu'utilisateur non &root;.
      
      
      
      
      
      
      
      
      
      
    </para>

    <para>
      Enfin, si c'est une réinstallation à partir de glib2-2.64.x ou précédent,
supprimez (en tant qu'utilisateur <systemitem
class="username">root</systemitem>) un fichier d'en-tête obsolète qui
pourrait interférer avec certains paquets&nbsp;:
    </para>

<screen role="nodump"><userinput>rm -f /usr/include/glib-2.0/glib/gurifuncs.h</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/meson-buildtype-release.xml"/>

    <para>
      <parameter>-Dman=true</parameter>&nbsp;: Ce paramètre cause la construction
et l'installation des pages de manuel du paquet.
    </para>

    <para>
      <option>-Dgtk_doc=true</option>&nbsp;: Ce paramètre cause la construction et
l'installation de la documentation de l'API.
    </para>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>
          gapplication, gdbus, gdbus-codegen, gio, gio-querymodules,
glib-compile-resources, glib-compile-schemas, glib-genmarshal,
glib-gettextize, glib-mkenums, gobject-query, gresource, gsettings, gtester
et gtester-report
        </seg>
        <seg>
          libgio-2.0.so, libglib-2.0.so, libgmodule-2.0.so, libgobject-2.0.so et
libgthread-2.0.so
        </seg>
        <seg>
          /usr/include/gio-unix-2.0, /usr/include/glib-2.0, /usr/lib/glib-2.0,
/usr/share/glib-2.0, /usr/share/doc/glib-&glib2-version; et
/usr/share/gtk-doc/html/{gio,glib,gobject} (facultatif)
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?> <?dbhtml list-presentation="table"?>

      <varlistentry id="gapplication">
        <term><command>gapplication</command></term>
        <listitem>
          <para>
            peut être utilisé pour démarrer des applications et pour envoyer des
messages aux instances déjà lancées d'autres applications
          </para>
          <indexterm zone="glib2 gapplication">
            <primary sortas="b-gapplication">application</primary>
          </indexterm>
        </listitem>
      </varlistentry>
      <varlistentry id="gdbus">
        <term><command>gdbus</command></term>
        <listitem>
          <para>
            est un outil simple utilisé pour fonctionner avec des objets
<application>D-Bus</application>
          </para>
          <indexterm zone="glib2 gdbus">
            <primary sortas="b-gdbus">gdbus</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gdbus-codegen">
        <term><command>gdbus-codegen</command></term>
        <listitem>
          <para>
            est utilisé pour générer du code et de la documentation pour une ou
plusieurs interfaces <application>D-Bus</application>
          </para>
          <indexterm zone="glib2 gdbus-codegen">
            <primary sortas="b-gdbus-codegen">gdbus-codegen</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gio">
        <term><command>gio</command></term>
        <listitem>
          <para>
            est un utilitaire qui rend plusieurs fonctionnalités de
<application>GIO</application> disponibles depuis la ligne de commande
          </para>
          <indexterm zone="glib2 gio">
            <primary sortas="b-gio">gio</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gio-querymodules">
        <term><command>gio-querymodules</command></term>
        <listitem>
          <para>
            est utilisé pour créer un fichier <filename>giomodule.cache</filename> dans
les répertoires listés. Ce fichier liste les points d'extension implémentés
pour chaque module trouvé
          </para>
          <indexterm zone="glib2 gio-querymodules">
            <primary sortas="b-gio-querymodules">gio-querymodules</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="glib-compile-resources">
        <term><command>glib-compile-resources</command></term>
        <listitem>
          <para>
            est utilisé pour lire la description des ressources à partir d'un fichier et
des fichiers référencés pour créer un catalogue de ressources binaire adapté
à une utilisation avec l'API GResource
          </para>
          <indexterm zone="glib2 glib-compile-resources">
            <primary sortas="b-glib-compile-resources">glib-compile-resources</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="glib-compile-schemas">
        <term><command>glib-compile-schemas</command></term>
        <listitem>
          <para>
            est utilisé pour compiler tous les fichiers de schémas XML de GSettings du
répertoire en un fichier binaire nommé
<filename>gschemas.compiled</filename> utilisable par GSettings
          </para>
          <indexterm zone="glib2 glib-compile-schemas">
            <primary sortas="b-glib-compile-resources">glib-compile-schemas</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="glib-genmarshal">
        <term><command>glib-genmarshal</command></term>
        <listitem>
          <para>
            est un outil de génération marshaller de code C pour les closures GLib
          </para>
          <indexterm zone="glib2 glib-genmarshal">
            <primary sortas="b-glib-genmarshal">glib-genmarshal</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="glib-gettextize">
        <term><command>glib-gettextize</command></term>
        <listitem>
          <para>
            est une variante de l'outil d'internationalisation
<application>gettext</application>
          </para>
          <indexterm zone="glib2 glib-gettextize">
            <primary sortas="b-glib-gettextize">glib-gettextize</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="glib-mkenums">
        <term><command>glib-mkenums</command></term>
        <listitem>
          <para>
            est un outil de génération de description des enum du langage C
          </para>
          <indexterm zone="glib2 glib-mkenums">
            <primary sortas="b-glib-mkenums">glib-mkenums</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gobject-query">
        <term><command>gobject-query</command></term>
        <listitem>
          <para>
            est un outil qui dessine une arborescence de types
          </para>
          <indexterm zone="glib2 gobject-query">
            <primary sortas="b-gobject-query">gobject-query</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gresource">
        <term><command>gresource</command></term>
        <listitem>
          <para>
            offre une interface simple en ligne de commande avec GResource
          </para>
          <indexterm zone="glib2 gresource">
            <primary sortas="b-gresource">gresource</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gsettings">
        <term><command>gsettings</command></term>
        <listitem>
          <para>
            offre une interface simple en ligne de commande avec GSettings
          </para>
          <indexterm zone="glib2 gsettings">
            <primary sortas="b-gsettings">gsettings</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gtester">
        <term><command>gtester</command></term>
        <listitem>
          <para>
            est un outil d'exécution de tests
          </para>
          <indexterm zone="glib2 gtester">
            <primary sortas="b-gtester">gtester</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gtester-report">
        <term><command>gtester-report</command></term>
        <listitem>
          <para>
            est un outil de formatage de rapports de test
          </para>
          <indexterm zone="glib2 gtester-report">
            <primary sortas="b-gtester-report">gtester-report</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="GLib-libraries">
        <term>Bibliothèques GLib</term>
          <listitem>
          <para>
            contient une bibliothèque cœur de bas niveau pour le Toolkit
<application>GIMP</application>
          </para>
          <indexterm zone="glib2 GLib-libraries">
            <primary sortas="c-GLib-libraries">Bibliothèques Glib</primary>
          </indexterm>
          </listitem>
        </varlistentry>

    </variablelist>

  </sect2>

</sect1>
