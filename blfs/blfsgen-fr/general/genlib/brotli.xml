<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY brotli-download-http "https://github.com/google/brotli/archive/v&brotli-version;/brotli-&brotli-version;.tar.gz">
  <!ENTITY brotli-download-ftp  "">
  <!ENTITY brotli-md5sum        "c2274f0c7af8470ad514637c35bcee7d">
  <!ENTITY brotli-size          "476&nbsp;Ko">
  <!ENTITY brotli-buildsize     "24 Mo (avec les liaisons python3)">
  <!-- The python tests for this package are broken.  The tarball is missing a lot of test files -->
  <!ENTITY brotli-time          "0,4&nbsp;SBU (avec les liaisons python3)">
]>

<sect1 id="brotli" xreflabel="Brotli-&brotli-version;">
  <?dbhtml filename="brotli.html"?>

  <sect1info>
<date>$Date$</date></sect1info>

  <title>brotli-&brotli-version;</title>

  <indexterm zone="brotli">
    <primary sortas="a-brotli">Brotli</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction  Brotli</title>

    <para>
      <application>Brotli</application> fournit un algorithme de compression sans
perte générique qui compresse des données avec une combinaison d'une
variante moderne de l'algorithme LZ77, le codage de Huffman et la
modélisation de contexte au second degré. Ses bibliothèques sont utilisées
en particulier pour les polices WOFF2 sur le web.
    </para>

    &lfs112_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Tlchargement (HTTP)&nbsp;: <ulink url="&brotli-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Tlchargement (FTP)&nbsp;: <ulink url="&brotli-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrle MD5 du tlchargement&nbsp;: &brotli-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du tlchargement&nbsp;: &brotli-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &brotli-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &brotli-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de Brotli</bridgehead>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
      <xref linkend="cmake"/>
    </para>


    <!-- Brotli doesn't have any lua bindings, at least not with 1.0.7.
         Do not advertise python2 as python3 should be used instead
    <bridgehead renderas="sect4">Optional</bridgehead>
    <para role="optional">
      <xref linkend="lua"/> (to create Lua bindings) and
      <xref linkend="python2"/> (to create python2 bindings)
    </para>
-->
<para condition="html" role="usernotes">
      Notes utilisateur&nbsp;: <ulink url="&blfs-wiki;/brotli"/>
    </para>
  </sect2>


  <sect2 role="installation">
    <title>Installation de Brotli</title>

    <para>
      Tout d'abord, corrigez un problème dans les fichiers pkg-config&nbsp;:
    </para>

<screen><userinput>sed -i 's@-R..libdir.@@' scripts/*.pc.in</userinput></screen>

    <para>
      Installez <application>brotli</application> en exécutant les commandes
suivantes&nbsp;:
    </para>

<screen><userinput>mkdir out &amp;&amp;
cd    out &amp;&amp;

cmake -DCMAKE_INSTALL_PREFIX=/usr \
      -DCMAKE_BUILD_TYPE=Release  \
      ..  &amp;&amp;
make</userinput></screen>


    <para>
      Pour tester les résultats lancez&nbsp;: <command>make test</command>.
    </para>


    <!--  These are broken
    <para>

      The python tests are missing most of the necessary testdata files and
      therefore 240 of 311 tests fail.
      If you nevertheless wish to test the bindings, go back to the top-level directory and
      issue: <command>python3 setup.py test</command>.
    </para>
-->
<para>
      Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>make install &amp;&amp;
cd ..</userinput></screen>

    <para>
      Si vous le souhaitez, construisez et installez les liaisons
<application>Python3</application> en tant qu'utilisateur &root;&nbsp;:
    </para>

<screen role="root"><userinput>pip3 wheel -w dist --no-build-isolation --no-deps $PWD &amp;&amp;
pip3 install --no-index --find-links dist --no-cache-dir --no-user Brotli</userinput></screen>

  </sect2>

  <sect2 role="content">
    <title>Contents</title>

    <segmentedlist>
      <segtitle>Programmes installs</segtitle>
      <segtitle>Bibliothques installes</segtitle>
      <segtitle>Rpertoire install</segtitle>

      <seglistitem>
        <seg>
          brotli
        </seg>
        <seg>
          libbrotlicommon{-static.a,.so}, libbrotlidec{,-static.a,.so}, et
libbrotlienc{,-static.a,.so}
        </seg>
        <seg>
          /usr/include/brotli
/usr/lib/python3.10/site-packages/Brotli-&brotli-version;.dist-info
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?> <?dbhtml list-presentation="table"?>

      <varlistentry id="brotli-prog">
        <term><command>brotli</command></term>
        <listitem>
          <para>
            peut compresser ou décompresser des fichier ou tester l'intégrité des
fichiers compressés
          </para>
          <indexterm zone="brotli brotli-prog">
            <primary sortas="b-brotli">brotli</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libbrotlicommon">
        <term><filename class="libraryfile">libbrotlicommon{-static.a,.so}</filename></term>
        <listitem>
          <para>
            est la bibliothèque pour le dictionnaire commun de Brotli
          </para>
          <indexterm zone="brotli libbrotlicommon">
            <primary sortas="c-libbrotlicommon">libbrotlicommon{,-static.a,.so}</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libbrotlidec">
        <term><filename class="libraryfile">libbrotlidec{-static.a,.so}</filename></term>
        <listitem>
          <para>
            est la bibliothèque de décodage de Brotli
          </para>
          <indexterm zone="brotli libbrotlidec">
            <primary sortas="c-libbrotlidec">libbrotlidec{,-static.a,.so}</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libbrotlienc">
        <term><filename class="libraryfile">libbrotlienc{-static.a,.so}</filename></term>
        <listitem>
          <para>
            est la bibliothèque d'encodage commun de Brotli
          </para>
          <indexterm zone="brotli libbrotlienc">
            <primary sortas="c-libbrotlienc">libbrotlienc{,-static.a,.so}</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>

  </sect2>

</sect1>
