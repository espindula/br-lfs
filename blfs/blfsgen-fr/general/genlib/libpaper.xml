<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY libpaper-download-http "https://ftp.debian.org/debian/pool/main/libp/libpaper/libpaper_&libpaper-version;.tar.gz">
  <!ENTITY libpaper-download-ftp  "">
  <!ENTITY libpaper-md5sum        "38bc55688c0fc5544edaa5a951a45fbd">
  <!ENTITY libpaper-size          "48 Ko">
  <!ENTITY libpaper-buildsize     "3.5 Mo">
  <!ENTITY libpaper-time          "moins de 0,1&nbsp;SBU">
]>

<sect1 id="libpaper" xreflabel="libpaper-&libpaper-version;">
  <?dbhtml filename="libpaper.html"?>

  <sect1info>
<date>$Date$</date></sect1info>

  <title>libpaper-&libpaper-version;</title>

  <indexterm zone="libpaper">
    <primary sortas="a-libpaper">libpaper</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à libpaper</title>

    <para>
      Ce paquet est prévu pour fournir une façon simple aux applications pour
faire des actions basées sur une dimension de papier du système ou donnée
par l'utilisateur.
    </para>

    &lfs112_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&libpaper-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP)&nbsp;: <ulink url="&libpaper-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5&nbsp;: &libpaper-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &libpaper-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &libpaper-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &libpaper-time;
        </para>
      </listitem>
    </itemizedlist>

    <para condition="html" role="usernotes">
      Notes utilisateur&nbsp;: <ulink url="&blfs-wiki;/libpaper"/>
    </para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de libpaper</title>

    <para>
      Installez <application>libpaper</application> en exécutant les commandes
suivantes&nbsp;:
    </para>

<screen><userinput>autoreconf -fi                &amp;&amp;
./configure --prefix=/usr     \
            --sysconfdir=/etc \
            --disable-static &amp;&amp;
make</userinput></screen>

    <para>
      Ce paquet n'a pas de suite de tests.
    </para>

    <para>
      Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>make install &amp;&amp;
mkdir -vp /etc/libpaper.d</userinput></screen>

     <para>
       Le répertoire /etc/libpaper.d contient des scripts à lancer après avoir
changé la taille de papier. Ce paquet ne mais aucun script ici, mais
d'autres paquets peuvent le faire. Si le paquet fcron n'a pas été installé,
créez le script <command>run-parts</command> comme le montre la section
<xref linkend='run-parts'/>.
     </para>


  <!--
cat &gt; /usr/bin/run-parts &lt;&lt; "EOF"
<literal>
#!/bin/sh
# run-parts:  Runs all the scripts found in a directory.
# from Slackware, by Patrick J. Volkerding with ideas borrowed
# from the Red Hat and Debian versions of this utility.

# keep going when something fails
set +e

if [ $# -lt 1 ]; then
  echo "Usage: run-parts &lt;directory&gt;"
  exit 1
fi

if [ ! -d $1 ]; then
  echo "Not a directory: $1"
  echo "Usage: run-parts &lt;directory&gt;"
  exit 1
fi

# There are several types of files that we would like to
# ignore automatically, as they are likely to be backups
# of other scripts:
IGNORE_SUFFIXES="~ ^ , .bak .new .rpmsave .rpmorig .rpmnew .swp"

# Main loop:
for SCRIPT in $1/* ; do
  # If this is not a regular file, skip it:
  if [ ! -f $SCRIPT ]; then
    continue
  fi
  # Determine if this file should be skipped by suffix:
  SKIP=false
  for SUFFIX in $IGNORE_SUFFIXES ; do
    if [ ! "$(basename $SCRIPT $SUFFIX)" = "$(basename $SCRIPT)" ]; then
      SKIP=true
      break
    fi
  done
  if [ "$SKIP" = "true" ]; then
    continue
  fi
  # If we've made it this far, then run the script if it's executable:
  if [ -x $SCRIPT ]; then
    $SCRIPT || echo "$SCRIPT failed."
  fi
done

exit 0</literal>
EOF

chmod -v 755 /usr/bin/run-parts</userinput></screen>
-->
</sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/static-libraries.xml"/>

    <para>
      <command>mkdir -pv /etc/libpaper.d</command>&nbsp;:
<application>libpaper</application> fait que les paquets installeront les
fichiers dans ce répertoire.
    </para>

  <!--
    <para>

      <command>cat &gt; /usr/bin/run-parts &lt;&lt; "EOF"</command> :
      <filename>paperconfig</filename> is a script which will invoke
      <command>run-parts</command> if <filename
      class="directory">/etc/libpaper.d</filename> exists. No other BLFS
      package installs this, so we create it here.
    </para>
-->
</sect2>

  <sect2 role="configuration">
    <title>Configuration de libpaper</title>

    <sect3>
      <title>Information de configuration</title>

      <para>
        Créez <filename>/etc/papersize</filename> pour initialiser la taille de
papier par défaut. Tapez les commandes suivantes en tant qu'utilisateur
<systemitem class="username">root</systemitem> pour l'initialiser à
&apos;A4&apos; (libpaper préfère la forme en minuscule). Vous pouvez vouloir
utiliser une taille différente, comme letter.
      </para>

<screen role="root"><userinput>cat &gt; /etc/papersize &lt;&lt; "EOF"
<literal>a4</literal>
EOF</userinput></screen>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèque installée</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>
          paperconf, paperconfig, run-parts
        </seg>
        <seg>
          libpaper.so
        </seg>
        <seg>
          /etc/libpaper.d
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?> <?dbhtml list-presentation="table"?>

      <varlistentry id="paperconf">
        <term><command>paperconf</command></term>
        <listitem>
          <para>
            affiche les informations de configuration du papier
          </para>
          <indexterm zone="libpaper paperconf">
            <primary sortas="b-paperconf">paperconf</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="paperconfig">
        <term><command>paperconfig</command></term>
        <listitem>
          <para>
            configure la taille par défaut du papier pour le système
          </para>
          <indexterm zone="libpaper paperconfig">
            <primary sortas="b-paperconfig">paperconfig</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <!--
      <varlistentry id="run-parts">

        <term><command>run-parts</command></term>
        <listitem>
          <para>
            runs all the scripts found in a directory.
          </para>
          <indexterm zone="libpaper run-parts">
            <primary sortas="b-run-parts">run-parts</primary>
          </indexterm>
        </listitem>
      </varlistentry>
-->
<varlistentry id="libpaper-lib">
        <term><filename class="libraryfile">libpaper.so</filename></term>
        <listitem>
          <para>
            contient des fonctions pour interroger la bibliothèque paper
          </para>
          <indexterm zone="libpaper libpaper-lib">
            <primary sortas="c-libpaper">libpaper.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
