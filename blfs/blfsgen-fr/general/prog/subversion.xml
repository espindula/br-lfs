<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY subversion-download-http "https://archive.apache.org/dist/subversion/subversion-&subversion-version;.tar.bz2">
  <!ENTITY subversion-download-ftp  "">
  <!ENTITY subversion-md5sum        "2eccc2c7451397e01a13682600af9563">
  <!ENTITY subversion-size          "8.1 Mo">
  <!-- for 1.12.0                    1.12.2         1.13.0
       make javahl: 0.5 SBU  28 MB; not avail
       swig-pl:     0.8      42 MB; 0.7 SBU  43 MB; 0.6 SBU 44 MB
       swig-py:     0.6      26 MB; 0.5      28 MB; 0.5     28 MB
       swig-rb:     0.4      22 MB; 0.4      21 MB; 0.3     21 MB
       docs:        2 secs   26 MB; 2 sec    27 MB; 2 sec   26 MB
       tests       46 min  1104 MB  46:52  1103 MB  47 min   -->
  <!ENTITY subversion-buildsize     "208 Mo (plus 228 Mo pour les liaisons, 52 Mo pour les docs, 1,3 Go pour les
tests)">
  <!ENTITY subversion-time          "0,5 SBU (avec parallélisme = 4&nbsp;; plus 1,9 SBU pour les liaisons, 35 SBU
pour les tests)">
]>

<sect1 id="subversion" xreflabel="Subversion-&subversion-version;">
  <?dbhtml filename="subversion.html"?>

  <sect1info>
<date>$Date$</date></sect1info>

  <title>Subversion-&subversion-version;</title>

  <indexterm zone="subversion">
    <primary sortas="a-Subversion">Subversion</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à Subversion</title>

    <para>
      <application>Subversion</application> est un système de contrôle de version
prévu pour être un superbe remplacement de <application>CVS</application>
dans la communauté du libre. Il améliore et prend en charge les
caractéristiques de <application>CVS</application> tout en conservant une
interface identique pour ceux à l'aise avec
<application>CVS</application>. Ces instructions installent les logiciels
client et serveur utilisés pour manipuler un dépôt
<application>Subversion</application>. La création d'un dépôt est couverte
dans <xref linkend="svnserver"/>.
    </para>

    &lfs111_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&subversion-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP)&nbsp;: <ulink url="&subversion-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5&nbsp;: &subversion-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &subversion-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &subversion-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &subversion-time;
        </para>
      </listitem>
    </itemizedlist>

    <!--
    <bridgehead renderas="sect3">
Additional Downloads</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Required patch for building with <xref linkend="apr"/>:
	  <ulink url="&patch-root;/subversion-&subversion-version;-apr_1.7.0_fix-1.patch"/>
        </para>
      </listitem>
    </itemizedlist>
-->
<bridgehead renderas="sect3">Dépendances de Subversion</bridgehead>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
      <xref linkend="apr-util"/> et <xref linkend="sqlite"/>
    </para>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="serf"/> (pour prendre en charge les URL http:// et https://)
    </para>



    <!-- support for berkeley db is deprecated since 1.8
    <note>

      <para>
        If you require the <application>Berkeley DB</application> back-end hooks
        in <application>Subversion</application> to build or support BDB based
        repositories, you must have <application>APR-util</application> linked to
        the <application>Berkeley DB</application> library.
      </para>
    </note>
-->
<bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      <!-- support for berkeley db is deprecated since 1.8
      <xref linkend="db"/>
,
-->
<!--      <xref linkend="kdelibs"/>
 (for <ulink url="http://utils.kde.org/projects/kwalletmanager/">KWallet</ulink> support), -->
<xref linkend="apache"/>, <xref linkend="boost"/>, <xref
linkend="cyrus-sasl"/>, <xref linkend="dbus"/>, <xref linkend="doxygen"/>
(pour générer la documentation HTML), <xref linkend="gnome-keyring"/>, <xref
linkend="libsecret"/>, <xref linkend="py3c"/> (pour les liaisons python et
les tests), <xref linkend="python2"/> (avec la prise en charge de sqlite
pour les tests), <xref linkend="ruby"/>, <xref linkend="swig"/> (pour
construire les liaisons Perl, Python et Ruby), <ulink
url="https://github.com/lz4/lz4/releases">LZ4</ulink> et <ulink
url="http://git.netsurf-browser.org/libutf8proc.git/">UTF8proc</ulink>
    </para>

    <bridgehead renderas="sect4">Facultatives (pour les liaisons Java)</bridgehead>
    <para role="optional">
      Un parmi <xref linkend="openjdk"/>, <ulink
url="http://www.inet.no/dante/">Dante</ulink> et <ulink
url="http://jikes.sourceforge.net/">Jikes</ulink>, <ulink
url="https://junit.org/junit4/">JUnit 4</ulink> (pour tester les liaisons
Java) et <xref linkend="apache-ant"/>.
    </para>

    <para condition="html" role="usernotes">
      Notes utilisateur&nbsp;: <ulink url="&blfs-wiki;/subversion"/>
    </para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Subversion</title>



    <!--
      <note>

        <para>
          This package may fail during the make phase when using multiple
          processors.  If this occurs try continuing with
          <emphasis>make -j1</emphasis> or redo the entire build process with
          fresh sources using <emphasis>-j1</emphasis>.
        </para>
      </note>
-->
<!--
    <para>

      First, apply a patch to fix building against <xref linkend="apr"/>:
    </para>

<screen><userinput>patch -Np1 -i ../subversion-&subversion-version;-apr_1.7.0_fix-1.patch</userinput></screen> -->
<!--
    <para>

      First, apply a fix to adapt subversion to <xref linkend="swig"/>:
    </para>

<screen><userinput remap="pre">sed -i 's/classic/nofastunpack/' build.conf</userinput></screen>
-->
<para>
      Tout d'abord, adaptez certains scripts Python pour qu'ils utilisent
python3&nbsp;:
    </para>

<screen><userinput remap="pre">grep -rl '^#!.*python$' | xargs sed -i '1s/python/&amp;3/'</userinput></screen>

    <para>
      Installez <application>Subversion</application> en exécutant les commandes
suivantes&nbsp;:
    </para>

<screen><userinput>PYTHON=python3 ./configure --prefix=/usr             \
            --disable-static          \
            --with-apache-libexecdir  \
            --with-lz4=internal       \
            --with-utf8proc=internal &amp;&amp;
make</userinput></screen>

    <para>
      Si vous avez installé <xref linkend="doxygen"/> et si vous souhaitez
construire la documentation de l'API, lancez&nbsp;:
    </para>

<screen remap="doc"><userinput>doxygen doc/doxygen.conf</userinput></screen>

    <para>
      Si vous voulez construire les liaisons Java passez le paramètre
<option>--enable-javahl</option> à la commande
<command>configure</command>. En plus, si vous voulez lancer la suite de
tests Java, vous devez spécifier l'emplacement du fichier
<application>JUnit</application> en ajoutant <option>--with-junit=&lt;chemin
vers le jar de junit&gt;</option> (par exemple
<option>--with-junit=/usr/local/java/lib/junit-4.13.jar</option>) à
<command>configure</command>. Le fichier jar de JUnit n'est plus inclus dans
<xref linkend="apache-ant"/> et doit être téléchargé séparément. Pour
construire les liaisons Java, lancez la commande suivante&nbsp;:
    </para>
    <para>
      <screen><command>make javahl</command></screen>
    </para>

    <para>
      Si vous voulez compiler les liaisons <application>Perl</application>,
<application>Python</application>, ou <application>Ruby</application>, tapez
les commandes suivantes&nbsp;:
    </para>
    <para>
      <screen><command>make swig-pl</command> # pour <application>Perl</application>
<command>make swig-py \
     swig_pydir=/usr/lib/python&python3-majorver;/site-packages/libsvn \
     swig_pydir_extra=/usr/lib/python&python3-majorver;/site-packages/svn</command> # pour <application>Python</application>
<command>make swig-rb</command> # pour <application>Ruby</application></screen>
    </para>

    <para>
      Pour tester les résultats lancez&nbsp;: <command>make
check</command>. Quatre tests dans les suites
<filename>commit_tests.py</filename>, <filename>prop_tests.py</filename> et
<filename>update_tests.py</filename> sont connus pour échouer.
    </para>

    <para>
      <!-- ~~ This explanation is added to the configure above ~~
      The <application>
JUnit</application> testing framework must be installed,
      and the location of the JUnit jar has to be specified by passing the
      <option>- -with-junit=&lt;path to junit jar&gt;</option> parameter to
      <command>configure</command>. Note that <application>JUnit</application>
      is included in <xref linkend="apache-ant"/>, and can be accessed by
      passing <option>- -with-junit=/opt/ant/lib/junit-4.12.jar</option>
      to <command>configure</command>.
      -->
Pour tester les résultats de la construction des liaisons Java, lancez
<command>LANG=C make check-javahl</command>.
      
    </para>

    <para>
      Pour tester les résultats de certaines liaisons
<application>SWIG</application>, vous pouvez utiliser les commandes
suivantes&nbsp;: <command>make check-swig-pl</command>, <command>make
check-swig-py</command>, ou <command>make check-swig-rb</command>.
    </para>

    <para>
      Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>make install &amp;&amp;

install -v -m755 -d /usr/share/doc/subversion-&subversion-version; &amp;&amp;
cp      -v -R doc/* /usr/share/doc/subversion-&subversion-version;</userinput></screen>

    <para>
      Si vous construisez les liaisons Java, tapez les commandes suivantes en tant
qu'utilisateur <systemitem class="username">root</systemitem> pour les
installer&nbsp;:
    </para>
    <para>
<screen><command>make install-javahl</command></screen>
    </para>

    <para>
      Si vous construisez les liaisons <application>Perl</application>,
<application>Python</application>, ou <application>Ruby</application>, tapez
une des commandes suivantes en tant qu'utilisateur <systemitem
class="username">root</systemitem> pour les installer&nbsp;:
    </para>
    <para>
<screen><command>make install-swig-pl</command>
<command>make install-swig-py \
      swig_pydir=/usr/lib/python&python3-majorver;/site-packages/libsvn \
      swig_pydir_extra=/usr/lib/python&python3-majorver;/site-packages/svn</command>
<command>make install-swig-rb</command></screen>
    </para>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/static-libraries.xml"/>

    <para>
      <parameter>--with-apache-libexecdir</parameter>&nbsp;: Si <xref
linkend="apache"/> est installé, les modules partagés de
<application>Apache</application> sont construits. Ce paramètre permet
d'avoir ces modules installé dans le répertoire configuré de
<application>Apache</application> au lieu de <filename
class="directory">/usr/libexec</filename>. Il n'a pas d'effet si
<application>Apache</application> n'est pas installé.
    </para>

    <para>
      <parameter>--with-lz4=internal, --with-utf8proc=internal</parameter>&nbsp;:
Supprimez-les si vous avez installé les dépendances facultatives.
    </para>

    <para>
      <option>--enable-javahl</option>&nbsp;: active la compilation des liaisons
Java haut-niveau. Il est nécessaire de lancer <command>make javahl</command>
pour effectuer la compilation.
    </para>

    <para>
      <option>--with-junit=&lt;location of the junit jar file&gt;</option>&nbsp;:
donne l'emplacement du jar de junit, sinon les tests de javahl ne peuvent
être lancés.
    </para>

    <para>
      <option>---disable-gmock</option>&nbsp;: Ne pas utiliser l'outil de tests
Googlemock.
    </para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de Subversion</title>

    <sect3 id="subversion-config">
      <title>Fichiers de configuration</title>

      <para>
        <filename>~/.subversion/config</filename> et
<filename>/etc/subversion/config</filename>
      </para>

      <indexterm zone="subversion subversion-config">
        <primary sortas="e-AA.subversion/config">~/.subversion/config</primary>
      </indexterm>

      <indexterm zone="subversion subversion-config">
        <primary sortas="e-etc-subversion-config">/etc/subversion/config</primary>
      </indexterm>
    </sect3>

    <sect3>
      <title>Informations sur la configuration</title>

      <para>
        <filename>/etc/subversion/config</filename> est le fichier de configuration
générale du système <application>Subversion</application>. Ce fichier est
utilisé pour spécifier des paramètres par défaut pour différentes commandes
<command>svn</command>.
      </para>

      <para>
        <filename>~/.subversion/config</filename> est le fichier de configuration
personnel de l'utilisateur. Il est utilisé pour remplacer les paramètres par
défaut globaux réglés dans <filename>/etc/subversion/config</filename>.
      </para>
    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>
          svn, svnadmin, svnbench, svndumpfilter, svnfsfs, svnlook, svnmucc, svnrdump,
svnserve, svnsync et svnversion
        </seg>
        <seg>
          libsvn_*-1.so et éventuellement une bibliothèque Java, les modules DSO de
<application>Apache HTTP</application> mod_dav_svn.so et mod_authz_svn.so et
différents modules <application>Perl</application>,
<application>Python</application> et <application>Ruby</application>.
        </seg>
        <seg>
          /usr/include/subversion-1,
/usr/lib/perl5/site_perl/&lfs-perl-version;/{,auto/}SVN,
/usr/lib/python&python3-majorver;/site-packages/{libsvn,svn},
/usr/lib/ruby/site_ruby/&lt;x.y.z&gt;/{,&lt;arch-linux&gt;-linux/}svn,
/usr/lib/svn-javahl et /usr/share/doc/subversion-&subversion-version;
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="svn">
        <term><command>svn</command></term>
        <listitem>
          <para>
            est le client en ligne de commandes utilisé pour accéder aux dépôts
<application>Subversion</application>
          </para>
          <indexterm zone="subversion svn">
            <primary sortas="b-svn">svn</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="svnadmin">
        <term><command>svnadmin</command></term>
        <listitem>
          <para>
            est un outil pour la création, la modification ou la réparation d'un dépôt
<application>Subversion</application>
          </para>
          <indexterm zone="subversion svnadmin">
            <primary sortas="b-svnadmin">svnadmin</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="svnbench">
        <term><command>svnbench</command></term>
        <listitem>
          <para>
            est un outil de test
          </para>
          <indexterm zone="subversion svnbench">
            <primary sortas="b-svnbench">svnbench</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="svndumpfilter">
        <term><command>svndumpfilter</command></term>
        <listitem>
          <para>
            est un programme pour le filtrage des streamings de format dumpfile d'un
dépôt <application>Subversion</application>
          </para>
          <indexterm zone="subversion svndumpfilter">
            <primary sortas="b-svndumpfilter">svndumpfilter</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="svnfsfs">
        <term><command>svnfsfs</command></term>
        <listitem>
          <para>
            est l'outil de manipulation de dépôt de FSFS (Système de fichiers au dessus
du système de fichier - implémentation du système de fichier de
<application>Subversion</application>)
          </para>
          <indexterm zone="subversion svnfsfs">
            <primary sortas="b-svnfsfs">svnfsfs</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="svnlook">
        <term><command>svnlook</command></term>
        <listitem>
          <para>
            est un outil pour examiner un dépôt <application>Subversion</application>
          </para>
          <indexterm zone="subversion svnlook">
            <primary sortas="b-svnlook">svnlook</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="svnmucc">
        <term><command>svnmucc</command></term>
        <listitem>
          <para>
            est un client de commande de plusieurs URL pour
<application>Subversion</application>
          </para>
          <indexterm zone="subversion svnmucc">
            <primary sortas="b-svnmucc">svnmucc</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="svnrdump">
        <term><command>svnrdump</command></term>
        <listitem>
          <para>
            est un outil pour écrire ou charger un dépôt
<application>Subversion</application>
          </para>
          <indexterm zone="subversion svnrdump">
            <primary sortas="b-svnrdump">svnrdump</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="svnserve">
        <term><command>svnserve</command></term>
        <listitem>
          <para>
            est un programme de serveur autonome personnalisable capable de se lancer en
tant que démon ou invoqué par SSH
          </para>
          <indexterm zone="subversion svnserve">
           <primary sortas="b-svnserve">svnserve</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="svnsync">
        <term><command>svnsync</command></term>
        <listitem>
          <para>
            est un outil de synchronisation de dépôts
<application>Subversion</application>
          </para>
          <indexterm zone="subversion svnsync">
           <primary sortas="b-svnsync">svnsync</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="svnversion">
        <term><command>svnversion</command></term>
        <listitem>
          <para>
            est utilisé pour signaler le numéro de version et l'état de la copie d'un
dépôt <application>Subversion</application>
          </para>
          <indexterm zone="subversion svnversion">
            <primary sortas="b-svnversion">svnversion</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libsvn_star-1">
        <term><filename class="libraryfile">libsvn_*-1.so</filename></term>
        <listitem>
          <para>
            sont les bibliothèques de support utilisées par les programmes
<application>Subversion</application>
          </para>
          <indexterm zone="subversion libsvn_star-1">
            <primary sortas="c-libsvn_star-1">libsvn_*-1.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mod_authz_svn">
        <term><filename class="libraryfile">mod_authz_svn.so</filename></term>
        <listitem>
          <para>
            est un module complémentaire pour le serveur HTTP
<application>Apache</application>, utilisé pour authentifier les
utilisateurs sur un dépôt <application>Subversion</application> à travers
Internet ou un réseau intranet
          </para>
          <indexterm zone="subversion mod_authz_svn">
            <primary sortas="c-mod_authz_svn">mod_authz_svn.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mod_dav_svn">
        <term><filename class="libraryfile">mod_dav_svn.so</filename></term>
        <listitem>
          <para>
            est un module complémentaire pour le serveur HTTP
<application>Apache</application>, utilisé pour rendre un dépôt
<application>Subversion</application> disponible pour autrui à travers
Internet or un réseau intranet
          </para>
          <indexterm zone="subversion mod_dav_svn">
            <primary sortas="c-mod_authz_svn">mod_dav_svn.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
