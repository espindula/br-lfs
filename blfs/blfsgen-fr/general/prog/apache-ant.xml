<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY apache-ant-download-http "https://archive.apache.org/dist/ant/source/apache-ant-&apache-ant-version;-src.tar.xz">
  <!ENTITY apache-ant-download-ftp  "">
  <!ENTITY apache-ant-md5sum        "4cf5c6728612f4787eda265b0a2d266b">
  <!ENTITY apache-ant-size          "3.7 Mo">
  <!ENTITY apache-ant-buildsize     "242&nbsp;Mo">
  <!ENTITY apache-ant-time          "0,3&nbsp;SBU (sans compter le temps de téléchargement)">
]>

<sect1 id="apache-ant" xreflabel="apache-ant-&apache-ant-version;">
  <?dbhtml filename="apache-ant.html"?>


  <title>apache-ant-&apache-ant-version;</title>

  <indexterm zone="apache-ant">
   <primary sortas="a-Apache-Ant">Apache Ant</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à Apache Ant</title>

    <para>
      Le paquet <application>Apache Ant</application> est un outil de compilation
basé sur <application>Java</application>. En théorie, il est similaire à la
commande <command>make</command>, mais sans les inconvénients de
<command>make</command>. <application>Ant</application> est différent. Au
lieu d'un modèle où il serait étendu avec des commandes basées sur le shell,
<application>Ant</application> s'étend en utilisant des classes
<application>Java</application>. Plutôt que d'écrire des commandes shell,
les fichiers de configuration sont basés sur XML, utilisant une arborescence
cible où diverses tâches s'exécutent. Chaque tâche est exécutée par un objet
qui implémente une interface de tâche spécifique.
    </para>

    &lfs112_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&apache-ant-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP)&nbsp;: <ulink url="&apache-ant-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5&nbsp;: &apache-ant-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &apache-ant-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &apache-ant-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &apache-ant-time;
        </para>
      </listitem>
    </itemizedlist>

    <!--
    <bridgehead renderas="sect3">
Additional Downloads</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Required file: <ulink
             url="https://repository.jboss.org/nexus/content/repositories/thirdparty-releases/javax/media/jai-core/1.1.3/jai-core-1.1.3.jar"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Required file: <ulink
             url="https://repository.jboss.org/nexus/content/repositories/thirdparty-releases/com/sun/media/jai-codec/1.1.3/jai-codec-1.1.3.jar"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Required file: <ulink
             url="http://central.maven.org/maven2/org/tukaani/xz/1.0/xz-1.0.jar"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Required file: <ulink
             url="http://www.netrexx.org/files/NetRexx-3.06-GA.zip"/>
        </para>
      </listitem>
    </itemizedlist>
-->
<bridgehead renderas="sect3">Dépendances de Apache Ant</bridgehead>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
      Un JDK (<xref linkend="java-bin"/> ou <xref linkend="openjdk"/>) et <xref
linkend="glib2"/>
    </para>


    <!--    <bridgehead renderas="sect4">
Recommended</bridgehead>
    <para role="recommended">
      <xref linkend="junit"/>
    </para>
-->
<para condition="html" role="usernotes">Notes utilisateur&nbsp;: <ulink url="&blfs-wiki;/apache-ant"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Apache Ant</title>



    <!-- Not needed with 1.10.10
    <para>

      First fix an incompatibility issue between the documentation standard
      used in the build tree, and the one expected by <xref
      linkend="openjdk"/>:
    </para>

<screen><userinput>sed -i 's/- -add-modules java.activation/-html4/' build.xml</userinput></screen>
-->
<para>
      Construisez une version bootstrap limitée d'<application>Apache
Ant</application> avec la commande suivante&nbsp;:
    </para>

<screen><userinput>./bootstrap.sh</userinput></screen>

    <para>
      Téléchargez le reste des dépendances à l'exécution avec le script de
construction ant <filename>fetch.xml</filename>&nbsp;:
    </para>

<screen><userinput>bootstrap/bin/ant -f fetch.xml -Ddest=optional</userinput></screen>

    <para>
      Construisez <application>Apache Ant</application> en exécutant les commandes
suivantes&nbsp;:
    </para>

<screen><userinput>./build.sh -Ddist.dir=$PWD/ant-&apache-ant-version; dist</userinput></screen>

    <para>
      Installez, en tant qu'utilisateur <systemitem
class="username">root</systemitem>.
    </para>

<screen role="root"><userinput>cp -rv ant-&apache-ant-version; /opt/            &amp;&amp;
chown -R root:root /opt/ant-&apache-ant-version; &amp;&amp;
ln -sfv ant-&apache-ant-version; /opt/ant</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para>
      <command>bootstrap/bin/ant -f fetch.xml -Ddest=optional</command>&nbsp;:
Télécharge les dépendances manquantes dans le répertoire utilisateur et les
copie dans l'arborescence des sources (dans le répertoire
<filename>lib/optional</filename>, où <command>ant</command> les récupère à
la compilation).
    </para>

    <para>
      <command>./build.sh -Ddist.dir=$PWD/ant-&apache-ant-version;
dist</command>&nbsp;: Cette commande construit, teste et installe le paquet
dans un répertoire temporaire.
    </para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de Apache Ant</title>

    <sect3 id="apache-ant-config">
      <title>Fichiers de configuration</title>

      <para>
        <filename>/etc/ant/ant.conf</filename>, <filename>~/.ant/ant.conf</filename>
et <filename>~/.antrc</filename>
      </para>

      <indexterm zone="apache-ant apache-ant-config">
        <primary sortas="e-AA.ant-ant.conf">~/.ant/ant.conf</primary>
      </indexterm>

      <indexterm zone="apache-ant apache-ant-config">
        <primary sortas="e-AA.antrc">~/.antrc</primary>
      </indexterm>

      <indexterm zone="apache-ant apache-ant-config">
        <primary sortas="e-etc-ant-ant.conf">/etc/ant/ant.conf</primary>
      </indexterm>

    </sect3>

    <sect3>
      <title>Informations sur la configuration</title>

      <para>
        Certains paquets exigeront que <command>ant</command> soit dans le chemin de
recherche et que la variable <envar>ANT_HOME</envar> soit
définie. Satisfaites ces exigences en tapant en tant qu'utilisateur
<systemitem class="username">root</systemitem>&nbsp;:
      </para>

<screen role="root"><userinput>cat &gt; /etc/profile.d/ant.sh &lt;&lt; EOF
<literal># Begin /etc/profile.d/ant.sh

pathappend /opt/ant/bin
export ANT_HOME=/opt/ant

# End /etc/profile.d/ant.sh</literal>
EOF</userinput></screen>

      <para>
        Les instructions précédentes considèrent que vous avez configuré votre
système comme décrit dans <xref linkend="postlfs-config-profile"/>.
      </para>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>
          ant, antRun, antRun.pl, complete-ant-cmd.pl, runant.pl et runant.py         </seg>
        <seg>
          De nombreux fichiers <filename>ant*.jar</filename> et bibliothèques de
dépendances dans <envar>$ANT_HOME</envar><filename>/lib</filename>
        </seg>
        <seg>/opt/ant-&apache-ant-version;</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?> <?dbhtml list-presentation="table"?>

      <varlistentry id="ant">
        <term><command>ant</command></term>
        <listitem>
          <para>
            est un outil de construction basé sur <application>Java</application>
utilisé par de nombreux paquets à la place du programme
<command>make</command> conventionnel
          </para>
          <indexterm zone="apache-ant ant">
            <primary sortas="b-ant">ant</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="antRun">
        <term><command>antRun</command></term>
        <listitem>
          <para>
            est un script de support utilisé pour démarrer les scripts de construction
de <command>ant</command> dans un répertoire donné
          </para>
          <indexterm zone="apache-ant antRun">
            <primary sortas="b-antRun">antRun</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="antRun.pl">
        <term><command>antRun.pl</command></term>
        <listitem>
          <para>
            est un script <application>Perl</application> qui fournit les mêmes
fonctionnalités qu'offre le script <command>antRun</command>
          </para>
          <indexterm zone="apache-ant antRun.pl">
            <primary sortas="b-antRun.pl">antRun.pl</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="complete-ant-cmd.pl">
        <term><command>complete-ant-cmd.pl</command></term>
        <listitem>
          <para>
            est un script <application>Perl</application> qui permet à
<application>Bash</application> de compléter une ligne de commande
<command>ant</command>
          </para>
          <indexterm zone="apache-ant complete-ant-cmd.pl">
            <primary sortas="b-complete-ant-cmd.pl">complete-ant-cmd.pl</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="runant.pl">
        <term><command>runant.pl</command></term>
        <listitem>
          <para>
            est un script enveloppe <application>Perl</application> utilisé pour appeler
<command>ant</command>
          </para>
          <indexterm zone="apache-ant runant.pl">
            <primary sortas="b-runant.pl">runant.pl</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="runant.py">
        <term><command>runant.py</command></term>
        <listitem>
          <para>
            est un script enveloppe <application>Python</application> utilisé pour
appeler <command>ant</command>
          </para>
          <indexterm zone="apache-ant runant.py">
            <primary sortas="b-runant.py">runant.py</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ant-star">
        <term><filename class="libraryfile">ant*.jar</filename></term>
        <listitem>
          <para>
            fichiers qui sont les bibliothèques <application>Apache Ant</application> de
la classe <application>Java</application>
          </para>
          <indexterm zone="apache-ant ant-star">
            <primary sortas="c-ant-star">ant-*.jar</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
