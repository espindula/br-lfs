<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY doxygen-download-http "https://doxygen.nl/files/doxygen-&doxygen-version;.src.tar.gz">
  <!ENTITY doxygen-download-ftp  "">
  <!ENTITY doxygen-md5sum        "95008edf2d84aeefb7c65a6a4857dc2c">
  <!ENTITY doxygen-size          "5,5&nbsp;Mo">
  <!ENTITY doxygen-buildsize     "240&nbsp;Mo (avec les tests)">
  <!ENTITY doxygen-time          "1,6&nbsp;SBU (avec parallélisme = 4&nbsp;; avec les tests)">
]>

<sect1 id="doxygen" xreflabel="Doxygen-&doxygen-version;">
  <?dbhtml filename="doxygen.html"?>


  <title>Doxygen-&doxygen-version;</title>

  <indexterm zone="doxygen">
    <primary sortas="a-Doxygen">Doxygen</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à Doxygen</title>

    <para>
      Le paquet <application>Doxyge</application>n contient un système de
documentation pour C++, C, Java, C objet, Corba IDL et certaines extensions
PHP, C# et D. C'est utile pour la génération de documentation HTML ou de
manuel de référence hors ligne à partir d'un ensemble de fichiers sources
documentés. Il y a aussi un support pour générer une sortie RTF, PostScript,
des PDF avec hyperliens, du HTML compressé, et des pages de manuel Unix. La
documentation est extraite directement des sources ce qui rend beaucoup plus
facile la conservation de la cohérence de la documentation avec le code
source.
    </para>

    <para>
      Vous pouvez aussi configurer <application>Doxygen</application> pour
extraire la structure du code des fichiers sources non documentés. C'est
très utile pour vous y retrouver rapidement dans les sources de grosses
distributions. Utilisé avec <application>Graphviz</application>, vous pouvez
aussi visualiser les relations entre les divers éléments à l'aide de graphes
de dépendance d'inclusion, diagrammes d'héritage, et des diagrammes de
collaborations tous générés automatiquement.
    </para>

    &lfs120_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&doxygen-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP)&nbsp;: <ulink url="&doxygen-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5&nbsp;: &doxygen-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &doxygen-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &doxygen-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &doxygen-time;
        </para>
      </listitem>
    </itemizedlist>


    <!--
    <bridgehead renderas="sect3">
Additional Downloads</bridgehead>
    <itemizedlist spacing='compact'>
      <listitem>
        <para>
          Required patch: <ulink
          url="&patch-root;/doxygen-&doxygen-version;-flex_2_6_0_fix-1.patch"/>
        </para>
      </listitem>
    </itemizedlist>-->
<bridgehead renderas="sect3">Dépendances de Doxygen</bridgehead>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
      <xref linkend="cmake"/> et <xref linkend="git"/>
    </para>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      <!-- Can someone check this? With LLVM7, it fails to build. -->
s<xref linkend="graphviz"/>, <xref linkend="gs"/>, <xref linkend="libxml2"/>
(requis pour les test), <xref linkend="llvm"/> (avec clang), &qt5-deps;
(pour doxywizard), <xref linkend="texlive"/> (ou <xref
linkend="tl-installer"/>), <xref linkend="xapian"/> (pour doxyindexer) et
<ulink url="https://javacc.github.io/javacc/">javacc</ulink>
    </para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Doxygen</title>

    <note>
      <para>
        Lorsque vous déballez ce paquet, vous verrez peut-être des messages comme
<quote>Ignoring unknown extended header keyword
'LIBARCHIVE.xattr.com.apple.TextEncoding'</quote>. Ces messages sont sans
danger et vous pouvez les ignorer.
      </para>
    </note>

    <para>
      Tout d'abord, corrigez certains scripts python&nbsp;:
    </para>

<screen><userinput>grep -rl '^#!.*python$' | xargs sed -i '1s/python/&amp;3/'</userinput></screen>

    <para>
      Installez <application>Doxygen</application> en exécutant les commandes
suivantes&nbsp;:
    </para>

<screen><userinput>mkdir -v build &amp;&amp;
cd       build &amp;&amp;

cmake -G "Unix Makefiles"         \
      -DCMAKE_BUILD_TYPE=Release  \
      -DCMAKE_INSTALL_PREFIX=/usr \
      -Wno-dev .. &amp;&amp;

make</userinput></screen>

    <para>
      Pour tester les résultats lancez&nbsp;: <command>make tests</command>. Un
test, 061_U��nicod���_file, est connu pour échouer.
    </para>

    <para>
      Si vous préférez générer la documentation du paquet, vous devez avoir
<application>Python</application>, <application>TeX Live</application> (pour
la doc HTML) et <application>Ghostscript</application> (pour la doc PDS)
installés, puis entrer les commandes suivantes:
    </para>

<screen remap="doc"><userinput>cmake -DDOC_INSTALL_DIR=share/doc/doxygen-&doxygen-version; -Dbuild_doc=ON .. &amp;&amp;

make docs</userinput></screen>

    <para>
      Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>make install &amp;&amp;
install -vm644 ../doc/*.1 /usr/share/man/man1</userinput></screen>

    <para>
      Si vous avez généré la documentation du paquet, alors les pages de manuel
sont installées automatiquement et vous n'avez pas à lancer la dernière
commande <command>install …</command>.
    </para>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para>
      <option>-Dbuild_wizard=ON</option>&nbsp;: Utilisez ce paramètre si
<application>Qt5</application> est installé et si vous souhaitez construire
l'interface graphique.
    </para>

    <para>
      <option>-Dbuild_search=ON</option>&nbsp;: Utilisez ce paramètre si
<application>xapian</application> est installé et que vous souhaitez
construire les outils de recherche externes
(<command>doxysearch.cgi</command> et <command>doxyindexer</command>).
    </para>


    <!--
    <para>

      <option>-Dforce_qt4=ON</option>: Use this switch to build
      <command>doxywizard</command> with Qt4 even if Qt5 is installed.
    </para>-->
<para>
      <option>-Duse_libclang=ON</option>&nbsp;: Utilisez ce paramètre si
<application>llvm</application> est installé avec
<application>clang</application>, pour ajouter le support pour l'analyse de
libclang
    </para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de Doxygen</title>

    <para>
      Il n'y a pas réellement de configuration nécessaire pour le paquet
<application>Doxygen</application> bien que trois paquets supplémentaires
sont requis si vous souhaitez utiliser les fonctionnalités étendues. Si vous
avez besoin d'utiliser les fonctions de traduction de langue, vous devez
avoir installé <xref linkend="python2"/>. Si vous exigez des formules pour
créer de la documentation PDF, vous devez avoir installé <xref
linkend="texlive"/>. Si vous demandez des formules pour convertir des
fichiers PostScript en bitmap, vous devez avoir installé <xref
linkend="gs"/>.
    </para>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoire installé</segtitle>

      <seglistitem>
        <seg>
          doxygen et potentiellement, doxywizard, doxyindexer et doxysearch.cgi
        </seg>
        <seg>
          Aucune
        </seg>
        <seg>
          /usr/share/doc/doxygen-&doxygen-version;
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?> <?dbhtml list-presentation="table"?>

      <varlistentry id="doxygen-prog">
        <term><command>doxygen</command></term>
        <listitem>
          <para>
            est un outil en ligne de commande utilisé pour générer des fichiers modèles
de configuration puis pour générer de la documentation à partir de ces
modèles. Utilisez <command>doxygen --help</command> pour une explication des
paramètres de la ligne de commande
          </para>
          <indexterm zone="doxygen doxygen-prog">
            <primary sortas="b-doxygen">doxygen</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="doxywizard">
        <term><command>doxywizard</command></term>
        <listitem>
          <para>
            est un front-end graphique pour configurer et lancer
<command>doxygen</command>
          </para>
          <indexterm zone="doxygen doxywizard">
            <primary sortas="b-doxywizard">doxywizard</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="doxyindexer">
        <term><command>doxyindexer</command></term>
        <listitem>
          <para>
            génère un index de recherche appelé <filename>doxysearch.db</filename> à
partir d'un ou plusieurs fichiers de données produits par
<command>doxygen</command>. Voir par exemple <ulink
url="https://javacc.github.io/javacc/"/>
          </para>
          <indexterm zone="doxygen doxyindexer">
            <primary sortas="b-doxyindexer">doxyindexer</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="doxysearch.cgi">
        <term><command>doxysearch.cgi</command></term>
        <listitem>
          <para>
            est un programme CGI pour chercher des données indexées par
<command>doxyindexer</command>
          </para>
          <indexterm zone="doxygen doxysearch.cgi">
            <primary sortas="b-doxysearch.cgi">doxysearch.cgi</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
