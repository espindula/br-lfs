<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

<!--  <!ENTITY which-download-http "http://www.xs4all.nl/~carlo17/which/which-&which-version;.tar.gz">-->

  <!ENTITY which-download-http "&gnu-http;/which/which-&which-version;.tar.gz">
  <!ENTITY which-download-ftp  "&gnu-ftp;/which/which-&which-version;.tar.gz">
  <!ENTITY which-md5sum        "097ff1a324ae02e0a3b0369f07a7544a">
  <!ENTITY which-size          "148 Ko">
  <!ENTITY which-buildsize     "1 Mo">
  <!ENTITY which-time          "moins de 0,1&nbsp;SBU">
]>

<sect1 id="which" xreflabel="Which-&which-version;">
  <?dbhtml filename="which.html"?>


  <title>Which-&which-version; et Alternatives</title>

  <para>
    La présence ou l'absence du programme <command>which</command> dans le livre
LFS principal est sans doute un des sujets les plus controversés sur les
listes de diffusion. Il s'en est suivi au moins une guerre enflammée par le
passé. En espérant y mettre fin une bonne fois pour toutes, deux options
sont ici présentées pour équiper votre système de
<command>which</command>. La décision sur la question de quel
<quote><command>which</command></quote> vous appartient.
  </para>

  <indexterm zone="which">
    <primary sortas="a-Which">Which</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à GNU Which</title>

    <para>
      La première option est d'installer le paquet GNU
<application>which</application> final.
    </para>

    &lfs120_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&which-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP)&nbsp;: <ulink url="&which-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5&nbsp;: &which-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &which-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &which-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &which-time;
        </para>
      </listitem>
    </itemizedlist>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Which</title>

    <para>
      Installez <application>which</application> en exécutant les commandes
suivantes&nbsp;:
    </para>

<screen><userinput>./configure --prefix=/usr &amp;&amp;
make</userinput></screen>

    <para>
      Ce paquet n'a pas de suite de tests.
    </para>

    <para>
      Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>make install</userinput></screen>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programme installé</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>which</seg>
        <seg>Aucune</seg>
        <seg>Aucune</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?> <?dbhtml list-presentation="table"?>

      <varlistentry id="which-prog">
        <term><command>which</command></term>
        <listitem>
          <para>
            affiche le chemin complet des commandes (shell) installées dans votre
<envar>PATH</envar>
          </para>
          <indexterm zone="which which-prog">
            <primary sortas="b-which">which</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

  <sect2 role="installation">
    <title>Le script 'which'</title>

    <para>
      La deuxième option (pour ceux qui ne veulent pas installer le paquet) est de
créer un simple script (exécutez en tant qu'utilisateur <systemitem
class="username">root</systemitem>)&nbsp;:
    </para>

<screen role="root"><userinput>cat &gt; /usr/bin/which &lt;&lt; "EOF"
<literal>#!/bin/bash
type -pa "$@" | head -n 1 ; exit ${PIPESTATUS[0]}</literal>
EOF
chmod -v 755 /usr/bin/which
chown -v root:root /usr/bin/which</userinput></screen>

    <para>
      Cela devrait bien fonctionner et c'est peut-être la solution la plus facile
pour la plupart des cas, mais ce n'est pas l'implémentation la plus
complète.
    </para>

  </sect2>

</sect1>
