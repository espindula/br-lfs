<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY pm-utils-download-http "https://pm-utils.freedesktop.org/releases/pm-utils-&pm-utils-version;.tar.gz">
  <!ENTITY pm-utils-download-ftp  "">
  <!ENTITY pm-utils-md5sum        "1742a556089c36c3a89eb1b957da5a60">
  <!ENTITY pm-utils-size          "204 Ko">
  <!ENTITY pm-utils-buildsize     "1.6 Mo">
  <!ENTITY pm-utils-time          "0,1&nbsp;SBU">
]>

<sect1 id="pm-utils" xreflabel="pm-utils-&pm-utils-version;">
  <?dbhtml filename="pm-utils.html"?>

  <sect1info>
<date>$Date$</date></sect1info>

  <title>pm-utils-&pm-utils-version;</title>

  <indexterm zone="pm-utils">
    <primary sortas="a-pm-utils">pm-utils</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à Power Management Utilities</title>

    <para>
      Le paquet <application>Power Management Utilities</application> fournit de
petits outils en ligne de commande pour suspendre et mettre en hibernation
l'ordinateur. Ils qui peuvent être utilisés pour lancer des scripts fournis
par l'utilisateur à la mise en sommeil et au réveil.
    </para>

    &lfs112_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&pm-utils-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP)&nbsp;: <ulink url="&pm-utils-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5&nbsp;: &pm-utils-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &pm-utils-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &pm-utils-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &pm-utils-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de Power Management Utilities</bridgehead>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      <xref linkend="xmlto"/> (pour générer les pages de manuel)
    </para>

    <bridgehead renderas="sect4">Facultatives (à l'exécution)</bridgehead>
    <para role="optional">
      <xref role="runtime" linkend="hdparm"/>, <xref role="runtime"
linkend="wireless_tools"/>, <ulink role="runtime"
url="https://www.kernel.org/pub/software/network/ethtool/"> ethtool</ulink>
et <ulink role="runtime"
url="https://ftp.debian.org/debian/pool/main/v/vbetool/"> vbetool</ulink>
    </para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;: <ulink url="&blfs-wiki;/pm-utils"/>
    </para>
  </sect2>

  <sect2 role="kernel"  id="pm-utils-kernel">
    <title>Configuration du noyau</title>

    <para>
       Si besoin, activez les options suivantes dans la configuration du noyau et
recompilez le noyau&nbsp;:
    </para>

    <screen><literal>Power management and ACPI options ---&gt;
    &lt;*&gt; Suspend to RAM and standby            [CONFIG_SUSPEND]
    &lt;*&gt; Hibernation (aka 'suspend to disk')   [CONFIG_HIBERNATION]</literal></screen>

    <para>
      Suspendre en RAM permet au système d'entrer en mode sommeil où la mémoire
principale est alimentée et son contenu est préservé. La méthode coupe la
puissance de la plupart des éléments de la machine en dehors de la
mémoire. À cause de cette importante économie d'énergie, il est envisageable
pour les portables d'entrer automatiquement dans ce mode quand l'ordinateur
fonctionne sur batterie et que l'écran est fermé (ou que l'utilisateur est
inactif depuis un certain temps).
    </para>

    <para>
      Suspendre sur disque (Hibernation) sauvegarde l'état de la machine dans un
espace de swap et coupe complètement la puissance de la machine. Quand la
machine est remise en route, l'état est restauré. Pendant ce temps, il n'y a
pas de consommation électrique. Suspendre en RAM et en hibernation sont
normalement appropriés pour les périphériques portables plus que pour les
stations de bureau, mais peut être également utilisé. Cette fonction n'est
pas vraiment appropriée pour les serveurs.
    </para>

    <para>
      Pour utiliser l'hibernation, le paramètre du noyau
resume=/dev/&lt;swap_partition&gt; doit être utilisé dans la ligne de
commande du noyau (dans grub.cfg). La partition swap doit avoir au moins la
taille de la mémoire physique du système.
    </para>

    <indexterm zone="pm-utils pm-utils-kernel">
      <primary sortas="d-pm-utils">pm-utils</primary>
    </indexterm>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Power Management Utilities</title>

    <para>
      Installez <application>Power Management Utilities</application> en exécutant
les commandes suivantes&nbsp;:
    </para>

<screen><userinput>./configure --prefix=/usr     \
            --sysconfdir=/etc \
            --docdir=/usr/share/doc/pm-utils-&pm-utils-version; &amp;&amp;
make</userinput></screen>

    <para>
      Ce paquet n'a pas de suite de tests.
    </para>

    <para>
      Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>make install</userinput></screen>

    <para>
      Si vous n'avez pas installé <xref linkend="xmlto"/>, copiez les pages de
manuel pré-générées en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>install -v -m644 man/*.1 /usr/share/man/man1 &amp;&amp;
install -v -m644 man/*.8 /usr/share/man/man8 &amp;&amp;
ln -sv pm-action.8 /usr/share/man/man8/pm-suspend.8 &amp;&amp;
ln -sv pm-action.8 /usr/share/man/man8/pm-hibernate.8 &amp;&amp;
ln -sv pm-action.8 /usr/share/man/man8/pm-suspend-hybrid.8</userinput></screen>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de Power Management Utilities</title>

    <para>
      La fonctionnalité de mise en sommeil et de réveil peut être facilement
modifiée en installant les fichiers dans le répertoire <filename
class="directory">/etc/pm/sleep.d</filename>. Les fichiers, appelés
recettes, sont lancés quand le système est mis en état de sommeil ou est
réveillé. Les recettes par défaut sont dans <filename
class="directory">/usr/lib/pm-utils/sleep.d</filename>, et les recettes de
l'utilisateur peuvent être mises dans <filename
class="directory">/etc/pm/sleep.d</filename>. Voir la page de manuel
pm-action(8) pour plus d'informations.
    </para>

    <para>
      Pour utiliser l'hibernation avec <application>GRUB</application> et une
partition d'échange, vous devez ajouter le paramètre noyau
<literal>resume=<replaceable>swap_partition</replaceable></literal> (par
exemple <literal>resume=/dev/sda1</literal>) à la ligne du noyau dans le
fichier de configuration <filename>/boot/grub/grub.cfg</filename>.
    </para>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>
          on_ac_power, pm-hibernate, pm-is-supported, pm-powersave, pm-suspend et
pm-suspend-hybrid
        </seg>
        <seg>
          Aucune
        </seg>
        <seg>
          /etc/pm, /usr/lib/pm-utils et /usr/share/doc/pm-utils-&pm-utils-version;
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?> <?dbhtml list-presentation="table"?>

      <varlistentry id="on_ac_power">
        <term><command>on_ac_power</command></term>
        <listitem>
          <para>
            est un script qui détermine quand le système est branché sur le secteur
(plutôt que sur batterie)
          </para>
          <indexterm zone="pm-utils on_ac_power">
            <primary sortas="b-on_ac_power">on_ac_power</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="pm-hibernate">
        <term><command>pm-hibernate</command></term>
        <listitem>
          <para>
            est un lien symbolique vers le script pm-action qui met l'ordinateur en mode
hibernation (l'ordinateur est complètement éteint et l'état du système est
sauvegardé sur le disque)
          </para>
          <indexterm zone="pm-utils pm-hibernate">
            <primary sortas="b-pm-hibernate">pm-hibernate</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="pm-is-supported">
        <term><command>pm-is-supported</command></term>
        <listitem>
          <para>
            est un script qui vérifie quand les possibilités de gestion de l'énergie
telles que la mise en sommeil ou le réveil sont supportés
          </para>
          <indexterm zone="pm-utils pm-is-supported">
            <primary sortas="b-pm-is-supported">pm-is-supported</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="pm-powersave">
        <term><command>pm-powersave</command></term>
        <listitem>
          <para>
            est un script qui met l'ordinateur dans un mode de sauvegarde d'énergie
(basse puissance)
          </para>
          <indexterm zone="pm-utils pm-powersave">
            <primary sortas="b-pm-powersave">pm-powersave</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="pm-suspend">
        <term><command>pm-suspend</command></term>
        <listitem>
          <para>
            est un lien symbolique vers le script pm-action qui met l'ordinateur en mode
suspendu (la plupart des périphériques sont éteints et l'état du système est
sauvegardé en RAM)
          </para>
          <indexterm zone="pm-utils pm-suspend">
            <primary sortas="b-pm-suspend">pm-suspend</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="pm-suspend-hybrid">
        <term><command>pm-suspend-hybrid</command></term>
        <listitem>
          <para>
            est un lien symbolique vers le script pm-action qui met l'ordinateur en mode
hybride suspendu (le système fait tout ce qu'il faut pour hiberner, mais est
suspendu à la place d'être éteint)
          </para>
          <indexterm zone="pm-utils pm-suspend-hybrid">
            <primary sortas="b-pm-suspend-hybrid">pm-suspend-hybrid</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
