<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY sysstat-download-http "http://sebastien.godard.pagesperso-orange.fr/sysstat-&sysstat-version;.tar.xz">
  <!ENTITY sysstat-download-ftp  "">
  <!ENTITY sysstat-md5sum        "cb625681a70b58e306d2564d4296a5ae">
  <!ENTITY sysstat-size          "876&nbsp;Ko">
  <!ENTITY sysstat-buildsize     "28&nbsp;Mo">
  <!ENTITY sysstat-time          "0,1&nbsp;SBU">
]>

<sect1 id="sysstat" xreflabel="Sysstat-&sysstat-version;">
  <?dbhtml filename="sysstat.html"?>


  <title>Sysstat-&sysstat-version;</title>

  <indexterm zone="sysstat">
    <primary sortas="a-Sysstat">Sysstat</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à Sysstat</title>

    <para>
      Le paquet <application>Sysstat</application> contient des outils pour
surveiller les performances du système et son
activité. <application>Sysstat</application> contient l'outil
<command>sar</command>, commun à beaucoup d'Unix commerciaux, et des outils
que vous pouvez activer périodiquement pour récupérer et archiver des
données d'activité et de performances.
    </para>

    &lfs120_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&sysstat-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP)&nbsp;: <ulink url="&sysstat-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5&nbsp;: &sysstat-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &sysstat-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &sysstat-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &sysstat-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de Sysstat</bridgehead>

    <para role="recommended">
      Il n'y a pas d'exigence au moment de la construction pour ce paquet&nbsp;;
cependant, il est conçu pour être contrôlé par un démon cron comme <xref
linkend="fcron" role="runtime"/>.
    </para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Sysstat</title>

    <para>
      Installez <application>Sysstat</application> en exécutant les commandes
suivantes&nbsp;:
    </para>

<screen><userinput>sa_lib_dir=/usr/lib/sa    \
sa_dir=/var/log/sa        \
conf_dir=/etc/sysconfig   \
./configure --prefix=/usr \
            --disable-file-attr &amp;&amp;
make</userinput></screen>

    <para>
      Ce paquet ne contient pas de suite de tests utilisable.
    </para>

    <para>
      Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>make install</userinput></screen>

    <para revision="systemd">
      Installez l'unité systemd en exécutant les commandes suivantes en tant
qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root" revision="systemd"><userinput>install -v -m644 sysstat.service /usr/lib/systemd/system/sysstat.service &amp;&amp;
install -v -m644 cron/sysstat-collect.service /usr/lib/systemd/system/sysstat-collect.service &amp;&amp;
install -v -m644 cron/sysstat-collect.timer /usr/lib/systemd/system/sysstat-collect.timer &amp;&amp;
install -v -m644 cron/sysstat-summary.service /usr/lib/systemd/system/sysstat-summary.service &amp;&amp;
install -v -m644 cron/sysstat-summary.timer /usr/lib/systemd/system/sysstat-summary.timer</userinput></screen>

    <para revision="systemd">
      Corrigez l'unité systemd en exécutant la commande suivante en tant
qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root" revision="systemd"><userinput>sed -i "/^Also=/d" /usr/lib/systemd/system/sysstat.service</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para>
      <envar>sa_lib_dir</envar>&nbsp;: cette variable d'environnement spécifie
l'endroit où se trouve le répertoire des bibliothèques spécifique à
l'application.
    </para>

    <para>
      <envar>sa_dir</envar>&nbsp;: cette variable d'environnement spécifie
l'endroit où se trouve le répertoire contenant les fichiers de données.
    </para>

    <para>
      <envar>conf_dir</envar>&nbsp;: Cette variable d'environnement spécifie le
répertoire dans lequel se trouve la configuration du système.
    </para>

    <para>
      <parameter>--disable-file-attr</parameter>&nbsp;: N'initialise pas les
attributs des fichiers installés. Ce paramètre fait que l'installation
ignore la variable de groupe man dans les fichiers ayant <systemitem
class="username">root</systemitem>:<systemitem
class="groupname">root</systemitem> en propriétaire.
    </para>

    <note>
      <para>
        Lancez <command>./configure --help</command> pour voir les autres variables
d'environnement influentes que vous pouvez passer à
<command>configure</command>. Il se peut que vous vouliez utiliser les
variables <envar>history</envar> et <envar>compressafter</envar> pour
personnaliser la quantité de fichiers de données récupérés sur le système.
      </para>
    </note>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de Sysstat</title>

    <sect3 id="sysstat-config">
      <title>Fichiers de configuration</title>

      <para>
        <filename>/etc/sysconfig/sysstat</filename> et
<filename>/etc/sysconfig/sysstat.ioconf</filename>
      </para>

      <indexterm zone="sysstat sysstat-config">
        <primary sortas="e-etc-sysconfig-sysstat">/etc/sysconfig/sysstat</primary>
      </indexterm>
      <indexterm zone="sysstat sysstat-config">
        <primary sortas="e-etc-sysconfig-sysstat.ioconf">/etc/sysconfig/sysstat.ioconf</primary>
      </indexterm>

    </sect3>

    <sect3>
     <title>Information sur le Cron</title>

      <para>
        Pour commencer à réunir des informations d'historiques de
<application>Sysstat</application>, vous devez ajouter ou créer le crontab
d'un utilisateur privilégié. L'emplacement des données d'historique est
<filename class="directory">/var/log/sa</filename>. L'utilisateur qui
exécute les outils <application>Sysstat</application> via cron doit avoir un
accès en écriture à cet emplacement.
      </para>

      <para>
        Voici ci-dessous un exemple de ce qu'il faut installer dans la
crontab. Ajustez les paramètres pour qu'ils conviennent à vos
besoins. Utilisez <command>man sa1</command> et <command>man sa2</command>
pour des information sur les commandes.
      </para>

<screen><literal># 8am-7pm activity reports every 10 minutes during weekdays
0 8-18 * * 1-5 /usr/lib/sa/sa1 600 6 &amp;

# 7pm-8am activity reports every hour during weekdays
0 19-7 * * 1-5 /usr/lib/sa/sa1 &amp;

# Activity reports every hour on Saturday and Sunday
0 * * * 0,6 /usr/lib/sa/sa1 &amp;

# Daily summary prepared at 19:05
5 19 * * * /usr/lib/sa/sa2 -A &amp;</literal></screen>

      <para>
        Assurez-vous d'envoyer la crontab modifiée au démon cron.
      </para>

    </sect3>

    <sect3 id="sysstat-init">
      <title>Informations sur le démarrage du système</title>

      <indexterm zone="sysstat sysstat-init">
        <primary sortas="f-sysstat">sysstat</primary>
      </indexterm>

      <para revision="sysv">
        Au démarrage du système, il faut insérer un message LINUX RESTART dans le
fichier de données quotidiennes pour réinitialiser les compteurs du
noyau. On peut automatiser cela en installant le script de démarrage
<filename>/etc/rc.d/init.d/sysstat</filename> inclus avec le paquet <xref
linkend="bootscripts"/>, en utilisant la commande suivante en tant
qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:
      </para>

<screen role="root" revision="sysv"><userinput>make install-sysstat</userinput></screen>

      <para revision="systemd">
        Au démarrage du système, il faut insérer un message LINUX RESTART dans le
fichier de données quotidiennes pour réinitialiser les compteurs du
noyau. On peut automatiser cela en activant l'unité systemd précédemment
installée en utilisant la commande suivante en tant qu'utilisateur
<systemitem class="username">root</systemitem>&nbsp;:
      </para>

<screen role="root" revision="systemd"><userinput>systemctl enable sysstat</userinput></screen>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>cifsiostat, iostat, mpstat, pidstat, sadf, sar et tapestat</seg>
        <seg>Aucune</seg>
        <seg>/usr/lib/sa, /usr/share/doc/sysstat-&sysstat-version; et /var/log/sa
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?> <?dbhtml list-presentation="table"?>

      <varlistentry id="cifsiostat">
        <term><command>cifsiostat</command></term>
        <listitem>
          <para>
            affiche des statiques des opérations de lecture et d'écriture sur des
systèmes de fichiers CIFS
          </para>
          <indexterm zone="sysstat cifsiostat">
            <primary sortas="b-cifsiostat">cifsiostat</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="iostat">
        <term><command>iostat</command></term>
        <listitem>
          <para>
            rapporte les statistiques du processeur et les statistiques d'entrée/sortie
des périphériques et des partitions
          </para>
          <indexterm zone="sysstat iostat">
            <primary sortas="b-iostat">iostat</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mpstat">
        <term><command>mpstat</command></term>
        <listitem>
          <para>
            écrit les activités de chaque processeur disponible
          </para>
          <indexterm zone="sysstat mpstat">
            <primary sortas="b-mpstat">mpstat</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="pidstat">
        <term><command>pidstat</command></term>
        <listitem>
          <para>
            est utilisé pour surveiller des tâches individuelles gérées actuellement par
le noyau Linux
          </para>
          <indexterm zone="sysstat pidstat">
            <primary sortas="b-pidstat">pidstat</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="sadf">
        <term><command>sadf</command></term>
        <listitem>
          <para>
            est utilisé pour afficher le contenu de fichiers de données créés par la
commande <command>sar</command>. Mais contrairement à
<command>sar</command>, <command>sadf</command> puisse écrire ses données
dans beaucoup de formats différents
          </para>
          <indexterm zone="sysstat sadf">
            <primary sortas="b-sadf">sadf</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="sar">
        <term><command>sar</command></term>
        <listitem>
          <para>
            est utilisé pour afficher le contenu des compteurs d'activité cumulée
choisis du système d'exploitation
          </para>
          <indexterm zone="sysstat sar">
            <primary sortas="b-sar">sar</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="tapestat">
        <term><command>tapestat</command></term>
        <listitem>
          <para>
            est utilisé pour surveiller l'activité des lecteurs de cassettes connectés
au système
          </para>
          <indexterm zone="sysstat tapestat">
            <primary sortas="b-tapestat">tapestat</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
