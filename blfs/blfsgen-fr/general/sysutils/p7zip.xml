<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY p7zip-download-http "https://github.com/jinfeihan57/p7zip/archive/v&p7zip-version;/p7zip-&p7zip-version;.tar.gz">
  <!ENTITY p7zip-download-ftp  "">
  <!ENTITY p7zip-md5sum        "00acfd6be87848231722d2d53f89e4a5">
  <!ENTITY p7zip-size          "6.5&nbsp;Mo">
  <!ENTITY p7zip-buildsize     "55&nbsp;Mo">
  <!ENTITY p7zip-time          "2.3&nbsp;SBU (avec les tests)">
]>

<sect1 id="p7zip" xreflabel="p7zip-&p7zip-version;">
  <?dbhtml filename="p7zip.html"?>

  <sect1info>
<date>$Date$</date></sect1info>

  <title>p7zip-&p7zip-version;</title>

  <indexterm zone="p7zip">
    <primary sortas="a-p7zip">p7zip</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à p7zip</title>

    <para>
      <application>p7zip</application> est le portage en ligne de commande Unix de
7-Zip, un archiveur de fichier qui compresse avec des gros ratios de
compression. Il gère les formats 7z, ZIP, GZIP, Brotli, BZIP2, XZ, TAR, APM,
ARJ, CAB, CHM, CPIO, CramFS, DEB, DMG, FAT, HFS, ISO, Lizard, LZ5, LZFSE,
LZH, LZMA, LZMA2, MBR, MSI, MSLZ, NSIS, NTFS, RAR, RPM, SquashFS, UDF, VHD,
WIM, XAR, Z et Zstd.
    </para>

    &lfs112_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&p7zip-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP)&nbsp;: <ulink url="&p7zip-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5&nbsp;: &p7zip-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &p7zip-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &p7zip-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &p7zip-time;
        </para>
      </listitem>
    </itemizedlist>



    <!-- Applied in 17.03
    <bridgehead renderas="sect3">
Additional Downloads</bridgehead>
    <itemizedlist spacing='compact'>
      <listitem>
        <para>Required patch: <ulink
        url="&patch-root;/p7zip-&p7zip-version;-consolidated_fixes-1.patch"/></para>
      </listitem>
    </itemizedlist>
-->
<bridgehead renderas="sect3">Dépendances de p7zip</bridgehead>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      <ulink url="http://www.wxwidgets.org/">wxWidgets</ulink>
    </para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;: <ulink url="&blfs-wiki;/p7zip"/>
    </para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de p7zip</title>



    <!-- Applied in 17.03
    <para>

      First, update the package for gcc10 and some security issues:
    </para>

<screen><userinput>patch -Np1 -i ../p7zip-&p7zip-version;-consolidated_fixes-1.patch</userinput></screen>
-->
<para>
      Tout d'abord, éviter que <application>p7zip</application> n'installe les
pages de manuels compressées&nbsp;:
    </para>

<screen><userinput remap="pre">sed '/^gzip/d' -i install.sh</userinput></screen>

    <para>
      Ensuite, corrigez une vulnérabilité de sécurité&nbsp;:
    </para>

<screen><userinput remap="pre">sed -i '160a if(_buffer == nullptr || _size == _pos) return E_FAIL;' CPP/7zip/Common/StreamObjects.cpp</userinput></screen>

    <para>
      Installez <application>p7zip</application> en exécutant les commandes
suivantes&nbsp;:
    </para>

<screen><userinput>make all3</userinput></screen>

    <para>
      Pour tester les résultats lancez&nbsp;: <command>make test</command>.
    </para>

    <para>
      Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>



<screen role="root"><!-- dev note: make DEST_DIR=<DESTDIR>
 install -->
<userinput>make DEST_HOME=/usr \
     DEST_MAN=/usr/share/man \
     DEST_SHARE_DOC=/usr/share/doc/p7zip-&p7zip-version; install</userinput></screen>

    <note>
      <para>
        Si vous utilisez les techniques DESTDIR, utilisez DEST_DIR à la place.
      </para>
    </note>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoire installé</segtitle>

      <seglistitem>
        <seg>
          7z, 7za et 7zr
        </seg>
        <seg>
          Aucune
        </seg>
        <seg>
          /usr/lib/p7zip et /usr/share/doc/p7zip-&p7zip-version;
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?> <?dbhtml list-presentation="table"?>

      <varlistentry id="Sevenz">
        <term><command>7z</command></term>
        <listitem>
          <para>
            est un utilitaire d'archivage de fichiers
          </para>
          <indexterm zone="p7zip Sevenz">
            <primary sortas="b-7z">7z</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="Sevenza">
        <term><command>7za</command></term>
        <listitem>
          <para>
            est un exécutable indépendant gérant moins de formats d'archive que
<command>7z</command>
          </para>
          <indexterm zone="p7zip Sevenza">
            <primary sortas="b-7za">7za</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="Sevenzr">
        <term><command>7zr</command></term>
        <listitem>
          <para>
            est une version minimale de <command>7za</command> qui gère seulement les
archives 7z
          </para>
          <indexterm zone="p7zip Sevenzr">
            <primary sortas="b-7zr">7zr</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
