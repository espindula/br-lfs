<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY lm_sensors-download-http "https://github.com/lm-sensors/lm-sensors/archive/V&lm-sensors-version;/lm-sensors-&lm-sensors-version;.tar.gz">
  <!ENTITY lm_sensors-download-ftp  "">
  <!ENTITY lm_sensors-md5sum        "f60e47b5eb50bbeed48a9f43bb08dd5e">
  <!ENTITY lm_sensors-size          "268&nbsp;Ko">
  <!ENTITY lm_sensors-buildsize     "2.6&nbsp;Mo">
  <!ENTITY lm_sensors-time          "moins de 0.1 SBU">
]>

<sect1 id="lm_sensors" xreflabel="lm-sensors-&lm-sensors-version;">
  <?dbhtml filename="lm_sensors.html"?>

  <sect1info>
<date>$Date$</date></sect1info>

  <title>lm-sensors-&lm-sensors-version;</title>

  <indexterm zone="lm_sensors">
    <primary sortas="a-lm_sensors">lm_sensors</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à lm_sensors</title>

    <para>
      Le paquet <application>Lm Sensors</application> fournit un support en espace
utilisateur pour les pilotes de surveillance du matériel dans le noyau
linux. C'est pratique pour surveiller la température du processeur et régler
les performances de quelques matériels (comme les ventilations).
    </para>

    &lfs112_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&lm_sensors-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP)&nbsp;: <ulink url="&lm_sensors-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5&nbsp;: &lm_sensors-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &lm_sensors-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &lm_sensors-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &lm_sensors-time;
        </para>
      </listitem>
    </itemizedlist>



    <!--    <bridgehead renderas="sect3">
Additional Downloads</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Required patch:
          <ulink url="&patch-root;/lm_sensors-&lm_sensors-version;-upstream_fixes-1.patch"/>
        </para>
      </listitem>
    </itemizedlist> -->
<bridgehead renderas="sect3">Dépendances de lm_sensors</bridgehead>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
      <xref linkend="which"/>
    </para>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      <ulink url="https://oss.oetiker.ch/rrdtool/">RRDtool</ulink> (requis pour
construire le programme <command>sensord</command>) et <ulink role="runtime"
url="https://www.nongnu.org/dmidecode/">dmidecode</ulink> (à l'exécution)
    </para>

    <para condition="html" role="usernotes">
      Notes utilisateur&nbsp;: <ulink url="&blfs-wiki;/lm_sensors"/>
    </para>
  </sect2>

  <sect2 role="kernel" id="lm_sensors-kernel">
    <title>Configuration du noyau</title>

    <para>
      Configurer votre noyau correctement est un processus itératif qui peut
conduire à la compilation du noyau un certain nombre de fois. La façon la
plus simple de le faire est de commencer par activer les modules et ensuite
compiler tout ce qui peut être nécessaire à Lm Sensors en modules&nbsp;:
    </para>

<screen><!--
Seems to be automatically selected and invisible on linux 3.17:
    I2C Algorithms  -&45;-&gt;
      &lt;M&gt; (configure all of them as modules)-->
<literal>[*] Enable loadable module support  ---&gt;  [CONFIG_MODULES]

Device Drivers  ---&gt;
  [*] PCI support ---&gt;                    [CONFIG_PCI]
  I2C support ---&gt;
    &lt;*/M&gt; I2C device interface            [CONFIG_I2C_CHARDEV]
    I2C Hardware Bus support  ---&gt;
      &lt;M&gt; (configure all of them as modules)
  &lt;*/M&gt; Hardware Monitoring support  ---&gt; [CONFIG_HWMON]
    &lt;M&gt; (configure all of them as modules)</literal></screen>

    <para>
      Recompilez votre noyau et redémarrer avec le nouveau noyau. Ne pas oublier
<command>make modules_install</command>. Nous reviendrons sur le noyau dans
la section de configuration.
    </para>

    <indexterm zone="lm_sensors lm_sensors-kernel">
      <primary sortas="d-lm_sensors">lm_sensors</primary>
    </indexterm>
  </sect2>

  <sect2 role="installation">
    <title>Installation de lm_sensors</title>

    <para>
      Installez <application>lm_sensors</application> en exécutant les commandes
suivantes&nbsp;:
    </para>


<screen><!-- <screen>
<userinput>patch -Np1 -i ../lm_sensors-&lm_sensors-version;-upstream_fixes-1.patch &amp;&amp; -->
<userinput>make PREFIX=/usr        \
     BUILD_STATIC_LIB=0 \
     MANDIR=/usr/share/man</userinput></screen>

    <para>
      Ce paquet n'a pas de suite de tests.
    </para>

    <para>
      Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>make PREFIX=/usr        \
     BUILD_STATIC_LIB=0 \
     MANDIR=/usr/share/man install &amp;&amp;

install -v -m755 -d /usr/share/doc/lm_sensors-&lm-sensors-version; &amp;&amp;
cp -rv              README INSTALL doc/* \
                    /usr/share/doc/lm_sensors-&lm-sensors-version;</userinput></screen>
  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para>
      <parameter>BUILD_STATIC_LIB=0</parameter>&nbsp;: Ce paramètre désactive la
compilation et l'installation des versions statiques de <filename
class="libraryfile">libsensors</filename>.
    </para>

    <para>
      <option>PROG_EXTRA=sensord</option>&nbsp;: ce paramètre permet la
compilation de <command>sensord</command>, un démon qui peut surveiller
votre système à moment régulier. La compilation de
<command>sensord</command> demande <ulink
url="https://oss.oetiker.ch/rrdtool/">RRDtool</ulink>. Assurez-vous
d'installer RRDtool dans <filename class="directory">/usr</filename> et
lançant <command>make prefix=/usr</command> lors de sa construction. Sinon,
lm_sensors ne le trouvera pas facilement.
    </para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de lm_sensors</title>

    <sect3 id="lm_sensors-config">
      <title>Fichier de configuration</title>

      <para>
        <filename>/etc/sensors3.conf</filename>
      </para>

      <indexterm zone="lm_sensors lm_sensors-config">
        <primary
        sortas="e-etc-path-Configfilename2">/etc/sensors3.conf</primary>
      </indexterm>

    </sect3>

    <sect3><title>Informations sur la configuration</title>

      <para>
        Pour trouver quel capteur matériel votre système possède, tapez la commande
suivante en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
      </para>

<screen role="root"><userinput>sensors-detect</userinput></screen>

      <para>
        Les modules appropriés sont chargés et un résumé est affiché à la
fin. Maintenant que vous savez ce qui est nécessaire, vous pouvez recompiler
votre noyau et activer juste les options dont vous avez besoin
(c'est-à-dire, n'activez pas les modules que vous n'utilisez pas).
      </para>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèque installée</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>
          fancontrol, isadump, isaset, pwmconfig, sensors, sensors-conf-convert,
sensors-detect et éventuellement, sensord
        </seg>
        <seg>
          libsensors.so
        </seg>
        <seg>
          /etc/sensors.d, /usr/include/sensors et
/usr/share/doc/lm_sensors-&lm-sensors-version;
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?> <?dbhtml list-presentation="table"?>

      <varlistentry id="fancontrol">
        <term><command>fancontrol</command></term>
        <listitem>
          <para>
            <!--what file?-->
est un script shell à utiliser avec
<application>lm_sensors</application>. Il lit ses valeurs de configuration
depuis un fichier, puis calcule la vitesse des ventilateurs en fonction des
températures et initialise la sortie PWM correspondante avec la valeur
calculée
          </para>
          <indexterm zone="lm_sensors fancontrol">
            <primary sortas="b-fancontrol">fancontrol</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="isadump">
        <term><command>isadump</command></term>
        <listitem>
          <para>
            est un petit programme d'aide pour examiner les registres visibles à travers
le bus ISA. Il est destiné à sonder une puce qui est sur le bus ISA en
fonctionnant avec un registre d'adresse et un registre de données (accès
semblable à I2C) ou une plage (de plus de 256 octets)
          </para>
          <indexterm zone="lm_sensors isadump">
            <primary sortas="b-isadump">isadump</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="isaset">
        <term><command>isaset</command></term>
        <listitem>
          <para>
            est un petit programme d'aide pour initialiser les registres visibles à
travers le bus ISA
          </para>
          <indexterm zone="lm_sensors isaset">
            <primary sortas="b-isaset">isaset</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="pwmconfig">
        <term><command>pwmconfig</command></term>
        <listitem>
          <para>
            teste la modulation de largeur d'impulsions (<foreignphrase>pulse width
modulation</foreignphrase>) (PWM) de la sortie des capteurs et configure
fancontrol
          </para>
          <indexterm zone="lm_sensors pwmconfig">
            <primary sortas="b-pwmconfig">pwmconfig</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="sensors">
        <term><command>sensors</command></term>
        <listitem>
          <para>
            affiche la valeur actuelle de tous les capteurs
          </para>
          <indexterm zone="lm_sensors sensors">
            <primary sortas="b-sensors">sensors</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="sensors-conf-convert">
        <term><command>sensors-conf-convert</command></term>
        <listitem>
          <para>
            est un script <application>Perl</application> pour convertir les fichiers de
configuration de <application>lm-sensors</application> version 2 pour qu'ils
fonctionnent avec la version 3
          </para>
          <indexterm zone="lm_sensors sensors-conf-convert">
            <primary sortas="b-sensors-conf-convert">sensors-conf-convert</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="sensors-detect">
        <term><command>sensors-detect</command></term>
        <listitem>
          <para>
            est un script <application>Perl</application> qui vous guidera à travers le
processus d'analyse de votre système pour de nombreuses puces de
surveillance du matériel (capteurs), supportés par <filename
class="libraryfile">libsensors</filename>, ou plus généralement par la suite
d'outils <application>lm_sensors</application>
          </para>
          <indexterm zone="lm_sensors sensors-detect">
            <primary sortas="b-sensors-detect">sensors-detect</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="sensord">
        <term><command>sensord</command></term>
        <listitem>
          <para>
            (facultatif) est un démon qui peut être utilisé pour loguer périodiquement
les valeurs des capteurs
          </para>
          <indexterm zone="lm_sensors sensord">
            <primary sortas="b-sensord">sensord</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libsensors">
        <term><filename class="libraryfile">libsensors.so</filename></term>
        <listitem>
          <para>
            contient les fonctions de l'API de <application>lm_sensors</application>
          </para>
          <indexterm zone="lm_sensors libsensors">
            <primary sortas="c-libsensors">libsensors.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
