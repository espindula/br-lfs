<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<sect1 id="beyond" xreflabel="Aller au-delà de BLFS">
  <?dbhtml filename="beyond.html"?>

  <sect1info>
<date>$Date$</date></sect1info>

  <title>Aller au-delà de BLFS</title>

  <para>Les paquets installés dans ce livre ne sont que le sommet de l'iceberg. Nous
espérons que l'expérience que vous avez acquise avec le livre LFS et le
livre BLFS vous donnera les bases nécessaires pour compiler, installer et
configurer des paquets non inclus dans ce livre.</para>

  <para>Quand vous voulez installer un paquet à un endroit différent de <filename
class='directory'>/</filename>, ou <filename
class='directory'>/usr</filename>, vous installez à l'extérieur des
paramètres d'environnement par défaut de la plupart des machines. Les
exemples suivants devraient vous aider à déterminer la façon de remédier à
cette situation. Les exemples couvrent toute la palette des paramètres qui
peuvent nécessiter une mise à jour, mais ils ne sont pas tous nécessaires
dans toutes les situations.</para>

  <itemizedlist>
    <listitem>
      <para>Étendez <envar>PATH</envar> pour inclure <filename
class='directory'>$PREFIX/bin</filename>.</para>
    </listitem>
    <listitem>
      <para>Étendez <envar>PATH</envar> de <systemitem
class="username">root</systemitem> pour inclure <filename
class='directory'>$PREFIX/sbin</filename>.</para>
    </listitem>
    <listitem>
      <para>Ajoutez <filename class='directory'>$PREFIX/lib</filename> à
<filename>/etc/ld.so.conf</filename> ou étendez
<envar>LD_LIBRARY_PATH</envar> pour l'inclure. Avant d'utiliser la toute
dernière option, regardez <ulink
url="http://xahlee.org/UnixResource_dir/_/ldpath.html"/>.  Si vous modifiez
<filename>/etc/ld.so.conf</filename>, souvenez-vous de mettre à jour
<filename>/etc/ld.so.cache</filename> en exécutant
<command>ldconfig</command> en tant qu'utilisateur <systemitem
class="username">root</systemitem>.</para>
    </listitem>
    <listitem>
      <para>Ajoutez <filename class='directory'>$PREFIX/man</filename> à
<filename>/etc/man_db.conf</filename> ou étendez <envar>MANPATH</envar>.</para>
    </listitem>
    <listitem>
      <para>Ajoutez <filename class='directory'>$PREFIX/info</filename> à
<envar>INFOPATH</envar>.</para>
    </listitem>
    <listitem>
      <para>Ajoutez <filename class='directory'>$PREFIX/lib/pkgconfig</filename> à
<envar>PKG_CONFIG_PATH</envar>. Certains paquets installent maintenant des
fichiers <filename class='extension'>.pc</filename> dans <filename
class='directory'>$PREFIX/share/pkgconfig</filename>, donc il se peut que
vous deviez inclure aussi ce répertoire.</para>
    </listitem>
    <listitem>
      <para>Ajoutez <filename class='directory'>$PREFIX/include</filename> à
<envar>CPPFLAGS</envar> lors de la compilation de paquets qui dépendent du
paquet que vous avez installé.</para>
    </listitem>
    <listitem>
      <para>Ajoutez <filename class='directory'>$PREFIX/lib</filename> à
<envar>LDFLAGS</envar> lors de la compilation de paquets qui dépendent d'une
bibliothèque installée par le paquet.</para>
    </listitem>
  </itemizedlist>

  <para>Si vous cherchez un paquet qui n'est pas dans le livre, ce qui suit présente
les différentes manières de chercher le paquet désiré.</para>

  <itemizedlist>
    <listitem>
      <para>Si vous connaissez le nom du paquet, cherchez-le sur Freecode sur <ulink
url="http://freecode.com/"/>. De même, cherchez sur Google sur <ulink
url="http://google.com/"/>. Une recherche de <filename
class='extension'>rpm</filename> sur <ulink url="http://rpmfind.net/"/> ou
de <filename class='extension'>deb</filename> sur <ulink
url="http://www.debian.org/distrib/packages#search_packages"/> peut parfois
aussi mener à un lien vers le paquet.</para>
    </listitem>
    <listitem>
      <para>Si vous connaissez le nom de l'exécutable mais pas le paquet auquel
appartient l'exécutable, essayez d'abord une recherche Google avec le nom de
l'exécutable. S'il y a trop de résultats, essayez de chercher l'exécutable
donné dans le dépôt de Debian sur <ulink
url="http://www.debian.org/distrib/packages#search_contents"/>.</para>
    </listitem>
  </itemizedlist>

  <para>Certaines astuces générales sur la gestion des nouveaux paquets&nbsp;:</para>

  <itemizedlist>
    <listitem>
      <para>Beaucoup de paquets récents suivent le processus <command>./configure
&amp;&amp; make &amp;&amp; make install</command>. Vous pouvez obtenir de
l'aide sur les options acceptées par configure via command
<command>./configure --help</command>.</para>
    </listitem>
    <listitem>
      <para>La plupart des paquets contiennent de la documentation sur la compilation et
l'installation du paquet. Certains documents sont excellents, d'autres ne le
sont pas. Regardez la page d'accueil du paquet pour des astuces
supplémentaires et mises à jour sur la compilation et la configuration du
paquet.</para>
    </listitem>
    <listitem>
      <para>Si vous avez un problème en compilant le paquet, essayez de chercher dans
les archives LFS sur <ulink url="https://www.&lfs-domainname;/search.html"/>
l'erreur ou si vous n'y arrivez pas, essayez de chercher sur Google. Souvent
une distribution aura déjà corrigé le problème (beaucoup d'entre elles
utilisent les versions de développement des paquets, donc elles voient les
changements plus tôt que nous qui utilisons en général les versions stables
publiées). Mais faites attention — tous les constructeurs ont tendance à
utiliser des correctifs qui ne sont plus nécessaires et à faire des
corrections qui ne sont requises que du fait de leurs choix propres quant à
la manière de construire un paquet. Il se peut qu'il vous faille des
recherches approfondies pour trouver la correction pour la version du paquet
que vous essayez d'utiliser, voire pour trouver le paquet (les noms sont
parfois différents de ceux auxquels on s'attend, comme
<application>ghostscript</application> qui a parfois un préfixe ou un
suffixe dans son nom), mais les remarques suivantes peuvent vous aider,
particulièrement pour ceux qui, comme les éditeurs, essayent de construire
les dernières versions et rencontrent des problèmes&nbsp;:</para>
      <itemizedlist>
        <listitem>
          <para>Arch <ulink url="http://www.archlinux.org/packages/"/> - entrez le nom du
paquet dans le champ 'Keywords' (mots-clés), sélectionnez le nom du paquet,
sélectionnez un le champ 'Source Files' (Fichiers Sources), puis
sélectionnez l'entrée <filename>PKGBUILD</filename> pour voir comment ils
construisent ce paquet.</para>
        </listitem>
        <listitem>
          <para><!-- 2020-11-11 : ftp hangs trying to connect, presumably removed.
               Use http becasue firefox says the certificate at this gb site is
               not valid for ftp.uk.debian.org -->
Debian <ulink url="http://ftp.uk.debian.org/debian/pool"/> (utilisez la
version de votre pays s'il y en a une) - les sources seront dans des
archives .tar.gz (soit le source <filename
class='extension'>.orig</filename> en amont, soit un
<filename>dfsg</filename> contenant les parties conformes à la charte du
logiciel libre de Debian) accompagnées par les fichiers .diff.gz ou .tar.gz
versionnés. Ces suppléments montrent souvent la manière dont le paquet est
construit et ils peuvent contenir des correctifs. Dans les versions
.diff.gz, tous les correctifs créent des fichiers dans <filename
class="directory">debian/patches</filename>.</para>
        </listitem>
        <listitem>
          <para>L'origine des paquets de Fedora est réorganisée de temps en temps. Pour
l'instant l'origine des paquets rpm se trouve sur <ulink
url="https://src.fedoraproject.org/projects/rpms/%2A"/> et à partir de là
vous pouvez saisir le nom d'un paquet dans le champ de recherche. Si le
paquet est trouvé vous pouvez voir ses fichiers (specfile qui contrôle la
construction, divers correctifs) ou les commits. Si cela échoue, vous pouvez
télécharger un srpm (un rpm source) et en utilisant
<application>rpm2cpio</application> (voir les astuces au bas de cette
page). Rendez-vous sur <ulink
url="https://dl.fedoraproject.org/pub/fedora/linux/"/> pour les rpm, puis
choisissez le dépôt que vous souhaitez regarder — development/rawhide
correspond à la dernière version de développement, ou choisissez releases
pour trouver ce qui s'y trouvait à la publication, ou updates pour les mises
à jour, ou updates/testing pour les dernières mises à jour qui peuvent
fonctionnent ou encore avoir des problèmes.
          </para>
        </listitem>
        <listitem>
          <para>Gentoo - les mirroirs des ebuilds et des correctifs ont l'air bien cachés et
ils changent fréquemment. En outre, si vous avez trouvé un miroir, vous
devez connaître le répertoire où a été rangé l'application.  Vous pouvez
trouver les ebuilds eux-mêmes sur <ulink url="http://packages.gentoo.org/"/>
- utilisez le champ de recherche. S'il y a un correctif, un mirroir l'aura,
dans le répertoire <filename class="directory">files/</filename>.  Selon
votre navigateur ou le miroir, il se peut que vous deviez télécharger le
ebuild pour pouvoir le lire. Voyez l'ebuild comme une sorte de combinaison
pseudo-code / shell - cherchez en particulier les commandes
<command>sed</command> et les correctifs, ou hasardez-vous à deviner ce que
signifient des fonctions comme <command>dodoc</command>.</para>
        </listitem>
        <listitem>
          <para>openSUSE est une distribution à publication continue, certaines versions des
paquets sont disponibles sur <ulink
url="http://download.opensuse.org/source/tumbleweed/repo/oss/src/"/> mais
d'autres sont dans ../update/openSUSE-current/src — les sources ne semblent
disponibles que dans des rpm sources.</para>
        </listitem>
        <listitem>
          <para>Slackware - le navigateur de paquets officiel est actuellement cassé. Le
site sur <ulink url="http://slackbuilds.org/"/> contient les versions
actuelles et précédentes de leur dépôt non officiel, avec des liens vers les
pages d'accueil, les téléchargements et des fichiers individuels, en
particulier les fichiers <filename>.SlackBuild</filename>.</para>
        </listitem>
        <listitem>
          <para>Ubuntu <ulink url="ftp://ftp.ubuntu.com/ubuntu/pool/"/> - voir les notes
debian ci-dessus.</para>
        </listitem>
      </itemizedlist>
      <para>Si tout échoue, essayez la liste de diffusion blfs-support.</para>
    </listitem>
  </itemizedlist>

  <tip>
    <para>If you have found a package that is only available in <filename
class='extension'>.deb</filename> or <filename
class='extension'>.rpm</filename> format, there are two small scripts,
<command>rpm2targz</command> and <command>deb2targz</command> that are
available at <ulink url="&sources-anduin-http;/extras/deb2targz.tar.bz2"/>
and <ulink url="&sources-anduin-http;/extras/rpm2targz.tar.bz2"/> to convert
the archives into a simple <filename>tar.gz</filename> format.</para>
    <para>Il se peut que vous trouviez utile aussi le script rpm2cpio.  La version
perl des archives du noyau linux est sur <ulink
url="http://lkml.indiana.edu/hypermail/linux/kernel/0210.2/att-0093/01-rpm2cpio"/>
fonctionne pour la plupart des sources rpm.  Le script rpm2targz utilisera
un script rpm2cpio ou un binaire s'il y en a un dans votre path. Remarquez
que rpm2cpio déballera un rpm source dans le répertoire actuel, ce qui donne
une archive tar, un fichier spec, et peut-être des correctifs ou d'autres
fichiers.</para>
  </tip>

</sect1>
