<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY unbound-download-http "https://nlnetlabs.nl/downloads/unbound/unbound-&unbound-version;.tar.gz">
  <!ENTITY unbound-download-ftp  "">
  <!ENTITY unbound-md5sum        "f0a767b32058ae67311e5d3665139d15">
  <!ENTITY unbound-size          "5.9&nbsp;Mo">
  <!ENTITY unbound-buildsize     "139&nbsp;Mo (avec la doc&nbsp;; plus 11&nbsp;Mo pour les tests)">
  <!ENTITY unbound-time          "0,4&nbsp;SBU (avec parallélisme = 4&nbsp;; avec la doc&nbsp;; plus
0,4&nbsp;SBU pour les tests)">
]>

<sect1 id="unbound" xreflabel="Unbound-&unbound-version;">
  <?dbhtml filename="unbound.html"?>

  <sect1info>
<date>$Date$</date></sect1info>

  <title>Unbound-&unbound-version;</title>

  <indexterm zone="unbound">
    <primary sortas="a-Unbound">Unbound</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à Unbound</title>

    <para>
      <application>Unbound</application> est un solveur DNS de validation récursif
et pour le cache. Il est conçu comme un ensemble de composants modulaires
qui incorporent des fonctions modernes, comme la validation de sécurité
embarqué (DNSSEC), Le protocole internet Version 6 (IPv6), et une
bibliothèque d'API du solveur client comme une partie intégrale de
l'architecture.
    </para>

    &lfs112_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&unbound-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP)&nbsp;: <ulink url="&unbound-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5&nbsp;: &unbound-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &unbound-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &unbound-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &unbound-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de Unbound</bridgehead>


    <!--
    <bridgehead renderas="sect4">
Required</bridgehead>
    <para role="required">
      <xref linkend="openssl"/>
 broken?
      or <xref linkend="nss"/>
    </para>
-->
<bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      <xref linkend="libevent"/>, <xref linkend="nettle"/>, <xref
linkend="python2"/>, <xref linkend="swig"/> (pour les bindings Python),
<xref linkend="doxygen"/> (pour la documentation html), <ulink
url="https://dnstap.info/">dnstap</ulink> et <ulink
url="https://pypi.python.org/pypi/Sphinx">Sphinx</ulink> (pour la
documentation des bindings Python)
    </para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;: <ulink url="&blfs-wiki;/unbound"/>
    </para>
  </sect2>

  <sect2 role="installation">
    <title>Installation de Unbound</title>

    <para>
      Il doit y avoir un utilisateur et un groupe dédié pour prendre le contrôle
du démon <command>unbound</command> après son démarrage. Tapez la commande
suivante en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>groupadd -g 88 unbound &amp;&amp;
useradd -c "Unbound DNS Resolver" -d /var/lib/unbound -u 88 \
        -g unbound -s /bin/false unbound</userinput></screen>

    <para>
      Installez <application>Unbound</application> en exécutant les commandes
suivantes&nbsp;:
    </para>

<screen><userinput>./configure --prefix=/usr     \
            --sysconfdir=/etc \
            --disable-static  \
            --with-pidfile=/run/unbound.pid &amp;&amp;
make</userinput></screen>

    <para>
      Si vous avez installé le paquet <xref linkend="doxygen"/> et souhaitez
construire la documentation html, lancez la commande suivante&nbsp;:
    </para>

<screen remap="doc"><userinput>make doc</userinput></screen>

    <para>
      Pour tester les résultats, lancez <command>make check</command>.
    </para>

    <para>
      Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>make install &amp;&amp;
mv -v /usr/sbin/unbound-host /usr/bin/</userinput></screen>

    <para>
      Si vous avez construit la documentation html, installez-la en lançant les
commandes suivantes en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"
        remap="doc"><userinput>install -v -m755 -d /usr/share/doc/unbound-&unbound-version; &amp;&amp;
install -v -m644 doc/html/* /usr/share/doc/unbound-&unbound-version;</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/static-libraries.xml"/>

    <para>
      <option>--with-libevent</option>&nbsp;: Cette option active le support
libevent permettant une utilisation d'une plage de port de sortie
importante.
    </para>

    <para>
      <option>--with-pyunbound</option>&nbsp;: Cette option active la construction
des liaisons Python.
    </para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de Unbound</title>

    <sect3 id="unbound-config">
      <title>Fichiers de configuration</title>

      <para>
        <filename>/etc/unbound/unbound.conf</filename>
      </para>

      <indexterm zone="unbound unbound-config">
        <primary sortas="e-etc-unbound-unbound.conf">/etc/unbound/unbound.conf</primary>
      </indexterm>

    </sect3>

    <sect3>
      <title>Informations sur la configuration</title>

      <para>
        Dans la configuration par défaut, <command>unbound</command> se liera au
localhost (adresse IP 127.0.0.1) et permettra les requêtes récursives
seulement depuis les clients locaux. Si vous voulez utiliser
<command>unbound</command> pour la résolution DNS local, lancez les
commandes suivantes en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
      </para>

<screen role="root"><userinput>echo "nameserver 127.0.0.1" > /etc/resolv.conf</userinput></screen>

      <para>
        Si vous utilisez un client DHCP pour vous connecter au réseau,
<filename>/etc/resolv.conf</filename> sera écrasé avec les valeurs fournies
par le serveur DHCP. Vous pouvez empêcher cela, par exemple dans <xref
linkend="dhcp"/>, en exécutant la commande suivante en tant qu'utilisateur
<systemitem class="username">root</systemitem>&nbsp;:
      </para>

<screen role="root"><userinput>sed -i '/request /i\supersede domain-name-servers 127.0.0.1;' \
       /etc/dhcp/dhclient.conf</userinput></screen>

      <para>
        Pour une configuration avancée, regardez le fichier
<filename>/etc/unbound/unbound.conf</filename> et la documentation.
      </para>

      <para revision="sysv">
        Quand <application>Unbound</application> est installé, quelques paquets
échoue à la construction si le fichier
<filename>/etc/unbound/root.key</filename> n'est pas trouvé. Ce fichier est
créé en lançant le script de démarrage (les instructions d'installation sont
à la suite). Alternativement, il peut être créé en exécutant la commande
suivante en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
      </para>

      <para revision="systemd">
        When <application>Unbound</application> is installed, some package builds
fail if the file <filename>/etc/unbound/root.key</filename> is not
found. Create this file by running the following command as the <systemitem
class="username">root</systemitem> user:
      </para>

<screen role="nodump"><userinput>unbound-anchor</userinput></screen>

    </sect3>

    <sect3 id="unbound-init">
      <title><phrase revision="sysv">Script de démarrage</phrase> <phrase
revision="systemd">Unité Systemd</phrase></title>

      <para>
        Si vous voulez que le serveur <application>Unbound</application> démarre
automatiquement quand le système est démarré, installez <phrase
revision="sysv">le script d'initialisation
<filename>/etc/rc.d/init.d/unbound</filename> inclus</phrase><phrase
revision="systemd">l'unité <filename>unbound.service</filename>
incluse</phrase> dans le paquet <xref linkend="bootscripts"
revision="sysv"/><xref linkend="systemd-units" revision="systemd"/>&nbsp;:
      </para>

      <indexterm zone="unbound unbound-init">
        <primary sortas="f-unbound">unbound</primary>
      </indexterm>

<screen role="root"><userinput>make install-unbound</userinput></screen>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèque installée</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>
          unbound, unbound-anchor, unbound-checkconf, unbound-control,
unbound-control-setup et unbound-host
        </seg>
        <seg>
          libunbound.so et (éventuellement)
/usr/lib/python&python2-majorver;/site-packages/_unbound.so
        </seg>
        <seg>
          /etc/unbound et /usr/share/doc/unbound-&unbound-version; (facultatif)
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?> <?dbhtml list-presentation="table"?>

      <varlistentry id="unbound-prog">
        <term><command>unbound</command></term>
        <listitem>
          <para>
            est un démon de résolution DNS
          </para>
          <indexterm zone="unbound unbound-prog">
            <primary sortas="b-unbound">unbound</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="unbound-anchor">
        <term><command>unbound-anchor</command></term>
        <listitem>
          <para>
            réalise la configuration ou la mise à jour l'ancre de confiance de la racine
pour la validation DNSSEC
          </para>
          <indexterm zone="unbound unbound-anchor">
            <primary sortas="b-unbound-anchor">unbound-anchor</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="unbound-checkconf">
        <term><command>unbound-checkconf</command></term>
        <listitem>
          <para>
            vérifie la syntaxe du fichier de configuration <command>unbound</command> et
les autres erreurs
          </para>
          <indexterm zone="unbound unbound-checkconf">
            <primary sortas="b-unbound-checkconf">unbound-checkconf</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="unbound-control">
        <term><command>unbound-control</command></term>
        <listitem>
          <para>
            réalise l'administration distante du solveur DNS <command>unbound</command>
          </para>
          <indexterm zone="unbound unbound-control">
            <primary sortas="b-unbound-control">unbound-control</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="unbound-control-setup">
        <term><command>unbound-control-setup</command></term>
        <listitem>
          <para>
            génère un certification auto-signé et les clés privées pour le serveur et le
client
          </para>
          <indexterm zone="unbound unbound-control-setup">
            <primary sortas="b-unbound-control-setup">unbound-control-setup</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="unbound-host">
        <term><command>unbound-host</command></term>
        <listitem>
          <para>
            est l'utilitaire de recherche DNS similaire à <command>host</command> de
<xref linkend="bind-utils"/>
          </para>
          <indexterm zone="unbound unbound-host">
            <primary sortas="b-unbound-host">unbound-host</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libunbound">
        <term><filename class="libraryfile">libunbound.so</filename></term>
        <listitem>
          <para>
            fournit les fonctions de l'API de <application>Unbound</application> aux
programmes
          </para>
          <indexterm zone="unbound libunbound">
            <primary sortas="c-libunbound">libunbound.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
