<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY pulseaudio-download-http
           "https://www.freedesktop.org/software/pulseaudio/releases/pulseaudio-&pulseaudio-version;.tar.xz">
  <!ENTITY pulseaudio-download-ftp  "">
  <!ENTITY pulseaudio-md5sum        "2c7b8ceb5d7337565c7314b4d6087ca8">
  <!ENTITY pulseaudio-size          "1.5 Mo">
  <!ENTITY pulseaudio-buildsize     "42&nbsp;Mo (avec les tests)">
  <!ENTITY pulseaudio-time          "0,2 SBU (avec parallélisme = 4&nbsp;; plus 0,2 SBU pour les tests)">
]>

<sect1 id="pulseaudio" xreflabel="PulseAudio-&pulseaudio-version;">
  <?dbhtml filename="pulseaudio.html"?>


  <title>PulseAudio-&pulseaudio-version;</title>

  <indexterm zone="pulseaudio">
    <primary sortas="a-PulseAudio">PulseAudio</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à PulseAudio</title>

    <para>
      Le paquet <application>PulseAudio</application> est un système de son pour
les systèmes d'exploitation POSIX, ce qui veut dire que c'est un proxy pour
vos applications de son. Il vous permet de faire des tâches avancées sur vos
données sonores en s'infiltrant entre votre application et votre
matériel. Transférer le son sur une autre machine, modifier le format
d'échantillonnage ou le nombre de canaux et mixer plusieurs sons en un, sont
des tâches faciles avec un serveur de son.
    </para>

    &lfs120_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&pulseaudio-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP)&nbsp;: <ulink url="&pulseaudio-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5&nbsp;: &pulseaudio-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &pulseaudio-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &pulseaudio-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &pulseaudio-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de PulseAudio</bridgehead>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
      <xref linkend="libsndfile"/>
    </para>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="alsa-lib"/>, <xref linkend="dbus"/>, <phrase
revision="sysv"><xref linkend="elogind"/>,</phrase> <xref linkend="glib2"/>,
<xref linkend="speex"/> et <xref linkend="xorg7-lib"/>
    </para>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      <!--<ulink url="http://www.xenproject.org/">
XEN</ulink>-->
<xref linkend="avahi"/>, <xref linkend="bluez"/>, <xref linkend="doxygen"/>
(pour la documentation), <xref linkend="fftw"/>, <xref linkend="gtk3"/>,
<xref linkend="libsamplerate"/>, <xref linkend="sbc"/> (prise en charge du
Bluetooth), <xref linkend="valgrind"/>, <ulink
url="https://www.jackaudio.org/">JACK</ulink>, <ulink
url="https://0pointer.de/lennart/projects/libasyncns/">libasyncns</ulink>,
<ulink url="https://www.lirc.org/">LIRC</ulink>, <ulink
url="https://gstreamer.freedesktop.org/src/orc/">ORC</ulink>, <ulink
url="https://sourceforge.net/projects/soxr/">soxr</ulink>, <ulink
url="https://tdb.samba.org/">TDB</ulink> et <ulink
url="https://freedesktop.org/software/pulseaudio/webrtc-audio-processing/">
WebRTC AudioProcessing</ulink>
      
    </para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de PulseAudio</title>

    <!--
    <para>

      If <xref linkend="doxygen"/> is not installed, workaround a building
      issue because of the changes in meson-0.57.2:
    </para>

<screen><userinput>sed '/doxygen/d' -i meson.build</userinput></screen>
-->
<para>
      Installez <application>PulseAudio</application> en exécutant les commandes
suivantes&nbsp;:
    </para>

<screen><userinput>mkdir build &amp;&amp;
cd    build &amp;&amp;

meson setup --prefix=/usr       \
            --buildtype=release \
            -Ddatabase=gdbm     \
            -Ddoxygen=false     \
            -Dbluez5=disabled   \
            ..                  &amp;&amp;
ninja</userinput></screen>

    <para>
      Pour tester les résultats, lancez&nbsp;: <command>ninja test</command>. Un
test échoue si les tests ne sont pas lancés en tant qu'utilisateur root,
mais il peut être ignoré.
    </para>

    <para>
      Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<!-- http://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User/SystemWide/ -->
<screen role="root"><userinput>ninja install</userinput></screen>

    
    <para>Lancer PulseAudio en tant que démon du système est possible mais pas
recommandé. Voir <ulink
url="https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User/SystemWide/"/>
pour plus d'information. En restant avec l'utilisateur <systemitem
class="username">root</systemitem>, effacez le fichier de configuration de
<application>D-Bus</application> afin d'éviter la création d'utilisateurs et
de groupes inutiles.
    </para>

<screen role="root"><userinput>rm -fv /etc/dbus-1/system.d/pulseaudio-system.conf</userinput></screen>

  </sect2>
  <sect2 role="commands">
    <title>Explication des commandes</title>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/meson-buildtype-release.xml"/>

    <para>
      <parameter>-Dbluez5=disabled</parameter>&nbsp;: ce paramètre empêche une
erreur d'exécution si <xref linkend="dbus"/> et <xref linkend="sbc"/> sont
tous les deux installés mais que <xref linkend="bluez"/> n'est pas
installé. Supprimez-le si vous avez installé les trois paquets.
    </para>

    <para>
      <parameter>-Ddoxygen=false</parameter>&nbsp;: ce paramètre permet au paquet
de compiler si <xref linkend="doxygen"/> n'est pas installé. Supprimez-le si
vous l'avez installé et souhaitez construire la documentation.
    </para>


  <!--
    <para>

      <parameter>- -disable-rpath</parameter>: This switch prevents
      linker from adding a hardcoded runtime path to the installed
      programs and libraries.
    </para>-->
</sect2>
  <sect2 role="configuration">
    <title>Configuration de PulseAudio</title>

    <sect3 id="pulseaudio-config">
      <title>Fichiers de configuration</title>
      <para>
        Il y a les fichiers système principaux pour la configuration&nbsp;:
<filename>/etc/pulse/daemon.conf</filename>,
<filename>/etc/pulse/client.conf</filename>,
<filename>/etc/pulse/default.pa</filename>, et les fichiers de configuration
avec le même nom dans <filename
class="directory">~/.config/pulse</filename>. Les fichiers de configuration
prennent l'avantage sur ceux du système.
      </para>

      <indexterm zone="pulseaudio pulseaudio-config">
        <primary sortas="e-AA.config-pulse">~/.config/pulse</primary>
      </indexterm>

      <indexterm zone="pulseaudio pulseaudio-config">
        <primary
        sortas="e-etc-pulse-daemon.conf">/etc/pulse/daemon.conf</primary>
      </indexterm>

      <indexterm zone="pulseaudio pulseaudio-config">
        <primary
        sortas="e-etc-pulse-client.conf">/etc/pulse/client.conf</primary>
      </indexterm>

      <indexterm zone="pulseaudio pulseaudio-config">
        <primary
        sortas="e-etc-pulse-default.pa">/etc/pulse/default.pa</primary>
      </indexterm>
    </sect3>

    <sect3><title>Informations sur la configuration</title>

      <!--
      <para>

        The default configuration files allow setting up a working installation.
        However, a reference to Console-Kit needs to be removed.
        Issue the following command as the
        <systemitem class="username">root</systemitem> user:
      </para>

<screen role="root"><userinput>sed -i '/load-module module-console-kit/s/^/#/' /etc/pulse/default.pa</userinput></screen>

       In 13.0 this is protected via .ifexists module-console-kit.so
-->
<para>
        Vous pouvez également configurer le système audio. Vous pouvez démarrer
<application>pulseaudio</application> en ligne de commande en utilisant
<command>pulseaudio -C</command> et ensuite afficher différentes
informations et changer quelques réglages. Voir <command>man
pulse-cli-syntax</command>.
      </para>

      <para>
        Si <application>pulseaudio</application> fonctionnait mais que vous n'avez
plus de son, après avoir vérifié que ce n'est pas un problème matériel
(enceintes ou casque déconnecté, amplifieur externe déconnecté) vous
pourriez avoir besoin de corriger le problème.
      </para>

      <para>
        Une suggestion est de fermer l'application, comme
<application>firefox</application>, où le son ne marche plus, puis
lancer&nbsp;: <command>pactl list short sinks</command> suivi de&nbsp;:
<command>pacmd set-default-sink &lt;sink #&gt;</command> puis relancer
l'application.
      </para>

      <para>
        Si cela ne marche pas, une approche plus drastique fonctionne souvent. Après
avoir fermé l'application, fermez pluseaudio, soit en utilisant
<command>pulseaudio --kill</command> ou, si cela ne marche pas,
<command>killall -KILL pulseaudio</command> puis <command>rm -rf
~/.config/pulse/*</command> (et peut-être aussi <command>rm -rf
~/.pluse/*</command> si vous utilisiez une très vieille version de pulse sur
cette machine) puis en lançant <command>pulseaudio --verbose</command> pour
le redémarrer. Si le démon démarre, redémarrez l'application. Voyez
<command>man pulseaudio</command> pour plus d'options.
      </para>

    </sect3>
  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>
           <!--esdcompat,-->
<!-- it looks like the equalizer needs FFTW: qpaeq, -->
pacat, pacmd, pactl, padsp, pamon (lien symbolique vers pacat), paplay (lien
symbolique vers pacat), parec (lien symbolique vers pacat), parecord (lien
symbolique vers pacat), qpaeq, pasuspender, pax11publish, pulseaudio et
start-pulseaudio-x11
        </seg>
        <seg>
          libpulse.so, libpulse-mainloop-glib.so, libpulse-simple.so,
libpulsecommon-&pulseaudio-major-version;.so,
libpulsecore-&pulseaudio-major-version;.so et libpulsedsp.so
        </seg>
        <seg>
          /etc/pulse, /usr/include/pulse, /usr/lib/cmake/PulseAudio,
/usr/lib/{pulseaudio,pulse-&pulseaudio-major-version;}, /usr/libexec/pulse
et /usr/share/pulseaudio
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <!--
      <varlistentry id="esdcompat">

        <term><command>esdcompat</command></term>
        <listitem>
          <para>
            is the <application>PulseAudio</application> ESD wrapper script.
          </para>
          <indexterm zone="pulseaudio esdcompat">
            <primary sortas="b-esdcompat">esdcompat</primary>
          </indexterm>
        </listitem>
      </varlistentry>
-->
<?dbfo list-presentation="list"?> <?dbhtml list-presentation="table"?>



      <varlistentry id="pacat">
        <term><command>pacat</command></term>
        <listitem>
          <para>
            lit ou enregistre des flux audio purs ou encodés sur un serveur de son
<application>PulseAudio</application>
          </para>
          <indexterm zone="pulseaudio pacat">
            <primary sortas="b-pacat">pacat</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="pacmd">
        <term><command>pacmd</command></term>
        <listitem>
          <para>
            est un outil pour reconfigurer un serveur de son
<application>PulseAudio</application> en cours d'exécution
          </para>
          <indexterm zone="pulseaudio pacmd">
            <primary sortas="b-pacmd">pacmd</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="pactl">
        <term><command>pactl</command></term>
        <listitem>
          <para>
            contrôle un serveur de son <application>PulseAudio</application> en fonction
          </para>
          <indexterm zone="pulseaudio pactl">
            <primary sortas="b-pactl">pactl</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="padsp">
        <term><command>padsp</command></term>
        <listitem>
          <para>
            est une enveloppe OSS <application>PulseAudio</application>
          </para>
          <indexterm zone="pulseaudio padsp">
            <primary sortas="b-padsp">padsp</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="pamon">
        <term><command>pamon</command></term>
        <listitem>
          <para>
            est un lien symbolique vers <command>pacat</command>
           </para>
          <indexterm zone="pulseaudio pamon">
            <primary sortas="b-pamon">pamon</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="paplay">
        <term><command>paplay</command></term>
        <listitem>
          <para>
            lit des fichiers sons sur le serveur de son
<application>PulseAudio</application>
          </para>
          <indexterm zone="pulseaudio paplay">
            <primary sortas="b-paplay">paplay</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="parec">
        <term><command>parec</command></term>
        <listitem>
          <para>
            est un lien symbolique vers <command>pacat</command>
          </para>
          <indexterm zone="pulseaudio parec">
            <primary sortas="b-parec">parec</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="parecord">
        <term><command>parecord</command></term>
        <listitem>
          <para>
            est un lien symbolique vers <command>pacat</command>
          </para>
          <indexterm zone="pulseaudio parecord">
            <primary sortas="b-parecord">parecord</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="pasuspender">
        <term><command>pasuspender</command></term>
        <listitem>
          <para>
            est un outil utilisé pour dire à un serveur de son
<application>PulseAudio</application> local de suspendre temporairement
l'accès aux périphériques sons, afin que d'autres applications puissent y
accéder directement
          </para>
          <indexterm zone="pulseaudio pasuspender">
            <primary sortas="b-pasuspender">pasuspender</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="pax11publish">
        <term><command>pax11publish</command></term>
        <listitem>
          <para>
            est un outil d'autorisations de <application>PulseAudio</application> pour
X11
          </para>
          <indexterm zone="pulseaudio pax11publish">
            <primary sortas="b-pax11publish">pax11publish</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="pa-info">
        <term><command>pa-info</command></term>
        <listitem>
          <para>
            est un script shell qui affiche diverses informations sur le serveur
<application>PulseAudio</application> en cours d'exécution
          </para>
          <indexterm zone="pulseaudio pa-info">
            <primary sortas="b-pa-info">pa-info</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="pulseaudio-prog">
        <term><command>pulseaudio</command></term>
        <listitem>
          <para>
            est un serveur pour du son en réseau à faible latence sous Linux
          </para>
          <indexterm zone="pulseaudio pulseaudio-prog">
            <primary sortas="b-pulseaudio">pulseaudio</primary>
          </indexterm>
        </listitem>
      </varlistentry>


      <!-- only installed if FFTW is present -->
<varlistentry id="qpaeq">
        <term><command>qpaeq</command></term>
        <listitem>
          <para>
            est une interface d'égalisation pour les égaliseurs de
<application>PulseAudio</application> (requiert <xref linkend="fftw"/> à la
construction)
          </para>
          <indexterm zone="pulseaudio qpaeq">
            <primary sortas="b-qpaeq">qpaeq</primary>
          </indexterm>
        </listitem>
      </varlistentry>


      <!-- Not found in PA 7.0
      <varlistentry id="start-pulseaudio-kde">

        <term><command>start-pulseaudio-kde</command></term>
        <listitem>
          <para>
            Starts <application>PulseAudio</application> and loads
            module-device-manager to use KDE routing policies.
          </para>
          <indexterm zone="pulseaudio start-pulseaudio-kde">
            <primary sortas="b-start-pulseaudio-kde">start-pulseaudio-kde</primary>
          </indexterm>
        </listitem>
      </varlistentry>
-->
<varlistentry id="start-pulseaudio-x11">
        <term><command>start-pulseaudio-x11</command></term>
        <listitem>
          <para>
            démarre <application>PulseAudio</application> et l'enregistre dans le
gestionnaire de session X11
          </para>
          <indexterm zone="pulseaudio start-pulseaudio-x11">
            <primary sortas="b-start-pulseaudio-x11">start-pulseaudio-x11</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
