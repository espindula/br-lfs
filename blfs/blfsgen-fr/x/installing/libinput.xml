<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY libinput-version "1.19.3">

  <!ENTITY libinput-download-http "https://www.freedesktop.org/software/libinput/libinput-&libinput-version;.tar.xz">
  <!ENTITY libinput-download-ftp  "">
  <!ENTITY libinput-md5sum        "a9f6fe8156739b51593674183cb25399">
  <!ENTITY libinput-size          "640&nbsp;Ko">
  <!ENTITY libinput-buildsize     "10 MB (add 17 MB for documentation)">
  <!ENTITY libinput-time          "0.1 SBU (add 0.1 SBU for documentation)">
]>

  <sect2 id="libinput" xreflabel="libinput-&libinput-version;">
    <?dbhtml filename="libinput.html"?>

    <sect2info>
<date>$Date$</date></sect2info>

    <title>libinput-&libinput-version;</title>

    <indexterm zone="libinput">
      <primary sortas="a-libinput">libinput</primary>
    </indexterm>

    <sect3 role="package">
      <title>Introduction à libinput</title>

      <para>
        <application>libinput</application> est une bibliothèque qui prend en charge
les périphériques d'entrée pour les serveurs d'affichage et d'autres
applications qui ont besoin de traiter directement avec les périphériques
d'entrée.
      </para>

      &lfs111_checked;

      <bridgehead renderas="sect4">Informations sur le paquet</bridgehead>
      <itemizedlist spacing="compact">
        <listitem>
          <para>
            Téléchargement (HTTP)&nbsp;: <ulink url="&libinput-download-http;"/>
          </para>
        </listitem>
        <listitem>
          <para>
            Téléchargement (FTP)&nbsp;: <ulink url="&libinput-download-ftp;"/>
          </para>
        </listitem>
        <listitem>
          <para>
            Somme de contrôle MD5&nbsp;: &libinput-md5sum;
          </para>
        </listitem>
        <listitem>
          <para>
            Taille du téléchargement&nbsp;: &libinput-size;
          </para>
        </listitem>
        <listitem>
          <para>
            Estimation de l'espace disque requis&nbsp;: &libinput-buildsize;
          </para>
        </listitem>
        <listitem>
          <para>
            Estimation du temps de construction&nbsp;: &libinput-time;
          </para>
        </listitem>
      </itemizedlist>

      <bridgehead renderas="sect4">Dépendances de libinput</bridgehead>

      <bridgehead renderas="sect5">Requises</bridgehead>
      <para role="required">
        <xref linkend="libevdev"/> et <xref linkend="mtdev"/>
      </para>

      <bridgehead renderas="sect5">Facultatives</bridgehead>
      <para role="optional">
        <xref linkend="valgrind"/> (pour lancer les tests), <ulink
url="http://sphinx-doc.org/">Sphinx</ulink> (requis pour construire la
documentation), <xref linkend="gtk3"/> (pour construire la visionneuse
d'événements en GUI), <ulink
url="http://www.nongnu.org/libunwind/">libunwind</ulink> (requis pour les
tests), <xref linkend="libwacom"/> et <ulink
url="https://pypi.org/project/pyparsing/">PyParsing</ulink> (pour un test
non-root)
      </para>

      <para condition="html" role="usernotes">
        Notes utilisateur&nbsp;: <ulink url="&blfs-wiki;/libinput"/>
      </para>
    </sect3>

    <sect3 role="kernel" id="libinput-kernel">
      <title>configuration du noyau pour lancer la suite de tests de libinput</title>

      <para>
        Bien que libinput fonctionne avec la même configuration du noyau que <xref
linkend="libevdev"/>, sa suite de tests complète demande la présence de
<filename>/dev/uinput</filename> (ainsi que <xref linkend="valgrind"/> et
<ulink url="http://www.nongnu.org/libunwind/">libunwind</ulink>).
      </para>

      <para>
        Si vous souhaitez lancer tous les tests, activez l'option suivante dans la
configuration du noyau et recompilez-le si nécessaire&nbsp;:
      </para>

<screen><literal>Device Drivers ---&gt;
  Input device support ---&gt;
    Miscellaneous Devices ---&gt;
    &lt;*/M&gt;   User level driver support        [CONFIG_INPUT_UINPUT]</literal></screen>

      <para>
        Si vous construisez cela en tant que module, il doit être inséré avant de
lancer la suite de tests.
      </para>

      <para>
        Sur un système Xorg vous aurez aussi besoin d'éviter que les événements
générés pendant la suite de tests n'interfèrent avec votre bureau. Copiez le
fichier <filename>test/50-litest.conf</filename> dans <filename
class="directory">${XORG_PREFIX}/share/X11/xorg.conf.d</filename> et
redémarrez le serveur X. Pour plus d'informations, voyez <ulink
url="https://wayland.freedesktop.org/libinput/doc/&libinput-version;/test-suite.html">la
suite de tests de libinput</ulink>
      </para>

      <indexterm zone="libinput libinput-kernel">
        <primary sortas="d-libinput">libinput</primary>
      </indexterm>
    </sect3>

    <sect3 role="installation">
      <title>Installation de libinput</title>

      <para>
        Installez <application>libinput</application> en exécutant les commandes
suivantes&nbsp;:
      </para>

<screen><userinput>mkdir build &amp;&amp;
cd    build &amp;&amp;

meson --prefix=$XORG_PREFIX \
      --buildtype=release   \
      -Ddebug-gui=false     \
      -Dtests=false         \
      -Dlibwacom=false      \
      ..                    &amp;&amp;
ninja</userinput></screen>

      <note>
        <para>
          Si vous voulez lancer les tests complets, supprimez -Dtests des options de
<command>meson</command> ci-dessus. Veuillez lire la section
«&nbsp;configuration du noyau pour lancer la suite de tests de
libinput&nbsp;» ci-dessus.
        </para>

        <para>
          Si vous avez activé la suite complète des tests, vous pouvez lancer les
tests principaux <emphasis>en tant qu'utilisateur root</emphasis> en
exécutant <command>ninja test</command>. Un grand nombre de tests seront
lancés, avec environ 20 échecs (au moins sur un système Xorg).
        </para>
      </note>

      <para>
        Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
      </para>

<screen role="root"><userinput>ninja install</userinput></screen>

      <para>
        If you have passed <option>-Ddocumentation=true</option> to
<command>meson</command>, you can install the generated documentation by
running the following commands as the <systemitem
class="username">root</systemitem> user:
      </para>


<screen role="root"
        remap="doc"><!-- seems the api doc is not generated because the directory is not a git
     repository... -->
<userinput>install -v -dm755      /usr/share/doc/libinput-&libinput-version;/html &amp;&amp;
cp -rv Documentation/* /usr/share/doc/libinput-&libinput-version;/html</userinput></screen>

    </sect3>

    <sect3 role="commands">
      <title>Explication des commandes</title>

      <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
        href="../../xincludes/meson-buildtype-release.xml"/>

      <para>
        <parameter>-Ddebug-gui=false</parameter>&nbsp;: Ce paramètre désactive la
création d'un utilitaire de débogage visuel pour libinput. Supprimez-le si
vous le voulez et si vous avez installé <xref linkend="gtk3"/>.
      </para>

      <para>
        <parameter>-Dtests=false</parameter>&nbsp;: Ce paramètre désactive la
compilation des tests principaux. Même si tests est défini à faux, vous
pouvez toujours lancer les quatre premiers tests mineurs, en tant
qu'utilisateur normal, mais l'un d'entre eux sera sauté si <ulink
url="https://pypi.org/project/pyparsing">PyParsing</ulink> n'est pas
installé.
      </para>

      <para>
        <parameter>-Dlibwacom=false</parameter>&nbsp;: Enlevez ce paramètre si vous
avez installé<xref linkend="libwacom"/> ou si vous installez GNOME.
      </para>

      <para>
        <option>-Ddocumentation=true</option>: This switch enables generation of the
documentation. Add it if you want to generate the documentation. You must
have <xref linkend="doxygen"/> and <xref linkend="graphviz"/> installed.
      </para>

    </sect3>

    <sect3 role="content">
      <title>Contenu</title>

      <segmentedlist>
        <segtitle>Programmes installés</segtitle>
        <segtitle>Bibliothèques installées</segtitle>
        <segtitle>Répertoires installés</segtitle>

        <seglistitem>
          <seg>
            <!-- libinput-debug-events, libinput-list-devices, libinput-measure*,
            libinput-record, libinput-replay Library Executables -->
libinput
            
          </seg>
          <seg>
            libinput.so
          </seg>
          <seg>
            $XORG_PREFIX/libexec/libinput, /etc/libinput, /usr/share/libinput et
(éventuellement) /usr/share/doc/libinput-&libinput-version;
          </seg>
        </seglistitem>
      </segmentedlist>

      <variablelist>
        <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
        <?dbfo list-presentation="list"?>
        <?dbhtml list-presentation="table"?>

        <varlistentry id="libinput-prog">
          <term><command>libinput</command></term>
          <listitem>
            <para>
              est un outil d'aide au débogage pour la bibliothèque
<application>libinput</application>
            </para>
            <indexterm zone="libinput libinput-prog">
              <primary sortas="b-libinput-prog">libinput</primary>
            </indexterm>
          </listitem>
        </varlistentry>

        <!--
        <varlistentry id="libinput-debug-events">

          <term><command>libinput-debug-events</command></term>
          <listitem>
            <para>
              is a debug helper for <application>libinput</application>.
            </para>
            <indexterm zone="libinput libinput-debug-events">
              <primary sortas="b-libinput-debug-events">libinput-debug-events</primary>
            </indexterm>
          </listitem>
        </varlistentry>

        <varlistentry id="libinput-list-devices">
          <term><command>libinput-list-devices</command></term>
          <listitem>
            <para>
              lists local devices as recognized by
              <application>libinput</application>.
            </para>
            <indexterm zone="libinput libinput-list-devices">
              <primary sortas="b-libinput-list-devices">libinput-list-devices</primary>
            </indexterm>
          </listitem>
        </varlistentry>

        <varlistentry id="libinput-measure">
          <term><command>libinput-measure</command></term>
          <listitem>
            <para>
              is the entry to a set of debugging programs to measure
              the properties of one or more devices.
            </para>
            <indexterm zone="libinput libinput-measure">
              <primary sortas="b-libinput-measure">libinput-measure</primary>
            </indexterm>
          </listitem>
        </varlistentry>

        <varlistentry id="libinput-record">
          <term><command>libinput-record</command></term>
          <listitem>
            <para>
              records kernel events from a device in a form that can later be
              replayed by libinput-replay.
            </para>
            <indexterm zone="libinput libinput-record">
              <primary sortas="b-libinput-record">libinput-record</primary>
            </indexterm>
          </listitem>
        </varlistentry>

        <varlistentry id="libinput-replay">
          <term><command>libinput-replay</command></term>
          <listitem>
            <para>
              replays kernel events from a recording made by libinput-record.
            </para>
            <indexterm zone="libinput libinput-replay">
              <primary sortas="b-libinput-replay">libinput-replay</primary>
            </indexterm>
          </listitem>
        </varlistentry>
-->
<varlistentry id="libinput-lib">
          <term><filename class="libraryfile">libinput.so</filename></term>
          <listitem>
            <para>
              contient les fonctions de l'API pour gérer les périphériques d'entrée
            </para>
            <indexterm zone="libinput libinput-lib">
              <primary sortas="c-libinput-lib">libinput.so</primary>
            </indexterm>
          </listitem>
        </varlistentry>

      </variablelist>

    </sect3>

  </sect2>
