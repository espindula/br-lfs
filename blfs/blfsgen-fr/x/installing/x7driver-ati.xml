<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY radeon-wiki "http://wiki.x.org/wiki/RadeonFeature">
  <!ENTITY radeon-marketing-names "&radeon-wiki;#Decoder_ring_for_engineering_vs_marketing_names">

  <!ENTITY xorg-ati-driver-version "19.1.0">

  <!ENTITY xorg-ati-driver-download-http "&xorg-download-http;/driver/xf86-video-ati-&xorg-ati-driver-version;.tar.bz2">
  <!ENTITY xorg-ati-driver-download-ftp  "&xorg-download-ftp;/driver/xf86-video-ati-&xorg-ati-driver-version;.tar.bz2">
  <!ENTITY xorg-ati-driver-md5sum        "6e49d3c2839582af415ceded76e626e6">
  <!ENTITY xorg-ati-driver-size          "884 Ko">
  <!ENTITY xorg-ati-driver-buildsize     "21 Mo">
  <!ENTITY xorg-ati-driver-time          "0.2 SBU">
]>

  
  <!-- Begin Xorg ATI Driver -->
<sect2 id="xorg-ati-driver" xreflabel="Xorg ATI Driver-&xorg-ati-driver-version;">

  <sect2info>
<date>$Date$</date></sect2info>

    <title>Xorg ATI Driver-&xorg-ati-driver-version;</title>

    <indexterm zone="xorg-ati-driver">
      <primary sortas="a-xorg-ati-driver">xorg-ati-driver</primary>
    </indexterm>

    <sect3 role="package">
      <title>Introduction à Xorg ATI Driver</title>

      <para>
        Le paquet <application>Xorg ATI Driver</application> contient le pilote
vidéo X.Org pour les cartes graphiques ATI Radeon incluant toutes les puces
de R100 à "Volcanic Islands".
      </para>

      &lfs101_checked;

      <note>
        <para>
          Pour un rendu direct fonctionnel avec les nouvelles cartes (puces r300 et
au-delà), vous devrez activer la construction des pilotes Gallium radeonsi
r300 et r600 dans les instructions <xref linkend="mesa"/>. Egalement,
quelques cartes demanderont qu'un Firmware soit disponible quand le pilote
du noyau est chargé. Le Firmware peut être obtenu depuis <ulink
url="&sources-anduin-http;/linux-firmware/"/>. Voir <xref
linkend="xorg-ati-firmware-kernel"/> dessous pour des firmwares
supplémentaires.
        </para>
      </note>

      <bridgehead renderas="sect4">Informations sur le paquet</bridgehead>
      <itemizedlist spacing="compact">
        <listitem>
          <para>
            Téléchargement (HTTP)&nbsp;: <ulink url="&xorg-ati-driver-download-http;"/>
          </para>
        </listitem>
        <listitem>
          <para>
            Téléchargement (FTP)&nbsp;: <ulink url="&xorg-ati-driver-download-ftp;"/>
          </para>
        </listitem>
        <listitem>
          <para>
            Somme de contrôle MD5 du téléchargement&nbsp;: &xorg-ati-driver-md5sum;
          </para>
        </listitem>
        <listitem>
          <para>
            Taille du téléchargement&nbsp;: &xorg-ati-driver-size;
          </para>
        </listitem>
        <listitem>
          <para>
            Estimation de l'espace disque requis&nbsp;: &xorg-ati-driver-buildsize;
          </para>
        </listitem>
        <listitem>
          <para>
            Estimation du temps de construction&nbsp;: &xorg-ati-driver-time;
          </para>
        </listitem>
      </itemizedlist>

      <bridgehead renderas="sect4">Téléchargements supplémentaires</bridgehead>
      <itemizedlist spacing="compact">
        <listitem>
          <para>
            Correctif requis&nbsp;: <ulink
url="&patch-root;/xf86-video-ati-&xorg-ati-driver-version;-upstream_fixes-1.patch"/>
          </para>
        </listitem>
      </itemizedlist>

      <bridgehead renderas="sect4">Dépendances de Xorg ATI Driver</bridgehead>

      <bridgehead renderas="sect5">Requises</bridgehead>
      <para role="required">
        <xref linkend="xorg-server"/> (recommandé pour construire en activant
glamor)
      </para>

      <note>
        <para>
          Glamor est requis pour les GPU Southern, Sea et Volcanic islands, et utilisé
par défaut dans tous les autres GPU R600 ou plus récent. Pour voir quel GPU
sont dans ces catégories, lisez <ulink url="&radeon-marketing-names;">
Decoder ring for engineering vs marketing names</ulink>.
        </para>
      </note>

      <para condition="html" role="usernotes">
        Notes utilisateur&nbsp;: <ulink url="&blfs-wiki;/xorg-ati-driver"/>
      </para>
    </sect3>

    <sect3 role="kernel" id="xorg-ati-driver-kernel">
      <title>Configuration du noyau</title>

      <para>
        Activez les options suivantes dans la configuration du noyau et recompilez
le noyau si nécessaire&nbsp;:
      </para>

<screen><literal>Device Drivers  ---&gt;
  Graphics support ---&gt;
   &lt;*&gt; Direct Rendering Manager (XFree86 ... support) ---&gt; [CONFIG_DRM]
   &lt;*&gt; ATI Radeon                                          [CONFIG_DRM_RADEON]</literal></screen>

      <indexterm zone="xorg-ati-driver xorg-ati-driver-kernel">
        <primary sortas="d-xorg-ati-driver">xorg-ati-driver</primary>
      </indexterm>
    </sect3>

    <sect3 role="kernel" id="xorg-ati-firmware-kernel">
      <title>Configuration du noyau pour des firmwares supplémentaires</title>

      <para>
        Si vous devez ajouter un micro-code, installez les fichiers puis pointez sur
eux dans la configuration du noyau et recompilez le noyau si
nécessaire. Pour trouver les micro-codes dont vous avez besoin, consultez
<ulink url="&radeon-marketing-names;">Decoder ring for engineering vs
marketing names</ulink>. Téléchargez les micro-codes pour votre carte qui
sont nommés ainsi&nbsp;:
<filename><replaceable>&lt;ENGINEERING_NAME&gt;</replaceable>_rlc.bin</filename>,
etc. Notez que pour les familles R600 et R700, les micro-codes génériques
<filename>R600_rlc.bin</filename> et <filename>R700_rlc.bin</filename> sont
nécessaires en plus du micro-code spécifique au modèle comme pour les
dernières générations vous devrez installer <filename>BTC_rlc.bin</filename>
en plus du micro-code spécifique au modèle. Suit un exemple pour une Radeon
HD6470, qui est basée sur un GPU «&nbsp;Northern Islands&nbsp;» avec une
carte réseau qui demande aussi le micro-code&nbsp;:
      </para>

<screen><literal>CONFIG_EXTRA_FIRMWARE="radeon/BTC_rlc.bin radeon/CAICOS_mc.bin radeon/CAICOS_me.bin
radeon/CAICOS_pfp.bin radeon/CAICOS_smc.bin rtl_nic/rtl8168e-3.fw"
CONFIG_EXTRA_FIRMWARE_DIR="/lib/firmware"</literal></screen>

     <note>
       <para>
         CONFIG_EXTRA_FIRMWARE doit être en une seule ligne. Il est montré sur deux
lignes pour la présentation seulement.
       </para>
     </note>

      <tip>
        <para>
          Vous pouvez vérifier la sortie de <command>dmesg</command> après le
démarrage pour voir les micro-codes manquants.
        </para>
      </tip>

      <para>
        Autrement, si vous changez CONFIG_DRM_RADEON à '=m' dans votre .config, le
micro-code peut être chargé automatiquement depuis /lib/firmware/radeon
quand il installe le module. Cela libère un peu de place, mais aussi
signifie que l'écran sera blanc pour un plus long moment avant que le
framebuffer n'apparaisse. Les distributions prennent cette approche car il
n'est pas pratique de spécifier tous les micro-codes possibles et le noyaux
serait excessivement gros.
      </para>

      <indexterm zone="xorg-ati-driver xorg-ati-firmware-kernel">
        <primary sortas="d-xorg-ati-firmware">xorg-ati-firmware</primary>
      </indexterm>
    </sect3>

    <sect3 role="installation">
      <title>Installation de Xorg ATI Driver</title>



      <!--
  Note: Fixed upstream, should be unneeded for versions gtr 19.1.0.
  Patch also includes the fix.

      <para>

        First, fix an issue exposed by GCC 10 and later:
      </para>

<screen><userinput>sed -e 's/miPointer/extern &amp;/' \
    -i src/drmmode_display.h</userinput></screen>
-->
<para>
        Tout d'abord, appliquez un correctif qui contient des corrections pour des
régressions de performances connues et des problèmes avec les prochaines
version de Xorg-Server.
      </para>

<screen><userinput remap="pre">patch -Np1 -i ../xf86-video-ati-&xorg-ati-driver-version;-upstream_fixes-1.patch</userinput></screen>

      <para>
        Installez <application>Xorg ATI Driver</application> en lançant les
commandes suivantes&nbsp;:
      </para>

<screen><userinput>./configure $XORG_CONFIG &amp;&amp;
make</userinput></screen>

      <para>
        Ce paquet n'est pas fourni avec une suite de tests.
      </para>

      <para>
        Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
      </para>

<!-- following is (now) automatically installed
install -v -m644 conf/10-radeon.conf \
  $XORG_PREFIX/share/X11/xorg.conf.d -->
<screen role="root"><userinput>make install</userinput></screen>

    </sect3>



    

    <!--
    <sect3 id="ati-glamor-accel">

      <title>Glamor Acceleration</title>

      <para>
        Glamor is an acceleration library which uses cards' 3D capabilities
        to accelerate 2D rendering. Glamor acceleration is either required
        or used by default for all R600 and later GPUs. To see which GPUs are
        in these categories, read the <ulink url="&radeon-marketing-names;">
        Decoder ring for engineering vs marketing names</ulink>.
      </para>

      <para>
        Please note
        that Glamor acceleration can be used with other chips as well, from the
        R300 onwards. On at least some Northern Islands chips it is beneficial.
      </para>

      <para>
        Glamor acceleration is not enabled by default for chipsets that don't
        use "radeonsi" Gallium3D driver. You have to use an
        <filename>xorg.conf</filename> file to enable it. To enable
        Glamor for cards other than "Southern Islands" and later, create the
        following file in
        <filename class="directory">${XORG_PREFIX}/share/X11/xorg.conf.d/</filename>
        as the <systemitem class="username">root</systemitem> user:
      </para>

<screen role="root"><userinput>cat &gt;&gt; ${XORG_PREFIX}/share/X11/xorg.conf.d/20-glamor.conf &lt;&lt; "EOF"
<literal>Section "Device"
        Identifier "radeon"
        Driver "ati"
        Option "AccelMethod" "glamor"
EndSection</literal>
EOF</userinput></screen>

    </sect3>-->
<!--
    <sect3 role="commands">

    <title>Command Explanations</title>


      <para>
        <command>install -v -m644 conf/10-radeon.conf ...</command>: this
        ensures that the radeon driver can be loaded automatically even if
        the ati wrapper driver has not been installed.
      </para>

    </sect3> -->
<sect3 role="content">
      <title>Contenu</title>

      <segmentedlist>
        <segtitle>Pilotes Xorg installés</segtitle>

        <seglistitem>
          <seg>
            ati_drv.so et radeon_drv.so
          </seg>
        </seglistitem>
      </segmentedlist>

      <variablelist>
        <bridgehead renderas="sect4">Descriptions courtes</bridgehead>
        <?dbfo list-presentation="list"?>
        <?dbhtml list-presentation="table"?>

        <varlistentry id="ati_drv">
          <term><filename class="libraryfile">ati_drv.so</filename></term>
          <listitem>
            <para>
              est un pilote enveloppe pour les cartes vidéo ATI qui détecte le matériel
vidéo ATI et charge le pilote radeon, mach64 ou r128 en fonction de la carte
vidéo utilisée
            </para>
            <indexterm zone="xorg-ati-driver ati_drv">
              <primary sortas="c-ati_drv">ati_drv.so</primary>
            </indexterm>
          </listitem>
        </varlistentry>

        <varlistentry id="radeon_drv">
          <term><filename class="libraryfile">radeon_drv.so</filename></term>
          <listitem>
            <para>
              est un pilote vidéo Xorg pour les cartes basées sur une ATI Radeon
            </para>
            <indexterm zone="xorg-ati-driver radeon_drv">
              <primary sortas="c-radeon_drv">radeon_drv.so</primary>
            </indexterm>
          </listitem>
        </varlistentry>

      </variablelist>

    </sect3>

  </sect2>
