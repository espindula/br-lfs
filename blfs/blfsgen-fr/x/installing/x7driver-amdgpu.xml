<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY radeon-wiki "http://wiki.x.org/wiki/RadeonFeature">
  <!ENTITY radeon-marketing-names "&radeon-wiki;#decoderringforengineeringvsmarketingnames">

  <!ENTITY xorg-amdgpu-driver-version "21.0.0">

  <!ENTITY xorg-amdgpu-driver-download-http "&xorg-download-http;/driver/xf86-video-amdgpu-&xorg-amdgpu-driver-version;.tar.bz2">
  <!ENTITY xorg-amdgpu-driver-download-ftp  "&xorg-download-ftp;/driver/xf86-video-amdgpu-&xorg-amdgpu-driver-version;.tar.bz2">
  <!ENTITY xorg-amdgpu-driver-md5sum        "61a4af51082a58c63af8970b06c3f4be">
  <!ENTITY xorg-amdgpu-driver-size          "440&nbsp;Ko">
  <!ENTITY xorg-amdgpu-driver-buildsize     "6.0 Mo">
  <!ENTITY xorg-amdgpu-driver-time          "moins de 0.1 SBU">
]>

  
  <!-- Begin Xorg AMDGPU Driver -->
<sect2 id="xorg-amdgpu-driver" xreflabel="Xorg AMDGPU Driver-&xorg-amdgpu-driver-version;">

  <sect2info>
<date>$Date$</date></sect2info>

    <title>Xorg AMDGPU Driver-&xorg-amdgpu-driver-version;</title>

    <indexterm zone="xorg-amdgpu-driver">
      <primary sortas="a-xorg-amdgpu-driver">xorg-amdgpu-driver</primary>
    </indexterm>

    <sect3 role="package">
      <title>Introduction à Xorg AMDGPU Driver</title>

      <para>
        The <application>Xorg AMDGPU Driver</application> package contains the X.Org
Video Driver for newer AMD Radeon video cards and newer AMD-CPUs with
integrated graphics (APUs). This includes video cards starting with Volcanic
Islands.  It can also be used for Southern and Sea Islands if the
experimental support was enabled in the kernel.
      </para>

      &lfs110a_checked;

      <note>
        <para>
          For Direct Rendering to work, you need to enable the radeonsi Gallium driver
at <xref linkend="mesa"/> build time. Also, all cards and newer APUs require
Firmware to be available when the kernel driver is loaded.  Firmware can be
obtained from <ulink url="&sources-anduin-http;/linux-firmware/"/>.  See
<xref linkend="xorg-amdgpu-firmware-kernel"/> below for additional firmware.
        </para>
      </note>

      <bridgehead renderas="sect4">Informations sur le paquet</bridgehead>
      <itemizedlist spacing="compact">
        <listitem>
          <para>
            Téléchargement (HTTP)&nbsp;: <ulink
url="&xorg-amdgpu-driver-download-http;"/>
          </para>
        </listitem>
        <listitem>
          <para>
            Téléchargement (FTP)&nbsp;: <ulink url="&xorg-amdgpu-driver-download-ftp;"/>
          </para>
        </listitem>
        <listitem>
          <para>
            Somme de contrôle MD5 du téléchargement&nbsp;: &xorg-amdgpu-driver-md5sum;
          </para>
        </listitem>
        <listitem>
          <para>
            Taille du téléchargement&nbsp;: &xorg-amdgpu-driver-size;
          </para>
        </listitem>
        <listitem>
          <para>
            Estimation de l'espace disque requis&nbsp;: &xorg-amdgpu-driver-buildsize;
          </para>
        </listitem>
        <listitem>
          <para>
            Estimation du temps de construction&nbsp;: &xorg-amdgpu-driver-time;
          </para>
        </listitem>
      </itemizedlist>

      <bridgehead renderas="sect4">Dépendances de Xorg AMDGPU Driver</bridgehead>

      <bridgehead renderas="sect5">Requises</bridgehead>
      <para role="required">
        <xref linkend="xorg-server"/> (doit être construit avec glamor d'activé)
      </para>

      <para condition="html" role="usernotes">
        Notes utilisateur&nbsp;: <ulink url="&blfs-wiki;/xorg-amdgpu-driver"/>
      </para>
    </sect3>

    <sect3 role="kernel" id="xorg-amdgpu-driver-kernel">
      <title>Configuration du noyau</title>

      <para>
        Activez les options suivantes dans la configuration du noyau et recompilez
le noyau si nécessaire&nbsp;:
      </para>


<screen><!-- Editor note: CONFIG_DRM_AMDGPU_SI available in 4.9+ -->
<literal>Device Drivers  ---&gt;
  Graphics support ---&gt;
   &lt;*&gt; Direct Rendering Manager (XFree86 ... support) ---&gt; [CONFIG_DRM]
   &lt;*/M&gt; AMD GPU                                           [CONFIG_DRM_AMDGPU]
    &lt; /*&gt; Enable amdgpu support for SI parts               [CONFIG_DRM_AMDGPU_SI]
    &lt; /*&gt; Enable amdgpu support for CIK parts              [CONFIG_DRM_AMDGPU_CIK]</literal></screen>

      <para>
        Les deux dernières options activent le support expérimental de GPU AMD
«&nbsp;Southern Islands&nbsp;» et «&nbsp;Sea Islands&nbsp;» pour qu'ils
puissent être utilisés par ce pilote. Remarquez que le support est indiqué
comme expérimental et désactivé par défaut. <xref
linkend="xorg-ati-driver"/> devrait être utilisé pour ces GPU.
      </para>

      <indexterm zone="xorg-amdgpu-driver xorg-amdgpu-driver-kernel">
        <primary sortas="d-xorg-amdgpu-driver">xorg-amdgpu-driver</primary>
      </indexterm>
    </sect3>

    <sect3 role="kernel" id="xorg-amdgpu-firmware-kernel">
      <title>Configuration du noyau et microprogramme supplémentaire</title>

      <para>
        Si vous avez besoin du microprogramme, installez le ou les fichiers et
pointez vers eux dans la configuration du noyau, puis recompilez le noyau au
besoin. Pour trouver les microprogrammes nécessaires, consultez le <ulink
url="&radeon-marketing-names;">Decoder ring for engineering vs marketing
names</ulink>. Télécharger tout microprogramme pour votre carte qui
s'appelle
<filename><replaceable>&lt;ENGINEERING_NAME&gt;</replaceable>_rlc.bin</filename>,
etc. Ci-dessous se trouve un exemple pour le GPU Radeon R7 M340, dont le nom
de code est Iceland/Topaz, avec une carte réseau qui nécessite aussi un
microprogramme&nbsp;:
      </para>

<screen><literal>CONFIG_EXTRA_FIRMWARE="amdgpu/topaz_ce.bin amdgpu/topaz_k_smc.bin amdgpu/topaz_mc.bin
                       amdgpu/topaz_me.bin amdgpu/topaz_mec2.bin amdgpu/topaz_mec.bin
                       amdgpu/topaz_pfp.bin amdgpu/topaz_rlc.bin amdgpu/topaz_sdma1.bin
                       amdgpu/topaz_sdma.bin amdgpu/topaz_smc.bin rtl_nic/rtl8168e-3.fw"
CONFIG_EXTRA_FIRMWARE_DIR="/lib/firmware"</literal></screen>

      <note>
        <para>
          CONFIG_EXTRA_FIRMWARE devrait être sur une seule ligne. Elle est montrée sur
plusieurs lignes uniquement pour la présentation.
        </para>
      </note>

      <tip>
        <para>
          Vous pouvez vérifier la sortie de <command>dmesg</command> après le
démarrage pour voir les microprogrammes manquant.
        </para>
      </tip>

      <para>
        Autrement, si vous changez CONFIG_DRM_AMDGPU à '=m' dans le .confg de votre
noyau Linux, le microprogramme peut être chargé automatiquement depuis
/lib/firmware/amdgpu lorsqu'il installe le module. Ceci libère un peu
d'espace, mais signifie aussi que l'écran sera vide plus longtemps avant que
le framebuffer n'apparaisse. Les distributions prennent cette approche car
il n'est pas envisageable de spécifier chaque microprogramme possible et le
noyau serait beaucoup trop gros.
      </para>

      <indexterm zone="xorg-amdgpu-driver xorg-amdgpu-firmware-kernel">
        <primary sortas="d-xorg-amdgpu-firmware">xorg-amdgpu-firmware</primary>
      </indexterm>
    </sect3>

    <sect3 role="installation">
      <title>Installation de Xorg AMDGPU Driver</title>

      <para>
        Installez <application>Xorg AMDGPU Driver</application> en lançant les
commandes suivantes&nbsp;:
      </para>

<screen><userinput>./configure $XORG_CONFIG &amp;&amp;
make</userinput></screen>

      <para>
        Ce paquet n'est pas fourni avec une suite de tests.
      </para>

      <para>
        Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
      </para>

<screen role="root"><userinput>make install</userinput></screen>
    </sect3>

    <sect3 role="content">
      <title>Contents</title>

      <segmentedlist>
        <segtitle>Pilotes Xorg installés</segtitle>

        <seglistitem>
          <seg>
            amdgpu_drv.so
          </seg>
        </seglistitem>
      </segmentedlist>

      <variablelist>
        <bridgehead renderas="sect4">Descriptions courtes</bridgehead>
        <?dbfo list-presentation="list"?>
        <?dbhtml list-presentation="table"?>

        <varlistentry id="amdgpu_drv">
          <term><filename class="libraryfile">amdgpu_drv.so</filename></term>
          <listitem>
            <para>
              est un pilote vidéo pour xorg qui supporte les dernières cartes graphiques
d'AMD
            </para>
            <indexterm zone="xorg-amdgpu-driver amdgpu_drv">
              <primary sortas="c-amdgpu_drv">amdgpu_drv.so</primary>
            </indexterm>
          </listitem>
        </varlistentry>

      </variablelist>

    </sect3>

  </sect2>
