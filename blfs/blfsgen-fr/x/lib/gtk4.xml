<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY gtk4-download-http "&gnome-download-http;/gtk/&gtk4-minor;/gtk-&gtk4-version;.tar.xz">
  <!ENTITY gtk4-download-ftp  "&gnome-download-ftp;/gtk/&gtk4-minor;/gtk-&gtk4-version;.tar.xz">
  <!ENTITY gtk4-md5sum        "69372ddb998c125c3a04c44b8c68b339">
  <!ENTITY gtk4-size          "16&nbsp;Mo">
  <!ENTITY gtk4-buildsize     "562&nbsp;Mo (avec la doc, plus 29&nbsp;Mo pour les tests)">
  <!ENTITY gtk4-time          "1,3&nbsp;SBU (avec parallélisme = 4 et avec la doc, plus 0,6&nbsp;SBU pour
les tests)">
]>

<sect1 id="gtk4" xreflabel="GTK-&gtk4-version;">
  <?dbhtml filename="gtk4.html"?>

  <title>GTK-&gtk4-version;</title>

  <indexterm zone="gtk4">
    <primary sortas="a-gtk4">GTK-4</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à GTK 4</title>

    <para>
      Le paquet <application>GTK 4</application> contient des bibliothèques
utilisées pour créer des interfaces utilisateur graphiques pour les
applications.
    </para>

    &lfs120_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&gtk4-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP)&nbsp;: <ulink url="&gtk4-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5&nbsp;: &gtk4-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &gtk4-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &gtk4-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &gtk4-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de GTK 4</bridgehead>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
      <xref linkend="fribidi"/>, <xref linkend="gdk-pixbuf"/>, <xref
linkend="graphene"/>, <xref linkend="iso-codes"/>, <xref
linkend="libepoxy"/>, <xref linkend="libxkbcommon"/>, <xref
linkend="pango"/>, <xref linkend="pygobject3"/> et <xref
linkend="wayland-protocols"/>
    </para>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      <xref linkend="adwaita-icon-theme"/> (par défaut pour certaines clés de
configuration de gtk4), <xref linkend="gst10-plugins-bad"/>, <xref
role='runtime' linkend="gst10-plugins-good"/> (exécution, construit avec
<xref role='nodep' linkend='libvpx'/>), <xref linkend="hicolor-icon-theme"/>
(requis pour les tests et pour la configuration par défaut) et <xref
linkend="librsvg"/>
    </para>

    <bridgehead renderas="sect4">Recommandées (requises pour construire GNOME)</bridgehead>
    <para role="recommended">
      <xref linkend="gobject-introspection"/>
    </para>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      <xref linkend="colord"/>, <xref linkend="cups"/>, <xref
linkend="docutils"/>, <xref linkend="ffmpeg"/> (construit avec <xref
role='nodep' linkend='libvpx'/>), <xref linkend="gi-docgen"/>, <xref
role="runtime" linkend="highlight"/> (exécution, utilisé seulement par
<command>gtk4-demo</command> pour la coloration syntaxique du code source
des exemples), <xref linkend="libcloudproviders"/>, <xref linkend="sassc"/>,
<xref linkend="tracker3"/>, <ulink
url="https://github.com/OpenPrinting/cpdb-libs">cpbd</ulink> et <ulink
url="https://vulkan.lunarg.com/sdk/home">vulkan</ulink>
    </para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de GTK 4</title>

    <para>
      Tout d'abord, appliquez quelques changements amonts&nbsp;:
    </para>

<screen><userinput>sed -e '/glib-object.h/a #include &lt;gdk/gdk.h&gt;'        \
    -e '/ gtk_printer_option/i GDK_AVAILABLE_IN_ALL'  \
    -e '/\*gtk_printer_option/i GDK_AVAILABLE_IN_ALL' \
    -i.orig gtk/print/gtkprinteroptionprivate.h</userinput></screen>

    <para>
      Installez <application>GTK 4</application> en exécutant les commandes
suivantes&nbsp;:
    </para>

<screen><userinput>mkdir build &amp;&amp;
cd    build &amp;&amp;

meson setup --prefix=/usr           \
            --buildtype=release     \
            -Dbroadway-backend=true \
            -Dintrospection=enabled \
            .. &amp;&amp;
ninja</userinput></screen>

    <para>
      Si vous avez installé <xref linkend='gi-docgen'/> et souhaitez construire la
documentation de l'API de ce paquet, exécutez&nbsp;:
    </para>

<screen remap='doc'><userinput>sed "s@'doc'@&amp; / 'gtk-&gtk4-version;'@" -i ../docs/reference/meson.build &amp;&amp;
meson configure -Dgtk_doc=true                                   &amp;&amp;
ninja</userinput></screen>

    <para>
      Pour lancer les tests, lancez&nbsp;: <command>dbus-run-session meson test
--setup x11</command>. Si vous êtes dans une session Wayland, remplacez x11
par wayland. Neuf tests sont connus pour échouer si <ulink
url="https://gitlab.gnome.org/GNOME/cantarell-fonts">les polices
Cantarell</ulink> ne sont pas installées. Plusieurs tests échoueront si
<filename>~/.config/gtk-4.0/settings.ini</filename> existe et que la ligne
gtk-modules n'est pas commentée. Sur les systèmes avec une carte graphique
NVIDIA, les tests peuvent prendre beaucoup plus de temps que le temps de
test suggéré.
    </para>


    <!-- [pierre]: 4.6.0, wayland: 727 ok; 2 Expected Fail;  1 Fail; 1 Skipped
     [bdubbs]: 4.6.3, x11,     724 OK, 2 Expected Fail, 12 Fail. 1 Skipped
     [pierre]: 4.6.6, wayland, 738 OK, 2 Expected Fail,  1 Fail. 1 Skipped
     [pierre]: 4.6.7, wayland, 737 OK, 2 Expected Fail,  1 Fail. 1 Skipped. 1 Timeout
     [bdubbs]: 4.6.7, x11,     758 OK, 2 Expected Fail,  9 Fail. 1 Skipped. 1 Timeout
     [pierre]: 4.8.1, wayland, 765 OK, 2 Expected Fail,  2 Fail. 1 Skipped
     [bdubbs]: 4.8.2, x11,     753 OK, 2 Expected Fail, 14 Fail. 1 Skipped
     [pierre]: 4.8.3, wayland, 760 OK, 2 Expected Fail,  5 Fail. 3 Skipped
     [bdubbs]: 4.10.0, x11,    701 OK, 0 Expected Fail, 15 Fail. 1 Skipped, 2 Timeout
               above over ssh
     [bdubbs]: 4.10.0, x11,    712 OK, 0 Expected Fail,  6 Fail. 1 Skipped, 0 Timeout
               above on native x11
     [bdubbs]: 4.12.0, x11,   1453 OK, 0 Expected Fail,  9 Fail. 5 Skipped, 0 Timeout
               above on native x11
-->
<para>
      Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>ninja install</userinput></screen>
  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
      href="../../xincludes/meson-buildtype-release.xml"/>

    <para>
      <parameter>-Dbroadway-backend=true</parameter>&nbsp;: ce paramètre active le
moteur HTML5 de GDK.
    </para>

    <para>
      <parameter>-Dintrospection=enabled</parameter>&nbsp;: ce paramètre active
l'utilisation de <xref linkend='gobject-introspection'/> pour générer les
liaisons GIR de ce paquet. Ces liaisons sont requises par GNOME.
    </para>

    <para>
      <option>-Dcloudproviders=enabled</option>&nbsp;: utilisez ce paramètre si
vous avez installé <xref linkend="libcloudproviders" role="nodep"/> et
souhaitez activer la prise en charge des fournisseurs de cloud dans les
fenêtres d'explorateur de fichiers.
    </para>

    <para>
      <option>-Dsysprof=enabled</option>&nbsp;: utilisez ce paramètre si vous avez
installé <xref linkend="sysprof"/> et souhaitez activer la prise en charge
du traçage des applications GTK4.
    </para>

    <para>
      <option>-Dtracker=enabled</option>&nbsp;: utilisez ce paramètre si vous avez
installé <xref linkend="tracker3"/> et souhaitez l'utiliser pour les
fonctions de recherche dans l'explorateur de fichiers.
    </para>

    <para>
      <option>-Dcolord=enabled</option>&nbsp;: utilisez ce paramètre si vous avez
installé <xref linkend="colord"/> et souhaitez utiliser colord avec le
moteur d'impression de CUPS.
    </para>

    <para>
      <option>-Dman-pages=true</option>&nbsp;: utilisez cette option si vous avez
installé <xref linkend='docutils'/> et souhaitez générer les pages de
manuel.
    </para>

  </sect2>

  <sect2 role="configuration">
    <title>Configurer GTK 4</title>

    <sect3 id="gtk4-config">
      <title>Fichiers de configuration</title>
      <para>
        <filename>~/.config/gtk-4.0/settings.ini</filename> et
<filename>/usr/share/gtk-4.0/settings.ini</filename>
      </para>

      <indexterm zone="gtk4 gtk4-config">
        <primary sortas="e-AA.home-gtk4-settings.ini">~/.config/gtk-4.0/settings.ini</primary>
      </indexterm>

      <indexterm zone="gtk4 gtk4-config">
        <primary
        sortas="e-usr-share-path-settings.ini">/usr/share/gtk-4.0/settings.ini</primary>
      </indexterm>
    </sect3>

    <sect3><title>Informations sur la configuration</title>

      <para>
        Les thèmes <application>GTK 4</application> changent l'apparence d'une
application <application>GTK 4</application>. Vous pouvez utiliser un thème
d'icônes pour changer les icônes qui apparaissent dans la barre d'outils
d'une application. Si vous avez installé un thème <application>GTK
4</application> (p. ex. le thème Adwaita construit dans <application>GTK
4</application>), un thème d'icônes (comme <xref linkend="oxygen-icons5"/>)
ou une police (<xref linkend="dejavu-fonts"/>), vous pouvez indiquer vos
préférences dans <filename>~/.config/gtk-4.0/settings.ini</filename>, ou le
fichier de configuration global par défaut (en tant qu'utilisateur
<systemitem class="username">root</systemitem>), dans
<filename>/usr/share/gtk-4.0/settings.ini</filename>. Pour l'utilisateur
local, voici un exemple&nbsp;:
      </para>

<screen><userinput>mkdir -pv ~/.config/gtk-4.0
cat &gt; ~/.config/gtk-4.0/settings.ini &lt;&lt; "EOF"
<literal>[Settings]
gtk-theme-name = <replaceable>Adwaita</replaceable>
gtk-icon-theme-name = <replaceable>oxygen</replaceable>
gtk-font-name = <replaceable>DejaVu Sans 12</replaceable>
gtk-cursor-theme-size = <replaceable>18</replaceable>
gtk-xft-antialias = <replaceable>1</replaceable>
gtk-xft-hinting = <replaceable>1</replaceable>
gtk-xft-hintstyle = <replaceable>hintslight</replaceable>
gtk-xft-rgba = <replaceable>rgb</replaceable>
gtk-cursor-theme-name = <replaceable>Adwaita</replaceable></literal>
EOF</userinput></screen>

       <para>
         Il y a de nombreuses clés de paramètres, certaines avec des valeurs par
défaut. Vous pouvez les trouver sur <ulink
url="https://developer.gnome.org/gtk4/stable/GtkSettings.html">Settings: GTK
4 Reference Manual</ulink>.
       </para>

    </sect3>
  </sect2>

  <sect2 role="content">
    <title>Contents</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>
          gtk4-broadwayd, gtk4-builder-tool, gtk4-demo, gtk4-demo-application,
gtk4-encode-symbolic-svg, gtk4-icon-browser, gtk4-launch, gtk4-node-editor,
gtk4-print-editor, gtk4-query-settings, gtk4-update-icon-cache et
gtk4-widget-factory
        </seg>
        <seg>
          libgtk-4.so
        </seg>
        <seg>
          /usr/include/gtk-4.0, /usr/lib/gtk-4.0 et /usr/share/gtk-4.0
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?> <?dbhtml list-presentation="table"?>

      <varlistentry id="gtk4-broadwayd">
        <term><command>gtk4-broadwayd</command></term>
        <listitem>
          <para>
            fournit la prise en charge de l'affichage des applications GTK 4 dans un
navigateur web avec HTML5 et les web sockets
          </para>
          <indexterm zone="gtk4 gtk4-broadwayd">
            <primary sortas="b-gtk4-broadwayd">gtk4-broadwayd</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gtk4-builder-tool">
        <term><command>gtk4-builder-tool</command></term>
        <listitem>
          <para>
            effectue diverses opération sur les fichiers .ui de GtkBuilder
          </para>
          <indexterm zone="gtk4 gtk4-builder-tool">
            <primary sortas="b-gtk4-builder-tool">gtk4-builder-tool</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gtk4-demo">
        <term><command>gtk4-demo</command></term>
        <listitem>
          <para>
            est un simple programme qui démontre certaines taches qu'on peut faire avec
GTK 4
          </para>
          <indexterm zone="gtk4 gtk4-demo">
            <primary sortas="b-gtk4-demo">gtk4-demo</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gtk4-demo-application">
        <term><command>gtk4-demo-application</command></term>
        <listitem>
          <para>
            est une simple application GTK 4 utile pour les tests
          </para>
          <indexterm zone="gtk4 gtk4-demo-application">
            <primary sortas="b-gtk4-demo-application">gtk4-demo-application</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gtk4-encode-symbolic-svg">
        <term><command>gtk4-encode-symbolic-svg</command></term>
        <listitem>
          <para>
            convertit les icônes SVG symboliques en fichiers PNG spéciaux. GTK 4 peut
charger et recolorer ces PNG, comme les SVG originaux, mais il les charge
bien plus rapidement.
          </para>
          <indexterm zone="gtk4 gtk4-encode-symbolic-svg">
            <primary sortas="b-gtk4-encode-symbolic-svg">gtk4-encode-symbolic-svg</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gtk4-icon-browser">
        <term><command>gtk4-icon-browser</command></term>
        <listitem>
          <para>
            est un utilitaire pour explorer les icônes du thème d'icônes actuel. Il
montre les icônes dans plusieurs tailles, leurs variantes symboliques si
elles sont disponibles, ainsi qu'une description de l'icône et de son
contexte.
          </para>
          <indexterm zone="gtk4 gtk4-icon-browser">
            <primary sortas="b-gtk4-icon-browser">gtk4-icon-browser</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gtk4-launch">
        <term><command>gtk4-launch</command></term>
        <listitem>
          <para>
            lance une application avec un nom donné. Le nom doit correspondre au nom de
fichier .desktop de l'application (tel qu'il apparaît dans <filename
class="directory">/usr/share/applications</filename>), avec ou sans
l'extension «&nbsp;.desktop&nbsp;»
          </para>
          <indexterm zone="gtk4 gtk-launch">
            <primary sortas="b-gtk4-launch">gtk4-launch</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gtk4-node-editor">
        <term><command>gtk4-node-editor</command></term>
        <listitem>
          <para>
            est un utilitaire pour montrer et modifier les fichiers de nœuds de
rendu. Ces fichiers peuvent s'obtenir par exemple avec l'inspecteur GTK
          </para>
          <indexterm zone="gtk4 gtk4-node-editor">
            <primary sortas="b-gtk4-node-editor">gtk4-node-editor</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gtk4-print-editor">
        <term><command>gtk4-print-editor</command></term>
        <listitem>
          <para>
            est un simple programme pour démontrer l'impression avec les applications
GTK 4
          </para>
          <indexterm zone="gtk4 gtk4-print-editor">
            <primary sortas="b-gtk4-print-editor">gtk4-print-editor</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gtk4-query-settings">
        <term><command>gtk4-query-settings</command></term>
        <listitem>
          <para>
            fournit une liste complète de tous les paramètres liés à GTK 4
          </para>
          <indexterm zone="gtk4 gtk4-query-settings">
            <primary sortas="b-gtk4-query-settings">gtk4-query-settings</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gtk4-update-icon-cache">
        <term><command>gtk4-update-icon-cache</command></term>
        <listitem>
          <para>
            est un utilitaire de mise en cache des thèmes d'icônes qui crée des fichiers
de cache utilisables avec mmap pour les thèmes d'icônes
          </para>
          <indexterm zone="gtk4 gtk4-update-icon-cache">
            <primary sortas="b-gtk4-update-icon-cache">gtk4-update-icon-cache</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gtk4-widget-factory">
        <term><command>gtk4-widget-factory</command></term>
        <listitem>
          <para>
            est un programme pour visualiser les thèmes GTK 4 et les widgets
          </para>
          <indexterm zone="gtk4 gtk4-widget-factory">
            <primary sortas="b-gtk4-widget-factory">gtk4-widget-factory</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libgtk-4">
        <term><filename class="libraryfile">libgtk-4.so</filename></term>
        <listitem>
          <para>
            contient les fonctions qui fournissent une API implémentant des interfaces
utilisateurs graphiques
          </para>
          <indexterm zone="gtk4 libgtk-4">
            <primary sortas="c-libgtk-4">libgtk-4.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect2>
</sect1>
