<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY lxdm-download-http "&sourceforge-dl;/lxdm/lxdm-&lxdm-version;.tar.xz">
  <!ENTITY lxdm-download-ftp  "">
  <!ENTITY lxdm-md5sum        "061caae432634e6db38bbdc84bc6ffa0">
  <!ENTITY lxdm-size          "236 Ko">
  <!ENTITY lxdm-buildsize     "5.6 Mo">
  <!ENTITY lxdm-time          "moins de 0.1 SBU">
]>

<sect1 id="lxdm" xreflabel="lxdm-&lxdm-version;">
  <?dbhtml filename="lxdm.html"?>

  <sect1info>
<date>$Date$</date></sect1info>

  <title>lxdm-&lxdm-version;</title>

  <indexterm zone="lxdm">
    <primary sortas="a-lxdm">lxdm</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à LXDM</title>

    <para>
      <application>LXDM</application> est un gestionnaire d'affichage léger pour
le bureau <application>LXDE</application>. Il peut également être utilisé
comme une alternative aux autres gestionnaires d'affichage comme
<application>GDM</application> de <application>GNOME</application> ou
<application>LightDM</application>.
    </para>

    &lfs110_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&lxdm-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP)&nbsp;: <ulink url="&lxdm-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5 du téléchargement&nbsp;: &lxdm-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &lxdm-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &lxdm-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &lxdm-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de LXDM</bridgehead>

    <bridgehead renderas="sect4">Requises</bridgehead>
    <para role="required">
      <xref linkend="gtk2"/>, <xref linkend="iso-codes"/> et <xref role="runtime"
linkend="librsvg"/> (à l'exécution, pour le fond d'écran du thème par
défaut)
    </para>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
     <xref linkend="lxsession"/> (pour <application>lxpolkit</application>) ou
<xref role="nodep" linkend="polkit-gnome"/>
    </para>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      <xref linkend="gtk3"/>
    </para>

    <para condition="html" role="usernotes">
      Notes utilisateur&nbsp;: <ulink url="&blfs-wiki;/lxdm"/>
    </para>
  </sect2>

  <sect2 role="installation">
    <title>Installation de LXDM</title>

    <para>
      D'abord quelques corrections.
    </para>

<screen><userinput>cat &gt; pam/lxdm &lt;&lt; "EOF"
<literal># Begin /etc/pam.d/lxdm

auth     requisite      pam_nologin.so
auth     required       pam_env.so
auth     required       pam_succeed_if.so uid >= 1000 quiet
auth     include        system-auth

account  include        system-account

password include        system-password

session  required       pam_limits.so
session  include        system-session

# End /etc/pam.d/lxdm</literal>
EOF

sed -i 's:sysconfig/i18n:profile.d/i18n.sh:g' data/lxdm.in &amp;&amp;
sed -i 's:/etc/xprofile:/etc/profile:g' data/Xsession &amp;&amp;
sed -e 's/^bg/#&amp;/'        \
    -e '/reset=1/ s/# //' \
    -e 's/logou$/logout/' \
    -e "/arg=/a arg=$XORG_PREFIX/bin/X" \
    -i data/lxdm.conf.in</userinput></screen>

    <para>
      Installez <application>LXDM</application> en lançant les commandes
suivantes&nbsp;:
    </para>

<screen revision="sysv"><userinput>./configure --prefix=/usr     \
            --sysconfdir=/etc \
            --with-pam        \
            --with-systemdsystemunitdir=no &amp;&amp;
make</userinput></screen>

<screen revision="systemd"><userinput>./configure --prefix=/usr     \
            --sysconfdir=/etc \
            --with-pam        \
            --with-systemdsystemunitdir=/lib/systemd/system &amp;&amp;
make</userinput></screen>

    <para>
      Ce paquet n'est pas fourni avec une suite de tests.
    </para>

    <para>
      Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>make install</userinput></screen>

  </sect2>

  
  <!--Optional section-->
<sect2 role="commands">
    <title>Explication des commandes</title>

    <para>
      <command>cat &gt; pam/lxdm &lt;&lt; "EOF" ...</command>&nbsp;: Remplacez le
<filename>/etc/pam.d/lxdm</filename> par défaut par un autre approprié pour
BLFS.
    </para>

    <para>
      <command>sed -i ... data/lxdm.conf.in</command>&nbsp;: modifications dans la
configuration par défaut. (1) Corrige le fond vers celui par défaut; (2)
redémarre X quand la session est fermée: (3) coquille et (4) inclu
<envar>XORG_PREFIX</envar>, qui peut être différent de <filename
class="directory">/usr</filename>.
    </para>

    <para>
      <command>sed -i ... data/Xsession</command>&nbsp;: Utilise
<filename>/etc/profile</filename>, à la place d'un autre fichier, en accord
avec le standard BLFS.
    </para>

    <para>
      <command>sed -i ... data/lxdm.in</command>&nbsp;: Corrige les locales de
l'accueil selon la spécification BLFS
    </para>

    <para>
      <parameter>--with-pam</parameter>&nbsp;: Cette option active l'utilisation
de l'authentification pam.
    </para>

    <para revision="sysv">
      <parameter>--with-systemdsystemunitdir=no</parameter>&nbsp;: BLFS ne
supporte pas systemd.
    </para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de LXDM</title>

   <sect3 id="lxdm-config">
      <title>Fichiers de configuration</title>

      <para>
        <filename>/etc/lxdm/lxdm.conf</filename>
      </para>

      <indexterm zone="lxdm lxdm-config">
        <primary sortas="e-etc-lxdm-lxdm.conf">/etc/lxdm/lxdm.conf</primary>
      </indexterm>

    </sect3>

   <sect3 id="lxdm-init">
      <title><phrase revision="sysv">Script de démarrage</phrase> <phrase
revision="systemd">Unité Systemd</phrase></title>

      <indexterm zone="lxdm lxdm-init">
        <primary sortas="f-lxdm">lxdm</primary>
      </indexterm>

      <para revision="sysv">
        Pour démarrer <command>lxdm</command> automatiquement quand le système passe
au niveau d'exécution 5, installez le script
<filename>/etc/rc.d/init.d/xdm</filename> et le fichier de configuration
<filename>/etc/sysconfig/xdm</filename> inclus dans le paquet <xref
linkend="bootscripts"/> et ajustez <filename>/etc/inittab</filename> en
lançant en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
      </para>

<screen role="root" revision="sysv"><userinput>make install-lxdm</userinput></screen>

      <para revision="systemd">
        Pour démarrer <application>LXDM</application> au démarrage, exécutez la
commande suivante en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
      </para>

<screen role="root" revision="systemd"><userinput>systemctl enable lxdm</userinput></screen>

    </sect3>

    <sect3>
      <title>Informations sur la configuration</title>

      <para>
        Le fichier de configuration du démon LXDM
(<filename>/etc/lxdm/lxdm.conf</filename>) inclut les options numlock
on/off, background image (bg), session, etc. Vous pouvez initialiser une
session par défaut en dé-commentant la ligne&nbsp;:
session=/usr/bin/startlxde et en remplaçant <command>startlxde</command>
avec la session de votre choix. Pour <application>GNOME</application>
session=/usr/bin/gnome-session. Pour <application>OPENBOX</application>
session=/usr/bin/openbox-session et pour <application>XFCE</application>
session=/usr/bin/startxfce4.
      </para>

      <para>
        Il est aussi possible d'initialiser une session préférée d'un utilisateur en
éditant le fichier ~/.dmrc pour chaque utilisateur et en ajoutant&nbsp;:
<screen><literal>[Desktop]
        Session=xfce</literal></screen>
      </para>

      <para>
        Vous pouvez remplacer l'avatar de base par défaut dans l'écran de bienvenue
par une autre image représentant votre utilisateur Pour cela, copiez ou liez
l'image désirée de votre répertoire home, avec le nom
<filename>.face</filename>.
      </para>

    </sect3>

    <sect3 revision="sysv">
      <title>Démarrage de lxdm</title>

      <para>
        Vous pouvez démarrer manuellement <command>lxdm</command> en tant
qu'utilisateur <systemitem class="username">root</systemitem>&nbsp;:
      </para>

<screen role="root"><userinput>telinit 5</userinput></screen>

      <para>
        Autrement, vous pouvez être au niveau d'exécution 5 en permanence, ce qui
démarre <command>lxdm</command> soit automatiquement, en modifiant
<filename>/etc/inittab</filename>. En tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
      </para>

<screen role="root"><userinput>cp -v /etc/inittab{,-orig} &amp;&amp;
sed -i '/initdefault/ s/3/5/' /etc/inittab</userinput></screen>

      <note>
        <para>
          Un script important, exécuté après le login, est
<filename>/etc/lxdm/Xsession</filename>, que nous avons corrigé pour coller
aux spécifications de BLFS.
        </para>
      </note>

    </sect3>

  </sect2>
  
  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>
          lxdm, lxdm-binary et lxdm-config
        </seg>
        <seg>
          Aucune
        </seg>
        <seg>
          /etc/lxdm et /usr/share/lxdm
        </seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="lxdm-prog">
        <term><command>lxdm</command></term>
        <listitem>
          <para>
            est un script pour exécuter <command>lxdm-binary</command>.
          </para>
          <indexterm zone="lxdm lxdm-prog">
            <primary sortas="b-lxdm">lxdm</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="lxdm-binary">
        <term><command>lxdm-binary</command></term>
        <listitem>
          <para>
             est le gestionnaire d'affichage courant; nécessite d'être exécuté avec
l'option <option>-d</option> pour lancer en démon.
          </para>
          <indexterm zone="lxdm lxdm-binary">
            <primary sortas="b-lxdm-binary">lxdm-binary</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="lxdm-config-prog">
        <term><command>lxdm-config</command></term>
        <listitem>
          <para>
            est un programme de personnalisation graphique.
          </para>
          <indexterm zone="lxdm lxdm-config">
            <primary sortas="b-lxdm">lxdm</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
