<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY fetchmail-download-http "&sourceforge-dl;/fetchmail/fetchmail-&fetchmail-version;.tar.xz">
  <!ENTITY fetchmail-download-ftp  "">
  <!ENTITY fetchmail-md5sum        "fbeab300ed54b973066d651132e80592">
  <!ENTITY fetchmail-size          "1.3&nbsp;Mo">
  <!ENTITY fetchmail-buildsize     "17 MB including tests">
  <!ENTITY fetchmail-time          "0,1 SBU dont les tests">
]>

<sect1 id="fetchmail" xreflabel="fetchmail-&fetchmail-version;">
  <?dbhtml filename="fetchmail.html"?>

  <sect1info>
<date>$Date$</date></sect1info>

  <title>Fetchmail-&fetchmail-version;</title>

  <indexterm zone="fetchmail">
    <primary sortas="a-Fetchmail">Fetchmail</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduction à Fetchmail</title>

    <para>
      Le paquet <application>Fetchmail</application> contient un programme de
récupération de courrier. Il récupère le courrier de serveurs de courrier
distants et les fait suivre au système de distribution de la machine locale
(client), afin qu'il puisse être lu par des agents d'utilisateur normaux.
    </para>

    &lfs110a_checked;

    <bridgehead renderas="sect3">Informations sur le paquet</bridgehead>
    <itemizedlist spacing='compact'>
      <listitem>
        <para>
          Téléchargement (HTTP)&nbsp;: <ulink url="&fetchmail-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Téléchargement (FTP)&nbsp;: <ulink url="&fetchmail-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Somme de contrôle MD5&nbsp;: &fetchmail-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Taille du téléchargement&nbsp;: &fetchmail-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation de l'espace disque requis&nbsp;: &fetchmail-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimation du temps de construction&nbsp;: &fetchmail-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dépendances de Fetchmail</bridgehead>

    <bridgehead renderas="sect4">Recommandées</bridgehead>
    <para role="recommended">
      un MDA local (<xref linkend="procmail"/>)
    </para>

    <bridgehead renderas="sect4">Facultatives</bridgehead>
    <para role="optional">
      
      <!-- hesiod was at ftp://athena-dist.mit.edu/pub/ATHENA/hesiod/ but that
      is dead. Debian had 3.2.1, git hub has a very old 3.1.
      libintl is part of gettext so enabled by default on LFS -->
<xref linkend="mitkrb"/> et <ulink
url="http://www.citi.umich.edu/projects/nfsv4/linux/">libgssapi</ulink>
    </para>

    <bridgehead renderas="sect4">Facultatives (pour lancer fetchmailconf)</bridgehead>
    <para role="optional">
      <xref linkend="python3"/>, construit après <xref linkend="tk"/> avec le
paquet <ulink url="http://python-future.org/">py-future</ulink>
    </para>

    <para condition="html" role="usernotes">Notes utilisateur&nbsp;: <ulink url="&blfs-wiki;/fetchmail"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installation de Fetchmail</title>

    <para>
      Créez un utilisateur dédié pour le programme fetchmail. Lancez les commandes
suivantes en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role="root"><userinput>useradd -c "Fetchmail User" -d /dev/null -g nogroup \
        -s /bin/false -u 38 fetchmail</userinput></screen>

    <para>
      Installez <application>Fetchmail</application> en exécutant les commandes
suivantes&nbsp;:
    </para>

<screen><userinput>PYTHON=python3 \
./configure --prefix=/usr \
            --enable-fallback=procmail &amp;&amp;
make</userinput></screen>

    <para>
      Pour tester les résultats lancez&nbsp;: <command>make check</command>.
    </para>


    <para>
      Maintenant, en tant qu'utilisateur <systemitem
class="username">root</systemitem>&nbsp;:
    </para>

<screen role='root'><userinput>make install                                  &amp;&amp;
chown -v fetchmail:nogroup /usr/bin/fetchmail</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Explication des commandes</title>

    <para>
      <parameter>PYTHON=python3</parameter>&nbsp;: une version de Python est
<emphasis>requise</emphasis>, mais seulement utilisé pour installer un
module qui permet à fetchmailconf de se lancer. Ce module n'est pas maintenu
et vous ne devriez pas l'utiliser.
    </para>

    <para>
      <parameter>--enable-fallback=procmail</parameter>&nbsp;: Ceci dit à
<application>Fetchmail</application> de confier le courrier entrant à
<application>Procmail</application> pour distribution, si le port 25 du
serveur de courrier n'est pas présent ou s'il ne répond pas.
    </para>

  </sect2>

  <sect2 role="configuration">
    <title>Configuration de Fetchmail</title>

    <sect3 id="fetchmail-config">
      <title>Fichiers de configuration</title>

      <para>
        <filename>~/.fetchmailrc</filename>
      </para>

      <indexterm zone="fetchmail fetchmail-config">
        <primary sortas="e-AA.fetchmailrc">~/.fetchmailrc</primary>
      </indexterm>

    </sect3>

    <sect3>
      <title>Informations sur la configuration</title>

      <note>
        <para>
          Si vous vous connectez à un serveur de courriel qui prend en charge le mode
SSL/TLS enveloppé ou «&nbsp;implicite&nbsp;» sur un port dédié (par défaut
993) vous devriez utiliser <command>fetchmail --ssl</command> ou ajouter
l'option «&nbsp;ssl&nbsp;» dans un rcfile.
        </para>
      </note>

<screen><userinput>cat &gt; ~/.fetchmailrc &lt;&lt; "EOF"
<literal>
# The logfile needs to exist when fetchmail is invoked, otherwise it will
# dump the details to the screen. As with all logs, you will need to rotate
# or clear it from time to time.
set logfile fetchmail.log
set no bouncemail
# You probably want to set your local username as the postmaster
set postmaster <replaceable>&lt;username&gt;</replaceable>

poll SERVERNAME :
    user <replaceable>&lt;isp_username&gt;</replaceable> pass <replaceable>&lt;password&gt;</replaceable>;
    mda "/usr/bin/procmail -f %F -d %T";</literal>
EOF

touch ~/fetchmail.log       &amp;&amp;
chmod -v 0600 ~/.fetchmailrc</userinput></screen>

      <para>
        Ceci est un exemple de configuration qui devrait suffire à la plupart des
gens. Vous pouvez rajouter autant d'utilisateurs et de serveurs que ce dont
vous avez besoin, en utilisant la même syntaxe.
      </para>

      <para>
        <command>man fetchmail</command>&nbsp;: Cherchez la section vers le bas
nommée <emphasis>CONFIGURATION EXAMPLES</emphasis> (exemples de
configuration). Cela donne quelques exemples rapides. Il y a d'innombrables
autres options de configuration, une fois que vous serez habitué.
      </para>

      <para>
        Si vous ne vous attendez pas à recevoir beaucoup de messages, vous pouvez
invoquer fetchmail quand vous souhaitez recevoir un message. Généralement,
il est soit invoqué en mode démon avec l'option <literal>-d</literal> soit
en ligne de commande soit dans <filename>.fetchmailrc</filename> (voir «
DAEMON MODE » sar la page de manual de fetchmailconf) soit invoqué depuis
une tâche cron.
      </para>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Contenu</title>

    <segmentedlist>
      <segtitle>Programmes installés</segtitle>
      <segtitle>Bibliothèques installées</segtitle>
      <segtitle>Répertoires installés</segtitle>

      <seglistitem>
        <seg>fetchmail et fetchmailconf</seg>
        <seg>Aucune</seg>
        <seg>Aucune</seg>
      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Descriptions courtes</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="fetchmail-prog">
        <term><command>fetchmail</command></term>
        <listitem>
          <para>
            exécuté en tant qu'utilisateur, ceci sourcera
<filename>~/.fetchmailrc</filename> et téléchargera le courrier adéquat
          </para>
          <indexterm zone="fetchmail fetchmail-prog">
            <primary sortas="b-fetchmail">fetchmail</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="fetchmailconf">
        <term><command>fetchmailconf</command></term>
        <listitem>
          <para>
            est conçu pour vous aider à paramétrer et à modifier un fichier de
configuration <filename>~/.fetchmailrc</filename>, en utilisant une
interface graphique <application>Tk</application>. Il est écrit pour
<application>Python</application> et le module Tkinter mais il a un
avertissement indiquant qu'il doit être mis à jour pour les options SSL de
fetchmail 6.4 et d'autres nouvelles options
          </para>
          
          <indexterm zone="fetchmail fetchmailconf">
            <!-- keep this description commented but fetchmailconf
               has been updated in the last months (June 2020). It can use
               Python 3, with the help of the "past" module.
          <para>

            is an unmaintained GUI command to assist in creating a
            <filename>~/.fetchmailrc</filename> configuration file and
            should not be used.
          </para>-->
<primary sortas="b-fetchmailconf">fetchmailconf</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
